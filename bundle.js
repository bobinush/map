(()=>{var q0=Object.create;var id=Object.defineProperty;var W0=Object.getOwnPropertyDescriptor;var X0=Object.getOwnPropertyNames;var $0=Object.getPrototypeOf,Y0=Object.prototype.hasOwnProperty;var rl=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,n)=>(typeof require<"u"?require:t)[n]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var qe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Z0=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of X0(t))!Y0.call(e,r)&&r!==n&&id(e,r,{get:()=>t[r],enumerable:!(i=W0(t,r))||i.enumerable});return e};var hr=(e,t,n)=>(n=e!=null?q0($0(e)):{},Z0(t||!e||!e.__esModule?id(n,"default",{value:e,enumerable:!0}):n,e));var ks=qe(($l,rd)=>{(function(e,t){typeof $l=="object"&&typeof rd<"u"?t($l):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t(e.leaflet={}))})($l,function(e){"use strict";var t="1.9.3";function n(g){var P,X,st,ft;for(X=1,st=arguments.length;X<st;X++){ft=arguments[X];for(P in ft)g[P]=ft[P]}return g}var i=Object.create||function(){function g(){}return function(P){return g.prototype=P,new g}}();function r(g,P){var X=Array.prototype.slice;if(g.bind)return g.bind.apply(g,X.call(arguments,1));var st=X.call(arguments,2);return function(){return g.apply(P,st.length?st.concat(X.call(arguments)):arguments)}}var o=0;function a(g){return"_leaflet_id"in g||(g._leaflet_id=++o),g._leaflet_id}function s(g,P,X){var st,ft,Mt,Dt;return Dt=function(){st=!1,ft&&(Mt.apply(X,ft),ft=!1)},Mt=function(){st?ft=arguments:(g.apply(X,arguments),setTimeout(Dt,P),st=!0)},Mt}function u(g,P,X){var st=P[1],ft=P[0],Mt=st-ft;return g===st&&X?g:((g-ft)%Mt+Mt)%Mt+ft}function f(){return!1}function c(g,P){if(P===!1)return g;var X=Math.pow(10,P===void 0?6:P);return Math.round(g*X)/X}function d(g){return g.trim?g.trim():g.replace(/^\s+|\s+$/g,"")}function m(g){return d(g).split(/\s+/)}function v(g,P){Object.prototype.hasOwnProperty.call(g,"options")||(g.options=g.options?i(g.options):{});for(var X in P)g.options[X]=P[X];return g.options}function p(g,P,X){var st=[];for(var ft in g)st.push(encodeURIComponent(X?ft.toUpperCase():ft)+"="+encodeURIComponent(g[ft]));return(!P||P.indexOf("?")===-1?"?":"&")+st.join("&")}var _=/\{ *([\w_ -]+) *\}/g;function y(g,P){return g.replace(_,function(X,st){var ft=P[st];if(ft===void 0)throw new Error("No value provided for variable "+X);return typeof ft=="function"&&(ft=ft(P)),ft})}var x=Array.isArray||function(g){return Object.prototype.toString.call(g)==="[object Array]"};function S(g,P){for(var X=0;X<g.length;X++)if(g[X]===P)return X;return-1}var O="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function B(g){return window["webkit"+g]||window["moz"+g]||window["ms"+g]}var U=0;function z(g){var P=+new Date,X=Math.max(0,16-(P-U));return U=P+X,window.setTimeout(g,X)}var q=window.requestAnimationFrame||B("RequestAnimationFrame")||z,G=window.cancelAnimationFrame||B("CancelAnimationFrame")||B("CancelRequestAnimationFrame")||function(g){window.clearTimeout(g)};function tt(g,P,X){if(X&&q===z)g.call(P);else return q.call(window,r(g,P))}function K(g){g&&G.call(window,g)}var D={__proto__:null,extend:n,create:i,bind:r,get lastId(){return o},stamp:a,throttle:s,wrapNum:u,falseFn:f,formatNum:c,trim:d,splitWords:m,setOptions:v,getParamString:p,template:y,isArray:x,indexOf:S,emptyImageUrl:O,requestFn:q,cancelFn:G,requestAnimFrame:tt,cancelAnimFrame:K};function N(){}N.extend=function(g){var P=function(){v(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},X=P.__super__=this.prototype,st=i(X);st.constructor=P,P.prototype=st;for(var ft in this)Object.prototype.hasOwnProperty.call(this,ft)&&ft!=="prototype"&&ft!=="__super__"&&(P[ft]=this[ft]);return g.statics&&n(P,g.statics),g.includes&&(Z(g.includes),n.apply(null,[st].concat(g.includes))),n(st,g),delete st.statics,delete st.includes,st.options&&(st.options=X.options?i(X.options):{},n(st.options,g.options)),st._initHooks=[],st.callInitHooks=function(){if(!this._initHooksCalled){X.callInitHooks&&X.callInitHooks.call(this),this._initHooksCalled=!0;for(var Mt=0,Dt=st._initHooks.length;Mt<Dt;Mt++)st._initHooks[Mt].call(this)}},P},N.include=function(g){var P=this.prototype.options;return n(this.prototype,g),g.options&&(this.prototype.options=P,this.mergeOptions(g.options)),this},N.mergeOptions=function(g){return n(this.prototype.options,g),this},N.addInitHook=function(g){var P=Array.prototype.slice.call(arguments,1),X=typeof g=="function"?g:function(){this[g].apply(this,P)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(X),this};function Z(g){if(!(typeof L>"u"||!L||!L.Mixin)){g=x(g)?g:[g];for(var P=0;P<g.length;P++)g[P]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var w={on:function(g,P,X){if(typeof g=="object")for(var st in g)this._on(st,g[st],P);else{g=m(g);for(var ft=0,Mt=g.length;ft<Mt;ft++)this._on(g[ft],P,X)}return this},off:function(g,P,X){if(!arguments.length)delete this._events;else if(typeof g=="object")for(var st in g)this._off(st,g[st],P);else{g=m(g);for(var ft=arguments.length===1,Mt=0,Dt=g.length;Mt<Dt;Mt++)ft?this._off(g[Mt]):this._off(g[Mt],P,X)}return this},_on:function(g,P,X,st){if(typeof P!="function"){console.warn("wrong listener type: "+typeof P);return}if(this._listens(g,P,X)===!1){X===this&&(X=void 0);var ft={fn:P,ctx:X};st&&(ft.once=!0),this._events=this._events||{},this._events[g]=this._events[g]||[],this._events[g].push(ft)}},_off:function(g,P,X){var st,ft,Mt;if(this._events&&(st=this._events[g],!!st)){if(arguments.length===1){if(this._firingCount)for(ft=0,Mt=st.length;ft<Mt;ft++)st[ft].fn=f;delete this._events[g];return}if(typeof P!="function"){console.warn("wrong listener type: "+typeof P);return}var Dt=this._listens(g,P,X);if(Dt!==!1){var Wt=st[Dt];this._firingCount&&(Wt.fn=f,this._events[g]=st=st.slice()),st.splice(Dt,1)}}},fire:function(g,P,X){if(!this.listens(g,X))return this;var st=n({},P,{type:g,target:this,sourceTarget:P&&P.sourceTarget||this});if(this._events){var ft=this._events[g];if(ft){this._firingCount=this._firingCount+1||1;for(var Mt=0,Dt=ft.length;Mt<Dt;Mt++){var Wt=ft[Mt],te=Wt.fn;Wt.once&&this.off(g,te,Wt.ctx),te.call(Wt.ctx||this,st)}this._firingCount--}}return X&&this._propagateEvent(st),this},listens:function(g,P,X,st){typeof g!="string"&&console.warn('"string" type argument expected');var ft=P;typeof P!="function"&&(st=!!P,ft=void 0,X=void 0);var Mt=this._events&&this._events[g];if(Mt&&Mt.length&&this._listens(g,ft,X)!==!1)return!0;if(st){for(var Dt in this._eventParents)if(this._eventParents[Dt].listens(g,P,X,st))return!0}return!1},_listens:function(g,P,X){if(!this._events)return!1;var st=this._events[g]||[];if(!P)return!!st.length;X===this&&(X=void 0);for(var ft=0,Mt=st.length;ft<Mt;ft++)if(st[ft].fn===P&&st[ft].ctx===X)return ft;return!1},once:function(g,P,X){if(typeof g=="object")for(var st in g)this._on(st,g[st],P,!0);else{g=m(g);for(var ft=0,Mt=g.length;ft<Mt;ft++)this._on(g[ft],P,X,!0)}return this},addEventParent:function(g){return this._eventParents=this._eventParents||{},this._eventParents[a(g)]=g,this},removeEventParent:function(g){return this._eventParents&&delete this._eventParents[a(g)],this},_propagateEvent:function(g){for(var P in this._eventParents)this._eventParents[P].fire(g.type,n({layer:g.target,propagatedFrom:g.target},g),!0)}};w.addEventListener=w.on,w.removeEventListener=w.clearAllEventListeners=w.off,w.addOneTimeEventListener=w.once,w.fireEvent=w.fire,w.hasEventListeners=w.listens;var C=N.extend(w);function k(g,P,X){this.x=X?Math.round(g):g,this.y=X?Math.round(P):P}var T=Math.trunc||function(g){return g>0?Math.floor(g):Math.ceil(g)};k.prototype={clone:function(){return new k(this.x,this.y)},add:function(g){return this.clone()._add(R(g))},_add:function(g){return this.x+=g.x,this.y+=g.y,this},subtract:function(g){return this.clone()._subtract(R(g))},_subtract:function(g){return this.x-=g.x,this.y-=g.y,this},divideBy:function(g){return this.clone()._divideBy(g)},_divideBy:function(g){return this.x/=g,this.y/=g,this},multiplyBy:function(g){return this.clone()._multiplyBy(g)},_multiplyBy:function(g){return this.x*=g,this.y*=g,this},scaleBy:function(g){return new k(this.x*g.x,this.y*g.y)},unscaleBy:function(g){return new k(this.x/g.x,this.y/g.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=T(this.x),this.y=T(this.y),this},distanceTo:function(g){g=R(g);var P=g.x-this.x,X=g.y-this.y;return Math.sqrt(P*P+X*X)},equals:function(g){return g=R(g),g.x===this.x&&g.y===this.y},contains:function(g){return g=R(g),Math.abs(g.x)<=Math.abs(this.x)&&Math.abs(g.y)<=Math.abs(this.y)},toString:function(){return"Point("+c(this.x)+", "+c(this.y)+")"}};function R(g,P,X){return g instanceof k?g:x(g)?new k(g[0],g[1]):g==null?g:typeof g=="object"&&"x"in g&&"y"in g?new k(g.x,g.y):new k(g,P,X)}function F(g,P){if(g)for(var X=P?[g,P]:g,st=0,ft=X.length;st<ft;st++)this.extend(X[st])}F.prototype={extend:function(g){var P,X;if(!g)return this;if(g instanceof k||typeof g[0]=="number"||"x"in g)P=X=R(g);else if(g=H(g),P=g.min,X=g.max,!P||!X)return this;return!this.min&&!this.max?(this.min=P.clone(),this.max=X.clone()):(this.min.x=Math.min(P.x,this.min.x),this.max.x=Math.max(X.x,this.max.x),this.min.y=Math.min(P.y,this.min.y),this.max.y=Math.max(X.y,this.max.y)),this},getCenter:function(g){return R((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,g)},getBottomLeft:function(){return R(this.min.x,this.max.y)},getTopRight:function(){return R(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(g){var P,X;return typeof g[0]=="number"||g instanceof k?g=R(g):g=H(g),g instanceof F?(P=g.min,X=g.max):P=X=g,P.x>=this.min.x&&X.x<=this.max.x&&P.y>=this.min.y&&X.y<=this.max.y},intersects:function(g){g=H(g);var P=this.min,X=this.max,st=g.min,ft=g.max,Mt=ft.x>=P.x&&st.x<=X.x,Dt=ft.y>=P.y&&st.y<=X.y;return Mt&&Dt},overlaps:function(g){g=H(g);var P=this.min,X=this.max,st=g.min,ft=g.max,Mt=ft.x>P.x&&st.x<X.x,Dt=ft.y>P.y&&st.y<X.y;return Mt&&Dt},isValid:function(){return!!(this.min&&this.max)},pad:function(g){var P=this.min,X=this.max,st=Math.abs(P.x-X.x)*g,ft=Math.abs(P.y-X.y)*g;return H(R(P.x-st,P.y-ft),R(X.x+st,X.y+ft))},equals:function(g){return g?(g=H(g),this.min.equals(g.getTopLeft())&&this.max.equals(g.getBottomRight())):!1}};function H(g,P){return!g||g instanceof F?g:new F(g,P)}function it(g,P){if(g)for(var X=P?[g,P]:g,st=0,ft=X.length;st<ft;st++)this.extend(X[st])}it.prototype={extend:function(g){var P=this._southWest,X=this._northEast,st,ft;if(g instanceof dt)st=g,ft=g;else if(g instanceof it){if(st=g._southWest,ft=g._northEast,!st||!ft)return this}else return g?this.extend($(g)||ot(g)):this;return!P&&!X?(this._southWest=new dt(st.lat,st.lng),this._northEast=new dt(ft.lat,ft.lng)):(P.lat=Math.min(st.lat,P.lat),P.lng=Math.min(st.lng,P.lng),X.lat=Math.max(ft.lat,X.lat),X.lng=Math.max(ft.lng,X.lng)),this},pad:function(g){var P=this._southWest,X=this._northEast,st=Math.abs(P.lat-X.lat)*g,ft=Math.abs(P.lng-X.lng)*g;return new it(new dt(P.lat-st,P.lng-ft),new dt(X.lat+st,X.lng+ft))},getCenter:function(){return new dt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new dt(this.getNorth(),this.getWest())},getSouthEast:function(){return new dt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(g){typeof g[0]=="number"||g instanceof dt||"lat"in g?g=$(g):g=ot(g);var P=this._southWest,X=this._northEast,st,ft;return g instanceof it?(st=g.getSouthWest(),ft=g.getNorthEast()):st=ft=g,st.lat>=P.lat&&ft.lat<=X.lat&&st.lng>=P.lng&&ft.lng<=X.lng},intersects:function(g){g=ot(g);var P=this._southWest,X=this._northEast,st=g.getSouthWest(),ft=g.getNorthEast(),Mt=ft.lat>=P.lat&&st.lat<=X.lat,Dt=ft.lng>=P.lng&&st.lng<=X.lng;return Mt&&Dt},overlaps:function(g){g=ot(g);var P=this._southWest,X=this._northEast,st=g.getSouthWest(),ft=g.getNorthEast(),Mt=ft.lat>P.lat&&st.lat<X.lat,Dt=ft.lng>P.lng&&st.lng<X.lng;return Mt&&Dt},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(g,P){return g?(g=ot(g),this._southWest.equals(g.getSouthWest(),P)&&this._northEast.equals(g.getNorthEast(),P)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ot(g,P){return g instanceof it?g:new it(g,P)}function dt(g,P,X){if(isNaN(g)||isNaN(P))throw new Error("Invalid LatLng object: ("+g+", "+P+")");this.lat=+g,this.lng=+P,X!==void 0&&(this.alt=+X)}dt.prototype={equals:function(g,P){if(!g)return!1;g=$(g);var X=Math.max(Math.abs(this.lat-g.lat),Math.abs(this.lng-g.lng));return X<=(P===void 0?1e-9:P)},toString:function(g){return"LatLng("+c(this.lat,g)+", "+c(this.lng,g)+")"},distanceTo:function(g){return W.distance(this,$(g))},wrap:function(){return W.wrapLatLng(this)},toBounds:function(g){var P=180*g/40075017,X=P/Math.cos(Math.PI/180*this.lat);return ot([this.lat-P,this.lng-X],[this.lat+P,this.lng+X])},clone:function(){return new dt(this.lat,this.lng,this.alt)}};function $(g,P,X){return g instanceof dt?g:x(g)&&typeof g[0]!="object"?g.length===3?new dt(g[0],g[1],g[2]):g.length===2?new dt(g[0],g[1]):null:g==null?g:typeof g=="object"&&"lat"in g?new dt(g.lat,"lng"in g?g.lng:g.lon,g.alt):P===void 0?null:new dt(g,P,X)}var ct={latLngToPoint:function(g,P){var X=this.projection.project(g),st=this.scale(P);return this.transformation._transform(X,st)},pointToLatLng:function(g,P){var X=this.scale(P),st=this.transformation.untransform(g,X);return this.projection.unproject(st)},project:function(g){return this.projection.project(g)},unproject:function(g){return this.projection.unproject(g)},scale:function(g){return 256*Math.pow(2,g)},zoom:function(g){return Math.log(g/256)/Math.LN2},getProjectedBounds:function(g){if(this.infinite)return null;var P=this.projection.bounds,X=this.scale(g),st=this.transformation.transform(P.min,X),ft=this.transformation.transform(P.max,X);return new F(st,ft)},infinite:!1,wrapLatLng:function(g){var P=this.wrapLng?u(g.lng,this.wrapLng,!0):g.lng,X=this.wrapLat?u(g.lat,this.wrapLat,!0):g.lat,st=g.alt;return new dt(X,P,st)},wrapLatLngBounds:function(g){var P=g.getCenter(),X=this.wrapLatLng(P),st=P.lat-X.lat,ft=P.lng-X.lng;if(st===0&&ft===0)return g;var Mt=g.getSouthWest(),Dt=g.getNorthEast(),Wt=new dt(Mt.lat-st,Mt.lng-ft),te=new dt(Dt.lat-st,Dt.lng-ft);return new it(Wt,te)}},W=n({},ct,{wrapLng:[-180,180],R:6371e3,distance:function(g,P){var X=Math.PI/180,st=g.lat*X,ft=P.lat*X,Mt=Math.sin((P.lat-g.lat)*X/2),Dt=Math.sin((P.lng-g.lng)*X/2),Wt=Mt*Mt+Math.cos(st)*Math.cos(ft)*Dt*Dt,te=2*Math.atan2(Math.sqrt(Wt),Math.sqrt(1-Wt));return this.R*te}}),V=6378137,rt={R:V,MAX_LATITUDE:85.0511287798,project:function(g){var P=Math.PI/180,X=this.MAX_LATITUDE,st=Math.max(Math.min(X,g.lat),-X),ft=Math.sin(st*P);return new k(this.R*g.lng*P,this.R*Math.log((1+ft)/(1-ft))/2)},unproject:function(g){var P=180/Math.PI;return new dt((2*Math.atan(Math.exp(g.y/this.R))-Math.PI/2)*P,g.x*P/this.R)},bounds:function(){var g=V*Math.PI;return new F([-g,-g],[g,g])}()};function mt(g,P,X,st){if(x(g)){this._a=g[0],this._b=g[1],this._c=g[2],this._d=g[3];return}this._a=g,this._b=P,this._c=X,this._d=st}mt.prototype={transform:function(g,P){return this._transform(g.clone(),P)},_transform:function(g,P){return P=P||1,g.x=P*(this._a*g.x+this._b),g.y=P*(this._c*g.y+this._d),g},untransform:function(g,P){return P=P||1,new k((g.x/P-this._b)/this._a,(g.y/P-this._d)/this._c)}};function wt(g,P,X,st){return new mt(g,P,X,st)}var _t=n({},W,{code:"EPSG:3857",projection:rt,transformation:function(){var g=.5/(Math.PI*rt.R);return wt(g,.5,-g,.5)}()}),Ct=n({},_t,{code:"EPSG:900913"});function Ft(g){return document.createElementNS("http://www.w3.org/2000/svg",g)}function It(g,P){var X="",st,ft,Mt,Dt,Wt,te;for(st=0,Mt=g.length;st<Mt;st++){for(Wt=g[st],ft=0,Dt=Wt.length;ft<Dt;ft++)te=Wt[ft],X+=(ft?"L":"M")+te.x+" "+te.y;X+=P?jt.svg?"z":"x":""}return X||"M0 0"}var vt=document.documentElement.style,kt="ActiveXObject"in window,gt=kt&&!document.addEventListener,ut="msLaunchUri"in navigator&&!("documentMode"in document),Q=qt("webkit"),Y=qt("android"),et=qt("android 2")||qt("android 3"),lt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),pt=Y&&qt("Google")&&lt<537&&!("AudioNode"in window),bt=!!window.opera,Et=!ut&&qt("chrome"),Ot=qt("gecko")&&!Q&&!bt&&!kt,zt=!Et&&qt("safari"),Gt=qt("phantom"),Jt="OTransition"in vt,Kt=navigator.platform.indexOf("Win")===0,ie=kt&&"transition"in vt,Xt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!et,Ut="MozPerspective"in vt,_e=!window.L_DISABLE_3D&&(ie||Xt||Ut)&&!Jt&&!Gt,le=typeof orientation<"u"||qt("mobile"),ye=le&&Q,Ze=le&&Xt,ce=!window.PointerEvent&&window.MSPointerEvent,ke=!!(window.PointerEvent||ce),He="ontouchstart"in window||!!window.TouchEvent,$t=!window.L_NO_TOUCH&&(He||ke),Te=le&&bt,bi=le&&Ot,ue=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Fe=function(){var g=!1;try{var P=Object.defineProperty({},"passive",{get:function(){g=!0}});window.addEventListener("testPassiveEventSupport",f,P),window.removeEventListener("testPassiveEventSupport",f,P)}catch{}return g}(),ai=function(){return!!document.createElement("canvas").getContext}(),Le=!!(document.createElementNS&&Ft("svg").createSVGRect),Oe=!!Le&&function(){var g=document.createElement("div");return g.innerHTML="<svg/>",(g.firstChild&&g.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Qi=!Le&&function(){try{var g=document.createElement("div");g.innerHTML='<v:shape adj="1"/>';var P=g.firstChild;return P.style.behavior="url(#default#VML)",P&&typeof P.adj=="object"}catch{return!1}}(),We=navigator.platform.indexOf("Mac")===0,At=navigator.platform.indexOf("Linux")===0;function qt(g){return navigator.userAgent.toLowerCase().indexOf(g)>=0}var jt={ie:kt,ielt9:gt,edge:ut,webkit:Q,android:Y,android23:et,androidStock:pt,opera:bt,chrome:Et,gecko:Ot,safari:zt,phantom:Gt,opera12:Jt,win:Kt,ie3d:ie,webkit3d:Xt,gecko3d:Ut,any3d:_e,mobile:le,mobileWebkit:ye,mobileWebkit3d:Ze,msPointer:ce,pointer:ke,touch:$t,touchNative:He,mobileOpera:Te,mobileGecko:bi,retina:ue,passiveEvents:Fe,canvas:ai,svg:Le,vml:Qi,inlineSvg:Oe,mac:We,linux:At},ae=jt.msPointer?"MSPointerDown":"pointerdown",Qe=jt.msPointer?"MSPointerMove":"pointermove",se=jt.msPointer?"MSPointerUp":"pointerup",ve=jt.msPointer?"MSPointerCancel":"pointercancel",$e={touchstart:ae,touchmove:Qe,touchend:se,touchcancel:ve},Ae={touchstart:Mi,touchmove:lr,touchend:lr,touchcancel:lr},fe={},Ye=!1;function Ue(g,P,X){return P==="touchstart"&&oi(),Ae[P]?(X=Ae[P].bind(this,X),g.addEventListener($e[P],X,!1),X):(console.warn("wrong event specified:",P),f)}function ii(g,P,X){if(!$e[P]){console.warn("wrong event specified:",P);return}g.removeEventListener($e[P],X,!1)}function Ke(g){fe[g.pointerId]=g}function fr(g){fe[g.pointerId]&&(fe[g.pointerId]=g)}function Je(g){delete fe[g.pointerId]}function oi(){Ye||(document.addEventListener(ae,Ke,!0),document.addEventListener(Qe,fr,!0),document.addEventListener(se,Je,!0),document.addEventListener(ve,Je,!0),Ye=!0)}function lr(g,P){if(P.pointerType!==(P.MSPOINTER_TYPE_MOUSE||"mouse")){P.touches=[];for(var X in fe)P.touches.push(fe[X]);P.changedTouches=[P],g(P)}}function Mi(g,P){P.MSPOINTER_TYPE_TOUCH&&P.pointerType===P.MSPOINTER_TYPE_TOUCH&&Rt(P),lr(g,P)}function Tt(g){var P={},X,st;for(st in g)X=g[st],P[st]=X&&X.bind?X.bind(g):X;return g=P,P.type="dblclick",P.detail=2,P.isTrusted=!1,P._simulated=!0,P}var Ht=200;function re(g,P){g.addEventListener("dblclick",P);var X=0,st;function ft(Mt){if(Mt.detail!==1){st=Mt.detail;return}if(!(Mt.pointerType==="mouse"||Mt.sourceCapabilities&&!Mt.sourceCapabilities.firesTouchEvents)){var Dt=Nt(Mt);if(!(Dt.some(function(te){return te instanceof HTMLLabelElement&&te.attributes.for})&&!Dt.some(function(te){return te instanceof HTMLInputElement||te instanceof HTMLSelectElement}))){var Wt=Date.now();Wt-X<=Ht?(st++,st===2&&P(Tt(Mt))):st=1,X=Wt}}}return g.addEventListener("click",ft),{dblclick:P,simDblclick:ft}}function Qt(g,P){g.removeEventListener("dblclick",P.dblclick),g.removeEventListener("click",P.simDblclick)}var he=jn(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ee=jn(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ie=Ee==="webkitTransition"||Ee==="OTransition"?Ee+"End":"transitionend";function ti(g){return typeof g=="string"?document.getElementById(g):g}function Ge(g,P){var X=g.style[P]||g.currentStyle&&g.currentStyle[P];if((!X||X==="auto")&&document.defaultView){var st=document.defaultView.getComputedStyle(g,null);X=st?st[P]:null}return X==="auto"?null:X}function we(g,P,X){var st=document.createElement(g);return st.className=P||"",X&&X.appendChild(st),st}function pe(g){var P=g.parentNode;P&&P.removeChild(g)}function yi(g){for(;g.firstChild;)g.removeChild(g.firstChild)}function ri(g){var P=g.parentNode;P&&P.lastChild!==g&&P.appendChild(g)}function li(g){var P=g.parentNode;P&&P.firstChild!==g&&P.insertBefore(g,P.firstChild)}function wi(g,P){if(g.classList!==void 0)return g.classList.contains(P);var X=Ur(g);return X.length>0&&new RegExp("(^|\\s)"+P+"(\\s|$)").test(X)}function me(g,P){if(g.classList!==void 0)for(var X=m(P),st=0,ft=X.length;st<ft;st++)g.classList.add(X[st]);else if(!wi(g,P)){var Mt=Ur(g);yr(g,(Mt?Mt+" ":"")+P)}}function ui(g,P){g.classList!==void 0?g.classList.remove(P):yr(g,d((" "+Ur(g)+" ").replace(" "+P+" "," ")))}function yr(g,P){g.className.baseVal===void 0?g.className=P:g.className.baseVal=P}function Ur(g){return g.correspondingElement&&(g=g.correspondingElement),g.className.baseVal===void 0?g.className:g.className.baseVal}function Se(g,P){"opacity"in g.style?g.style.opacity=P:"filter"in g.style&&Mn(g,P)}function Mn(g,P){var X=!1,st="DXImageTransform.Microsoft.Alpha";try{X=g.filters.item(st)}catch{if(P===1)return}P=Math.round(P*100),X?(X.Enabled=P!==100,X.Opacity=P):g.style.filter+=" progid:"+st+"(opacity="+P+")"}function jn(g){for(var P=document.documentElement.style,X=0;X<g.length;X++)if(g[X]in P)return g[X];return!1}function ni(g,P,X){var st=P||new k(0,0);g.style[he]=(jt.ie3d?"translate("+st.x+"px,"+st.y+"px)":"translate3d("+st.x+"px,"+st.y+"px,0)")+(X?" scale("+X+")":"")}function ze(g,P){g._leaflet_pos=P,jt.any3d?ni(g,P):(g.style.left=P.x+"px",g.style.top=P.y+"px")}function kr(g){return g._leaflet_pos||new k(0,0)}var Tr,gn,oe;if("onselectstart"in document)Tr=function(){je(window,"selectstart",Rt)},gn=function(){ci(window,"selectstart",Rt)};else{var Rr=jn(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Tr=function(){if(Rr){var g=document.documentElement.style;oe=g[Rr],g[Rr]="none"}},gn=function(){Rr&&(document.documentElement.style[Rr]=oe,oe=void 0)}}function gi(){je(window,"dragstart",Rt)}function vr(){ci(window,"dragstart",Rt)}var rn,mr;function hi(g){for(;g.tabIndex===-1;)g=g.parentNode;g.style&&(fi(),rn=g,mr=g.style.outline,g.style.outline="none",je(window,"keydown",fi))}function fi(){rn&&(rn.style.outline=mr,rn=void 0,mr=void 0,ci(window,"keydown",fi))}function Si(g){do g=g.parentNode;while((!g.offsetWidth||!g.offsetHeight)&&g!==document.body);return g}function Vr(g){var P=g.getBoundingClientRect();return{x:P.width/g.offsetWidth||1,y:P.height/g.offsetHeight||1,boundingClientRect:P}}var ns={__proto__:null,TRANSFORM:he,TRANSITION:Ee,TRANSITION_END:Ie,get:ti,getStyle:Ge,create:we,remove:pe,empty:yi,toFront:ri,toBack:li,hasClass:wi,addClass:me,removeClass:ui,setClass:yr,getClass:Ur,setOpacity:Se,testProp:jn,setTransform:ni,setPosition:ze,getPosition:kr,get disableTextSelection(){return Tr},get enableTextSelection(){return gn},disableImageDrag:gi,enableImageDrag:vr,preventOutline:hi,restoreOutline:fi,getSizedParentNode:Si,getScale:Vr};function je(g,P,X,st){if(P&&typeof P=="object")for(var ft in P)j(g,ft,P[ft],X);else{P=m(P);for(var Mt=0,Dt=P.length;Mt<Dt;Mt++)j(g,P[Mt],X,st)}return this}var qr="_leaflet_events";function ci(g,P,X,st){if(arguments.length===1)M(g),delete g[qr];else if(P&&typeof P=="object")for(var ft in P)nt(g,ft,P[ft],X);else if(P=m(P),arguments.length===2)M(g,function(Wt){return S(P,Wt)!==-1});else for(var Mt=0,Dt=P.length;Mt<Dt;Mt++)nt(g,P[Mt],X,st);return this}function M(g,P){for(var X in g[qr]){var st=X.split(/\d/)[0];(!P||P(st))&&nt(g,st,null,null,X)}}var A={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function j(g,P,X,st){var ft=P+a(X)+(st?"_"+a(st):"");if(g[qr]&&g[qr][ft])return this;var Mt=function(Wt){return X.call(st||g,Wt||window.event)},Dt=Mt;!jt.touchNative&&jt.pointer&&P.indexOf("touch")===0?Mt=Ue(g,P,Mt):jt.touch&&P==="dblclick"?Mt=re(g,Mt):"addEventListener"in g?P==="touchstart"||P==="touchmove"||P==="wheel"||P==="mousewheel"?g.addEventListener(A[P]||P,Mt,jt.passiveEvents?{passive:!1}:!1):P==="mouseenter"||P==="mouseleave"?(Mt=function(Wt){Wt=Wt||window.event,ge(g,Wt)&&Dt(Wt)},g.addEventListener(A[P],Mt,!1)):g.addEventListener(P,Dt,!1):g.attachEvent("on"+P,Mt),g[qr]=g[qr]||{},g[qr][ft]=Mt}function nt(g,P,X,st,ft){ft=ft||P+a(X)+(st?"_"+a(st):"");var Mt=g[qr]&&g[qr][ft];if(!Mt)return this;!jt.touchNative&&jt.pointer&&P.indexOf("touch")===0?ii(g,P,Mt):jt.touch&&P==="dblclick"?Qt(g,Mt):"removeEventListener"in g?g.removeEventListener(A[P]||P,Mt,!1):g.detachEvent("on"+P,Mt),g[qr][ft]=null}function ht(g){return g.stopPropagation?g.stopPropagation():g.originalEvent?g.originalEvent._stopped=!0:g.cancelBubble=!0,this}function xt(g){return j(g,"wheel",ht),this}function Lt(g){return je(g,"mousedown touchstart dblclick contextmenu",ht),g._leaflet_disable_click=!0,this}function Rt(g){return g.preventDefault?g.preventDefault():g.returnValue=!1,this}function Pt(g){return Rt(g),ht(g),this}function Nt(g){if(g.composedPath)return g.composedPath();for(var P=[],X=g.target;X;)P.push(X),X=X.parentNode;return P}function Vt(g,P){if(!P)return new k(g.clientX,g.clientY);var X=Vr(P),st=X.boundingClientRect;return new k((g.clientX-st.left)/X.x-P.clientLeft,(g.clientY-st.top)/X.y-P.clientTop)}var ne=jt.linux&&jt.chrome?window.devicePixelRatio:jt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Zt(g){return jt.edge?g.wheelDeltaY/2:g.deltaY&&g.deltaMode===0?-g.deltaY/ne:g.deltaY&&g.deltaMode===1?-g.deltaY*20:g.deltaY&&g.deltaMode===2?-g.deltaY*60:g.deltaX||g.deltaZ?0:g.wheelDelta?(g.wheelDeltaY||g.wheelDelta)/2:g.detail&&Math.abs(g.detail)<32765?-g.detail*20:g.detail?g.detail/-32765*60:0}function ge(g,P){var X=P.relatedTarget;if(!X)return!0;try{for(;X&&X!==g;)X=X.parentNode}catch{return!1}return X!==g}var Ce={__proto__:null,on:je,off:ci,stopPropagation:ht,disableScrollPropagation:xt,disableClickPropagation:Lt,preventDefault:Rt,stop:Pt,getPropagationPath:Nt,getMousePosition:Vt,getWheelDelta:Zt,isExternalTarget:ge,addListener:je,removeListener:ci},Ne=C.extend({run:function(g,P,X,st){this.stop(),this._el=g,this._inProgress=!0,this._duration=X||.25,this._easeOutPower=1/Math.max(st||.5,.2),this._startPos=kr(g),this._offset=P.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=tt(this._animate,this),this._step()},_step:function(g){var P=+new Date-this._startTime,X=this._duration*1e3;P<X?this._runFrame(this._easeOut(P/X),g):(this._runFrame(1),this._complete())},_runFrame:function(g,P){var X=this._startPos.add(this._offset.multiplyBy(g));P&&X._round(),ze(this._el,X),this.fire("step")},_complete:function(){K(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(g){return 1-Math.pow(1-g,this._easeOutPower)}}),be=C.extend({options:{crs:_t,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(g,P){P=v(this,P),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(g),this._initLayout(),this._onResize=r(this._onResize,this),this._initEvents(),P.maxBounds&&this.setMaxBounds(P.maxBounds),P.zoom!==void 0&&(this._zoom=this._limitZoom(P.zoom)),P.center&&P.zoom!==void 0&&this.setView($(P.center),P.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ee&&jt.any3d&&!jt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),je(this._proxy,Ie,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(g,P,X){if(P=P===void 0?this._zoom:this._limitZoom(P),g=this._limitCenter($(g),P,this.options.maxBounds),X=X||{},this._stop(),this._loaded&&!X.reset&&X!==!0){X.animate!==void 0&&(X.zoom=n({animate:X.animate},X.zoom),X.pan=n({animate:X.animate,duration:X.duration},X.pan));var st=this._zoom!==P?this._tryAnimatedZoom&&this._tryAnimatedZoom(g,P,X.zoom):this._tryAnimatedPan(g,X.pan);if(st)return clearTimeout(this._sizeTimer),this}return this._resetView(g,P,X.pan&&X.pan.noMoveStart),this},setZoom:function(g,P){return this._loaded?this.setView(this.getCenter(),g,{zoom:P}):(this._zoom=g,this)},zoomIn:function(g,P){return g=g||(jt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+g,P)},zoomOut:function(g,P){return g=g||(jt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-g,P)},setZoomAround:function(g,P,X){var st=this.getZoomScale(P),ft=this.getSize().divideBy(2),Mt=g instanceof k?g:this.latLngToContainerPoint(g),Dt=Mt.subtract(ft).multiplyBy(1-1/st),Wt=this.containerPointToLatLng(ft.add(Dt));return this.setView(Wt,P,{zoom:X})},_getBoundsCenterZoom:function(g,P){P=P||{},g=g.getBounds?g.getBounds():ot(g);var X=R(P.paddingTopLeft||P.padding||[0,0]),st=R(P.paddingBottomRight||P.padding||[0,0]),ft=this.getBoundsZoom(g,!1,X.add(st));if(ft=typeof P.maxZoom=="number"?Math.min(P.maxZoom,ft):ft,ft===1/0)return{center:g.getCenter(),zoom:ft};var Mt=st.subtract(X).divideBy(2),Dt=this.project(g.getSouthWest(),ft),Wt=this.project(g.getNorthEast(),ft),te=this.unproject(Dt.add(Wt).divideBy(2).add(Mt),ft);return{center:te,zoom:ft}},fitBounds:function(g,P){if(g=ot(g),!g.isValid())throw new Error("Bounds are not valid.");var X=this._getBoundsCenterZoom(g,P);return this.setView(X.center,X.zoom,P)},fitWorld:function(g){return this.fitBounds([[-90,-180],[90,180]],g)},panTo:function(g,P){return this.setView(g,this._zoom,{pan:P})},panBy:function(g,P){if(g=R(g).round(),P=P||{},!g.x&&!g.y)return this.fire("moveend");if(P.animate!==!0&&!this.getSize().contains(g))return this._resetView(this.unproject(this.project(this.getCenter()).add(g)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ne,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),P.noMoveStart||this.fire("movestart"),P.animate!==!1){me(this._mapPane,"leaflet-pan-anim");var X=this._getMapPanePos().subtract(g).round();this._panAnim.run(this._mapPane,X,P.duration||.25,P.easeLinearity)}else this._rawPanBy(g),this.fire("move").fire("moveend");return this},flyTo:function(g,P,X){if(X=X||{},X.animate===!1||!jt.any3d)return this.setView(g,P,X);this._stop();var st=this.project(this.getCenter()),ft=this.project(g),Mt=this.getSize(),Dt=this._zoom;g=$(g),P=P===void 0?Dt:P;var Wt=Math.max(Mt.x,Mt.y),te=Wt*this.getZoomScale(Dt,P),de=ft.distanceTo(st)||1,De=1.42,Xe=De*De;function _i(ur){var Jo=ur?-1:1,Xn=ur?te:Wt,Or=te*te-Wt*Wt+Jo*Xe*Xe*de*de,Xl=2*Xn*Xe*de,So=Or/Xl,l=Math.sqrt(So*So+1)-So,h=l<1e-9?-18:Math.log(l);return h}function Ln(ur){return(Math.exp(ur)-Math.exp(-ur))/2}function Ws(ur){return(Math.exp(ur)+Math.exp(-ur))/2}function Xs(ur){return Ln(ur)/Ws(ur)}var Wn=_i(0);function Mo(ur){return Wt*(Ws(Wn)/Ws(Wn+De*ur))}function Bo(ur){return Wt*(Ws(Wn)*Xs(Wn+De*ur)-Ln(Wn))/Xe}function oo(ur){return 1-Math.pow(1-ur,1.5)}var ei=Date.now(),Ds=(_i(1)-Wn)/De,Fo=X.duration?1e3*X.duration:1e3*Ds*.8;function $s(){var ur=(Date.now()-ei)/Fo,Jo=oo(ur)*Ds;ur<=1?(this._flyToFrame=tt($s,this),this._move(this.unproject(st.add(ft.subtract(st).multiplyBy(Bo(Jo)/de)),Dt),this.getScaleZoom(Wt/Mo(Jo),Dt),{flyTo:!0})):this._move(g,P)._moveEnd(!0)}return this._moveStart(!0,X.noMoveStart),$s.call(this),this},flyToBounds:function(g,P){var X=this._getBoundsCenterZoom(g,P);return this.flyTo(X.center,X.zoom,P)},setMaxBounds:function(g){return g=ot(g),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),g.isValid()?(this.options.maxBounds=g,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(g){var P=this.options.minZoom;return this.options.minZoom=g,this._loaded&&P!==g&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(g):this},setMaxZoom:function(g){var P=this.options.maxZoom;return this.options.maxZoom=g,this._loaded&&P!==g&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(g):this},panInsideBounds:function(g,P){this._enforcingBounds=!0;var X=this.getCenter(),st=this._limitCenter(X,this._zoom,ot(g));return X.equals(st)||this.panTo(st,P),this._enforcingBounds=!1,this},panInside:function(g,P){P=P||{};var X=R(P.paddingTopLeft||P.padding||[0,0]),st=R(P.paddingBottomRight||P.padding||[0,0]),ft=this.project(this.getCenter()),Mt=this.project(g),Dt=this.getPixelBounds(),Wt=H([Dt.min.add(X),Dt.max.subtract(st)]),te=Wt.getSize();if(!Wt.contains(Mt)){this._enforcingBounds=!0;var de=Mt.subtract(Wt.getCenter()),De=Wt.extend(Mt).getSize().subtract(te);ft.x+=de.x<0?-De.x:De.x,ft.y+=de.y<0?-De.y:De.y,this.panTo(this.unproject(ft),P),this._enforcingBounds=!1}return this},invalidateSize:function(g){if(!this._loaded)return this;g=n({animate:!1,pan:!0},g===!0?{animate:!0}:g);var P=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var X=this.getSize(),st=P.divideBy(2).round(),ft=X.divideBy(2).round(),Mt=st.subtract(ft);return!Mt.x&&!Mt.y?this:(g.animate&&g.pan?this.panBy(Mt):(g.pan&&this._rawPanBy(Mt),this.fire("move"),g.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:P,newSize:X}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(g){if(g=this._locateOptions=n({timeout:1e4,watch:!1},g),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var P=r(this._handleGeolocationResponse,this),X=r(this._handleGeolocationError,this);return g.watch?this._locationWatchId=navigator.geolocation.watchPosition(P,X,g):navigator.geolocation.getCurrentPosition(P,X,g),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(g){if(this._container._leaflet_id){var P=g.code,X=g.message||(P===1?"permission denied":P===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:P,message:"Geolocation error: "+X+"."})}},_handleGeolocationResponse:function(g){if(this._container._leaflet_id){var P=g.coords.latitude,X=g.coords.longitude,st=new dt(P,X),ft=st.toBounds(g.coords.accuracy*2),Mt=this._locateOptions;if(Mt.setView){var Dt=this.getBoundsZoom(ft);this.setView(st,Mt.maxZoom?Math.min(Dt,Mt.maxZoom):Dt)}var Wt={latlng:st,bounds:ft,timestamp:g.timestamp};for(var te in g.coords)typeof g.coords[te]=="number"&&(Wt[te]=g.coords[te]);this.fire("locationfound",Wt)}},addHandler:function(g,P){if(!P)return this;var X=this[g]=new P(this);return this._handlers.push(X),this.options[g]&&X.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),pe(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(K(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var g;for(g in this._layers)this._layers[g].remove();for(g in this._panes)pe(this._panes[g]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(g,P){var X="leaflet-pane"+(g?" leaflet-"+g.replace("Pane","")+"-pane":""),st=we("div",X,P||this._mapPane);return g&&(this._panes[g]=st),st},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var g=this.getPixelBounds(),P=this.unproject(g.getBottomLeft()),X=this.unproject(g.getTopRight());return new it(P,X)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(g,P,X){g=ot(g),X=R(X||[0,0]);var st=this.getZoom()||0,ft=this.getMinZoom(),Mt=this.getMaxZoom(),Dt=g.getNorthWest(),Wt=g.getSouthEast(),te=this.getSize().subtract(X),de=H(this.project(Wt,st),this.project(Dt,st)).getSize(),De=jt.any3d?this.options.zoomSnap:1,Xe=te.x/de.x,_i=te.y/de.y,Ln=P?Math.max(Xe,_i):Math.min(Xe,_i);return st=this.getScaleZoom(Ln,st),De&&(st=Math.round(st/(De/100))*(De/100),st=P?Math.ceil(st/De)*De:Math.floor(st/De)*De),Math.max(ft,Math.min(Mt,st))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new k(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(g,P){var X=this._getTopLeftPoint(g,P);return new F(X,X.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(g){return this.options.crs.getProjectedBounds(g===void 0?this.getZoom():g)},getPane:function(g){return typeof g=="string"?this._panes[g]:g},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(g,P){var X=this.options.crs;return P=P===void 0?this._zoom:P,X.scale(g)/X.scale(P)},getScaleZoom:function(g,P){var X=this.options.crs;P=P===void 0?this._zoom:P;var st=X.zoom(g*X.scale(P));return isNaN(st)?1/0:st},project:function(g,P){return P=P===void 0?this._zoom:P,this.options.crs.latLngToPoint($(g),P)},unproject:function(g,P){return P=P===void 0?this._zoom:P,this.options.crs.pointToLatLng(R(g),P)},layerPointToLatLng:function(g){var P=R(g).add(this.getPixelOrigin());return this.unproject(P)},latLngToLayerPoint:function(g){var P=this.project($(g))._round();return P._subtract(this.getPixelOrigin())},wrapLatLng:function(g){return this.options.crs.wrapLatLng($(g))},wrapLatLngBounds:function(g){return this.options.crs.wrapLatLngBounds(ot(g))},distance:function(g,P){return this.options.crs.distance($(g),$(P))},containerPointToLayerPoint:function(g){return R(g).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(g){return R(g).add(this._getMapPanePos())},containerPointToLatLng:function(g){var P=this.containerPointToLayerPoint(R(g));return this.layerPointToLatLng(P)},latLngToContainerPoint:function(g){return this.layerPointToContainerPoint(this.latLngToLayerPoint($(g)))},mouseEventToContainerPoint:function(g){return Vt(g,this._container)},mouseEventToLayerPoint:function(g){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(g))},mouseEventToLatLng:function(g){return this.layerPointToLatLng(this.mouseEventToLayerPoint(g))},_initContainer:function(g){var P=this._container=ti(g);if(P){if(P._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");je(P,"scroll",this._onScroll,this),this._containerId=a(P)},_initLayout:function(){var g=this._container;this._fadeAnimated=this.options.fadeAnimation&&jt.any3d,me(g,"leaflet-container"+(jt.touch?" leaflet-touch":"")+(jt.retina?" leaflet-retina":"")+(jt.ielt9?" leaflet-oldie":"")+(jt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var P=Ge(g,"position");P!=="absolute"&&P!=="relative"&&P!=="fixed"&&P!=="sticky"&&(g.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var g=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ze(this._mapPane,new k(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(me(g.markerPane,"leaflet-zoom-hide"),me(g.shadowPane,"leaflet-zoom-hide"))},_resetView:function(g,P,X){ze(this._mapPane,new k(0,0));var st=!this._loaded;this._loaded=!0,P=this._limitZoom(P),this.fire("viewprereset");var ft=this._zoom!==P;this._moveStart(ft,X)._move(g,P)._moveEnd(ft),this.fire("viewreset"),st&&this.fire("load")},_moveStart:function(g,P){return g&&this.fire("zoomstart"),P||this.fire("movestart"),this},_move:function(g,P,X,st){P===void 0&&(P=this._zoom);var ft=this._zoom!==P;return this._zoom=P,this._lastCenter=g,this._pixelOrigin=this._getNewPixelOrigin(g),st?X&&X.pinch&&this.fire("zoom",X):((ft||X&&X.pinch)&&this.fire("zoom",X),this.fire("move",X)),this},_moveEnd:function(g){return g&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return K(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(g){ze(this._mapPane,this._getMapPanePos().subtract(g))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(g){this._targets={},this._targets[a(this._container)]=this;var P=g?ci:je;P(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&P(window,"resize",this._onResize,this),jt.any3d&&this.options.transform3DLimit&&(g?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){K(this._resizeRequest),this._resizeRequest=tt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var g=this._getMapPanePos();Math.max(Math.abs(g.x),Math.abs(g.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(g,P){for(var X=[],st,ft=P==="mouseout"||P==="mouseover",Mt=g.target||g.srcElement,Dt=!1;Mt;){if(st=this._targets[a(Mt)],st&&(P==="click"||P==="preclick")&&this._draggableMoved(st)){Dt=!0;break}if(st&&st.listens(P,!0)&&(ft&&!ge(Mt,g)||(X.push(st),ft))||Mt===this._container)break;Mt=Mt.parentNode}return!X.length&&!Dt&&!ft&&this.listens(P,!0)&&(X=[this]),X},_isClickDisabled:function(g){for(;g&&g!==this._container;){if(g._leaflet_disable_click)return!0;g=g.parentNode}},_handleDOMEvent:function(g){var P=g.target||g.srcElement;if(!(!this._loaded||P._leaflet_disable_events||g.type==="click"&&this._isClickDisabled(P))){var X=g.type;X==="mousedown"&&hi(P),this._fireDOMEvent(g,X)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(g,P,X){if(g.type==="click"){var st=n({},g);st.type="preclick",this._fireDOMEvent(st,st.type,X)}var ft=this._findEventTargets(g,P);if(X){for(var Mt=[],Dt=0;Dt<X.length;Dt++)X[Dt].listens(P,!0)&&Mt.push(X[Dt]);ft=Mt.concat(ft)}if(ft.length){P==="contextmenu"&&Rt(g);var Wt=ft[0],te={originalEvent:g};if(g.type!=="keypress"&&g.type!=="keydown"&&g.type!=="keyup"){var de=Wt.getLatLng&&(!Wt._radius||Wt._radius<=10);te.containerPoint=de?this.latLngToContainerPoint(Wt.getLatLng()):this.mouseEventToContainerPoint(g),te.layerPoint=this.containerPointToLayerPoint(te.containerPoint),te.latlng=de?Wt.getLatLng():this.layerPointToLatLng(te.layerPoint)}for(Dt=0;Dt<ft.length;Dt++)if(ft[Dt].fire(P,te,!0),te.originalEvent._stopped||ft[Dt].options.bubblingMouseEvents===!1&&S(this._mouseEvents,P)!==-1)return}},_draggableMoved:function(g){return g=g.dragging&&g.dragging.enabled()?g:this,g.dragging&&g.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var g=0,P=this._handlers.length;g<P;g++)this._handlers[g].disable()},whenReady:function(g,P){return this._loaded?g.call(P||this,{target:this}):this.on("load",g,P),this},_getMapPanePos:function(){return kr(this._mapPane)||new k(0,0)},_moved:function(){var g=this._getMapPanePos();return g&&!g.equals([0,0])},_getTopLeftPoint:function(g,P){var X=g&&P!==void 0?this._getNewPixelOrigin(g,P):this.getPixelOrigin();return X.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(g,P){var X=this.getSize()._divideBy(2);return this.project(g,P)._subtract(X)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(g,P,X){var st=this._getNewPixelOrigin(X,P);return this.project(g,P)._subtract(st)},_latLngBoundsToNewLayerBounds:function(g,P,X){var st=this._getNewPixelOrigin(X,P);return H([this.project(g.getSouthWest(),P)._subtract(st),this.project(g.getNorthWest(),P)._subtract(st),this.project(g.getSouthEast(),P)._subtract(st),this.project(g.getNorthEast(),P)._subtract(st)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(g){return this.latLngToLayerPoint(g).subtract(this._getCenterLayerPoint())},_limitCenter:function(g,P,X){if(!X)return g;var st=this.project(g,P),ft=this.getSize().divideBy(2),Mt=new F(st.subtract(ft),st.add(ft)),Dt=this._getBoundsOffset(Mt,X,P);return Math.abs(Dt.x)<=1&&Math.abs(Dt.y)<=1?g:this.unproject(st.add(Dt),P)},_limitOffset:function(g,P){if(!P)return g;var X=this.getPixelBounds(),st=new F(X.min.add(g),X.max.add(g));return g.add(this._getBoundsOffset(st,P))},_getBoundsOffset:function(g,P,X){var st=H(this.project(P.getNorthEast(),X),this.project(P.getSouthWest(),X)),ft=st.min.subtract(g.min),Mt=st.max.subtract(g.max),Dt=this._rebound(ft.x,-Mt.x),Wt=this._rebound(ft.y,-Mt.y);return new k(Dt,Wt)},_rebound:function(g,P){return g+P>0?Math.round(g-P)/2:Math.max(0,Math.ceil(g))-Math.max(0,Math.floor(P))},_limitZoom:function(g){var P=this.getMinZoom(),X=this.getMaxZoom(),st=jt.any3d?this.options.zoomSnap:1;return st&&(g=Math.round(g/st)*st),Math.max(P,Math.min(X,g))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ui(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(g,P){var X=this._getCenterOffset(g)._trunc();return(P&&P.animate)!==!0&&!this.getSize().contains(X)?!1:(this.panBy(X,P),!0)},_createAnimProxy:function(){var g=this._proxy=we("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(g),this.on("zoomanim",function(P){var X=he,st=this._proxy.style[X];ni(this._proxy,this.project(P.center,P.zoom),this.getZoomScale(P.zoom,1)),st===this._proxy.style[X]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){pe(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var g=this.getCenter(),P=this.getZoom();ni(this._proxy,this.project(g,P),this.getZoomScale(P,1))},_catchTransitionEnd:function(g){this._animatingZoom&&g.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(g,P,X){if(this._animatingZoom)return!0;if(X=X||{},!this._zoomAnimated||X.animate===!1||this._nothingToAnimate()||Math.abs(P-this._zoom)>this.options.zoomAnimationThreshold)return!1;var st=this.getZoomScale(P),ft=this._getCenterOffset(g)._divideBy(1-1/st);return X.animate!==!0&&!this.getSize().contains(ft)?!1:(tt(function(){this._moveStart(!0,!1)._animateZoom(g,P,!0)},this),!0)},_animateZoom:function(g,P,X,st){this._mapPane&&(X&&(this._animatingZoom=!0,this._animateToCenter=g,this._animateToZoom=P,me(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:g,zoom:P,noUpdate:st}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(r(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ui(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function gr(g,P){return new be(g,P)}var dr=N.extend({options:{position:"topright"},initialize:function(g){v(this,g)},getPosition:function(){return this.options.position},setPosition:function(g){var P=this._map;return P&&P.removeControl(this),this.options.position=g,P&&P.addControl(this),this},getContainer:function(){return this._container},addTo:function(g){this.remove(),this._map=g;var P=this._container=this.onAdd(g),X=this.getPosition(),st=g._controlCorners[X];return me(P,"leaflet-control"),X.indexOf("bottom")!==-1?st.insertBefore(P,st.firstChild):st.appendChild(P),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(pe(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(g){this._map&&g&&g.screenX>0&&g.screenY>0&&this._map.getContainer().focus()}}),xi=function(g){return new dr(g)};be.include({addControl:function(g){return g.addTo(this),this},removeControl:function(g){return g.remove(),this},_initControlPos:function(){var g=this._controlCorners={},P="leaflet-",X=this._controlContainer=we("div",P+"control-container",this._container);function st(ft,Mt){var Dt=P+ft+" "+P+Mt;g[ft+Mt]=we("div",Dt,X)}st("top","left"),st("top","right"),st("bottom","left"),st("bottom","right")},_clearControlPos:function(){for(var g in this._controlCorners)pe(this._controlCorners[g]);pe(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var nn=dr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(g,P,X,st){return X<st?-1:st<X?1:0}},initialize:function(g,P,X){v(this,X),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var st in g)this._addLayer(g[st],st);for(st in P)this._addLayer(P[st],st,!0)},onAdd:function(g){this._initLayout(),this._update(),this._map=g,g.on("zoomend",this._checkDisabledLayers,this);for(var P=0;P<this._layers.length;P++)this._layers[P].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(g){return dr.prototype.addTo.call(this,g),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var g=0;g<this._layers.length;g++)this._layers[g].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(g,P){return this._addLayer(g,P),this._map?this._update():this},addOverlay:function(g,P){return this._addLayer(g,P,!0),this._map?this._update():this},removeLayer:function(g){g.off("add remove",this._onLayerChange,this);var P=this._getLayer(a(g));return P&&this._layers.splice(this._layers.indexOf(P),1),this._map?this._update():this},expand:function(){me(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var g=this._map.getSize().y-(this._container.offsetTop+50);return g<this._section.clientHeight?(me(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=g+"px"):ui(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ui(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var g="leaflet-control-layers",P=this._container=we("div",g),X=this.options.collapsed;P.setAttribute("aria-haspopup",!0),Lt(P),xt(P);var st=this._section=we("section",g+"-list");X&&(this._map.on("click",this.collapse,this),je(P,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var ft=this._layersLink=we("a",g+"-toggle",P);ft.href="#",ft.title="Layers",ft.setAttribute("role","button"),je(ft,{keydown:function(Mt){Mt.keyCode===13&&this._expandSafely()},click:function(Mt){Rt(Mt),this._expandSafely()}},this),X||this.expand(),this._baseLayersList=we("div",g+"-base",st),this._separator=we("div",g+"-separator",st),this._overlaysList=we("div",g+"-overlays",st),P.appendChild(st)},_getLayer:function(g){for(var P=0;P<this._layers.length;P++)if(this._layers[P]&&a(this._layers[P].layer)===g)return this._layers[P]},_addLayer:function(g,P,X){this._map&&g.on("add remove",this._onLayerChange,this),this._layers.push({layer:g,name:P,overlay:X}),this.options.sortLayers&&this._layers.sort(r(function(st,ft){return this.options.sortFunction(st.layer,ft.layer,st.name,ft.name)},this)),this.options.autoZIndex&&g.setZIndex&&(this._lastZIndex++,g.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;yi(this._baseLayersList),yi(this._overlaysList),this._layerControlInputs=[];var g,P,X,st,ft=0;for(X=0;X<this._layers.length;X++)st=this._layers[X],this._addItem(st),P=P||st.overlay,g=g||!st.overlay,ft+=st.overlay?0:1;return this.options.hideSingleBase&&(g=g&&ft>1,this._baseLayersList.style.display=g?"":"none"),this._separator.style.display=P&&g?"":"none",this},_onLayerChange:function(g){this._handlingClick||this._update();var P=this._getLayer(a(g.target)),X=P.overlay?g.type==="add"?"overlayadd":"overlayremove":g.type==="add"?"baselayerchange":null;X&&this._map.fire(X,P)},_createRadioElement:function(g,P){var X='<input type="radio" class="leaflet-control-layers-selector" name="'+g+'"'+(P?' checked="checked"':"")+"/>",st=document.createElement("div");return st.innerHTML=X,st.firstChild},_addItem:function(g){var P=document.createElement("label"),X=this._map.hasLayer(g.layer),st;g.overlay?(st=document.createElement("input"),st.type="checkbox",st.className="leaflet-control-layers-selector",st.defaultChecked=X):st=this._createRadioElement("leaflet-base-layers_"+a(this),X),this._layerControlInputs.push(st),st.layerId=a(g.layer),je(st,"click",this._onInputClick,this);var ft=document.createElement("span");ft.innerHTML=" "+g.name;var Mt=document.createElement("span");P.appendChild(Mt),Mt.appendChild(st),Mt.appendChild(ft);var Dt=g.overlay?this._overlaysList:this._baseLayersList;return Dt.appendChild(P),this._checkDisabledLayers(),P},_onInputClick:function(){var g=this._layerControlInputs,P,X,st=[],ft=[];this._handlingClick=!0;for(var Mt=g.length-1;Mt>=0;Mt--)P=g[Mt],X=this._getLayer(P.layerId).layer,P.checked?st.push(X):P.checked||ft.push(X);for(Mt=0;Mt<ft.length;Mt++)this._map.hasLayer(ft[Mt])&&this._map.removeLayer(ft[Mt]);for(Mt=0;Mt<st.length;Mt++)this._map.hasLayer(st[Mt])||this._map.addLayer(st[Mt]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var g=this._layerControlInputs,P,X,st=this._map.getZoom(),ft=g.length-1;ft>=0;ft--)P=g[ft],X=this._getLayer(P.layerId).layer,P.disabled=X.options.minZoom!==void 0&&st<X.options.minZoom||X.options.maxZoom!==void 0&&st>X.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var g=this._section;je(g,"click",Rt),this.expand(),setTimeout(function(){ci(g,"click",Rt)})}}),Hn=function(g,P,X){return new nn(g,P,X)},Er=dr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(g){var P="leaflet-control-zoom",X=we("div",P+" leaflet-bar"),st=this.options;return this._zoomInButton=this._createButton(st.zoomInText,st.zoomInTitle,P+"-in",X,this._zoomIn),this._zoomOutButton=this._createButton(st.zoomOutText,st.zoomOutTitle,P+"-out",X,this._zoomOut),this._updateDisabled(),g.on("zoomend zoomlevelschange",this._updateDisabled,this),X},onRemove:function(g){g.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(g){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(g.shiftKey?3:1))},_zoomOut:function(g){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(g.shiftKey?3:1))},_createButton:function(g,P,X,st,ft){var Mt=we("a",X,st);return Mt.innerHTML=g,Mt.href="#",Mt.title=P,Mt.setAttribute("role","button"),Mt.setAttribute("aria-label",P),Lt(Mt),je(Mt,"click",Pt),je(Mt,"click",ft,this),je(Mt,"click",this._refocusOnMap,this),Mt},_updateDisabled:function(){var g=this._map,P="leaflet-disabled";ui(this._zoomInButton,P),ui(this._zoomOutButton,P),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||g._zoom===g.getMinZoom())&&(me(this._zoomOutButton,P),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||g._zoom===g.getMaxZoom())&&(me(this._zoomInButton,P),this._zoomInButton.setAttribute("aria-disabled","true"))}});be.mergeOptions({zoomControl:!0}),be.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Er,this.addControl(this.zoomControl))});var fs=function(g){return new Er(g)},Ar=dr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(g){var P="leaflet-control-scale",X=we("div",P),st=this.options;return this._addScales(st,P+"-line",X),g.on(st.updateWhenIdle?"moveend":"move",this._update,this),g.whenReady(this._update,this),X},onRemove:function(g){g.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(g,P,X){g.metric&&(this._mScale=we("div",P,X)),g.imperial&&(this._iScale=we("div",P,X))},_update:function(){var g=this._map,P=g.getSize().y/2,X=g.distance(g.containerPointToLatLng([0,P]),g.containerPointToLatLng([this.options.maxWidth,P]));this._updateScales(X)},_updateScales:function(g){this.options.metric&&g&&this._updateMetric(g),this.options.imperial&&g&&this._updateImperial(g)},_updateMetric:function(g){var P=this._getRoundNum(g),X=P<1e3?P+" m":P/1e3+" km";this._updateScale(this._mScale,X,P/g)},_updateImperial:function(g){var P=g*3.2808399,X,st,ft;P>5280?(X=P/5280,st=this._getRoundNum(X),this._updateScale(this._iScale,st+" mi",st/X)):(ft=this._getRoundNum(P),this._updateScale(this._iScale,ft+" ft",ft/P))},_updateScale:function(g,P,X){g.style.width=Math.round(this.options.maxWidth*X)+"px",g.innerHTML=P},_getRoundNum:function(g){var P=Math.pow(10,(Math.floor(g)+"").length-1),X=g/P;return X=X>=10?10:X>=5?5:X>=3?3:X>=2?2:1,P*X}}),Gn=function(g){return new Ar(g)},Zn='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ts=dr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(jt.inlineSvg?Zn+" ":"")+"Leaflet</a>"},initialize:function(g){v(this,g),this._attributions={}},onAdd:function(g){g.attributionControl=this,this._container=we("div","leaflet-control-attribution"),Lt(this._container);for(var P in g._layers)g._layers[P].getAttribution&&this.addAttribution(g._layers[P].getAttribution());return this._update(),g.on("layeradd",this._addAttribution,this),this._container},onRemove:function(g){g.off("layeradd",this._addAttribution,this)},_addAttribution:function(g){g.layer.getAttribution&&(this.addAttribution(g.layer.getAttribution()),g.layer.once("remove",function(){this.removeAttribution(g.layer.getAttribution())},this))},setPrefix:function(g){return this.options.prefix=g,this._update(),this},addAttribution:function(g){return g?(this._attributions[g]||(this._attributions[g]=0),this._attributions[g]++,this._update(),this):this},removeAttribution:function(g){return g?(this._attributions[g]&&(this._attributions[g]--,this._update()),this):this},_update:function(){if(this._map){var g=[];for(var P in this._attributions)this._attributions[P]&&g.push(P);var X=[];this.options.prefix&&X.push(this.options.prefix),g.length&&X.push(g.join(", ")),this._container.innerHTML=X.join(' <span aria-hidden="true">|</span> ')}}});be.mergeOptions({attributionControl:!0}),be.addInitHook(function(){this.options.attributionControl&&new Ts().addTo(this)});var Cr=function(g){return new Ts(g)};dr.Layers=nn,dr.Zoom=Er,dr.Scale=Ar,dr.Attribution=Ts,xi.layers=Hn,xi.zoom=fs,xi.scale=Gn,xi.attribution=Cr;var Pe=N.extend({initialize:function(g){this._map=g},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Pe.addTo=function(g,P){return g.addHandler(P,this),this};var ca={Events:w},eo=jt.touch?"touchstart mousedown":"mousedown",Ir=C.extend({options:{clickTolerance:3},initialize:function(g,P,X,st){v(this,st),this._element=g,this._dragStartTarget=P||g,this._preventOutline=X},enable:function(){this._enabled||(je(this._dragStartTarget,eo,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ir._dragging===this&&this.finishDrag(!0),ci(this._dragStartTarget,eo,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(g){if(this._enabled&&(this._moved=!1,!wi(this._element,"leaflet-zoom-anim"))){if(g.touches&&g.touches.length!==1){Ir._dragging===this&&this.finishDrag();return}if(!(Ir._dragging||g.shiftKey||g.which!==1&&g.button!==1&&!g.touches)&&(Ir._dragging=this,this._preventOutline&&hi(this._element),gi(),Tr(),!this._moving)){this.fire("down");var P=g.touches?g.touches[0]:g,X=Si(this._element);this._startPoint=new k(P.clientX,P.clientY),this._startPos=kr(this._element),this._parentScale=Vr(X);var st=g.type==="mousedown";je(document,st?"mousemove":"touchmove",this._onMove,this),je(document,st?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(g){if(this._enabled){if(g.touches&&g.touches.length>1){this._moved=!0;return}var P=g.touches&&g.touches.length===1?g.touches[0]:g,X=new k(P.clientX,P.clientY)._subtract(this._startPoint);!X.x&&!X.y||Math.abs(X.x)+Math.abs(X.y)<this.options.clickTolerance||(X.x/=this._parentScale.x,X.y/=this._parentScale.y,Rt(g),this._moved||(this.fire("dragstart"),this._moved=!0,me(document.body,"leaflet-dragging"),this._lastTarget=g.target||g.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),me(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(X),this._moving=!0,this._lastEvent=g,this._updatePosition())}},_updatePosition:function(){var g={originalEvent:this._lastEvent};this.fire("predrag",g),ze(this._element,this._newPos),this.fire("drag",g)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(g){ui(document.body,"leaflet-dragging"),this._lastTarget&&(ui(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ci(document,"mousemove touchmove",this._onMove,this),ci(document,"mouseup touchend touchcancel",this._onUp,this),vr(),gn(),this._moved&&this._moving&&this.fire("dragend",{noInertia:g,distance:this._newPos.distanceTo(this._startPos)}),this._moving=!1,Ir._dragging=!1}});function ss(g,P){if(!P||!g.length)return g.slice();var X=P*P;return g=ki(g,X),g=Za(g,X),g}function zs(g,P,X){return Math.sqrt(di(g,P,X,!0))}function Yo(g,P,X){return di(g,P,X)}function Za(g,P){var X=g.length,st=typeof Uint8Array<"u"?Uint8Array:Array,ft=new st(X);ft[0]=ft[X-1]=1,fa(g,ft,P,0,X-1);var Mt,Dt=[];for(Mt=0;Mt<X;Mt++)ft[Mt]&&Dt.push(g[Mt]);return Dt}function fa(g,P,X,st,ft){var Mt=0,Dt,Wt,te;for(Wt=st+1;Wt<=ft-1;Wt++)te=di(g[Wt],g[st],g[ft],!0),te>Mt&&(Dt=Wt,Mt=te);Mt>X&&(P[Dt]=1,fa(g,P,X,st,Dt),fa(g,P,X,Dt,ft))}function ki(g,P){for(var X=[g[0]],st=1,ft=0,Mt=g.length;st<Mt;st++)ql(g[st],g[ft])>P&&(X.push(g[st]),ft=st);return ft<Mt-1&&X.push(g[Mt-1]),X}var ws;function Mr(g,P,X,st,ft){var Mt=st?ws:Wr(g,X),Dt=Wr(P,X),Wt,te,de;for(ws=Dt;;){if(!(Mt|Dt))return[g,P];if(Mt&Dt)return!1;Wt=Mt||Dt,te=io(g,P,Wt,X,ft),de=Wr(te,X),Wt===Mt?(g=te,Mt=de):(P=te,Dt=de)}}function io(g,P,X,st,ft){var Mt=P.x-g.x,Dt=P.y-g.y,Wt=st.min,te=st.max,de,De;return X&8?(de=g.x+Mt*(te.y-g.y)/Dt,De=te.y):X&4?(de=g.x+Mt*(Wt.y-g.y)/Dt,De=Wt.y):X&2?(de=te.x,De=g.y+Dt*(te.x-g.x)/Mt):X&1&&(de=Wt.x,De=g.y+Dt*(Wt.x-g.x)/Mt),new k(de,De,ft)}function Wr(g,P){var X=0;return g.x<P.min.x?X|=1:g.x>P.max.x&&(X|=2),g.y<P.min.y?X|=4:g.y>P.max.y&&(X|=8),X}function ql(g,P){var X=P.x-g.x,st=P.y-g.y;return X*X+st*st}function di(g,P,X,st){var ft=P.x,Mt=P.y,Dt=X.x-ft,Wt=X.y-Mt,te=Dt*Dt+Wt*Wt,de;return te>0&&(de=((g.x-ft)*Dt+(g.y-Mt)*Wt)/te,de>1?(ft=X.x,Mt=X.y):de>0&&(ft+=Dt*de,Mt+=Wt*de)),Dt=g.x-ft,Wt=g.y-Mt,st?Dt*Dt+Wt*Wt:new k(ft,Mt)}function yn(g){return!x(g[0])||typeof g[0][0]!="object"&&typeof g[0][0]<"u"}function br(g){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),yn(g)}function No(g,P){var X,st,ft,Mt,Dt,Wt,te,de;if(!g||g.length===0)throw new Error("latlngs not passed");yn(g)||(console.warn("latlngs are not flat! Only the first ring will be used"),g=g[0]);var De=[];for(var Xe in g)De.push(P.project($(g[Xe])));var _i=De.length;for(X=0,st=0;X<_i-1;X++)st+=De[X].distanceTo(De[X+1])/2;if(st===0)de=De[0];else for(X=0,Mt=0;X<_i-1;X++)if(Dt=De[X],Wt=De[X+1],ft=Dt.distanceTo(Wt),Mt+=ft,Mt>st){te=(Mt-st)/ft,de=[Wt.x-te*(Wt.x-Dt.x),Wt.y-te*(Wt.y-Dt.y)];break}return P.unproject(R(de))}var Sn={__proto__:null,simplify:ss,pointToSegmentDistance:zs,closestPointOnSegment:Yo,clipSegment:Mr,_getEdgeIntersection:io,_getBitCode:Wr,_sqClosestPointOnSegment:di,isFlat:yn,_flat:br,polylineCenter:No};function ro(g,P,X){var st,ft=[1,4,2,8],Mt,Dt,Wt,te,de,De,Xe,_i;for(Mt=0,De=g.length;Mt<De;Mt++)g[Mt]._code=Wr(g[Mt],P);for(Wt=0;Wt<4;Wt++){for(Xe=ft[Wt],st=[],Mt=0,De=g.length,Dt=De-1;Mt<De;Dt=Mt++)te=g[Mt],de=g[Dt],te._code&Xe?de._code&Xe||(_i=io(de,te,Xe,P,X),_i._code=Wr(_i,P),st.push(_i)):(de._code&Xe&&(_i=io(de,te,Xe,P,X),_i._code=Wr(_i,P),st.push(_i)),st.push(te));g=st}return g}function Ka(g,P){var X,st,ft,Mt,Dt,Wt,te,de,De;if(!g||g.length===0)throw new Error("latlngs not passed");yn(g)||(console.warn("latlngs are not flat! Only the first ring will be used"),g=g[0]);var Xe=[];for(var _i in g)Xe.push(P.project($(g[_i])));var Ln=Xe.length;for(Wt=te=de=0,X=0,st=Ln-1;X<Ln;st=X++)ft=Xe[X],Mt=Xe[st],Dt=ft.y*Mt.x-Mt.y*ft.x,te+=(ft.x+Mt.x)*Dt,de+=(ft.y+Mt.y)*Dt,Wt+=Dt*3;return Wt===0?De=Xe[0]:De=[te/Wt,de/Wt],P.unproject(R(De))}var no={__proto__:null,clipPolygon:ro,polygonCenter:Ka},Ei={project:function(g){return new k(g.lng,g.lat)},unproject:function(g){return new dt(g.y,g.x)},bounds:new F([-180,-90],[180,90])},An={R:6378137,R_MINOR:6356752314245179e-9,bounds:new F([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(g){var P=Math.PI/180,X=this.R,st=g.lat*P,ft=this.R_MINOR/X,Mt=Math.sqrt(1-ft*ft),Dt=Mt*Math.sin(st),Wt=Math.tan(Math.PI/4-st/2)/Math.pow((1-Dt)/(1+Dt),Mt/2);return st=-X*Math.log(Math.max(Wt,1e-10)),new k(g.lng*P*X,st)},unproject:function(g){for(var P=180/Math.PI,X=this.R,st=this.R_MINOR/X,ft=Math.sqrt(1-st*st),Mt=Math.exp(-g.y/X),Dt=Math.PI/2-2*Math.atan(Mt),Wt=0,te=.1,de;Wt<15&&Math.abs(te)>1e-7;Wt++)de=ft*Math.sin(Dt),de=Math.pow((1-de)/(1+de),ft/2),te=Math.PI/2-2*Math.atan(Mt*de)-Dt,Dt+=te;return new dt(Dt*P,g.x*P/X)}},Do={__proto__:null,LonLat:Ei,Mercator:An,SphericalMercator:rt},xs=n({},W,{code:"EPSG:3395",projection:An,transformation:function(){var g=.5/(Math.PI*An.R);return wt(g,.5,-g,.5)}()}),In=n({},W,{code:"EPSG:4326",projection:Ei,transformation:wt(1/180,1,-1/180,.5)}),dn=n({},ct,{projection:Ei,transformation:wt(1,0,-1,0),scale:function(g){return Math.pow(2,g)},zoom:function(g){return Math.log(g)/Math.LN2},distance:function(g,P){var X=P.lng-g.lng,st=P.lat-g.lat;return Math.sqrt(X*X+st*st)},infinite:!0});ct.Earth=W,ct.EPSG3395=xs,ct.EPSG3857=_t,ct.EPSG900913=Ct,ct.EPSG4326=In,ct.Simple=dn;var Es=C.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(g){return g.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(g){return g&&g.removeLayer(this),this},getPane:function(g){return this._map.getPane(g?this.options[g]||g:this.options.pane)},addInteractiveTarget:function(g){return this._map._targets[a(g)]=this,this},removeInteractiveTarget:function(g){return delete this._map._targets[a(g)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(g){var P=g.target;if(P.hasLayer(this)){if(this._map=P,this._zoomAnimated=P._zoomAnimated,this.getEvents){var X=this.getEvents();P.on(X,this),this.once("remove",function(){P.off(X,this)},this)}this.onAdd(P),this.fire("add"),P.fire("layeradd",{layer:this})}}});be.include({addLayer:function(g){if(!g._layerAdd)throw new Error("The provided object is not a Layer.");var P=a(g);return this._layers[P]?this:(this._layers[P]=g,g._mapToAdd=this,g.beforeAdd&&g.beforeAdd(this),this.whenReady(g._layerAdd,g),this)},removeLayer:function(g){var P=a(g);return this._layers[P]?(this._loaded&&g.onRemove(this),delete this._layers[P],this._loaded&&(this.fire("layerremove",{layer:g}),g.fire("remove")),g._map=g._mapToAdd=null,this):this},hasLayer:function(g){return a(g)in this._layers},eachLayer:function(g,P){for(var X in this._layers)g.call(P,this._layers[X]);return this},_addLayers:function(g){g=g?x(g)?g:[g]:[];for(var P=0,X=g.length;P<X;P++)this.addLayer(g[P])},_addZoomLimit:function(g){(!isNaN(g.options.maxZoom)||!isNaN(g.options.minZoom))&&(this._zoomBoundLayers[a(g)]=g,this._updateZoomLevels())},_removeZoomLimit:function(g){var P=a(g);this._zoomBoundLayers[P]&&(delete this._zoomBoundLayers[P],this._updateZoomLevels())},_updateZoomLevels:function(){var g=1/0,P=-1/0,X=this._getZoomSpan();for(var st in this._zoomBoundLayers){var ft=this._zoomBoundLayers[st].options;g=ft.minZoom===void 0?g:Math.min(g,ft.minZoom),P=ft.maxZoom===void 0?P:Math.max(P,ft.maxZoom)}this._layersMaxZoom=P===-1/0?void 0:P,this._layersMinZoom=g===1/0?void 0:g,X!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var bo=Es.extend({initialize:function(g,P){v(this,P),this._layers={};var X,st;if(g)for(X=0,st=g.length;X<st;X++)this.addLayer(g[X])},addLayer:function(g){var P=this.getLayerId(g);return this._layers[P]=g,this._map&&this._map.addLayer(g),this},removeLayer:function(g){var P=g in this._layers?g:this.getLayerId(g);return this._map&&this._layers[P]&&this._map.removeLayer(this._layers[P]),delete this._layers[P],this},hasLayer:function(g){var P=typeof g=="number"?g:this.getLayerId(g);return P in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(g){var P=Array.prototype.slice.call(arguments,1),X,st;for(X in this._layers)st=this._layers[X],st[g]&&st[g].apply(st,P);return this},onAdd:function(g){this.eachLayer(g.addLayer,g)},onRemove:function(g){this.eachLayer(g.removeLayer,g)},eachLayer:function(g,P){for(var X in this._layers)g.call(P,this._layers[X]);return this},getLayer:function(g){return this._layers[g]},getLayers:function(){var g=[];return this.eachLayer(g.push,g),g},setZIndex:function(g){return this.invoke("setZIndex",g)},getLayerId:function(g){return a(g)}}),js=function(g,P){return new bo(g,P)},Xr=bo.extend({addLayer:function(g){return this.hasLayer(g)?this:(g.addEventParent(this),bo.prototype.addLayer.call(this,g),this.fire("layeradd",{layer:g}))},removeLayer:function(g){return this.hasLayer(g)?(g in this._layers&&(g=this._layers[g]),g.removeEventParent(this),bo.prototype.removeLayer.call(this,g),this.fire("layerremove",{layer:g})):this},setStyle:function(g){return this.invoke("setStyle",g)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var g=new it;for(var P in this._layers){var X=this._layers[P];g.extend(X.getBounds?X.getBounds():X.getLatLng())}return g}}),so=function(g,P){return new Xr(g,P)},sn=N.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(g){v(this,g)},createIcon:function(g){return this._createIcon("icon",g)},createShadow:function(g){return this._createIcon("shadow",g)},_createIcon:function(g,P){var X=this._getIconUrl(g);if(!X){if(g==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var st=this._createImg(X,P&&P.tagName==="IMG"?P:null);return this._setIconStyles(st,g),(this.options.crossOrigin||this.options.crossOrigin==="")&&(st.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),st},_setIconStyles:function(g,P){var X=this.options,st=X[P+"Size"];typeof st=="number"&&(st=[st,st]);var ft=R(st),Mt=R(P==="shadow"&&X.shadowAnchor||X.iconAnchor||ft&&ft.divideBy(2,!0));g.className="leaflet-marker-"+P+" "+(X.className||""),Mt&&(g.style.marginLeft=-Mt.x+"px",g.style.marginTop=-Mt.y+"px"),ft&&(g.style.width=ft.x+"px",g.style.height=ft.y+"px")},_createImg:function(g,P){return P=P||document.createElement("img"),P.src=g,P},_getIconUrl:function(g){return jt.retina&&this.options[g+"RetinaUrl"]||this.options[g+"Url"]}});function ds(g){return new sn(g)}var Un=sn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(g){return typeof Un.imagePath!="string"&&(Un.imagePath=this._detectIconPath()),(this.options.imagePath||Un.imagePath)+sn.prototype._getIconUrl.call(this,g)},_stripUrl:function(g){var P=function(X,st,ft){var Mt=st.exec(X);return Mt&&Mt[ft]};return g=P(g,/^url\((['"])?(.+)\1\)$/,2),g&&P(g,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var g=we("div","leaflet-default-icon-path",document.body),P=Ge(g,"background-image")||Ge(g,"backgroundImage");if(document.body.removeChild(g),P=this._stripUrl(P),P)return P;var X=document.querySelector('link[href$="leaflet.css"]');return X?X.href.substring(0,X.href.length-11-1):""}}),Hs=Pe.extend({initialize:function(g){this._marker=g},addHooks:function(){var g=this._marker._icon;this._draggable||(this._draggable=new Ir(g,g,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),me(g,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ui(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(g){var P=this._marker,X=P._map,st=this._marker.options.autoPanSpeed,ft=this._marker.options.autoPanPadding,Mt=kr(P._icon),Dt=X.getPixelBounds(),Wt=X.getPixelOrigin(),te=H(Dt.min._subtract(Wt).add(ft),Dt.max._subtract(Wt).subtract(ft));if(!te.contains(Mt)){var de=R((Math.max(te.max.x,Mt.x)-te.max.x)/(Dt.max.x-te.max.x)-(Math.min(te.min.x,Mt.x)-te.min.x)/(Dt.min.x-te.min.x),(Math.max(te.max.y,Mt.y)-te.max.y)/(Dt.max.y-te.max.y)-(Math.min(te.min.y,Mt.y)-te.min.y)/(Dt.min.y-te.min.y)).multiplyBy(st);X.panBy(de,{animate:!1}),this._draggable._newPos._add(de),this._draggable._startPos._add(de),ze(P._icon,this._draggable._newPos),this._onDrag(g),this._panRequest=tt(this._adjustPan.bind(this,g))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(g){this._marker.options.autoPan&&(K(this._panRequest),this._panRequest=tt(this._adjustPan.bind(this,g)))},_onDrag:function(g){var P=this._marker,X=P._shadow,st=kr(P._icon),ft=P._map.layerPointToLatLng(st);X&&ze(X,st),P._latlng=ft,g.latlng=ft,g.oldLatLng=this._oldLatLng,P.fire("move",g).fire("drag",g)},_onDragEnd:function(g){K(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",g)}}),os=Es.extend({options:{icon:new Un,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(g,P){v(this,P),this._latlng=$(g)},onAdd:function(g){this._zoomAnimated=this._zoomAnimated&&g.options.markerZoomAnimation,this._zoomAnimated&&g.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(g){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&g.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(g){var P=this._latlng;return this._latlng=$(g),this.update(),this.fire("move",{oldLatLng:P,latlng:this._latlng})},setZIndexOffset:function(g){return this.options.zIndexOffset=g,this.update()},getIcon:function(){return this.options.icon},setIcon:function(g){return this.options.icon=g,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var g=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(g)}return this},_initIcon:function(){var g=this.options,P="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),X=g.icon.createIcon(this._icon),st=!1;X!==this._icon&&(this._icon&&this._removeIcon(),st=!0,g.title&&(X.title=g.title),X.tagName==="IMG"&&(X.alt=g.alt||"")),me(X,P),g.keyboard&&(X.tabIndex="0",X.setAttribute("role","button")),this._icon=X,g.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&je(X,"focus",this._panOnFocus,this);var ft=g.icon.createShadow(this._shadow),Mt=!1;ft!==this._shadow&&(this._removeShadow(),Mt=!0),ft&&(me(ft,P),ft.alt=""),this._shadow=ft,g.opacity<1&&this._updateOpacity(),st&&this.getPane().appendChild(this._icon),this._initInteraction(),ft&&Mt&&this.getPane(g.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ci(this._icon,"focus",this._panOnFocus,this),pe(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&pe(this._shadow),this._shadow=null},_setPos:function(g){this._icon&&ze(this._icon,g),this._shadow&&ze(this._shadow,g),this._zIndex=g.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(g){this._icon&&(this._icon.style.zIndex=this._zIndex+g)},_animateZoom:function(g){var P=this._map._latLngToNewLayerPoint(this._latlng,g.zoom,g.center).round();this._setPos(P)},_initInteraction:function(){if(this.options.interactive&&(me(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Hs)){var g=this.options.draggable;this.dragging&&(g=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Hs(this),g&&this.dragging.enable()}},setOpacity:function(g){return this.options.opacity=g,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var g=this.options.opacity;this._icon&&Se(this._icon,g),this._shadow&&Se(this._shadow,g)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var g=this._map;if(g){var P=this.options.icon.options,X=P.iconSize?R(P.iconSize):R(0,0),st=P.iconAnchor?R(P.iconAnchor):R(0,0);g.panInside(this._latlng,{paddingTopLeft:st,paddingBottomRight:X.subtract(st)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function on(g,P){return new os(g,P)}var Gs=Es.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(g){this._renderer=g.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(g){return v(this,g),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&g&&Object.prototype.hasOwnProperty.call(g,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),_o=Gs.extend({options:{fill:!0,radius:10},initialize:function(g,P){v(this,P),this._latlng=$(g),this._radius=this.options.radius},setLatLng:function(g){var P=this._latlng;return this._latlng=$(g),this.redraw(),this.fire("move",{oldLatLng:P,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(g){return this.options.radius=this._radius=g,this.redraw()},getRadius:function(){return this._radius},setStyle:function(g){var P=g&&g.radius||this._radius;return Gs.prototype.setStyle.call(this,g),this.setRadius(P),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var g=this._radius,P=this._radiusY||g,X=this._clickTolerance(),st=[g+X,P+X];this._pxBounds=new F(this._point.subtract(st),this._point.add(st))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(g){return g.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function vn(g,P){return new _o(g,P)}var Cs=_o.extend({initialize:function(g,P,X){if(typeof P=="number"&&(P=n({},X,{radius:P})),v(this,P),this._latlng=$(g),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(g){return this._mRadius=g,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var g=[this._radius,this._radiusY||this._radius];return new it(this._map.layerPointToLatLng(this._point.subtract(g)),this._map.layerPointToLatLng(this._point.add(g)))},setStyle:Gs.prototype.setStyle,_project:function(){var g=this._latlng.lng,P=this._latlng.lat,X=this._map,st=X.options.crs;if(st.distance===W.distance){var ft=Math.PI/180,Mt=this._mRadius/W.R/ft,Dt=X.project([P+Mt,g]),Wt=X.project([P-Mt,g]),te=Dt.add(Wt).divideBy(2),de=X.unproject(te).lat,De=Math.acos((Math.cos(Mt*ft)-Math.sin(P*ft)*Math.sin(de*ft))/(Math.cos(P*ft)*Math.cos(de*ft)))/ft;(isNaN(De)||De===0)&&(De=Mt/Math.cos(Math.PI/180*P)),this._point=te.subtract(X.getPixelOrigin()),this._radius=isNaN(De)?0:te.x-X.project([de,g-De]).x,this._radiusY=te.y-Dt.y}else{var Xe=st.unproject(st.project(this._latlng).subtract([this._mRadius,0]));this._point=X.latLngToLayerPoint(this._latlng),this._radius=this._point.x-X.latLngToLayerPoint(Xe).x}this._updateBounds()}});function ps(g,P,X){return new Cs(g,P,X)}var Ps=Gs.extend({options:{smoothFactor:1,noClip:!1},initialize:function(g,P){v(this,P),this._setLatLngs(g)},getLatLngs:function(){return this._latlngs},setLatLngs:function(g){return this._setLatLngs(g),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(g){for(var P=1/0,X=null,st=di,ft,Mt,Dt=0,Wt=this._parts.length;Dt<Wt;Dt++)for(var te=this._parts[Dt],de=1,De=te.length;de<De;de++){ft=te[de-1],Mt=te[de];var Xe=st(g,ft,Mt,!0);Xe<P&&(P=Xe,X=st(g,ft,Mt))}return X&&(X.distance=Math.sqrt(P)),X},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return No(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(g,P){return P=P||this._defaultShape(),g=$(g),P.push(g),this._bounds.extend(g),this.redraw()},_setLatLngs:function(g){this._bounds=new it,this._latlngs=this._convertLatLngs(g)},_defaultShape:function(){return yn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(g){for(var P=[],X=yn(g),st=0,ft=g.length;st<ft;st++)X?(P[st]=$(g[st]),this._bounds.extend(P[st])):P[st]=this._convertLatLngs(g[st]);return P},_project:function(){var g=new F;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,g),this._bounds.isValid()&&g.isValid()&&(this._rawPxBounds=g,this._updateBounds())},_updateBounds:function(){var g=this._clickTolerance(),P=new k(g,g);this._rawPxBounds&&(this._pxBounds=new F([this._rawPxBounds.min.subtract(P),this._rawPxBounds.max.add(P)]))},_projectLatlngs:function(g,P,X){var st=g[0]instanceof dt,ft=g.length,Mt,Dt;if(st){for(Dt=[],Mt=0;Mt<ft;Mt++)Dt[Mt]=this._map.latLngToLayerPoint(g[Mt]),X.extend(Dt[Mt]);P.push(Dt)}else for(Mt=0;Mt<ft;Mt++)this._projectLatlngs(g[Mt],P,X)},_clipPoints:function(){var g=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(g))){if(this.options.noClip){this._parts=this._rings;return}var P=this._parts,X,st,ft,Mt,Dt,Wt,te;for(X=0,ft=0,Mt=this._rings.length;X<Mt;X++)for(te=this._rings[X],st=0,Dt=te.length;st<Dt-1;st++)Wt=Mr(te[st],te[st+1],g,st,!0),Wt&&(P[ft]=P[ft]||[],P[ft].push(Wt[0]),(Wt[1]!==te[st+1]||st===Dt-2)&&(P[ft].push(Wt[1]),ft++))}},_simplifyPoints:function(){for(var g=this._parts,P=this.options.smoothFactor,X=0,st=g.length;X<st;X++)g[X]=ss(g[X],P)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(g,P){var X,st,ft,Mt,Dt,Wt,te=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(g))return!1;for(X=0,Mt=this._parts.length;X<Mt;X++)for(Wt=this._parts[X],st=0,Dt=Wt.length,ft=Dt-1;st<Dt;ft=st++)if(!(!P&&st===0)&&zs(g,Wt[ft],Wt[st])<=te)return!0;return!1}});function kn(g,P){return new Ps(g,P)}Ps._flat=br;var wo=Ps.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ka(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(g){var P=Ps.prototype._convertLatLngs.call(this,g),X=P.length;return X>=2&&P[0]instanceof dt&&P[0].equals(P[X-1])&&P.pop(),P},_setLatLngs:function(g){Ps.prototype._setLatLngs.call(this,g),yn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return yn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var g=this._renderer._bounds,P=this.options.weight,X=new k(P,P);if(g=new F(g.min.subtract(X),g.max.add(X)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(g))){if(this.options.noClip){this._parts=this._rings;return}for(var st=0,ft=this._rings.length,Mt;st<ft;st++)Mt=ro(this._rings[st],g,!0),Mt.length&&this._parts.push(Mt)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(g){var P=!1,X,st,ft,Mt,Dt,Wt,te,de;if(!this._pxBounds||!this._pxBounds.contains(g))return!1;for(Mt=0,te=this._parts.length;Mt<te;Mt++)for(X=this._parts[Mt],Dt=0,de=X.length,Wt=de-1;Dt<de;Wt=Dt++)st=X[Dt],ft=X[Wt],st.y>g.y!=ft.y>g.y&&g.x<(ft.x-st.x)*(g.y-st.y)/(ft.y-st.y)+st.x&&(P=!P);return P||Ps.prototype._containsPoint.call(this,g,!0)}});function Zo(g,P){return new wo(g,P)}var Kn=Xr.extend({initialize:function(g,P){v(this,P),this._layers={},g&&this.addData(g)},addData:function(g){var P=x(g)?g:g.features,X,st,ft;if(P){for(X=0,st=P.length;X<st;X++)ft=P[X],(ft.geometries||ft.geometry||ft.features||ft.coordinates)&&this.addData(ft);return this}var Mt=this.options;if(Mt.filter&&!Mt.filter(g))return this;var Dt=Ko(g,Mt);return Dt?(Dt.feature=Qn(g),Dt.defaultOptions=Dt.options,this.resetStyle(Dt),Mt.onEachFeature&&Mt.onEachFeature(g,Dt),this.addLayer(Dt)):this},resetStyle:function(g){return g===void 0?this.eachLayer(this.resetStyle,this):(g.options=n({},g.defaultOptions),this._setLayerStyle(g,this.options.style),this)},setStyle:function(g){return this.eachLayer(function(P){this._setLayerStyle(P,g)},this)},_setLayerStyle:function(g,P){g.setStyle&&(typeof P=="function"&&(P=P(g.feature)),g.setStyle(P))}});function Ko(g,P){var X=g.type==="Feature"?g.geometry:g,st=X?X.coordinates:null,ft=[],Mt=P&&P.pointToLayer,Dt=P&&P.coordsToLatLng||Us,Wt,te,de,De;if(!st&&!X)return null;switch(X.type){case"Point":return Wt=Dt(st),Ja(Mt,g,Wt,P);case"MultiPoint":for(de=0,De=st.length;de<De;de++)Wt=Dt(st[de]),ft.push(Ja(Mt,g,Wt,P));return new Xr(ft);case"LineString":case"MultiLineString":return te=Jn(st,X.type==="LineString"?0:1,Dt),new Ps(te,P);case"Polygon":case"MultiPolygon":return te=Jn(st,X.type==="Polygon"?1:2,Dt),new wo(te,P);case"GeometryCollection":for(de=0,De=X.geometries.length;de<De;de++){var Xe=Ko({geometry:X.geometries[de],type:"Feature",properties:g.properties},P);Xe&&ft.push(Xe)}return new Xr(ft);case"FeatureCollection":for(de=0,De=X.features.length;de<De;de++){var _i=Ko(X.features[de],P);_i&&ft.push(_i)}return new Xr(ft);default:throw new Error("Invalid GeoJSON object.")}}function Ja(g,P,X,st){return g?g(P,X):new os(X,st&&st.markersInheritOptions&&st)}function Us(g){return new dt(g[1],g[0],g[2])}function Jn(g,P,X){for(var st=[],ft=0,Mt=g.length,Dt;ft<Mt;ft++)Dt=P?Jn(g[ft],P-1,X):(X||Us)(g[ft]),st.push(Dt);return st}function Br(g,P){return g=$(g),g.alt!==void 0?[c(g.lng,P),c(g.lat,P),c(g.alt,P)]:[c(g.lng,P),c(g.lat,P)]}function Vs(g,P,X,st){for(var ft=[],Mt=0,Dt=g.length;Mt<Dt;Mt++)ft.push(P?Vs(g[Mt],yn(g[Mt])?0:P-1,X,st):Br(g[Mt],st));return!P&&X&&ft.push(ft[0].slice()),ft}function Nr(g,P){return g.feature?n({},g.feature,{geometry:P}):Qn(P)}function Qn(g){return g.type==="Feature"||g.type==="FeatureCollection"?g:{type:"Feature",properties:{},geometry:g}}var Rs={toGeoJSON:function(g){return Nr(this,{type:"Point",coordinates:Br(this.getLatLng(),g)})}};os.include(Rs),Cs.include(Rs),_o.include(Rs),Ps.include({toGeoJSON:function(g){var P=!yn(this._latlngs),X=Vs(this._latlngs,P?1:0,!1,g);return Nr(this,{type:(P?"Multi":"")+"LineString",coordinates:X})}}),wo.include({toGeoJSON:function(g){var P=!yn(this._latlngs),X=P&&!yn(this._latlngs[0]),st=Vs(this._latlngs,X?2:P?1:0,!0,g);return P||(st=[st]),Nr(this,{type:(X?"Multi":"")+"Polygon",coordinates:st})}}),bo.include({toMultiPoint:function(g){var P=[];return this.eachLayer(function(X){P.push(X.toGeoJSON(g).geometry.coordinates)}),Nr(this,{type:"MultiPoint",coordinates:P})},toGeoJSON:function(g){var P=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(P==="MultiPoint")return this.toMultiPoint(g);var X=P==="GeometryCollection",st=[];return this.eachLayer(function(ft){if(ft.toGeoJSON){var Mt=ft.toGeoJSON(g);if(X)st.push(Mt.geometry);else{var Dt=Qn(Mt);Dt.type==="FeatureCollection"?st.push.apply(st,Dt.features):st.push(Dt)}}}),X?Nr(this,{geometries:st,type:"GeometryCollection"}):{type:"FeatureCollection",features:st}}});function da(g,P){return new Kn(g,P)}var xo=da,ms=Es.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(g,P,X){this._url=g,this._bounds=ot(P),v(this,X)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(me(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){pe(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(g){return this.options.opacity=g,this._image&&this._updateOpacity(),this},setStyle:function(g){return g.opacity&&this.setOpacity(g.opacity),this},bringToFront:function(){return this._map&&ri(this._image),this},bringToBack:function(){return this._map&&li(this._image),this},setUrl:function(g){return this._url=g,this._image&&(this._image.src=g),this},setBounds:function(g){return this._bounds=ot(g),this._map&&this._reset(),this},getEvents:function(){var g={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(g.zoomanim=this._animateZoom),g},setZIndex:function(g){return this.options.zIndex=g,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var g=this._url.tagName==="IMG",P=this._image=g?this._url:we("img");if(me(P,"leaflet-image-layer"),this._zoomAnimated&&me(P,"leaflet-zoom-animated"),this.options.className&&me(P,this.options.className),P.onselectstart=f,P.onmousemove=f,P.onload=r(this.fire,this,"load"),P.onerror=r(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(P.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),g){this._url=P.src;return}P.src=this._url,P.alt=this.options.alt},_animateZoom:function(g){var P=this._map.getZoomScale(g.zoom),X=this._map._latLngBoundsToNewLayerBounds(this._bounds,g.zoom,g.center).min;ni(this._image,X,P)},_reset:function(){var g=this._image,P=new F(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),X=P.getSize();ze(g,P.min),g.style.width=X.x+"px",g.style.height=X.y+"px"},_updateOpacity:function(){Se(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var g=this.options.errorOverlayUrl;g&&this._url!==g&&(this._url=g,this._image.src=g)},getCenter:function(){return this._bounds.getCenter()}}),Os=function(g,P,X){return new ms(g,P,X)},$r=ms.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var g=this._url.tagName==="VIDEO",P=this._image=g?this._url:we("video");if(me(P,"leaflet-image-layer"),this._zoomAnimated&&me(P,"leaflet-zoom-animated"),this.options.className&&me(P,this.options.className),P.onselectstart=f,P.onmousemove=f,P.onloadeddata=r(this.fire,this,"load"),g){for(var X=P.getElementsByTagName("source"),st=[],ft=0;ft<X.length;ft++)st.push(X[ft].src);this._url=X.length>0?st:[P.src];return}x(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(P.style,"objectFit")&&(P.style.objectFit="fill"),P.autoplay=!!this.options.autoplay,P.loop=!!this.options.loop,P.muted=!!this.options.muted,P.playsInline=!!this.options.playsInline;for(var Mt=0;Mt<this._url.length;Mt++){var Dt=we("source");Dt.src=this._url[Mt],P.appendChild(Dt)}}});function as(g,P,X){return new $r(g,P,X)}var pn=ms.extend({_initImage:function(){var g=this._image=this._url;me(g,"leaflet-image-layer"),this._zoomAnimated&&me(g,"leaflet-zoom-animated"),this.options.className&&me(g,this.options.className),g.onselectstart=f,g.onmousemove=f}});function Wl(g,P,X){return new pn(g,P,X)}var bn=Es.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(g,P){g&&(g instanceof dt||x(g))?(this._latlng=$(g),v(this,P)):(v(this,g),this._source=P),this.options.content&&(this._content=this.options.content)},openOn:function(g){return g=arguments.length?g:this._source._map,g.hasLayer(this)||g.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(g){return this._map?this.close():(arguments.length?this._source=g:g=this._source,this._prepareOpen(),this.openOn(g._map)),this},onAdd:function(g){this._zoomAnimated=g._zoomAnimated,this._container||this._initLayout(),g._fadeAnimated&&Se(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),g._fadeAnimated&&Se(this._container,1),this.bringToFront(),this.options.interactive&&(me(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(g){g._fadeAnimated?(Se(this._container,0),this._removeTimeout=setTimeout(r(pe,void 0,this._container),200)):pe(this._container),this.options.interactive&&(ui(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(g){return this._latlng=$(g),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(g){return this._content=g,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var g={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(g.zoomanim=this._animateZoom),g},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ri(this._container),this},bringToBack:function(){return this._map&&li(this._container),this},_prepareOpen:function(g){var P=this._source;if(!P._map)return!1;if(P instanceof Xr){P=null;var X=this._source._layers;for(var st in X)if(X[st]._map){P=X[st];break}if(!P)return!1;this._source=P}if(!g)if(P.getCenter)g=P.getCenter();else if(P.getLatLng)g=P.getLatLng();else if(P.getBounds)g=P.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(g),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var g=this._contentNode,P=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof P=="string")g.innerHTML=P;else{for(;g.hasChildNodes();)g.removeChild(g.firstChild);g.appendChild(P)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var g=this._map.latLngToLayerPoint(this._latlng),P=R(this.options.offset),X=this._getAnchor();this._zoomAnimated?ze(this._container,g.add(X)):P=P.add(g).add(X);var st=this._containerBottom=-P.y,ft=this._containerLeft=-Math.round(this._containerWidth/2)+P.x;this._container.style.bottom=st+"px",this._container.style.left=ft+"px"}},_getAnchor:function(){return[0,0]}});be.include({_initOverlay:function(g,P,X,st){var ft=P;return ft instanceof g||(ft=new g(st).setContent(P)),X&&ft.setLatLng(X),ft}}),Es.include({_initOverlay:function(g,P,X,st){var ft=X;return ft instanceof g?(v(ft,st),ft._source=this):(ft=P&&!st?P:new g(st,this),ft.setContent(X)),ft}});var As=bn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(g){return g=arguments.length?g:this._source._map,!g.hasLayer(this)&&g._popup&&g._popup.options.autoClose&&g.removeLayer(g._popup),g._popup=this,bn.prototype.openOn.call(this,g)},onAdd:function(g){bn.prototype.onAdd.call(this,g),g.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Gs||this._source.on("preclick",ht))},onRemove:function(g){bn.prototype.onRemove.call(this,g),g.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Gs||this._source.off("preclick",ht))},getEvents:function(){var g=bn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(g.preclick=this.close),this.options.keepInView&&(g.moveend=this._adjustPan),g},_initLayout:function(){var g="leaflet-popup",P=this._container=we("div",g+" "+(this.options.className||"")+" leaflet-zoom-animated"),X=this._wrapper=we("div",g+"-content-wrapper",P);if(this._contentNode=we("div",g+"-content",X),Lt(P),xt(this._contentNode),je(P,"contextmenu",ht),this._tipContainer=we("div",g+"-tip-container",P),this._tip=we("div",g+"-tip",this._tipContainer),this.options.closeButton){var st=this._closeButton=we("a",g+"-close-button",P);st.setAttribute("role","button"),st.setAttribute("aria-label","Close popup"),st.href="#close",st.innerHTML='<span aria-hidden="true">&#215;</span>',je(st,"click",function(ft){Rt(ft),this.close()},this)}},_updateLayout:function(){var g=this._contentNode,P=g.style;P.width="",P.whiteSpace="nowrap";var X=g.offsetWidth;X=Math.min(X,this.options.maxWidth),X=Math.max(X,this.options.minWidth),P.width=X+1+"px",P.whiteSpace="",P.height="";var st=g.offsetHeight,ft=this.options.maxHeight,Mt="leaflet-popup-scrolled";ft&&st>ft?(P.height=ft+"px",me(g,Mt)):ui(g,Mt),this._containerWidth=this._container.offsetWidth},_animateZoom:function(g){var P=this._map._latLngToNewLayerPoint(this._latlng,g.zoom,g.center),X=this._getAnchor();ze(this._container,P.add(X))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var g=this._map,P=parseInt(Ge(this._container,"marginBottom"),10)||0,X=this._container.offsetHeight+P,st=this._containerWidth,ft=new k(this._containerLeft,-X-this._containerBottom);ft._add(kr(this._container));var Mt=g.layerPointToContainerPoint(ft),Dt=R(this.options.autoPanPadding),Wt=R(this.options.autoPanPaddingTopLeft||Dt),te=R(this.options.autoPanPaddingBottomRight||Dt),de=g.getSize(),De=0,Xe=0;Mt.x+st+te.x>de.x&&(De=Mt.x+st-de.x+te.x),Mt.x-De-Wt.x<0&&(De=Mt.x-Wt.x),Mt.y+X+te.y>de.y&&(Xe=Mt.y+X-de.y+te.y),Mt.y-Xe-Wt.y<0&&(Xe=Mt.y-Wt.y),(De||Xe)&&(this.options.keepInView&&(this._autopanning=!0),g.fire("autopanstart").panBy([De,Xe]))}},_getAnchor:function(){return R(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),an=function(g,P){return new As(g,P)};be.mergeOptions({closePopupOnClick:!0}),be.include({openPopup:function(g,P,X){return this._initOverlay(As,g,P,X).openOn(this),this},closePopup:function(g){return g=arguments.length?g:this._popup,g&&g.close(),this}}),Es.include({bindPopup:function(g,P){return this._popup=this._initOverlay(As,this._popup,g,P),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(g){return this._popup&&(this instanceof Xr||(this._popup._source=this),this._popup._prepareOpen(g||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(g){return this._popup&&this._popup.setContent(g),this},getPopup:function(){return this._popup},_openPopup:function(g){if(!(!this._popup||!this._map)){Pt(g);var P=g.layer||g.target;if(this._popup._source===P&&!(P instanceof Gs)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(g.latlng);return}this._popup._source=P,this.openPopup(g.latlng)}},_movePopup:function(g){this._popup.setLatLng(g.latlng)},_onKeyPress:function(g){g.originalEvent.keyCode===13&&this._openPopup(g)}});var Fr=bn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(g){bn.prototype.onAdd.call(this,g),this.setOpacity(this.options.opacity),g.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(g){bn.prototype.onRemove.call(this,g),g.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var g=bn.prototype.getEvents.call(this);return this.options.permanent||(g.preclick=this.close),g},_initLayout:function(){var g="leaflet-tooltip",P=g+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=we("div",P),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+a(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(g){var P,X,st=this._map,ft=this._container,Mt=st.latLngToContainerPoint(st.getCenter()),Dt=st.layerPointToContainerPoint(g),Wt=this.options.direction,te=ft.offsetWidth,de=ft.offsetHeight,De=R(this.options.offset),Xe=this._getAnchor();Wt==="top"?(P=te/2,X=de):Wt==="bottom"?(P=te/2,X=0):Wt==="center"?(P=te/2,X=de/2):Wt==="right"?(P=0,X=de/2):Wt==="left"?(P=te,X=de/2):Dt.x<Mt.x?(Wt="right",P=0,X=de/2):(Wt="left",P=te+(De.x+Xe.x)*2,X=de/2),g=g.subtract(R(P,X,!0)).add(De).add(Xe),ui(ft,"leaflet-tooltip-right"),ui(ft,"leaflet-tooltip-left"),ui(ft,"leaflet-tooltip-top"),ui(ft,"leaflet-tooltip-bottom"),me(ft,"leaflet-tooltip-"+Wt),ze(ft,g)},_updatePosition:function(){var g=this._map.latLngToLayerPoint(this._latlng);this._setPosition(g)},setOpacity:function(g){this.options.opacity=g,this._container&&Se(this._container,g)},_animateZoom:function(g){var P=this._map._latLngToNewLayerPoint(this._latlng,g.zoom,g.center);this._setPosition(P)},_getAnchor:function(){return R(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),gs=function(g,P){return new Fr(g,P)};be.include({openTooltip:function(g,P,X){return this._initOverlay(Fr,g,P,X).openOn(this),this},closeTooltip:function(g){return g.close(),this}}),Es.include({bindTooltip:function(g,P){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Fr,this._tooltip,g,P),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(g){if(!(!g&&this._tooltipHandlersAdded)){var P=g?"off":"on",X={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?X.add=this._openTooltip:(X.mouseover=this._openTooltip,X.mouseout=this.closeTooltip,X.click=this._openTooltip,this._map?this._addFocusListeners():X.add=this._addFocusListeners),this._tooltip.options.sticky&&(X.mousemove=this._moveTooltip),this[P](X),this._tooltipHandlersAdded=!g}},openTooltip:function(g){return this._tooltip&&(this instanceof Xr||(this._tooltip._source=this),this._tooltip._prepareOpen(g)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(g){return this._tooltip&&this._tooltip.setContent(g),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(g){var P=g.getElement();P&&(je(P,"focus",function(){this._tooltip._source=g,this.openTooltip()},this),je(P,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(g){var P=g.getElement();P&&P.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(g){!this._tooltip||!this._map||this._map.dragging&&this._map.dragging.moving()||(this._tooltip._source=g.layer||g.target,this.openTooltip(this._tooltip.options.sticky?g.latlng:void 0))},_moveTooltip:function(g){var P=g.latlng,X,st;this._tooltip.options.sticky&&g.originalEvent&&(X=this._map.mouseEventToContainerPoint(g.originalEvent),st=this._map.containerPointToLayerPoint(X),P=this._map.layerPointToLatLng(st)),this._tooltip.setLatLng(P)}});var Vn=sn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(g){var P=g&&g.tagName==="DIV"?g:document.createElement("div"),X=this.options;if(X.html instanceof Element?(yi(P),P.appendChild(X.html)):P.innerHTML=X.html!==!1?X.html:"",X.bgPos){var st=R(X.bgPos);P.style.backgroundPosition=-st.x+"px "+-st.y+"px"}return this._setIconStyles(P,"icon"),P},createShadow:function(){return null}});function Qa(g){return new Vn(g)}sn.Default=Un;var Ms=Es.extend({options:{tileSize:256,opacity:1,updateWhenIdle:jt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(g){v(this,g)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(g){g._addZoomLimit(this)},onRemove:function(g){this._removeAllTiles(),pe(this._container),g._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ri(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(li(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(g){return this.options.opacity=g,this._updateOpacity(),this},setZIndex:function(g){return this.options.zIndex=g,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var g=this._clampZoom(this._map.getZoom());g!==this._tileZoom&&(this._tileZoom=g,this._updateLevels()),this._update()}return this},getEvents:function(){var g={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=s(this._onMoveEnd,this.options.updateInterval,this)),g.move=this._onMove),this._zoomAnimated&&(g.zoomanim=this._animateZoom),g},createTile:function(){return document.createElement("div")},getTileSize:function(){var g=this.options.tileSize;return g instanceof k?g:new k(g,g)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(g){for(var P=this.getPane().children,X=-g(-1/0,1/0),st=0,ft=P.length,Mt;st<ft;st++)Mt=P[st].style.zIndex,P[st]!==this._container&&Mt&&(X=g(X,+Mt));isFinite(X)&&(this.options.zIndex=X+g(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!jt.ielt9){Se(this._container,this.options.opacity);var g=+new Date,P=!1,X=!1;for(var st in this._tiles){var ft=this._tiles[st];if(!(!ft.current||!ft.loaded)){var Mt=Math.min(1,(g-ft.loaded)/200);Se(ft.el,Mt),Mt<1?P=!0:(ft.active?X=!0:this._onOpaqueTile(ft),ft.active=!0)}}X&&!this._noPrune&&this._pruneTiles(),P&&(K(this._fadeFrame),this._fadeFrame=tt(this._updateOpacity,this))}},_onOpaqueTile:f,_initContainer:function(){this._container||(this._container=we("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var g=this._tileZoom,P=this.options.maxZoom;if(g!==void 0){for(var X in this._levels)X=Number(X),this._levels[X].el.children.length||X===g?(this._levels[X].el.style.zIndex=P-Math.abs(g-X),this._onUpdateLevel(X)):(pe(this._levels[X].el),this._removeTilesAtZoom(X),this._onRemoveLevel(X),delete this._levels[X]);var st=this._levels[g],ft=this._map;return st||(st=this._levels[g]={},st.el=we("div","leaflet-tile-container leaflet-zoom-animated",this._container),st.el.style.zIndex=P,st.origin=ft.project(ft.unproject(ft.getPixelOrigin()),g).round(),st.zoom=g,this._setZoomTransform(st,ft.getCenter(),ft.getZoom()),f(st.el.offsetWidth),this._onCreateLevel(st)),this._level=st,st}},_onUpdateLevel:f,_onRemoveLevel:f,_onCreateLevel:f,_pruneTiles:function(){if(this._map){var g,P,X=this._map.getZoom();if(X>this.options.maxZoom||X<this.options.minZoom){this._removeAllTiles();return}for(g in this._tiles)P=this._tiles[g],P.retain=P.current;for(g in this._tiles)if(P=this._tiles[g],P.current&&!P.active){var st=P.coords;this._retainParent(st.x,st.y,st.z,st.z-5)||this._retainChildren(st.x,st.y,st.z,st.z+2)}for(g in this._tiles)this._tiles[g].retain||this._removeTile(g)}},_removeTilesAtZoom:function(g){for(var P in this._tiles)this._tiles[P].coords.z===g&&this._removeTile(P)},_removeAllTiles:function(){for(var g in this._tiles)this._removeTile(g)},_invalidateAll:function(){for(var g in this._levels)pe(this._levels[g].el),this._onRemoveLevel(Number(g)),delete this._levels[g];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(g,P,X,st){var ft=Math.floor(g/2),Mt=Math.floor(P/2),Dt=X-1,Wt=new k(+ft,+Mt);Wt.z=+Dt;var te=this._tileCoordsToKey(Wt),de=this._tiles[te];return de&&de.active?(de.retain=!0,!0):(de&&de.loaded&&(de.retain=!0),Dt>st?this._retainParent(ft,Mt,Dt,st):!1)},_retainChildren:function(g,P,X,st){for(var ft=2*g;ft<2*g+2;ft++)for(var Mt=2*P;Mt<2*P+2;Mt++){var Dt=new k(ft,Mt);Dt.z=X+1;var Wt=this._tileCoordsToKey(Dt),te=this._tiles[Wt];if(te&&te.active){te.retain=!0;continue}else te&&te.loaded&&(te.retain=!0);X+1<st&&this._retainChildren(ft,Mt,X+1,st)}},_resetView:function(g){var P=g&&(g.pinch||g.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),P,P)},_animateZoom:function(g){this._setView(g.center,g.zoom,!0,g.noUpdate)},_clampZoom:function(g){var P=this.options;return P.minNativeZoom!==void 0&&g<P.minNativeZoom?P.minNativeZoom:P.maxNativeZoom!==void 0&&P.maxNativeZoom<g?P.maxNativeZoom:g},_setView:function(g,P,X,st){var ft=Math.round(P);this.options.maxZoom!==void 0&&ft>this.options.maxZoom||this.options.minZoom!==void 0&&ft<this.options.minZoom?ft=void 0:ft=this._clampZoom(ft);var Mt=this.options.updateWhenZooming&&ft!==this._tileZoom;(!st||Mt)&&(this._tileZoom=ft,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),ft!==void 0&&this._update(g),X||this._pruneTiles(),this._noPrune=!!X),this._setZoomTransforms(g,P)},_setZoomTransforms:function(g,P){for(var X in this._levels)this._setZoomTransform(this._levels[X],g,P)},_setZoomTransform:function(g,P,X){var st=this._map.getZoomScale(X,g.zoom),ft=g.origin.multiplyBy(st).subtract(this._map._getNewPixelOrigin(P,X)).round();jt.any3d?ni(g.el,ft,st):ze(g.el,ft)},_resetGrid:function(){var g=this._map,P=g.options.crs,X=this._tileSize=this.getTileSize(),st=this._tileZoom,ft=this._map.getPixelWorldBounds(this._tileZoom);ft&&(this._globalTileRange=this._pxBoundsToTileRange(ft)),this._wrapX=P.wrapLng&&!this.options.noWrap&&[Math.floor(g.project([0,P.wrapLng[0]],st).x/X.x),Math.ceil(g.project([0,P.wrapLng[1]],st).x/X.y)],this._wrapY=P.wrapLat&&!this.options.noWrap&&[Math.floor(g.project([P.wrapLat[0],0],st).y/X.x),Math.ceil(g.project([P.wrapLat[1],0],st).y/X.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(g){var P=this._map,X=P._animatingZoom?Math.max(P._animateToZoom,P.getZoom()):P.getZoom(),st=P.getZoomScale(X,this._tileZoom),ft=P.project(g,this._tileZoom).floor(),Mt=P.getSize().divideBy(st*2);return new F(ft.subtract(Mt),ft.add(Mt))},_update:function(g){var P=this._map;if(P){var X=this._clampZoom(P.getZoom());if(g===void 0&&(g=P.getCenter()),this._tileZoom!==void 0){var st=this._getTiledPixelBounds(g),ft=this._pxBoundsToTileRange(st),Mt=ft.getCenter(),Dt=[],Wt=this.options.keepBuffer,te=new F(ft.getBottomLeft().subtract([Wt,-Wt]),ft.getTopRight().add([Wt,-Wt]));if(!(isFinite(ft.min.x)&&isFinite(ft.min.y)&&isFinite(ft.max.x)&&isFinite(ft.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var de in this._tiles){var De=this._tiles[de].coords;(De.z!==this._tileZoom||!te.contains(new k(De.x,De.y)))&&(this._tiles[de].current=!1)}if(Math.abs(X-this._tileZoom)>1){this._setView(g,X);return}for(var Xe=ft.min.y;Xe<=ft.max.y;Xe++)for(var _i=ft.min.x;_i<=ft.max.x;_i++){var Ln=new k(_i,Xe);if(Ln.z=this._tileZoom,!!this._isValidTile(Ln)){var Ws=this._tiles[this._tileCoordsToKey(Ln)];Ws?Ws.current=!0:Dt.push(Ln)}}if(Dt.sort(function(Wn,Mo){return Wn.distanceTo(Mt)-Mo.distanceTo(Mt)}),Dt.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Xs=document.createDocumentFragment();for(_i=0;_i<Dt.length;_i++)this._addTile(Dt[_i],Xs);this._level.el.appendChild(Xs)}}}},_isValidTile:function(g){var P=this._map.options.crs;if(!P.infinite){var X=this._globalTileRange;if(!P.wrapLng&&(g.x<X.min.x||g.x>X.max.x)||!P.wrapLat&&(g.y<X.min.y||g.y>X.max.y))return!1}if(!this.options.bounds)return!0;var st=this._tileCoordsToBounds(g);return ot(this.options.bounds).overlaps(st)},_keyToBounds:function(g){return this._tileCoordsToBounds(this._keyToTileCoords(g))},_tileCoordsToNwSe:function(g){var P=this._map,X=this.getTileSize(),st=g.scaleBy(X),ft=st.add(X),Mt=P.unproject(st,g.z),Dt=P.unproject(ft,g.z);return[Mt,Dt]},_tileCoordsToBounds:function(g){var P=this._tileCoordsToNwSe(g),X=new it(P[0],P[1]);return this.options.noWrap||(X=this._map.wrapLatLngBounds(X)),X},_tileCoordsToKey:function(g){return g.x+":"+g.y+":"+g.z},_keyToTileCoords:function(g){var P=g.split(":"),X=new k(+P[0],+P[1]);return X.z=+P[2],X},_removeTile:function(g){var P=this._tiles[g];P&&(pe(P.el),delete this._tiles[g],this.fire("tileunload",{tile:P.el,coords:this._keyToTileCoords(g)}))},_initTile:function(g){me(g,"leaflet-tile");var P=this.getTileSize();g.style.width=P.x+"px",g.style.height=P.y+"px",g.onselectstart=f,g.onmousemove=f,jt.ielt9&&this.options.opacity<1&&Se(g,this.options.opacity)},_addTile:function(g,P){var X=this._getTilePos(g),st=this._tileCoordsToKey(g),ft=this.createTile(this._wrapCoords(g),r(this._tileReady,this,g));this._initTile(ft),this.createTile.length<2&&tt(r(this._tileReady,this,g,null,ft)),ze(ft,X),this._tiles[st]={el:ft,coords:g,current:!0},P.appendChild(ft),this.fire("tileloadstart",{tile:ft,coords:g})},_tileReady:function(g,P,X){P&&this.fire("tileerror",{error:P,tile:X,coords:g});var st=this._tileCoordsToKey(g);X=this._tiles[st],X&&(X.loaded=+new Date,this._map._fadeAnimated?(Se(X.el,0),K(this._fadeFrame),this._fadeFrame=tt(this._updateOpacity,this)):(X.active=!0,this._pruneTiles()),P||(me(X.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:X.el,coords:g})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),jt.ielt9||!this._map._fadeAnimated?tt(this._pruneTiles,this):setTimeout(r(this._pruneTiles,this),250)))},_getTilePos:function(g){return g.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(g){var P=new k(this._wrapX?u(g.x,this._wrapX):g.x,this._wrapY?u(g.y,this._wrapY):g.y);return P.z=g.z,P},_pxBoundsToTileRange:function(g){var P=this.getTileSize();return new F(g.min.unscaleBy(P).floor(),g.max.unscaleBy(P).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var g in this._tiles)if(!this._tiles[g].loaded)return!1;return!0}});function qs(g){return new Ms(g)}var Yr=Ms.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(g,P){this._url=g,P=v(this,P),P.detectRetina&&jt.retina&&P.maxZoom>0?(P.tileSize=Math.floor(P.tileSize/2),P.zoomReverse?(P.zoomOffset--,P.minZoom=Math.min(P.maxZoom,P.minZoom+1)):(P.zoomOffset++,P.maxZoom=Math.max(P.minZoom,P.maxZoom-1)),P.minZoom=Math.max(0,P.minZoom)):P.zoomReverse?P.minZoom=Math.min(P.maxZoom,P.minZoom):P.maxZoom=Math.max(P.minZoom,P.maxZoom),typeof P.subdomains=="string"&&(P.subdomains=P.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(g,P){return this._url===g&&P===void 0&&(P=!0),this._url=g,P||this.redraw(),this},createTile:function(g,P){var X=document.createElement("img");return je(X,"load",r(this._tileOnLoad,this,P,X)),je(X,"error",r(this._tileOnError,this,P,X)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(X.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(X.referrerPolicy=this.options.referrerPolicy),X.alt="",X.src=this.getTileUrl(g),X},getTileUrl:function(g){var P={r:jt.retina?"@2x":"",s:this._getSubdomain(g),x:g.x,y:g.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var X=this._globalTileRange.max.y-g.y;this.options.tms&&(P.y=X),P["-y"]=X}return y(this._url,n(P,this.options))},_tileOnLoad:function(g,P){jt.ielt9?setTimeout(r(g,this,null,P),0):g(null,P)},_tileOnError:function(g,P,X){var st=this.options.errorTileUrl;st&&P.getAttribute("src")!==st&&(P.src=st),g(X,P)},_onTileRemove:function(g){g.tile.onload=null},_getZoomForUrl:function(){var g=this._tileZoom,P=this.options.maxZoom,X=this.options.zoomReverse,st=this.options.zoomOffset;return X&&(g=P-g),g+st},_getSubdomain:function(g){var P=Math.abs(g.x+g.y)%this.options.subdomains.length;return this.options.subdomains[P]},_abortLoading:function(){var g,P;for(g in this._tiles)if(this._tiles[g].coords.z!==this._tileZoom&&(P=this._tiles[g].el,P.onload=f,P.onerror=f,!P.complete)){P.src=O;var X=this._tiles[g].coords;pe(P),delete this._tiles[g],this.fire("tileabort",{tile:P,coords:X})}},_removeTile:function(g){var P=this._tiles[g];if(P)return P.el.setAttribute("src",O),Ms.prototype._removeTile.call(this,g)},_tileReady:function(g,P,X){if(!(!this._map||X&&X.getAttribute("src")===O))return Ms.prototype._tileReady.call(this,g,P,X)}});function pa(g,P){return new Yr(g,P)}var Zr=Yr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(g,P){this._url=g;var X=n({},this.defaultWmsParams);for(var st in P)st in this.options||(X[st]=P[st]);P=v(this,P);var ft=P.detectRetina&&jt.retina?2:1,Mt=this.getTileSize();X.width=Mt.x*ft,X.height=Mt.y*ft,this.wmsParams=X},onAdd:function(g){this._crs=this.options.crs||g.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var P=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[P]=this._crs.code,Yr.prototype.onAdd.call(this,g)},getTileUrl:function(g){var P=this._tileCoordsToNwSe(g),X=this._crs,st=H(X.project(P[0]),X.project(P[1])),ft=st.min,Mt=st.max,Dt=(this._wmsVersion>=1.3&&this._crs===In?[ft.y,ft.x,Mt.y,Mt.x]:[ft.x,ft.y,Mt.x,Mt.y]).join(","),Wt=Yr.prototype.getTileUrl.call(this,g);return Wt+p(this.wmsParams,Wt,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Dt},setParams:function(g,P){return n(this.wmsParams,g),P||this.redraw(),this}});function tl(g,P){return new Zr(g,P)}Yr.WMS=Zr,pa.wms=tl;var ln=Es.extend({options:{padding:.1},initialize:function(g){v(this,g),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&me(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var g={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(g.zoomanim=this._onAnimZoom),g},_onAnimZoom:function(g){this._updateTransform(g.center,g.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(g,P){var X=this._map.getZoomScale(P,this._zoom),st=this._map.getSize().multiplyBy(.5+this.options.padding),ft=this._map.project(this._center,P),Mt=st.multiplyBy(-X).add(ft).subtract(this._map._getNewPixelOrigin(g,P));jt.any3d?ni(this._container,Mt,X):ze(this._container,Mt)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var g in this._layers)this._layers[g]._reset()},_onZoomEnd:function(){for(var g in this._layers)this._layers[g]._project()},_updatePaths:function(){for(var g in this._layers)this._layers[g]._update()},_update:function(){var g=this.options.padding,P=this._map.getSize(),X=this._map.containerPointToLayerPoint(P.multiplyBy(-g)).round();this._bounds=new F(X,X.add(P.multiplyBy(1+g*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),zr=ln.extend({options:{tolerance:0},getEvents:function(){var g=ln.prototype.getEvents.call(this);return g.viewprereset=this._onViewPreReset,g},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ln.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var g=this._container=document.createElement("canvas");je(g,"mousemove",this._onMouseMove,this),je(g,"click dblclick mousedown mouseup contextmenu",this._onClick,this),je(g,"mouseout",this._handleMouseOut,this),g._leaflet_disable_events=!0,this._ctx=g.getContext("2d")},_destroyContainer:function(){K(this._redrawRequest),delete this._ctx,pe(this._container),ci(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var g;this._redrawBounds=null;for(var P in this._layers)g=this._layers[P],g._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ln.prototype._update.call(this);var g=this._bounds,P=this._container,X=g.getSize(),st=jt.retina?2:1;ze(P,g.min),P.width=st*X.x,P.height=st*X.y,P.style.width=X.x+"px",P.style.height=X.y+"px",jt.retina&&this._ctx.scale(2,2),this._ctx.translate(-g.min.x,-g.min.y),this.fire("update")}},_reset:function(){ln.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(g){this._updateDashArray(g),this._layers[a(g)]=g;var P=g._order={layer:g,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=P),this._drawLast=P,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(g){this._requestRedraw(g)},_removePath:function(g){var P=g._order,X=P.next,st=P.prev;X?X.prev=st:this._drawLast=st,st?st.next=X:this._drawFirst=X,delete g._order,delete this._layers[a(g)],this._requestRedraw(g)},_updatePath:function(g){this._extendRedrawBounds(g),g._project(),g._update(),this._requestRedraw(g)},_updateStyle:function(g){this._updateDashArray(g),this._requestRedraw(g)},_updateDashArray:function(g){if(typeof g.options.dashArray=="string"){var P=g.options.dashArray.split(/[, ]+/),X=[],st,ft;for(ft=0;ft<P.length;ft++){if(st=Number(P[ft]),isNaN(st))return;X.push(st)}g.options._dashArray=X}else g.options._dashArray=g.options.dashArray},_requestRedraw:function(g){this._map&&(this._extendRedrawBounds(g),this._redrawRequest=this._redrawRequest||tt(this._redraw,this))},_extendRedrawBounds:function(g){if(g._pxBounds){var P=(g.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new F,this._redrawBounds.extend(g._pxBounds.min.subtract([P,P])),this._redrawBounds.extend(g._pxBounds.max.add([P,P]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var g=this._redrawBounds;if(g){var P=g.getSize();this._ctx.clearRect(g.min.x,g.min.y,P.x,P.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var g,P=this._redrawBounds;if(this._ctx.save(),P){var X=P.getSize();this._ctx.beginPath(),this._ctx.rect(P.min.x,P.min.y,X.x,X.y),this._ctx.clip()}this._drawing=!0;for(var st=this._drawFirst;st;st=st.next)g=st.layer,(!P||g._pxBounds&&g._pxBounds.intersects(P))&&g._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(g,P){if(this._drawing){var X,st,ft,Mt,Dt=g._parts,Wt=Dt.length,te=this._ctx;if(Wt){for(te.beginPath(),X=0;X<Wt;X++){for(st=0,ft=Dt[X].length;st<ft;st++)Mt=Dt[X][st],te[st?"lineTo":"moveTo"](Mt.x,Mt.y);P&&te.closePath()}this._fillStroke(te,g)}}},_updateCircle:function(g){if(!(!this._drawing||g._empty())){var P=g._point,X=this._ctx,st=Math.max(Math.round(g._radius),1),ft=(Math.max(Math.round(g._radiusY),1)||st)/st;ft!==1&&(X.save(),X.scale(1,ft)),X.beginPath(),X.arc(P.x,P.y/ft,st,0,Math.PI*2,!1),ft!==1&&X.restore(),this._fillStroke(X,g)}},_fillStroke:function(g,P){var X=P.options;X.fill&&(g.globalAlpha=X.fillOpacity,g.fillStyle=X.fillColor||X.color,g.fill(X.fillRule||"evenodd")),X.stroke&&X.weight!==0&&(g.setLineDash&&g.setLineDash(P.options&&P.options._dashArray||[]),g.globalAlpha=X.opacity,g.lineWidth=X.weight,g.strokeStyle=X.color,g.lineCap=X.lineCap,g.lineJoin=X.lineJoin,g.stroke())},_onClick:function(g){for(var P=this._map.mouseEventToLayerPoint(g),X,st,ft=this._drawFirst;ft;ft=ft.next)X=ft.layer,X.options.interactive&&X._containsPoint(P)&&(!(g.type==="click"||g.type==="preclick")||!this._map._draggableMoved(X))&&(st=X);this._fireEvent(st?[st]:!1,g)},_onMouseMove:function(g){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var P=this._map.mouseEventToLayerPoint(g);this._handleMouseHover(g,P)}},_handleMouseOut:function(g){var P=this._hoveredLayer;P&&(ui(this._container,"leaflet-interactive"),this._fireEvent([P],g,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(g,P){if(!this._mouseHoverThrottled){for(var X,st,ft=this._drawFirst;ft;ft=ft.next)X=ft.layer,X.options.interactive&&X._containsPoint(P)&&(st=X);st!==this._hoveredLayer&&(this._handleMouseOut(g),st&&(me(this._container,"leaflet-interactive"),this._fireEvent([st],g,"mouseover"),this._hoveredLayer=st)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,g),this._mouseHoverThrottled=!0,setTimeout(r(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(g,P,X){this._map._fireDOMEvent(P,X||P.type,g)},_bringToFront:function(g){var P=g._order;if(P){var X=P.next,st=P.prev;if(X)X.prev=st;else return;st?st.next=X:X&&(this._drawFirst=X),P.prev=this._drawLast,this._drawLast.next=P,P.next=null,this._drawLast=P,this._requestRedraw(g)}},_bringToBack:function(g){var P=g._order;if(P){var X=P.next,st=P.prev;if(st)st.next=X;else return;X?X.prev=st:st&&(this._drawLast=st),P.prev=null,P.next=this._drawFirst,this._drawFirst.prev=P,this._drawFirst=P,this._requestRedraw(g)}}});function ts(g){return jt.canvas?new zr(g):null}var ys=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(g){return document.createElement("<lvml:"+g+' class="lvml">')}}catch{}return function(g){return document.createElement("<"+g+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Eo={_initContainer:function(){this._container=we("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ln.prototype._update.call(this),this.fire("update"))},_initPath:function(g){var P=g._container=ys("shape");me(P,"leaflet-vml-shape "+(this.options.className||"")),P.coordsize="1 1",g._path=ys("path"),P.appendChild(g._path),this._updateStyle(g),this._layers[a(g)]=g},_addPath:function(g){var P=g._container;this._container.appendChild(P),g.options.interactive&&g.addInteractiveTarget(P)},_removePath:function(g){var P=g._container;pe(P),g.removeInteractiveTarget(P),delete this._layers[a(g)]},_updateStyle:function(g){var P=g._stroke,X=g._fill,st=g.options,ft=g._container;ft.stroked=!!st.stroke,ft.filled=!!st.fill,st.stroke?(P||(P=g._stroke=ys("stroke")),ft.appendChild(P),P.weight=st.weight+"px",P.color=st.color,P.opacity=st.opacity,st.dashArray?P.dashStyle=x(st.dashArray)?st.dashArray.join(" "):st.dashArray.replace(/( *, *)/g," "):P.dashStyle="",P.endcap=st.lineCap.replace("butt","flat"),P.joinstyle=st.lineJoin):P&&(ft.removeChild(P),g._stroke=null),st.fill?(X||(X=g._fill=ys("fill")),ft.appendChild(X),X.color=st.fillColor||st.color,X.opacity=st.fillOpacity):X&&(ft.removeChild(X),g._fill=null)},_updateCircle:function(g){var P=g._point.round(),X=Math.round(g._radius),st=Math.round(g._radiusY||X);this._setPath(g,g._empty()?"M0 0":"AL "+P.x+","+P.y+" "+X+","+st+" 0,"+65535*360)},_setPath:function(g,P){g._path.v=P},_bringToFront:function(g){ri(g._container)},_bringToBack:function(g){li(g._container)}},qn=jt.vml?ys:Ft,Ss=ln.extend({_initContainer:function(){this._container=qn("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=qn("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){pe(this._container),ci(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ln.prototype._update.call(this);var g=this._bounds,P=g.getSize(),X=this._container;(!this._svgSize||!this._svgSize.equals(P))&&(this._svgSize=P,X.setAttribute("width",P.x),X.setAttribute("height",P.y)),ze(X,g.min),X.setAttribute("viewBox",[g.min.x,g.min.y,P.x,P.y].join(" ")),this.fire("update")}},_initPath:function(g){var P=g._path=qn("path");g.options.className&&me(P,g.options.className),g.options.interactive&&me(P,"leaflet-interactive"),this._updateStyle(g),this._layers[a(g)]=g},_addPath:function(g){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(g._path),g.addInteractiveTarget(g._path)},_removePath:function(g){pe(g._path),g.removeInteractiveTarget(g._path),delete this._layers[a(g)]},_updatePath:function(g){g._project(),g._update()},_updateStyle:function(g){var P=g._path,X=g.options;P&&(X.stroke?(P.setAttribute("stroke",X.color),P.setAttribute("stroke-opacity",X.opacity),P.setAttribute("stroke-width",X.weight),P.setAttribute("stroke-linecap",X.lineCap),P.setAttribute("stroke-linejoin",X.lineJoin),X.dashArray?P.setAttribute("stroke-dasharray",X.dashArray):P.removeAttribute("stroke-dasharray"),X.dashOffset?P.setAttribute("stroke-dashoffset",X.dashOffset):P.removeAttribute("stroke-dashoffset")):P.setAttribute("stroke","none"),X.fill?(P.setAttribute("fill",X.fillColor||X.color),P.setAttribute("fill-opacity",X.fillOpacity),P.setAttribute("fill-rule",X.fillRule||"evenodd")):P.setAttribute("fill","none"))},_updatePoly:function(g,P){this._setPath(g,It(g._parts,P))},_updateCircle:function(g){var P=g._point,X=Math.max(Math.round(g._radius),1),st=Math.max(Math.round(g._radiusY),1)||X,ft="a"+X+","+st+" 0 1,0 ",Mt=g._empty()?"M0 0":"M"+(P.x-X)+","+P.y+ft+X*2+",0 "+ft+-X*2+",0 ";this._setPath(g,Mt)},_setPath:function(g,P){g._path.setAttribute("d",P)},_bringToFront:function(g){ri(g._path)},_bringToBack:function(g){li(g._path)}});jt.vml&&Ss.include(Eo);function _n(g){return jt.svg||jt.vml?new Ss(g):null}be.include({getRenderer:function(g){var P=g.options.renderer||this._getPaneRenderer(g.options.pane)||this.options.renderer||this._renderer;return P||(P=this._renderer=this._createRenderer()),this.hasLayer(P)||this.addLayer(P),P},_getPaneRenderer:function(g){if(g==="overlayPane"||g===void 0)return!1;var P=this._paneRenderers[g];return P===void 0&&(P=this._createRenderer({pane:g}),this._paneRenderers[g]=P),P},_createRenderer:function(g){return this.options.preferCanvas&&ts(g)||_n(g)}});var vs=wo.extend({initialize:function(g,P){wo.prototype.initialize.call(this,this._boundsToLatLngs(g),P)},setBounds:function(g){return this.setLatLngs(this._boundsToLatLngs(g))},_boundsToLatLngs:function(g){return g=ot(g),[g.getSouthWest(),g.getNorthWest(),g.getNorthEast(),g.getSouthEast()]}});function Pr(g,P){return new vs(g,P)}Ss.create=qn,Ss.pointsToPath=It,Kn.geometryToLayer=Ko,Kn.coordsToLatLng=Us,Kn.coordsToLatLngs=Jn,Kn.latLngToCoords=Br,Kn.latLngsToCoords=Vs,Kn.getFeature=Nr,Kn.asFeature=Qn,be.mergeOptions({boxZoom:!0});var el=Pe.extend({initialize:function(g){this._map=g,this._container=g._container,this._pane=g._panes.overlayPane,this._resetStateTimeout=0,g.on("unload",this._destroy,this)},addHooks:function(){je(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ci(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){pe(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(g){if(!g.shiftKey||g.which!==1&&g.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Tr(),gi(),this._startPoint=this._map.mouseEventToContainerPoint(g),je(document,{contextmenu:Pt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(g){this._moved||(this._moved=!0,this._box=we("div","leaflet-zoom-box",this._container),me(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(g);var P=new F(this._point,this._startPoint),X=P.getSize();ze(this._box,P.min),this._box.style.width=X.x+"px",this._box.style.height=X.y+"px"},_finish:function(){this._moved&&(pe(this._box),ui(this._container,"leaflet-crosshair")),gn(),vr(),ci(document,{contextmenu:Pt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(g){if(!(g.which!==1&&g.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(r(this._resetState,this),0);var P=new it(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(P).fire("boxzoomend",{boxZoomBounds:P})}},_onKeyDown:function(g){g.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});be.addInitHook("addHandler","boxZoom",el),be.mergeOptions({doubleClickZoom:!0});var il=Pe.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(g){var P=this._map,X=P.getZoom(),st=P.options.zoomDelta,ft=g.originalEvent.shiftKey?X-st:X+st;P.options.doubleClickZoom==="center"?P.setZoom(ft):P.setZoomAround(g.containerPoint,ft)}});be.addInitHook("addHandler","doubleClickZoom",il),be.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var mn=Pe.extend({addHooks:function(){if(!this._draggable){var g=this._map;this._draggable=new Ir(g._mapPane,g._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),g.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),g.on("zoomend",this._onZoomEnd,this),g.whenReady(this._onZoomEnd,this))}me(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ui(this._map._container,"leaflet-grab"),ui(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var g=this._map;if(g._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var P=ot(this._map.options.maxBounds);this._offsetLimit=H(this._map.latLngToContainerPoint(P.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(P.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;g.fire("movestart").fire("dragstart"),g.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(g){if(this._map.options.inertia){var P=this._lastTime=+new Date,X=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(X),this._times.push(P),this._prunePositions(P)}this._map.fire("move",g).fire("drag",g)},_prunePositions:function(g){for(;this._positions.length>1&&g-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var g=this._map.getSize().divideBy(2),P=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=P.subtract(g).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(g,P){return g-(g-P)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var g=this._draggable._newPos.subtract(this._draggable._startPos),P=this._offsetLimit;g.x<P.min.x&&(g.x=this._viscousLimit(g.x,P.min.x)),g.y<P.min.y&&(g.y=this._viscousLimit(g.y,P.min.y)),g.x>P.max.x&&(g.x=this._viscousLimit(g.x,P.max.x)),g.y>P.max.y&&(g.y=this._viscousLimit(g.y,P.max.y)),this._draggable._newPos=this._draggable._startPos.add(g)}},_onPreDragWrap:function(){var g=this._worldWidth,P=Math.round(g/2),X=this._initialWorldOffset,st=this._draggable._newPos.x,ft=(st-P+X)%g+P-X,Mt=(st+P+X)%g-P-X,Dt=Math.abs(ft+X)<Math.abs(Mt+X)?ft:Mt;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Dt},_onDragEnd:function(g){var P=this._map,X=P.options,st=!X.inertia||g.noInertia||this._times.length<2;if(P.fire("dragend",g),st)P.fire("moveend");else{this._prunePositions(+new Date);var ft=this._lastPos.subtract(this._positions[0]),Mt=(this._lastTime-this._times[0])/1e3,Dt=X.easeLinearity,Wt=ft.multiplyBy(Dt/Mt),te=Wt.distanceTo([0,0]),de=Math.min(X.inertiaMaxSpeed,te),De=Wt.multiplyBy(de/te),Xe=de/(X.inertiaDeceleration*Dt),_i=De.multiplyBy(-Xe/2).round();!_i.x&&!_i.y?P.fire("moveend"):(_i=P._limitOffset(_i,P.options.maxBounds),tt(function(){P.panBy(_i,{duration:Xe,easeLinearity:Dt,noMoveStart:!0,animate:!0})}))}}});be.addInitHook("addHandler","dragging",mn),be.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Is=Pe.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(g){this._map=g,this._setPanDelta(g.options.keyboardPanDelta),this._setZoomDelta(g.options.zoomDelta)},addHooks:function(){var g=this._map._container;g.tabIndex<=0&&(g.tabIndex="0"),je(g,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ci(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var g=document.body,P=document.documentElement,X=g.scrollTop||P.scrollTop,st=g.scrollLeft||P.scrollLeft;this._map._container.focus(),window.scrollTo(st,X)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(g){var P=this._panKeys={},X=this.keyCodes,st,ft;for(st=0,ft=X.left.length;st<ft;st++)P[X.left[st]]=[-1*g,0];for(st=0,ft=X.right.length;st<ft;st++)P[X.right[st]]=[g,0];for(st=0,ft=X.down.length;st<ft;st++)P[X.down[st]]=[0,g];for(st=0,ft=X.up.length;st<ft;st++)P[X.up[st]]=[0,-1*g]},_setZoomDelta:function(g){var P=this._zoomKeys={},X=this.keyCodes,st,ft;for(st=0,ft=X.zoomIn.length;st<ft;st++)P[X.zoomIn[st]]=g;for(st=0,ft=X.zoomOut.length;st<ft;st++)P[X.zoomOut[st]]=-g},_addHooks:function(){je(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ci(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(g){if(!(g.altKey||g.ctrlKey||g.metaKey)){var P=g.keyCode,X=this._map,st;if(P in this._panKeys){if(!X._panAnim||!X._panAnim._inProgress)if(st=this._panKeys[P],g.shiftKey&&(st=R(st).multiplyBy(3)),X.options.maxBounds&&(st=X._limitOffset(R(st),X.options.maxBounds)),X.options.worldCopyJump){var ft=X.wrapLatLng(X.unproject(X.project(X.getCenter()).add(st)));X.panTo(ft)}else X.panBy(st)}else if(P in this._zoomKeys)X.setZoom(X.getZoom()+(g.shiftKey?3:1)*this._zoomKeys[P]);else if(P===27&&X._popup&&X._popup.options.closeOnEscapeKey)X.closePopup();else return;Pt(g)}}});be.addInitHook("addHandler","keyboard",Is),be.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ma=Pe.extend({addHooks:function(){je(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ci(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(g){var P=Zt(g),X=this._map.options.wheelDebounceTime;this._delta+=P,this._lastMousePos=this._map.mouseEventToContainerPoint(g),this._startTime||(this._startTime=+new Date);var st=Math.max(X-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r(this._performZoom,this),st),Pt(g)},_performZoom:function(){var g=this._map,P=g.getZoom(),X=this._map.options.zoomSnap||0;g._stop();var st=this._delta/(this._map.options.wheelPxPerZoomLevel*4),ft=4*Math.log(2/(1+Math.exp(-Math.abs(st))))/Math.LN2,Mt=X?Math.ceil(ft/X)*X:ft,Dt=g._limitZoom(P+(this._delta>0?Mt:-Mt))-P;this._delta=0,this._startTime=null,Dt&&(g.options.scrollWheelZoom==="center"?g.setZoom(P+Dt):g.setZoomAround(this._lastMousePos,P+Dt))}});be.addInitHook("addHandler","scrollWheelZoom",ma);var Co=600;be.mergeOptions({tapHold:jt.touchNative&&jt.safari&&jt.mobile,tapTolerance:15});var Ns=Pe.extend({addHooks:function(){je(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ci(this._map._container,"touchstart",this._onDown,this)},_onDown:function(g){if(clearTimeout(this._holdTimeout),g.touches.length===1){var P=g.touches[0];this._startPos=this._newPos=new k(P.clientX,P.clientY),this._holdTimeout=setTimeout(r(function(){this._cancel(),this._isTapValid()&&(je(document,"touchend",Rt),je(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",P))},this),Co),je(document,"touchend touchcancel contextmenu",this._cancel,this),je(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function g(){ci(document,"touchend",Rt),ci(document,"touchend touchcancel",g)},_cancel:function(){clearTimeout(this._holdTimeout),ci(document,"touchend touchcancel contextmenu",this._cancel,this),ci(document,"touchmove",this._onMove,this)},_onMove:function(g){var P=g.touches[0];this._newPos=new k(P.clientX,P.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(g,P){var X=new MouseEvent(g,{bubbles:!0,cancelable:!0,view:window,screenX:P.screenX,screenY:P.screenY,clientX:P.clientX,clientY:P.clientY});X._simulated=!0,P.target.dispatchEvent(X)}});be.addInitHook("addHandler","tapHold",Ns),be.mergeOptions({touchZoom:jt.touch,bounceAtZoomLimits:!0});var jr=Pe.extend({addHooks:function(){me(this._map._container,"leaflet-touch-zoom"),je(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ui(this._map._container,"leaflet-touch-zoom"),ci(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(g){var P=this._map;if(!(!g.touches||g.touches.length!==2||P._animatingZoom||this._zooming)){var X=P.mouseEventToContainerPoint(g.touches[0]),st=P.mouseEventToContainerPoint(g.touches[1]);this._centerPoint=P.getSize()._divideBy(2),this._startLatLng=P.containerPointToLatLng(this._centerPoint),P.options.touchZoom!=="center"&&(this._pinchStartLatLng=P.containerPointToLatLng(X.add(st)._divideBy(2))),this._startDist=X.distanceTo(st),this._startZoom=P.getZoom(),this._moved=!1,this._zooming=!0,P._stop(),je(document,"touchmove",this._onTouchMove,this),je(document,"touchend touchcancel",this._onTouchEnd,this),Rt(g)}},_onTouchMove:function(g){if(!(!g.touches||g.touches.length!==2||!this._zooming)){var P=this._map,X=P.mouseEventToContainerPoint(g.touches[0]),st=P.mouseEventToContainerPoint(g.touches[1]),ft=X.distanceTo(st)/this._startDist;if(this._zoom=P.getScaleZoom(ft,this._startZoom),!P.options.bounceAtZoomLimits&&(this._zoom<P.getMinZoom()&&ft<1||this._zoom>P.getMaxZoom()&&ft>1)&&(this._zoom=P._limitZoom(this._zoom)),P.options.touchZoom==="center"){if(this._center=this._startLatLng,ft===1)return}else{var Mt=X._add(st)._divideBy(2)._subtract(this._centerPoint);if(ft===1&&Mt.x===0&&Mt.y===0)return;this._center=P.unproject(P.project(this._pinchStartLatLng,this._zoom).subtract(Mt),this._zoom)}this._moved||(P._moveStart(!0,!1),this._moved=!0),K(this._animRequest);var Dt=r(P._move,P,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=tt(Dt,this,!0),Rt(g)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,K(this._animRequest),ci(document,"touchmove",this._onTouchMove,this),ci(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});be.addInitHook("addHandler","touchZoom",jr),be.BoxZoom=el,be.DoubleClickZoom=il,be.Drag=mn,be.Keyboard=Is,be.ScrollWheelZoom=ma,be.TapHold=Ns,be.TouchZoom=jr,e.Bounds=F,e.Browser=jt,e.CRS=ct,e.Canvas=zr,e.Circle=Cs,e.CircleMarker=_o,e.Class=N,e.Control=dr,e.DivIcon=Vn,e.DivOverlay=bn,e.DomEvent=Ce,e.DomUtil=ns,e.Draggable=Ir,e.Evented=C,e.FeatureGroup=Xr,e.GeoJSON=Kn,e.GridLayer=Ms,e.Handler=Pe,e.Icon=sn,e.ImageOverlay=ms,e.LatLng=dt,e.LatLngBounds=it,e.Layer=Es,e.LayerGroup=bo,e.LineUtil=Sn,e.Map=be,e.Marker=os,e.Mixin=ca,e.Path=Gs,e.Point=k,e.PolyUtil=no,e.Polygon=wo,e.Polyline=Ps,e.Popup=As,e.PosAnimation=Ne,e.Projection=Do,e.Rectangle=vs,e.Renderer=ln,e.SVG=Ss,e.SVGOverlay=pn,e.TileLayer=Yr,e.Tooltip=Fr,e.Transformation=mt,e.Util=D,e.VideoOverlay=$r,e.bind=r,e.bounds=H,e.canvas=ts,e.circle=ps,e.circleMarker=vn,e.control=xi,e.divIcon=Qa,e.extend=n,e.featureGroup=so,e.geoJSON=da,e.geoJson=xo,e.gridLayer=qs,e.icon=ds,e.imageOverlay=Os,e.latLng=$,e.latLngBounds=ot,e.layerGroup=js,e.map=gr,e.marker=on,e.point=R,e.polygon=Zo,e.polyline=kn,e.popup=an,e.rectangle=Pr,e.setOptions=v,e.stamp=a,e.svg=_n,e.svgOverlay=Wl,e.tileLayer=pa,e.tooltip=gs,e.transformation=wt,e.version=t,e.videoOverlay=as;var wn=window.L;e.noConflict=function(){return window.L=wn,this},window.L=e})});var sd=qe((nd,mh)=>{(function(e,t){typeof define=="function"&&define.amd?define(["leaflet"],e):typeof nd=="object"&&(typeof t<"u"&&t.L?mh.exports=e(L):mh.exports=e(ks())),typeof t<"u"&&t.L&&(t.L.Control.Locate=e(L))})(function(e){let t=(s,u,f)=>{f=f.split(" "),f.forEach(function(c){e.DomUtil[s].call(this,u,c)})},n=(s,u)=>t("addClass",s,u),i=(s,u)=>t("removeClass",s,u),r=e.Marker.extend({initialize(s,u){e.Util.setOptions(this,u),this._latlng=s,this.createIcon()},createIcon(){let s=this.options,u="";s.color!==void 0&&(u+=`stroke:${s.color};`),s.weight!==void 0&&(u+=`stroke-width:${s.weight};`),s.fillColor!==void 0&&(u+=`fill:${s.fillColor};`),s.fillOpacity!==void 0&&(u+=`fill-opacity:${s.fillOpacity};`),s.opacity!==void 0&&(u+=`opacity:${s.opacity};`);let f=this._getIconSVG(s,u);this._locationIcon=e.divIcon({className:f.className,html:f.svg,iconSize:[f.w,f.h]}),this.setIcon(this._locationIcon)},_getIconSVG(s,u){let f=s.radius,c=s.weight,d=f+c,m=d*2;return{className:"leaflet-control-locate-location",svg:`<svg xmlns="http://www.w3.org/2000/svg" width="${m}" height="${m}" version="1.1" viewBox="-${d} -${d} ${m} ${m}"><circle r="`+f+'" style="'+u+'" /></svg>',w:m,h:m}},setStyle(s){e.Util.setOptions(this,s),this.createIcon()}}),o=r.extend({initialize(s,u,f){e.Util.setOptions(this,f),this._latlng=s,this._heading=u,this.createIcon()},setHeading(s){this._heading=s},_getIconSVG(s,u){let f=s.radius,c=s.width+s.weight,d=(f+s.depth+s.weight)*2,m=`M0,0 l${s.width/2},${s.depth} l-${c},0 z`,v=`transform: rotate(${this._heading}deg)`;return{className:"leaflet-control-locate-heading",svg:`<svg xmlns="http://www.w3.org/2000/svg" width="${c}" height="${d}" version="1.1" viewBox="-${c/2} 0 ${c} ${d}" style="${v}"><path d="`+m+'" style="'+u+'" /></svg>',w:c,h:d}}}),a=e.Control.extend({options:{position:"topleft",layer:void 0,setView:"untilPanOrZoom",keepCurrentZoomLevel:!1,initialZoomLevel:!1,getLocationBounds(s){return s.bounds},flyTo:!1,clickBehavior:{inView:"stop",outOfView:"setView",inViewNotFollowing:"inView"},returnToPrevBounds:!1,cacheLocation:!0,drawCircle:!0,drawMarker:!0,showCompass:!0,markerClass:r,compassClass:o,circleStyle:{className:"leaflet-control-locate-circle",color:"#136AEC",fillColor:"#136AEC",fillOpacity:.15,weight:0},markerStyle:{className:"leaflet-control-locate-marker",color:"#fff",fillColor:"#2A93EE",fillOpacity:1,weight:3,opacity:1,radius:9},compassStyle:{fillColor:"#2A93EE",fillOpacity:1,weight:0,color:"#fff",opacity:1,radius:9,width:9,depth:6},followCircleStyle:{},followMarkerStyle:{},followCompassStyle:{},icon:"leaflet-control-locate-location-arrow",iconLoading:"leaflet-control-locate-spinner",iconElementTag:"span",textElementTag:"small",circlePadding:[0,0],metric:!0,createButtonCallback(s,u){let f=e.DomUtil.create("a","leaflet-bar-part leaflet-bar-part-single",s);f.title=u.strings.title,f.href="#",f.setAttribute("role","button");let c=e.DomUtil.create(u.iconElementTag,u.icon,f);if(u.strings.text!==void 0){let d=e.DomUtil.create(u.textElementTag,"leaflet-locate-text",f);d.textContent=u.strings.text,f.classList.add("leaflet-locate-text-active"),f.parentNode.style.display="flex",u.icon.length>0&&c.classList.add("leaflet-locate-icon")}return{link:f,icon:c}},onLocationError(s,u){alert(s.message)},onLocationOutsideMapBounds(s){s.stop(),alert(s.options.strings.outsideMapBoundsMsg)},showPopup:!0,strings:{title:"Show me where I am",metersUnit:"meters",feetUnit:"feet",popup:"You are within {distance} {unit} from this point",outsideMapBoundsMsg:"You seem located outside the boundaries of the map"},locateOptions:{maxZoom:1/0,watch:!0,setView:!1}},initialize(s){for(let u in s)typeof this.options[u]=="object"?e.extend(this.options[u],s[u]):this.options[u]=s[u];this.options.followMarkerStyle=e.extend({},this.options.markerStyle,this.options.followMarkerStyle),this.options.followCircleStyle=e.extend({},this.options.circleStyle,this.options.followCircleStyle),this.options.followCompassStyle=e.extend({},this.options.compassStyle,this.options.followCompassStyle)},onAdd(s){let u=e.DomUtil.create("div","leaflet-control-locate leaflet-bar leaflet-control");this._container=u,this._map=s,this._layer=this.options.layer||new e.LayerGroup,this._layer.addTo(s),this._event=void 0,this._compassHeading=null,this._prevBounds=null;let f=this.options.createButtonCallback(u,this.options);return this._link=f.link,this._icon=f.icon,e.DomEvent.on(this._link,"click",function(c){e.DomEvent.stopPropagation(c),e.DomEvent.preventDefault(c),this._onClick()},this).on(this._link,"dblclick",e.DomEvent.stopPropagation),this._resetVariables(),this._map.on("unload",this._unload,this),u},_onClick(){this._justClicked=!0;let s=this._isFollowing();if(this._userPanned=!1,this._userZoomed=!1,this._active&&!this._event)this.stop();else if(this._active){let u=this.options.clickBehavior,f=u.outOfView;switch(this._map.getBounds().contains(this._event.latlng)&&(f=s?u.inView:u.inViewNotFollowing),u[f]&&(f=u[f]),f){case"setView":this.setView();break;case"stop":this.stop(),this.options.returnToPrevBounds&&(this.options.flyTo?this._map.flyToBounds:this._map.fitBounds).bind(this._map)(this._prevBounds);break}}else this.options.returnToPrevBounds&&(this._prevBounds=this._map.getBounds()),this.start();this._updateContainerStyle()},start(){this._activate(),this._event&&(this._drawMarker(this._map),this.options.setView&&this.setView()),this._updateContainerStyle()},stop(){this._deactivate(),this._cleanClasses(),this._resetVariables(),this._removeMarker()},stopFollowing(){this._userPanned=!0,this._updateContainerStyle(),this._drawMarker()},_activate(){if(!this._active&&(this._map.locate(this.options.locateOptions),this._map.fire("locateactivate",this),this._active=!0,this._map.on("locationfound",this._onLocationFound,this),this._map.on("locationerror",this._onLocationError,this),this._map.on("dragstart",this._onDrag,this),this._map.on("zoomstart",this._onZoom,this),this._map.on("zoomend",this._onZoomEnd,this),this.options.showCompass)){let s="ondeviceorientationabsolute"in window;if(s||"ondeviceorientation"in window){let u=this,f=function(){e.DomEvent.on(window,s?"deviceorientationabsolute":"deviceorientation",u._onDeviceOrientation,u)};DeviceOrientationEvent&&typeof DeviceOrientationEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(function(c){c==="granted"&&f()}):f()}}},_deactivate(){this._map.stopLocate(),this._map.fire("locatedeactivate",this),this._active=!1,this.options.cacheLocation||(this._event=void 0),this._map.off("locationfound",this._onLocationFound,this),this._map.off("locationerror",this._onLocationError,this),this._map.off("dragstart",this._onDrag,this),this._map.off("zoomstart",this._onZoom,this),this._map.off("zoomend",this._onZoomEnd,this),this.options.showCompass&&(this._compassHeading=null,"ondeviceorientationabsolute"in window?e.DomEvent.off(window,"deviceorientationabsolute",this._onDeviceOrientation,this):"ondeviceorientation"in window&&e.DomEvent.off(window,"deviceorientation",this._onDeviceOrientation,this))},setView(){if(this._drawMarker(),this._isOutsideMapBounds())this._event=void 0,this.options.onLocationOutsideMapBounds(this);else if(this._justClicked&&this.options.initialZoomLevel!==!1){var s=this.options.flyTo?this._map.flyTo:this._map.setView;s.bind(this._map)([this._event.latitude,this._event.longitude],this.options.initialZoomLevel)}else if(this.options.keepCurrentZoomLevel){var s=this.options.flyTo?this._map.flyTo:this._map.panTo;s.bind(this._map)([this._event.latitude,this._event.longitude])}else{var s=this.options.flyTo?this._map.flyToBounds:this._map.fitBounds;this._ignoreEvent=!0,s.bind(this._map)(this.options.getLocationBounds(this._event),{padding:this.options.circlePadding,maxZoom:this.options.initialZoomLevel||this.options.locateOptions.maxZoom}),e.Util.requestAnimFrame(function(){this._ignoreEvent=!1},this)}},_drawCompass(){if(!this._event)return;let s=this._event.latlng;if(this.options.showCompass&&s&&this._compassHeading!==null){let u=this._isFollowing()?this.options.followCompassStyle:this.options.compassStyle;this._compass?(this._compass.setLatLng(s),this._compass.setHeading(this._compassHeading),this._compass.setStyle&&this._compass.setStyle(u)):this._compass=new this.options.compassClass(s,this._compassHeading,u).addTo(this._layer)}this._compass&&(!this.options.showCompass||this._compassHeading===null)&&(this._compass.removeFrom(this._layer),this._compass=null)},_drawMarker(){this._event.accuracy===void 0&&(this._event.accuracy=0);let s=this._event.accuracy,u=this._event.latlng;if(this.options.drawCircle){let v=this._isFollowing()?this.options.followCircleStyle:this.options.circleStyle;this._circle?this._circle.setLatLng(u).setRadius(s).setStyle(v):this._circle=e.circle(u,s,v).addTo(this._layer)}let f,c;if(this.options.metric?(f=s.toFixed(0),c=this.options.strings.metersUnit):(f=(s*3.2808399).toFixed(0),c=this.options.strings.feetUnit),this.options.drawMarker){let v=this._isFollowing()?this.options.followMarkerStyle:this.options.markerStyle;this._marker?(this._marker.setLatLng(u),this._marker.setStyle&&this._marker.setStyle(v)):this._marker=new this.options.markerClass(u,v).addTo(this._layer)}this._drawCompass();let d=this.options.strings.popup;function m(){return typeof d=="string"?e.Util.template(d,{distance:f,unit:c}):typeof d=="function"?d({distance:f,unit:c}):d}this.options.showPopup&&d&&this._marker&&this._marker.bindPopup(m())._popup.setLatLng(u),this.options.showPopup&&d&&this._compass&&this._compass.bindPopup(m())._popup.setLatLng(u)},_removeMarker(){this._layer.clearLayers(),this._marker=void 0,this._circle=void 0},_unload(){this.stop(),this._map.off("unload",this._unload,this)},_setCompassHeading(s){!isNaN(parseFloat(s))&&isFinite(s)?(s=Math.round(s),this._compassHeading=s,e.Util.requestAnimFrame(this._drawCompass,this)):this._compassHeading=null},_onCompassNeedsCalibration(){this._setCompassHeading()},_onDeviceOrientation(s){this._active&&(s.webkitCompassHeading?this._setCompassHeading(s.webkitCompassHeading):s.absolute&&s.alpha&&this._setCompassHeading(360-s.alpha))},_onLocationError(s){s.code==3&&this.options.locateOptions.watch||(this.stop(),this.options.onLocationError(s,this))},_onLocationFound(s){if(!(this._event&&this._event.latlng.lat===s.latlng.lat&&this._event.latlng.lng===s.latlng.lng&&this._event.accuracy===s.accuracy)&&this._active){switch(this._event=s,this._drawMarker(),this._updateContainerStyle(),this.options.setView){case"once":this._justClicked&&this.setView();break;case"untilPan":this._userPanned||this.setView();break;case"untilPanOrZoom":!this._userPanned&&!this._userZoomed&&this.setView();break;case"always":this.setView();break;case!1:break}this._justClicked=!1}},_onDrag(){this._event&&!this._ignoreEvent&&(this._userPanned=!0,this._updateContainerStyle(),this._drawMarker())},_onZoom(){this._event&&!this._ignoreEvent&&(this._userZoomed=!0,this._updateContainerStyle(),this._drawMarker())},_onZoomEnd(){this._event&&this._drawCompass(),this._event&&!this._ignoreEvent&&this._marker&&!this._map.getBounds().pad(-.3).contains(this._marker.getLatLng())&&(this._userPanned=!0,this._updateContainerStyle(),this._drawMarker())},_isFollowing(){if(!this._active)return!1;if(this.options.setView==="always")return!0;if(this.options.setView==="untilPan")return!this._userPanned;if(this.options.setView==="untilPanOrZoom")return!this._userPanned&&!this._userZoomed},_isOutsideMapBounds(){return this._event===void 0?!1:this._map.options.maxBounds&&!this._map.options.maxBounds.contains(this._event.latlng)},_updateContainerStyle(){this._container&&(this._active&&!this._event?this._setClasses("requesting"):this._isFollowing()?this._setClasses("following"):this._active?this._setClasses("active"):this._cleanClasses())},_setClasses(s){s=="requesting"?(i(this._container,"active following"),n(this._container,"requesting"),i(this._icon,this.options.icon),n(this._icon,this.options.iconLoading)):s=="active"?(i(this._container,"requesting following"),n(this._container,"active"),i(this._icon,this.options.iconLoading),n(this._icon,this.options.icon)):s=="following"&&(i(this._container,"requesting"),n(this._container,"active following"),i(this._icon,this.options.iconLoading),n(this._icon,this.options.icon))},_cleanClasses(){e.DomUtil.removeClass(this._container,"requesting"),e.DomUtil.removeClass(this._container,"active"),e.DomUtil.removeClass(this._container,"following"),i(this._icon,this.options.iconLoading),n(this._icon,this.options.icon)},_resetVariables(){this._active=!1,this._justClicked=!1,this._userPanned=!1,this._userZoomed=!1}});return e.control.locate=s=>new e.Control.Locate(s),a},window)});var od=qe((Kw,gh)=>{(function(e){if(typeof define=="function"&&define.amd)define(["leaflet"],e);else if(typeof gh<"u")gh.exports=e(ks());else{if(typeof window.L>"u")throw new Error("Leaflet must be loaded first");e(window.L)}})(function(e){var t="polyline-measure-control",n="polyline-measure-unicode-icon";return e.Control.PolylineMeasure=e.Control.extend({options:{position:"topleft",unit:"metres",clearMeasurementsOnStop:!0,showBearings:!1,bearingTextIn:"In",bearingTextOut:"Out",tooltipTextFinish:"Click to <b>finish line</b><br>",tooltipTextDelete:"Press SHIFT-key and click to <b>delete point</b>",tooltipTextMove:"Click and drag to <b>move point</b><br>",tooltipTextResume:"<br>Press CTRL-key and click to <b>resume line</b>",tooltipTextAdd:"Press CTRL-key and click to <b>add point</b>",measureControlTitleOn:"Turn on PolylineMeasure",measureControlTitleOff:"Turn off PolylineMeasure",measureControlLabel:"&#8614;",measureControlClasses:[],showClearControl:!1,clearControlTitle:"Clear Measurements",clearControlLabel:"&times;",clearControlClasses:[],showUnitControl:!1,distanceShowSameUnit:!1,unitControlTitle:{text:"Change Units",metres:"metres",landmiles:"land miles",nauticalmiles:"nautical miles"},unitControlLabel:{metres:"m",kilometres:"km",feet:"ft",landmiles:"mi",nauticalmiles:"nm"},tempLine:{color:"#00f",weight:2},fixedLine:{color:"#006",weight:2},startCircle:{color:"#000",weight:1,fillColor:"#0f0",fillOpacity:1,radius:3},intermedCircle:{color:"#000",weight:1,fillColor:"#ff0",fillOpacity:1,radius:3},currentCircle:{color:"#000",weight:1,fillColor:"#f0f",fillOpacity:1,radius:6},endCircle:{color:"#000",weight:1,fillColor:"#f00",fillOpacity:1,radius:3}},_arcpoints:100,_circleNr:-1,_lineNr:-1,_createControl:function(i,r,o,a,s,u){var f=document.createElement("a");return f.innerHTML=i,f.setAttribute("title",r),o.forEach(function(c){f.classList.add(c)}),e.DomEvent.on(f,"click",s,u),a.appendChild(f),f},onAdd:function(i){var r=this;i.on("movestart ",function(){r._mapdragging=!0}),this._container=document.createElement("div"),this._container.classList.add("leaflet-bar"),e.DomEvent.disableClickPropagation(this._container);var o=this.options.measureControlTitleOn,a=this.options.measureControlLabel,s=this.options.measureControlClasses;if(a.indexOf("&")!=-1&&s.push(n),this._arrPolylines=[],this._measureControl=this._createControl(a,o,s,this._container,this._toggleMeasure,this),this._defaultControlBgColor=this._measureControl.style.backgroundColor,this._measureControl.setAttribute("id",t),this.options.showClearControl){var o=this.options.clearControlTitle,a=this.options.clearControlLabel,s=this.options.clearControlClasses;a.indexOf("&")!=-1&&s.push(n),this._clearMeasureControl=this._createControl(a,o,s,this._container,this._clearAllMeasurements,this),this._clearMeasureControl.classList.add("polyline-measure-clearControl")}if(this.options.showUnitControl){if(this.options.unit=="metres")var a=this.options.unitControlLabel.metres,o=this.options.unitControlTitle.text+" ["+this.options.unitControlTitle.metres+"]";else if(this.options.unit=="landmiles")var a=this.options.unitControlLabel.landmiles,o=this.options.unitControlTitle.text+" ["+this.options.unitControlTitle.landmiles+"]";else var a=this.options.unitControlLabel.nauticalmiles,o=this.options.unitControlTitle.text+" ["+this.options.unitControlTitle.nauticalmiles+"]";var s=[];this._unitControl=this._createControl(a,o,s,this._container,this._changeUnit,this),this._unitControl.setAttribute("id","unitControlId")}return this._container},onRemove:function(){this._measuring&&this._toggleMeasure()},_saveNonpolylineEvents:function(){this._nonpolylineTargets=this._map._targets,typeof this._polylineTargets<"u"?this._map._targets=this._polylineTargets:this._map._targets={}},_savePolylineEvents:function(){this._polylineTargets=this._map._targets,this._map._targets=this._nonpolylineTargets},_toggleMeasure:function(){this._measuring=!this._measuring,this._measuring?(this._mapdragging=!1,this._saveNonpolylineEvents(),this._measureControl.classList.add("polyline-measure-controlOnBgColor"),this._measureControl.style.backgroundColor=this.options.backgroundColor,this._measureControl.title=this.options.measureControlTitleOff,this._oldCursor=this._map._container.style.cursor,this._map._container.style.cursor="crosshair",this._doubleClickZoom=this._map.doubleClickZoom.enabled(),this._map.doubleClickZoom.disable(),this._layerPaint||(this._layerPaint=e.layerGroup().addTo(this._map)),this._map.on("mousemove",this._mouseMove,this),this._map.on("click",this._mouseClick,this),e.DomEvent.on(document,"keydown",this._onKeyDown,this),this._resetPathVariables()):(this._savePolylineEvents(),this._measureControl.classList.remove("polyline-measure-controlOnBgColor"),this._measureControl.style.backgroundColor=this._defaultControlBgColor,this._measureControl.title=this.options.measureControlTitleOn,this._map._container.style.cursor=this._oldCursor,this._map.off("mousemove",this._mouseMove,this),this._map.off("click",this._mouseClick,this),this._map.off("mousemove",this._resumeFirstpointMousemove,this),this._map.off("click",this._resumeFirstpointClick,this),this._map.off("mousemove",this._dragCircleMousemove,this),this._map.off("mouseup",this._dragCircleMouseup,this),e.DomEvent.off(document,"keydown",this._onKeyDown,this),this._doubleClickZoom&&this._map.doubleClickZoom.enable(),this.options.clearMeasurementsOnStop&&this._layerPaint&&this._clearAllMeasurements(),this._cntCircle!==0&&this._finishPolylinePath()),this._map.fire("polylinemeasure:toggle",{sttus:this._measuring})},_clearAllMeasurements:function(){this._cntCircle!==void 0&&this._cntCircle!==0&&this._finishPolylinePath(),this._layerPaint&&this._layerPaint.clearLayers(),this._arrPolylines=[],this._map.fire("polylinemeasure:clear")},_changeUnit:function(){this.options.unit=="metres"?(this.options.unit="landmiles",document.getElementById("unitControlId").innerHTML=this.options.unitControlLabel.landmiles,this._unitControl.title=this.options.unitControlTitle.text+" ["+this.options.unitControlTitle.landmiles+"]"):this.options.unit=="landmiles"?(this.options.unit="nauticalmiles",document.getElementById("unitControlId").innerHTML=this.options.unitControlLabel.nauticalmiles,this._unitControl.title=this.options.unitControlTitle.text+" ["+this.options.unitControlTitle.nauticalmiles+"]"):(this.options.unit="metres",document.getElementById("unitControlId").innerHTML=this.options.unitControlLabel.metres,this._unitControl.title=this.options.unitControlTitle.text+" ["+this.options.unitControlTitle.metres+"]"),this._currentLine&&this._computeDistance(this._currentLine),this._arrPolylines.map(this._computeDistance.bind(this))},_computeDistance:function(i){var r=0;i.circleCoords.map(function(o,a){if(a>=1){var s=i.circleCoords[a-1].distanceTo(i.circleCoords[a]);r+=s,this._updateTooltip(i.tooltips[a],i.tooltips[a-1],r,s,i.circleCoords[a-1],i.circleCoords[a])}}.bind(this))},_onKeyDown:function(i){if(i.keyCode===27){if(this._resumeFirstpointFlag===!0){this._resumeFirstpointFlag=!1;var r=this._lineNr;this._map.off("mousemove",this._resumeFirstpointMousemove,this),this._map.off("click",this._resumeFirstpointClick,this),this._layerPaint.removeLayer(this._rubberlinePath2),this._layerPaint.removeLayer(this._tooltipNew),this._arrPolylines[r].circleMarkers[0].setStyle(this.options.startCircle);var o="",a=0;this.options.showBearings===!0&&(o=this.options.bearingTextIn+":---\xB0<br>"+this.options.bearingTextOut+":---\xB0"),o=o+'<div class="polyline-measure-tooltip-difference">+0</div>',o=o+'<div class="polyline-measure-tooltip-total">0</div>',this._arrPolylines[r].tooltips[0]._icon.innerHTML=o,this._arrPolylines[r].tooltips.map(function(s,u){if(u>=1){var f=this._arrPolylines[r].circleCoords[u-1].distanceTo(this._arrPolylines[r].circleCoords[u]),c=this._arrPolylines[r].circleCoords[u-1],d=this._arrPolylines[r].circleCoords[u];a+=f;var m=this._arrPolylines[r].tooltips[u-1];this._updateTooltip(s,m,a,f,c,d)}}.bind(this)),this._map.on("mousemove",this._mouseMove,this);return}this._currentLine?this._finishPolylinePath(i):this._toggleMeasure()}},_getDistance:function(i){var r=i,o;return this.options.unit==="nauticalmiles"?(o=this.options.unitControlLabel.nauticalmiles,r>=185200?r=(r/1852).toFixed(0):r>=18520?r=(r/1852).toFixed(1):r>=1852?r=(r/1852).toFixed(2):this.options.distanceShowSameUnit?r=(r/1852).toFixed(3):(r=(r/.3048).toFixed(0),o=this.options.unitControlLabel.feet)):this.options.unit==="landmiles"?(o=this.options.unitControlLabel.landmiles,r>=160934.4?r=(r/1609.344).toFixed(0):r>=16093.44?r=(r/1609.344).toFixed(1):r>=1609.344?r=(r/1609.344).toFixed(2):this.options.distanceShowSameUnit?r=(r/1609.344).toFixed(3):(r=(r/.3048).toFixed(0),o=this.options.unitControlLabel.feet)):(o=this.options.unitControlLabel.kilometres,r>=1e5?r=(r/1e3).toFixed(0):r>=1e4?r=(r/1e3).toFixed(1):r>=1e3?r=(r/1e3).toFixed(2):this.options.distanceShowSameUnit?r=(r/1e3).toFixed(3):(r=r.toFixed(0),o=this.options.unitControlLabel.metres)),{value:r,unit:o}},_polylineArc:function(i,r){function o(v){var p=Math.sin((1-v)*d)/Math.sin(d),_=Math.sin(v*d)/Math.sin(d),y=p*Math.cos(s)*Math.cos(u)+_*Math.cos(f)*Math.cos(c),x=p*Math.cos(s)*Math.sin(u)+_*Math.cos(f)*Math.sin(c),S=p*Math.sin(s)+_*Math.sin(f),O=180/Math.PI*Math.atan2(S,Math.sqrt(Math.pow(y,2)+Math.pow(x,2))),B=180/Math.PI*Math.atan2(x,y),U=B-u*180/Math.PI;function z(q){return Math[q>0?"floor":"ceil"](q)}return U<0?B=B-z((U-180)/360)*360:B=B-z((U+180)/360)*360,[O,B]}function a(v){for(var p=[],_=1/(v-1),y=0;y<v;y++){var x=_*y,S=o(x);p.push(S)}return p}var s=i.lat,u=i.lng,f=r.lat,c=r.lng;s=s*Math.PI/180,u=u*Math.PI/180,f=f*Math.PI/180,c=c*Math.PI/180;var d=2*Math.asin(Math.sqrt(Math.pow(Math.sin((s-f)/2),2)+Math.cos(s)*Math.cos(f)*Math.pow(Math.sin((u-c)/2),2))),m;return d===0?m=[[s,u]]:m=a(this._arcpoints),m},_updateTooltip:function(i,r,o,a,s,u){var f=function(S,O,B){var U=S.lat/180*Math.PI,z=O.lat/180*Math.PI,q=S.lng/180*Math.PI,G=O.lng/180*Math.PI,tt=Math.sin(G-q)*Math.cos(z),K=Math.cos(U)*Math.sin(z)-Math.sin(U)*Math.cos(z)*Math.cos(G-q);if(B==="inbound")var D=(Math.atan2(tt,K)*180/Math.PI+180).toFixed(0);else var D=(Math.atan2(tt,K)*180/Math.PI+360).toFixed(0);return D%360},c=f(u,s,"inbound"),d=f(s,u,"outbound"),m=this._getDistance(o),v=this._getDistance(a),p="";if(v.value>0&&(this.options.showBearings===!0&&(p=this.options.bearingTextIn+": "+c+"\xB0<br>"+this.options.bearingTextOut+":---\xB0"),p+='<div class="polyline-measure-tooltip-difference">+'+v.value+"&nbsp;"+v.unit+"</div>"),p+='<div class="polyline-measure-tooltip-total">'+m.value+"&nbsp;"+m.unit+"</div>",i._icon.innerHTML=p,this.options.showBearings===!0&&r){var _=r._icon.innerHTML,y=new RegExp(this.options.bearingTextOut+".*\xB0"),x=_.replace(y,this.options.bearingTextOut+": "+d+"\xB0");r._icon.innerHTML=x}},_drawArrow:function(i){var r=Math.round(i.length/2),o=i[r-1],a=i[r],s=a[1]-o[1],u=a[0]-o[0],f=[o[0]+u/2,o[1]+s/2],c=-Math.atan2(u,s)*57.29578,d=e.divIcon({className:"",iconSize:[16,16],iconAnchor:[8,8],html:"<div style = 'font-size: 16px; line-height: 16px; vertical-align:top; transform: rotate("+c+"deg)'>&#x27a4;</div>"}),m=e.marker(f,{icon:d,zIndexOffset:-50}).addTo(this._layerPaint);return this._currentLine||m.bindTooltip(this.options.tooltipTextAdd,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),m.on("click",this._clickedArrow,this),m},_mouseMove:function(i){var r=i.latlng;if(this._map.on("click",this._mouseClick,this),!(!r||!this._currentLine)){var o=this._currentLine.circleCoords.last();this._rubberlinePath.setLatLngs(this._polylineArc(o,r));var a=this._currentLine.tooltips.last(),s=this._currentLine.tooltips.slice(-2,-1)[0];a.setLatLng(r);var u=r.distanceTo(o);this._updateTooltip(a,s,this._currentLine.distance+u,u,o,r)}},_startLine:function(i){var r=e.divIcon({className:"polyline-measure-tooltip",iconAnchor:[-4,-4]}),o=function(){return this.slice(-1)[0]};this._rubberlinePath=e.polyline([],{color:this.options.tempLine.color,weight:this.options.tempLine.weight,interactive:!1,dashArray:"8,8"}).addTo(this._layerPaint).bringToBack();var a=this;this._currentLine={id:0,circleCoords:[],circleMarkers:[],arrowMarkers:[],tooltips:[],distance:0,polylinePath:e.polyline([],{color:this.options.fixedLine.color,weight:this.options.fixedLine.weight,interactive:!1}).addTo(this._layerPaint).bringToBack(),handleMarkers:function(f){var c=this.circleMarkers.last();c&&(c.bindTooltip(a.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),c.off("click",a._finishPolylinePath,a),this.circleMarkers.length===1?c.setStyle(a.options.startCircle):c.setStyle(a.options.intermedCircle));var d=new e.CircleMarker(f,a.options.currentCircle).addTo(a._layerPaint);d.bindTooltip(a.options.tooltipTextFinish+a.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),d.cntLine=a._currentLine.id,d.cntCircle=a._cntCircle,a._cntCircle++,d.on("mousedown",a._dragCircle,a),d.on("click",a._finishPolylinePath,a),this.circleMarkers.push(d)},getNewToolTip:function(f){return e.marker(f,{icon:r,interactive:!1})},addPoint:function(f){var c=this.circleCoords.last();if(!(c&&c.equals(f))){if(this.circleCoords.push(f),this.circleCoords.length>1){var d=a._polylineArc(c,f);this.circleCoords.length>2&&d.shift(),this.polylinePath.setLatLngs(this.polylinePath.getLatLngs().concat(d));var m=a._drawArrow(d);m.cntLine=a._currentLine.id,m.cntArrow=a._cntCircle-1,a._currentLine.arrowMarkers.push(m);var v=c.distanceTo(f);this.distance+=v;var p=a._currentLine.tooltips.last(),_=a._currentLine.tooltips.slice(-1,-2)[0];a._updateTooltip(p,_,this.distance,v,c,f)}p&&p.setLatLng(f);var y=this.getNewToolTip(f);y.addTo(a._layerPaint),this.tooltips.push(y),this.handleMarkers(f)}},finalize:function(){if(a._layerPaint.removeLayer(this.tooltips.last()),this.tooltips.pop(),a._layerPaint.removeLayer(a._rubberlinePath),this.circleCoords.length>1){this.tooltips.last()._icon.classList.add("polyline-measure-tooltip-end");var f=this.circleMarkers.last();f.setStyle(a.options.endCircle),f.unbindTooltip(),a._currentLine.circleMarkers.map(function(c){c.bindTooltip(a.options.tooltipTextMove+a.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"})}),a._currentLine.circleMarkers[0].bindTooltip(a.options.tooltipTextMove+a.options.tooltipTextDelete+a.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),f.bindTooltip(a.options.tooltipTextMove+a.options.tooltipTextDelete+a.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),a._currentLine.arrowMarkers.map(function(c){c.bindTooltip(a.options.tooltipTextAdd,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"})}),f.off("click",a._finishPolylinePath,a),f.on("click",a._resumePolylinePath,a),a._arrPolylines.push(this)}else a._layerPaint.removeLayer(this.circleMarkers.last()),a._layerPaint.removeLayer(this.tooltips.last());a._resetPathVariables()}};var s=e.marker(i,{icon:r,interactive:!1});s.addTo(this._layerPaint);var u="";this.options.showBearings===!0&&(u=this.options.bearingTextIn+":---\xB0<br>"+this.options.bearingTextOut+":---\xB0"),u=u+'<div class="polyline-measure-tooltip-difference">+0</div>',u=u+'<div class="polyline-measure-tooltip-total">0</div>',s._icon.innerHTML=u,this._currentLine.tooltips.push(s),this._currentLine.circleCoords.last=o,this._currentLine.tooltips.last=o,this._currentLine.circleMarkers.last=o,this._currentLine.id=this._arrPolylines.length},_mouseClick:function(i){!i.latlng||this._finishCircleScreencoords&&this._finishCircleScreencoords.equals(i.containerPoint)||(!this._currentLine&&!this._mapdragging&&(this._startLine(i.latlng),this._map.fire("polylinemeasure:start",this._currentLine)),this._mapdragging?this._mapdragging=!1:(this._currentLine.addPoint(i.latlng),this._map.fire("polylinemeasure:add",i),this._map.fire("polylinemeasure:change",this._currentLine)))},_finishPolylinePath:function(i){this._map.fire("polylinemeasure:finish",this._currentLine),this._currentLine.finalize(),i&&(this._finishCircleScreencoords=i.containerPoint)},_resumePolylinePath:function(i){if(i.originalEvent.ctrlKey===!0){this._currentLine=this._arrPolylines[i.target.cntLine],this._rubberlinePath=e.polyline([],{color:this.options.tempLine.color,weight:this.options.tempLine.weight,interactive:!1,dashArray:"8,8"}).addTo(this._layerPaint).bringToBack(),this._currentLine.tooltips.last()._icon.classList.remove("polyline-measure-tooltip-end");var r=this._currentLine.getNewToolTip(i.latlng);r.addTo(this._layerPaint),this._currentLine.tooltips.push(r),this._currentLine.circleMarkers.last().unbindTooltip(),this._currentLine.circleMarkers.last().bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._currentLine.circleMarkers.last().setStyle(this.options.currentCircle),this._cntCircle=this._currentLine.circleCoords.length,this._map.fire("polylinemeasure:resume",this._currentLine)}},_resetPathVariables:function(){this._cntCircle=0,this._currentLine=null},_clickedArrow:function(i){if(i.originalEvent.ctrlKey){var r=i.target.cntLine,o=i.target.cntArrow;this._arrPolylines[r].arrowMarkers[o].removeFrom(this._layerPaint);var a=new e.CircleMarker(i.latlng,this.options.intermedCircle).addTo(this._layerPaint);a.cntLine=r,a.on("mousedown",this._dragCircle,this),a.bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._arrPolylines[r].circleMarkers.splice(o+1,0,a),this._arrPolylines[r].circleMarkers.map(function(d,m){d.cntCircle=m}),this._arrPolylines[r].circleCoords.splice(o+1,0,i.latlng),lineCoords=this._arrPolylines[r].polylinePath.getLatLngs();var s=this._polylineArc(this._arrPolylines[r].circleCoords[o],i.latlng);s.pop();var u=this._polylineArc(i.latlng,this._arrPolylines[r].circleCoords[o+2]);Array.prototype.splice.apply(lineCoords,[o*(this._arcpoints-1),this._arcpoints].concat(s,u)),this._arrPolylines[r].polylinePath.setLatLngs(lineCoords);var f=this._drawArrow(s);this._arrPolylines[r].arrowMarkers[o]=f,f=this._drawArrow(u),this._arrPolylines[r].arrowMarkers.splice(o+1,0,f),this._arrPolylines[r].arrowMarkers.map(function(d,m){d.cntLine=r,d.cntArrow=m}),this._tooltipNew=e.marker(i.latlng,{icon:e.divIcon({className:"polyline-measure-tooltip",iconAnchor:[-4,-4]}),interactive:!1}),this._tooltipNew.addTo(this._layerPaint),this._arrPolylines[r].tooltips.splice(o+1,0,this._tooltipNew);var c=0;this._arrPolylines[r].tooltips.map(function(d,m){if(m>=1){var v=this._arrPolylines[r].circleCoords[m-1].distanceTo(this._arrPolylines[r].circleCoords[m]),p=this._arrPolylines[r].circleCoords[m-1],_=this._arrPolylines[r].circleCoords[m];c+=v;var y=this._arrPolylines[r].tooltips[m-1];this._updateTooltip(d,y,c,v,p,_)}}.bind(this)),this._map.fire("polylinemeasure:insert",i),this._map.fire("polylinemeasure:change",this._arrPolylines[this._lineNr])}},_dragCircleMouseup:function(){this._circleNr===0||this._circleNr===this._arrPolylines[this._lineNr].circleCoords.length-1?this._e1.target.bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete+this.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}):this._e1.target.bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._resetPathVariables(),this._map.off("mousemove",this._dragCircleMousemove,this),this._map.dragging.enable(),this._map.on("mousemove",this._mouseMove,this),this._map.off("mouseup",this._dragCircleMouseup,this),this._map.fire("polylinemeasure:move",this._e1),this._map.fire("polylinemeasure:change",this._arrPolylines[this._lineNr])},_dragCircleMousemove:function(i){var r=i.latlng.lat,o=i.latlng.lng,a=r-this._mouseStartingLat,s=o-this._mouseStartingLng,u=e.latLng(this._circleStartingLat+a,this._circleStartingLng+s),f=this._arcpoints,c=this._e1.target.cntLine;this._lineNr=c;var d=this._e1.target.cntCircle;this._circleNr=d,this._e1.target.setLatLng(u),this._e1.target.unbindTooltip(),this._arrPolylines[c].circleCoords[d]=u;var m=this._arrPolylines[c].polylinePath.getLatLngs();if(d>=1){var v=this._polylineArc(this._arrPolylines[c].circleCoords[d-1],u);Array.prototype.splice.apply(m,[(d-1)*(f-1),f].concat(v));var p=this._drawArrow(v);p.cntLine=c,p.cntArrow=d-1,this._arrPolylines[c].arrowMarkers[d-1].removeFrom(this._layerPaint),this._arrPolylines[c].arrowMarkers[d-1]=p}if(d<this._arrPolylines[c].circleCoords.length-1){var _=this._polylineArc(u,this._arrPolylines[c].circleCoords[d+1]);Array.prototype.splice.apply(m,[d*(f-1),f].concat(_)),p=this._drawArrow(_),p.cntLine=c,p.cntArrow=d,this._arrPolylines[c].arrowMarkers[d].removeFrom(this._layerPaint),this._arrPolylines[c].arrowMarkers[d]=p}this._arrPolylines[c].polylinePath.setLatLngs(m),d>=0&&this._arrPolylines[c].tooltips[d].setLatLng(u);var y=0;this._arrPolylines[c].tooltips.map(function(x,S){if(S>=1){var O=this._arrPolylines[c].circleCoords[S-1].distanceTo(this._arrPolylines[c].circleCoords[S]),B=this._arrPolylines[c].circleCoords[S-1],U=this._arrPolylines[c].circleCoords[S];y+=O,this._arrPolylines[c].distance=y;var z=this._arrPolylines[c].tooltips[S-1];this._updateTooltip(x,z,y,O,B,U)}}.bind(this)),this._map.on("mouseup",this._dragCircleMouseup,this)},_resumeFirstpointMousemove:function(i){var r=this._lineNr;this._map.on("click",this._resumeFirstpointClick,this);var o=i.latlng;this._rubberlinePath2.setLatLngs(this._polylineArc(o,currentCircleCoords)),this._tooltipNew.setLatLng(o);var a=0,s=o.distanceTo(this._arrPolylines[r].circleCoords[0]),u=o,f=this._arrPolylines[r].circleCoords[0];a+=s;var c=this._tooltipNew,d=this._arrPolylines[r].tooltips[0];this._updateTooltip(d,c,a,s,u,f),this._arrPolylines[r].tooltips.map(function(m,v){if(v>=1){var p=this._arrPolylines[r].circleCoords[v-1].distanceTo(this._arrPolylines[r].circleCoords[v]),_=this._arrPolylines[r].circleCoords[v-1],y=this._arrPolylines[r].circleCoords[v];a+=p;var x=this._arrPolylines[r].tooltips[v-1];this._updateTooltip(m,x,a,p,_,y)}}.bind(this))},_resumeFirstpointClick:function(i){var r=this._lineNr;this._resumeFirstpointFlag=!1,this._map.off("mousemove",this._resumeFirstpointMousemove,this),this._map.off("click",this._resumeFirstpointClick,this),this._layerPaint.removeLayer(this._rubberlinePath2),this._arrPolylines[r].circleMarkers[0].setStyle(this.options.intermedCircle),this._arrPolylines[r].circleMarkers[0].unbindTooltip(),this._arrPolylines[r].circleMarkers[0].bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"});var o=new e.CircleMarker(i.latlng,this.options.startCircle).addTo(this._layerPaint);o.cntLine=r,o.cntCircle=0,o.on("mousedown",this._dragCircle,this),o.bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete+this.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._arrPolylines[r].circleMarkers.unshift(o),this._arrPolylines[r].circleMarkers.map(function(u,f){u.cntCircle=f}),this._arrPolylines[r].circleCoords.unshift(i.latlng);var a=this._polylineArc(i.latlng,currentCircleCoords),s=this._drawArrow(a);this._arrPolylines[r].arrowMarkers.unshift(s),this._arrPolylines[r].arrowMarkers.map(function(u,f){u.cntLine=r,u.cntArrow=f}),a.pop(),this._arrPolylines[r].polylinePath.setLatLngs(a.concat(this._arrPolylines[r].polylinePath.getLatLngs())),this._arrPolylines[r].tooltips.unshift(this._tooltipNew),this._map.on("mousemove",this._mouseMove,this)},_dragCircle:function(i){var r=this._arcpoints;if(i.originalEvent.ctrlKey){if(this._map.off("click",this._mouseClick,this),i.target.cntCircle===0){this._resumeFirstpointFlag=!0,this._lineNr=i.target.cntLine;var o=this._lineNr;this._circleNr=i.target.cntCircle,currentCircleCoords=i.latlng,this._arrPolylines[o].circleMarkers[0].setStyle(this.options.currentCircle),this._rubberlinePath2=e.polyline([],{color:this.options.tempLine.color,weight:this.options.tempLine.weight,interactive:!1,dashArray:"8,8"}).addTo(this._layerPaint).bringToBack(),this._tooltipNew=e.marker(currentCircleCoords,{icon:e.divIcon({className:"polyline-measure-tooltip",iconAnchor:[-4,-4]}),interactive:!1}),this._tooltipNew.addTo(this._layerPaint);var a="";this.options.showBearings===!0&&(a=a+this.options.bearingTextIn+":---\xB0<br>"+this.options.bearingTextOut+":---\xB0"),a=a+'<div class="polyline-measure-tooltip-difference">+0</div>',a=a+'<div class="polyline-measure-tooltip-total">0</div>',this._tooltipNew._icon.innerHTML=a,this._map.off("mousemove",this._mouseMove,this),this._map.on("mousemove",this._resumeFirstpointMousemove,this)}return}if(i.originalEvent.shiftKey){this._lineNr=i.target.cntLine;var o=this._lineNr;this._circleNr=i.target.cntCircle;var s=this._circleNr;if(this._arrPolylines[o]){if(this._arrPolylines[o].circleMarkers.length===2){this._layerPaint.removeLayer(this._arrPolylines[o].circleMarkers[1]),this._layerPaint.removeLayer(this._arrPolylines[o].tooltips[1]),this._layerPaint.removeLayer(this._arrPolylines[o].circleMarkers[0]),this._layerPaint.removeLayer(this._arrPolylines[o].tooltips[0]),this._layerPaint.removeLayer(this._arrPolylines[o].arrowMarkers[0]),this._layerPaint.removeLayer(this._arrPolylines[o].polylinePath),this._map.fire("polylinemeasure:remove",i),this._map.fire("polylinemeasure:change",this._arrPolylines[this._lineNr]);return}this._arrPolylines[o].circleCoords.splice(s,1),this._arrPolylines[o].circleMarkers[s].removeFrom(this._layerPaint),this._arrPolylines[o].circleMarkers.splice(s,1),this._arrPolylines[o].circleMarkers.map(function(v,p){v.cntCircle=p});var u=this._arrPolylines[o].polylinePath.getLatLngs();if(this._arrPolylines[o].tooltips[s].removeFrom(this._layerPaint),this._arrPolylines[o].tooltips.splice(s,1),!this._arrPolylines[o].circleMarkers.length){this._arrPolylines.splice(o,1),this._arrPolylines.forEach(function(v,p){v.circleMarkers.map(function(_){_.cntLine=p}),v.arrowMarkers.map(function(_){_.cntLine=p})});return}if(s===0){this._arrPolylines[o].circleMarkers[0].setStyle(this.options.startCircle),u.splice(0,r-1),this._arrPolylines[o].circleMarkers[0].bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete+this.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._arrPolylines[o].arrowMarkers[s].removeFrom(this._layerPaint),this._arrPolylines[o].arrowMarkers.splice(0,1);var a="";this.options.showBearings===!0&&(a=this.options.bearingTextIn+":---\xB0<br>"+this.options.bearingTextOut+":---\xB0"),a=a+'<div class="polyline-measure-tooltip-difference">+0</div>',a=a+'<div class="polyline-measure-tooltip-total">0</div>',this._arrPolylines[o].tooltips[0]._icon.innerHTML=a}else if(s===this._arrPolylines[o].circleCoords.length)this._arrPolylines[o].circleMarkers[s-1].on("click",this._resumePolylinePath,this),this._arrPolylines[o].circleMarkers[s-1].bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete+this.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._arrPolylines[o].circleMarkers.slice(-1)[0].setStyle(this.options.endCircle),this._arrPolylines[o].tooltips.slice(-1)[0]._icon.classList.add("polyline-measure-tooltip-end"),u.splice(-(r-1),r-1),this._arrPolylines[o].arrowMarkers[s-1].removeFrom(this._layerPaint),this._arrPolylines[o].arrowMarkers.splice(-1,1);else{newLineSegment=this._polylineArc(this._arrPolylines[o].circleCoords[s-1],this._arrPolylines[o].circleCoords[s]),Array.prototype.splice.apply(u,[(s-1)*(r-1),2*r-1].concat(newLineSegment)),this._arrPolylines[o].arrowMarkers[s-1].removeFrom(this._layerPaint),this._arrPolylines[o].arrowMarkers[s].removeFrom(this._layerPaint);var f=this._drawArrow(newLineSegment);this._arrPolylines[o].arrowMarkers.splice(s-1,2,f)}this._arrPolylines[o].polylinePath.setLatLngs(u),this._arrPolylines[o].arrowMarkers.map(function(v,p){v.cntLine=o,v.cntArrow=p});var c=0;this._arrPolylines[o].tooltips.map(function(v,p){if(p>=1){var _=this._arrPolylines[o].circleCoords[p-1].distanceTo(this._arrPolylines[o].circleCoords[p]),y=this._arrPolylines[o].circleCoords[p-1],x=this._arrPolylines[o].circleCoords[p];c+=_,this._arrPolylines[o].distance=c;var S=this._arrPolylines[o].tooltips[p-1];this._updateTooltip(v,S,c,_,y,x)}}.bind(this))}else{if(this._cntCircle--,this._currentLine.circleMarkers.length===1){this._currentLine.finalize();return}if(this._currentLine.circleCoords.splice(s,1),this._currentLine.circleMarkers[s].removeFrom(this._layerPaint),this._currentLine.circleMarkers.splice(s,1),this._currentLine.circleMarkers.map(function(v,p){v.cntCircle=p}),u=this._currentLine.polylinePath.getLatLngs(),this._currentLine.tooltips[s].removeFrom(this._layerPaint),this._currentLine.tooltips.splice(s,1),s===0){this._currentLine.circleMarkers.length===1?this._currentLine.circleMarkers[0].setStyle(this.options.currentCircle):this._currentLine.circleMarkers[0].setStyle(this.options.startCircle),u.splice(0,r-1),this._currentLine.circleMarkers[0].bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete+this.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._currentLine.arrowMarkers[s].removeFrom(this._layerPaint),this._currentLine.arrowMarkers.splice(0,1);var a="";this.options.showBearings===!0&&(a=this.options.bearingTextIn+":---\xB0<br>"+this.options.bearingTextOut+":---\xB0"),a=a+'<div class="polyline-measure-tooltip-difference">+0</div>',a=a+'<div class="polyline-measure-tooltip-total">0</div>',this._currentLine.tooltips[0]._icon.innerHTML=a}else s===this._currentLine.circleCoords.length?(this._currentLine.circleMarkers[s-1].on("click",this._resumePolylinePath,this),this._currentLine.circleMarkers[s-1].bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete+this.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._currentLine.circleMarkers.slice(-1)[0].setStyle(this.options.currentCircle),this._currentLine.tooltips.slice(-1)[0]._icon.classList.add("polyline-measure-tooltip-end"),u.splice(-(r-1),r-1),this._currentLine.arrowMarkers[s-1].removeFrom(this._layerPaint),this._currentLine.arrowMarkers.splice(-1,1)):(newLineSegment=this._polylineArc(this._currentLine.circleCoords[s-1],this._currentLine.circleCoords[s]),Array.prototype.splice.apply(u,[(s-1)*(r-1),2*r-1].concat(newLineSegment)),this._currentLine.arrowMarkers[s-1].removeFrom(this._layerPaint),this._currentLine.arrowMarkers[s].removeFrom(this._layerPaint),f=this._drawArrow(newLineSegment),this._currentLine.arrowMarkers.splice(s-1,2,f));this._currentLine.polylinePath.setLatLngs(u),this._currentLine.arrowMarkers.map(function(v,p){v.cntLine=o,v.cntArrow=p});var d=0;this._currentLine.tooltips.map(function(v,p,_){if(p>=1){var y,x,S=this._currentLine.tooltips[p-1],O=this._currentLine.circleCoords[p-1];p===_.length-1?(y=this._currentLine.circleCoords[p-1].distanceTo(i.latlng),x=i.latlng,this._updateTooltip(v,S,d+y,y,O,x)):(y=this._currentLine.circleCoords[p-1].distanceTo(this._currentLine.circleCoords[p]),x=this._currentLine.circleCoords[p],d+=y,this._updateTooltip(v,S,d,y,O,x))}}.bind(this)),this._currentLine.distance=d}this._map.fire("polylinemeasure:remove",i),this._map.fire("polylinemeasure:change",this._arrPolylines[this._lineNr]);return}this._e1=i,this._measuring&&this._cntCircle===0&&(this._map.dragging.disable(),this._map.off("mousemove",this._mouseMove,this),this._map.off("click",this._mouseClick,this),this._mouseStartingLat=i.latlng.lat,this._mouseStartingLng=i.latlng.lng,this._circleStartingLat=i.target._latlng.lat,this._circleStartingLng=i.target._latlng.lng,this._map.on("mousemove",this._dragCircleMousemove,this))},seed:function(i){i.forEach(r=>{this._toggleMeasure(),this._startLine(r[0]),r.forEach((o,a)=>{let s=e.latLng(o);this._mouseMove({latLng:s}),this._currentLine.addPoint(s),a===r.length-1&&(this._finishPolylinePath(),this._toggleMeasure())})})}}),e.Map.mergeOptions({PolylineMeasureControl:!1}),e.Map.addInitHook(function(){this.options.polylineMeasureControl&&(this.PMControl=new e.Control.PolylineMeasure,this.addControl(this.PMControl))}),e.control.polylineMeasure=function(i){return new e.Control.PolylineMeasure(i)},e.Control.PolylineMeasure})});var Jl=qe((wx,_d)=>{"use strict";var bd=Object.getOwnPropertySymbols,ny=Object.prototype.hasOwnProperty,sy=Object.prototype.propertyIsEnumerable;function oy(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function ay(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var i=Object.getOwnPropertyNames(t).map(function(o){return t[o]});if(i.join("")!=="0123456789")return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(o){r[o]=o}),Object.keys(Object.assign({},r)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}_d.exports=ay()?Object.assign:function(e,t){for(var n,i=oy(e),r,o=1;o<arguments.length;o++){n=Object(arguments[o]);for(var a in n)ny.call(n,a)&&(i[a]=n[a]);if(bd){r=bd(n);for(var s=0;s<r.length;s++)sy.call(n,r[s])&&(i[r[s]]=n[r[s]])}}return i}});var Lh=qe((Sh,kh)=>{(function(e,t){typeof Sh=="object"&&typeof kh<"u"?kh.exports=t():typeof define=="function"&&define.amd?define(t):(e=e||self).RBush=t()})(Sh,function(){"use strict";function e(y,x,S,O,B){(function U(z,q,G,tt,K){for(;tt>G;){if(tt-G>600){var D=tt-G+1,N=q-G+1,Z=Math.log(D),w=.5*Math.exp(2*Z/3),C=.5*Math.sqrt(Z*w*(D-w)/D)*(N-D/2<0?-1:1),k=Math.max(G,Math.floor(q-N*w/D+C)),T=Math.min(tt,Math.floor(q+(D-N)*w/D+C));U(z,q,k,T,K)}var R=z[q],F=G,H=tt;for(t(z,G,q),K(z[tt],R)>0&&t(z,G,tt);F<H;){for(t(z,F,H),F++,H--;K(z[F],R)<0;)F++;for(;K(z[H],R)>0;)H--}K(z[G],R)===0?t(z,G,H):t(z,++H,tt),H<=q&&(G=H+1),q<=H&&(tt=H-1)}})(y,x,S||0,O||y.length-1,B||n)}function t(y,x,S){var O=y[x];y[x]=y[S],y[S]=O}function n(y,x){return y<x?-1:y>x?1:0}var i=function(y){y===void 0&&(y=9),this._maxEntries=Math.max(4,y),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function r(y,x,S){if(!S)return x.indexOf(y);for(var O=0;O<x.length;O++)if(S(y,x[O]))return O;return-1}function o(y,x){a(y,0,y.children.length,x,y)}function a(y,x,S,O,B){B||(B=p(null)),B.minX=1/0,B.minY=1/0,B.maxX=-1/0,B.maxY=-1/0;for(var U=x;U<S;U++){var z=y.children[U];s(B,y.leaf?O(z):z)}return B}function s(y,x){return y.minX=Math.min(y.minX,x.minX),y.minY=Math.min(y.minY,x.minY),y.maxX=Math.max(y.maxX,x.maxX),y.maxY=Math.max(y.maxY,x.maxY),y}function u(y,x){return y.minX-x.minX}function f(y,x){return y.minY-x.minY}function c(y){return(y.maxX-y.minX)*(y.maxY-y.minY)}function d(y){return y.maxX-y.minX+(y.maxY-y.minY)}function m(y,x){return y.minX<=x.minX&&y.minY<=x.minY&&x.maxX<=y.maxX&&x.maxY<=y.maxY}function v(y,x){return x.minX<=y.maxX&&x.minY<=y.maxY&&x.maxX>=y.minX&&x.maxY>=y.minY}function p(y){return{children:y,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function _(y,x,S,O,B){for(var U=[x,S];U.length;)if(!((S=U.pop())-(x=U.pop())<=O)){var z=x+Math.ceil((S-x)/O/2)*O;e(y,z,x,S,B),U.push(x,z,z,S)}}return i.prototype.all=function(){return this._all(this.data,[])},i.prototype.search=function(y){var x=this.data,S=[];if(!v(y,x))return S;for(var O=this.toBBox,B=[];x;){for(var U=0;U<x.children.length;U++){var z=x.children[U],q=x.leaf?O(z):z;v(y,q)&&(x.leaf?S.push(z):m(y,q)?this._all(z,S):B.push(z))}x=B.pop()}return S},i.prototype.collides=function(y){var x=this.data;if(!v(y,x))return!1;for(var S=[];x;){for(var O=0;O<x.children.length;O++){var B=x.children[O],U=x.leaf?this.toBBox(B):B;if(v(y,U)){if(x.leaf||m(y,U))return!0;S.push(B)}}x=S.pop()}return!1},i.prototype.load=function(y){if(!y||!y.length)return this;if(y.length<this._minEntries){for(var x=0;x<y.length;x++)this.insert(y[x]);return this}var S=this._build(y.slice(),0,y.length-1,0);if(this.data.children.length)if(this.data.height===S.height)this._splitRoot(this.data,S);else{if(this.data.height<S.height){var O=this.data;this.data=S,S=O}this._insert(S,this.data.height-S.height-1,!0)}else this.data=S;return this},i.prototype.insert=function(y){return y&&this._insert(y,this.data.height-1),this},i.prototype.clear=function(){return this.data=p([]),this},i.prototype.remove=function(y,x){if(!y)return this;for(var S,O,B,U=this.data,z=this.toBBox(y),q=[],G=[];U||q.length;){if(U||(U=q.pop(),O=q[q.length-1],S=G.pop(),B=!0),U.leaf){var tt=r(y,U.children,x);if(tt!==-1)return U.children.splice(tt,1),q.push(U),this._condense(q),this}B||U.leaf||!m(U,z)?O?(S++,U=O.children[S],B=!1):U=null:(q.push(U),G.push(S),S=0,O=U,U=U.children[0])}return this},i.prototype.toBBox=function(y){return y},i.prototype.compareMinX=function(y,x){return y.minX-x.minX},i.prototype.compareMinY=function(y,x){return y.minY-x.minY},i.prototype.toJSON=function(){return this.data},i.prototype.fromJSON=function(y){return this.data=y,this},i.prototype._all=function(y,x){for(var S=[];y;)y.leaf?x.push.apply(x,y.children):S.push.apply(S,y.children),y=S.pop();return x},i.prototype._build=function(y,x,S,O){var B,U=S-x+1,z=this._maxEntries;if(U<=z)return o(B=p(y.slice(x,S+1)),this.toBBox),B;O||(O=Math.ceil(Math.log(U)/Math.log(z)),z=Math.ceil(U/Math.pow(z,O-1))),(B=p([])).leaf=!1,B.height=O;var q=Math.ceil(U/z),G=q*Math.ceil(Math.sqrt(z));_(y,x,S,G,this.compareMinX);for(var tt=x;tt<=S;tt+=G){var K=Math.min(tt+G-1,S);_(y,tt,K,q,this.compareMinY);for(var D=tt;D<=K;D+=q){var N=Math.min(D+q-1,K);B.children.push(this._build(y,D,N,O-1))}}return o(B,this.toBBox),B},i.prototype._chooseSubtree=function(y,x,S,O){for(;O.push(x),!x.leaf&&O.length-1!==S;){for(var B=1/0,U=1/0,z=void 0,q=0;q<x.children.length;q++){var G=x.children[q],tt=c(G),K=(D=y,N=G,(Math.max(N.maxX,D.maxX)-Math.min(N.minX,D.minX))*(Math.max(N.maxY,D.maxY)-Math.min(N.minY,D.minY))-tt);K<U?(U=K,B=tt<B?tt:B,z=G):K===U&&tt<B&&(B=tt,z=G)}x=z||x.children[0]}var D,N;return x},i.prototype._insert=function(y,x,S){var O=S?y:this.toBBox(y),B=[],U=this._chooseSubtree(O,this.data,x,B);for(U.children.push(y),s(U,O);x>=0&&B[x].children.length>this._maxEntries;)this._split(B,x),x--;this._adjustParentBBoxes(O,B,x)},i.prototype._split=function(y,x){var S=y[x],O=S.children.length,B=this._minEntries;this._chooseSplitAxis(S,B,O);var U=this._chooseSplitIndex(S,B,O),z=p(S.children.splice(U,S.children.length-U));z.height=S.height,z.leaf=S.leaf,o(S,this.toBBox),o(z,this.toBBox),x?y[x-1].children.push(z):this._splitRoot(S,z)},i.prototype._splitRoot=function(y,x){this.data=p([y,x]),this.data.height=y.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},i.prototype._chooseSplitIndex=function(y,x,S){for(var O,B,U,z,q,G,tt,K=1/0,D=1/0,N=x;N<=S-x;N++){var Z=a(y,0,N,this.toBBox),w=a(y,N,S,this.toBBox),C=(B=Z,U=w,z=void 0,q=void 0,G=void 0,tt=void 0,z=Math.max(B.minX,U.minX),q=Math.max(B.minY,U.minY),G=Math.min(B.maxX,U.maxX),tt=Math.min(B.maxY,U.maxY),Math.max(0,G-z)*Math.max(0,tt-q)),k=c(Z)+c(w);C<K?(K=C,O=N,D=k<D?k:D):C===K&&k<D&&(D=k,O=N)}return O||S-x},i.prototype._chooseSplitAxis=function(y,x,S){var O=y.leaf?this.compareMinX:u,B=y.leaf?this.compareMinY:f;this._allDistMargin(y,x,S,O)<this._allDistMargin(y,x,S,B)&&y.children.sort(O)},i.prototype._allDistMargin=function(y,x,S,O){y.children.sort(O);for(var B=this.toBBox,U=a(y,0,x,B),z=a(y,S-x,S,B),q=d(U)+d(z),G=x;G<S-x;G++){var tt=y.children[G];s(U,y.leaf?B(tt):tt),q+=d(U)}for(var K=S-x-1;K>=x;K--){var D=y.children[K];s(z,y.leaf?B(D):D),q+=d(z)}return q},i.prototype._adjustParentBBoxes=function(y,x,S){for(var O=S;O>=0;O--)s(x[O],y)},i.prototype._condense=function(y){for(var x=y.length-1,S=void 0;x>=0;x--)y[x].children.length===0?x>0?(S=y[x-1].children).splice(S.indexOf(y[x]),1):this.clear():o(y[x],this.toBBox)},i})});var wd=qe((Th,Ph)=>{(function(e,t){typeof Th=="object"&&typeof Ph<"u"?Ph.exports=t():typeof define=="function"&&define.amd?define(t):(e=e||self,e.TinyQueue=t())})(Th,function(){"use strict";var e=function(i,r){if(i===void 0&&(i=[]),r===void 0&&(r=t),this.data=i,this.length=this.data.length,this.compare=r,this.length>0)for(var o=(this.length>>1)-1;o>=0;o--)this._down(o)};e.prototype.push=function(i){this.data.push(i),this.length++,this._up(this.length-1)},e.prototype.pop=function(){if(this.length!==0){var i=this.data[0],r=this.data.pop();return this.length--,this.length>0&&(this.data[0]=r,this._down(0)),i}},e.prototype.peek=function(){return this.data[0]},e.prototype._up=function(i){for(var r=this,o=r.data,a=r.compare,s=o[i];i>0;){var u=i-1>>1,f=o[u];if(a(s,f)>=0)break;o[i]=f,i=u}o[i]=s},e.prototype._down=function(i){for(var r=this,o=r.data,a=r.compare,s=this.length>>1,u=o[i];i<s;){var f=(i<<1)+1,c=o[f],d=f+1;if(d<this.length&&a(o[d],c)<0&&(f=d,c=o[d]),a(c,u)>=0)break;o[i]=c,i=f}o[i]=u};function t(n,i){return n<i?-1:n>i?1:0}return e})});var Ed=qe((kx,xd)=>{xd.exports=function(t,n,i,r){var o=t[0],a=t[1],s=!1;i===void 0&&(i=0),r===void 0&&(r=n.length);for(var u=(r-i)/2,f=0,c=u-1;f<u;c=f++){var d=n[i+f*2+0],m=n[i+f*2+1],v=n[i+c*2+0],p=n[i+c*2+1],_=m>a!=p>a&&o<(v-d)*(a-m)/(p-m)+d;_&&(s=!s)}return s}});var Md=qe((Lx,Cd)=>{Cd.exports=function(t,n,i,r){var o=t[0],a=t[1],s=!1;i===void 0&&(i=0),r===void 0&&(r=n.length);for(var u=r-i,f=0,c=u-1;f<u;c=f++){var d=n[f+i][0],m=n[f+i][1],v=n[c+i][0],p=n[c+i][1],_=m>a!=p>a&&o<(v-d)*(a-m)/(p-m)+d;_&&(s=!s)}return s}});var Ld=qe((Tx,eu)=>{var Sd=Ed(),kd=Md();eu.exports=function(t,n,i,r){return n.length>0&&Array.isArray(n[0])?kd(t,n,i,r):Sd(t,n,i,r)};eu.exports.nested=kd;eu.exports.flat=Sd});var Pd=qe((iu,Td)=>{(function(e,t){typeof iu=="object"&&typeof Td<"u"?t(iu):typeof define=="function"&&define.amd?define(["exports"],t):t((e=e||self).predicates={})})(iu,function(e){"use strict";let n=33306690738754706e-32;function i(v,p,_,y,x){let S,O,B,U,z=p[0],q=y[0],G=0,tt=0;q>z==q>-z?(S=z,z=p[++G]):(S=q,q=y[++tt]);let K=0;if(G<v&&tt<_)for(q>z==q>-z?(B=S-((O=z+S)-z),z=p[++G]):(B=S-((O=q+S)-q),q=y[++tt]),S=O,B!==0&&(x[K++]=B);G<v&&tt<_;)q>z==q>-z?(B=S-((O=S+z)-(U=O-S))+(z-U),z=p[++G]):(B=S-((O=S+q)-(U=O-S))+(q-U),q=y[++tt]),S=O,B!==0&&(x[K++]=B);for(;G<v;)B=S-((O=S+z)-(U=O-S))+(z-U),z=p[++G],S=O,B!==0&&(x[K++]=B);for(;tt<_;)B=S-((O=S+q)-(U=O-S))+(q-U),q=y[++tt],S=O,B!==0&&(x[K++]=B);return S===0&&K!==0||(x[K++]=S),K}function r(v){return new Float64Array(v)}let o=33306690738754716e-32,a=22204460492503146e-32,s=11093356479670487e-47,u=r(4),f=r(8),c=r(12),d=r(16),m=r(4);e.orient2d=function(v,p,_,y,x,S){let O=(p-S)*(_-x),B=(v-x)*(y-S),U=O-B;if(O===0||B===0||O>0!=B>0)return U;let z=Math.abs(O+B);return Math.abs(U)>=o*z?U:-function(q,G,tt,K,D,N,Z){let w,C,k,T,R,F,H,it,ot,dt,$,ct,W,V,rt,mt,wt,_t,Ct=q-D,Ft=tt-D,It=G-N,vt=K-N;R=(rt=(it=Ct-(H=(F=134217729*Ct)-(F-Ct)))*(dt=vt-(ot=(F=134217729*vt)-(F-vt)))-((V=Ct*vt)-H*ot-it*ot-H*dt))-($=rt-(wt=(it=It-(H=(F=134217729*It)-(F-It)))*(dt=Ft-(ot=(F=134217729*Ft)-(F-Ft)))-((mt=It*Ft)-H*ot-it*ot-H*dt))),u[0]=rt-($+R)+(R-wt),R=(W=V-((ct=V+$)-(R=ct-V))+($-R))-($=W-mt),u[1]=W-($+R)+(R-mt),R=(_t=ct+$)-ct,u[2]=ct-(_t-R)+($-R),u[3]=_t;let kt=function(et,lt){let pt=lt[0];for(let bt=1;bt<et;bt++)pt+=lt[bt];return pt}(4,u),gt=a*Z;if(kt>=gt||-kt>=gt||(w=q-(Ct+(R=q-Ct))+(R-D),k=tt-(Ft+(R=tt-Ft))+(R-D),C=G-(It+(R=G-It))+(R-N),T=K-(vt+(R=K-vt))+(R-N),w===0&&C===0&&k===0&&T===0)||(gt=s*Z+n*Math.abs(kt),(kt+=Ct*T+vt*w-(It*k+Ft*C))>=gt||-kt>=gt))return kt;R=(rt=(it=w-(H=(F=134217729*w)-(F-w)))*(dt=vt-(ot=(F=134217729*vt)-(F-vt)))-((V=w*vt)-H*ot-it*ot-H*dt))-($=rt-(wt=(it=C-(H=(F=134217729*C)-(F-C)))*(dt=Ft-(ot=(F=134217729*Ft)-(F-Ft)))-((mt=C*Ft)-H*ot-it*ot-H*dt))),m[0]=rt-($+R)+(R-wt),R=(W=V-((ct=V+$)-(R=ct-V))+($-R))-($=W-mt),m[1]=W-($+R)+(R-mt),R=(_t=ct+$)-ct,m[2]=ct-(_t-R)+($-R),m[3]=_t;let ut=i(4,u,4,m,f);R=(rt=(it=Ct-(H=(F=134217729*Ct)-(F-Ct)))*(dt=T-(ot=(F=134217729*T)-(F-T)))-((V=Ct*T)-H*ot-it*ot-H*dt))-($=rt-(wt=(it=It-(H=(F=134217729*It)-(F-It)))*(dt=k-(ot=(F=134217729*k)-(F-k)))-((mt=It*k)-H*ot-it*ot-H*dt))),m[0]=rt-($+R)+(R-wt),R=(W=V-((ct=V+$)-(R=ct-V))+($-R))-($=W-mt),m[1]=W-($+R)+(R-mt),R=(_t=ct+$)-ct,m[2]=ct-(_t-R)+($-R),m[3]=_t;let Q=i(ut,f,4,m,c);R=(rt=(it=w-(H=(F=134217729*w)-(F-w)))*(dt=T-(ot=(F=134217729*T)-(F-T)))-((V=w*T)-H*ot-it*ot-H*dt))-($=rt-(wt=(it=C-(H=(F=134217729*C)-(F-C)))*(dt=k-(ot=(F=134217729*k)-(F-k)))-((mt=C*k)-H*ot-it*ot-H*dt))),m[0]=rt-($+R)+(R-wt),R=(W=V-((ct=V+$)-(R=ct-V))+($-R))-($=W-mt),m[1]=W-($+R)+(R-mt),R=(_t=ct+$)-ct,m[2]=ct-(_t-R)+($-R),m[3]=_t;let Y=i(Q,c,4,m,d);return d[Y-1]}(v,p,_,y,x,S,z)},e.orient2dfast=function(v,p,_,y,x,S){return(p-S)*(_-x)-(v-x)*(y-S)},Object.defineProperty(e,"__esModule",{value:!0})})});var Dd=qe((Px,Ih)=>{"use strict";var Rd=Lh(),nu=wd(),uy=Ld(),hy=Pd().orient2d;nu.default&&(nu=nu.default);Ih.exports=Nd;Ih.exports.default=Nd;function Nd(e,t,n){t=Math.max(0,t===void 0?2:t),n=n||0;var i=my(e),r=new Rd(16);r.toBBox=function(S){return{minX:S[0],minY:S[1],maxX:S[0],maxY:S[1]}},r.compareMinX=function(S,O){return S[0]-O[0]},r.compareMinY=function(S,O){return S[1]-O[1]},r.load(e);for(var o=[],a=0,s;a<i.length;a++){var u=i[a];r.remove(u),s=Id(u,s),o.push(s)}var f=new Rd(16);for(a=0;a<o.length;a++)f.insert(Rh(o[a]));for(var c=t*t,d=n*n;o.length;){var m=o.shift(),v=m.p,p=m.next.p,_=Oh(v,p);if(!(_<d)){var y=_/c;u=cy(r,m.prev.p,v,p,m.next.next.p,y,f),u&&Math.min(Oh(u,v),Oh(u,p))<=y&&(o.push(m),o.push(Id(u,m)),r.remove(u),f.remove(m),f.insert(Rh(m)),f.insert(Rh(m.next)))}}m=s;var x=[];do x.push(m.p),m=m.next;while(m!==s);return x.push(m.p),x}function cy(e,t,n,i,r,o,a){for(var s=new nu([],fy),u=e.data;u;){for(var f=0;f<u.children.length;f++){var c=u.children[f],d=u.leaf?Ah(c,n,i):dy(n,i,c);d>o||s.push({node:c,dist:d})}for(;s.length&&!s.peek().node.children;){var m=s.pop(),v=m.node,p=Ah(v,t,n),_=Ah(v,i,r);if(m.dist<p&&m.dist<_&&Ad(n,v,a)&&Ad(i,v,a))return v}u=s.pop(),u&&(u=u.node)}return null}function fy(e,t){return e.dist-t.dist}function dy(e,t,n){if(Od(e,n)||Od(t,n))return 0;var i=ru(e[0],e[1],t[0],t[1],n.minX,n.minY,n.maxX,n.minY);if(i===0)return 0;var r=ru(e[0],e[1],t[0],t[1],n.minX,n.minY,n.minX,n.maxY);if(r===0)return 0;var o=ru(e[0],e[1],t[0],t[1],n.maxX,n.minY,n.maxX,n.maxY);if(o===0)return 0;var a=ru(e[0],e[1],t[0],t[1],n.minX,n.maxY,n.maxX,n.maxY);return a===0?0:Math.min(i,r,o,a)}function Od(e,t){return e[0]>=t.minX&&e[0]<=t.maxX&&e[1]>=t.minY&&e[1]<=t.maxY}function Ad(e,t,n){for(var i=Math.min(e[0],t[0]),r=Math.min(e[1],t[1]),o=Math.max(e[0],t[0]),a=Math.max(e[1],t[1]),s=n.search({minX:i,minY:r,maxX:o,maxY:a}),u=0;u<s.length;u++)if(py(s[u].p,s[u].next.p,e,t))return!1;return!0}function wa(e,t,n){return hy(e[0],e[1],t[0],t[1],n[0],n[1])}function py(e,t,n,i){return e!==i&&t!==n&&wa(e,t,n)>0!=wa(e,t,i)>0&&wa(n,i,e)>0!=wa(n,i,t)>0}function Rh(e){var t=e.p,n=e.next.p;return e.minX=Math.min(t[0],n[0]),e.minY=Math.min(t[1],n[1]),e.maxX=Math.max(t[0],n[0]),e.maxY=Math.max(t[1],n[1]),e}function my(e){for(var t=e[0],n=e[0],i=e[0],r=e[0],o=0;o<e.length;o++){var a=e[o];a[0]<t[0]&&(t=a),a[0]>i[0]&&(i=a),a[1]<n[1]&&(n=a),a[1]>r[1]&&(r=a)}var s=[t,n,i,r],u=s.slice();for(o=0;o<e.length;o++)uy(e[o],s)||u.push(e[o]);return yy(u)}function Id(e,t){var n={p:e,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return t?(n.next=t.next,n.prev=t,t.next.prev=n,t.next=n):(n.prev=n,n.next=n),n}function Oh(e,t){var n=e[0]-t[0],i=e[1]-t[1];return n*n+i*i}function Ah(e,t,n){var i=t[0],r=t[1],o=n[0]-i,a=n[1]-r;if(o!==0||a!==0){var s=((e[0]-i)*o+(e[1]-r)*a)/(o*o+a*a);s>1?(i=n[0],r=n[1]):s>0&&(i+=o*s,r+=a*s)}return o=e[0]-i,a=e[1]-r,o*o+a*a}function ru(e,t,n,i,r,o,a,s){var u=n-e,f=i-t,c=a-r,d=s-o,m=e-r,v=t-o,p=u*u+f*f,_=u*c+f*d,y=c*c+d*d,x=u*m+f*v,S=c*m+d*v,O=p*y-_*_,B,U,z,q,G=O,tt=O;O===0?(U=0,G=1,q=S,tt=y):(U=_*S-y*x,q=p*S-_*x,U<0?(U=0,q=S,tt=y):U>G&&(U=G,q=S+_,tt=y)),q<0?(q=0,-x<0?U=0:-x>p?U=G:(U=-x,G=p)):q>tt&&(q=tt,-x+_<0?U=0:-x+_>p?U=G:(U=-x+_,G=p)),B=U===0?0:U/G,z=q===0?0:q/tt;var K=(1-B)*e+B*n,D=(1-B)*t+B*i,N=(1-z)*r+z*a,Z=(1-z)*o+z*s,w=N-K,C=Z-D;return w*w+C*C}function gy(e,t){return e[0]===t[0]?e[1]-t[1]:e[0]-t[0]}function yy(e){e.sort(gy);for(var t=[],n=0;n<e.length;n++){for(;t.length>=2&&wa(t[t.length-2],t[t.length-1],e[n])<=0;)t.pop();t.push(e[n])}for(var i=[],r=e.length-1;r>=0;r--){for(;i.length>=2&&wa(i[i.length-2],i[i.length-1],e[r])<=0;)i.pop();i.push(e[r])}return i.pop(),t.pop(),t.concat(i)}});var Hd=qe((Dh,Bh)=>{(function(e,t){typeof Dh=="object"&&typeof Bh<"u"?Bh.exports=t():typeof define=="function"&&define.amd?define(t):e.quickselect=t()})(Dh,function(){"use strict";function e(r,o,a,s,u){t(r,o,a||0,s||r.length-1,u||i)}function t(r,o,a,s,u){for(;s>a;){if(s-a>600){var f=s-a+1,c=o-a+1,d=Math.log(f),m=.5*Math.exp(2*d/3),v=.5*Math.sqrt(d*m*(f-m)/f)*(c-f/2<0?-1:1),p=Math.max(a,Math.floor(o-c*m/f+v)),_=Math.min(s,Math.floor(o+(f-c)*m/f+v));t(r,o,p,_,u)}var y=r[o],x=a,S=s;for(n(r,a,o),u(r[s],y)>0&&n(r,a,s);x<S;){for(n(r,x,S),x++,S--;u(r[x],y)<0;)x++;for(;u(r[S],y)>0;)S--}u(r[a],y)===0?n(r,a,S):(S++,n(r,S,s)),S<=o&&(a=S+1),o<=S&&(s=S-1)}}function n(r,o,a){var s=r[o];r[o]=r[a],r[a]=s}function i(r,o){return r<o?-1:r>o?1:0}return e})});var qd=qe((iC,jh)=>{"use strict";jh.exports=ll;jh.exports.default=ll;var Ry=Hd();function ll(e,t){if(!(this instanceof ll))return new ll(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),t&&this._initFormat(t),this.clear()}ll.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,n=[],i=this.toBBox;if(!ou(e,t))return n;for(var r=[],o,a,s,u;t;){for(o=0,a=t.children.length;o<a;o++)s=t.children[o],u=t.leaf?i(s):s,ou(e,u)&&(t.leaf?n.push(s):zh(e,u)?this._all(s,n):r.push(s));t=r.pop()}return n},collides:function(e){var t=this.data,n=this.toBBox;if(!ou(e,t))return!1;for(var i=[],r,o,a,s;t;){for(r=0,o=t.children.length;r<o;r++)if(a=t.children[r],s=t.leaf?n(a):a,ou(e,s)){if(t.leaf||zh(e,s))return!0;i.push(a)}t=i.pop()}return!1},load:function(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(var t=0,n=e.length;t<n;t++)this.insert(e[t]);return this}var i=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=i;else if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var r=this.data;this.data=i,i=r}this._insert(i,this.data.height-i.height-1,!0)}return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=Ea([]),this},remove:function(e,t){if(!e)return this;for(var n=this.data,i=this.toBBox(e),r=[],o=[],a,s,u,f;n||r.length;){if(n||(n=r.pop(),s=r[r.length-1],a=o.pop(),f=!0),n.leaf&&(u=Oy(e,n.children,t),u!==-1))return n.children.splice(u,1),r.push(n),this._condense(r),this;!f&&!n.leaf&&zh(n,i)?(r.push(n),o.push(a),a=0,s=n,n=n.children[0]):s?(a++,n=s.children[a],f=!1):n=null}return this},toBBox:function(e){return e},compareMinX:Gd,compareMinY:Ud,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var n=[];e;)e.leaf?t.push.apply(t,e.children):n.push.apply(n,e.children),e=n.pop();return t},_build:function(e,t,n,i){var r=n-t+1,o=this._maxEntries,a;if(r<=o)return a=Ea(e.slice(t,n+1)),xa(a,this.toBBox),a;i||(i=Math.ceil(Math.log(r)/Math.log(o)),o=Math.ceil(r/Math.pow(o,i-1))),a=Ea([]),a.leaf=!1,a.height=i;var s=Math.ceil(r/o),u=s*Math.ceil(Math.sqrt(o)),f,c,d,m;for(Vd(e,t,n,u,this.compareMinX),f=t;f<=n;f+=u)for(d=Math.min(f+u-1,n),Vd(e,f,d,s,this.compareMinY),c=f;c<=d;c+=s)m=Math.min(c+s-1,d),a.children.push(this._build(e,c,m,i-1));return xa(a,this.toBBox),a},_chooseSubtree:function(e,t,n,i){for(var r,o,a,s,u,f,c,d;i.push(t),!(t.leaf||i.length-1===n);){for(c=d=1/0,r=0,o=t.children.length;r<o;r++)a=t.children[r],u=Fh(a),f=Ay(e,a)-u,f<d?(d=f,c=u<c?u:c,s=a):f===d&&u<c&&(c=u,s=a);t=s||t.children[0]}return t},_insert:function(e,t,n){var i=this.toBBox,r=n?e:i(e),o=[],a=this._chooseSubtree(r,this.data,t,o);for(a.children.push(e),al(a,r);t>=0&&o[t].children.length>this._maxEntries;)this._split(o,t),t--;this._adjustParentBBoxes(r,o,t)},_split:function(e,t){var n=e[t],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);var o=this._chooseSplitIndex(n,r,i),a=Ea(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,xa(n,this.toBBox),xa(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(e,t){this.data=Ea([e,t]),this.data.height=e.height+1,this.data.leaf=!1,xa(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,n){var i,r,o,a,s,u,f,c;for(u=f=1/0,i=t;i<=n-t;i++)r=ol(e,0,i,this.toBBox),o=ol(e,i,n,this.toBBox),a=Iy(r,o),s=Fh(r)+Fh(o),a<u?(u=a,c=i,f=s<f?s:f):a===u&&s<f&&(f=s,c=i);return c},_chooseSplitAxis:function(e,t,n){var i=e.leaf?this.compareMinX:Gd,r=e.leaf?this.compareMinY:Ud,o=this._allDistMargin(e,t,n,i),a=this._allDistMargin(e,t,n,r);o<a&&e.children.sort(i)},_allDistMargin:function(e,t,n,i){e.children.sort(i);var r=this.toBBox,o=ol(e,0,t,r),a=ol(e,n-t,n,r),s=su(o)+su(a),u,f;for(u=t;u<n-t;u++)f=e.children[u],al(o,e.leaf?r(f):f),s+=su(o);for(u=n-t-1;u>=t;u--)f=e.children[u],al(a,e.leaf?r(f):f),s+=su(a);return s},_adjustParentBBoxes:function(e,t,n){for(var i=n;i>=0;i--)al(t[i],e)},_condense:function(e){for(var t=e.length-1,n;t>=0;t--)e[t].children.length===0?t>0?(n=e[t-1].children,n.splice(n.indexOf(e[t]),1)):this.clear():xa(e[t],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};function Oy(e,t,n){if(!n)return t.indexOf(e);for(var i=0;i<t.length;i++)if(n(e,t[i]))return i;return-1}function xa(e,t){ol(e,0,e.children.length,t,e)}function ol(e,t,n,i,r){r||(r=Ea(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o=t,a;o<n;o++)a=e.children[o],al(r,e.leaf?i(a):a);return r}function al(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function Gd(e,t){return e.minX-t.minX}function Ud(e,t){return e.minY-t.minY}function Fh(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function su(e){return e.maxX-e.minX+(e.maxY-e.minY)}function Ay(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function Iy(e,t){var n=Math.max(e.minX,t.minX),i=Math.max(e.minY,t.minY),r=Math.min(e.maxX,t.maxX),o=Math.min(e.maxY,t.maxY);return Math.max(0,r-n)*Math.max(0,o-i)}function zh(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function ou(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function Ea(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Vd(e,t,n,i,r){for(var o=[t,n],a;o.length;)n=o.pop(),t=o.pop(),!(n-t<=i)&&(a=t+Math.ceil((n-t)/i/2)*i,Ry(e,a,t,n,r),o.push(t,a,a,n))}});var Zd=qe((m3,qh)=>{"use strict";qh.exports=hu;qh.exports.default=hu;function hu(e,t,n){n=n||2;var i=t&&t.length,r=i?t[0]*n:e.length,o=Xd(e,0,r,n,!0),a=[];if(!o||o.next===o.prev)return a;var s,u,f,c,d,m,v;if(i&&(o=Wy(e,t,o,n)),e.length>80*n){s=f=e[0],u=c=e[1];for(var p=n;p<r;p+=n)d=e[p],m=e[p+1],d<s&&(s=d),m<u&&(u=m),d>f&&(f=d),m>c&&(c=m);v=Math.max(f-s,c-u),v=v!==0?32767/v:0}return cl(o,a,n,s,u,v,0),a}function Xd(e,t,n,i,r){var o,a;if(r===Vh(e,t,n,i)>0)for(o=t;o<n;o+=i)a=Wd(o,e[o],e[o+1],a);else for(o=n-i;o>=t;o-=i)a=Wd(o,e[o],e[o+1],a);return a&&cu(a,a.next)&&(dl(a),a=a.next),a}function ta(e,t){if(!e)return e;t||(t=e);var n=e,i;do if(i=!1,!n.steiner&&(cu(n,n.next)||Qr(n.prev,n,n.next)===0)){if(dl(n),n=t=n.prev,n===n.next)break;i=!0}else n=n.next;while(i||n!==t);return t}function cl(e,t,n,i,r,o,a){if(e){!a&&o&&Ky(e,i,r,o);for(var s=e,u,f;e.prev!==e.next;){if(u=e.prev,f=e.next,o?Uy(e,i,r,o):Gy(e)){t.push(u.i/n|0),t.push(e.i/n|0),t.push(f.i/n|0),dl(e),e=f.next,s=f.next;continue}if(e=f,e===s){a?a===1?(e=Vy(ta(e),t,n),cl(e,t,n,i,r,o,2)):a===2&&qy(e,t,n,i,r,o):cl(ta(e),t,n,i,r,o,1);break}}}}function Gy(e){var t=e.prev,n=e,i=e.next;if(Qr(t,n,i)>=0)return!1;for(var r=t.x,o=n.x,a=i.x,s=t.y,u=n.y,f=i.y,c=r<o?r<a?r:a:o<a?o:a,d=s<u?s<f?s:f:u<f?u:f,m=r>o?r>a?r:a:o>a?o:a,v=s>u?s>f?s:f:u>f?u:f,p=i.next;p!==t;){if(p.x>=c&&p.x<=m&&p.y>=d&&p.y<=v&&Ma(r,s,o,u,a,f,p.x,p.y)&&Qr(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function Uy(e,t,n,i){var r=e.prev,o=e,a=e.next;if(Qr(r,o,a)>=0)return!1;for(var s=r.x,u=o.x,f=a.x,c=r.y,d=o.y,m=a.y,v=s<u?s<f?s:f:u<f?u:f,p=c<d?c<m?c:m:d<m?d:m,_=s>u?s>f?s:f:u>f?u:f,y=c>d?c>m?c:m:d>m?d:m,x=Gh(v,p,t,n,i),S=Gh(_,y,t,n,i),O=e.prevZ,B=e.nextZ;O&&O.z>=x&&B&&B.z<=S;){if(O.x>=v&&O.x<=_&&O.y>=p&&O.y<=y&&O!==r&&O!==a&&Ma(s,c,u,d,f,m,O.x,O.y)&&Qr(O.prev,O,O.next)>=0||(O=O.prevZ,B.x>=v&&B.x<=_&&B.y>=p&&B.y<=y&&B!==r&&B!==a&&Ma(s,c,u,d,f,m,B.x,B.y)&&Qr(B.prev,B,B.next)>=0))return!1;B=B.nextZ}for(;O&&O.z>=x;){if(O.x>=v&&O.x<=_&&O.y>=p&&O.y<=y&&O!==r&&O!==a&&Ma(s,c,u,d,f,m,O.x,O.y)&&Qr(O.prev,O,O.next)>=0)return!1;O=O.prevZ}for(;B&&B.z<=S;){if(B.x>=v&&B.x<=_&&B.y>=p&&B.y<=y&&B!==r&&B!==a&&Ma(s,c,u,d,f,m,B.x,B.y)&&Qr(B.prev,B,B.next)>=0)return!1;B=B.nextZ}return!0}function Vy(e,t,n){var i=e;do{var r=i.prev,o=i.next.next;!cu(r,o)&&$d(r,i,i.next,o)&&fl(r,o)&&fl(o,r)&&(t.push(r.i/n|0),t.push(i.i/n|0),t.push(o.i/n|0),dl(i),dl(i.next),i=e=o),i=i.next}while(i!==e);return ta(i)}function qy(e,t,n,i,r,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&tv(a,s)){var u=Yd(a,s);a=ta(a,a.next),u=ta(u,u.next),cl(a,t,n,i,r,o,0),cl(u,t,n,i,r,o,0);return}s=s.next}a=a.next}while(a!==e)}function Wy(e,t,n,i){var r=[],o,a,s,u,f;for(o=0,a=t.length;o<a;o++)s=t[o]*i,u=o<a-1?t[o+1]*i:e.length,f=Xd(e,s,u,i,!1),f===f.next&&(f.steiner=!0),r.push(Qy(f));for(r.sort(Xy),o=0;o<r.length;o++)n=$y(r[o],n);return n}function Xy(e,t){return e.x-t.x}function $y(e,t){var n=Yy(e,t);if(!n)return t;var i=Yd(n,e);return ta(i,i.next),ta(n,n.next)}function Yy(e,t){var n=t,i=e.x,r=e.y,o=-1/0,a;do{if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){var s=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&s>o&&(o=s,a=n.x<n.next.x?n:n.next,s===i))return a}n=n.next}while(n!==t);if(!a)return null;var u=a,f=a.x,c=a.y,d=1/0,m;n=a;do i>=n.x&&n.x>=f&&i!==n.x&&Ma(r<c?i:o,r,f,c,r<c?o:i,r,n.x,n.y)&&(m=Math.abs(r-n.y)/(i-n.x),fl(n,e)&&(m<d||m===d&&(n.x>a.x||n.x===a.x&&Zy(a,n)))&&(a=n,d=m)),n=n.next;while(n!==u);return a}function Zy(e,t){return Qr(e.prev,e,t.prev)<0&&Qr(t.next,e,e.next)<0}function Ky(e,t,n,i){var r=e;do r.z===0&&(r.z=Gh(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,Jy(r)}function Jy(e){var t,n,i,r,o,a,s,u,f=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,i=n,s=0,t=0;t<f&&(s++,i=i.nextZ,!!i);t++);for(u=f;s>0||u>0&&i;)s!==0&&(u===0||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,u--),o?o.nextZ=r:e=r,r.prevZ=o,o=r;n=i}o.nextZ=null,f*=2}while(a>1);return e}function Gh(e,t,n,i,r){return e=(e-n)*r|0,t=(t-i)*r|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function Qy(e){var t=e,n=e;do(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next;while(t!==e);return n}function Ma(e,t,n,i,r,o,a,s){return(r-a)*(t-s)>=(e-a)*(o-s)&&(e-a)*(i-s)>=(n-a)*(t-s)&&(n-a)*(o-s)>=(r-a)*(i-s)}function tv(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!ev(e,t)&&(fl(e,t)&&fl(t,e)&&iv(e,t)&&(Qr(e.prev,e,t.prev)||Qr(e,t.prev,t))||cu(e,t)&&Qr(e.prev,e,e.next)>0&&Qr(t.prev,t,t.next)>0)}function Qr(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function cu(e,t){return e.x===t.x&&e.y===t.y}function $d(e,t,n,i){var r=uu(Qr(e,t,n)),o=uu(Qr(e,t,i)),a=uu(Qr(n,i,e)),s=uu(Qr(n,i,t));return!!(r!==o&&a!==s||r===0&&lu(e,n,t)||o===0&&lu(e,i,t)||a===0&&lu(n,e,i)||s===0&&lu(n,t,i))}function lu(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function uu(e){return e>0?1:e<0?-1:0}function ev(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&$d(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function fl(e,t){return Qr(e.prev,e,e.next)<0?Qr(e,t,e.next)>=0&&Qr(e,e.prev,t)>=0:Qr(e,t,e.prev)<0||Qr(e,e.next,t)<0}function iv(e,t){var n=e,i=!1,r=(e.x+t.x)/2,o=(e.y+t.y)/2;do n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==e);return i}function Yd(e,t){var n=new Uh(e.i,e.x,e.y),i=new Uh(t.i,t.x,t.y),r=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function Wd(e,t,n,i){var r=new Uh(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function dl(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Uh(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}hu.deviation=function(e,t,n,i){var r=t&&t.length,o=r?t[0]*n:e.length,a=Math.abs(Vh(e,0,o,n));if(r)for(var s=0,u=t.length;s<u;s++){var f=t[s]*n,c=s<u-1?t[s+1]*n:e.length;a-=Math.abs(Vh(e,f,c,n))}var d=0;for(s=0;s<i.length;s+=3){var m=i[s]*n,v=i[s+1]*n,p=i[s+2]*n;d+=Math.abs((e[m]-e[p])*(e[v+1]-e[m+1])-(e[m]-e[v])*(e[p+1]-e[m+1]))}return a===0&&d===0?0:Math.abs((d-a)/a)};function Vh(e,t,n,i){for(var r=0,o=t,a=n-i;o<n;o+=i)r+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return r}hu.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},i=0,r=0;r<e.length;r++){for(var o=0;o<e[r].length;o++)for(var a=0;a<t;a++)n.vertices.push(e[r][o][a]);r>0&&(i+=e[r-1].length,n.holes.push(i))}return n}});var Zh=qe(si=>{"use strict";Object.defineProperty(si,"__esModule",{value:!0});si.earthRadius=63710088e-1;si.factors={centimeters:si.earthRadius*100,centimetres:si.earthRadius*100,degrees:si.earthRadius/111325,feet:si.earthRadius*3.28084,inches:si.earthRadius*39.37,kilometers:si.earthRadius/1e3,kilometres:si.earthRadius/1e3,meters:si.earthRadius,metres:si.earthRadius,miles:si.earthRadius/1609.344,millimeters:si.earthRadius*1e3,millimetres:si.earthRadius*1e3,nauticalmiles:si.earthRadius/1852,radians:1,yards:si.earthRadius*1.0936};si.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/si.earthRadius,yards:1.0936133};si.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function Go(e,t,n){n===void 0&&(n={});var i={type:"Feature"};return(n.id===0||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=t||{},i.geometry=e,i}si.feature=Go;function lv(e,t,n){switch(n===void 0&&(n={}),e){case"Point":return Wh(t).geometry;case"LineString":return $h(t).geometry;case"Polygon":return Xh(t).geometry;case"MultiPoint":return Jd(t).geometry;case"MultiLineString":return Kd(t).geometry;case"MultiPolygon":return Qd(t).geometry;default:throw new Error(e+" is invalid")}}si.geometry=lv;function Wh(e,t,n){if(n===void 0&&(n={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!fu(e[0])||!fu(e[1]))throw new Error("coordinates must contain numbers");var i={type:"Point",coordinates:e};return Go(i,t,n)}si.point=Wh;function uv(e,t,n){return n===void 0&&(n={}),du(e.map(function(i){return Wh(i,t)}),n)}si.points=uv;function Xh(e,t,n){n===void 0&&(n={});for(var i=0,r=e;i<r.length;i++){var o=r[i];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}var s={type:"Polygon",coordinates:e};return Go(s,t,n)}si.polygon=Xh;function hv(e,t,n){return n===void 0&&(n={}),du(e.map(function(i){return Xh(i,t)}),n)}si.polygons=hv;function $h(e,t,n){if(n===void 0&&(n={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");var i={type:"LineString",coordinates:e};return Go(i,t,n)}si.lineString=$h;function cv(e,t,n){return n===void 0&&(n={}),du(e.map(function(i){return $h(i,t)}),n)}si.lineStrings=cv;function du(e,t){t===void 0&&(t={});var n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}si.featureCollection=du;function Kd(e,t,n){n===void 0&&(n={});var i={type:"MultiLineString",coordinates:e};return Go(i,t,n)}si.multiLineString=Kd;function Jd(e,t,n){n===void 0&&(n={});var i={type:"MultiPoint",coordinates:e};return Go(i,t,n)}si.multiPoint=Jd;function Qd(e,t,n){n===void 0&&(n={});var i={type:"MultiPolygon",coordinates:e};return Go(i,t,n)}si.multiPolygon=Qd;function fv(e,t,n){n===void 0&&(n={});var i={type:"GeometryCollection",geometries:e};return Go(i,t,n)}si.geometryCollection=fv;function dv(e,t){if(t===void 0&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,t||0);return Math.round(e*n)/n}si.round=dv;function tp(e,t){t===void 0&&(t="kilometers");var n=si.factors[t];if(!n)throw new Error(t+" units is invalid");return e*n}si.radiansToLength=tp;function Yh(e,t){t===void 0&&(t="kilometers");var n=si.factors[t];if(!n)throw new Error(t+" units is invalid");return e/n}si.lengthToRadians=Yh;function pv(e,t){return ep(Yh(e,t))}si.lengthToDegrees=pv;function mv(e){var t=e%360;return t<0&&(t+=360),t}si.bearingToAzimuth=mv;function ep(e){var t=e%(2*Math.PI);return t*180/Math.PI}si.radiansToDegrees=ep;function gv(e){var t=e%360;return t*Math.PI/180}si.degreesToRadians=gv;function yv(e,t,n){if(t===void 0&&(t="kilometers"),n===void 0&&(n="kilometers"),!(e>=0))throw new Error("length must be a positive number");return tp(Yh(e,t),n)}si.convertLength=yv;function vv(e,t,n){if(t===void 0&&(t="meters"),n===void 0&&(n="kilometers"),!(e>=0))throw new Error("area must be a positive number");var i=si.areaFactors[t];if(!i)throw new Error("invalid original units");var r=si.areaFactors[n];if(!r)throw new Error("invalid final units");return e/i*r}si.convertArea=vv;function fu(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}si.isNumber=fu;function bv(e){return!!e&&e.constructor===Object}si.isObject=bv;function _v(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(e.length!==4&&e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(t){if(!fu(t))throw new Error("bbox must only contain numbers")})}si.validateBBox=_v;function wv(e){if(!e)throw new Error("id is required");if(["string","number"].indexOf(typeof e)===-1)throw new Error("id must be a number or a string")}si.validateId=wv});var Jh=qe(Pn=>{"use strict";Object.defineProperty(Pn,"__esModule",{value:!0});var rs=Zh();function pl(e,t,n){if(e!==null)for(var i,r,o,a,s,u,f,c=0,d=0,m,v=e.type,p=v==="FeatureCollection",_=v==="Feature",y=p?e.features.length:1,x=0;x<y;x++){f=p?e.features[x].geometry:_?e.geometry:e,m=f?f.type==="GeometryCollection":!1,s=m?f.geometries.length:1;for(var S=0;S<s;S++){var O=0,B=0;if(a=m?f.geometries[S]:f,a!==null){u=a.coordinates;var U=a.type;switch(c=n&&(U==="Polygon"||U==="MultiPolygon")?1:0,U){case null:break;case"Point":if(t(u,d,x,O,B)===!1)return!1;d++,O++;break;case"LineString":case"MultiPoint":for(i=0;i<u.length;i++){if(t(u[i],d,x,O,B)===!1)return!1;d++,U==="MultiPoint"&&O++}U==="LineString"&&O++;break;case"Polygon":case"MultiLineString":for(i=0;i<u.length;i++){for(r=0;r<u[i].length-c;r++){if(t(u[i][r],d,x,O,B)===!1)return!1;d++}U==="MultiLineString"&&O++,U==="Polygon"&&B++}U==="Polygon"&&O++;break;case"MultiPolygon":for(i=0;i<u.length;i++){for(B=0,r=0;r<u[i].length;r++){for(o=0;o<u[i][r].length-c;o++){if(t(u[i][r][o],d,x,O,B)===!1)return!1;d++}B++}O++}break;case"GeometryCollection":for(i=0;i<a.geometries.length;i++)if(pl(a.geometries[i],t,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function xv(e,t,n,i){var r=n;return pl(e,function(o,a,s,u,f){a===0&&n===void 0?r=o:r=t(r,o,a,s,u,f)},i),r}function ip(e,t){var n;switch(e.type){case"FeatureCollection":for(n=0;n<e.features.length&&t(e.features[n].properties,n)!==!1;n++);break;case"Feature":t(e.properties,0);break}}function Ev(e,t,n){var i=n;return ip(e,function(r,o){o===0&&n===void 0?i=r:i=t(i,r,o)}),i}function rp(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var n=0;n<e.features.length&&t(e.features[n],n)!==!1;n++);}function Cv(e,t,n){var i=n;return rp(e,function(r,o){o===0&&n===void 0?i=r:i=t(i,r,o)}),i}function Mv(e){var t=[];return pl(e,function(n){t.push(n)}),t}function Kh(e,t){var n,i,r,o,a,s,u,f,c,d,m=0,v=e.type==="FeatureCollection",p=e.type==="Feature",_=v?e.features.length:1;for(n=0;n<_;n++){for(s=v?e.features[n].geometry:p?e.geometry:e,f=v?e.features[n].properties:p?e.properties:{},c=v?e.features[n].bbox:p?e.bbox:void 0,d=v?e.features[n].id:p?e.id:void 0,u=s?s.type==="GeometryCollection":!1,a=u?s.geometries.length:1,r=0;r<a;r++){if(o=u?s.geometries[r]:s,o===null){if(t(null,m,f,c,d)===!1)return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(o,m,f,c,d)===!1)return!1;break}case"GeometryCollection":{for(i=0;i<o.geometries.length;i++)if(t(o.geometries[i],m,f,c,d)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}m++}}function Sv(e,t,n){var i=n;return Kh(e,function(r,o,a,s,u){o===0&&n===void 0?i=r:i=t(i,r,o,a,s,u)}),i}function pu(e,t){Kh(e,function(n,i,r,o,a){var s=n===null?null:n.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return t(rs.feature(n,r,{bbox:o,id:a}),i,0)===!1?!1:void 0}var u;switch(s){case"MultiPoint":u="Point";break;case"MultiLineString":u="LineString";break;case"MultiPolygon":u="Polygon";break}for(var f=0;f<n.coordinates.length;f++){var c=n.coordinates[f],d={type:u,coordinates:c};if(t(rs.feature(d,r),i,f)===!1)return!1}})}function kv(e,t,n){var i=n;return pu(e,function(r,o,a){o===0&&a===0&&n===void 0?i=r:i=t(i,r,o,a)}),i}function np(e,t){pu(e,function(n,i,r){var o=0;if(n.geometry){var a=n.geometry.type;if(!(a==="Point"||a==="MultiPoint")){var s,u=0,f=0,c=0;if(pl(n,function(d,m,v,p,_){if(s===void 0||i>u||p>f||_>c){s=d,u=i,f=p,c=_,o=0;return}var y=rs.lineString([s,d],n.properties);if(t(y,i,r,_,o)===!1)return!1;o++,s=d})===!1)return!1}}})}function Lv(e,t,n){var i=n,r=!1;return np(e,function(o,a,s,u,f){r===!1&&n===void 0?i=o:i=t(i,o,a,s,u,f),r=!0}),i}function sp(e,t){if(!e)throw new Error("geojson is required");pu(e,function(n,i,r){if(n.geometry!==null){var o=n.geometry.type,a=n.geometry.coordinates;switch(o){case"LineString":if(t(n,i,r,0,0)===!1)return!1;break;case"Polygon":for(var s=0;s<a.length;s++)if(t(rs.lineString(a[s],n.properties),i,r,s)===!1)return!1;break}}})}function Tv(e,t,n){var i=n;return sp(e,function(r,o,a,s){o===0&&n===void 0?i=r:i=t(i,r,o,a,s)}),i}function Pv(e,t){if(t=t||{},!rs.isObject(t))throw new Error("options is invalid");var n=t.featureIndex||0,i=t.multiFeatureIndex||0,r=t.geometryIndex||0,o=t.segmentIndex||0,a=t.properties,s;switch(e.type){case"FeatureCollection":n<0&&(n=e.features.length+n),a=a||e.features[n].properties,s=e.features[n].geometry;break;case"Feature":a=a||e.properties,s=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=e;break;default:throw new Error("geojson is invalid")}if(s===null)return null;var u=s.coordinates;switch(s.type){case"Point":case"MultiPoint":return null;case"LineString":return o<0&&(o=u.length+o-1),rs.lineString([u[o],u[o+1]],a,t);case"Polygon":return r<0&&(r=u.length+r),o<0&&(o=u[r].length+o-1),rs.lineString([u[r][o],u[r][o+1]],a,t);case"MultiLineString":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o-1),rs.lineString([u[i][o],u[i][o+1]],a,t);case"MultiPolygon":return i<0&&(i=u.length+i),r<0&&(r=u[i].length+r),o<0&&(o=u[i][r].length-o-1),rs.lineString([u[i][r][o],u[i][r][o+1]],a,t)}throw new Error("geojson is invalid")}function Rv(e,t){if(t=t||{},!rs.isObject(t))throw new Error("options is invalid");var n=t.featureIndex||0,i=t.multiFeatureIndex||0,r=t.geometryIndex||0,o=t.coordIndex||0,a=t.properties,s;switch(e.type){case"FeatureCollection":n<0&&(n=e.features.length+n),a=a||e.features[n].properties,s=e.features[n].geometry;break;case"Feature":a=a||e.properties,s=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=e;break;default:throw new Error("geojson is invalid")}if(s===null)return null;var u=s.coordinates;switch(s.type){case"Point":return rs.point(u,a,t);case"MultiPoint":return i<0&&(i=u.length+i),rs.point(u[i],a,t);case"LineString":return o<0&&(o=u.length+o),rs.point(u[o],a,t);case"Polygon":return r<0&&(r=u.length+r),o<0&&(o=u[r].length+o),rs.point(u[r][o],a,t);case"MultiLineString":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),rs.point(u[i][o],a,t);case"MultiPolygon":return i<0&&(i=u.length+i),r<0&&(r=u[i].length+r),o<0&&(o=u[i][r].length-o),rs.point(u[i][r][o],a,t)}throw new Error("geojson is invalid")}Pn.coordAll=Mv;Pn.coordEach=pl;Pn.coordReduce=xv;Pn.featureEach=rp;Pn.featureReduce=Cv;Pn.findPoint=Rv;Pn.findSegment=Pv;Pn.flattenEach=pu;Pn.flattenReduce=kv;Pn.geomEach=Kh;Pn.geomReduce=Sv;Pn.lineEach=sp;Pn.lineReduce=Tv;Pn.propEach=ip;Pn.propReduce=Ev;Pn.segmentEach=np;Pn.segmentReduce=Lv});var op=qe(tc=>{"use strict";Object.defineProperty(tc,"__esModule",{value:!0});var Ov=Jh();function Qh(e){var t=[1/0,1/0,-1/0,-1/0];return Ov.coordEach(e,function(n){t[0]>n[0]&&(t[0]=n[0]),t[1]>n[1]&&(t[1]=n[1]),t[2]<n[0]&&(t[2]=n[0]),t[3]<n[1]&&(t[3]=n[1])}),t}Qh.default=Qh;tc.default=Qh});var mu=qe((R3,ec)=>{var co=Lh(),lp=Zh(),up=Jh(),Sa=op().default,Av=up.featureEach,T3=up.coordEach,P3=lp.polygon,ap=lp.featureCollection;function hp(e){var t=new co(e);return t.insert=function(n){if(n.type!=="Feature")throw new Error("invalid feature");return n.bbox=n.bbox?n.bbox:Sa(n),co.prototype.insert.call(this,n)},t.load=function(n){var i=[];return Array.isArray(n)?n.forEach(function(r){if(r.type!=="Feature")throw new Error("invalid features");r.bbox=r.bbox?r.bbox:Sa(r),i.push(r)}):Av(n,function(r){if(r.type!=="Feature")throw new Error("invalid features");r.bbox=r.bbox?r.bbox:Sa(r),i.push(r)}),co.prototype.load.call(this,i)},t.remove=function(n,i){if(n.type!=="Feature")throw new Error("invalid feature");return n.bbox=n.bbox?n.bbox:Sa(n),co.prototype.remove.call(this,n,i)},t.clear=function(){return co.prototype.clear.call(this)},t.search=function(n){var i=co.prototype.search.call(this,this.toBBox(n));return ap(i)},t.collides=function(n){return co.prototype.collides.call(this,this.toBBox(n))},t.all=function(){var n=co.prototype.all.call(this);return ap(n)},t.toJSON=function(){return co.prototype.toJSON.call(this)},t.fromJSON=function(n){return co.prototype.fromJSON.call(this,n)},t.toBBox=function(n){var i;if(n.bbox)i=n.bbox;else if(Array.isArray(n)&&n.length===4)i=n;else if(Array.isArray(n)&&n.length===6)i=[n[0],n[1],n[3],n[4]];else if(n.type==="Feature")i=Sa(n);else if(n.type==="FeatureCollection")i=Sa(n);else throw new Error("invalid geojson");return{minX:i[0],minY:i[1],maxX:i[2],maxY:i[3]}},t}ec.exports=hp;ec.exports.default=hp});var yp=qe((oc,ac)=>{(function(e,t){typeof oc=="object"&&typeof ac<"u"?ac.exports=t():typeof define=="function"&&define.amd?define(t):e.quickselect=t()})(oc,function(){"use strict";function e(r,o,a,s,u){t(r,o,a||0,s||r.length-1,u||i)}function t(r,o,a,s,u){for(;s>a;){if(s-a>600){var f=s-a+1,c=o-a+1,d=Math.log(f),m=.5*Math.exp(2*d/3),v=.5*Math.sqrt(d*m*(f-m)/f)*(c-f/2<0?-1:1),p=Math.max(a,Math.floor(o-c*m/f+v)),_=Math.min(s,Math.floor(o+(f-c)*m/f+v));t(r,o,p,_,u)}var y=r[o],x=a,S=s;for(n(r,a,o),u(r[s],y)>0&&n(r,a,s);x<S;){for(n(r,x,S),x++,S--;u(r[x],y)<0;)x++;for(;u(r[S],y)>0;)S--}u(r[a],y)===0?n(r,a,S):(S++,n(r,S,s)),S<=o&&(a=S+1),o<=S&&(s=S-1)}}function n(r,o,a){var s=r[o];r[o]=r[a],r[a]=s}function i(r,o){return r<o?-1:r>o?1:0}return e})});var wp=qe((iS,hc)=>{"use strict";hc.exports=yl;hc.exports.default=yl;var Uv=yp();function yl(e,t){if(!(this instanceof yl))return new yl(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),t&&this._initFormat(t),this.clear()}yl.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,n=[],i=this.toBBox;if(!vu(e,t))return n;for(var r=[],o,a,s,u;t;){for(o=0,a=t.children.length;o<a;o++)s=t.children[o],u=t.leaf?i(s):s,vu(e,u)&&(t.leaf?n.push(s):uc(e,u)?this._all(s,n):r.push(s));t=r.pop()}return n},collides:function(e){var t=this.data,n=this.toBBox;if(!vu(e,t))return!1;for(var i=[],r,o,a,s;t;){for(r=0,o=t.children.length;r<o;r++)if(a=t.children[r],s=t.leaf?n(a):a,vu(e,s)){if(t.leaf||uc(e,s))return!0;i.push(a)}t=i.pop()}return!1},load:function(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(var t=0,n=e.length;t<n;t++)this.insert(e[t]);return this}var i=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=i;else if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var r=this.data;this.data=i,i=r}this._insert(i,this.data.height-i.height-1,!0)}return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=La([]),this},remove:function(e,t){if(!e)return this;for(var n=this.data,i=this.toBBox(e),r=[],o=[],a,s,u,f;n||r.length;){if(n||(n=r.pop(),s=r[r.length-1],a=o.pop(),f=!0),n.leaf&&(u=Vv(e,n.children,t),u!==-1))return n.children.splice(u,1),r.push(n),this._condense(r),this;!f&&!n.leaf&&uc(n,i)?(r.push(n),o.push(a),a=0,s=n,n=n.children[0]):s?(a++,n=s.children[a],f=!1):n=null}return this},toBBox:function(e){return e},compareMinX:vp,compareMinY:bp,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var n=[];e;)e.leaf?t.push.apply(t,e.children):n.push.apply(n,e.children),e=n.pop();return t},_build:function(e,t,n,i){var r=n-t+1,o=this._maxEntries,a;if(r<=o)return a=La(e.slice(t,n+1)),ka(a,this.toBBox),a;i||(i=Math.ceil(Math.log(r)/Math.log(o)),o=Math.ceil(r/Math.pow(o,i-1))),a=La([]),a.leaf=!1,a.height=i;var s=Math.ceil(r/o),u=s*Math.ceil(Math.sqrt(o)),f,c,d,m;for(_p(e,t,n,u,this.compareMinX),f=t;f<=n;f+=u)for(d=Math.min(f+u-1,n),_p(e,f,d,s,this.compareMinY),c=f;c<=d;c+=s)m=Math.min(c+s-1,d),a.children.push(this._build(e,c,m,i-1));return ka(a,this.toBBox),a},_chooseSubtree:function(e,t,n,i){for(var r,o,a,s,u,f,c,d;i.push(t),!(t.leaf||i.length-1===n);){for(c=d=1/0,r=0,o=t.children.length;r<o;r++)a=t.children[r],u=lc(a),f=qv(e,a)-u,f<d?(d=f,c=u<c?u:c,s=a):f===d&&u<c&&(c=u,s=a);t=s||t.children[0]}return t},_insert:function(e,t,n){var i=this.toBBox,r=n?e:i(e),o=[],a=this._chooseSubtree(r,this.data,t,o);for(a.children.push(e),gl(a,r);t>=0&&o[t].children.length>this._maxEntries;)this._split(o,t),t--;this._adjustParentBBoxes(r,o,t)},_split:function(e,t){var n=e[t],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);var o=this._chooseSplitIndex(n,r,i),a=La(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,ka(n,this.toBBox),ka(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(e,t){this.data=La([e,t]),this.data.height=e.height+1,this.data.leaf=!1,ka(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,n){var i,r,o,a,s,u,f,c;for(u=f=1/0,i=t;i<=n-t;i++)r=ml(e,0,i,this.toBBox),o=ml(e,i,n,this.toBBox),a=Wv(r,o),s=lc(r)+lc(o),a<u?(u=a,c=i,f=s<f?s:f):a===u&&s<f&&(f=s,c=i);return c},_chooseSplitAxis:function(e,t,n){var i=e.leaf?this.compareMinX:vp,r=e.leaf?this.compareMinY:bp,o=this._allDistMargin(e,t,n,i),a=this._allDistMargin(e,t,n,r);o<a&&e.children.sort(i)},_allDistMargin:function(e,t,n,i){e.children.sort(i);var r=this.toBBox,o=ml(e,0,t,r),a=ml(e,n-t,n,r),s=yu(o)+yu(a),u,f;for(u=t;u<n-t;u++)f=e.children[u],gl(o,e.leaf?r(f):f),s+=yu(o);for(u=n-t-1;u>=t;u--)f=e.children[u],gl(a,e.leaf?r(f):f),s+=yu(a);return s},_adjustParentBBoxes:function(e,t,n){for(var i=n;i>=0;i--)gl(t[i],e)},_condense:function(e){for(var t=e.length-1,n;t>=0;t--)e[t].children.length===0?t>0?(n=e[t-1].children,n.splice(n.indexOf(e[t]),1)):this.clear():ka(e[t],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};function Vv(e,t,n){if(!n)return t.indexOf(e);for(var i=0;i<t.length;i++)if(n(e,t[i]))return i;return-1}function ka(e,t){ml(e,0,e.children.length,t,e)}function ml(e,t,n,i,r){r||(r=La(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o=t,a;o<n;o++)a=e.children[o],gl(r,e.leaf?i(a):a);return r}function gl(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function vp(e,t){return e.minX-t.minX}function bp(e,t){return e.minY-t.minY}function lc(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function yu(e){return e.maxX-e.minX+(e.maxY-e.minY)}function qv(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function Wv(e,t){var n=Math.max(e.minX,t.minX),i=Math.max(e.minY,t.minY),r=Math.min(e.maxX,t.maxX),o=Math.min(e.maxY,t.maxY);return Math.max(0,r-n)*Math.max(0,o-i)}function uc(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function vu(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function La(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function _p(e,t,n,i,r){for(var o=[t,n],a;o.length;)n=o.pop(),t=o.pop(),!(n-t<=i)&&(a=t+Math.ceil((n-t)/i/2)*i,Uv(e,a,t,n,r),o.push(t,a,a,n))}});var fc=qe((jS,Lp)=>{"use strict";var kp=Object.prototype.toString;Lp.exports=function(t){var n=kp.call(t),i=n==="[object Arguments]";return i||(i=n!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&kp.call(t.callee)==="[object Function]"),i}});var Bp=qe((HS,Dp)=>{"use strict";var Np;Object.keys||(bl=Object.prototype.hasOwnProperty,dc=Object.prototype.toString,Tp=fc(),pc=Object.prototype.propertyIsEnumerable,Pp=!pc.call({toString:null},"toString"),Rp=pc.call(function(){},"prototype"),_l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],bu=function(e){var t=e.constructor;return t&&t.prototype===e},Op={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},Ap=function(){if(typeof window>"u")return!1;for(var e in window)try{if(!Op["$"+e]&&bl.call(window,e)&&window[e]!==null&&typeof window[e]=="object")try{bu(window[e])}catch{return!0}}catch{return!0}return!1}(),Ip=function(e){if(typeof window>"u"||!Ap)return bu(e);try{return bu(e)}catch{return!1}},Np=function(t){var n=t!==null&&typeof t=="object",i=dc.call(t)==="[object Function]",r=Tp(t),o=n&&dc.call(t)==="[object String]",a=[];if(!n&&!i&&!r)throw new TypeError("Object.keys called on a non-object");var s=Rp&&i;if(o&&t.length>0&&!bl.call(t,0))for(var u=0;u<t.length;++u)a.push(String(u));if(r&&t.length>0)for(var f=0;f<t.length;++f)a.push(String(f));else for(var c in t)!(s&&c==="prototype")&&bl.call(t,c)&&a.push(String(c));if(Pp)for(var d=Ip(t),m=0;m<_l.length;++m)!(d&&_l[m]==="constructor")&&bl.call(t,_l[m])&&a.push(_l[m]);return a});var bl,dc,Tp,pc,Pp,Rp,_l,bu,Op,Ap,Ip;Dp.exports=Np});var mc=qe((GS,jp)=>{"use strict";var Kv=Array.prototype.slice,Jv=fc(),Fp=Object.keys,_u=Fp?function(t){return Fp(t)}:Bp(),zp=Object.keys;_u.shim=function(){if(Object.keys){var t=function(){var n=Object.keys(arguments);return n&&n.length===arguments.length}(1,2);t||(Object.keys=function(i){return Jv(i)?zp(Kv.call(i)):zp(i)})}else Object.keys=_u;return Object.keys||_u};jp.exports=_u});var gc=qe((US,Hp)=>{"use strict";Hp.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},n=Symbol("test"),i=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var r=42;t[n]=r;for(n in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var o=Object.getOwnPropertySymbols(t);if(o.length!==1||o[0]!==n||!Object.prototype.propertyIsEnumerable.call(t,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(t,n);if(a.value!==r||a.enumerable!==!0)return!1}return!0}});var wu=qe((VS,Gp)=>{"use strict";var Qv=gc();Gp.exports=function(){return Qv()&&!!Symbol.toStringTag}});var qp=qe((qS,Vp)=>{"use strict";var Up=typeof Symbol<"u"&&Symbol,tb=gc();Vp.exports=function(){return typeof Up!="function"||typeof Symbol!="function"||typeof Up("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:tb()}});var Xp=qe((WS,Wp)=>{"use strict";var eb="Function.prototype.bind called on incompatible ",yc=Array.prototype.slice,ib=Object.prototype.toString,rb="[object Function]";Wp.exports=function(t){var n=this;if(typeof n!="function"||ib.call(n)!==rb)throw new TypeError(eb+n);for(var i=yc.call(arguments,1),r,o=function(){if(this instanceof r){var c=n.apply(this,i.concat(yc.call(arguments)));return Object(c)===c?c:this}else return n.apply(t,i.concat(yc.call(arguments)))},a=Math.max(0,n.length-i.length),s=[],u=0;u<a;u++)s.push("$"+u);if(r=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")(o),n.prototype){var f=function(){};f.prototype=n.prototype,r.prototype=new f,f.prototype=null}return r}});var xu=qe((XS,$p)=>{"use strict";var nb=Xp();$p.exports=Function.prototype.bind||nb});var Zp=qe(($S,Yp)=>{"use strict";var sb=xu();Yp.exports=sb.call(Function.call,Object.prototype.hasOwnProperty)});var Mu=qe((YS,em)=>{"use strict";var cr,Oa=SyntaxError,tm=Function,Ra=TypeError,vc=function(e){try{return tm('"use strict"; return ('+e+").constructor;")()}catch{}},ea=Object.getOwnPropertyDescriptor;if(ea)try{ea({},"")}catch{ea=null}var bc=function(){throw new Ra},ob=ea?function(){try{return arguments.callee,bc}catch{try{return ea(arguments,"callee").get}catch{return bc}}}():bc,Ta=qp()(),po=Object.getPrototypeOf||function(e){return e.__proto__},Pa={},ab=typeof Uint8Array>"u"?cr:po(Uint8Array),ia={"%AggregateError%":typeof AggregateError>"u"?cr:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?cr:ArrayBuffer,"%ArrayIteratorPrototype%":Ta?po([][Symbol.iterator]()):cr,"%AsyncFromSyncIteratorPrototype%":cr,"%AsyncFunction%":Pa,"%AsyncGenerator%":Pa,"%AsyncGeneratorFunction%":Pa,"%AsyncIteratorPrototype%":Pa,"%Atomics%":typeof Atomics>"u"?cr:Atomics,"%BigInt%":typeof BigInt>"u"?cr:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?cr:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?cr:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?cr:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?cr:Float32Array,"%Float64Array%":typeof Float64Array>"u"?cr:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?cr:FinalizationRegistry,"%Function%":tm,"%GeneratorFunction%":Pa,"%Int8Array%":typeof Int8Array>"u"?cr:Int8Array,"%Int16Array%":typeof Int16Array>"u"?cr:Int16Array,"%Int32Array%":typeof Int32Array>"u"?cr:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Ta?po(po([][Symbol.iterator]())):cr,"%JSON%":typeof JSON=="object"?JSON:cr,"%Map%":typeof Map>"u"?cr:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Ta?cr:po(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?cr:Promise,"%Proxy%":typeof Proxy>"u"?cr:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?cr:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?cr:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Ta?cr:po(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?cr:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Ta?po(""[Symbol.iterator]()):cr,"%Symbol%":Ta?Symbol:cr,"%SyntaxError%":Oa,"%ThrowTypeError%":ob,"%TypedArray%":ab,"%TypeError%":Ra,"%Uint8Array%":typeof Uint8Array>"u"?cr:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?cr:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?cr:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?cr:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?cr:WeakMap,"%WeakRef%":typeof WeakRef>"u"?cr:WeakRef,"%WeakSet%":typeof WeakSet>"u"?cr:WeakSet};try{null.error}catch(e){Kp=po(po(e)),ia["%Error.prototype%"]=Kp}var Kp,lb=function e(t){var n;if(t==="%AsyncFunction%")n=vc("async function () {}");else if(t==="%GeneratorFunction%")n=vc("function* () {}");else if(t==="%AsyncGeneratorFunction%")n=vc("async function* () {}");else if(t==="%AsyncGenerator%"){var i=e("%AsyncGeneratorFunction%");i&&(n=i.prototype)}else if(t==="%AsyncIteratorPrototype%"){var r=e("%AsyncGenerator%");r&&(n=po(r.prototype))}return ia[t]=n,n},Jp={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},wl=xu(),Eu=Zp(),ub=wl.call(Function.call,Array.prototype.concat),hb=wl.call(Function.apply,Array.prototype.splice),Qp=wl.call(Function.call,String.prototype.replace),Cu=wl.call(Function.call,String.prototype.slice),cb=wl.call(Function.call,RegExp.prototype.exec),fb=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,db=/\\(\\)?/g,pb=function(t){var n=Cu(t,0,1),i=Cu(t,-1);if(n==="%"&&i!=="%")throw new Oa("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&n!=="%")throw new Oa("invalid intrinsic syntax, expected opening `%`");var r=[];return Qp(t,fb,function(o,a,s,u){r[r.length]=s?Qp(u,db,"$1"):a||o}),r},mb=function(t,n){var i=t,r;if(Eu(Jp,i)&&(r=Jp[i],i="%"+r[0]+"%"),Eu(ia,i)){var o=ia[i];if(o===Pa&&(o=lb(i)),typeof o>"u"&&!n)throw new Ra("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:r,name:i,value:o}}throw new Oa("intrinsic "+t+" does not exist!")};em.exports=function(t,n){if(typeof t!="string"||t.length===0)throw new Ra("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new Ra('"allowMissing" argument must be a boolean');if(cb(/^%?[^%]*%?$/,t)===null)throw new Oa("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=pb(t),r=i.length>0?i[0]:"",o=mb("%"+r+"%",n),a=o.name,s=o.value,u=!1,f=o.alias;f&&(r=f[0],hb(i,ub([0,1],f)));for(var c=1,d=!0;c<i.length;c+=1){var m=i[c],v=Cu(m,0,1),p=Cu(m,-1);if((v==='"'||v==="'"||v==="`"||p==='"'||p==="'"||p==="`")&&v!==p)throw new Oa("property names with quotes must have matching quotes");if((m==="constructor"||!d)&&(u=!0),r+="."+m,a="%"+r+"%",Eu(ia,a))s=ia[a];else if(s!=null){if(!(m in s)){if(!n)throw new Ra("base intrinsic for "+t+" exists, but the property is not available.");return}if(ea&&c+1>=i.length){var _=ea(s,m);d=!!_,d&&"get"in _&&!("originalValue"in _.get)?s=_.get:s=s[m]}else d=Eu(s,m),s=s[m];d&&!u&&(ia[a]=s)}}return s}});var ku=qe((ZS,Su)=>{"use strict";var _c=xu(),Aa=Mu(),nm=Aa("%Function.prototype.apply%"),sm=Aa("%Function.prototype.call%"),om=Aa("%Reflect.apply%",!0)||_c.call(sm,nm),im=Aa("%Object.getOwnPropertyDescriptor%",!0),ra=Aa("%Object.defineProperty%",!0),gb=Aa("%Math.max%");if(ra)try{ra({},"a",{value:1})}catch{ra=null}Su.exports=function(t){var n=om(_c,sm,arguments);if(im&&ra){var i=im(n,"length");i.configurable&&ra(n,"length",{value:1+gb(0,t.length-(arguments.length-1))})}return n};var rm=function(){return om(_c,nm,arguments)};ra?ra(Su.exports,"apply",{value:rm}):Su.exports.apply=rm});var wc=qe((KS,um)=>{"use strict";var am=Mu(),lm=ku(),yb=lm(am("String.prototype.indexOf"));um.exports=function(t,n){var i=am(t,!!n);return typeof i=="function"&&yb(t,".prototype.")>-1?lm(i):i}});var fm=qe((JS,cm)=>{"use strict";var vb=wu()(),bb=wc(),xc=bb("Object.prototype.toString"),Lu=function(t){return vb&&t&&typeof t=="object"&&Symbol.toStringTag in t?!1:xc(t)==="[object Arguments]"},hm=function(t){return Lu(t)?!0:t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&xc(t)!=="[object Array]"&&xc(t.callee)==="[object Function]"},_b=function(){return Lu(arguments)}();Lu.isLegacyArguments=hm;cm.exports=_b?Lu:hm});var pm=qe((QS,dm)=>{"use strict";var wb=Mu(),Ec=wb("%Object.defineProperty%",!0),Cc=function(){if(Ec)try{return Ec({},"a",{value:1}),!0}catch{return!1}return!1};Cc.hasArrayLengthDefineBug=function(){if(!Cc())return null;try{return Ec([],"length",{value:1}).length!==1}catch{return!0}};dm.exports=Cc});var Ia=qe((tk,vm)=>{"use strict";var xb=mc(),Eb=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",Cb=Object.prototype.toString,Mb=Array.prototype.concat,mm=Object.defineProperty,Sb=function(e){return typeof e=="function"&&Cb.call(e)==="[object Function]"},kb=pm()(),gm=mm&&kb,Lb=function(e,t,n,i){if(t in e){if(i===!0){if(e[t]===n)return}else if(!Sb(i)||!i())return}gm?mm(e,t,{configurable:!0,enumerable:!1,value:n,writable:!0}):e[t]=n},ym=function(e,t){var n=arguments.length>2?arguments[2]:{},i=xb(t);Eb&&(i=Mb.call(i,Object.getOwnPropertySymbols(t)));for(var r=0;r<i.length;r+=1)Lb(e,i[r],t[i[r]],n[i[r]])};ym.supportsDescriptors=!!gm;vm.exports=ym});var Mc=qe((ek,_m)=>{"use strict";var bm=function(e){return e!==e};_m.exports=function(t,n){return t===0&&n===0?1/t===1/n:!!(t===n||bm(t)&&bm(n))}});var Sc=qe((ik,wm)=>{"use strict";var Tb=Mc();wm.exports=function(){return typeof Object.is=="function"?Object.is:Tb}});var Em=qe((rk,xm)=>{"use strict";var Pb=Sc(),Rb=Ia();xm.exports=function(){var t=Pb();return Rb(Object,{is:t},{is:function(){return Object.is!==t}}),t}});var km=qe((nk,Sm)=>{"use strict";var Ob=Ia(),Ab=ku(),Ib=Mc(),Cm=Sc(),Nb=Em(),Mm=Ab(Cm(),Object);Ob(Mm,{getPolyfill:Cm,implementation:Ib,shim:Nb});Sm.exports=Mm});var Om=qe((sk,Rm)=>{"use strict";var kc=wc(),Lm=wu()(),Tm,Pm,Lc,Tc;Lm&&(Tm=kc("Object.prototype.hasOwnProperty"),Pm=kc("RegExp.prototype.exec"),Lc={},Tu=function(){throw Lc},Tc={toString:Tu,valueOf:Tu},typeof Symbol.toPrimitive=="symbol"&&(Tc[Symbol.toPrimitive]=Tu));var Tu,Db=kc("Object.prototype.toString"),Bb=Object.getOwnPropertyDescriptor,Fb="[object RegExp]";Rm.exports=Lm?function(t){if(!t||typeof t!="object")return!1;var n=Bb(t,"lastIndex"),i=n&&Tm(n,"value");if(!i)return!1;try{Pm(t,Tc)}catch(r){return r===Lc}}:function(t){return!t||typeof t!="object"&&typeof t!="function"?!1:Db(t)===Fb}});var Im=qe((ok,Am)=>{"use strict";var El=function(){return typeof function(){}.name=="string"},xl=Object.getOwnPropertyDescriptor;if(xl)try{xl([],"length")}catch{xl=null}El.functionsHaveConfigurableNames=function(){if(!El()||!xl)return!1;var t=xl(function(){},"name");return!!t&&!!t.configurable};var zb=Function.prototype.bind;El.boundFunctionsHaveNames=function(){return El()&&typeof zb=="function"&&function(){}.bind().name!==""};Am.exports=El});var Rc=qe((ak,Pc)=>{"use strict";var jb=Im().functionsHaveConfigurableNames(),Hb=Object,Gb=TypeError;Pc.exports=function(){if(this!=null&&this!==Hb(this))throw new Gb("RegExp.prototype.flags getter called on non-object");var t="";return this.hasIndices&&(t+="d"),this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.sticky&&(t+="y"),t};jb&&Object.defineProperty&&Object.defineProperty(Pc.exports,"name",{value:"get flags"})});var Oc=qe((lk,Nm)=>{"use strict";var Ub=Rc(),Vb=Ia().supportsDescriptors,qb=Object.getOwnPropertyDescriptor;Nm.exports=function(){if(Vb&&/a/mig.flags==="gim"){var t=qb(RegExp.prototype,"flags");if(t&&typeof t.get=="function"&&typeof RegExp.prototype.dotAll=="boolean"&&typeof RegExp.prototype.hasIndices=="boolean"){var n="",i={};if(Object.defineProperty(i,"hasIndices",{get:function(){n+="d"}}),Object.defineProperty(i,"sticky",{get:function(){n+="y"}}),n==="dy")return t.get}}return Ub}});var Fm=qe((uk,Bm)=>{"use strict";var Wb=Ia().supportsDescriptors,Xb=Oc(),$b=Object.getOwnPropertyDescriptor,Yb=Object.defineProperty,Zb=TypeError,Dm=Object.getPrototypeOf,Kb=/a/;Bm.exports=function(){if(!Wb||!Dm)throw new Zb("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=Xb(),n=Dm(Kb),i=$b(n,"flags");return(!i||i.get!==t)&&Yb(n,"flags",{configurable:!0,enumerable:!1,get:t}),t}});var Gm=qe((hk,Hm)=>{"use strict";var Jb=Ia(),Qb=ku(),t1=Rc(),zm=Oc(),e1=Fm(),jm=Qb(zm());Jb(jm,{getPolyfill:zm,implementation:t1,shim:e1});Hm.exports=jm});var Vm=qe((ck,Um)=>{"use strict";var i1=Date.prototype.getDay,r1=function(t){try{return i1.call(t),!0}catch{return!1}},n1=Object.prototype.toString,s1="[object Date]",o1=wu()();Um.exports=function(t){return typeof t!="object"||t===null?!1:o1?r1(t):n1.call(t)===s1}});var Ac=qe((fk,eg)=>{var qm=mc(),Wm=fm(),Xm=km(),$m=Om(),Ym=Gm(),Zm=Vm(),Km=Date.prototype.getTime;function tg(e,t,n){var i=n||{};return(i.strict?Xm(e,t):e===t)?!0:!e||!t||typeof e!="object"&&typeof t!="object"?i.strict?Xm(e,t):e==t:a1(e,t,i)}function Jm(e){return e==null}function Qm(e){return!(!e||typeof e!="object"||typeof e.length!="number"||typeof e.copy!="function"||typeof e.slice!="function"||e.length>0&&typeof e[0]!="number")}function a1(e,t,n){var i,r;if(typeof e!=typeof t||Jm(e)||Jm(t)||e.prototype!==t.prototype||Wm(e)!==Wm(t))return!1;var o=$m(e),a=$m(t);if(o!==a)return!1;if(o||a)return e.source===t.source&&Ym(e)===Ym(t);if(Zm(e)&&Zm(t))return Km.call(e)===Km.call(t);var s=Qm(e),u=Qm(t);if(s!==u)return!1;if(s||u){if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}if(typeof e!=typeof t)return!1;try{var f=qm(e),c=qm(t)}catch{return!1}if(f.length!==c.length)return!1;for(f.sort(),c.sort(),i=f.length-1;i>=0;i--)if(f[i]!=c[i])return!1;for(i=f.length-1;i>=0;i--)if(r=f[i],!tg(e[r],t[r],n))return!1;return!0}eg.exports=tg});var $c=qe((vL,hg)=>{var n_=Ac(),mo=function(e){this.precision=e&&e.precision?e.precision:17,this.direction=e&&e.direction?e.direction:!1,this.pseudoNode=e&&e.pseudoNode?e.pseudoNode:!1,this.objectComparator=e&&e.objectComparator?e.objectComparator:s_};mo.prototype.compare=function(e,t){if(e.type!==t.type||!ug(e,t))return!1;switch(e.type){case"Point":return this.compareCoord(e.coordinates,t.coordinates);case"LineString":return this.compareLine(e.coordinates,t.coordinates,0,!1);case"Polygon":return this.comparePolygon(e,t);case"Feature":return this.compareFeature(e,t);default:if(e.type.indexOf("Multi")===0){var n=this,i=lg(e),r=lg(t);return i.every(function(o){return this.some(function(a){return n.compare(o,a)})},r)}}return!1};function lg(e){return e.coordinates.map(function(t){return{type:e.type.replace("Multi",""),coordinates:t}})}function ug(e,t){return e.hasOwnProperty("coordinates")?e.coordinates.length===t.coordinates.length:e.length===t.length}mo.prototype.compareCoord=function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n].toFixed(this.precision)!==t[n].toFixed(this.precision))return!1;return!0};mo.prototype.compareLine=function(e,t,n,i){if(!ug(e,t))return!1;var r=this.pseudoNode?e:this.removePseudo(e),o=this.pseudoNode?t:this.removePseudo(t);if(!(i&&!this.compareCoord(r[0],o[0])&&(o=this.fixStartIndex(o,r),!o))){var a=this.compareCoord(r[n],o[n]);return this.direction||a?this.comparePath(r,o):this.compareCoord(r[n],o[o.length-(1+n)])?this.comparePath(r.slice().reverse(),o):!1}};mo.prototype.fixStartIndex=function(e,t){for(var n,i=-1,r=0;r<e.length;r++)if(this.compareCoord(e[r],t[0])){i=r;break}return i>=0&&(n=[].concat(e.slice(i,e.length),e.slice(1,i+1))),n};mo.prototype.comparePath=function(e,t){var n=this;return e.every(function(i,r){return n.compareCoord(i,this[r])},t)};mo.prototype.comparePolygon=function(e,t){if(this.compareLine(e.coordinates[0],t.coordinates[0],1,!0)){var n=e.coordinates.slice(1,e.coordinates.length),i=t.coordinates.slice(1,t.coordinates.length),r=this;return n.every(function(o){return this.some(function(a){return r.compareLine(o,a,1,!0)})},i)}else return!1};mo.prototype.compareFeature=function(e,t){return e.id!==t.id||!this.objectComparator(e.properties,t.properties)||!this.compareBBox(e,t)?!1:this.compare(e.geometry,t.geometry)};mo.prototype.compareBBox=function(e,t){return!!(!e.bbox&&!t.bbox||e.bbox&&t.bbox&&this.compareCoord(e.bbox,t.bbox))};mo.prototype.removePseudo=function(e){return e};function s_(e,t){return n_(e,t,{strict:!0})}hg.exports=mo});var fg=qe((PL,Ou)=>{function qo(e,t,n,i){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(e,t,n,i)}qo.prototype.run=function(e,t,n,i){this._init(e,t,n,i);for(var r=0;r<this._datasetLength;r++)if(this._visited[r]!==1){this._visited[r]=1;var o=this._regionQuery(r);if(o.length<this.minPts)this.noise.push(r);else{var a=this.clusters.length;this.clusters.push([]),this._addToCluster(r,a),this._expandCluster(a,o)}}return this.clusters};qo.prototype._init=function(e,t,n,i){if(e){if(!(e instanceof Array))throw Error("Dataset must be of type array, "+typeof e+" given");this.dataset=e,this.clusters=[],this.noise=[],this._datasetLength=e.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}t&&(this.epsilon=t),n&&(this.minPts=n),i&&(this.distance=i)};qo.prototype._expandCluster=function(e,t){for(var n=0;n<t.length;n++){var i=t[n];if(this._visited[i]!==1){this._visited[i]=1;var r=this._regionQuery(i);r.length>=this.minPts&&(t=this._mergeArrays(t,r))}this._assigned[i]!==1&&this._addToCluster(i,e)}};qo.prototype._addToCluster=function(e,t){this.clusters[t].push(e),this._assigned[e]=1};qo.prototype._regionQuery=function(e){for(var t=[],n=0;n<this._datasetLength;n++){var i=this.distance(this.dataset[e],this.dataset[n]);i<this.epsilon&&t.push(n)}return t};qo.prototype._mergeArrays=function(e,t){for(var n=t.length,i=0;i<n;i++){var r=t[i];e.indexOf(r)<0&&e.push(r)}return e};qo.prototype._euclideanDistance=function(e,t){for(var n=0,i=Math.min(e.length,t.length);i--;)n+=(e[i]-t[i])*(e[i]-t[i]);return Math.sqrt(n)};typeof Ou<"u"&&Ou.exports&&(Ou.exports=qo)});var dg=qe((RL,Au)=>{function Wo(e,t,n){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(e,t,n)}Wo.prototype.init=function(e,t,n){this.assignments=[],this.centroids=[],typeof e<"u"&&(this.dataset=e),typeof t<"u"&&(this.k=t),typeof n<"u"&&(this.distance=n)};Wo.prototype.run=function(e,t){this.init(e,t);for(var n=this.dataset.length,i=0;i<this.k;i++)this.centroids[i]=this.randomCentroid();for(var r=!0;r;){r=this.assign();for(var o=0;o<this.k;o++){for(var a=new Array(c),s=0,u=0;u<c;u++)a[u]=0;for(var f=0;f<n;f++){var c=this.dataset[f].length;if(o===this.assignments[f]){for(var u=0;u<c;u++)a[u]+=this.dataset[f][u];s++}}if(s>0){for(var u=0;u<c;u++)a[u]/=s;this.centroids[o]=a}else this.centroids[o]=this.randomCentroid(),r=!0}}return this.getClusters()};Wo.prototype.randomCentroid=function(){var e=this.dataset.length-1,t,n;do n=Math.round(Math.random()*e),t=this.dataset[n];while(this.centroids.indexOf(t)>=0);return t};Wo.prototype.assign=function(){for(var e=!1,t=this.dataset.length,n,i=0;i<t;i++)n=this.argmin(this.dataset[i],this.centroids,this.distance),n!=this.assignments[i]&&(this.assignments[i]=n,e=!0);return e};Wo.prototype.getClusters=function(){for(var e=new Array(this.k),t,n=0;n<this.assignments.length;n++)t=this.assignments[n],typeof e[t]>"u"&&(e[t]=[]),e[t].push(n);return e};Wo.prototype.argmin=function(e,t,n){for(var i=Number.MAX_VALUE,r=0,o=t.length,a,s=0;s<o;s++)a=n(e,t[s]),a<i&&(i=a,r=s);return r};Wo.prototype.distance=function(e,t){for(var n=0,i=Math.min(e.length,t.length);i--;){var r=e[i]-t[i];n+=r*r}return Math.sqrt(n)};typeof Au<"u"&&Au.exports&&(Au.exports=Wo)});var Yc=qe((OL,Iu)=>{function go(e,t,n){this._queue=[],this._priorities=[],this._sorting="desc",this._init(e,t,n)}go.prototype.insert=function(e,t){for(var n=this._queue.length,i=n;i--;){var r=this._priorities[i];this._sorting==="desc"?t>r&&(n=i):t<r&&(n=i)}this._insertAt(e,t,n)};go.prototype.remove=function(e){for(var t=this._queue.length;t--;){var n=this._queue[t];if(e===n){this._queue.splice(t,1),this._priorities.splice(t,1);break}}};go.prototype.forEach=function(e){this._queue.forEach(e)};go.prototype.getElements=function(){return this._queue};go.prototype.getElementPriority=function(e){return this._priorities[e]};go.prototype.getPriorities=function(){return this._priorities};go.prototype.getElementsWithPriorities=function(){for(var e=[],t=0,n=this._queue.length;t<n;t++)e.push([this._queue[t],this._priorities[t]]);return e};go.prototype._init=function(e,t,n){if(e&&t){if(this._queue=[],this._priorities=[],e.length!==t.length)throw new Error("Arrays must have the same length");for(var i=0;i<e.length;i++)this.insert(e[i],t[i])}n&&(this._sorting=n)};go.prototype._insertAt=function(e,t,n){this._queue.length===n?(this._queue.push(e),this._priorities.push(t)):(this._queue.splice(n,0,e),this._priorities.splice(n,0,t))};typeof Iu<"u"&&Iu.exports&&(Iu.exports=go)});var mg=qe((AL,Ba)=>{typeof Ba<"u"&&Ba.exports&&(pg=Yc());var pg;function Ro(e,t,n,i){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(e,t,n,i)}Ro.prototype.run=function(e,t,n,i){this._init(e,t,n,i);for(var r=0,o=this.dataset.length;r<o;r++)if(this._processed[r]!==1){this._processed[r]=1,this.clusters.push([r]);var a=this.clusters.length-1;this._orderedList.push(r);var s=new pg(null,null,"asc"),u=this._regionQuery(r);this._distanceToCore(r)!==void 0&&(this._updateQueue(r,u,s),this._expandCluster(a,s))}return this.clusters};Ro.prototype.getReachabilityPlot=function(){for(var e=[],t=0,n=this._orderedList.length;t<n;t++){var i=this._orderedList[t],r=this._reachability[i];e.push([i,r])}return e};Ro.prototype._init=function(e,t,n,i){if(e){if(!(e instanceof Array))throw Error("Dataset must be of type array, "+typeof e+" given");this.dataset=e,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}t&&(this.epsilon=t),n&&(this.minPts=n),i&&(this.distance=i)};Ro.prototype._updateQueue=function(e,t,n){var i=this;this._coreDistance=this._distanceToCore(e),t.forEach(function(r){if(i._processed[r]===void 0){var o=i.distance(i.dataset[e],i.dataset[r]),a=Math.max(i._coreDistance,o);i._reachability[r]===void 0?(i._reachability[r]=a,n.insert(r,a)):a<i._reachability[r]&&(i._reachability[r]=a,n.remove(r),n.insert(r,a))}})};Ro.prototype._expandCluster=function(e,t){for(var n=t.getElements(),i=0,r=n.length;i<r;i++){var o=n[i];if(this._processed[o]===void 0){var a=this._regionQuery(o);this._processed[o]=1,this.clusters[e].push(o),this._orderedList.push(o),this._distanceToCore(o)!==void 0&&(this._updateQueue(o,a,t),this._expandCluster(e,t))}}};Ro.prototype._distanceToCore=function(e){for(var t=this.epsilon,n=0;n<t;n++){var i=this._regionQuery(e,n);if(i.length>=this.minPts)return n}};Ro.prototype._regionQuery=function(e,t){t=t||this.epsilon;for(var n=[],i=0,r=this.dataset.length;i<r;i++)this.distance(this.dataset[e],this.dataset[i])<t&&n.push(i);return n};Ro.prototype._euclideanDistance=function(e,t){for(var n=0,i=Math.min(e.length,t.length);i--;)n+=(e[i]-t[i])*(e[i]-t[i]);return Math.sqrt(n)};typeof Ba<"u"&&Ba.exports&&(Ba.exports=Ro)});var gg=qe((IL,Nu)=>{typeof Nu<"u"&&Nu.exports&&(Nu.exports={DBSCAN:fg(),KMEANS:dg(),OPTICS:mg(),PriorityQueue:Yc()})});var Zc=qe((jL,vg)=>{"use strict";vg.exports={eudist:function(t,n,i){for(var r=t.length,o=0,a=0;a<r;a++){var s=(t[a]||0)-(n[a]||0);o+=s*s}return i?Math.sqrt(o):o},mandist:function(t,n,i){for(var r=t.length,o=0,a=0;a<r;a++)o+=Math.abs((t[a]||0)-(n[a]||0));return i?Math.sqrt(o):o},dist:function(t,n,i){var r=Math.abs(t-n);return i?r:r*r}}});var wg=qe((HL,_g)=>{"use strict";var bg=Zc(),u_=bg.eudist,h_=bg.dist;_g.exports={kmrand:function(t,n){for(var i={},r=[],o=n<<2,a=t.length,s=t[0].length>0;r.length<n&&o-- >0;){var u=t[Math.floor(Math.random()*a)],f=s?u.join("_"):""+u;i[f]||(i[f]=!0,r.push(u))}if(r.length<n)throw new Error("Error initializating clusters");return r},kmpp:function(t,n){var i=t[0].length?u_:h_,r=[],o=t.length,a=t[0].length>0,s={},u=t[Math.floor(Math.random()*o)],f=a?u.join("_"):""+u;for(r.push(u),s[f]=!0;r.length<n;){for(var c=[],d=r.length,m=0,v=[],p=0;p<o;p++){for(var _=1/0,y=0;y<d;y++){var x=i(t[p],r[y]);x<=_&&(_=x)}c[p]=_}for(var S=0;S<o;S++)m+=c[S];for(var O=0;O<o;O++)v[O]={i:O,v:t[O],pr:c[O]/m,cs:0};v.sort(function(q,G){return q.pr-G.pr}),v[0].cs=v[0].pr;for(var B=1;B<o;B++)v[B].cs=v[B-1].cs+v[B].pr;for(var U=Math.random(),z=0;z<o-1&&v[z++].cs<U;);r.push(v[z-1].v)}return r}}});var Sg=qe((VL,Mg)=>{"use strict";var Kc=Zc(),Cg=wg(),c_=Kc.eudist,GL=Kc.mandist,UL=Kc.dist,f_=Cg.kmrand,d_=Cg.kmpp,xg=1e4;function Eg(e,t,n){n=n||[];for(var i=0;i<e;i++)n[i]=t;return n}function p_(e,t,n,i){var r=[],o=[],a=[],s=[],u=!1,f=i||xg,c=e.length,d=e[0].length,m=d>0,v=[];if(n)n=="kmrand"?r=f_(e,t):n=="kmpp"?r=d_(e,t):r=n;else for(var p={};r.length<t;){var _=Math.floor(Math.random()*c);p[_]||(p[_]=!0,r.push(e[_]))}do{Eg(t,0,v);for(var y=0;y<c;y++){for(var x=1/0,S=0,O=0;O<t;O++){var s=m?c_(e[y],r[O]):Math.abs(e[y]-r[O]);s<=x&&(x=s,S=O)}a[y]=S,v[S]++}for(var B=[],o=[],U=0,z=0;z<t;z++)B[z]=m?Eg(d,0,B[z]):0,o[z]=r[z];if(m){for(var q=0;q<t;q++)r[q]=[];for(var G=0;G<c;G++)for(var tt=a[G],K=B[tt],D=e[G],N=0;N<d;N++)K[N]+=D[N];u=!0;for(var Z=0;Z<t;Z++){for(var w=r[Z],C=B[Z],k=o[Z],T=v[Z],R=0;R<d;R++)w[R]=C[R]/T||0;if(u){for(var F=0;F<d;F++)if(k[F]!=w[F]){u=!1;break}}}}else{for(var H=0;H<c;H++){var it=a[H];B[it]+=e[H]}for(var ot=0;ot<t;ot++)r[ot]=B[ot]/v[ot]||0;u=!0;for(var dt=0;dt<t;dt++)if(o[dt]!=r[dt]){u=!1;break}}u=u||--f<=0}while(!u);return{it:xg-f,k:t,idxs:a,centroids:r}}Mg.exports=p_});var Ga=qe((nf,sf)=>{(function(e,t){typeof nf=="object"&&typeof sf<"u"?sf.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self,e.polygonClipping=t())})(nf,function(){"use strict";function e(gt,ut){if(!(gt instanceof ut))throw new TypeError("Cannot call a class as a function")}function t(gt,ut){for(var Q=0;Q<ut.length;Q++){var Y=ut[Q];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(gt,Y.key,Y)}}function n(gt,ut,Q){return ut&&t(gt.prototype,ut),Q&&t(gt,Q),gt}var i=function(){function gt(ut,Q){this.next=null,this.key=ut,this.data=Q,this.left=null,this.right=null}return gt}();function r(gt,ut){return gt>ut?1:gt<ut?-1:0}function o(gt,ut,Q){for(var Y=new i(null,null),et=Y,lt=Y;;){var pt=Q(gt,ut.key);if(pt<0){if(ut.left===null)break;if(Q(gt,ut.left.key)<0){var bt=ut.left;if(ut.left=bt.right,bt.right=ut,ut=bt,ut.left===null)break}lt.left=ut,lt=ut,ut=ut.left}else if(pt>0){if(ut.right===null)break;if(Q(gt,ut.right.key)>0){var bt=ut.right;if(ut.right=bt.left,bt.left=ut,ut=bt,ut.right===null)break}et.right=ut,et=ut,ut=ut.right}else break}return et.right=ut.left,lt.left=ut.right,ut.left=Y.right,ut.right=Y.left,ut}function a(gt,ut,Q,Y){var et=new i(gt,ut);if(Q===null)return et.left=et.right=null,et;Q=o(gt,Q,Y);var lt=Y(gt,Q.key);return lt<0?(et.left=Q.left,et.right=Q,Q.left=null):lt>=0&&(et.right=Q.right,et.left=Q,Q.right=null),et}function s(gt,ut,Q){var Y=null,et=null;if(ut){ut=o(gt,ut,Q);var lt=Q(ut.key,gt);lt===0?(Y=ut.left,et=ut.right):lt<0?(et=ut.right,ut.right=null,Y=ut):(Y=ut.left,ut.left=null,et=ut)}return{left:Y,right:et}}function u(gt,ut,Q){return ut===null?gt:(gt===null||(ut=o(gt.key,ut,Q),ut.left=gt),ut)}function f(gt,ut,Q,Y,et){if(gt){Y(""+ut+(Q?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ")+et(gt)+`
`);var lt=ut+(Q?"    ":"\u2502   ");gt.left&&f(gt.left,lt,!1,Y,et),gt.right&&f(gt.right,lt,!0,Y,et)}}var c=function(){function gt(ut){ut===void 0&&(ut=r),this._root=null,this._size=0,this._comparator=ut}return gt.prototype.insert=function(ut,Q){return this._size++,this._root=a(ut,Q,this._root,this._comparator)},gt.prototype.add=function(ut,Q){var Y=new i(ut,Q);this._root===null&&(Y.left=Y.right=null,this._size++,this._root=Y);var et=this._comparator,lt=o(ut,this._root,et),pt=et(ut,lt.key);return pt===0?this._root=lt:(pt<0?(Y.left=lt.left,Y.right=lt,lt.left=null):pt>0&&(Y.right=lt.right,Y.left=lt,lt.right=null),this._size++,this._root=Y),this._root},gt.prototype.remove=function(ut){this._root=this._remove(ut,this._root,this._comparator)},gt.prototype._remove=function(ut,Q,Y){var et;if(Q===null)return null;Q=o(ut,Q,Y);var lt=Y(ut,Q.key);return lt===0?(Q.left===null?et=Q.right:(et=o(ut,Q.left,Y),et.right=Q.right),this._size--,et):Q},gt.prototype.pop=function(){var ut=this._root;if(ut){for(;ut.left;)ut=ut.left;return this._root=o(ut.key,this._root,this._comparator),this._root=this._remove(ut.key,this._root,this._comparator),{key:ut.key,data:ut.data}}return null},gt.prototype.findStatic=function(ut){for(var Q=this._root,Y=this._comparator;Q;){var et=Y(ut,Q.key);if(et===0)return Q;et<0?Q=Q.left:Q=Q.right}return null},gt.prototype.find=function(ut){return this._root&&(this._root=o(ut,this._root,this._comparator),this._comparator(ut,this._root.key)!==0)?null:this._root},gt.prototype.contains=function(ut){for(var Q=this._root,Y=this._comparator;Q;){var et=Y(ut,Q.key);if(et===0)return!0;et<0?Q=Q.left:Q=Q.right}return!1},gt.prototype.forEach=function(ut,Q){for(var Y=this._root,et=[],lt=!1;!lt;)Y!==null?(et.push(Y),Y=Y.left):et.length!==0?(Y=et.pop(),ut.call(Q,Y),Y=Y.right):lt=!0;return this},gt.prototype.range=function(ut,Q,Y,et){for(var lt=[],pt=this._comparator,bt=this._root,Et;lt.length!==0||bt;)if(bt)lt.push(bt),bt=bt.left;else{if(bt=lt.pop(),Et=pt(bt.key,Q),Et>0)break;if(pt(bt.key,ut)>=0&&Y.call(et,bt))return this;bt=bt.right}return this},gt.prototype.keys=function(){var ut=[];return this.forEach(function(Q){var Y=Q.key;return ut.push(Y)}),ut},gt.prototype.values=function(){var ut=[];return this.forEach(function(Q){var Y=Q.data;return ut.push(Y)}),ut},gt.prototype.min=function(){return this._root?this.minNode(this._root).key:null},gt.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},gt.prototype.minNode=function(ut){if(ut===void 0&&(ut=this._root),ut)for(;ut.left;)ut=ut.left;return ut},gt.prototype.maxNode=function(ut){if(ut===void 0&&(ut=this._root),ut)for(;ut.right;)ut=ut.right;return ut},gt.prototype.at=function(ut){for(var Q=this._root,Y=!1,et=0,lt=[];!Y;)if(Q)lt.push(Q),Q=Q.left;else if(lt.length>0){if(Q=lt.pop(),et===ut)return Q;et++,Q=Q.right}else Y=!0;return null},gt.prototype.next=function(ut){var Q=this._root,Y=null;if(ut.right){for(Y=ut.right;Y.left;)Y=Y.left;return Y}for(var et=this._comparator;Q;){var lt=et(ut.key,Q.key);if(lt===0)break;lt<0?(Y=Q,Q=Q.left):Q=Q.right}return Y},gt.prototype.prev=function(ut){var Q=this._root,Y=null;if(ut.left!==null){for(Y=ut.left;Y.right;)Y=Y.right;return Y}for(var et=this._comparator;Q;){var lt=et(ut.key,Q.key);if(lt===0)break;lt<0?Q=Q.left:(Y=Q,Q=Q.right)}return Y},gt.prototype.clear=function(){return this._root=null,this._size=0,this},gt.prototype.toList=function(){return v(this._root)},gt.prototype.load=function(ut,Q,Y){Q===void 0&&(Q=[]),Y===void 0&&(Y=!1);var et=ut.length,lt=this._comparator;if(Y&&y(ut,Q,0,et-1,lt),this._root===null)this._root=d(ut,Q,0,et),this._size=et;else{var pt=_(this.toList(),m(ut,Q),lt);et=this._size+et,this._root=p({head:pt},0,et)}return this},gt.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(gt.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(gt.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),gt.prototype.toString=function(ut){ut===void 0&&(ut=function(et){return String(et.key)});var Q=[];return f(this._root,"",!0,function(Y){return Q.push(Y)},ut),Q.join("")},gt.prototype.update=function(ut,Q,Y){var et=this._comparator,lt=s(ut,this._root,et),pt=lt.left,bt=lt.right;et(ut,Q)<0?bt=a(Q,Y,bt,et):pt=a(Q,Y,pt,et),this._root=u(pt,bt,et)},gt.prototype.split=function(ut){return s(ut,this._root,this._comparator)},gt}();function d(gt,ut,Q,Y){var et=Y-Q;if(et>0){var lt=Q+Math.floor(et/2),pt=gt[lt],bt=ut[lt],Et=new i(pt,bt);return Et.left=d(gt,ut,Q,lt),Et.right=d(gt,ut,lt+1,Y),Et}return null}function m(gt,ut){for(var Q=new i(null,null),Y=Q,et=0;et<gt.length;et++)Y=Y.next=new i(gt[et],ut[et]);return Y.next=null,Q.next}function v(gt){for(var ut=gt,Q=[],Y=!1,et=new i(null,null),lt=et;!Y;)ut?(Q.push(ut),ut=ut.left):Q.length>0?(ut=lt=lt.next=Q.pop(),ut=ut.right):Y=!0;return lt.next=null,et.next}function p(gt,ut,Q){var Y=Q-ut;if(Y>0){var et=ut+Math.floor(Y/2),lt=p(gt,ut,et),pt=gt.head;return pt.left=lt,gt.head=gt.head.next,pt.right=p(gt,et+1,Q),pt}return null}function _(gt,ut,Q){for(var Y=new i(null,null),et=Y,lt=gt,pt=ut;lt!==null&&pt!==null;)Q(lt.key,pt.key)<0?(et.next=lt,lt=lt.next):(et.next=pt,pt=pt.next),et=et.next;return lt!==null?et.next=lt:pt!==null&&(et.next=pt),Y.next}function y(gt,ut,Q,Y,et){if(!(Q>=Y)){for(var lt=gt[Q+Y>>1],pt=Q-1,bt=Y+1;;){do pt++;while(et(gt[pt],lt)<0);do bt--;while(et(gt[bt],lt)>0);if(pt>=bt)break;var Et=gt[pt];gt[pt]=gt[bt],gt[bt]=Et,Et=ut[pt],ut[pt]=ut[bt],ut[bt]=Et}y(gt,ut,Q,bt,et),y(gt,ut,bt+1,Y,et)}}var x=function(ut,Q){return ut.ll.x<=Q.x&&Q.x<=ut.ur.x&&ut.ll.y<=Q.y&&Q.y<=ut.ur.y},S=function(ut,Q){if(Q.ur.x<ut.ll.x||ut.ur.x<Q.ll.x||Q.ur.y<ut.ll.y||ut.ur.y<Q.ll.y)return null;var Y=ut.ll.x<Q.ll.x?Q.ll.x:ut.ll.x,et=ut.ur.x<Q.ur.x?ut.ur.x:Q.ur.x,lt=ut.ll.y<Q.ll.y?Q.ll.y:ut.ll.y,pt=ut.ur.y<Q.ur.y?ut.ur.y:Q.ur.y;return{ll:{x:Y,y:lt},ur:{x:et,y:pt}}},O=Number.EPSILON;O===void 0&&(O=Math.pow(2,-52));var B=O*O,U=function(ut,Q){if(-O<ut&&ut<O&&-O<Q&&Q<O)return 0;var Y=ut-Q;return Y*Y<B*ut*Q?0:ut<Q?-1:1},z=function(){function gt(){e(this,gt),this.reset()}return n(gt,[{key:"reset",value:function(){this.xRounder=new q,this.yRounder=new q}},{key:"round",value:function(Q,Y){return{x:this.xRounder.round(Q),y:this.yRounder.round(Y)}}}]),gt}(),q=function(){function gt(){e(this,gt),this.tree=new c,this.round(0)}return n(gt,[{key:"round",value:function(Q){var Y=this.tree.add(Q),et=this.tree.prev(Y);if(et!==null&&U(Y.key,et.key)===0)return this.tree.remove(Q),et.key;var lt=this.tree.next(Y);return lt!==null&&U(Y.key,lt.key)===0?(this.tree.remove(Q),lt.key):Q}}]),gt}(),G=new z,tt=function(ut,Q){return ut.x*Q.y-ut.y*Q.x},K=function(ut,Q){return ut.x*Q.x+ut.y*Q.y},D=function(ut,Q,Y){var et={x:Q.x-ut.x,y:Q.y-ut.y},lt={x:Y.x-ut.x,y:Y.y-ut.y},pt=tt(et,lt);return U(pt,0)},N=function(ut){return Math.sqrt(K(ut,ut))},Z=function(ut,Q,Y){var et={x:Q.x-ut.x,y:Q.y-ut.y},lt={x:Y.x-ut.x,y:Y.y-ut.y};return tt(lt,et)/N(lt)/N(et)},w=function(ut,Q,Y){var et={x:Q.x-ut.x,y:Q.y-ut.y},lt={x:Y.x-ut.x,y:Y.y-ut.y};return K(lt,et)/N(lt)/N(et)},C=function(ut,Q,Y){return Q.y===0?null:{x:ut.x+Q.x/Q.y*(Y-ut.y),y:Y}},k=function(ut,Q,Y){return Q.x===0?null:{x:Y,y:ut.y+Q.y/Q.x*(Y-ut.x)}},T=function(ut,Q,Y,et){if(Q.x===0)return k(Y,et,ut.x);if(et.x===0)return k(ut,Q,Y.x);if(Q.y===0)return C(Y,et,ut.y);if(et.y===0)return C(ut,Q,Y.y);var lt=tt(Q,et);if(lt==0)return null;var pt={x:Y.x-ut.x,y:Y.y-ut.y},bt=tt(pt,Q)/lt,Et=tt(pt,et)/lt,Ot=ut.x+Et*Q.x,zt=Y.x+bt*et.x,Gt=ut.y+Et*Q.y,Jt=Y.y+bt*et.y,Kt=(Ot+zt)/2,ie=(Gt+Jt)/2;return{x:Kt,y:ie}},R=function(){n(gt,null,[{key:"compare",value:function(Q,Y){var et=gt.comparePoints(Q.point,Y.point);return et!==0?et:(Q.point!==Y.point&&Q.link(Y),Q.isLeft!==Y.isLeft?Q.isLeft?1:-1:H.compare(Q.segment,Y.segment))}},{key:"comparePoints",value:function(Q,Y){return Q.x<Y.x?-1:Q.x>Y.x?1:Q.y<Y.y?-1:Q.y>Y.y?1:0}}]);function gt(ut,Q){e(this,gt),ut.events===void 0?ut.events=[this]:ut.events.push(this),this.point=ut,this.isLeft=Q}return n(gt,[{key:"link",value:function(Q){if(Q.point===this.point)throw new Error("Tried to link already linked events");for(var Y=Q.point.events,et=0,lt=Y.length;et<lt;et++){var pt=Y[et];this.point.events.push(pt),pt.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var Q=this.point.events.length,Y=0;Y<Q;Y++){var et=this.point.events[Y];if(et.segment.consumedBy===void 0)for(var lt=Y+1;lt<Q;lt++){var pt=this.point.events[lt];pt.consumedBy===void 0&&et.otherSE.point.events===pt.otherSE.point.events&&et.segment.consume(pt.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var Q=[],Y=0,et=this.point.events.length;Y<et;Y++){var lt=this.point.events[Y];lt!==this&&!lt.segment.ringOut&&lt.segment.isInResult()&&Q.push(lt)}return Q}},{key:"getLeftmostComparator",value:function(Q){var Y=this,et=new Map,lt=function(bt){var Et=bt.otherSE;et.set(bt,{sine:Z(Y.point,Q.point,Et.point),cosine:w(Y.point,Q.point,Et.point)})};return function(pt,bt){et.has(pt)||lt(pt),et.has(bt)||lt(bt);var Et=et.get(pt),Ot=Et.sine,zt=Et.cosine,Gt=et.get(bt),Jt=Gt.sine,Kt=Gt.cosine;return Ot>=0&&Jt>=0?zt<Kt?1:zt>Kt?-1:0:Ot<0&&Jt<0?zt<Kt?-1:zt>Kt?1:0:Jt<Ot?-1:Jt>Ot?1:0}}}]),gt}(),F=0,H=function(){n(gt,null,[{key:"compare",value:function(Q,Y){var et=Q.leftSE.point.x,lt=Y.leftSE.point.x,pt=Q.rightSE.point.x,bt=Y.rightSE.point.x;if(bt<et)return 1;if(pt<lt)return-1;var Et=Q.leftSE.point.y,Ot=Y.leftSE.point.y,zt=Q.rightSE.point.y,Gt=Y.rightSE.point.y;if(et<lt){if(Ot<Et&&Ot<zt)return 1;if(Ot>Et&&Ot>zt)return-1;var Jt=Q.comparePoint(Y.leftSE.point);if(Jt<0)return 1;if(Jt>0)return-1;var Kt=Y.comparePoint(Q.rightSE.point);return Kt!==0?Kt:-1}if(et>lt){if(Et<Ot&&Et<Gt)return-1;if(Et>Ot&&Et>Gt)return 1;var ie=Y.comparePoint(Q.leftSE.point);if(ie!==0)return ie;var Xt=Q.comparePoint(Y.rightSE.point);return Xt<0?1:Xt>0?-1:1}if(Et<Ot)return-1;if(Et>Ot)return 1;if(pt<bt){var Ut=Y.comparePoint(Q.rightSE.point);if(Ut!==0)return Ut}if(pt>bt){var _e=Q.comparePoint(Y.rightSE.point);if(_e<0)return 1;if(_e>0)return-1}if(pt!==bt){var le=zt-Et,ye=pt-et,Ze=Gt-Ot,ce=bt-lt;if(le>ye&&Ze<ce)return 1;if(le<ye&&Ze>ce)return-1}return pt>bt?1:pt<bt||zt<Gt?-1:zt>Gt?1:Q.id<Y.id?-1:Q.id>Y.id?1:0}}]);function gt(ut,Q,Y,et){e(this,gt),this.id=++F,this.leftSE=ut,ut.segment=this,ut.otherSE=Q,this.rightSE=Q,Q.segment=this,Q.otherSE=ut,this.rings=Y,this.windings=et}return n(gt,[{key:"replaceRightSE",value:function(Q){this.rightSE=Q,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var Q=this.leftSE.point.y,Y=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:Q<Y?Q:Y},ur:{x:this.rightSE.point.x,y:Q>Y?Q:Y}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(Q){return Q.x===this.leftSE.point.x&&Q.y===this.leftSE.point.y||Q.x===this.rightSE.point.x&&Q.y===this.rightSE.point.y}},{key:"comparePoint",value:function(Q){if(this.isAnEndpoint(Q))return 0;var Y=this.leftSE.point,et=this.rightSE.point,lt=this.vector();if(Y.x===et.x)return Q.x===Y.x?0:Q.x<Y.x?1:-1;var pt=(Q.y-Y.y)/lt.y,bt=Y.x+pt*lt.x;if(Q.x===bt)return 0;var Et=(Q.x-Y.x)/lt.x,Ot=Y.y+Et*lt.y;return Q.y===Ot?0:Q.y<Ot?-1:1}},{key:"getIntersection",value:function(Q){var Y=this.bbox(),et=Q.bbox(),lt=S(Y,et);if(lt===null)return null;var pt=this.leftSE.point,bt=this.rightSE.point,Et=Q.leftSE.point,Ot=Q.rightSE.point,zt=x(Y,Et)&&this.comparePoint(Et)===0,Gt=x(et,pt)&&Q.comparePoint(pt)===0,Jt=x(Y,Ot)&&this.comparePoint(Ot)===0,Kt=x(et,bt)&&Q.comparePoint(bt)===0;if(Gt&&zt)return Kt&&!Jt?bt:!Kt&&Jt?Ot:null;if(Gt)return Jt&&pt.x===Ot.x&&pt.y===Ot.y?null:pt;if(zt)return Kt&&bt.x===Et.x&&bt.y===Et.y?null:Et;if(Kt&&Jt)return null;if(Kt)return bt;if(Jt)return Ot;var ie=T(pt,this.vector(),Et,Q.vector());return ie===null||!x(lt,ie)?null:G.round(ie.x,ie.y)}},{key:"split",value:function(Q){var Y=[],et=Q.events!==void 0,lt=new R(Q,!0),pt=new R(Q,!1),bt=this.rightSE;this.replaceRightSE(pt),Y.push(pt),Y.push(lt);var Et=new gt(lt,bt,this.rings.slice(),this.windings.slice());return R.comparePoints(Et.leftSE.point,Et.rightSE.point)>0&&Et.swapEvents(),R.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),et&&(lt.checkForConsuming(),pt.checkForConsuming()),Y}},{key:"swapEvents",value:function(){var Q=this.rightSE;this.rightSE=this.leftSE,this.leftSE=Q,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var Y=0,et=this.windings.length;Y<et;Y++)this.windings[Y]*=-1}},{key:"consume",value:function(Q){for(var Y=this,et=Q;Y.consumedBy;)Y=Y.consumedBy;for(;et.consumedBy;)et=et.consumedBy;var lt=gt.compare(Y,et);if(lt!==0){if(lt>0){var pt=Y;Y=et,et=pt}if(Y.prev===et){var bt=Y;Y=et,et=bt}for(var Et=0,Ot=et.rings.length;Et<Ot;Et++){var zt=et.rings[Et],Gt=et.windings[Et],Jt=Y.rings.indexOf(zt);Jt===-1?(Y.rings.push(zt),Y.windings.push(Gt)):Y.windings[Jt]+=Gt}et.rings=null,et.windings=null,et.consumedBy=Y,et.leftSE.consumedBy=Y.leftSE,et.rightSE.consumedBy=Y.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var Q=this.prev.consumedBy||this.prev;this._beforeState=Q.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var Q=this.beforeState();this._afterState={rings:Q.rings.slice(0),windings:Q.windings.slice(0),multiPolys:[]};for(var Y=this._afterState.rings,et=this._afterState.windings,lt=this._afterState.multiPolys,pt=0,bt=this.rings.length;pt<bt;pt++){var Et=this.rings[pt],Ot=this.windings[pt],zt=Y.indexOf(Et);zt===-1?(Y.push(Et),et.push(Ot)):et[zt]+=Ot}for(var Gt=[],Jt=[],Kt=0,ie=Y.length;Kt<ie;Kt++)if(et[Kt]!==0){var Xt=Y[Kt],Ut=Xt.poly;if(Jt.indexOf(Ut)===-1)if(Xt.isExterior)Gt.push(Ut);else{Jt.indexOf(Ut)===-1&&Jt.push(Ut);var _e=Gt.indexOf(Xt.poly);_e!==-1&&Gt.splice(_e,1)}}for(var le=0,ye=Gt.length;le<ye;le++){var Ze=Gt[le].multiPoly;lt.indexOf(Ze)===-1&&lt.push(Ze)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var Q=this.beforeState().multiPolys,Y=this.afterState().multiPolys;switch(_t.type){case"union":{var et=Q.length===0,lt=Y.length===0;this._isInResult=et!==lt;break}case"intersection":{var pt,bt;Q.length<Y.length?(pt=Q.length,bt=Y.length):(pt=Y.length,bt=Q.length),this._isInResult=bt===_t.numMultiPolys&&pt<bt;break}case"xor":{var Et=Math.abs(Q.length-Y.length);this._isInResult=Et%2===1;break}case"difference":{var Ot=function(Gt){return Gt.length===1&&Gt[0].isSubject};this._isInResult=Ot(Q)!==Ot(Y);break}default:throw new Error("Unrecognized operation type found ".concat(_t.type))}return this._isInResult}}],[{key:"fromRing",value:function(Q,Y,et){var lt,pt,bt,Et=R.comparePoints(Q,Y);if(Et<0)lt=Q,pt=Y,bt=1;else if(Et>0)lt=Y,pt=Q,bt=-1;else throw new Error("Tried to create degenerate segment at [".concat(Q.x,", ").concat(Q.y,"]"));var Ot=new R(lt,!0),zt=new R(pt,!1);return new gt(Ot,zt,[et],[bt])}}]),gt}(),it=function(){function gt(ut,Q,Y){if(e(this,gt),!Array.isArray(ut)||ut.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=Q,this.isExterior=Y,this.segments=[],typeof ut[0][0]!="number"||typeof ut[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var et=G.round(ut[0][0],ut[0][1]);this.bbox={ll:{x:et.x,y:et.y},ur:{x:et.x,y:et.y}};for(var lt=et,pt=1,bt=ut.length;pt<bt;pt++){if(typeof ut[pt][0]!="number"||typeof ut[pt][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var Et=G.round(ut[pt][0],ut[pt][1]);Et.x===lt.x&&Et.y===lt.y||(this.segments.push(H.fromRing(lt,Et,this)),Et.x<this.bbox.ll.x&&(this.bbox.ll.x=Et.x),Et.y<this.bbox.ll.y&&(this.bbox.ll.y=Et.y),Et.x>this.bbox.ur.x&&(this.bbox.ur.x=Et.x),Et.y>this.bbox.ur.y&&(this.bbox.ur.y=Et.y),lt=Et)}(et.x!==lt.x||et.y!==lt.y)&&this.segments.push(H.fromRing(lt,et,this))}return n(gt,[{key:"getSweepEvents",value:function(){for(var Q=[],Y=0,et=this.segments.length;Y<et;Y++){var lt=this.segments[Y];Q.push(lt.leftSE),Q.push(lt.rightSE)}return Q}}]),gt}(),ot=function(){function gt(ut,Q){if(e(this,gt),!Array.isArray(ut))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new it(ut[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var Y=1,et=ut.length;Y<et;Y++){var lt=new it(ut[Y],this,!1);lt.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=lt.bbox.ll.x),lt.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=lt.bbox.ll.y),lt.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=lt.bbox.ur.x),lt.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=lt.bbox.ur.y),this.interiorRings.push(lt)}this.multiPoly=Q}return n(gt,[{key:"getSweepEvents",value:function(){for(var Q=this.exteriorRing.getSweepEvents(),Y=0,et=this.interiorRings.length;Y<et;Y++)for(var lt=this.interiorRings[Y].getSweepEvents(),pt=0,bt=lt.length;pt<bt;pt++)Q.push(lt[pt]);return Q}}]),gt}(),dt=function(){function gt(ut,Q){if(e(this,gt),!Array.isArray(ut))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof ut[0][0][0]=="number"&&(ut=[ut])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var Y=0,et=ut.length;Y<et;Y++){var lt=new ot(ut[Y],this);lt.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=lt.bbox.ll.x),lt.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=lt.bbox.ll.y),lt.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=lt.bbox.ur.x),lt.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=lt.bbox.ur.y),this.polys.push(lt)}this.isSubject=Q}return n(gt,[{key:"getSweepEvents",value:function(){for(var Q=[],Y=0,et=this.polys.length;Y<et;Y++)for(var lt=this.polys[Y].getSweepEvents(),pt=0,bt=lt.length;pt<bt;pt++)Q.push(lt[pt]);return Q}}]),gt}(),$=function(){n(gt,null,[{key:"factory",value:function(Q){for(var Y=[],et=0,lt=Q.length;et<lt;et++){var pt=Q[et];if(!(!pt.isInResult()||pt.ringOut)){for(var bt=null,Et=pt.leftSE,Ot=pt.rightSE,zt=[Et],Gt=Et.point,Jt=[];bt=Et,Et=Ot,zt.push(Et),Et.point!==Gt;)for(;;){var Kt=Et.getAvailableLinkedEvents();if(Kt.length===0){var ie=zt[0].point,Xt=zt[zt.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(ie.x,",")+" ".concat(ie.y,"]. Last matching segment found ends at")+" [".concat(Xt.x,", ").concat(Xt.y,"]."))}if(Kt.length===1){Ot=Kt[0].otherSE;break}for(var Ut=null,_e=0,le=Jt.length;_e<le;_e++)if(Jt[_e].point===Et.point){Ut=_e;break}if(Ut!==null){var ye=Jt.splice(Ut)[0],Ze=zt.splice(ye.index);Ze.unshift(Ze[0].otherSE),Y.push(new gt(Ze.reverse()));continue}Jt.push({index:zt.length,point:Et.point});var ce=Et.getLeftmostComparator(bt);Ot=Kt.sort(ce)[0].otherSE;break}Y.push(new gt(zt))}}return Y}}]);function gt(ut){e(this,gt),this.events=ut;for(var Q=0,Y=ut.length;Q<Y;Q++)ut[Q].segment.ringOut=this;this.poly=null}return n(gt,[{key:"getGeom",value:function(){for(var Q=this.events[0].point,Y=[Q],et=1,lt=this.events.length-1;et<lt;et++){var pt=this.events[et].point,bt=this.events[et+1].point;D(pt,Q,bt)!==0&&(Y.push(pt),Q=pt)}if(Y.length===1)return null;var Et=Y[0],Ot=Y[1];D(Et,Q,Ot)===0&&Y.shift(),Y.push(Y[0]);for(var zt=this.isExteriorRing()?1:-1,Gt=this.isExteriorRing()?0:Y.length-1,Jt=this.isExteriorRing()?Y.length:-1,Kt=[],ie=Gt;ie!=Jt;ie+=zt)Kt.push([Y[ie].x,Y[ie].y]);return Kt}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var Q=this.enclosingRing();this._isExteriorRing=Q?!Q.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var Q=this.events[0],Y=1,et=this.events.length;Y<et;Y++){var lt=this.events[Y];R.compare(Q,lt)>0&&(Q=lt)}for(var pt=Q.segment.prevInResult(),bt=pt?pt.prevInResult():null;;){if(!pt)return null;if(!bt)return pt.ringOut;if(bt.ringOut!==pt.ringOut)return bt.ringOut.enclosingRing()!==pt.ringOut?pt.ringOut:pt.ringOut.enclosingRing();pt=bt.prevInResult(),bt=pt?pt.prevInResult():null}}}]),gt}(),ct=function(){function gt(ut){e(this,gt),this.exteriorRing=ut,ut.poly=this,this.interiorRings=[]}return n(gt,[{key:"addInterior",value:function(Q){this.interiorRings.push(Q),Q.poly=this}},{key:"getGeom",value:function(){var Q=[this.exteriorRing.getGeom()];if(Q[0]===null)return null;for(var Y=0,et=this.interiorRings.length;Y<et;Y++){var lt=this.interiorRings[Y].getGeom();lt!==null&&Q.push(lt)}return Q}}]),gt}(),W=function(){function gt(ut){e(this,gt),this.rings=ut,this.polys=this._composePolys(ut)}return n(gt,[{key:"getGeom",value:function(){for(var Q=[],Y=0,et=this.polys.length;Y<et;Y++){var lt=this.polys[Y].getGeom();lt!==null&&Q.push(lt)}return Q}},{key:"_composePolys",value:function(Q){for(var Y=[],et=0,lt=Q.length;et<lt;et++){var pt=Q[et];if(!pt.poly)if(pt.isExteriorRing())Y.push(new ct(pt));else{var bt=pt.enclosingRing();bt.poly||Y.push(new ct(bt)),bt.poly.addInterior(pt)}}return Y}}]),gt}(),V=function(){function gt(ut){var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:H.compare;e(this,gt),this.queue=ut,this.tree=new c(Q),this.segments=[]}return n(gt,[{key:"process",value:function(Q){var Y=Q.segment,et=[];if(Q.consumedBy)return Q.isLeft?this.queue.remove(Q.otherSE):this.tree.remove(Y),et;var lt=Q.isLeft?this.tree.insert(Y):this.tree.find(Y);if(!lt)throw new Error("Unable to find segment #".concat(Y.id," ")+"[".concat(Y.leftSE.point.x,", ").concat(Y.leftSE.point.y,"] -> ")+"[".concat(Y.rightSE.point.x,", ").concat(Y.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var pt=lt,bt=lt,Et=void 0,Ot=void 0;Et===void 0;)pt=this.tree.prev(pt),pt===null?Et=null:pt.key.consumedBy===void 0&&(Et=pt.key);for(;Ot===void 0;)bt=this.tree.next(bt),bt===null?Ot=null:bt.key.consumedBy===void 0&&(Ot=bt.key);if(Q.isLeft){var zt=null;if(Et){var Gt=Et.getIntersection(Y);if(Gt!==null&&(Y.isAnEndpoint(Gt)||(zt=Gt),!Et.isAnEndpoint(Gt)))for(var Jt=this._splitSafely(Et,Gt),Kt=0,ie=Jt.length;Kt<ie;Kt++)et.push(Jt[Kt])}var Xt=null;if(Ot){var Ut=Ot.getIntersection(Y);if(Ut!==null&&(Y.isAnEndpoint(Ut)||(Xt=Ut),!Ot.isAnEndpoint(Ut)))for(var _e=this._splitSafely(Ot,Ut),le=0,ye=_e.length;le<ye;le++)et.push(_e[le])}if(zt!==null||Xt!==null){var Ze=null;if(zt===null)Ze=Xt;else if(Xt===null)Ze=zt;else{var ce=R.comparePoints(zt,Xt);Ze=ce<=0?zt:Xt}this.queue.remove(Y.rightSE),et.push(Y.rightSE);for(var ke=Y.split(Ze),He=0,$t=ke.length;He<$t;He++)et.push(ke[He])}et.length>0?(this.tree.remove(Y),et.push(Q)):(this.segments.push(Y),Y.prev=Et)}else{if(Et&&Ot){var Te=Et.getIntersection(Ot);if(Te!==null){if(!Et.isAnEndpoint(Te))for(var bi=this._splitSafely(Et,Te),ue=0,Fe=bi.length;ue<Fe;ue++)et.push(bi[ue]);if(!Ot.isAnEndpoint(Te))for(var ai=this._splitSafely(Ot,Te),Le=0,Oe=ai.length;Le<Oe;Le++)et.push(ai[Le])}}this.tree.remove(Y)}return et}},{key:"_splitSafely",value:function(Q,Y){this.tree.remove(Q);var et=Q.rightSE;this.queue.remove(et);var lt=Q.split(Y);return lt.push(et),Q.consumedBy===void 0&&this.tree.insert(Q),lt}}]),gt}(),rt=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,mt=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,wt=function(){function gt(){e(this,gt)}return n(gt,[{key:"run",value:function(Q,Y,et){_t.type=Q,G.reset();for(var lt=[new dt(Y,!0)],pt=0,bt=et.length;pt<bt;pt++)lt.push(new dt(et[pt],!1));if(_t.numMultiPolys=lt.length,_t.type==="difference")for(var Et=lt[0],Ot=1;Ot<lt.length;)S(lt[Ot].bbox,Et.bbox)!==null?Ot++:lt.splice(Ot,1);if(_t.type==="intersection"){for(var zt=0,Gt=lt.length;zt<Gt;zt++)for(var Jt=lt[zt],Kt=zt+1,ie=lt.length;Kt<ie;Kt++)if(S(Jt.bbox,lt[Kt].bbox)===null)return[]}for(var Xt=new c(R.compare),Ut=0,_e=lt.length;Ut<_e;Ut++)for(var le=lt[Ut].getSweepEvents(),ye=0,Ze=le.length;ye<Ze;ye++)if(Xt.insert(le[ye]),Xt.size>rt)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var ce=new V(Xt),ke=Xt.size,He=Xt.pop();He;){var $t=He.key;if(Xt.size===ke){var Te=$t.segment;throw new Error("Unable to pop() ".concat($t.isLeft?"left":"right"," SweepEvent ")+"[".concat($t.point.x,", ").concat($t.point.y,"] from segment #").concat(Te.id," ")+"[".concat(Te.leftSE.point.x,", ").concat(Te.leftSE.point.y,"] -> ")+"[".concat(Te.rightSE.point.x,", ").concat(Te.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(Xt.size>rt)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(ce.segments.length>mt)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var bi=ce.process($t),ue=0,Fe=bi.length;ue<Fe;ue++){var ai=bi[ue];ai.consumedBy===void 0&&Xt.insert(ai)}ke=Xt.size,He=Xt.pop()}G.reset();var Le=$.factory(ce.segments),Oe=new W(Le);return Oe.getGeom()}}]),gt}(),_t=new wt,Ct=function(ut){for(var Q=arguments.length,Y=new Array(Q>1?Q-1:0),et=1;et<Q;et++)Y[et-1]=arguments[et];return _t.run("union",ut,Y)},Ft=function(ut){for(var Q=arguments.length,Y=new Array(Q>1?Q-1:0),et=1;et<Q;et++)Y[et-1]=arguments[et];return _t.run("intersection",ut,Y)},It=function(ut){for(var Q=arguments.length,Y=new Array(Q>1?Q-1:0),et=1;et<Q;et++)Y[et-1]=arguments[et];return _t.run("xor",ut,Y)},vt=function(ut){for(var Q=arguments.length,Y=new Array(Q>1?Q-1:0),et=1;et<Q;et++)Y[et-1]=arguments[et];return _t.run("difference",ut,Y)},kt={union:Ct,intersection:Ft,xor:It,difference:vt};return kt})});var qg=qe((zu,Vg)=>{(function(e,t){typeof zu=="object"&&typeof Vg<"u"?t(zu):typeof define=="function"&&define.amd?define(["exports"],t):t(e.jsts={})})(zu,function(e){"use strict";function t(){}function n(l){this.message=l||""}function i(l){this.message=l||""}function r(l){this.message=l||""}function o(){}function a(l){return l===null?qt:l.color}function s(l){return l===null?null:l.parent}function u(l,h){l!==null&&(l.color=h)}function f(l){return l===null?null:l.left}function c(l){return l===null?null:l.right}function d(){this.root_=null,this.size_=0}function m(){}function v(){this.array_=[],arguments[0]instanceof ce&&this.addAll(arguments[0])}function p(){}function _(l){this.message=l||""}function y(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(l){if(this===void 0||this===null)throw new TypeError(this+" is not an object");var h=Object(this),b=Math.max(Math.min(h.length,9007199254740991),0)||0,E=1 in arguments&&parseInt(Number(arguments[1]),10)||0;E=E<0?Math.max(b+E,0):Math.min(E,b);var I=2 in arguments&&arguments[2]!==void 0?parseInt(Number(arguments[2]),10)||0:b;for(I=I<0?Math.max(b+arguments[2],0):Math.min(I,b);E<I;)h[E]=l,++E;return h},writable:!0}),Number.isFinite=Number.isFinite||function(l){return typeof l=="number"&&isFinite(l)},Number.isInteger=Number.isInteger||function(l){return typeof l=="number"&&isFinite(l)&&Math.floor(l)===l},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(l){return l!=l},Math.trunc=Math.trunc||function(l){return l<0?Math.ceil(l):Math.floor(l)};var x=function(){};x.prototype.interfaces_=function(){return[]},x.prototype.getClass=function(){return x},x.prototype.equalsWithTolerance=function(l,h,b){return Math.abs(l-h)<=b};var S=function(l){function h(b){l.call(this,b),this.name="IllegalArgumentException",this.message=b,this.stack=new l().stack}return l&&(h.__proto__=l),h.prototype=Object.create(l&&l.prototype),h.prototype.constructor=h,h}(Error),O=function(){},B={MAX_VALUE:{configurable:!0}};O.isNaN=function(l){return Number.isNaN(l)},O.doubleToLongBits=function(l){return l},O.longBitsToDouble=function(l){return l},O.isInfinite=function(l){return!Number.isFinite(l)},B.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(O,B);var U=function(){},z=function(){},q=function(){},G=function l(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)this.x=0,this.y=0,this.z=l.NULL_ORDINATE;else if(arguments.length===1){var h=arguments[0];this.x=h.x,this.y=h.y,this.z=h.z}else arguments.length===2?(this.x=arguments[0],this.y=arguments[1],this.z=l.NULL_ORDINATE):arguments.length===3&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},tt={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};G.prototype.setOrdinate=function(l,h){switch(l){case G.X:this.x=h;break;case G.Y:this.y=h;break;case G.Z:this.z=h;break;default:throw new S("Invalid ordinate index: "+l)}},G.prototype.equals2D=function(){if(arguments.length===1){var l=arguments[0];return this.x===l.x&&this.y===l.y}if(arguments.length===2){var h=arguments[0],b=arguments[1];return!!x.equalsWithTolerance(this.x,h.x,b)&&!!x.equalsWithTolerance(this.y,h.y,b)}},G.prototype.getOrdinate=function(l){switch(l){case G.X:return this.x;case G.Y:return this.y;case G.Z:return this.z}throw new S("Invalid ordinate index: "+l)},G.prototype.equals3D=function(l){return this.x===l.x&&this.y===l.y&&(this.z===l.z||O.isNaN(this.z))&&O.isNaN(l.z)},G.prototype.equals=function(l){return l instanceof G&&this.equals2D(l)},G.prototype.equalInZ=function(l,h){return x.equalsWithTolerance(this.z,l.z,h)},G.prototype.compareTo=function(l){var h=l;return this.x<h.x?-1:this.x>h.x?1:this.y<h.y?-1:this.y>h.y?1:0},G.prototype.clone=function(){},G.prototype.copy=function(){return new G(this)},G.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},G.prototype.distance3D=function(l){var h=this.x-l.x,b=this.y-l.y,E=this.z-l.z;return Math.sqrt(h*h+b*b+E*E)},G.prototype.distance=function(l){var h=this.x-l.x,b=this.y-l.y;return Math.sqrt(h*h+b*b)},G.prototype.hashCode=function(){var l=17;return l=37*l+G.hashCode(this.x),l=37*l+G.hashCode(this.y)},G.prototype.setCoordinate=function(l){this.x=l.x,this.y=l.y,this.z=l.z},G.prototype.interfaces_=function(){return[U,z,t]},G.prototype.getClass=function(){return G},G.hashCode=function(){if(arguments.length===1){var l=arguments[0],h=O.doubleToLongBits(l);return Math.trunc((h^h)>>>32)}},tt.DimensionalComparator.get=function(){return K},tt.serialVersionUID.get=function(){return 6683108902428367e3},tt.NULL_ORDINATE.get=function(){return O.NaN},tt.X.get=function(){return 0},tt.Y.get=function(){return 1},tt.Z.get=function(){return 2},Object.defineProperties(G,tt);var K=function(l){if(this._dimensionsToTest=2,arguments.length!==0){if(arguments.length===1){var h=arguments[0];if(h!==2&&h!==3)throw new S("only 2 or 3 dimensions may be specified");this._dimensionsToTest=h}}};K.prototype.compare=function(l,h){var b=l,E=h,I=K.compare(b.x,E.x);if(I!==0)return I;var J=K.compare(b.y,E.y);return J!==0?J:this._dimensionsToTest<=2?0:K.compare(b.z,E.z)},K.prototype.interfaces_=function(){return[q]},K.prototype.getClass=function(){return K},K.compare=function(l,h){return l<h?-1:l>h?1:O.isNaN(l)?O.isNaN(h)?0:-1:O.isNaN(h)?1:0};var D=function(){};D.prototype.create=function(){},D.prototype.interfaces_=function(){return[]},D.prototype.getClass=function(){return D};var N=function(){},Z={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};N.prototype.interfaces_=function(){return[]},N.prototype.getClass=function(){return N},N.toLocationSymbol=function(l){switch(l){case N.EXTERIOR:return"e";case N.BOUNDARY:return"b";case N.INTERIOR:return"i";case N.NONE:return"-"}throw new S("Unknown location value: "+l)},Z.INTERIOR.get=function(){return 0},Z.BOUNDARY.get=function(){return 1},Z.EXTERIOR.get=function(){return 2},Z.NONE.get=function(){return-1},Object.defineProperties(N,Z);var w=function(l,h){return l.interfaces_&&l.interfaces_().indexOf(h)>-1},C=function(){},k={LOG_10:{configurable:!0}};C.prototype.interfaces_=function(){return[]},C.prototype.getClass=function(){return C},C.log10=function(l){var h=Math.log(l);return O.isInfinite(h)||O.isNaN(h)?h:h/C.LOG_10},C.min=function(l,h,b,E){var I=l;return h<I&&(I=h),b<I&&(I=b),E<I&&(I=E),I},C.clamp=function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var l=arguments[0],h=arguments[1],b=arguments[2];return l<h?h:l>b?b:l}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var E=arguments[0],I=arguments[1],J=arguments[2];return E<I?I:E>J?J:E}},C.wrap=function(l,h){return l<0?h- -l%h:l%h},C.max=function(){if(arguments.length===3){var l=arguments[0],h=arguments[1],b=arguments[2],E=l;return h>E&&(E=h),b>E&&(E=b),E}if(arguments.length===4){var I=arguments[0],J=arguments[1],at=arguments[2],yt=arguments[3],St=I;return J>St&&(St=J),at>St&&(St=at),yt>St&&(St=yt),St}},C.average=function(l,h){return(l+h)/2},k.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(C,k);var T=function(l){this.str=l};T.prototype.append=function(l){this.str+=l},T.prototype.setCharAt=function(l,h){this.str=this.str.substr(0,l)+h+this.str.substr(l+1)},T.prototype.toString=function(l){return this.str};var R=function(l){this.value=l};R.prototype.intValue=function(){return this.value},R.prototype.compareTo=function(l){return this.value<l?-1:this.value>l?1:0},R.isNaN=function(l){return Number.isNaN(l)};var F=function(){};F.isWhitespace=function(l){return l<=32&&l>=0||l===127},F.toUpperCase=function(l){return l.toUpperCase()};var H=function l(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var h=arguments[0];this.init(h)}else if(arguments[0]instanceof l){var b=arguments[0];this.init(b)}else if(typeof arguments[0]=="string"){var E=arguments[0];l.call(this,l.parse(E))}}else if(arguments.length===2){var I=arguments[0],J=arguments[1];this.init(I,J)}},it={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};H.prototype.le=function(l){return(this._hi<l._hi||this._hi===l._hi)&&this._lo<=l._lo},H.prototype.extractSignificantDigits=function(l,h){var b=this.abs(),E=H.magnitude(b._hi),I=H.TEN.pow(E);(b=b.divide(I)).gt(H.TEN)?(b=b.divide(H.TEN),E+=1):b.lt(H.ONE)&&(b=b.multiply(H.TEN),E-=1);for(var J=E+1,at=new T,yt=H.MAX_PRINT_DIGITS-1,St=0;St<=yt;St++){l&&St===J&&at.append(".");var Bt=Math.trunc(b._hi);if(Bt<0)break;var Yt=!1,ee=0;Bt>9?(Yt=!0,ee="9"):ee="0"+Bt,at.append(ee),b=b.subtract(H.valueOf(Bt)).multiply(H.TEN),Yt&&b.selfAdd(H.TEN);var xe=!0,Me=H.magnitude(b._hi);if(Me<0&&Math.abs(Me)>=yt-St&&(xe=!1),!xe)break}return h[0]=E,at.toString()},H.prototype.sqr=function(){return this.multiply(this)},H.prototype.doubleValue=function(){return this._hi+this._lo},H.prototype.subtract=function(){if(arguments[0]instanceof H){var l=arguments[0];return this.add(l.negate())}if(typeof arguments[0]=="number"){var h=arguments[0];return this.add(-h)}},H.prototype.equals=function(){if(arguments.length===1){var l=arguments[0];return this._hi===l._hi&&this._lo===l._lo}},H.prototype.isZero=function(){return this._hi===0&&this._lo===0},H.prototype.selfSubtract=function(){if(arguments[0]instanceof H){var l=arguments[0];return this.isNaN()?this:this.selfAdd(-l._hi,-l._lo)}if(typeof arguments[0]=="number"){var h=arguments[0];return this.isNaN()?this:this.selfAdd(-h,0)}},H.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},H.prototype.min=function(l){return this.le(l)?this:l},H.prototype.selfDivide=function(){if(arguments.length===1){if(arguments[0]instanceof H){var l=arguments[0];return this.selfDivide(l._hi,l._lo)}if(typeof arguments[0]=="number"){var h=arguments[0];return this.selfDivide(h,0)}}else if(arguments.length===2){var b=arguments[0],E=arguments[1],I=null,J=null,at=null,yt=null,St=null,Bt=null,Yt=null,ee=null;return St=this._hi/b,Bt=H.SPLIT*St,I=Bt-St,ee=H.SPLIT*b,I=Bt-I,J=St-I,at=ee-b,Yt=St*b,at=ee-at,yt=b-at,ee=I*at-Yt+I*yt+J*at+J*yt,Bt=(this._hi-Yt-ee+this._lo-St*E)/b,ee=St+Bt,this._hi=ee,this._lo=St-ee+Bt,this}},H.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},H.prototype.divide=function(){if(arguments[0]instanceof H){var l=arguments[0],h=null,b=null,E=null,I=null,J=null,at=null,yt=null,St=null;return b=(J=this._hi/l._hi)-(h=(at=H.SPLIT*J)-(h=at-J)),St=h*(E=(St=H.SPLIT*l._hi)-(E=St-l._hi))-(yt=J*l._hi)+h*(I=l._hi-E)+b*E+b*I,at=(this._hi-yt-St+this._lo-J*l._lo)/l._hi,new H(St=J+at,J-St+at)}if(typeof arguments[0]=="number"){var Bt=arguments[0];return O.isNaN(Bt)?H.createNaN():H.copy(this).selfDivide(Bt,0)}},H.prototype.ge=function(l){return(this._hi>l._hi||this._hi===l._hi)&&this._lo>=l._lo},H.prototype.pow=function(l){if(l===0)return H.valueOf(1);var h=new H(this),b=H.valueOf(1),E=Math.abs(l);if(E>1)for(;E>0;)E%2==1&&b.selfMultiply(h),(E/=2)>0&&(h=h.sqr());else b=h;return l<0?b.reciprocal():b},H.prototype.ceil=function(){if(this.isNaN())return H.NaN;var l=Math.ceil(this._hi),h=0;return l===this._hi&&(h=Math.ceil(this._lo)),new H(l,h)},H.prototype.compareTo=function(l){var h=l;return this._hi<h._hi?-1:this._hi>h._hi?1:this._lo<h._lo?-1:this._lo>h._lo?1:0},H.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},H.prototype.setValue=function(){if(arguments[0]instanceof H){var l=arguments[0];return this.init(l),this}if(typeof arguments[0]=="number"){var h=arguments[0];return this.init(h),this}},H.prototype.max=function(l){return this.ge(l)?this:l},H.prototype.sqrt=function(){if(this.isZero())return H.valueOf(0);if(this.isNegative())return H.NaN;var l=1/Math.sqrt(this._hi),h=this._hi*l,b=H.valueOf(h),E=this.subtract(b.sqr())._hi*(.5*l);return b.add(E)},H.prototype.selfAdd=function(){if(arguments.length===1){if(arguments[0]instanceof H){var l=arguments[0];return this.selfAdd(l._hi,l._lo)}if(typeof arguments[0]=="number"){var h=arguments[0],b=null,E=null,I=null,J=null,at=null,yt=null;return I=this._hi+h,at=I-this._hi,J=I-at,J=h-at+(this._hi-J),yt=J+this._lo,b=I+yt,E=yt+(I-b),this._hi=b+E,this._lo=E+(b-this._hi),this}}else if(arguments.length===2){var St=arguments[0],Bt=arguments[1],Yt=null,ee=null,xe=null,Me=null,Be=null,Ve=null,pr=null;Me=this._hi+St,ee=this._lo+Bt,Be=Me-(Ve=Me-this._hi),xe=ee-(pr=ee-this._lo);var Hr=(Yt=Me+(Ve=(Be=St-Ve+(this._hi-Be))+ee))+(Ve=(xe=Bt-pr+(this._lo-xe))+(Ve+(Me-Yt))),Nn=Ve+(Yt-Hr);return this._hi=Hr,this._lo=Nn,this}},H.prototype.selfMultiply=function(){if(arguments.length===1){if(arguments[0]instanceof H){var l=arguments[0];return this.selfMultiply(l._hi,l._lo)}if(typeof arguments[0]=="number"){var h=arguments[0];return this.selfMultiply(h,0)}}else if(arguments.length===2){var b=arguments[0],E=arguments[1],I=null,J=null,at=null,yt=null,St=null,Bt=null;I=(St=H.SPLIT*this._hi)-this._hi,Bt=H.SPLIT*b,I=St-I,J=this._hi-I,at=Bt-b;var Yt=(St=this._hi*b)+(Bt=I*(at=Bt-at)-St+I*(yt=b-at)+J*at+J*yt+(this._hi*E+this._lo*b)),ee=Bt+(I=St-Yt);return this._hi=Yt,this._lo=ee,this}},H.prototype.selfSqr=function(){return this.selfMultiply(this)},H.prototype.floor=function(){if(this.isNaN())return H.NaN;var l=Math.floor(this._hi),h=0;return l===this._hi&&(h=Math.floor(this._lo)),new H(l,h)},H.prototype.negate=function(){return this.isNaN()?this:new H(-this._hi,-this._lo)},H.prototype.clone=function(){},H.prototype.multiply=function(){if(arguments[0]instanceof H){var l=arguments[0];return l.isNaN()?H.createNaN():H.copy(this).selfMultiply(l)}if(typeof arguments[0]=="number"){var h=arguments[0];return O.isNaN(h)?H.createNaN():H.copy(this).selfMultiply(h,0)}},H.prototype.isNaN=function(){return O.isNaN(this._hi)},H.prototype.intValue=function(){return Math.trunc(this._hi)},H.prototype.toString=function(){var l=H.magnitude(this._hi);return l>=-3&&l<=20?this.toStandardNotation():this.toSciNotation()},H.prototype.toStandardNotation=function(){var l=this.getSpecialNumberString();if(l!==null)return l;var h=new Array(1).fill(null),b=this.extractSignificantDigits(!0,h),E=h[0]+1,I=b;if(b.charAt(0)===".")I="0"+b;else if(E<0)I="0."+H.stringOfChar("0",-E)+b;else if(b.indexOf(".")===-1){var J=E-b.length;I=b+H.stringOfChar("0",J)+".0"}return this.isNegative()?"-"+I:I},H.prototype.reciprocal=function(){var l=null,h=null,b=null,E=null,I=null,J=null,at=null,yt=null;h=(I=1/this._hi)-(l=(J=H.SPLIT*I)-(l=J-I)),b=(yt=H.SPLIT*this._hi)-this._hi;var St=I+(J=(1-(at=I*this._hi)-(yt=l*(b=yt-b)-at+l*(E=this._hi-b)+h*b+h*E)-I*this._lo)/this._hi);return new H(St,I-St+J)},H.prototype.toSciNotation=function(){if(this.isZero())return H.SCI_NOT_ZERO;var l=this.getSpecialNumberString();if(l!==null)return l;var h=new Array(1).fill(null),b=this.extractSignificantDigits(!1,h),E=H.SCI_NOT_EXPONENT_CHAR+h[0];if(b.charAt(0)==="0")throw new Error("Found leading zero: "+b);var I="";b.length>1&&(I=b.substring(1));var J=b.charAt(0)+"."+I;return this.isNegative()?"-"+J+E:J+E},H.prototype.abs=function(){return this.isNaN()?H.NaN:this.isNegative()?this.negate():new H(this)},H.prototype.isPositive=function(){return(this._hi>0||this._hi===0)&&this._lo>0},H.prototype.lt=function(l){return(this._hi<l._hi||this._hi===l._hi)&&this._lo<l._lo},H.prototype.add=function(){if(arguments[0]instanceof H){var l=arguments[0];return H.copy(this).selfAdd(l)}if(typeof arguments[0]=="number"){var h=arguments[0];return H.copy(this).selfAdd(h)}},H.prototype.init=function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var l=arguments[0];this._hi=l,this._lo=0}else if(arguments[0]instanceof H){var h=arguments[0];this._hi=h._hi,this._lo=h._lo}}else if(arguments.length===2){var b=arguments[0],E=arguments[1];this._hi=b,this._lo=E}},H.prototype.gt=function(l){return(this._hi>l._hi||this._hi===l._hi)&&this._lo>l._lo},H.prototype.isNegative=function(){return(this._hi<0||this._hi===0)&&this._lo<0},H.prototype.trunc=function(){return this.isNaN()?H.NaN:this.isPositive()?this.floor():this.ceil()},H.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},H.prototype.interfaces_=function(){return[t,U,z]},H.prototype.getClass=function(){return H},H.sqr=function(l){return H.valueOf(l).selfMultiply(l)},H.valueOf=function(){if(typeof arguments[0]=="string"){var l=arguments[0];return H.parse(l)}if(typeof arguments[0]=="number"){var h=arguments[0];return new H(h)}},H.sqrt=function(l){return H.valueOf(l).sqrt()},H.parse=function(l){for(var h=0,b=l.length;F.isWhitespace(l.charAt(h));)h++;var E=!1;if(h<b){var I=l.charAt(h);I!=="-"&&I!=="+"||(h++,I==="-"&&(E=!0))}for(var J=new H,at=0,yt=0,St=0;!(h>=b);){var Bt=l.charAt(h);if(h++,F.isDigit(Bt)){var Yt=Bt-"0";J.selfMultiply(H.TEN),J.selfAdd(Yt),at++}else{if(Bt!=="."){if(Bt==="e"||Bt==="E"){var ee=l.substring(h);try{St=R.parseInt(ee)}catch(pr){throw pr instanceof Error?new Error("Invalid exponent "+ee+" in string "+l):pr}break}throw new Error("Unexpected character '"+Bt+"' at position "+h+" in string "+l)}yt=at}}var xe=J,Me=at-yt-St;if(Me===0)xe=J;else if(Me>0){var Be=H.TEN.pow(Me);xe=J.divide(Be)}else if(Me<0){var Ve=H.TEN.pow(-Me);xe=J.multiply(Ve)}return E?xe.negate():xe},H.createNaN=function(){return new H(O.NaN,O.NaN)},H.copy=function(l){return new H(l)},H.magnitude=function(l){var h=Math.abs(l),b=Math.log(h)/Math.log(10),E=Math.trunc(Math.floor(b));return 10*Math.pow(10,E)<=h&&(E+=1),E},H.stringOfChar=function(l,h){for(var b=new T,E=0;E<h;E++)b.append(l);return b.toString()},it.PI.get=function(){return new H(3.141592653589793,12246467991473532e-32)},it.TWO_PI.get=function(){return new H(6.283185307179586,24492935982947064e-32)},it.PI_2.get=function(){return new H(1.5707963267948966,6123233995736766e-32)},it.E.get=function(){return new H(2.718281828459045,14456468917292502e-32)},it.NaN.get=function(){return new H(O.NaN,O.NaN)},it.EPS.get=function(){return 123259516440783e-46},it.SPLIT.get=function(){return 134217729},it.MAX_PRINT_DIGITS.get=function(){return 32},it.TEN.get=function(){return H.valueOf(10)},it.ONE.get=function(){return H.valueOf(1)},it.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},it.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(H,it);var ot=function(){},dt={DP_SAFE_EPSILON:{configurable:!0}};ot.prototype.interfaces_=function(){return[]},ot.prototype.getClass=function(){return ot},ot.orientationIndex=function(l,h,b){var E=ot.orientationIndexFilter(l,h,b);if(E<=1)return E;var I=H.valueOf(h.x).selfAdd(-l.x),J=H.valueOf(h.y).selfAdd(-l.y),at=H.valueOf(b.x).selfAdd(-h.x),yt=H.valueOf(b.y).selfAdd(-h.y);return I.selfMultiply(yt).selfSubtract(J.selfMultiply(at)).signum()},ot.signOfDet2x2=function(l,h,b,E){return l.multiply(E).selfSubtract(h.multiply(b)).signum()},ot.intersection=function(l,h,b,E){var I=H.valueOf(E.y).selfSubtract(b.y).selfMultiply(H.valueOf(h.x).selfSubtract(l.x)),J=H.valueOf(E.x).selfSubtract(b.x).selfMultiply(H.valueOf(h.y).selfSubtract(l.y)),at=I.subtract(J),yt=H.valueOf(E.x).selfSubtract(b.x).selfMultiply(H.valueOf(l.y).selfSubtract(b.y)),St=H.valueOf(E.y).selfSubtract(b.y).selfMultiply(H.valueOf(l.x).selfSubtract(b.x)),Bt=yt.subtract(St).selfDivide(at).doubleValue(),Yt=H.valueOf(l.x).selfAdd(H.valueOf(h.x).selfSubtract(l.x).selfMultiply(Bt)).doubleValue(),ee=H.valueOf(h.x).selfSubtract(l.x).selfMultiply(H.valueOf(l.y).selfSubtract(b.y)),xe=H.valueOf(h.y).selfSubtract(l.y).selfMultiply(H.valueOf(l.x).selfSubtract(b.x)),Me=ee.subtract(xe).selfDivide(at).doubleValue(),Be=H.valueOf(b.y).selfAdd(H.valueOf(E.y).selfSubtract(b.y).selfMultiply(Me)).doubleValue();return new G(Yt,Be)},ot.orientationIndexFilter=function(l,h,b){var E=null,I=(l.x-b.x)*(h.y-b.y),J=(l.y-b.y)*(h.x-b.x),at=I-J;if(I>0){if(J<=0)return ot.signum(at);E=I+J}else{if(!(I<0)||J>=0)return ot.signum(at);E=-I-J}var yt=ot.DP_SAFE_EPSILON*E;return at>=yt||-at>=yt?ot.signum(at):2},ot.signum=function(l){return l>0?1:l<0?-1:0},dt.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(ot,dt);var $=function(){},ct={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};ct.X.get=function(){return 0},ct.Y.get=function(){return 1},ct.Z.get=function(){return 2},ct.M.get=function(){return 3},$.prototype.setOrdinate=function(l,h,b){},$.prototype.size=function(){},$.prototype.getOrdinate=function(l,h){},$.prototype.getCoordinate=function(){},$.prototype.getCoordinateCopy=function(l){},$.prototype.getDimension=function(){},$.prototype.getX=function(l){},$.prototype.clone=function(){},$.prototype.expandEnvelope=function(l){},$.prototype.copy=function(){},$.prototype.getY=function(l){},$.prototype.toCoordinateArray=function(){},$.prototype.interfaces_=function(){return[z]},$.prototype.getClass=function(){return $},Object.defineProperties($,ct);var W=function(){},V=function(l){function h(){l.call(this,"Projective point not representable on the Cartesian plane.")}return l&&(h.__proto__=l),h.prototype=Object.create(l&&l.prototype),h.prototype.constructor=h,h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},h}(W),rt=function(){};rt.arraycopy=function(l,h,b,E,I){for(var J=0,at=h;at<h+I;at++)b[E+J]=l[at],J++},rt.getProperty=function(l){return{"line.separator":`
`}[l]};var mt=function l(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var h=arguments[0];this.x=h.x,this.y=h.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var b=arguments[0],E=arguments[1];this.x=b,this.y=E,this.w=1}else if(arguments[0]instanceof l&&arguments[1]instanceof l){var I=arguments[0],J=arguments[1];this.x=I.y*J.w-J.y*I.w,this.y=J.x*I.w-I.x*J.w,this.w=I.x*J.y-J.x*I.y}else if(arguments[0]instanceof G&&arguments[1]instanceof G){var at=arguments[0],yt=arguments[1];this.x=at.y-yt.y,this.y=yt.x-at.x,this.w=at.x*yt.y-yt.x*at.y}}else if(arguments.length===3){var St=arguments[0],Bt=arguments[1],Yt=arguments[2];this.x=St,this.y=Bt,this.w=Yt}else if(arguments.length===4){var ee=arguments[0],xe=arguments[1],Me=arguments[2],Be=arguments[3],Ve=ee.y-xe.y,pr=xe.x-ee.x,Hr=ee.x*xe.y-xe.x*ee.y,Nn=Me.y-Be.y,Ys=Be.x-Me.x,ko=Me.x*Be.y-Be.x*Me.y;this.x=pr*ko-Ys*Hr,this.y=Nn*Hr-Ve*ko,this.w=Ve*Ys-Nn*pr}};mt.prototype.getY=function(){var l=this.y/this.w;if(O.isNaN(l)||O.isInfinite(l))throw new V;return l},mt.prototype.getX=function(){var l=this.x/this.w;if(O.isNaN(l)||O.isInfinite(l))throw new V;return l},mt.prototype.getCoordinate=function(){var l=new G;return l.x=this.getX(),l.y=this.getY(),l},mt.prototype.interfaces_=function(){return[]},mt.prototype.getClass=function(){return mt},mt.intersection=function(l,h,b,E){var I=l.y-h.y,J=h.x-l.x,at=l.x*h.y-h.x*l.y,yt=b.y-E.y,St=E.x-b.x,Bt=b.x*E.y-E.x*b.y,Yt=I*St-yt*J,ee=(J*Bt-St*at)/Yt,xe=(yt*at-I*Bt)/Yt;if(O.isNaN(ee)||O.isInfinite(ee)||O.isNaN(xe)||O.isInfinite(xe))throw new V;return new G(ee,xe)};var wt=function l(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof G){var h=arguments[0];this.init(h.x,h.x,h.y,h.y)}else if(arguments[0]instanceof l){var b=arguments[0];this.init(b)}}else if(arguments.length===2){var E=arguments[0],I=arguments[1];this.init(E.x,I.x,E.y,I.y)}else if(arguments.length===4){var J=arguments[0],at=arguments[1],yt=arguments[2],St=arguments[3];this.init(J,at,yt,St)}},_t={serialVersionUID:{configurable:!0}};wt.prototype.getArea=function(){return this.getWidth()*this.getHeight()},wt.prototype.equals=function(l){if(!(l instanceof wt))return!1;var h=l;return this.isNull()?h.isNull():this._maxx===h.getMaxX()&&this._maxy===h.getMaxY()&&this._minx===h.getMinX()&&this._miny===h.getMinY()},wt.prototype.intersection=function(l){if(this.isNull()||l.isNull()||!this.intersects(l))return new wt;var h=this._minx>l._minx?this._minx:l._minx,b=this._miny>l._miny?this._miny:l._miny,E=this._maxx<l._maxx?this._maxx:l._maxx,I=this._maxy<l._maxy?this._maxy:l._maxy;return new wt(h,E,b,I)},wt.prototype.isNull=function(){return this._maxx<this._minx},wt.prototype.getMaxX=function(){return this._maxx},wt.prototype.covers=function(){if(arguments.length===1){if(arguments[0]instanceof G){var l=arguments[0];return this.covers(l.x,l.y)}if(arguments[0]instanceof wt){var h=arguments[0];return!this.isNull()&&!h.isNull()&&h.getMinX()>=this._minx&&h.getMaxX()<=this._maxx&&h.getMinY()>=this._miny&&h.getMaxY()<=this._maxy}}else if(arguments.length===2){var b=arguments[0],E=arguments[1];return!this.isNull()&&b>=this._minx&&b<=this._maxx&&E>=this._miny&&E<=this._maxy}},wt.prototype.intersects=function(){if(arguments.length===1){if(arguments[0]instanceof wt){var l=arguments[0];return!this.isNull()&&!l.isNull()&&!(l._minx>this._maxx||l._maxx<this._minx||l._miny>this._maxy||l._maxy<this._miny)}if(arguments[0]instanceof G){var h=arguments[0];return this.intersects(h.x,h.y)}}else if(arguments.length===2){var b=arguments[0],E=arguments[1];return!this.isNull()&&!(b>this._maxx||b<this._minx||E>this._maxy||E<this._miny)}},wt.prototype.getMinY=function(){return this._miny},wt.prototype.getMinX=function(){return this._minx},wt.prototype.expandToInclude=function(){if(arguments.length===1){if(arguments[0]instanceof G){var l=arguments[0];this.expandToInclude(l.x,l.y)}else if(arguments[0]instanceof wt){var h=arguments[0];if(h.isNull())return null;this.isNull()?(this._minx=h.getMinX(),this._maxx=h.getMaxX(),this._miny=h.getMinY(),this._maxy=h.getMaxY()):(h._minx<this._minx&&(this._minx=h._minx),h._maxx>this._maxx&&(this._maxx=h._maxx),h._miny<this._miny&&(this._miny=h._miny),h._maxy>this._maxy&&(this._maxy=h._maxy))}}else if(arguments.length===2){var b=arguments[0],E=arguments[1];this.isNull()?(this._minx=b,this._maxx=b,this._miny=E,this._maxy=E):(b<this._minx&&(this._minx=b),b>this._maxx&&(this._maxx=b),E<this._miny&&(this._miny=E),E>this._maxy&&(this._maxy=E))}},wt.prototype.minExtent=function(){if(this.isNull())return 0;var l=this.getWidth(),h=this.getHeight();return l<h?l:h},wt.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},wt.prototype.compareTo=function(l){var h=l;return this.isNull()?h.isNull()?0:-1:h.isNull()?1:this._minx<h._minx?-1:this._minx>h._minx?1:this._miny<h._miny?-1:this._miny>h._miny?1:this._maxx<h._maxx?-1:this._maxx>h._maxx?1:this._maxy<h._maxy?-1:this._maxy>h._maxy?1:0},wt.prototype.translate=function(l,h){if(this.isNull())return null;this.init(this.getMinX()+l,this.getMaxX()+l,this.getMinY()+h,this.getMaxY()+h)},wt.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},wt.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},wt.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},wt.prototype.maxExtent=function(){if(this.isNull())return 0;var l=this.getWidth(),h=this.getHeight();return l>h?l:h},wt.prototype.expandBy=function(){if(arguments.length===1){var l=arguments[0];this.expandBy(l,l)}else if(arguments.length===2){var h=arguments[0],b=arguments[1];if(this.isNull())return null;this._minx-=h,this._maxx+=h,this._miny-=b,this._maxy+=b,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},wt.prototype.contains=function(){if(arguments.length===1){if(arguments[0]instanceof wt){var l=arguments[0];return this.covers(l)}if(arguments[0]instanceof G){var h=arguments[0];return this.covers(h)}}else if(arguments.length===2){var b=arguments[0],E=arguments[1];return this.covers(b,E)}},wt.prototype.centre=function(){return this.isNull()?null:new G((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},wt.prototype.init=function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof G){var l=arguments[0];this.init(l.x,l.x,l.y,l.y)}else if(arguments[0]instanceof wt){var h=arguments[0];this._minx=h._minx,this._maxx=h._maxx,this._miny=h._miny,this._maxy=h._maxy}}else if(arguments.length===2){var b=arguments[0],E=arguments[1];this.init(b.x,E.x,b.y,E.y)}else if(arguments.length===4){var I=arguments[0],J=arguments[1],at=arguments[2],yt=arguments[3];I<J?(this._minx=I,this._maxx=J):(this._minx=J,this._maxx=I),at<yt?(this._miny=at,this._maxy=yt):(this._miny=yt,this._maxy=at)}},wt.prototype.getMaxY=function(){return this._maxy},wt.prototype.distance=function(l){if(this.intersects(l))return 0;var h=0;this._maxx<l._minx?h=l._minx-this._maxx:this._minx>l._maxx&&(h=this._minx-l._maxx);var b=0;return this._maxy<l._miny?b=l._miny-this._maxy:this._miny>l._maxy&&(b=this._miny-l._maxy),h===0?b:b===0?h:Math.sqrt(h*h+b*b)},wt.prototype.hashCode=function(){var l=17;return l=37*l+G.hashCode(this._minx),l=37*l+G.hashCode(this._maxx),l=37*l+G.hashCode(this._miny),l=37*l+G.hashCode(this._maxy)},wt.prototype.interfaces_=function(){return[U,t]},wt.prototype.getClass=function(){return wt},wt.intersects=function(){if(arguments.length===3){var l=arguments[0],h=arguments[1],b=arguments[2];return b.x>=(l.x<h.x?l.x:h.x)&&b.x<=(l.x>h.x?l.x:h.x)&&b.y>=(l.y<h.y?l.y:h.y)&&b.y<=(l.y>h.y?l.y:h.y)}if(arguments.length===4){var E=arguments[0],I=arguments[1],J=arguments[2],at=arguments[3],yt=Math.min(J.x,at.x),St=Math.max(J.x,at.x),Bt=Math.min(E.x,I.x),Yt=Math.max(E.x,I.x);return!(Bt>St)&&!(Yt<yt)&&(yt=Math.min(J.y,at.y),St=Math.max(J.y,at.y),Bt=Math.min(E.y,I.y),Yt=Math.max(E.y,I.y),!(Bt>St)&&!(Yt<yt))}},_t.serialVersionUID.get=function(){return 5873921885273102e3},Object.defineProperties(wt,_t);var Ct={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Ft=function(l){this.geometryFactory=l||new Se};Ft.prototype.read=function(l){var h,b,E;l=l.replace(/[\n\r]/g," ");var I=Ct.typeStr.exec(l);if(l.search("EMPTY")!==-1&&((I=Ct.emptyTypeStr.exec(l))[2]=void 0),I&&(b=I[1].toLowerCase(),E=I[2],vt[b]&&(h=vt[b].apply(this,[E]))),h===void 0)throw new Error("Could not parse WKT "+l);return h},Ft.prototype.write=function(l){return this.extractGeometry(l)},Ft.prototype.extractGeometry=function(l){var h=l.getGeometryType().toLowerCase();if(!It[h])return null;var b=h.toUpperCase();return l.isEmpty()?b+" EMPTY":b+"("+It[h].apply(this,[l])+")"};var It={coordinate:function(l){return l.x+" "+l.y},point:function(l){return It.coordinate.call(this,l._coordinates._coordinates[0])},multipoint:function(l){for(var h=[],b=0,E=l._geometries.length;b<E;++b)h.push("("+It.point.apply(this,[l._geometries[b]])+")");return h.join(",")},linestring:function(l){for(var h=[],b=0,E=l._points._coordinates.length;b<E;++b)h.push(It.coordinate.apply(this,[l._points._coordinates[b]]));return h.join(",")},linearring:function(l){for(var h=[],b=0,E=l._points._coordinates.length;b<E;++b)h.push(It.coordinate.apply(this,[l._points._coordinates[b]]));return h.join(",")},multilinestring:function(l){for(var h=[],b=0,E=l._geometries.length;b<E;++b)h.push("("+It.linestring.apply(this,[l._geometries[b]])+")");return h.join(",")},polygon:function(l){var h=[];h.push("("+It.linestring.apply(this,[l._shell])+")");for(var b=0,E=l._holes.length;b<E;++b)h.push("("+It.linestring.apply(this,[l._holes[b]])+")");return h.join(",")},multipolygon:function(l){for(var h=[],b=0,E=l._geometries.length;b<E;++b)h.push("("+It.polygon.apply(this,[l._geometries[b]])+")");return h.join(",")},geometrycollection:function(l){for(var h=[],b=0,E=l._geometries.length;b<E;++b)h.push(this.extractGeometry(l._geometries[b]));return h.join(",")}},vt={point:function(l){if(l===void 0)return this.geometryFactory.createPoint();var h=l.trim().split(Ct.spaces);return this.geometryFactory.createPoint(new G(Number.parseFloat(h[0]),Number.parseFloat(h[1])))},multipoint:function(l){if(l===void 0)return this.geometryFactory.createMultiPoint();for(var h,b=l.trim().split(","),E=[],I=0,J=b.length;I<J;++I)h=b[I].replace(Ct.trimParens,"$1"),E.push(vt.point.apply(this,[h]));return this.geometryFactory.createMultiPoint(E)},linestring:function(l){if(l===void 0)return this.geometryFactory.createLineString();for(var h,b=l.trim().split(","),E=[],I=0,J=b.length;I<J;++I)h=b[I].trim().split(Ct.spaces),E.push(new G(Number.parseFloat(h[0]),Number.parseFloat(h[1])));return this.geometryFactory.createLineString(E)},linearring:function(l){if(l===void 0)return this.geometryFactory.createLinearRing();for(var h,b=l.trim().split(","),E=[],I=0,J=b.length;I<J;++I)h=b[I].trim().split(Ct.spaces),E.push(new G(Number.parseFloat(h[0]),Number.parseFloat(h[1])));return this.geometryFactory.createLinearRing(E)},multilinestring:function(l){if(l===void 0)return this.geometryFactory.createMultiLineString();for(var h,b=l.trim().split(Ct.parenComma),E=[],I=0,J=b.length;I<J;++I)h=b[I].replace(Ct.trimParens,"$1"),E.push(vt.linestring.apply(this,[h]));return this.geometryFactory.createMultiLineString(E)},polygon:function(l){if(l===void 0)return this.geometryFactory.createPolygon();for(var h,b,E,I,J=l.trim().split(Ct.parenComma),at=[],yt=0,St=J.length;yt<St;++yt)h=J[yt].replace(Ct.trimParens,"$1"),b=vt.linestring.apply(this,[h]),E=this.geometryFactory.createLinearRing(b._points),yt===0?I=E:at.push(E);return this.geometryFactory.createPolygon(I,at)},multipolygon:function(l){if(l===void 0)return this.geometryFactory.createMultiPolygon();for(var h,b=l.trim().split(Ct.doubleParenComma),E=[],I=0,J=b.length;I<J;++I)h=b[I].replace(Ct.trimParens,"$1"),E.push(vt.polygon.apply(this,[h]));return this.geometryFactory.createMultiPolygon(E)},geometrycollection:function(l){if(l===void 0)return this.geometryFactory.createGeometryCollection();for(var h=(l=l.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),b=[],E=0,I=h.length;E<I;++E)b.push(this.read(h[E]));return this.geometryFactory.createGeometryCollection(b)}},kt=function(l){this.parser=new Ft(l)};kt.prototype.write=function(l){return this.parser.write(l)},kt.toLineString=function(l,h){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+l.x+" "+l.y+", "+h.x+" "+h.y+" )"};var gt=function(l){function h(b){l.call(this,b),this.name="RuntimeException",this.message=b,this.stack=new l().stack}return l&&(h.__proto__=l),h.prototype=Object.create(l&&l.prototype),h.prototype.constructor=h,h}(Error),ut=function(l){function h(){if(l.call(this),arguments.length===0)l.call(this);else if(arguments.length===1){var b=arguments[0];l.call(this,b)}}return l&&(h.__proto__=l),h.prototype=Object.create(l&&l.prototype),h.prototype.constructor=h,h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},h}(gt),Q=function(){};Q.prototype.interfaces_=function(){return[]},Q.prototype.getClass=function(){return Q},Q.shouldNeverReachHere=function(){if(arguments.length===0)Q.shouldNeverReachHere(null);else if(arguments.length===1){var l=arguments[0];throw new ut("Should never reach here"+(l!==null?": "+l:""))}},Q.isTrue=function(){var l,h;if(arguments.length===1)l=arguments[0],Q.isTrue(l,null);else if(arguments.length===2&&(l=arguments[0],h=arguments[1],!l))throw h===null?new ut:new ut(h)},Q.equals=function(){var l,h,b;if(arguments.length===2)l=arguments[0],h=arguments[1],Q.equals(l,h,null);else if(arguments.length===3&&(l=arguments[0],h=arguments[1],b=arguments[2],!h.equals(l)))throw new ut("Expected "+l+" but encountered "+h+(b!==null?": "+b:""))};var Y=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new G,this._intPt[1]=new G,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},et={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};Y.prototype.getIndexAlongSegment=function(l,h){return this.computeIntLineIndex(),this._intLineIndex[l][h]},Y.prototype.getTopologySummary=function(){var l=new T;return this.isEndPoint()&&l.append(" endpoint"),this._isProper&&l.append(" proper"),this.isCollinear()&&l.append(" collinear"),l.toString()},Y.prototype.computeIntersection=function(l,h,b,E){this._inputLines[0][0]=l,this._inputLines[0][1]=h,this._inputLines[1][0]=b,this._inputLines[1][1]=E,this._result=this.computeIntersect(l,h,b,E)},Y.prototype.getIntersectionNum=function(){return this._result},Y.prototype.computeIntLineIndex=function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var l=arguments[0];this.getEdgeDistance(l,0)>this.getEdgeDistance(l,1)?(this._intLineIndex[l][0]=0,this._intLineIndex[l][1]=1):(this._intLineIndex[l][0]=1,this._intLineIndex[l][1]=0)}},Y.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},Y.prototype.setPrecisionModel=function(l){this._precisionModel=l},Y.prototype.isInteriorIntersection=function(){if(arguments.length===0)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(arguments.length===1){for(var l=arguments[0],h=0;h<this._result;h++)if(!this._intPt[h].equals2D(this._inputLines[l][0])&&!this._intPt[h].equals2D(this._inputLines[l][1]))return!0;return!1}},Y.prototype.getIntersection=function(l){return this._intPt[l]},Y.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},Y.prototype.hasIntersection=function(){return this._result!==Y.NO_INTERSECTION},Y.prototype.getEdgeDistance=function(l,h){return Y.computeEdgeDistance(this._intPt[h],this._inputLines[l][0],this._inputLines[l][1])},Y.prototype.isCollinear=function(){return this._result===Y.COLLINEAR_INTERSECTION},Y.prototype.toString=function(){return kt.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+kt.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},Y.prototype.getEndpoint=function(l,h){return this._inputLines[l][h]},Y.prototype.isIntersection=function(l){for(var h=0;h<this._result;h++)if(this._intPt[h].equals2D(l))return!0;return!1},Y.prototype.getIntersectionAlongSegment=function(l,h){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[l][h]]},Y.prototype.interfaces_=function(){return[]},Y.prototype.getClass=function(){return Y},Y.computeEdgeDistance=function(l,h,b){var E=Math.abs(b.x-h.x),I=Math.abs(b.y-h.y),J=-1;if(l.equals(h))J=0;else if(l.equals(b))J=E>I?E:I;else{var at=Math.abs(l.x-h.x),yt=Math.abs(l.y-h.y);(J=E>I?at:yt)!==0||l.equals(h)||(J=Math.max(at,yt))}return Q.isTrue(!(J===0&&!l.equals(h)),"Bad distance calculation"),J},Y.nonRobustComputeEdgeDistance=function(l,h,b){var E=l.x-h.x,I=l.y-h.y,J=Math.sqrt(E*E+I*I);return Q.isTrue(!(J===0&&!l.equals(h)),"Invalid distance calculation"),J},et.DONT_INTERSECT.get=function(){return 0},et.DO_INTERSECT.get=function(){return 1},et.COLLINEAR.get=function(){return 2},et.NO_INTERSECTION.get=function(){return 0},et.POINT_INTERSECTION.get=function(){return 1},et.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(Y,et);var lt=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),h.prototype=Object.create(l&&l.prototype),h.prototype.constructor=h,h.prototype.isInSegmentEnvelopes=function(b){var E=new wt(this._inputLines[0][0],this._inputLines[0][1]),I=new wt(this._inputLines[1][0],this._inputLines[1][1]);return E.contains(b)&&I.contains(b)},h.prototype.computeIntersection=function(){if(arguments.length!==3)return l.prototype.computeIntersection.apply(this,arguments);var b=arguments[0],E=arguments[1],I=arguments[2];if(this._isProper=!1,wt.intersects(E,I,b)&&Et.orientationIndex(E,I,b)===0&&Et.orientationIndex(I,E,b)===0)return this._isProper=!0,(b.equals(E)||b.equals(I))&&(this._isProper=!1),this._result=l.POINT_INTERSECTION,null;this._result=l.NO_INTERSECTION},h.prototype.normalizeToMinimum=function(b,E,I,J,at){at.x=this.smallestInAbsValue(b.x,E.x,I.x,J.x),at.y=this.smallestInAbsValue(b.y,E.y,I.y,J.y),b.x-=at.x,b.y-=at.y,E.x-=at.x,E.y-=at.y,I.x-=at.x,I.y-=at.y,J.x-=at.x,J.y-=at.y},h.prototype.safeHCoordinateIntersection=function(b,E,I,J){var at=null;try{at=mt.intersection(b,E,I,J)}catch(yt){if(!(yt instanceof V))throw yt;at=h.nearestEndpoint(b,E,I,J)}return at},h.prototype.intersection=function(b,E,I,J){var at=this.intersectionWithNormalization(b,E,I,J);return this.isInSegmentEnvelopes(at)||(at=new G(h.nearestEndpoint(b,E,I,J))),this._precisionModel!==null&&this._precisionModel.makePrecise(at),at},h.prototype.smallestInAbsValue=function(b,E,I,J){var at=b,yt=Math.abs(at);return Math.abs(E)<yt&&(at=E,yt=Math.abs(E)),Math.abs(I)<yt&&(at=I,yt=Math.abs(I)),Math.abs(J)<yt&&(at=J),at},h.prototype.checkDD=function(b,E,I,J,at){var yt=ot.intersection(b,E,I,J),St=this.isInSegmentEnvelopes(yt);rt.out.println("DD in env = "+St+"  --------------------- "+yt),at.distance(yt)>1e-4&&rt.out.println("Distance = "+at.distance(yt))},h.prototype.intersectionWithNormalization=function(b,E,I,J){var at=new G(b),yt=new G(E),St=new G(I),Bt=new G(J),Yt=new G;this.normalizeToEnvCentre(at,yt,St,Bt,Yt);var ee=this.safeHCoordinateIntersection(at,yt,St,Bt);return ee.x+=Yt.x,ee.y+=Yt.y,ee},h.prototype.computeCollinearIntersection=function(b,E,I,J){var at=wt.intersects(b,E,I),yt=wt.intersects(b,E,J),St=wt.intersects(I,J,b),Bt=wt.intersects(I,J,E);return at&&yt?(this._intPt[0]=I,this._intPt[1]=J,l.COLLINEAR_INTERSECTION):St&&Bt?(this._intPt[0]=b,this._intPt[1]=E,l.COLLINEAR_INTERSECTION):at&&St?(this._intPt[0]=I,this._intPt[1]=b,!I.equals(b)||yt||Bt?l.COLLINEAR_INTERSECTION:l.POINT_INTERSECTION):at&&Bt?(this._intPt[0]=I,this._intPt[1]=E,!I.equals(E)||yt||St?l.COLLINEAR_INTERSECTION:l.POINT_INTERSECTION):yt&&St?(this._intPt[0]=J,this._intPt[1]=b,!J.equals(b)||at||Bt?l.COLLINEAR_INTERSECTION:l.POINT_INTERSECTION):yt&&Bt?(this._intPt[0]=J,this._intPt[1]=E,!J.equals(E)||at||St?l.COLLINEAR_INTERSECTION:l.POINT_INTERSECTION):l.NO_INTERSECTION},h.prototype.normalizeToEnvCentre=function(b,E,I,J,at){var yt=b.x<E.x?b.x:E.x,St=b.y<E.y?b.y:E.y,Bt=b.x>E.x?b.x:E.x,Yt=b.y>E.y?b.y:E.y,ee=I.x<J.x?I.x:J.x,xe=I.y<J.y?I.y:J.y,Me=I.x>J.x?I.x:J.x,Be=I.y>J.y?I.y:J.y,Ve=((yt>ee?yt:ee)+(Bt<Me?Bt:Me))/2,pr=((St>xe?St:xe)+(Yt<Be?Yt:Be))/2;at.x=Ve,at.y=pr,b.x-=at.x,b.y-=at.y,E.x-=at.x,E.y-=at.y,I.x-=at.x,I.y-=at.y,J.x-=at.x,J.y-=at.y},h.prototype.computeIntersect=function(b,E,I,J){if(this._isProper=!1,!wt.intersects(b,E,I,J))return l.NO_INTERSECTION;var at=Et.orientationIndex(b,E,I),yt=Et.orientationIndex(b,E,J);if(at>0&&yt>0||at<0&&yt<0)return l.NO_INTERSECTION;var St=Et.orientationIndex(I,J,b),Bt=Et.orientationIndex(I,J,E);return St>0&&Bt>0||St<0&&Bt<0?l.NO_INTERSECTION:at===0&&yt===0&&St===0&&Bt===0?this.computeCollinearIntersection(b,E,I,J):(at===0||yt===0||St===0||Bt===0?(this._isProper=!1,b.equals2D(I)||b.equals2D(J)?this._intPt[0]=b:E.equals2D(I)||E.equals2D(J)?this._intPt[0]=E:at===0?this._intPt[0]=new G(I):yt===0?this._intPt[0]=new G(J):St===0?this._intPt[0]=new G(b):Bt===0&&(this._intPt[0]=new G(E))):(this._isProper=!0,this._intPt[0]=this.intersection(b,E,I,J)),l.POINT_INTERSECTION)},h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},h.nearestEndpoint=function(b,E,I,J){var at=b,yt=Et.distancePointLine(b,I,J),St=Et.distancePointLine(E,I,J);return St<yt&&(yt=St,at=E),(St=Et.distancePointLine(I,b,E))<yt&&(yt=St,at=I),(St=Et.distancePointLine(J,b,E))<yt&&(yt=St,at=J),at},h}(Y),pt=function(){};pt.prototype.interfaces_=function(){return[]},pt.prototype.getClass=function(){return pt},pt.orientationIndex=function(l,h,b){var E=h.x-l.x,I=h.y-l.y,J=b.x-h.x,at=b.y-h.y;return pt.signOfDet2x2(E,I,J,at)},pt.signOfDet2x2=function(l,h,b,E){var I=null,J=null,at=null;if(I=1,l===0||E===0)return h===0||b===0?0:h>0?b>0?-I:I:b>0?I:-I;if(h===0||b===0)return E>0?l>0?I:-I:l>0?-I:I;if(h>0?E>0?h<=E||(I=-I,J=l,l=b,b=J,J=h,h=E,E=J):h<=-E?(I=-I,b=-b,E=-E):(J=l,l=-b,b=J,J=h,h=-E,E=J):E>0?-h<=E?(I=-I,l=-l,h=-h):(J=-l,l=b,b=J,J=-h,h=E,E=J):h>=E?(l=-l,h=-h,b=-b,E=-E):(I=-I,J=-l,l=-b,b=J,J=-h,h=-E,E=J),l>0){if(!(b>0)||!(l<=b))return I}else{if(b>0||!(l>=b))return-I;I=-I,l=-l,b=-b}for(;;){if(at=Math.floor(b/l),b-=at*l,(E-=at*h)<0)return-I;if(E>h)return I;if(l>b+b){if(h<E+E)return I}else{if(h>E+E)return-I;b=l-b,E=h-E,I=-I}if(E===0)return b===0?0:-I;if(b===0||(at=Math.floor(l/b),l-=at*b,(h-=at*E)<0))return I;if(h>E)return-I;if(b>l+l){if(E<h+h)return-I}else{if(E>h+h)return I;l=b-l,h=E-h,I=-I}if(h===0)return l===0?0:I;if(l===0)return-I}};var bt=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var l=arguments[0];this._p=l};bt.prototype.countSegment=function(l,h){if(l.x<this._p.x&&h.x<this._p.x)return null;if(this._p.x===h.x&&this._p.y===h.y)return this._isPointOnSegment=!0,null;if(l.y===this._p.y&&h.y===this._p.y){var b=l.x,E=h.x;return b>E&&(b=h.x,E=l.x),this._p.x>=b&&this._p.x<=E&&(this._isPointOnSegment=!0),null}if(l.y>this._p.y&&h.y<=this._p.y||h.y>this._p.y&&l.y<=this._p.y){var I=l.x-this._p.x,J=l.y-this._p.y,at=h.x-this._p.x,yt=h.y-this._p.y,St=pt.signOfDet2x2(I,J,at,yt);if(St===0)return this._isPointOnSegment=!0,null;yt<J&&(St=-St),St>0&&this._crossingCount++}},bt.prototype.isPointInPolygon=function(){return this.getLocation()!==N.EXTERIOR},bt.prototype.getLocation=function(){return this._isPointOnSegment?N.BOUNDARY:this._crossingCount%2==1?N.INTERIOR:N.EXTERIOR},bt.prototype.isOnSegment=function(){return this._isPointOnSegment},bt.prototype.interfaces_=function(){return[]},bt.prototype.getClass=function(){return bt},bt.locatePointInRing=function(){if(arguments[0]instanceof G&&w(arguments[1],$)){for(var l=arguments[0],h=arguments[1],b=new bt(l),E=new G,I=new G,J=1;J<h.size();J++)if(h.getCoordinate(J,E),h.getCoordinate(J-1,I),b.countSegment(E,I),b.isOnSegment())return b.getLocation();return b.getLocation()}if(arguments[0]instanceof G&&arguments[1]instanceof Array){for(var at=arguments[0],yt=arguments[1],St=new bt(at),Bt=1;Bt<yt.length;Bt++){var Yt=yt[Bt],ee=yt[Bt-1];if(St.countSegment(Yt,ee),St.isOnSegment())return St.getLocation()}return St.getLocation()}};var Et=function(){},Ot={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};Et.prototype.interfaces_=function(){return[]},Et.prototype.getClass=function(){return Et},Et.orientationIndex=function(l,h,b){return ot.orientationIndex(l,h,b)},Et.signedArea=function(){if(arguments[0]instanceof Array){var l=arguments[0];if(l.length<3)return 0;for(var h=0,b=l[0].x,E=1;E<l.length-1;E++){var I=l[E].x-b,J=l[E+1].y;h+=I*(l[E-1].y-J)}return h/2}if(w(arguments[0],$)){var at=arguments[0],yt=at.size();if(yt<3)return 0;var St=new G,Bt=new G,Yt=new G;at.getCoordinate(0,Bt),at.getCoordinate(1,Yt);var ee=Bt.x;Yt.x-=ee;for(var xe=0,Me=1;Me<yt-1;Me++)St.y=Bt.y,Bt.x=Yt.x,Bt.y=Yt.y,at.getCoordinate(Me+1,Yt),Yt.x-=ee,xe+=Bt.x*(St.y-Yt.y);return xe/2}},Et.distanceLineLine=function(l,h,b,E){if(l.equals(h))return Et.distancePointLine(l,b,E);if(b.equals(E))return Et.distancePointLine(E,l,h);var I=!1;if(wt.intersects(l,h,b,E)){var J=(h.x-l.x)*(E.y-b.y)-(h.y-l.y)*(E.x-b.x);if(J===0)I=!0;else{var at=(l.y-b.y)*(E.x-b.x)-(l.x-b.x)*(E.y-b.y),yt=((l.y-b.y)*(h.x-l.x)-(l.x-b.x)*(h.y-l.y))/J,St=at/J;(St<0||St>1||yt<0||yt>1)&&(I=!0)}}else I=!0;return I?C.min(Et.distancePointLine(l,b,E),Et.distancePointLine(h,b,E),Et.distancePointLine(b,l,h),Et.distancePointLine(E,l,h)):0},Et.isPointInRing=function(l,h){return Et.locatePointInRing(l,h)!==N.EXTERIOR},Et.computeLength=function(l){var h=l.size();if(h<=1)return 0;var b=0,E=new G;l.getCoordinate(0,E);for(var I=E.x,J=E.y,at=1;at<h;at++){l.getCoordinate(at,E);var yt=E.x,St=E.y,Bt=yt-I,Yt=St-J;b+=Math.sqrt(Bt*Bt+Yt*Yt),I=yt,J=St}return b},Et.isCCW=function(l){var h=l.length-1;if(h<3)throw new S("Ring has fewer than 4 points, so orientation cannot be determined");for(var b=l[0],E=0,I=1;I<=h;I++){var J=l[I];J.y>b.y&&(b=J,E=I)}var at=E;do(at-=1)<0&&(at=h);while(l[at].equals2D(b)&&at!==E);var yt=E;do yt=(yt+1)%h;while(l[yt].equals2D(b)&&yt!==E);var St=l[at],Bt=l[yt];if(St.equals2D(b)||Bt.equals2D(b)||St.equals2D(Bt))return!1;var Yt=Et.computeOrientation(St,b,Bt),ee=!1;return ee=Yt===0?St.x>Bt.x:Yt>0,ee},Et.locatePointInRing=function(l,h){return bt.locatePointInRing(l,h)},Et.distancePointLinePerpendicular=function(l,h,b){var E=(b.x-h.x)*(b.x-h.x)+(b.y-h.y)*(b.y-h.y),I=((h.y-l.y)*(b.x-h.x)-(h.x-l.x)*(b.y-h.y))/E;return Math.abs(I)*Math.sqrt(E)},Et.computeOrientation=function(l,h,b){return Et.orientationIndex(l,h,b)},Et.distancePointLine=function(){if(arguments.length===2){var l=arguments[0],h=arguments[1];if(h.length===0)throw new S("Line array must contain at least one vertex");for(var b=l.distance(h[0]),E=0;E<h.length-1;E++){var I=Et.distancePointLine(l,h[E],h[E+1]);I<b&&(b=I)}return b}if(arguments.length===3){var J=arguments[0],at=arguments[1],yt=arguments[2];if(at.x===yt.x&&at.y===yt.y)return J.distance(at);var St=(yt.x-at.x)*(yt.x-at.x)+(yt.y-at.y)*(yt.y-at.y),Bt=((J.x-at.x)*(yt.x-at.x)+(J.y-at.y)*(yt.y-at.y))/St;if(Bt<=0)return J.distance(at);if(Bt>=1)return J.distance(yt);var Yt=((at.y-J.y)*(yt.x-at.x)-(at.x-J.x)*(yt.y-at.y))/St;return Math.abs(Yt)*Math.sqrt(St)}},Et.isOnLine=function(l,h){for(var b=new lt,E=1;E<h.length;E++){var I=h[E-1],J=h[E];if(b.computeIntersection(l,I,J),b.hasIntersection())return!0}return!1},Ot.CLOCKWISE.get=function(){return-1},Ot.RIGHT.get=function(){return Et.CLOCKWISE},Ot.COUNTERCLOCKWISE.get=function(){return 1},Ot.LEFT.get=function(){return Et.COUNTERCLOCKWISE},Ot.COLLINEAR.get=function(){return 0},Ot.STRAIGHT.get=function(){return Et.COLLINEAR},Object.defineProperties(Et,Ot);var zt=function(){};zt.prototype.filter=function(l){},zt.prototype.interfaces_=function(){return[]},zt.prototype.getClass=function(){return zt};var Gt=function(){var l=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=l,this._SRID=l.getSRID()},Jt={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};Gt.prototype.isGeometryCollection=function(){return this.getSortIndex()===Gt.SORTINDEX_GEOMETRYCOLLECTION},Gt.prototype.getFactory=function(){return this._factory},Gt.prototype.getGeometryN=function(l){return this},Gt.prototype.getArea=function(){return 0},Gt.prototype.isRectangle=function(){return!1},Gt.prototype.equals=function(){if(arguments[0]instanceof Gt){var l=arguments[0];return l!==null&&this.equalsTopo(l)}if(arguments[0]instanceof Object){var h=arguments[0];if(!(h instanceof Gt))return!1;var b=h;return this.equalsExact(b)}},Gt.prototype.equalsExact=function(l){return this===l||this.equalsExact(l,0)},Gt.prototype.geometryChanged=function(){this.apply(Gt.geometryChangedFilter)},Gt.prototype.geometryChangedAction=function(){this._envelope=null},Gt.prototype.equalsNorm=function(l){return l!==null&&this.norm().equalsExact(l.norm())},Gt.prototype.getLength=function(){return 0},Gt.prototype.getNumGeometries=function(){return 1},Gt.prototype.compareTo=function(){if(arguments.length===1){var l=arguments[0],h=l;return this.getSortIndex()!==h.getSortIndex()?this.getSortIndex()-h.getSortIndex():this.isEmpty()&&h.isEmpty()?0:this.isEmpty()?-1:h.isEmpty()?1:this.compareToSameClass(l)}if(arguments.length===2){var b=arguments[0],E=arguments[1];return this.getSortIndex()!==b.getSortIndex()?this.getSortIndex()-b.getSortIndex():this.isEmpty()&&b.isEmpty()?0:this.isEmpty()?-1:b.isEmpty()?1:this.compareToSameClass(b,E)}},Gt.prototype.getUserData=function(){return this._userData},Gt.prototype.getSRID=function(){return this._SRID},Gt.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},Gt.prototype.checkNotGeometryCollection=function(l){if(l.getSortIndex()===Gt.SORTINDEX_GEOMETRYCOLLECTION)throw new S("This method does not support GeometryCollection arguments")},Gt.prototype.equal=function(l,h,b){return b===0?l.equals(h):l.distance(h)<=b},Gt.prototype.norm=function(){var l=this.copy();return l.normalize(),l},Gt.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},Gt.prototype.getEnvelopeInternal=function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new wt(this._envelope)},Gt.prototype.setSRID=function(l){this._SRID=l},Gt.prototype.setUserData=function(l){this._userData=l},Gt.prototype.compare=function(l,h){for(var b=l.iterator(),E=h.iterator();b.hasNext()&&E.hasNext();){var I=b.next(),J=E.next(),at=I.compareTo(J);if(at!==0)return at}return b.hasNext()?1:E.hasNext()?-1:0},Gt.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},Gt.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===Gt.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===Gt.SORTINDEX_MULTIPOINT||this.getSortIndex()===Gt.SORTINDEX_MULTILINESTRING||this.getSortIndex()===Gt.SORTINDEX_MULTIPOLYGON},Gt.prototype.interfaces_=function(){return[z,U,t]},Gt.prototype.getClass=function(){return Gt},Gt.hasNonEmptyElements=function(l){for(var h=0;h<l.length;h++)if(!l[h].isEmpty())return!0;return!1},Gt.hasNullElements=function(l){for(var h=0;h<l.length;h++)if(l[h]===null)return!0;return!1},Jt.serialVersionUID.get=function(){return 8763622679187377e3},Jt.SORTINDEX_POINT.get=function(){return 0},Jt.SORTINDEX_MULTIPOINT.get=function(){return 1},Jt.SORTINDEX_LINESTRING.get=function(){return 2},Jt.SORTINDEX_LINEARRING.get=function(){return 3},Jt.SORTINDEX_MULTILINESTRING.get=function(){return 4},Jt.SORTINDEX_POLYGON.get=function(){return 5},Jt.SORTINDEX_MULTIPOLYGON.get=function(){return 6},Jt.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},Jt.geometryChangedFilter.get=function(){return Kt},Object.defineProperties(Gt,Jt);var Kt=function(){};Kt.interfaces_=function(){return[zt]},Kt.filter=function(l){l.geometryChangedAction()};var ie=function(){};ie.prototype.filter=function(l){},ie.prototype.interfaces_=function(){return[]},ie.prototype.getClass=function(){return ie};var Xt=function(){},Ut={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};Xt.prototype.isInBoundary=function(l){},Xt.prototype.interfaces_=function(){return[]},Xt.prototype.getClass=function(){return Xt},Ut.Mod2BoundaryNodeRule.get=function(){return _e},Ut.EndPointBoundaryNodeRule.get=function(){return le},Ut.MultiValentEndPointBoundaryNodeRule.get=function(){return ye},Ut.MonoValentEndPointBoundaryNodeRule.get=function(){return Ze},Ut.MOD2_BOUNDARY_RULE.get=function(){return new _e},Ut.ENDPOINT_BOUNDARY_RULE.get=function(){return new le},Ut.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new ye},Ut.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Ze},Ut.OGC_SFS_BOUNDARY_RULE.get=function(){return Xt.MOD2_BOUNDARY_RULE},Object.defineProperties(Xt,Ut);var _e=function(){};_e.prototype.isInBoundary=function(l){return l%2==1},_e.prototype.interfaces_=function(){return[Xt]},_e.prototype.getClass=function(){return _e};var le=function(){};le.prototype.isInBoundary=function(l){return l>0},le.prototype.interfaces_=function(){return[Xt]},le.prototype.getClass=function(){return le};var ye=function(){};ye.prototype.isInBoundary=function(l){return l>1},ye.prototype.interfaces_=function(){return[Xt]},ye.prototype.getClass=function(){return ye};var Ze=function(){};Ze.prototype.isInBoundary=function(l){return l===1},Ze.prototype.interfaces_=function(){return[Xt]},Ze.prototype.getClass=function(){return Ze};var ce=function(){};ce.prototype.add=function(){},ce.prototype.addAll=function(){},ce.prototype.isEmpty=function(){},ce.prototype.iterator=function(){},ce.prototype.size=function(){},ce.prototype.toArray=function(){},ce.prototype.remove=function(){},(n.prototype=new Error).name="IndexOutOfBoundsException";var ke=function(){};ke.prototype.hasNext=function(){},ke.prototype.next=function(){},ke.prototype.remove=function(){};var He=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),h.prototype=Object.create(l&&l.prototype),h.prototype.constructor=h,h.prototype.get=function(){},h.prototype.set=function(){},h.prototype.isEmpty=function(){},h}(ce);(i.prototype=new Error).name="NoSuchElementException";var $t=function(l){function h(){l.call(this),this.array_=[],arguments[0]instanceof ce&&this.addAll(arguments[0])}return l&&(h.__proto__=l),h.prototype=Object.create(l&&l.prototype),h.prototype.constructor=h,h.prototype.ensureCapacity=function(){},h.prototype.interfaces_=function(){return[l,ce]},h.prototype.add=function(b){return arguments.length===1?this.array_.push(b):this.array_.splice(arguments[0],arguments[1]),!0},h.prototype.clear=function(){this.array_=[]},h.prototype.addAll=function(b){for(var E=b.iterator();E.hasNext();)this.add(E.next());return!0},h.prototype.set=function(b,E){var I=this.array_[b];return this.array_[b]=E,I},h.prototype.iterator=function(){return new Te(this)},h.prototype.get=function(b){if(b<0||b>=this.size())throw new n;return this.array_[b]},h.prototype.isEmpty=function(){return this.array_.length===0},h.prototype.size=function(){return this.array_.length},h.prototype.toArray=function(){for(var b=[],E=0,I=this.array_.length;E<I;E++)b.push(this.array_[E]);return b},h.prototype.remove=function(b){for(var E=!1,I=0,J=this.array_.length;I<J;I++)if(this.array_[I]===b){this.array_.splice(I,1),E=!0;break}return E},h}(He),Te=function(l){function h(b){l.call(this),this.arrayList_=b,this.position_=0}return l&&(h.__proto__=l),h.prototype=Object.create(l&&l.prototype),h.prototype.constructor=h,h.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new i;return this.arrayList_.get(this.position_++)},h.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},h.prototype.set=function(b){return this.arrayList_.set(this.position_-1,b)},h.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},h}(ke),bi=function(l){function h(){if(l.call(this),arguments.length!==0){if(arguments.length===1){var E=arguments[0];this.ensureCapacity(E.length),this.add(E,!0)}else if(arguments.length===2){var I=arguments[0],J=arguments[1];this.ensureCapacity(I.length),this.add(I,J)}}}l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h;var b={coordArrayType:{configurable:!0}};return b.coordArrayType.get=function(){return new Array(0).fill(null)},h.prototype.getCoordinate=function(E){return this.get(E)},h.prototype.addAll=function(){if(arguments.length===2){for(var E=arguments[0],I=arguments[1],J=!1,at=E.iterator();at.hasNext();)this.add(at.next(),I),J=!0;return J}return l.prototype.addAll.apply(this,arguments)},h.prototype.clone=function(){for(var E=l.prototype.clone.call(this),I=0;I<this.size();I++)E.add(I,this.get(I).copy());return E},h.prototype.toCoordinateArray=function(){return this.toArray(h.coordArrayType)},h.prototype.add=function(){if(arguments.length===1){var E=arguments[0];l.prototype.add.call(this,E)}else if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var I=arguments[0],J=arguments[1];return this.add(I,J,!0),!0}if(arguments[0]instanceof G&&typeof arguments[1]=="boolean"){var at=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(at))return null;l.prototype.add.call(this,at)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var yt=arguments[0],St=arguments[1];return this.add(yt,St),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var Bt=arguments[0],Yt=arguments[1];if(arguments[2])for(var ee=0;ee<Bt.length;ee++)this.add(Bt[ee],Yt);else for(var xe=Bt.length-1;xe>=0;xe--)this.add(Bt[xe],Yt);return!0}if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof G){var Me=arguments[0],Be=arguments[1];if(!arguments[2]){var Ve=this.size();if(Ve>0&&(Me>0&&this.get(Me-1).equals2D(Be)||Me<Ve&&this.get(Me).equals2D(Be)))return null}l.prototype.add.call(this,Me,Be)}}else if(arguments.length===4){var pr=arguments[0],Hr=arguments[1],Nn=arguments[2],Ys=arguments[3],ko=1;Nn>Ys&&(ko=-1);for(var ph=Nn;ph!==Ys;ph+=ko)this.add(pr[ph],Hr);return!0}},h.prototype.closeRing=function(){this.size()>0&&this.add(new G(this.get(0)),!1)},h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},Object.defineProperties(h,b),h}($t),ue=function(){},Fe={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Fe.ForwardComparator.get=function(){return ai},Fe.BidirectionalComparator.get=function(){return Le},Fe.coordArrayType.get=function(){return new Array(0).fill(null)},ue.prototype.interfaces_=function(){return[]},ue.prototype.getClass=function(){return ue},ue.isRing=function(l){return!(l.length<4)&&!!l[0].equals2D(l[l.length-1])},ue.ptNotInList=function(l,h){for(var b=0;b<l.length;b++){var E=l[b];if(ue.indexOf(E,h)<0)return E}return null},ue.scroll=function(l,h){var b=ue.indexOf(h,l);if(b<0)return null;var E=new Array(l.length).fill(null);rt.arraycopy(l,b,E,0,l.length-b),rt.arraycopy(l,0,E,l.length-b,b),rt.arraycopy(E,0,l,0,l.length)},ue.equals=function(){if(arguments.length===2){var l=arguments[0],h=arguments[1];if(l===h)return!0;if(l===null||h===null||l.length!==h.length)return!1;for(var b=0;b<l.length;b++)if(!l[b].equals(h[b]))return!1;return!0}if(arguments.length===3){var E=arguments[0],I=arguments[1],J=arguments[2];if(E===I)return!0;if(E===null||I===null||E.length!==I.length)return!1;for(var at=0;at<E.length;at++)if(J.compare(E[at],I[at])!==0)return!1;return!0}},ue.intersection=function(l,h){for(var b=new bi,E=0;E<l.length;E++)h.intersects(l[E])&&b.add(l[E],!0);return b.toCoordinateArray()},ue.hasRepeatedPoints=function(l){for(var h=1;h<l.length;h++)if(l[h-1].equals(l[h]))return!0;return!1},ue.removeRepeatedPoints=function(l){return ue.hasRepeatedPoints(l)?new bi(l,!1).toCoordinateArray():l},ue.reverse=function(l){for(var h=l.length-1,b=Math.trunc(h/2),E=0;E<=b;E++){var I=l[E];l[E]=l[h-E],l[h-E]=I}},ue.removeNull=function(l){for(var h=0,b=0;b<l.length;b++)l[b]!==null&&h++;var E=new Array(h).fill(null);if(h===0)return E;for(var I=0,J=0;J<l.length;J++)l[J]!==null&&(E[I++]=l[J]);return E},ue.copyDeep=function(){if(arguments.length===1){for(var l=arguments[0],h=new Array(l.length).fill(null),b=0;b<l.length;b++)h[b]=new G(l[b]);return h}if(arguments.length===5)for(var E=arguments[0],I=arguments[1],J=arguments[2],at=arguments[3],yt=arguments[4],St=0;St<yt;St++)J[at+St]=new G(E[I+St])},ue.isEqualReversed=function(l,h){for(var b=0;b<l.length;b++){var E=l[b],I=h[l.length-b-1];if(E.compareTo(I)!==0)return!1}return!0},ue.envelope=function(l){for(var h=new wt,b=0;b<l.length;b++)h.expandToInclude(l[b]);return h},ue.toCoordinateArray=function(l){return l.toArray(ue.coordArrayType)},ue.atLeastNCoordinatesOrNothing=function(l,h){return h.length>=l?h:[]},ue.indexOf=function(l,h){for(var b=0;b<h.length;b++)if(l.equals(h[b]))return b;return-1},ue.increasingDirection=function(l){for(var h=0;h<Math.trunc(l.length/2);h++){var b=l.length-1-h,E=l[h].compareTo(l[b]);if(E!==0)return E}return 1},ue.compare=function(l,h){for(var b=0;b<l.length&&b<h.length;){var E=l[b].compareTo(h[b]);if(E!==0)return E;b++}return b<h.length?-1:b<l.length?1:0},ue.minCoordinate=function(l){for(var h=null,b=0;b<l.length;b++)(h===null||h.compareTo(l[b])>0)&&(h=l[b]);return h},ue.extract=function(l,h,b){h=C.clamp(h,0,l.length);var E=(b=C.clamp(b,-1,l.length))-h+1;b<0&&(E=0),h>=l.length&&(E=0),b<h&&(E=0);var I=new Array(E).fill(null);if(E===0)return I;for(var J=0,at=h;at<=b;at++)I[J++]=l[at];return I},Object.defineProperties(ue,Fe);var ai=function(){};ai.prototype.compare=function(l,h){return ue.compare(l,h)},ai.prototype.interfaces_=function(){return[q]},ai.prototype.getClass=function(){return ai};var Le=function(){};Le.prototype.compare=function(l,h){var b=l,E=h;if(b.length<E.length)return-1;if(b.length>E.length)return 1;if(b.length===0)return 0;var I=ue.compare(b,E);return ue.isEqualReversed(b,E)?0:I},Le.prototype.OLDcompare=function(l,h){var b=l,E=h;if(b.length<E.length)return-1;if(b.length>E.length)return 1;if(b.length===0)return 0;for(var I=ue.increasingDirection(b),J=ue.increasingDirection(E),at=I>0?0:b.length-1,yt=J>0?0:b.length-1,St=0;St<b.length;St++){var Bt=b[at].compareTo(E[yt]);if(Bt!==0)return Bt;at+=I,yt+=J}return 0},Le.prototype.interfaces_=function(){return[q]},Le.prototype.getClass=function(){return Le};var Oe=function(){};Oe.prototype.get=function(){},Oe.prototype.put=function(){},Oe.prototype.size=function(){},Oe.prototype.values=function(){},Oe.prototype.entrySet=function(){};var Qi=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),h.prototype=Object.create(l&&l.prototype),h.prototype.constructor=h,h}(Oe);(r.prototype=new Error).name="OperationNotSupported",(o.prototype=new ce).contains=function(){};var We=function(l){function h(){l.call(this),this.array_=[],arguments[0]instanceof ce&&this.addAll(arguments[0])}return l&&(h.__proto__=l),h.prototype=Object.create(l&&l.prototype),h.prototype.constructor=h,h.prototype.contains=function(b){for(var E=0,I=this.array_.length;E<I;E++)if(this.array_[E]===b)return!0;return!1},h.prototype.add=function(b){return!this.contains(b)&&(this.array_.push(b),!0)},h.prototype.addAll=function(b){for(var E=b.iterator();E.hasNext();)this.add(E.next());return!0},h.prototype.remove=function(b){throw new Error},h.prototype.size=function(){return this.array_.length},h.prototype.isEmpty=function(){return this.array_.length===0},h.prototype.toArray=function(){for(var b=[],E=0,I=this.array_.length;E<I;E++)b.push(this.array_[E]);return b},h.prototype.iterator=function(){return new At(this)},h}(o),At=function(l){function h(b){l.call(this),this.hashSet_=b,this.position_=0}return l&&(h.__proto__=l),h.prototype=Object.create(l&&l.prototype),h.prototype.constructor=h,h.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new i;return this.hashSet_.array_[this.position_++]},h.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},h.prototype.remove=function(){throw new r},h}(ke),qt=0;(d.prototype=new Qi).get=function(l){for(var h=this.root_;h!==null;){var b=l.compareTo(h.key);if(b<0)h=h.left;else{if(!(b>0))return h.value;h=h.right}}return null},d.prototype.put=function(l,h){if(this.root_===null)return this.root_={key:l,value:h,left:null,right:null,parent:null,color:qt,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var b,E,I=this.root_;do if(b=I,(E=l.compareTo(I.key))<0)I=I.left;else{if(!(E>0)){var J=I.value;return I.value=h,J}I=I.right}while(I!==null);var at={key:l,left:null,right:null,value:h,parent:b,color:qt,getValue:function(){return this.value},getKey:function(){return this.key}};return E<0?b.left=at:b.right=at,this.fixAfterInsertion(at),this.size_++,null},d.prototype.fixAfterInsertion=function(l){for(l.color=1;l!=null&&l!==this.root_&&l.parent.color===1;)if(s(l)===f(s(s(l)))){var h=c(s(s(l)));a(h)===1?(u(s(l),qt),u(h,qt),u(s(s(l)),1),l=s(s(l))):(l===c(s(l))&&(l=s(l),this.rotateLeft(l)),u(s(l),qt),u(s(s(l)),1),this.rotateRight(s(s(l))))}else{var b=f(s(s(l)));a(b)===1?(u(s(l),qt),u(b,qt),u(s(s(l)),1),l=s(s(l))):(l===f(s(l))&&(l=s(l),this.rotateRight(l)),u(s(l),qt),u(s(s(l)),1),this.rotateLeft(s(s(l))))}this.root_.color=qt},d.prototype.values=function(){var l=new $t,h=this.getFirstEntry();if(h!==null)for(l.add(h.value);(h=d.successor(h))!==null;)l.add(h.value);return l},d.prototype.entrySet=function(){var l=new We,h=this.getFirstEntry();if(h!==null)for(l.add(h);(h=d.successor(h))!==null;)l.add(h);return l},d.prototype.rotateLeft=function(l){if(l!=null){var h=l.right;l.right=h.left,h.left!=null&&(h.left.parent=l),h.parent=l.parent,l.parent===null?this.root_=h:l.parent.left===l?l.parent.left=h:l.parent.right=h,h.left=l,l.parent=h}},d.prototype.rotateRight=function(l){if(l!=null){var h=l.left;l.left=h.right,h.right!=null&&(h.right.parent=l),h.parent=l.parent,l.parent===null?this.root_=h:l.parent.right===l?l.parent.right=h:l.parent.left=h,h.right=l,l.parent=h}},d.prototype.getFirstEntry=function(){var l=this.root_;if(l!=null)for(;l.left!=null;)l=l.left;return l},d.successor=function(l){if(l===null)return null;if(l.right!==null){for(var h=l.right;h.left!==null;)h=h.left;return h}for(var b=l.parent,E=l;b!==null&&E===b.right;)E=b,b=b.parent;return b},d.prototype.size=function(){return this.size_};var jt=function(){};jt.prototype.interfaces_=function(){return[]},jt.prototype.getClass=function(){return jt},m.prototype=new o,(v.prototype=new m).contains=function(l){for(var h=0,b=this.array_.length;h<b;h++)if(this.array_[h].compareTo(l)===0)return!0;return!1},v.prototype.add=function(l){if(this.contains(l))return!1;for(var h=0,b=this.array_.length;h<b;h++)if(this.array_[h].compareTo(l)===1)return this.array_.splice(h,0,l),!0;return this.array_.push(l),!0},v.prototype.addAll=function(l){for(var h=l.iterator();h.hasNext();)this.add(h.next());return!0},v.prototype.remove=function(l){throw new r},v.prototype.size=function(){return this.array_.length},v.prototype.isEmpty=function(){return this.array_.length===0},v.prototype.toArray=function(){for(var l=[],h=0,b=this.array_.length;h<b;h++)l.push(this.array_[h]);return l},v.prototype.iterator=function(){return new ae(this)};var ae=function(l){this.treeSet_=l,this.position_=0};ae.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new i;return this.treeSet_.array_[this.position_++]},ae.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},ae.prototype.remove=function(){throw new r};var Qe=function(){};Qe.sort=function(){var l,h,b,E,I=arguments[0];if(arguments.length===1)E=function(at,yt){return at.compareTo(yt)},I.sort(E);else if(arguments.length===2)b=arguments[1],E=function(at,yt){return b.compare(at,yt)},I.sort(E);else if(arguments.length===3){(h=I.slice(arguments[1],arguments[2])).sort();var J=I.slice(0,arguments[1]).concat(h,I.slice(arguments[2],I.length));for(I.splice(0,I.length),l=0;l<J.length;l++)I.push(J[l])}else if(arguments.length===4)for(h=I.slice(arguments[1],arguments[2]),b=arguments[3],E=function(at,yt){return b.compare(at,yt)},h.sort(E),J=I.slice(0,arguments[1]).concat(h,I.slice(arguments[2],I.length)),I.splice(0,I.length),l=0;l<J.length;l++)I.push(J[l])},Qe.asList=function(l){for(var h=new $t,b=0,E=l.length;b<E;b++)h.add(l[b]);return h};var se=function(){},ve={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};ve.P.get=function(){return 0},ve.L.get=function(){return 1},ve.A.get=function(){return 2},ve.FALSE.get=function(){return-1},ve.TRUE.get=function(){return-2},ve.DONTCARE.get=function(){return-3},ve.SYM_FALSE.get=function(){return"F"},ve.SYM_TRUE.get=function(){return"T"},ve.SYM_DONTCARE.get=function(){return"*"},ve.SYM_P.get=function(){return"0"},ve.SYM_L.get=function(){return"1"},ve.SYM_A.get=function(){return"2"},se.prototype.interfaces_=function(){return[]},se.prototype.getClass=function(){return se},se.toDimensionSymbol=function(l){switch(l){case se.FALSE:return se.SYM_FALSE;case se.TRUE:return se.SYM_TRUE;case se.DONTCARE:return se.SYM_DONTCARE;case se.P:return se.SYM_P;case se.L:return se.SYM_L;case se.A:return se.SYM_A}throw new S("Unknown dimension value: "+l)},se.toDimensionValue=function(l){switch(F.toUpperCase(l)){case se.SYM_FALSE:return se.FALSE;case se.SYM_TRUE:return se.TRUE;case se.SYM_DONTCARE:return se.DONTCARE;case se.SYM_P:return se.P;case se.SYM_L:return se.L;case se.SYM_A:return se.A}throw new S("Unknown dimension symbol: "+l)},Object.defineProperties(se,ve);var $e=function(){};$e.prototype.filter=function(l){},$e.prototype.interfaces_=function(){return[]},$e.prototype.getClass=function(){return $e};var Ae=function(){};Ae.prototype.filter=function(l,h){},Ae.prototype.isDone=function(){},Ae.prototype.isGeometryChanged=function(){},Ae.prototype.interfaces_=function(){return[]},Ae.prototype.getClass=function(){return Ae};var fe=function(l){function h(E,I){if(l.call(this,I),this._geometries=E||[],l.hasNullElements(this._geometries))throw new S("geometries must not contain null elements")}l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h;var b={serialVersionUID:{configurable:!0}};return h.prototype.computeEnvelopeInternal=function(){for(var E=new wt,I=0;I<this._geometries.length;I++)E.expandToInclude(this._geometries[I].getEnvelopeInternal());return E},h.prototype.getGeometryN=function(E){return this._geometries[E]},h.prototype.getSortIndex=function(){return l.SORTINDEX_GEOMETRYCOLLECTION},h.prototype.getCoordinates=function(){for(var E=new Array(this.getNumPoints()).fill(null),I=-1,J=0;J<this._geometries.length;J++)for(var at=this._geometries[J].getCoordinates(),yt=0;yt<at.length;yt++)E[++I]=at[yt];return E},h.prototype.getArea=function(){for(var E=0,I=0;I<this._geometries.length;I++)E+=this._geometries[I].getArea();return E},h.prototype.equalsExact=function(){if(arguments.length===2){var E=arguments[0],I=arguments[1];if(!this.isEquivalentClass(E))return!1;var J=E;if(this._geometries.length!==J._geometries.length)return!1;for(var at=0;at<this._geometries.length;at++)if(!this._geometries[at].equalsExact(J._geometries[at],I))return!1;return!0}return l.prototype.equalsExact.apply(this,arguments)},h.prototype.normalize=function(){for(var E=0;E<this._geometries.length;E++)this._geometries[E].normalize();Qe.sort(this._geometries)},h.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},h.prototype.getBoundaryDimension=function(){for(var E=se.FALSE,I=0;I<this._geometries.length;I++)E=Math.max(E,this._geometries[I].getBoundaryDimension());return E},h.prototype.getDimension=function(){for(var E=se.FALSE,I=0;I<this._geometries.length;I++)E=Math.max(E,this._geometries[I].getDimension());return E},h.prototype.getLength=function(){for(var E=0,I=0;I<this._geometries.length;I++)E+=this._geometries[I].getLength();return E},h.prototype.getNumPoints=function(){for(var E=0,I=0;I<this._geometries.length;I++)E+=this._geometries[I].getNumPoints();return E},h.prototype.getNumGeometries=function(){return this._geometries.length},h.prototype.reverse=function(){for(var E=this._geometries.length,I=new Array(E).fill(null),J=0;J<this._geometries.length;J++)I[J]=this._geometries[J].reverse();return this.getFactory().createGeometryCollection(I)},h.prototype.compareToSameClass=function(){if(arguments.length===1){var E=arguments[0],I=new v(Qe.asList(this._geometries)),J=new v(Qe.asList(E._geometries));return this.compare(I,J)}if(arguments.length===2){for(var at=arguments[0],yt=arguments[1],St=at,Bt=this.getNumGeometries(),Yt=St.getNumGeometries(),ee=0;ee<Bt&&ee<Yt;){var xe=this.getGeometryN(ee),Me=St.getGeometryN(ee),Be=xe.compareToSameClass(Me,yt);if(Be!==0)return Be;ee++}return ee<Bt?1:ee<Yt?-1:0}},h.prototype.apply=function(){if(w(arguments[0],ie))for(var E=arguments[0],I=0;I<this._geometries.length;I++)this._geometries[I].apply(E);else if(w(arguments[0],Ae)){var J=arguments[0];if(this._geometries.length===0)return null;for(var at=0;at<this._geometries.length&&(this._geometries[at].apply(J),!J.isDone());at++);J.isGeometryChanged()&&this.geometryChanged()}else if(w(arguments[0],$e)){var yt=arguments[0];yt.filter(this);for(var St=0;St<this._geometries.length;St++)this._geometries[St].apply(yt)}else if(w(arguments[0],zt)){var Bt=arguments[0];Bt.filter(this);for(var Yt=0;Yt<this._geometries.length;Yt++)this._geometries[Yt].apply(Bt)}},h.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),Q.shouldNeverReachHere(),null},h.prototype.clone=function(){var E=l.prototype.clone.call(this);E._geometries=new Array(this._geometries.length).fill(null);for(var I=0;I<this._geometries.length;I++)E._geometries[I]=this._geometries[I].clone();return E},h.prototype.getGeometryType=function(){return"GeometryCollection"},h.prototype.copy=function(){for(var E=new Array(this._geometries.length).fill(null),I=0;I<E.length;I++)E[I]=this._geometries[I].copy();return new h(E,this._factory)},h.prototype.isEmpty=function(){for(var E=0;E<this._geometries.length;E++)if(!this._geometries[E].isEmpty())return!1;return!0},h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},b.serialVersionUID.get=function(){return-5694727726395021e3},Object.defineProperties(h,b),h}(Gt),Ye=function(l){function h(){l.apply(this,arguments)}l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h;var b={serialVersionUID:{configurable:!0}};return h.prototype.getSortIndex=function(){return Gt.SORTINDEX_MULTILINESTRING},h.prototype.equalsExact=function(){if(arguments.length===2){var E=arguments[0],I=arguments[1];return!!this.isEquivalentClass(E)&&l.prototype.equalsExact.call(this,E,I)}return l.prototype.equalsExact.apply(this,arguments)},h.prototype.getBoundaryDimension=function(){return this.isClosed()?se.FALSE:0},h.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var E=0;E<this._geometries.length;E++)if(!this._geometries[E].isClosed())return!1;return!0},h.prototype.getDimension=function(){return 1},h.prototype.reverse=function(){for(var E=this._geometries.length,I=new Array(E).fill(null),J=0;J<this._geometries.length;J++)I[E-1-J]=this._geometries[J].reverse();return this.getFactory().createMultiLineString(I)},h.prototype.getBoundary=function(){return new Ue(this).getBoundary()},h.prototype.getGeometryType=function(){return"MultiLineString"},h.prototype.copy=function(){for(var E=new Array(this._geometries.length).fill(null),I=0;I<E.length;I++)E[I]=this._geometries[I].copy();return new h(E,this._factory)},h.prototype.interfaces_=function(){return[jt]},h.prototype.getClass=function(){return h},b.serialVersionUID.get=function(){return 8166665132445434e3},Object.defineProperties(h,b),h}(fe),Ue=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,arguments.length===1){var l=arguments[0],h=Xt.MOD2_BOUNDARY_RULE;this._geom=l,this._geomFact=l.getFactory(),this._bnRule=h}else if(arguments.length===2){var b=arguments[0],E=arguments[1];this._geom=b,this._geomFact=b.getFactory(),this._bnRule=E}};Ue.prototype.boundaryMultiLineString=function(l){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var h=this.computeBoundaryCoordinates(l);return h.length===1?this._geomFact.createPoint(h[0]):this._geomFact.createMultiPointFromCoords(h)},Ue.prototype.getBoundary=function(){return this._geom instanceof oi?this.boundaryLineString(this._geom):this._geom instanceof Ye?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Ue.prototype.boundaryLineString=function(l){return this._geom.isEmpty()?this.getEmptyMultiPoint():l.isClosed()?this._bnRule.isInBoundary(2)?l.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([l.getStartPoint(),l.getEndPoint()])},Ue.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Ue.prototype.computeBoundaryCoordinates=function(l){var h=new $t;this._endpointMap=new d;for(var b=0;b<l.getNumGeometries();b++){var E=l.getGeometryN(b);E.getNumPoints()!==0&&(this.addEndpoint(E.getCoordinateN(0)),this.addEndpoint(E.getCoordinateN(E.getNumPoints()-1)))}for(var I=this._endpointMap.entrySet().iterator();I.hasNext();){var J=I.next(),at=J.getValue().count;this._bnRule.isInBoundary(at)&&h.add(J.getKey())}return ue.toCoordinateArray(h)},Ue.prototype.addEndpoint=function(l){var h=this._endpointMap.get(l);h===null&&(h=new ii,this._endpointMap.put(l,h)),h.count++},Ue.prototype.interfaces_=function(){return[]},Ue.prototype.getClass=function(){return Ue},Ue.getBoundary=function(){if(arguments.length===1){var l=arguments[0];return new Ue(l).getBoundary()}if(arguments.length===2){var h=arguments[0],b=arguments[1];return new Ue(h,b).getBoundary()}};var ii=function(){this.count=null};ii.prototype.interfaces_=function(){return[]},ii.prototype.getClass=function(){return ii};var Ke=function(){},fr={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Ke.prototype.interfaces_=function(){return[]},Ke.prototype.getClass=function(){return Ke},Ke.chars=function(l,h){for(var b=new Array(h).fill(null),E=0;E<h;E++)b[E]=l;return String(b)},Ke.getStackTrace=function(){if(arguments.length===1){var l=arguments[0],h=new function(){},b=new function(){}(h);return l.printStackTrace(b),h.toString()}if(arguments.length===2){for(var E=arguments[0],I=arguments[1],J="",at=new function(){}(new function(){}(Ke.getStackTrace(E))),yt=0;yt<I;yt++)try{J+=at.readLine()+Ke.NEWLINE}catch(St){if(!(St instanceof p))throw St;Q.shouldNeverReachHere()}return J}},Ke.split=function(l,h){for(var b=h.length,E=new $t,I=""+l,J=I.indexOf(h);J>=0;){var at=I.substring(0,J);E.add(at),J=(I=I.substring(J+b)).indexOf(h)}I.length>0&&E.add(I);for(var yt=new Array(E.size()).fill(null),St=0;St<yt.length;St++)yt[St]=E.get(St);return yt},Ke.toString=function(){if(arguments.length===1){var l=arguments[0];return Ke.SIMPLE_ORDINATE_FORMAT.format(l)}},Ke.spaces=function(l){return Ke.chars(" ",l)},fr.NEWLINE.get=function(){return rt.getProperty("line.separator")},fr.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(Ke,fr);var Je=function(){};Je.prototype.interfaces_=function(){return[]},Je.prototype.getClass=function(){return Je},Je.copyCoord=function(l,h,b,E){for(var I=Math.min(l.getDimension(),b.getDimension()),J=0;J<I;J++)b.setOrdinate(E,J,l.getOrdinate(h,J))},Je.isRing=function(l){var h=l.size();return h===0||!(h<=3)&&l.getOrdinate(0,$.X)===l.getOrdinate(h-1,$.X)&&l.getOrdinate(0,$.Y)===l.getOrdinate(h-1,$.Y)},Je.isEqual=function(l,h){var b=l.size();if(b!==h.size())return!1;for(var E=Math.min(l.getDimension(),h.getDimension()),I=0;I<b;I++)for(var J=0;J<E;J++){var at=l.getOrdinate(I,J),yt=h.getOrdinate(I,J);if(l.getOrdinate(I,J)!==h.getOrdinate(I,J)&&(!O.isNaN(at)||!O.isNaN(yt)))return!1}return!0},Je.extend=function(l,h,b){var E=l.create(b,h.getDimension()),I=h.size();if(Je.copy(h,0,E,0,I),I>0)for(var J=I;J<b;J++)Je.copy(h,I-1,E,J,1);return E},Je.reverse=function(l){for(var h=l.size()-1,b=Math.trunc(h/2),E=0;E<=b;E++)Je.swap(l,E,h-E)},Je.swap=function(l,h,b){if(h===b)return null;for(var E=0;E<l.getDimension();E++){var I=l.getOrdinate(h,E);l.setOrdinate(h,E,l.getOrdinate(b,E)),l.setOrdinate(b,E,I)}},Je.copy=function(l,h,b,E,I){for(var J=0;J<I;J++)Je.copyCoord(l,h+J,b,E+J)},Je.toString=function(){if(arguments.length===1){var l=arguments[0],h=l.size();if(h===0)return"()";var b=l.getDimension(),E=new T;E.append("(");for(var I=0;I<h;I++){I>0&&E.append(" ");for(var J=0;J<b;J++)J>0&&E.append(","),E.append(Ke.toString(l.getOrdinate(I,J)))}return E.append(")"),E.toString()}},Je.ensureValidRing=function(l,h){var b=h.size();return b===0?h:b<=3?Je.createClosedRing(l,h,4):h.getOrdinate(0,$.X)===h.getOrdinate(b-1,$.X)&&h.getOrdinate(0,$.Y)===h.getOrdinate(b-1,$.Y)?h:Je.createClosedRing(l,h,b+1)},Je.createClosedRing=function(l,h,b){var E=l.create(b,h.getDimension()),I=h.size();Je.copy(h,0,E,0,I);for(var J=I;J<b;J++)Je.copy(h,0,E,J,1);return E};var oi=function(l){function h(E,I){l.call(this,I),this._points=null,this.init(E)}l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h;var b={serialVersionUID:{configurable:!0}};return h.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new wt:this._points.expandEnvelope(new wt)},h.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},h.prototype.getSortIndex=function(){return l.SORTINDEX_LINESTRING},h.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},h.prototype.equalsExact=function(){if(arguments.length===2){var E=arguments[0],I=arguments[1];if(!this.isEquivalentClass(E))return!1;var J=E;if(this._points.size()!==J._points.size())return!1;for(var at=0;at<this._points.size();at++)if(!this.equal(this._points.getCoordinate(at),J._points.getCoordinate(at),I))return!1;return!0}return l.prototype.equalsExact.apply(this,arguments)},h.prototype.normalize=function(){for(var E=0;E<Math.trunc(this._points.size()/2);E++){var I=this._points.size()-1-E;if(!this._points.getCoordinate(E).equals(this._points.getCoordinate(I)))return this._points.getCoordinate(E).compareTo(this._points.getCoordinate(I))>0&&Je.reverse(this._points),null}},h.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},h.prototype.getBoundaryDimension=function(){return this.isClosed()?se.FALSE:0},h.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},h.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},h.prototype.getDimension=function(){return 1},h.prototype.getLength=function(){return Et.computeLength(this._points)},h.prototype.getNumPoints=function(){return this._points.size()},h.prototype.reverse=function(){var E=this._points.copy();return Je.reverse(E),this.getFactory().createLineString(E)},h.prototype.compareToSameClass=function(){if(arguments.length===1){for(var E=arguments[0],I=0,J=0;I<this._points.size()&&J<E._points.size();){var at=this._points.getCoordinate(I).compareTo(E._points.getCoordinate(J));if(at!==0)return at;I++,J++}return I<this._points.size()?1:J<E._points.size()?-1:0}if(arguments.length===2){var yt=arguments[0];return arguments[1].compare(this._points,yt._points)}},h.prototype.apply=function(){if(w(arguments[0],ie))for(var E=arguments[0],I=0;I<this._points.size();I++)E.filter(this._points.getCoordinate(I));else if(w(arguments[0],Ae)){var J=arguments[0];if(this._points.size()===0)return null;for(var at=0;at<this._points.size()&&(J.filter(this._points,at),!J.isDone());at++);J.isGeometryChanged()&&this.geometryChanged()}else w(arguments[0],$e)?arguments[0].filter(this):w(arguments[0],zt)&&arguments[0].filter(this)},h.prototype.getBoundary=function(){return new Ue(this).getBoundary()},h.prototype.isEquivalentClass=function(E){return E instanceof h},h.prototype.clone=function(){var E=l.prototype.clone.call(this);return E._points=this._points.clone(),E},h.prototype.getCoordinateN=function(E){return this._points.getCoordinate(E)},h.prototype.getGeometryType=function(){return"LineString"},h.prototype.copy=function(){return new h(this._points.copy(),this._factory)},h.prototype.getCoordinateSequence=function(){return this._points},h.prototype.isEmpty=function(){return this._points.size()===0},h.prototype.init=function(E){if(E===null&&(E=this.getFactory().getCoordinateSequenceFactory().create([])),E.size()===1)throw new S("Invalid number of points in LineString (found "+E.size()+" - must be 0 or >= 2)");this._points=E},h.prototype.isCoordinate=function(E){for(var I=0;I<this._points.size();I++)if(this._points.getCoordinate(I).equals(E))return!0;return!1},h.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},h.prototype.getPointN=function(E){return this.getFactory().createPoint(this._points.getCoordinate(E))},h.prototype.interfaces_=function(){return[jt]},h.prototype.getClass=function(){return h},b.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(h,b),h}(Gt),lr=function(){};lr.prototype.interfaces_=function(){return[]},lr.prototype.getClass=function(){return lr};var Mi=function(l){function h(E,I){l.call(this,I),this._coordinates=E||null,this.init(this._coordinates)}l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h;var b={serialVersionUID:{configurable:!0}};return h.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new wt;var E=new wt;return E.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),E},h.prototype.getSortIndex=function(){return l.SORTINDEX_POINT},h.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},h.prototype.equalsExact=function(){if(arguments.length===2){var E=arguments[0],I=arguments[1];return!!this.isEquivalentClass(E)&&(!(!this.isEmpty()||!E.isEmpty())||this.isEmpty()===E.isEmpty()&&this.equal(E.getCoordinate(),this.getCoordinate(),I))}return l.prototype.equalsExact.apply(this,arguments)},h.prototype.normalize=function(){},h.prototype.getCoordinate=function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null},h.prototype.getBoundaryDimension=function(){return se.FALSE},h.prototype.getDimension=function(){return 0},h.prototype.getNumPoints=function(){return this.isEmpty()?0:1},h.prototype.reverse=function(){return this.copy()},h.prototype.getX=function(){if(this.getCoordinate()===null)throw new Error("getX called on empty Point");return this.getCoordinate().x},h.prototype.compareToSameClass=function(){if(arguments.length===1){var E=arguments[0];return this.getCoordinate().compareTo(E.getCoordinate())}if(arguments.length===2){var I=arguments[0];return arguments[1].compare(this._coordinates,I._coordinates)}},h.prototype.apply=function(){if(w(arguments[0],ie)){var E=arguments[0];if(this.isEmpty())return null;E.filter(this.getCoordinate())}else if(w(arguments[0],Ae)){var I=arguments[0];if(this.isEmpty())return null;I.filter(this._coordinates,0),I.isGeometryChanged()&&this.geometryChanged()}else w(arguments[0],$e)?arguments[0].filter(this):w(arguments[0],zt)&&arguments[0].filter(this)},h.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},h.prototype.clone=function(){var E=l.prototype.clone.call(this);return E._coordinates=this._coordinates.clone(),E},h.prototype.getGeometryType=function(){return"Point"},h.prototype.copy=function(){return new h(this._coordinates.copy(),this._factory)},h.prototype.getCoordinateSequence=function(){return this._coordinates},h.prototype.getY=function(){if(this.getCoordinate()===null)throw new Error("getY called on empty Point");return this.getCoordinate().y},h.prototype.isEmpty=function(){return this._coordinates.size()===0},h.prototype.init=function(E){E===null&&(E=this.getFactory().getCoordinateSequenceFactory().create([])),Q.isTrue(E.size()<=1),this._coordinates=E},h.prototype.isSimple=function(){return!0},h.prototype.interfaces_=function(){return[lr]},h.prototype.getClass=function(){return h},b.serialVersionUID.get=function(){return 4902022702746615e3},Object.defineProperties(h,b),h}(Gt),Tt=function(){};Tt.prototype.interfaces_=function(){return[]},Tt.prototype.getClass=function(){return Tt};var Ht=function(l){function h(E,I,J){if(l.call(this,J),this._shell=null,this._holes=null,E===null&&(E=this.getFactory().createLinearRing()),I===null&&(I=[]),l.hasNullElements(I))throw new S("holes must not contain null elements");if(E.isEmpty()&&l.hasNonEmptyElements(I))throw new S("shell is empty but holes are not");this._shell=E,this._holes=I}l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h;var b={serialVersionUID:{configurable:!0}};return h.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},h.prototype.getSortIndex=function(){return l.SORTINDEX_POLYGON},h.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var E=new Array(this.getNumPoints()).fill(null),I=-1,J=this._shell.getCoordinates(),at=0;at<J.length;at++)E[++I]=J[at];for(var yt=0;yt<this._holes.length;yt++)for(var St=this._holes[yt].getCoordinates(),Bt=0;Bt<St.length;Bt++)E[++I]=St[Bt];return E},h.prototype.getArea=function(){var E=0;E+=Math.abs(Et.signedArea(this._shell.getCoordinateSequence()));for(var I=0;I<this._holes.length;I++)E-=Math.abs(Et.signedArea(this._holes[I].getCoordinateSequence()));return E},h.prototype.isRectangle=function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var E=this._shell.getCoordinateSequence(),I=this.getEnvelopeInternal(),J=0;J<5;J++){var at=E.getX(J);if(at!==I.getMinX()&&at!==I.getMaxX())return!1;var yt=E.getY(J);if(yt!==I.getMinY()&&yt!==I.getMaxY())return!1}for(var St=E.getX(0),Bt=E.getY(0),Yt=1;Yt<=4;Yt++){var ee=E.getX(Yt),xe=E.getY(Yt);if(ee!==St==(xe!==Bt))return!1;St=ee,Bt=xe}return!0},h.prototype.equalsExact=function(){if(arguments.length===2){var E=arguments[0],I=arguments[1];if(!this.isEquivalentClass(E))return!1;var J=E,at=this._shell,yt=J._shell;if(!at.equalsExact(yt,I)||this._holes.length!==J._holes.length)return!1;for(var St=0;St<this._holes.length;St++)if(!this._holes[St].equalsExact(J._holes[St],I))return!1;return!0}return l.prototype.equalsExact.apply(this,arguments)},h.prototype.normalize=function(){if(arguments.length===0){this.normalize(this._shell,!0);for(var E=0;E<this._holes.length;E++)this.normalize(this._holes[E],!1);Qe.sort(this._holes)}else if(arguments.length===2){var I=arguments[0],J=arguments[1];if(I.isEmpty())return null;var at=new Array(I.getCoordinates().length-1).fill(null);rt.arraycopy(I.getCoordinates(),0,at,0,at.length);var yt=ue.minCoordinate(I.getCoordinates());ue.scroll(at,yt),rt.arraycopy(at,0,I.getCoordinates(),0,at.length),I.getCoordinates()[at.length]=at[0],Et.isCCW(I.getCoordinates())===J&&ue.reverse(I.getCoordinates())}},h.prototype.getCoordinate=function(){return this._shell.getCoordinate()},h.prototype.getNumInteriorRing=function(){return this._holes.length},h.prototype.getBoundaryDimension=function(){return 1},h.prototype.getDimension=function(){return 2},h.prototype.getLength=function(){var E=0;E+=this._shell.getLength();for(var I=0;I<this._holes.length;I++)E+=this._holes[I].getLength();return E},h.prototype.getNumPoints=function(){for(var E=this._shell.getNumPoints(),I=0;I<this._holes.length;I++)E+=this._holes[I].getNumPoints();return E},h.prototype.reverse=function(){var E=this.copy();E._shell=this._shell.copy().reverse(),E._holes=new Array(this._holes.length).fill(null);for(var I=0;I<this._holes.length;I++)E._holes[I]=this._holes[I].copy().reverse();return E},h.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},h.prototype.compareToSameClass=function(){if(arguments.length===1){var E=arguments[0],I=this._shell,J=E._shell;return I.compareToSameClass(J)}if(arguments.length===2){var at=arguments[0],yt=arguments[1],St=at,Bt=this._shell,Yt=St._shell,ee=Bt.compareToSameClass(Yt,yt);if(ee!==0)return ee;for(var xe=this.getNumInteriorRing(),Me=St.getNumInteriorRing(),Be=0;Be<xe&&Be<Me;){var Ve=this.getInteriorRingN(Be),pr=St.getInteriorRingN(Be),Hr=Ve.compareToSameClass(pr,yt);if(Hr!==0)return Hr;Be++}return Be<xe?1:Be<Me?-1:0}},h.prototype.apply=function(E){if(w(E,ie)){this._shell.apply(E);for(var I=0;I<this._holes.length;I++)this._holes[I].apply(E)}else if(w(E,Ae)){if(this._shell.apply(E),!E.isDone())for(var J=0;J<this._holes.length&&(this._holes[J].apply(E),!E.isDone());J++);E.isGeometryChanged()&&this.geometryChanged()}else if(w(E,$e))E.filter(this);else if(w(E,zt)){E.filter(this),this._shell.apply(E);for(var at=0;at<this._holes.length;at++)this._holes[at].apply(E)}},h.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var E=new Array(this._holes.length+1).fill(null);E[0]=this._shell;for(var I=0;I<this._holes.length;I++)E[I+1]=this._holes[I];return E.length<=1?this.getFactory().createLinearRing(E[0].getCoordinateSequence()):this.getFactory().createMultiLineString(E)},h.prototype.clone=function(){var E=l.prototype.clone.call(this);E._shell=this._shell.clone(),E._holes=new Array(this._holes.length).fill(null);for(var I=0;I<this._holes.length;I++)E._holes[I]=this._holes[I].clone();return E},h.prototype.getGeometryType=function(){return"Polygon"},h.prototype.copy=function(){for(var E=this._shell.copy(),I=new Array(this._holes.length).fill(null),J=0;J<I.length;J++)I[J]=this._holes[J].copy();return new h(E,I,this._factory)},h.prototype.getExteriorRing=function(){return this._shell},h.prototype.isEmpty=function(){return this._shell.isEmpty()},h.prototype.getInteriorRingN=function(E){return this._holes[E]},h.prototype.interfaces_=function(){return[Tt]},h.prototype.getClass=function(){return h},b.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(h,b),h}(Gt),re=function(l){function h(){l.apply(this,arguments)}l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h;var b={serialVersionUID:{configurable:!0}};return h.prototype.getSortIndex=function(){return Gt.SORTINDEX_MULTIPOINT},h.prototype.isValid=function(){return!0},h.prototype.equalsExact=function(){if(arguments.length===2){var E=arguments[0],I=arguments[1];return!!this.isEquivalentClass(E)&&l.prototype.equalsExact.call(this,E,I)}return l.prototype.equalsExact.apply(this,arguments)},h.prototype.getCoordinate=function(){if(arguments.length===1){var E=arguments[0];return this._geometries[E].getCoordinate()}return l.prototype.getCoordinate.apply(this,arguments)},h.prototype.getBoundaryDimension=function(){return se.FALSE},h.prototype.getDimension=function(){return 0},h.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},h.prototype.getGeometryType=function(){return"MultiPoint"},h.prototype.copy=function(){for(var E=new Array(this._geometries.length).fill(null),I=0;I<E.length;I++)E[I]=this._geometries[I].copy();return new h(E,this._factory)},h.prototype.interfaces_=function(){return[lr]},h.prototype.getClass=function(){return h},b.serialVersionUID.get=function(){return-8048474874175356e3},Object.defineProperties(h,b),h}(fe),Qt=function(l){function h(E,I){E instanceof G&&I instanceof Se&&(E=I.getCoordinateSequenceFactory().create(E)),l.call(this,E,I),this.validateConstruction()}l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h;var b={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return h.prototype.getSortIndex=function(){return Gt.SORTINDEX_LINEARRING},h.prototype.getBoundaryDimension=function(){return se.FALSE},h.prototype.isClosed=function(){return!!this.isEmpty()||l.prototype.isClosed.call(this)},h.prototype.reverse=function(){var E=this._points.copy();return Je.reverse(E),this.getFactory().createLinearRing(E)},h.prototype.validateConstruction=function(){if(!this.isEmpty()&&!l.prototype.isClosed.call(this))throw new S("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<h.MINIMUM_VALID_SIZE)throw new S("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},h.prototype.getGeometryType=function(){return"LinearRing"},h.prototype.copy=function(){return new h(this._points.copy(),this._factory)},h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},b.MINIMUM_VALID_SIZE.get=function(){return 4},b.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(h,b),h}(oi),he=function(l){function h(){l.apply(this,arguments)}l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h;var b={serialVersionUID:{configurable:!0}};return h.prototype.getSortIndex=function(){return Gt.SORTINDEX_MULTIPOLYGON},h.prototype.equalsExact=function(){if(arguments.length===2){var E=arguments[0],I=arguments[1];return!!this.isEquivalentClass(E)&&l.prototype.equalsExact.call(this,E,I)}return l.prototype.equalsExact.apply(this,arguments)},h.prototype.getBoundaryDimension=function(){return 1},h.prototype.getDimension=function(){return 2},h.prototype.reverse=function(){for(var E=this._geometries.length,I=new Array(E).fill(null),J=0;J<this._geometries.length;J++)I[J]=this._geometries[J].reverse();return this.getFactory().createMultiPolygon(I)},h.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var E=new $t,I=0;I<this._geometries.length;I++)for(var J=this._geometries[I].getBoundary(),at=0;at<J.getNumGeometries();at++)E.add(J.getGeometryN(at));var yt=new Array(E.size()).fill(null);return this.getFactory().createMultiLineString(E.toArray(yt))},h.prototype.getGeometryType=function(){return"MultiPolygon"},h.prototype.copy=function(){for(var E=new Array(this._geometries.length).fill(null),I=0;I<E.length;I++)E[I]=this._geometries[I].copy();return new h(E,this._factory)},h.prototype.interfaces_=function(){return[Tt]},h.prototype.getClass=function(){return h},b.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(h,b),h}(fe),Ee=function(l){this._factory=l||null,this._isUserDataCopied=!1},Ie={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};Ee.prototype.setCopyUserData=function(l){this._isUserDataCopied=l},Ee.prototype.edit=function(l,h){if(l===null)return null;var b=this.editInternal(l,h);return this._isUserDataCopied&&b.setUserData(l.getUserData()),b},Ee.prototype.editInternal=function(l,h){return this._factory===null&&(this._factory=l.getFactory()),l instanceof fe?this.editGeometryCollection(l,h):l instanceof Ht?this.editPolygon(l,h):l instanceof Mi?h.edit(l,this._factory):l instanceof oi?h.edit(l,this._factory):(Q.shouldNeverReachHere("Unsupported Geometry class: "+l.getClass().getName()),null)},Ee.prototype.editGeometryCollection=function(l,h){for(var b=h.edit(l,this._factory),E=new $t,I=0;I<b.getNumGeometries();I++){var J=this.edit(b.getGeometryN(I),h);J===null||J.isEmpty()||E.add(J)}return b.getClass()===re?this._factory.createMultiPoint(E.toArray([])):b.getClass()===Ye?this._factory.createMultiLineString(E.toArray([])):b.getClass()===he?this._factory.createMultiPolygon(E.toArray([])):this._factory.createGeometryCollection(E.toArray([]))},Ee.prototype.editPolygon=function(l,h){var b=h.edit(l,this._factory);if(b===null&&(b=this._factory.createPolygon(null)),b.isEmpty())return b;var E=this.edit(b.getExteriorRing(),h);if(E===null||E.isEmpty())return this._factory.createPolygon();for(var I=new $t,J=0;J<b.getNumInteriorRing();J++){var at=this.edit(b.getInteriorRingN(J),h);at===null||at.isEmpty()||I.add(at)}return this._factory.createPolygon(E,I.toArray([]))},Ee.prototype.interfaces_=function(){return[]},Ee.prototype.getClass=function(){return Ee},Ee.GeometryEditorOperation=function(){},Ie.NoOpGeometryOperation.get=function(){return ti},Ie.CoordinateOperation.get=function(){return Ge},Ie.CoordinateSequenceOperation.get=function(){return we},Object.defineProperties(Ee,Ie);var ti=function(){};ti.prototype.edit=function(l,h){return l},ti.prototype.interfaces_=function(){return[Ee.GeometryEditorOperation]},ti.prototype.getClass=function(){return ti};var Ge=function(){};Ge.prototype.edit=function(l,h){var b=this.editCoordinates(l.getCoordinates(),l);return b===null?l:l instanceof Qt?h.createLinearRing(b):l instanceof oi?h.createLineString(b):l instanceof Mi?b.length>0?h.createPoint(b[0]):h.createPoint():l},Ge.prototype.interfaces_=function(){return[Ee.GeometryEditorOperation]},Ge.prototype.getClass=function(){return Ge};var we=function(){};we.prototype.edit=function(l,h){return l instanceof Qt?h.createLinearRing(this.edit(l.getCoordinateSequence(),l)):l instanceof oi?h.createLineString(this.edit(l.getCoordinateSequence(),l)):l instanceof Mi?h.createPoint(this.edit(l.getCoordinateSequence(),l)):l},we.prototype.interfaces_=function(){return[Ee.GeometryEditorOperation]},we.prototype.getClass=function(){return we};var pe=function(){if(this._dimension=3,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var l=arguments[0];this._coordinates=new Array(l).fill(null);for(var h=0;h<l;h++)this._coordinates[h]=new G}else if(w(arguments[0],$)){var b=arguments[0];if(b===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=b.getDimension(),this._coordinates=new Array(b.size()).fill(null);for(var E=0;E<this._coordinates.length;E++)this._coordinates[E]=b.getCoordinateCopy(E)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var I=arguments[0],J=arguments[1];this._coordinates=I,this._dimension=J,I===null&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var at=arguments[0],yt=arguments[1];this._coordinates=new Array(at).fill(null),this._dimension=yt;for(var St=0;St<at;St++)this._coordinates[St]=new G}}},yi={serialVersionUID:{configurable:!0}};pe.prototype.setOrdinate=function(l,h,b){switch(h){case $.X:this._coordinates[l].x=b;break;case $.Y:this._coordinates[l].y=b;break;case $.Z:this._coordinates[l].z=b;break;default:throw new S("invalid ordinateIndex")}},pe.prototype.size=function(){return this._coordinates.length},pe.prototype.getOrdinate=function(l,h){switch(h){case $.X:return this._coordinates[l].x;case $.Y:return this._coordinates[l].y;case $.Z:return this._coordinates[l].z}return O.NaN},pe.prototype.getCoordinate=function(){if(arguments.length===1){var l=arguments[0];return this._coordinates[l]}if(arguments.length===2){var h=arguments[0],b=arguments[1];b.x=this._coordinates[h].x,b.y=this._coordinates[h].y,b.z=this._coordinates[h].z}},pe.prototype.getCoordinateCopy=function(l){return new G(this._coordinates[l])},pe.prototype.getDimension=function(){return this._dimension},pe.prototype.getX=function(l){return this._coordinates[l].x},pe.prototype.clone=function(){for(var l=new Array(this.size()).fill(null),h=0;h<this._coordinates.length;h++)l[h]=this._coordinates[h].clone();return new pe(l,this._dimension)},pe.prototype.expandEnvelope=function(l){for(var h=0;h<this._coordinates.length;h++)l.expandToInclude(this._coordinates[h]);return l},pe.prototype.copy=function(){for(var l=new Array(this.size()).fill(null),h=0;h<this._coordinates.length;h++)l[h]=this._coordinates[h].copy();return new pe(l,this._dimension)},pe.prototype.toString=function(){if(this._coordinates.length>0){var l=new T(17*this._coordinates.length);l.append("("),l.append(this._coordinates[0]);for(var h=1;h<this._coordinates.length;h++)l.append(", "),l.append(this._coordinates[h]);return l.append(")"),l.toString()}return"()"},pe.prototype.getY=function(l){return this._coordinates[l].y},pe.prototype.toCoordinateArray=function(){return this._coordinates},pe.prototype.interfaces_=function(){return[$,t]},pe.prototype.getClass=function(){return pe},yi.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(pe,yi);var ri=function(){},li={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};ri.prototype.readResolve=function(){return ri.instance()},ri.prototype.create=function(){if(arguments.length===1){if(arguments[0]instanceof Array){var l=arguments[0];return new pe(l)}if(w(arguments[0],$)){var h=arguments[0];return new pe(h)}}else if(arguments.length===2){var b=arguments[0],E=arguments[1];return E>3&&(E=3),E<2?new pe(b):new pe(b,E)}},ri.prototype.interfaces_=function(){return[D,t]},ri.prototype.getClass=function(){return ri},ri.instance=function(){return ri.instanceObject},li.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},li.instanceObject.get=function(){return new ri},Object.defineProperties(ri,li);var wi=function(l){function h(){l.call(this),this.map_=new Map}return l&&(h.__proto__=l),h.prototype=Object.create(l&&l.prototype),h.prototype.constructor=h,h.prototype.get=function(b){return this.map_.get(b)||null},h.prototype.put=function(b,E){return this.map_.set(b,E),E},h.prototype.values=function(){for(var b=new $t,E=this.map_.values(),I=E.next();!I.done;)b.add(I.value),I=E.next();return b},h.prototype.entrySet=function(){var b=new We;return this.map_.entries().forEach(function(E){return b.add(E)}),b},h.prototype.size=function(){return this.map_.size()},h}(Oe),me=function l(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=l.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof yr){var h=arguments[0];this._modelType=h,h===l.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var b=arguments[0];this._modelType=l.FIXED,this.setScale(b)}else if(arguments[0]instanceof l){var E=arguments[0];this._modelType=E._modelType,this._scale=E._scale}}},ui={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};me.prototype.equals=function(l){if(!(l instanceof me))return!1;var h=l;return this._modelType===h._modelType&&this._scale===h._scale},me.prototype.compareTo=function(l){var h=l,b=this.getMaximumSignificantDigits(),E=h.getMaximumSignificantDigits();return new R(b).compareTo(new R(E))},me.prototype.getScale=function(){return this._scale},me.prototype.isFloating=function(){return this._modelType===me.FLOATING||this._modelType===me.FLOATING_SINGLE},me.prototype.getType=function(){return this._modelType},me.prototype.toString=function(){var l="UNKNOWN";return this._modelType===me.FLOATING?l="Floating":this._modelType===me.FLOATING_SINGLE?l="Floating-Single":this._modelType===me.FIXED&&(l="Fixed (Scale="+this.getScale()+")"),l},me.prototype.makePrecise=function(){if(typeof arguments[0]=="number"){var l=arguments[0];return O.isNaN(l)||this._modelType===me.FLOATING_SINGLE?l:this._modelType===me.FIXED?Math.round(l*this._scale)/this._scale:l}if(arguments[0]instanceof G){var h=arguments[0];if(this._modelType===me.FLOATING)return null;h.x=this.makePrecise(h.x),h.y=this.makePrecise(h.y)}},me.prototype.getMaximumSignificantDigits=function(){var l=16;return this._modelType===me.FLOATING?l=16:this._modelType===me.FLOATING_SINGLE?l=6:this._modelType===me.FIXED&&(l=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),l},me.prototype.setScale=function(l){this._scale=Math.abs(l)},me.prototype.interfaces_=function(){return[t,U]},me.prototype.getClass=function(){return me},me.mostPrecise=function(l,h){return l.compareTo(h)>=0?l:h},ui.serialVersionUID.get=function(){return 7777263578777804e3},ui.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(me,ui);var yr=function l(h){this._name=h||null,l.nameToTypeMap.put(h,this)},Ur={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};yr.prototype.readResolve=function(){return yr.nameToTypeMap.get(this._name)},yr.prototype.toString=function(){return this._name},yr.prototype.interfaces_=function(){return[t]},yr.prototype.getClass=function(){return yr},Ur.serialVersionUID.get=function(){return-552860263173159e4},Ur.nameToTypeMap.get=function(){return new wi},Object.defineProperties(yr,Ur),me.Type=yr,me.FIXED=new yr("FIXED"),me.FLOATING=new yr("FLOATING"),me.FLOATING_SINGLE=new yr("FLOATING SINGLE");var Se=function l(){this._precisionModel=new me,this._SRID=0,this._coordinateSequenceFactory=l.getDefaultCoordinateSequenceFactory(),arguments.length===0||(arguments.length===1?w(arguments[0],D)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof me&&(this._precisionModel=arguments[0]):arguments.length===2?(this._precisionModel=arguments[0],this._SRID=arguments[1]):arguments.length===3&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},Mn={serialVersionUID:{configurable:!0}};Se.prototype.toGeometry=function(l){return l.isNull()?this.createPoint(null):l.getMinX()===l.getMaxX()&&l.getMinY()===l.getMaxY()?this.createPoint(new G(l.getMinX(),l.getMinY())):l.getMinX()===l.getMaxX()||l.getMinY()===l.getMaxY()?this.createLineString([new G(l.getMinX(),l.getMinY()),new G(l.getMaxX(),l.getMaxY())]):this.createPolygon(this.createLinearRing([new G(l.getMinX(),l.getMinY()),new G(l.getMinX(),l.getMaxY()),new G(l.getMaxX(),l.getMaxY()),new G(l.getMaxX(),l.getMinY()),new G(l.getMinX(),l.getMinY())]),null)},Se.prototype.createLineString=function(l){return l?l instanceof Array?new oi(this.getCoordinateSequenceFactory().create(l),this):w(l,$)?new oi(l,this):void 0:new oi(this.getCoordinateSequenceFactory().create([]),this)},Se.prototype.createMultiLineString=function(){if(arguments.length===0)return new Ye(null,this);if(arguments.length===1){var l=arguments[0];return new Ye(l,this)}},Se.prototype.buildGeometry=function(l){for(var h=null,b=!1,E=!1,I=l.iterator();I.hasNext();){var J=I.next(),at=J.getClass();h===null&&(h=at),at!==h&&(b=!0),J.isGeometryCollectionOrDerived()&&(E=!0)}if(h===null)return this.createGeometryCollection();if(b||E)return this.createGeometryCollection(Se.toGeometryArray(l));var yt=l.iterator().next();if(l.size()>1){if(yt instanceof Ht)return this.createMultiPolygon(Se.toPolygonArray(l));if(yt instanceof oi)return this.createMultiLineString(Se.toLineStringArray(l));if(yt instanceof Mi)return this.createMultiPoint(Se.toPointArray(l));Q.shouldNeverReachHere("Unhandled class: "+yt.getClass().getName())}return yt},Se.prototype.createMultiPointFromCoords=function(l){return this.createMultiPoint(l!==null?this.getCoordinateSequenceFactory().create(l):null)},Se.prototype.createPoint=function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof G){var l=arguments[0];return this.createPoint(l!==null?this.getCoordinateSequenceFactory().create([l]):null)}if(w(arguments[0],$)){var h=arguments[0];return new Mi(h,this)}}},Se.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},Se.prototype.createPolygon=function(){if(arguments.length===0)return new Ht(null,null,this);if(arguments.length===1){if(w(arguments[0],$)){var l=arguments[0];return this.createPolygon(this.createLinearRing(l))}if(arguments[0]instanceof Array){var h=arguments[0];return this.createPolygon(this.createLinearRing(h))}if(arguments[0]instanceof Qt){var b=arguments[0];return this.createPolygon(b,null)}}else if(arguments.length===2){var E=arguments[0],I=arguments[1];return new Ht(E,I,this)}},Se.prototype.getSRID=function(){return this._SRID},Se.prototype.createGeometryCollection=function(){if(arguments.length===0)return new fe(null,this);if(arguments.length===1){var l=arguments[0];return new fe(l,this)}},Se.prototype.createGeometry=function(l){return new Ee(this).edit(l,{edit:function(){if(arguments.length===2){var h=arguments[0];return this._coordinateSequenceFactory.create(h)}}})},Se.prototype.getPrecisionModel=function(){return this._precisionModel},Se.prototype.createLinearRing=function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var l=arguments[0];return this.createLinearRing(l!==null?this.getCoordinateSequenceFactory().create(l):null)}if(w(arguments[0],$)){var h=arguments[0];return new Qt(h,this)}}},Se.prototype.createMultiPolygon=function(){if(arguments.length===0)return new he(null,this);if(arguments.length===1){var l=arguments[0];return new he(l,this)}},Se.prototype.createMultiPoint=function(){if(arguments.length===0)return new re(null,this);if(arguments.length===1){if(arguments[0]instanceof Array){var l=arguments[0];return new re(l,this)}if(arguments[0]instanceof Array){var h=arguments[0];return this.createMultiPoint(h!==null?this.getCoordinateSequenceFactory().create(h):null)}if(w(arguments[0],$)){var b=arguments[0];if(b===null)return this.createMultiPoint(new Array(0).fill(null));for(var E=new Array(b.size()).fill(null),I=0;I<b.size();I++){var J=this.getCoordinateSequenceFactory().create(1,b.getDimension());Je.copy(b,I,J,0,1),E[I]=this.createPoint(J)}return this.createMultiPoint(E)}}},Se.prototype.interfaces_=function(){return[t]},Se.prototype.getClass=function(){return Se},Se.toMultiPolygonArray=function(l){var h=new Array(l.size()).fill(null);return l.toArray(h)},Se.toGeometryArray=function(l){if(l===null)return null;var h=new Array(l.size()).fill(null);return l.toArray(h)},Se.getDefaultCoordinateSequenceFactory=function(){return ri.instance()},Se.toMultiLineStringArray=function(l){var h=new Array(l.size()).fill(null);return l.toArray(h)},Se.toLineStringArray=function(l){var h=new Array(l.size()).fill(null);return l.toArray(h)},Se.toMultiPointArray=function(l){var h=new Array(l.size()).fill(null);return l.toArray(h)},Se.toLinearRingArray=function(l){var h=new Array(l.size()).fill(null);return l.toArray(h)},Se.toPointArray=function(l){var h=new Array(l.size()).fill(null);return l.toArray(h)},Se.toPolygonArray=function(l){var h=new Array(l.size()).fill(null);return l.toArray(h)},Se.createPointFromInternalCoord=function(l,h){return h.getPrecisionModel().makePrecise(l),h.getFactory().createPoint(l)},Mn.serialVersionUID.get=function(){return-6820524753094096e3},Object.defineProperties(Se,Mn);var jn=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],ni=function(l){this.geometryFactory=l||new Se};ni.prototype.read=function(l){var h,b=(h=typeof l=="string"?JSON.parse(l):l).type;if(!ze[b])throw new Error("Unknown GeoJSON type: "+h.type);return jn.indexOf(b)!==-1?ze[b].apply(this,[h.coordinates]):b==="GeometryCollection"?ze[b].apply(this,[h.geometries]):ze[b].apply(this,[h])},ni.prototype.write=function(l){var h=l.getGeometryType();if(!kr[h])throw new Error("Geometry is not supported");return kr[h].apply(this,[l])};var ze={Feature:function(l){var h={};for(var b in l)h[b]=l[b];if(l.geometry){var E=l.geometry.type;if(!ze[E])throw new Error("Unknown GeoJSON type: "+l.type);h.geometry=this.read(l.geometry)}return l.bbox&&(h.bbox=ze.bbox.apply(this,[l.bbox])),h},FeatureCollection:function(l){var h={};if(l.features){h.features=[];for(var b=0;b<l.features.length;++b)h.features.push(this.read(l.features[b]))}return l.bbox&&(h.bbox=this.parse.bbox.apply(this,[l.bbox])),h},coordinates:function(l){for(var h=[],b=0;b<l.length;++b){var E=l[b];h.push(new G(E[0],E[1]))}return h},bbox:function(l){return this.geometryFactory.createLinearRing([new G(l[0],l[1]),new G(l[2],l[1]),new G(l[2],l[3]),new G(l[0],l[3]),new G(l[0],l[1])])},Point:function(l){var h=new G(l[0],l[1]);return this.geometryFactory.createPoint(h)},MultiPoint:function(l){for(var h=[],b=0;b<l.length;++b)h.push(ze.Point.apply(this,[l[b]]));return this.geometryFactory.createMultiPoint(h)},LineString:function(l){var h=ze.coordinates.apply(this,[l]);return this.geometryFactory.createLineString(h)},MultiLineString:function(l){for(var h=[],b=0;b<l.length;++b)h.push(ze.LineString.apply(this,[l[b]]));return this.geometryFactory.createMultiLineString(h)},Polygon:function(l){for(var h=ze.coordinates.apply(this,[l[0]]),b=this.geometryFactory.createLinearRing(h),E=[],I=1;I<l.length;++I){var J=l[I],at=ze.coordinates.apply(this,[J]),yt=this.geometryFactory.createLinearRing(at);E.push(yt)}return this.geometryFactory.createPolygon(b,E)},MultiPolygon:function(l){for(var h=[],b=0;b<l.length;++b){var E=l[b];h.push(ze.Polygon.apply(this,[E]))}return this.geometryFactory.createMultiPolygon(h)},GeometryCollection:function(l){for(var h=[],b=0;b<l.length;++b){var E=l[b];h.push(this.read(E))}return this.geometryFactory.createGeometryCollection(h)}},kr={coordinate:function(l){return[l.x,l.y]},Point:function(l){return{type:"Point",coordinates:kr.coordinate.apply(this,[l.getCoordinate()])}},MultiPoint:function(l){for(var h=[],b=0;b<l._geometries.length;++b){var E=l._geometries[b],I=kr.Point.apply(this,[E]);h.push(I.coordinates)}return{type:"MultiPoint",coordinates:h}},LineString:function(l){for(var h=[],b=l.getCoordinates(),E=0;E<b.length;++E){var I=b[E];h.push(kr.coordinate.apply(this,[I]))}return{type:"LineString",coordinates:h}},MultiLineString:function(l){for(var h=[],b=0;b<l._geometries.length;++b){var E=l._geometries[b],I=kr.LineString.apply(this,[E]);h.push(I.coordinates)}return{type:"MultiLineString",coordinates:h}},Polygon:function(l){var h=[],b=kr.LineString.apply(this,[l._shell]);h.push(b.coordinates);for(var E=0;E<l._holes.length;++E){var I=l._holes[E],J=kr.LineString.apply(this,[I]);h.push(J.coordinates)}return{type:"Polygon",coordinates:h}},MultiPolygon:function(l){for(var h=[],b=0;b<l._geometries.length;++b){var E=l._geometries[b],I=kr.Polygon.apply(this,[E]);h.push(I.coordinates)}return{type:"MultiPolygon",coordinates:h}},GeometryCollection:function(l){for(var h=[],b=0;b<l._geometries.length;++b){var E=l._geometries[b],I=E.getGeometryType();h.push(kr[I].apply(this,[E]))}return{type:"GeometryCollection",geometries:h}}},Tr=function(l){this.geometryFactory=l||new Se,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new ni(this.geometryFactory)};Tr.prototype.read=function(l){var h=this.parser.read(l);return this.precisionModel.getType()===me.FIXED&&this.reducePrecision(h),h},Tr.prototype.reducePrecision=function(l){var h,b;if(l.coordinate)this.precisionModel.makePrecise(l.coordinate);else if(l.points)for(h=0,b=l.points.length;h<b;h++)this.precisionModel.makePrecise(l.points[h]);else if(l.geometries)for(h=0,b=l.geometries.length;h<b;h++)this.reducePrecision(l.geometries[h])};var gn=function(){this.parser=new ni(this.geometryFactory)};gn.prototype.write=function(l){return this.parser.write(l)};var oe=function(){},Rr={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};oe.prototype.interfaces_=function(){return[]},oe.prototype.getClass=function(){return oe},oe.opposite=function(l){return l===oe.LEFT?oe.RIGHT:l===oe.RIGHT?oe.LEFT:l},Rr.ON.get=function(){return 0},Rr.LEFT.get=function(){return 1},Rr.RIGHT.get=function(){return 2},Object.defineProperties(oe,Rr),(_.prototype=new Error).name="EmptyStackException",(y.prototype=new He).add=function(l){return this.array_.push(l),!0},y.prototype.get=function(l){if(l<0||l>=this.size())throw new Error;return this.array_[l]},y.prototype.push=function(l){return this.array_.push(l),l},y.prototype.pop=function(l){if(this.array_.length===0)throw new _;return this.array_.pop()},y.prototype.peek=function(){if(this.array_.length===0)throw new _;return this.array_[this.array_.length-1]},y.prototype.empty=function(){return this.array_.length===0},y.prototype.isEmpty=function(){return this.empty()},y.prototype.search=function(l){return this.array_.indexOf(l)},y.prototype.size=function(){return this.array_.length},y.prototype.toArray=function(){for(var l=[],h=0,b=this.array_.length;h<b;h++)l.push(this.array_[h]);return l};var gi=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};gi.prototype.getCoordinate=function(){return this._minCoord},gi.prototype.getRightmostSide=function(l,h){var b=this.getRightmostSideOfSegment(l,h);return b<0&&(b=this.getRightmostSideOfSegment(l,h-1)),b<0&&(this._minCoord=null,this.checkForRightmostCoordinate(l)),b},gi.prototype.findRightmostEdgeAtVertex=function(){var l=this._minDe.getEdge().getCoordinates();Q.isTrue(this._minIndex>0&&this._minIndex<l.length,"rightmost point expected to be interior vertex of edge");var h=l[this._minIndex-1],b=l[this._minIndex+1],E=Et.computeOrientation(this._minCoord,b,h),I=!1;(h.y<this._minCoord.y&&b.y<this._minCoord.y&&E===Et.COUNTERCLOCKWISE||h.y>this._minCoord.y&&b.y>this._minCoord.y&&E===Et.CLOCKWISE)&&(I=!0),I&&(this._minIndex=this._minIndex-1)},gi.prototype.getRightmostSideOfSegment=function(l,h){var b=l.getEdge().getCoordinates();if(h<0||h+1>=b.length||b[h].y===b[h+1].y)return-1;var E=oe.LEFT;return b[h].y<b[h+1].y&&(E=oe.RIGHT),E},gi.prototype.getEdge=function(){return this._orientedDe},gi.prototype.checkForRightmostCoordinate=function(l){for(var h=l.getEdge().getCoordinates(),b=0;b<h.length-1;b++)(this._minCoord===null||h[b].x>this._minCoord.x)&&(this._minDe=l,this._minIndex=b,this._minCoord=h[b])},gi.prototype.findRightmostEdgeAtNode=function(){var l=this._minDe.getNode().getEdges();this._minDe=l.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},gi.prototype.findEdge=function(l){for(var h=l.iterator();h.hasNext();){var b=h.next();b.isForward()&&this.checkForRightmostCoordinate(b)}Q.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===oe.LEFT&&(this._orientedDe=this._minDe.getSym())},gi.prototype.interfaces_=function(){return[]},gi.prototype.getClass=function(){return gi};var vr=function(l){function h(b,E){l.call(this,h.msgWithCoord(b,E)),this.pt=E?new G(E):null,this.name="TopologyException"}return l&&(h.__proto__=l),h.prototype=Object.create(l&&l.prototype),h.prototype.constructor=h,h.prototype.getCoordinate=function(){return this.pt},h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},h.msgWithCoord=function(b,E){return E?b:b+" [ "+E+" ]"},h}(gt),rn=function(){this.array_=[]};rn.prototype.addLast=function(l){this.array_.push(l)},rn.prototype.removeFirst=function(){return this.array_.shift()},rn.prototype.isEmpty=function(){return this.array_.length===0};var mr=function(){this._finder=null,this._dirEdgeList=new $t,this._nodes=new $t,this._rightMostCoord=null,this._env=null,this._finder=new gi};mr.prototype.clearVisitedEdges=function(){for(var l=this._dirEdgeList.iterator();l.hasNext();)l.next().setVisited(!1)},mr.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},mr.prototype.computeNodeDepth=function(l){for(var h=null,b=l.getEdges().iterator();b.hasNext();){var E=b.next();if(E.isVisited()||E.getSym().isVisited()){h=E;break}}if(h===null)throw new vr("unable to find edge to compute depths at "+l.getCoordinate());l.getEdges().computeDepths(h);for(var I=l.getEdges().iterator();I.hasNext();){var J=I.next();J.setVisited(!0),this.copySymDepths(J)}},mr.prototype.computeDepth=function(l){this.clearVisitedEdges();var h=this._finder.getEdge();h.setEdgeDepths(oe.RIGHT,l),this.copySymDepths(h),this.computeDepths(h)},mr.prototype.create=function(l){this.addReachable(l),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},mr.prototype.findResultEdges=function(){for(var l=this._dirEdgeList.iterator();l.hasNext();){var h=l.next();h.getDepth(oe.RIGHT)>=1&&h.getDepth(oe.LEFT)<=0&&!h.isInteriorAreaEdge()&&h.setInResult(!0)}},mr.prototype.computeDepths=function(l){var h=new We,b=new rn,E=l.getNode();for(b.addLast(E),h.add(E),l.setVisited(!0);!b.isEmpty();){var I=b.removeFirst();h.add(I),this.computeNodeDepth(I);for(var J=I.getEdges().iterator();J.hasNext();){var at=J.next().getSym();if(!at.isVisited()){var yt=at.getNode();h.contains(yt)||(b.addLast(yt),h.add(yt))}}}},mr.prototype.compareTo=function(l){var h=l;return this._rightMostCoord.x<h._rightMostCoord.x?-1:this._rightMostCoord.x>h._rightMostCoord.x?1:0},mr.prototype.getEnvelope=function(){if(this._env===null){for(var l=new wt,h=this._dirEdgeList.iterator();h.hasNext();)for(var b=h.next().getEdge().getCoordinates(),E=0;E<b.length-1;E++)l.expandToInclude(b[E]);this._env=l}return this._env},mr.prototype.addReachable=function(l){var h=new y;for(h.add(l);!h.empty();){var b=h.pop();this.add(b,h)}},mr.prototype.copySymDepths=function(l){var h=l.getSym();h.setDepth(oe.LEFT,l.getDepth(oe.RIGHT)),h.setDepth(oe.RIGHT,l.getDepth(oe.LEFT))},mr.prototype.add=function(l,h){l.setVisited(!0),this._nodes.add(l);for(var b=l.getEdges().iterator();b.hasNext();){var E=b.next();this._dirEdgeList.add(E);var I=E.getSym().getNode();I.isVisited()||h.push(I)}},mr.prototype.getNodes=function(){return this._nodes},mr.prototype.getDirectedEdges=function(){return this._dirEdgeList},mr.prototype.interfaces_=function(){return[U]},mr.prototype.getClass=function(){return mr};var hi=function l(){if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var h=arguments[0];this.init(h.length)}else if(Number.isInteger(arguments[0])){var b=arguments[0];this.init(1),this.location[oe.ON]=b}else if(arguments[0]instanceof l){var E=arguments[0];if(this.init(E.location.length),E!==null)for(var I=0;I<this.location.length;I++)this.location[I]=E.location[I]}}else if(arguments.length===3){var J=arguments[0],at=arguments[1],yt=arguments[2];this.init(3),this.location[oe.ON]=J,this.location[oe.LEFT]=at,this.location[oe.RIGHT]=yt}};hi.prototype.setAllLocations=function(l){for(var h=0;h<this.location.length;h++)this.location[h]=l},hi.prototype.isNull=function(){for(var l=0;l<this.location.length;l++)if(this.location[l]!==N.NONE)return!1;return!0},hi.prototype.setAllLocationsIfNull=function(l){for(var h=0;h<this.location.length;h++)this.location[h]===N.NONE&&(this.location[h]=l)},hi.prototype.isLine=function(){return this.location.length===1},hi.prototype.merge=function(l){if(l.location.length>this.location.length){var h=new Array(3).fill(null);h[oe.ON]=this.location[oe.ON],h[oe.LEFT]=N.NONE,h[oe.RIGHT]=N.NONE,this.location=h}for(var b=0;b<this.location.length;b++)this.location[b]===N.NONE&&b<l.location.length&&(this.location[b]=l.location[b])},hi.prototype.getLocations=function(){return this.location},hi.prototype.flip=function(){if(this.location.length<=1)return null;var l=this.location[oe.LEFT];this.location[oe.LEFT]=this.location[oe.RIGHT],this.location[oe.RIGHT]=l},hi.prototype.toString=function(){var l=new T;return this.location.length>1&&l.append(N.toLocationSymbol(this.location[oe.LEFT])),l.append(N.toLocationSymbol(this.location[oe.ON])),this.location.length>1&&l.append(N.toLocationSymbol(this.location[oe.RIGHT])),l.toString()},hi.prototype.setLocations=function(l,h,b){this.location[oe.ON]=l,this.location[oe.LEFT]=h,this.location[oe.RIGHT]=b},hi.prototype.get=function(l){return l<this.location.length?this.location[l]:N.NONE},hi.prototype.isArea=function(){return this.location.length>1},hi.prototype.isAnyNull=function(){for(var l=0;l<this.location.length;l++)if(this.location[l]===N.NONE)return!0;return!1},hi.prototype.setLocation=function(){if(arguments.length===1){var l=arguments[0];this.setLocation(oe.ON,l)}else if(arguments.length===2){var h=arguments[0],b=arguments[1];this.location[h]=b}},hi.prototype.init=function(l){this.location=new Array(l).fill(null),this.setAllLocations(N.NONE)},hi.prototype.isEqualOnSide=function(l,h){return this.location[h]===l.location[h]},hi.prototype.allPositionsEqual=function(l){for(var h=0;h<this.location.length;h++)if(this.location[h]!==l)return!1;return!0},hi.prototype.interfaces_=function(){return[]},hi.prototype.getClass=function(){return hi};var fi=function l(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var h=arguments[0];this.elt[0]=new hi(h),this.elt[1]=new hi(h)}else if(arguments[0]instanceof l){var b=arguments[0];this.elt[0]=new hi(b.elt[0]),this.elt[1]=new hi(b.elt[1])}}else if(arguments.length===2){var E=arguments[0],I=arguments[1];this.elt[0]=new hi(N.NONE),this.elt[1]=new hi(N.NONE),this.elt[E].setLocation(I)}else if(arguments.length===3){var J=arguments[0],at=arguments[1],yt=arguments[2];this.elt[0]=new hi(J,at,yt),this.elt[1]=new hi(J,at,yt)}else if(arguments.length===4){var St=arguments[0],Bt=arguments[1],Yt=arguments[2],ee=arguments[3];this.elt[0]=new hi(N.NONE,N.NONE,N.NONE),this.elt[1]=new hi(N.NONE,N.NONE,N.NONE),this.elt[St].setLocations(Bt,Yt,ee)}};fi.prototype.getGeometryCount=function(){var l=0;return this.elt[0].isNull()||l++,this.elt[1].isNull()||l++,l},fi.prototype.setAllLocations=function(l,h){this.elt[l].setAllLocations(h)},fi.prototype.isNull=function(l){return this.elt[l].isNull()},fi.prototype.setAllLocationsIfNull=function(){if(arguments.length===1){var l=arguments[0];this.setAllLocationsIfNull(0,l),this.setAllLocationsIfNull(1,l)}else if(arguments.length===2){var h=arguments[0],b=arguments[1];this.elt[h].setAllLocationsIfNull(b)}},fi.prototype.isLine=function(l){return this.elt[l].isLine()},fi.prototype.merge=function(l){for(var h=0;h<2;h++)this.elt[h]===null&&l.elt[h]!==null?this.elt[h]=new hi(l.elt[h]):this.elt[h].merge(l.elt[h])},fi.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},fi.prototype.getLocation=function(){if(arguments.length===1){var l=arguments[0];return this.elt[l].get(oe.ON)}if(arguments.length===2){var h=arguments[0],b=arguments[1];return this.elt[h].get(b)}},fi.prototype.toString=function(){var l=new T;return this.elt[0]!==null&&(l.append("A:"),l.append(this.elt[0].toString())),this.elt[1]!==null&&(l.append(" B:"),l.append(this.elt[1].toString())),l.toString()},fi.prototype.isArea=function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var l=arguments[0];return this.elt[l].isArea()}},fi.prototype.isAnyNull=function(l){return this.elt[l].isAnyNull()},fi.prototype.setLocation=function(){if(arguments.length===2){var l=arguments[0],h=arguments[1];this.elt[l].setLocation(oe.ON,h)}else if(arguments.length===3){var b=arguments[0],E=arguments[1],I=arguments[2];this.elt[b].setLocation(E,I)}},fi.prototype.isEqualOnSide=function(l,h){return this.elt[0].isEqualOnSide(l.elt[0],h)&&this.elt[1].isEqualOnSide(l.elt[1],h)},fi.prototype.allPositionsEqual=function(l,h){return this.elt[l].allPositionsEqual(h)},fi.prototype.toLine=function(l){this.elt[l].isArea()&&(this.elt[l]=new hi(this.elt[l].location[0]))},fi.prototype.interfaces_=function(){return[]},fi.prototype.getClass=function(){return fi},fi.toLineLabel=function(l){for(var h=new fi(N.NONE),b=0;b<2;b++)h.setLocation(b,l.getLocation(b));return h};var Si=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new $t,this._pts=new $t,this._label=new fi(N.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new $t,this._geometryFactory=null;var l=arguments[0],h=arguments[1];this._geometryFactory=h,this.computePoints(l),this.computeRing()};Si.prototype.computeRing=function(){if(this._ring!==null)return null;for(var l=new Array(this._pts.size()).fill(null),h=0;h<this._pts.size();h++)l[h]=this._pts.get(h);this._ring=this._geometryFactory.createLinearRing(l),this._isHole=Et.isCCW(this._ring.getCoordinates())},Si.prototype.isIsolated=function(){return this._label.getGeometryCount()===1},Si.prototype.computePoints=function(l){this._startDe=l;var h=l,b=!0;do{if(h===null)throw new vr("Found null DirectedEdge");if(h.getEdgeRing()===this)throw new vr("Directed Edge visited twice during ring-building at "+h.getCoordinate());this._edges.add(h);var E=h.getLabel();Q.isTrue(E.isArea()),this.mergeLabel(E),this.addPoints(h.getEdge(),h.isForward(),b),b=!1,this.setEdgeRing(h,this),h=this.getNext(h)}while(h!==this._startDe)},Si.prototype.getLinearRing=function(){return this._ring},Si.prototype.getCoordinate=function(l){return this._pts.get(l)},Si.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var l=this._startDe;do{var h=l.getNode().getEdges().getOutgoingDegree(this);h>this._maxNodeDegree&&(this._maxNodeDegree=h),l=this.getNext(l)}while(l!==this._startDe);this._maxNodeDegree*=2},Si.prototype.addPoints=function(l,h,b){var E=l.getCoordinates();if(h){var I=1;b&&(I=0);for(var J=I;J<E.length;J++)this._pts.add(E[J])}else{var at=E.length-2;b&&(at=E.length-1);for(var yt=at;yt>=0;yt--)this._pts.add(E[yt])}},Si.prototype.isHole=function(){return this._isHole},Si.prototype.setInResult=function(){var l=this._startDe;do l.getEdge().setInResult(!0),l=l.getNext();while(l!==this._startDe)},Si.prototype.containsPoint=function(l){var h=this.getLinearRing();if(!h.getEnvelopeInternal().contains(l)||!Et.isPointInRing(l,h.getCoordinates()))return!1;for(var b=this._holes.iterator();b.hasNext();)if(b.next().containsPoint(l))return!1;return!0},Si.prototype.addHole=function(l){this._holes.add(l)},Si.prototype.isShell=function(){return this._shell===null},Si.prototype.getLabel=function(){return this._label},Si.prototype.getEdges=function(){return this._edges},Si.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Si.prototype.getShell=function(){return this._shell},Si.prototype.mergeLabel=function(){if(arguments.length===1){var l=arguments[0];this.mergeLabel(l,0),this.mergeLabel(l,1)}else if(arguments.length===2){var h=arguments[0],b=arguments[1],E=h.getLocation(b,oe.RIGHT);if(E===N.NONE)return null;if(this._label.getLocation(b)===N.NONE)return this._label.setLocation(b,E),null}},Si.prototype.setShell=function(l){this._shell=l,l!==null&&l.addHole(this)},Si.prototype.toPolygon=function(l){for(var h=new Array(this._holes.size()).fill(null),b=0;b<this._holes.size();b++)h[b]=this._holes.get(b).getLinearRing();return l.createPolygon(this.getLinearRing(),h)},Si.prototype.interfaces_=function(){return[]},Si.prototype.getClass=function(){return Si};var Vr=function(l){function h(){var b=arguments[0],E=arguments[1];l.call(this,b,E)}return l&&(h.__proto__=l),h.prototype=Object.create(l&&l.prototype),h.prototype.constructor=h,h.prototype.setEdgeRing=function(b,E){b.setMinEdgeRing(E)},h.prototype.getNext=function(b){return b.getNextMin()},h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},h}(Si),ns=function(l){function h(){var b=arguments[0],E=arguments[1];l.call(this,b,E)}return l&&(h.__proto__=l),h.prototype=Object.create(l&&l.prototype),h.prototype.constructor=h,h.prototype.buildMinimalRings=function(){var b=new $t,E=this._startDe;do{if(E.getMinEdgeRing()===null){var I=new Vr(E,this._geometryFactory);b.add(I)}E=E.getNext()}while(E!==this._startDe);return b},h.prototype.setEdgeRing=function(b,E){b.setEdgeRing(E)},h.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var b=this._startDe;do b.getNode().getEdges().linkMinimalDirectedEdges(this),b=b.getNext();while(b!==this._startDe)},h.prototype.getNext=function(b){return b.getNext()},h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},h}(Si),je=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var l=arguments[0];this._label=l}}};je.prototype.setVisited=function(l){this._isVisited=l},je.prototype.setInResult=function(l){this._isInResult=l},je.prototype.isCovered=function(){return this._isCovered},je.prototype.isCoveredSet=function(){return this._isCoveredSet},je.prototype.setLabel=function(l){this._label=l},je.prototype.getLabel=function(){return this._label},je.prototype.setCovered=function(l){this._isCovered=l,this._isCoveredSet=!0},je.prototype.updateIM=function(l){Q.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(l)},je.prototype.isInResult=function(){return this._isInResult},je.prototype.isVisited=function(){return this._isVisited},je.prototype.interfaces_=function(){return[]},je.prototype.getClass=function(){return je};var qr=function(l){function h(){l.call(this),this._coord=null,this._edges=null;var b=arguments[0],E=arguments[1];this._coord=b,this._edges=E,this._label=new fi(0,N.NONE)}return l&&(h.__proto__=l),h.prototype=Object.create(l&&l.prototype),h.prototype.constructor=h,h.prototype.isIncidentEdgeInResult=function(){for(var b=this.getEdges().getEdges().iterator();b.hasNext();)if(b.next().getEdge().isInResult())return!0;return!1},h.prototype.isIsolated=function(){return this._label.getGeometryCount()===1},h.prototype.getCoordinate=function(){return this._coord},h.prototype.print=function(b){b.println("node "+this._coord+" lbl: "+this._label)},h.prototype.computeIM=function(b){},h.prototype.computeMergedLocation=function(b,E){var I=N.NONE;if(I=this._label.getLocation(E),!b.isNull(E)){var J=b.getLocation(E);I!==N.BOUNDARY&&(I=J)}return I},h.prototype.setLabel=function(){if(arguments.length!==2)return l.prototype.setLabel.apply(this,arguments);var b=arguments[0],E=arguments[1];this._label===null?this._label=new fi(b,E):this._label.setLocation(b,E)},h.prototype.getEdges=function(){return this._edges},h.prototype.mergeLabel=function(){if(arguments[0]instanceof h){var b=arguments[0];this.mergeLabel(b._label)}else if(arguments[0]instanceof fi)for(var E=arguments[0],I=0;I<2;I++){var J=this.computeMergedLocation(E,I);this._label.getLocation(I)===N.NONE&&this._label.setLocation(I,J)}},h.prototype.add=function(b){this._edges.insert(b),b.setNode(this)},h.prototype.setLabelBoundary=function(b){if(this._label===null)return null;var E=N.NONE;this._label!==null&&(E=this._label.getLocation(b));var I=null;switch(E){case N.BOUNDARY:I=N.INTERIOR;break;case N.INTERIOR:default:I=N.BOUNDARY}this._label.setLocation(b,I)},h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},h}(je),ci=function(){this.nodeMap=new d,this.nodeFact=null;var l=arguments[0];this.nodeFact=l};ci.prototype.find=function(l){return this.nodeMap.get(l)},ci.prototype.addNode=function(){if(arguments[0]instanceof G){var l=arguments[0],h=this.nodeMap.get(l);return h===null&&(h=this.nodeFact.createNode(l),this.nodeMap.put(l,h)),h}if(arguments[0]instanceof qr){var b=arguments[0],E=this.nodeMap.get(b.getCoordinate());return E===null?(this.nodeMap.put(b.getCoordinate(),b),b):(E.mergeLabel(b),E)}},ci.prototype.print=function(l){for(var h=this.iterator();h.hasNext();)h.next().print(l)},ci.prototype.iterator=function(){return this.nodeMap.values().iterator()},ci.prototype.values=function(){return this.nodeMap.values()},ci.prototype.getBoundaryNodes=function(l){for(var h=new $t,b=this.iterator();b.hasNext();){var E=b.next();E.getLabel().getLocation(l)===N.BOUNDARY&&h.add(E)}return h},ci.prototype.add=function(l){var h=l.getCoordinate();this.addNode(h).add(l)},ci.prototype.interfaces_=function(){return[]},ci.prototype.getClass=function(){return ci};var M=function(){},A={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};M.prototype.interfaces_=function(){return[]},M.prototype.getClass=function(){return M},M.isNorthern=function(l){return l===M.NE||l===M.NW},M.isOpposite=function(l,h){return l===h?!1:(l-h+4)%4===2},M.commonHalfPlane=function(l,h){if(l===h)return l;if((l-h+4)%4===2)return-1;var b=l<h?l:h;return b===0&&(l>h?l:h)===3?3:b},M.isInHalfPlane=function(l,h){return h===M.SE?l===M.SE||l===M.SW:l===h||l===h+1},M.quadrant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var l=arguments[0],h=arguments[1];if(l===0&&h===0)throw new S("Cannot compute the quadrant for point ( "+l+", "+h+" )");return l>=0?h>=0?M.NE:M.SE:h>=0?M.NW:M.SW}if(arguments[0]instanceof G&&arguments[1]instanceof G){var b=arguments[0],E=arguments[1];if(E.x===b.x&&E.y===b.y)throw new S("Cannot compute the quadrant for two identical points "+b);return E.x>=b.x?E.y>=b.y?M.NE:M.SE:E.y>=b.y?M.NW:M.SW}},A.NE.get=function(){return 0},A.NW.get=function(){return 1},A.SW.get=function(){return 2},A.SE.get=function(){return 3},Object.defineProperties(M,A);var j=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var l=arguments[0];this._edge=l}else if(arguments.length===3){var h=arguments[0],b=arguments[1],E=arguments[2];this._edge=h,this.init(b,E),this._label=null}else if(arguments.length===4){var I=arguments[0],J=arguments[1],at=arguments[2],yt=arguments[3];this._edge=I,this.init(J,at),this._label=yt}};j.prototype.compareDirection=function(l){return this._dx===l._dx&&this._dy===l._dy?0:this._quadrant>l._quadrant?1:this._quadrant<l._quadrant?-1:Et.computeOrientation(l._p0,l._p1,this._p1)},j.prototype.getDy=function(){return this._dy},j.prototype.getCoordinate=function(){return this._p0},j.prototype.setNode=function(l){this._node=l},j.prototype.print=function(l){var h=Math.atan2(this._dy,this._dx),b=this.getClass().getName(),E=b.lastIndexOf("."),I=b.substring(E+1);l.print("  "+I+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+h+"   "+this._label)},j.prototype.compareTo=function(l){var h=l;return this.compareDirection(h)},j.prototype.getDirectedCoordinate=function(){return this._p1},j.prototype.getDx=function(){return this._dx},j.prototype.getLabel=function(){return this._label},j.prototype.getEdge=function(){return this._edge},j.prototype.getQuadrant=function(){return this._quadrant},j.prototype.getNode=function(){return this._node},j.prototype.toString=function(){var l=Math.atan2(this._dy,this._dx),h=this.getClass().getName(),b=h.lastIndexOf(".");return"  "+h.substring(b+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+l+"   "+this._label},j.prototype.computeLabel=function(l){},j.prototype.init=function(l,h){this._p0=l,this._p1=h,this._dx=h.x-l.x,this._dy=h.y-l.y,this._quadrant=M.quadrant(this._dx,this._dy),Q.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")},j.prototype.interfaces_=function(){return[U]},j.prototype.getClass=function(){return j};var nt=function(l){function h(){var b=arguments[0],E=arguments[1];if(l.call(this,b),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=E,E)this.init(b.getCoordinate(0),b.getCoordinate(1));else{var I=b.getNumPoints()-1;this.init(b.getCoordinate(I),b.getCoordinate(I-1))}this.computeDirectedLabel()}return l&&(h.__proto__=l),h.prototype=Object.create(l&&l.prototype),h.prototype.constructor=h,h.prototype.getNextMin=function(){return this._nextMin},h.prototype.getDepth=function(b){return this._depth[b]},h.prototype.setVisited=function(b){this._isVisited=b},h.prototype.computeDirectedLabel=function(){this._label=new fi(this._edge.getLabel()),this._isForward||this._label.flip()},h.prototype.getNext=function(){return this._next},h.prototype.setDepth=function(b,E){if(this._depth[b]!==-999&&this._depth[b]!==E)throw new vr("assigned depths do not match",this.getCoordinate());this._depth[b]=E},h.prototype.isInteriorAreaEdge=function(){for(var b=!0,E=0;E<2;E++)this._label.isArea(E)&&this._label.getLocation(E,oe.LEFT)===N.INTERIOR&&this._label.getLocation(E,oe.RIGHT)===N.INTERIOR||(b=!1);return b},h.prototype.setNextMin=function(b){this._nextMin=b},h.prototype.print=function(b){l.prototype.print.call(this,b),b.print(" "+this._depth[oe.LEFT]+"/"+this._depth[oe.RIGHT]),b.print(" ("+this.getDepthDelta()+")"),this._isInResult&&b.print(" inResult")},h.prototype.setMinEdgeRing=function(b){this._minEdgeRing=b},h.prototype.isLineEdge=function(){var b=this._label.isLine(0)||this._label.isLine(1),E=!this._label.isArea(0)||this._label.allPositionsEqual(0,N.EXTERIOR),I=!this._label.isArea(1)||this._label.allPositionsEqual(1,N.EXTERIOR);return b&&E&&I},h.prototype.setEdgeRing=function(b){this._edgeRing=b},h.prototype.getMinEdgeRing=function(){return this._minEdgeRing},h.prototype.getDepthDelta=function(){var b=this._edge.getDepthDelta();return this._isForward||(b=-b),b},h.prototype.setInResult=function(b){this._isInResult=b},h.prototype.getSym=function(){return this._sym},h.prototype.isForward=function(){return this._isForward},h.prototype.getEdge=function(){return this._edge},h.prototype.printEdge=function(b){this.print(b),b.print(" "),this._isForward?this._edge.print(b):this._edge.printReverse(b)},h.prototype.setSym=function(b){this._sym=b},h.prototype.setVisitedEdge=function(b){this.setVisited(b),this._sym.setVisited(b)},h.prototype.setEdgeDepths=function(b,E){var I=this.getEdge().getDepthDelta();this._isForward||(I=-I);var J=1;b===oe.LEFT&&(J=-1);var at=oe.opposite(b),yt=E+I*J;this.setDepth(b,E),this.setDepth(at,yt)},h.prototype.getEdgeRing=function(){return this._edgeRing},h.prototype.isInResult=function(){return this._isInResult},h.prototype.setNext=function(b){this._next=b},h.prototype.isVisited=function(){return this._isVisited},h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},h.depthFactor=function(b,E){return b===N.EXTERIOR&&E===N.INTERIOR?1:b===N.INTERIOR&&E===N.EXTERIOR?-1:0},h}(j),ht=function(){};ht.prototype.createNode=function(l){return new qr(l,null)},ht.prototype.interfaces_=function(){return[]},ht.prototype.getClass=function(){return ht};var xt=function(){if(this._edges=new $t,this._nodes=null,this._edgeEndList=new $t,arguments.length===0)this._nodes=new ci(new ht);else if(arguments.length===1){var l=arguments[0];this._nodes=new ci(l)}};xt.prototype.printEdges=function(l){l.println("Edges:");for(var h=0;h<this._edges.size();h++){l.println("edge "+h+":");var b=this._edges.get(h);b.print(l),b.eiList.print(l)}},xt.prototype.find=function(l){return this._nodes.find(l)},xt.prototype.addNode=function(){if(arguments[0]instanceof qr){var l=arguments[0];return this._nodes.addNode(l)}if(arguments[0]instanceof G){var h=arguments[0];return this._nodes.addNode(h)}},xt.prototype.getNodeIterator=function(){return this._nodes.iterator()},xt.prototype.linkResultDirectedEdges=function(){for(var l=this._nodes.iterator();l.hasNext();)l.next().getEdges().linkResultDirectedEdges()},xt.prototype.debugPrintln=function(l){rt.out.println(l)},xt.prototype.isBoundaryNode=function(l,h){var b=this._nodes.find(h);if(b===null)return!1;var E=b.getLabel();return E!==null&&E.getLocation(l)===N.BOUNDARY},xt.prototype.linkAllDirectedEdges=function(){for(var l=this._nodes.iterator();l.hasNext();)l.next().getEdges().linkAllDirectedEdges()},xt.prototype.matchInSameDirection=function(l,h,b,E){return!!l.equals(b)&&Et.computeOrientation(l,h,E)===Et.COLLINEAR&&M.quadrant(l,h)===M.quadrant(b,E)},xt.prototype.getEdgeEnds=function(){return this._edgeEndList},xt.prototype.debugPrint=function(l){rt.out.print(l)},xt.prototype.getEdgeIterator=function(){return this._edges.iterator()},xt.prototype.findEdgeInSameDirection=function(l,h){for(var b=0;b<this._edges.size();b++){var E=this._edges.get(b),I=E.getCoordinates();if(this.matchInSameDirection(l,h,I[0],I[1])||this.matchInSameDirection(l,h,I[I.length-1],I[I.length-2]))return E}return null},xt.prototype.insertEdge=function(l){this._edges.add(l)},xt.prototype.findEdgeEnd=function(l){for(var h=this.getEdgeEnds().iterator();h.hasNext();){var b=h.next();if(b.getEdge()===l)return b}return null},xt.prototype.addEdges=function(l){for(var h=l.iterator();h.hasNext();){var b=h.next();this._edges.add(b);var E=new nt(b,!0),I=new nt(b,!1);E.setSym(I),I.setSym(E),this.add(E),this.add(I)}},xt.prototype.add=function(l){this._nodes.add(l),this._edgeEndList.add(l)},xt.prototype.getNodes=function(){return this._nodes.values()},xt.prototype.findEdge=function(l,h){for(var b=0;b<this._edges.size();b++){var E=this._edges.get(b),I=E.getCoordinates();if(l.equals(I[0])&&h.equals(I[1]))return E}return null},xt.prototype.interfaces_=function(){return[]},xt.prototype.getClass=function(){return xt},xt.linkResultDirectedEdges=function(l){for(var h=l.iterator();h.hasNext();)h.next().getEdges().linkResultDirectedEdges()};var Lt=function(){this._geometryFactory=null,this._shellList=new $t;var l=arguments[0];this._geometryFactory=l};Lt.prototype.sortShellsAndHoles=function(l,h,b){for(var E=l.iterator();E.hasNext();){var I=E.next();I.isHole()?b.add(I):h.add(I)}},Lt.prototype.computePolygons=function(l){for(var h=new $t,b=l.iterator();b.hasNext();){var E=b.next().toPolygon(this._geometryFactory);h.add(E)}return h},Lt.prototype.placeFreeHoles=function(l,h){for(var b=h.iterator();b.hasNext();){var E=b.next();if(E.getShell()===null){var I=this.findEdgeRingContaining(E,l);if(I===null)throw new vr("unable to assign hole to a shell",E.getCoordinate(0));E.setShell(I)}}},Lt.prototype.buildMinimalEdgeRings=function(l,h,b){for(var E=new $t,I=l.iterator();I.hasNext();){var J=I.next();if(J.getMaxNodeDegree()>2){J.linkDirectedEdgesForMinimalEdgeRings();var at=J.buildMinimalRings(),yt=this.findShell(at);yt!==null?(this.placePolygonHoles(yt,at),h.add(yt)):b.addAll(at)}else E.add(J)}return E},Lt.prototype.containsPoint=function(l){for(var h=this._shellList.iterator();h.hasNext();)if(h.next().containsPoint(l))return!0;return!1},Lt.prototype.buildMaximalEdgeRings=function(l){for(var h=new $t,b=l.iterator();b.hasNext();){var E=b.next();if(E.isInResult()&&E.getLabel().isArea()&&E.getEdgeRing()===null){var I=new ns(E,this._geometryFactory);h.add(I),I.setInResult()}}return h},Lt.prototype.placePolygonHoles=function(l,h){for(var b=h.iterator();b.hasNext();){var E=b.next();E.isHole()&&E.setShell(l)}},Lt.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Lt.prototype.findEdgeRingContaining=function(l,h){for(var b=l.getLinearRing(),E=b.getEnvelopeInternal(),I=b.getCoordinateN(0),J=null,at=null,yt=h.iterator();yt.hasNext();){var St=yt.next(),Bt=St.getLinearRing(),Yt=Bt.getEnvelopeInternal();J!==null&&(at=J.getLinearRing().getEnvelopeInternal());var ee=!1;Yt.contains(E)&&Et.isPointInRing(I,Bt.getCoordinates())&&(ee=!0),ee&&(J===null||at.contains(Yt))&&(J=St)}return J},Lt.prototype.findShell=function(l){for(var h=0,b=null,E=l.iterator();E.hasNext();){var I=E.next();I.isHole()||(b=I,h++)}return Q.isTrue(h<=1,"found two shells in MinimalEdgeRing list"),b},Lt.prototype.add=function(){if(arguments.length===1){var l=arguments[0];this.add(l.getEdgeEnds(),l.getNodes())}else if(arguments.length===2){var h=arguments[0],b=arguments[1];xt.linkResultDirectedEdges(b);var E=this.buildMaximalEdgeRings(h),I=new $t,J=this.buildMinimalEdgeRings(E,this._shellList,I);this.sortShellsAndHoles(J,this._shellList,I),this.placeFreeHoles(this._shellList,I)}},Lt.prototype.interfaces_=function(){return[]},Lt.prototype.getClass=function(){return Lt};var Rt=function(){};Rt.prototype.getBounds=function(){},Rt.prototype.interfaces_=function(){return[]},Rt.prototype.getClass=function(){return Rt};var Pt=function(){this._bounds=null,this._item=null;var l=arguments[0],h=arguments[1];this._bounds=l,this._item=h};Pt.prototype.getItem=function(){return this._item},Pt.prototype.getBounds=function(){return this._bounds},Pt.prototype.interfaces_=function(){return[Rt,t]},Pt.prototype.getClass=function(){return Pt};var Nt=function(){this._size=null,this._items=null,this._size=0,this._items=new $t,this._items.add(null)};Nt.prototype.poll=function(){if(this.isEmpty())return null;var l=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),l},Nt.prototype.size=function(){return this._size},Nt.prototype.reorder=function(l){for(var h=null,b=this._items.get(l);2*l<=this._size&&((h=2*l)!==this._size&&this._items.get(h+1).compareTo(this._items.get(h))<0&&h++,this._items.get(h).compareTo(b)<0);l=h)this._items.set(l,this._items.get(h));this._items.set(l,b)},Nt.prototype.clear=function(){this._size=0,this._items.clear()},Nt.prototype.isEmpty=function(){return this._size===0},Nt.prototype.add=function(l){this._items.add(null),this._size+=1;var h=this._size;for(this._items.set(0,l);l.compareTo(this._items.get(Math.trunc(h/2)))<0;h/=2)this._items.set(h,this._items.get(Math.trunc(h/2)));this._items.set(h,l)},Nt.prototype.interfaces_=function(){return[]},Nt.prototype.getClass=function(){return Nt};var Vt=function(){};Vt.prototype.visitItem=function(l){},Vt.prototype.interfaces_=function(){return[]},Vt.prototype.getClass=function(){return Vt};var ne=function(){};ne.prototype.insert=function(l,h){},ne.prototype.remove=function(l,h){},ne.prototype.query=function(){},ne.prototype.interfaces_=function(){return[]},ne.prototype.getClass=function(){return ne};var Zt=function(){if(this._childBoundables=new $t,this._bounds=null,this._level=null,arguments.length!==0){if(arguments.length===1){var l=arguments[0];this._level=l}}},ge={serialVersionUID:{configurable:!0}};Zt.prototype.getLevel=function(){return this._level},Zt.prototype.size=function(){return this._childBoundables.size()},Zt.prototype.getChildBoundables=function(){return this._childBoundables},Zt.prototype.addChildBoundable=function(l){Q.isTrue(this._bounds===null),this._childBoundables.add(l)},Zt.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Zt.prototype.getBounds=function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds},Zt.prototype.interfaces_=function(){return[Rt,t]},Zt.prototype.getClass=function(){return Zt},ge.serialVersionUID.get=function(){return 6493722185909574e3},Object.defineProperties(Zt,ge);var Ce=function(){};Ce.reverseOrder=function(){return{compare:function(l,h){return h.compareTo(l)}}},Ce.min=function(l){return Ce.sort(l),l.get(0)},Ce.sort=function(l,h){var b=l.toArray();h?Qe.sort(b,h):Qe.sort(b);for(var E=l.iterator(),I=0,J=b.length;I<J;I++)E.next(),E.set(b[I])},Ce.singletonList=function(l){var h=new $t;return h.add(l),h};var Ne=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var l=arguments[0],h=arguments[1],b=arguments[2];this._boundable1=l,this._boundable2=h,this._itemDistance=b,this._distance=this.distance()};Ne.prototype.expandToQueue=function(l,h){var b=Ne.isComposite(this._boundable1),E=Ne.isComposite(this._boundable2);if(b&&E)return Ne.area(this._boundable1)>Ne.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,l,h),null):(this.expand(this._boundable2,this._boundable1,l,h),null);if(b)return this.expand(this._boundable1,this._boundable2,l,h),null;if(E)return this.expand(this._boundable2,this._boundable1,l,h),null;throw new S("neither boundable is composite")},Ne.prototype.isLeaves=function(){return!(Ne.isComposite(this._boundable1)||Ne.isComposite(this._boundable2))},Ne.prototype.compareTo=function(l){var h=l;return this._distance<h._distance?-1:this._distance>h._distance?1:0},Ne.prototype.expand=function(l,h,b,E){for(var I=l.getChildBoundables().iterator();I.hasNext();){var J=I.next(),at=new Ne(J,h,this._itemDistance);at.getDistance()<E&&b.add(at)}},Ne.prototype.getBoundable=function(l){return l===0?this._boundable1:this._boundable2},Ne.prototype.getDistance=function(){return this._distance},Ne.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},Ne.prototype.interfaces_=function(){return[U]},Ne.prototype.getClass=function(){return Ne},Ne.area=function(l){return l.getBounds().getArea()},Ne.isComposite=function(l){return l instanceof Zt};var be=function l(){if(this._root=null,this._built=!1,this._itemBoundables=new $t,this._nodeCapacity=null,arguments.length===0){var h=l.DEFAULT_NODE_CAPACITY;this._nodeCapacity=h}else if(arguments.length===1){var b=arguments[0];Q.isTrue(b>1,"Node capacity must be greater than 1"),this._nodeCapacity=b}},gr={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};be.prototype.getNodeCapacity=function(){return this._nodeCapacity},be.prototype.lastNode=function(l){return l.get(l.size()-1)},be.prototype.size=function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var l=0,h=arguments[0].getChildBoundables().iterator();h.hasNext();){var b=h.next();b instanceof Zt?l+=this.size(b):b instanceof Pt&&(l+=1)}return l}},be.prototype.removeItem=function(l,h){for(var b=null,E=l.getChildBoundables().iterator();E.hasNext();){var I=E.next();I instanceof Pt&&I.getItem()===h&&(b=I)}return b!==null&&(l.getChildBoundables().remove(b),!0)},be.prototype.itemsTree=function(){if(arguments.length===0){this.build();var l=this.itemsTree(this._root);return l===null?new $t:l}if(arguments.length===1){for(var h=arguments[0],b=new $t,E=h.getChildBoundables().iterator();E.hasNext();){var I=E.next();if(I instanceof Zt){var J=this.itemsTree(I);J!==null&&b.add(J)}else I instanceof Pt?b.add(I.getItem()):Q.shouldNeverReachHere()}return b.size()<=0?null:b}},be.prototype.insert=function(l,h){Q.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Pt(l,h))},be.prototype.boundablesAtLevel=function(){if(arguments.length===1){var l=arguments[0],h=new $t;return this.boundablesAtLevel(l,this._root,h),h}if(arguments.length===3){var b=arguments[0],E=arguments[1],I=arguments[2];if(Q.isTrue(b>-2),E.getLevel()===b)return I.add(E),null;for(var J=E.getChildBoundables().iterator();J.hasNext();){var at=J.next();at instanceof Zt?this.boundablesAtLevel(b,at,I):(Q.isTrue(at instanceof Pt),b===-1&&I.add(at))}return null}},be.prototype.query=function(){if(arguments.length===1){var l=arguments[0];this.build();var h=new $t;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),l)&&this.query(l,this._root,h),h}if(arguments.length===2){var b=arguments[0],E=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),b)&&this.query(b,this._root,E)}else if(arguments.length===3){if(w(arguments[2],Vt)&&arguments[0]instanceof Object&&arguments[1]instanceof Zt)for(var I=arguments[0],J=arguments[1],at=arguments[2],yt=J.getChildBoundables(),St=0;St<yt.size();St++){var Bt=yt.get(St);this.getIntersectsOp().intersects(Bt.getBounds(),I)&&(Bt instanceof Zt?this.query(I,Bt,at):Bt instanceof Pt?at.visitItem(Bt.getItem()):Q.shouldNeverReachHere())}else if(w(arguments[2],He)&&arguments[0]instanceof Object&&arguments[1]instanceof Zt)for(var Yt=arguments[0],ee=arguments[1],xe=arguments[2],Me=ee.getChildBoundables(),Be=0;Be<Me.size();Be++){var Ve=Me.get(Be);this.getIntersectsOp().intersects(Ve.getBounds(),Yt)&&(Ve instanceof Zt?this.query(Yt,Ve,xe):Ve instanceof Pt?xe.add(Ve.getItem()):Q.shouldNeverReachHere())}}},be.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},be.prototype.getRoot=function(){return this.build(),this._root},be.prototype.remove=function(){if(arguments.length===2){var l=arguments[0],h=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),l)&&this.remove(l,this._root,h)}if(arguments.length===3){var b=arguments[0],E=arguments[1],I=arguments[2],J=this.removeItem(E,I);if(J)return!0;for(var at=null,yt=E.getChildBoundables().iterator();yt.hasNext();){var St=yt.next();if(this.getIntersectsOp().intersects(St.getBounds(),b)&&St instanceof Zt&&(J=this.remove(b,St,I))){at=St;break}}return at!==null&&at.getChildBoundables().isEmpty()&&E.getChildBoundables().remove(at),J}},be.prototype.createHigherLevels=function(l,h){Q.isTrue(!l.isEmpty());var b=this.createParentBoundables(l,h+1);return b.size()===1?b.get(0):this.createHigherLevels(b,h+1)},be.prototype.depth=function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var l=0,h=arguments[0].getChildBoundables().iterator();h.hasNext();){var b=h.next();if(b instanceof Zt){var E=this.depth(b);E>l&&(l=E)}}return l+1}},be.prototype.createParentBoundables=function(l,h){Q.isTrue(!l.isEmpty());var b=new $t;b.add(this.createNode(h));var E=new $t(l);Ce.sort(E,this.getComparator());for(var I=E.iterator();I.hasNext();){var J=I.next();this.lastNode(b).getChildBoundables().size()===this.getNodeCapacity()&&b.add(this.createNode(h)),this.lastNode(b).addChildBoundable(J)}return b},be.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},be.prototype.interfaces_=function(){return[t]},be.prototype.getClass=function(){return be},be.compareDoubles=function(l,h){return l>h?1:l<h?-1:0},gr.IntersectsOp.get=function(){return dr},gr.serialVersionUID.get=function(){return-3886435814360241e3},gr.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(be,gr);var dr=function(){},xi=function(){};xi.prototype.distance=function(l,h){},xi.prototype.interfaces_=function(){return[]},xi.prototype.getClass=function(){return xi};var nn=function(l){function h(E){E=E||h.DEFAULT_NODE_CAPACITY,l.call(this,E)}l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h;var b={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return h.prototype.createParentBoundablesFromVerticalSlices=function(E,I){Q.isTrue(E.length>0);for(var J=new $t,at=0;at<E.length;at++)J.addAll(this.createParentBoundablesFromVerticalSlice(E[at],I));return J},h.prototype.createNode=function(E){return new Hn(E)},h.prototype.size=function(){return arguments.length===0?l.prototype.size.call(this):l.prototype.size.apply(this,arguments)},h.prototype.insert=function(){if(arguments.length!==2)return l.prototype.insert.apply(this,arguments);var E=arguments[0],I=arguments[1];if(E.isNull())return null;l.prototype.insert.call(this,E,I)},h.prototype.getIntersectsOp=function(){return h.intersectsOp},h.prototype.verticalSlices=function(E,I){for(var J=Math.trunc(Math.ceil(E.size()/I)),at=new Array(I).fill(null),yt=E.iterator(),St=0;St<I;St++){at[St]=new $t;for(var Bt=0;yt.hasNext()&&Bt<J;){var Yt=yt.next();at[St].add(Yt),Bt++}}return at},h.prototype.query=function(){if(arguments.length===1){var E=arguments[0];return l.prototype.query.call(this,E)}if(arguments.length===2){var I=arguments[0],J=arguments[1];l.prototype.query.call(this,I,J)}else if(arguments.length===3){if(w(arguments[2],Vt)&&arguments[0]instanceof Object&&arguments[1]instanceof Zt){var at=arguments[0],yt=arguments[1],St=arguments[2];l.prototype.query.call(this,at,yt,St)}else if(w(arguments[2],He)&&arguments[0]instanceof Object&&arguments[1]instanceof Zt){var Bt=arguments[0],Yt=arguments[1],ee=arguments[2];l.prototype.query.call(this,Bt,Yt,ee)}}},h.prototype.getComparator=function(){return h.yComparator},h.prototype.createParentBoundablesFromVerticalSlice=function(E,I){return l.prototype.createParentBoundables.call(this,E,I)},h.prototype.remove=function(){if(arguments.length===2){var E=arguments[0],I=arguments[1];return l.prototype.remove.call(this,E,I)}return l.prototype.remove.apply(this,arguments)},h.prototype.depth=function(){return arguments.length===0?l.prototype.depth.call(this):l.prototype.depth.apply(this,arguments)},h.prototype.createParentBoundables=function(E,I){Q.isTrue(!E.isEmpty());var J=Math.trunc(Math.ceil(E.size()/this.getNodeCapacity())),at=new $t(E);Ce.sort(at,h.xComparator);var yt=this.verticalSlices(at,Math.trunc(Math.ceil(Math.sqrt(J))));return this.createParentBoundablesFromVerticalSlices(yt,I)},h.prototype.nearestNeighbour=function(){if(arguments.length===1){if(w(arguments[0],xi)){var E=arguments[0],I=new Ne(this.getRoot(),this.getRoot(),E);return this.nearestNeighbour(I)}if(arguments[0]instanceof Ne){var J=arguments[0];return this.nearestNeighbour(J,O.POSITIVE_INFINITY)}}else if(arguments.length===2){if(arguments[0]instanceof h&&w(arguments[1],xi)){var at=arguments[0],yt=arguments[1],St=new Ne(this.getRoot(),at.getRoot(),yt);return this.nearestNeighbour(St)}if(arguments[0]instanceof Ne&&typeof arguments[1]=="number"){var Bt=arguments[0],Yt=arguments[1],ee=null,xe=new Nt;for(xe.add(Bt);!xe.isEmpty()&&Yt>0;){var Me=xe.poll(),Be=Me.getDistance();if(Be>=Yt)break;Me.isLeaves()?(Yt=Be,ee=Me):Me.expandToQueue(xe,Yt)}return[ee.getBoundable(0).getItem(),ee.getBoundable(1).getItem()]}}else if(arguments.length===3){var Ve=arguments[0],pr=arguments[1],Hr=arguments[2],Nn=new Pt(Ve,pr),Ys=new Ne(this.getRoot(),Nn,Hr);return this.nearestNeighbour(Ys)[0]}},h.prototype.interfaces_=function(){return[ne,t]},h.prototype.getClass=function(){return h},h.centreX=function(E){return h.avg(E.getMinX(),E.getMaxX())},h.avg=function(E,I){return(E+I)/2},h.centreY=function(E){return h.avg(E.getMinY(),E.getMaxY())},b.STRtreeNode.get=function(){return Hn},b.serialVersionUID.get=function(){return 0x39920f7d5f261e0},b.xComparator.get=function(){return{interfaces_:function(){return[q]},compare:function(E,I){return l.compareDoubles(h.centreX(E.getBounds()),h.centreX(I.getBounds()))}}},b.yComparator.get=function(){return{interfaces_:function(){return[q]},compare:function(E,I){return l.compareDoubles(h.centreY(E.getBounds()),h.centreY(I.getBounds()))}}},b.intersectsOp.get=function(){return{interfaces_:function(){return[l.IntersectsOp]},intersects:function(E,I){return E.intersects(I)}}},b.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(h,b),h}(be),Hn=function(l){function h(){var b=arguments[0];l.call(this,b)}return l&&(h.__proto__=l),h.prototype=Object.create(l&&l.prototype),h.prototype.constructor=h,h.prototype.computeBounds=function(){for(var b=null,E=this.getChildBoundables().iterator();E.hasNext();){var I=E.next();b===null?b=new wt(I.getBounds()):b.expandToInclude(I.getBounds())}return b},h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},h}(Zt),Er=function(){};Er.prototype.interfaces_=function(){return[]},Er.prototype.getClass=function(){return Er},Er.relativeSign=function(l,h){return l<h?-1:l>h?1:0},Er.compare=function(l,h,b){if(h.equals2D(b))return 0;var E=Er.relativeSign(h.x,b.x),I=Er.relativeSign(h.y,b.y);switch(l){case 0:return Er.compareValue(E,I);case 1:return Er.compareValue(I,E);case 2:return Er.compareValue(I,-E);case 3:return Er.compareValue(-E,I);case 4:return Er.compareValue(-E,-I);case 5:return Er.compareValue(-I,-E);case 6:return Er.compareValue(-I,E);case 7:return Er.compareValue(E,-I)}return Q.shouldNeverReachHere("invalid octant value"),0},Er.compareValue=function(l,h){return l<0?-1:l>0?1:h<0?-1:h>0?1:0};var fs=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var l=arguments[0],h=arguments[1],b=arguments[2],E=arguments[3];this._segString=l,this.coord=new G(h),this.segmentIndex=b,this._segmentOctant=E,this._isInterior=!h.equals2D(l.getCoordinate(b))};fs.prototype.getCoordinate=function(){return this.coord},fs.prototype.print=function(l){l.print(this.coord),l.print(" seg # = "+this.segmentIndex)},fs.prototype.compareTo=function(l){var h=l;return this.segmentIndex<h.segmentIndex?-1:this.segmentIndex>h.segmentIndex?1:this.coord.equals2D(h.coord)?0:Er.compare(this._segmentOctant,this.coord,h.coord)},fs.prototype.isEndPoint=function(l){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===l},fs.prototype.isInterior=function(){return this._isInterior},fs.prototype.interfaces_=function(){return[U]},fs.prototype.getClass=function(){return fs};var Ar=function(){this._nodeMap=new d,this._edge=null;var l=arguments[0];this._edge=l};Ar.prototype.getSplitCoordinates=function(){var l=new bi;this.addEndpoints();for(var h=this.iterator(),b=h.next();h.hasNext();){var E=h.next();this.addEdgeCoordinates(b,E,l),b=E}return l.toCoordinateArray()},Ar.prototype.addCollapsedNodes=function(){var l=new $t;this.findCollapsesFromInsertedNodes(l),this.findCollapsesFromExistingVertices(l);for(var h=l.iterator();h.hasNext();){var b=h.next().intValue();this.add(this._edge.getCoordinate(b),b)}},Ar.prototype.print=function(l){l.println("Intersections:");for(var h=this.iterator();h.hasNext();)h.next().print(l)},Ar.prototype.findCollapsesFromExistingVertices=function(l){for(var h=0;h<this._edge.size()-2;h++){var b=this._edge.getCoordinate(h),E=this._edge.getCoordinate(h+2);b.equals2D(E)&&l.add(new R(h+1))}},Ar.prototype.addEdgeCoordinates=function(l,h,b){var E=this._edge.getCoordinate(h.segmentIndex),I=h.isInterior()||!h.coord.equals2D(E);b.add(new G(l.coord),!1);for(var J=l.segmentIndex+1;J<=h.segmentIndex;J++)b.add(this._edge.getCoordinate(J));I&&b.add(new G(h.coord))},Ar.prototype.iterator=function(){return this._nodeMap.values().iterator()},Ar.prototype.addSplitEdges=function(l){this.addEndpoints(),this.addCollapsedNodes();for(var h=this.iterator(),b=h.next();h.hasNext();){var E=h.next(),I=this.createSplitEdge(b,E);l.add(I),b=E}},Ar.prototype.findCollapseIndex=function(l,h,b){if(!l.coord.equals2D(h.coord))return!1;var E=h.segmentIndex-l.segmentIndex;return h.isInterior()||E--,E===1&&(b[0]=l.segmentIndex+1,!0)},Ar.prototype.findCollapsesFromInsertedNodes=function(l){for(var h=new Array(1).fill(null),b=this.iterator(),E=b.next();b.hasNext();){var I=b.next();this.findCollapseIndex(E,I,h)&&l.add(new R(h[0])),E=I}},Ar.prototype.getEdge=function(){return this._edge},Ar.prototype.addEndpoints=function(){var l=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(l),l)},Ar.prototype.createSplitEdge=function(l,h){var b=h.segmentIndex-l.segmentIndex+2,E=this._edge.getCoordinate(h.segmentIndex),I=h.isInterior()||!h.coord.equals2D(E);I||b--;var J=new Array(b).fill(null),at=0;J[at++]=new G(l.coord);for(var yt=l.segmentIndex+1;yt<=h.segmentIndex;yt++)J[at++]=this._edge.getCoordinate(yt);return I&&(J[at]=new G(h.coord)),new Cr(J,this._edge.getData())},Ar.prototype.add=function(l,h){var b=new fs(this._edge,l,h,this._edge.getSegmentOctant(h)),E=this._nodeMap.get(b);return E!==null?(Q.isTrue(E.coord.equals2D(l),"Found equal nodes with different coordinates"),E):(this._nodeMap.put(b,b),b)},Ar.prototype.checkSplitEdgesCorrectness=function(l){var h=this._edge.getCoordinates(),b=l.get(0).getCoordinate(0);if(!b.equals2D(h[0]))throw new gt("bad split edge start point at "+b);var E=l.get(l.size()-1).getCoordinates(),I=E[E.length-1];if(!I.equals2D(h[h.length-1]))throw new gt("bad split edge end point at "+I)},Ar.prototype.interfaces_=function(){return[]},Ar.prototype.getClass=function(){return Ar};var Gn=function(){};Gn.prototype.interfaces_=function(){return[]},Gn.prototype.getClass=function(){return Gn},Gn.octant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var l=arguments[0],h=arguments[1];if(l===0&&h===0)throw new S("Cannot compute the octant for point ( "+l+", "+h+" )");var b=Math.abs(l),E=Math.abs(h);return l>=0?h>=0?b>=E?0:1:b>=E?7:6:h>=0?b>=E?3:2:b>=E?4:5}if(arguments[0]instanceof G&&arguments[1]instanceof G){var I=arguments[0],J=arguments[1],at=J.x-I.x,yt=J.y-I.y;if(at===0&&yt===0)throw new S("Cannot compute the octant for two identical points "+I);return Gn.octant(at,yt)}};var Zn=function(){};Zn.prototype.getCoordinates=function(){},Zn.prototype.size=function(){},Zn.prototype.getCoordinate=function(l){},Zn.prototype.isClosed=function(){},Zn.prototype.setData=function(l){},Zn.prototype.getData=function(){},Zn.prototype.interfaces_=function(){return[]},Zn.prototype.getClass=function(){return Zn};var Ts=function(){};Ts.prototype.addIntersection=function(l,h){},Ts.prototype.interfaces_=function(){return[Zn]},Ts.prototype.getClass=function(){return Ts};var Cr=function(){this._nodeList=new Ar(this),this._pts=null,this._data=null;var l=arguments[0],h=arguments[1];this._pts=l,this._data=h};Cr.prototype.getCoordinates=function(){return this._pts},Cr.prototype.size=function(){return this._pts.length},Cr.prototype.getCoordinate=function(l){return this._pts[l]},Cr.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Cr.prototype.getSegmentOctant=function(l){return l===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(l),this.getCoordinate(l+1))},Cr.prototype.setData=function(l){this._data=l},Cr.prototype.safeOctant=function(l,h){return l.equals2D(h)?0:Gn.octant(l,h)},Cr.prototype.getData=function(){return this._data},Cr.prototype.addIntersection=function(){if(arguments.length===2){var l=arguments[0],h=arguments[1];this.addIntersectionNode(l,h)}else if(arguments.length===4){var b=arguments[0],E=arguments[1],I=arguments[3],J=new G(b.getIntersection(I));this.addIntersection(J,E)}},Cr.prototype.toString=function(){return kt.toLineString(new pe(this._pts))},Cr.prototype.getNodeList=function(){return this._nodeList},Cr.prototype.addIntersectionNode=function(l,h){var b=h,E=b+1;if(E<this._pts.length){var I=this._pts[E];l.equals2D(I)&&(b=E)}return this._nodeList.add(l,b)},Cr.prototype.addIntersections=function(l,h,b){for(var E=0;E<l.getIntersectionNum();E++)this.addIntersection(l,h,b,E)},Cr.prototype.interfaces_=function(){return[Ts]},Cr.prototype.getClass=function(){return Cr},Cr.getNodedSubstrings=function(){if(arguments.length===1){var l=arguments[0],h=new $t;return Cr.getNodedSubstrings(l,h),h}if(arguments.length===2)for(var b=arguments[0],E=arguments[1],I=b.iterator();I.hasNext();)I.next().getNodeList().addSplitEdges(E)};var Pe=function(){if(this.p0=null,this.p1=null,arguments.length===0)this.p0=new G,this.p1=new G;else if(arguments.length===1){var l=arguments[0];this.p0=new G(l.p0),this.p1=new G(l.p1)}else if(arguments.length===2)this.p0=arguments[0],this.p1=arguments[1];else if(arguments.length===4){var h=arguments[0],b=arguments[1],E=arguments[2],I=arguments[3];this.p0=new G(h,b),this.p1=new G(E,I)}},ca={serialVersionUID:{configurable:!0}};Pe.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},Pe.prototype.orientationIndex=function(){if(arguments[0]instanceof Pe){var l=arguments[0],h=Et.orientationIndex(this.p0,this.p1,l.p0),b=Et.orientationIndex(this.p0,this.p1,l.p1);return h>=0&&b>=0||h<=0&&b<=0?Math.max(h,b):0}if(arguments[0]instanceof G){var E=arguments[0];return Et.orientationIndex(this.p0,this.p1,E)}},Pe.prototype.toGeometry=function(l){return l.createLineString([this.p0,this.p1])},Pe.prototype.isVertical=function(){return this.p0.x===this.p1.x},Pe.prototype.equals=function(l){if(!(l instanceof Pe))return!1;var h=l;return this.p0.equals(h.p0)&&this.p1.equals(h.p1)},Pe.prototype.intersection=function(l){var h=new lt;return h.computeIntersection(this.p0,this.p1,l.p0,l.p1),h.hasIntersection()?h.getIntersection(0):null},Pe.prototype.project=function(){if(arguments[0]instanceof G){var l=arguments[0];if(l.equals(this.p0)||l.equals(this.p1))return new G(l);var h=this.projectionFactor(l),b=new G;return b.x=this.p0.x+h*(this.p1.x-this.p0.x),b.y=this.p0.y+h*(this.p1.y-this.p0.y),b}if(arguments[0]instanceof Pe){var E=arguments[0],I=this.projectionFactor(E.p0),J=this.projectionFactor(E.p1);if(I>=1&&J>=1||I<=0&&J<=0)return null;var at=this.project(E.p0);I<0&&(at=this.p0),I>1&&(at=this.p1);var yt=this.project(E.p1);return J<0&&(yt=this.p0),J>1&&(yt=this.p1),new Pe(at,yt)}},Pe.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},Pe.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},Pe.prototype.getCoordinate=function(l){return l===0?this.p0:this.p1},Pe.prototype.distancePerpendicular=function(l){return Et.distancePointLinePerpendicular(l,this.p0,this.p1)},Pe.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},Pe.prototype.midPoint=function(){return Pe.midPoint(this.p0,this.p1)},Pe.prototype.projectionFactor=function(l){if(l.equals(this.p0))return 0;if(l.equals(this.p1))return 1;var h=this.p1.x-this.p0.x,b=this.p1.y-this.p0.y,E=h*h+b*b;return E<=0?O.NaN:((l.x-this.p0.x)*h+(l.y-this.p0.y)*b)/E},Pe.prototype.closestPoints=function(l){var h=this.intersection(l);if(h!==null)return[h,h];var b=new Array(2).fill(null),E=O.MAX_VALUE,I=null,J=this.closestPoint(l.p0);E=J.distance(l.p0),b[0]=J,b[1]=l.p0;var at=this.closestPoint(l.p1);(I=at.distance(l.p1))<E&&(E=I,b[0]=at,b[1]=l.p1);var yt=l.closestPoint(this.p0);(I=yt.distance(this.p0))<E&&(E=I,b[0]=this.p0,b[1]=yt);var St=l.closestPoint(this.p1);return(I=St.distance(this.p1))<E&&(E=I,b[0]=this.p1,b[1]=St),b},Pe.prototype.closestPoint=function(l){var h=this.projectionFactor(l);return h>0&&h<1?this.project(l):this.p0.distance(l)<this.p1.distance(l)?this.p0:this.p1},Pe.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},Pe.prototype.getLength=function(){return this.p0.distance(this.p1)},Pe.prototype.compareTo=function(l){var h=l,b=this.p0.compareTo(h.p0);return b!==0?b:this.p1.compareTo(h.p1)},Pe.prototype.reverse=function(){var l=this.p0;this.p0=this.p1,this.p1=l},Pe.prototype.equalsTopo=function(l){return this.p0.equals(l.p0)&&(this.p1.equals(l.p1)||this.p0.equals(l.p1))&&this.p1.equals(l.p0)},Pe.prototype.lineIntersection=function(l){try{return mt.intersection(this.p0,this.p1,l.p0,l.p1)}catch(h){if(!(h instanceof V))throw h}return null},Pe.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},Pe.prototype.pointAlongOffset=function(l,h){var b=this.p0.x+l*(this.p1.x-this.p0.x),E=this.p0.y+l*(this.p1.y-this.p0.y),I=this.p1.x-this.p0.x,J=this.p1.y-this.p0.y,at=Math.sqrt(I*I+J*J),yt=0,St=0;if(h!==0){if(at<=0)throw new Error("Cannot compute offset from zero-length line segment");yt=h*I/at,St=h*J/at}return new G(b-St,E+yt)},Pe.prototype.setCoordinates=function(){if(arguments.length===1){var l=arguments[0];this.setCoordinates(l.p0,l.p1)}else if(arguments.length===2){var h=arguments[0],b=arguments[1];this.p0.x=h.x,this.p0.y=h.y,this.p1.x=b.x,this.p1.y=b.y}},Pe.prototype.segmentFraction=function(l){var h=this.projectionFactor(l);return h<0?h=0:(h>1||O.isNaN(h))&&(h=1),h},Pe.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},Pe.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},Pe.prototype.distance=function(){if(arguments[0]instanceof Pe){var l=arguments[0];return Et.distanceLineLine(this.p0,this.p1,l.p0,l.p1)}if(arguments[0]instanceof G){var h=arguments[0];return Et.distancePointLine(h,this.p0,this.p1)}},Pe.prototype.pointAlong=function(l){var h=new G;return h.x=this.p0.x+l*(this.p1.x-this.p0.x),h.y=this.p0.y+l*(this.p1.y-this.p0.y),h},Pe.prototype.hashCode=function(){var l=O.doubleToLongBits(this.p0.x);l^=31*O.doubleToLongBits(this.p0.y);var h=Math.trunc(l)^Math.trunc(l>>32),b=O.doubleToLongBits(this.p1.x);return b^=31*O.doubleToLongBits(this.p1.y),h^(Math.trunc(b)^Math.trunc(b>>32))},Pe.prototype.interfaces_=function(){return[U,t]},Pe.prototype.getClass=function(){return Pe},Pe.midPoint=function(l,h){return new G((l.x+h.x)/2,(l.y+h.y)/2)},ca.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(Pe,ca);var eo=function(){this.tempEnv1=new wt,this.tempEnv2=new wt,this._overlapSeg1=new Pe,this._overlapSeg2=new Pe};eo.prototype.overlap=function(){if(arguments.length!==2){if(arguments.length===4){var l=arguments[0],h=arguments[1],b=arguments[2],E=arguments[3];l.getLineSegment(h,this._overlapSeg1),b.getLineSegment(E,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}},eo.prototype.interfaces_=function(){return[]},eo.prototype.getClass=function(){return eo};var Ir=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var l=arguments[0],h=arguments[1],b=arguments[2],E=arguments[3];this._pts=l,this._start=h,this._end=b,this._context=E};Ir.prototype.getLineSegment=function(l,h){h.p0=this._pts[l],h.p1=this._pts[l+1]},Ir.prototype.computeSelect=function(l,h,b,E){var I=this._pts[h],J=this._pts[b];if(E.tempEnv1.init(I,J),b-h==1)return E.select(this,h),null;if(!l.intersects(E.tempEnv1))return null;var at=Math.trunc((h+b)/2);h<at&&this.computeSelect(l,h,at,E),at<b&&this.computeSelect(l,at,b,E)},Ir.prototype.getCoordinates=function(){for(var l=new Array(this._end-this._start+1).fill(null),h=0,b=this._start;b<=this._end;b++)l[h++]=this._pts[b];return l},Ir.prototype.computeOverlaps=function(l,h){this.computeOverlapsInternal(this._start,this._end,l,l._start,l._end,h)},Ir.prototype.setId=function(l){this._id=l},Ir.prototype.select=function(l,h){this.computeSelect(l,this._start,this._end,h)},Ir.prototype.getEnvelope=function(){if(this._env===null){var l=this._pts[this._start],h=this._pts[this._end];this._env=new wt(l,h)}return this._env},Ir.prototype.getEndIndex=function(){return this._end},Ir.prototype.getStartIndex=function(){return this._start},Ir.prototype.getContext=function(){return this._context},Ir.prototype.getId=function(){return this._id},Ir.prototype.computeOverlapsInternal=function(l,h,b,E,I,J){var at=this._pts[l],yt=this._pts[h],St=b._pts[E],Bt=b._pts[I];if(h-l==1&&I-E==1)return J.overlap(this,l,b,E),null;if(J.tempEnv1.init(at,yt),J.tempEnv2.init(St,Bt),!J.tempEnv1.intersects(J.tempEnv2))return null;var Yt=Math.trunc((l+h)/2),ee=Math.trunc((E+I)/2);l<Yt&&(E<ee&&this.computeOverlapsInternal(l,Yt,b,E,ee,J),ee<I&&this.computeOverlapsInternal(l,Yt,b,ee,I,J)),Yt<h&&(E<ee&&this.computeOverlapsInternal(Yt,h,b,E,ee,J),ee<I&&this.computeOverlapsInternal(Yt,h,b,ee,I,J))},Ir.prototype.interfaces_=function(){return[]},Ir.prototype.getClass=function(){return Ir};var ss=function(){};ss.prototype.interfaces_=function(){return[]},ss.prototype.getClass=function(){return ss},ss.getChainStartIndices=function(l){var h=0,b=new $t;b.add(new R(h));do{var E=ss.findChainEnd(l,h);b.add(new R(E)),h=E}while(h<l.length-1);return ss.toIntArray(b)},ss.findChainEnd=function(l,h){for(var b=h;b<l.length-1&&l[b].equals2D(l[b+1]);)b++;if(b>=l.length-1)return l.length-1;for(var E=M.quadrant(l[b],l[b+1]),I=h+1;I<l.length&&!(!l[I-1].equals2D(l[I])&&M.quadrant(l[I-1],l[I])!==E);)I++;return I-1},ss.getChains=function(){if(arguments.length===1){var l=arguments[0];return ss.getChains(l,null)}if(arguments.length===2){for(var h=arguments[0],b=arguments[1],E=new $t,I=ss.getChainStartIndices(h),J=0;J<I.length-1;J++){var at=new Ir(h,I[J],I[J+1],b);E.add(at)}return E}},ss.toIntArray=function(l){for(var h=new Array(l.size()).fill(null),b=0;b<h.length;b++)h[b]=l.get(b).intValue();return h};var zs=function(){};zs.prototype.computeNodes=function(l){},zs.prototype.getNodedSubstrings=function(){},zs.prototype.interfaces_=function(){return[]},zs.prototype.getClass=function(){return zs};var Yo=function(){if(this._segInt=null,arguments.length!==0){if(arguments.length===1){var l=arguments[0];this.setSegmentIntersector(l)}}};Yo.prototype.setSegmentIntersector=function(l){this._segInt=l},Yo.prototype.interfaces_=function(){return[zs]},Yo.prototype.getClass=function(){return Yo};var Za=function(l){function h(E){E?l.call(this,E):l.call(this),this._monoChains=new $t,this._index=new nn,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h;var b={SegmentOverlapAction:{configurable:!0}};return h.prototype.getMonotoneChains=function(){return this._monoChains},h.prototype.getNodedSubstrings=function(){return Cr.getNodedSubstrings(this._nodedSegStrings)},h.prototype.getIndex=function(){return this._index},h.prototype.add=function(E){for(var I=ss.getChains(E.getCoordinates(),E).iterator();I.hasNext();){var J=I.next();J.setId(this._idCounter++),this._index.insert(J.getEnvelope(),J),this._monoChains.add(J)}},h.prototype.computeNodes=function(E){this._nodedSegStrings=E;for(var I=E.iterator();I.hasNext();)this.add(I.next());this.intersectChains()},h.prototype.intersectChains=function(){for(var E=new fa(this._segInt),I=this._monoChains.iterator();I.hasNext();)for(var J=I.next(),at=this._index.query(J.getEnvelope()).iterator();at.hasNext();){var yt=at.next();if(yt.getId()>J.getId()&&(J.computeOverlaps(yt,E),this._nOverlaps++),this._segInt.isDone())return null}},h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},b.SegmentOverlapAction.get=function(){return fa},Object.defineProperties(h,b),h}(Yo),fa=function(l){function h(){l.call(this),this._si=null;var b=arguments[0];this._si=b}return l&&(h.__proto__=l),h.prototype=Object.create(l&&l.prototype),h.prototype.constructor=h,h.prototype.overlap=function(){if(arguments.length!==4)return l.prototype.overlap.apply(this,arguments);var b=arguments[0],E=arguments[1],I=arguments[2],J=arguments[3],at=b.getContext(),yt=I.getContext();this._si.processIntersections(at,E,yt,J)},h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},h}(eo),ki=function l(){if(this._quadrantSegments=l.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=l.CAP_ROUND,this._joinStyle=l.JOIN_ROUND,this._mitreLimit=l.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=l.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var h=arguments[0];this.setQuadrantSegments(h)}else if(arguments.length===2){var b=arguments[0],E=arguments[1];this.setQuadrantSegments(b),this.setEndCapStyle(E)}else if(arguments.length===4){var I=arguments[0],J=arguments[1],at=arguments[2],yt=arguments[3];this.setQuadrantSegments(I),this.setEndCapStyle(J),this.setJoinStyle(at),this.setMitreLimit(yt)}}},ws={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};ki.prototype.getEndCapStyle=function(){return this._endCapStyle},ki.prototype.isSingleSided=function(){return this._isSingleSided},ki.prototype.setQuadrantSegments=function(l){this._quadrantSegments=l,this._quadrantSegments===0&&(this._joinStyle=ki.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=ki.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),l<=0&&(this._quadrantSegments=1),this._joinStyle!==ki.JOIN_ROUND&&(this._quadrantSegments=ki.DEFAULT_QUADRANT_SEGMENTS)},ki.prototype.getJoinStyle=function(){return this._joinStyle},ki.prototype.setJoinStyle=function(l){this._joinStyle=l},ki.prototype.setSimplifyFactor=function(l){this._simplifyFactor=l<0?0:l},ki.prototype.getSimplifyFactor=function(){return this._simplifyFactor},ki.prototype.getQuadrantSegments=function(){return this._quadrantSegments},ki.prototype.setEndCapStyle=function(l){this._endCapStyle=l},ki.prototype.getMitreLimit=function(){return this._mitreLimit},ki.prototype.setMitreLimit=function(l){this._mitreLimit=l},ki.prototype.setSingleSided=function(l){this._isSingleSided=l},ki.prototype.interfaces_=function(){return[]},ki.prototype.getClass=function(){return ki},ki.bufferDistanceError=function(l){var h=Math.PI/2/l;return 1-Math.cos(h/2)},ws.CAP_ROUND.get=function(){return 1},ws.CAP_FLAT.get=function(){return 2},ws.CAP_SQUARE.get=function(){return 3},ws.JOIN_ROUND.get=function(){return 1},ws.JOIN_MITRE.get=function(){return 2},ws.JOIN_BEVEL.get=function(){return 3},ws.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},ws.DEFAULT_MITRE_LIMIT.get=function(){return 5},ws.DEFAULT_SIMPLIFY_FACTOR.get=function(){return .01},Object.defineProperties(ki,ws);var Mr=function(l){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Et.COUNTERCLOCKWISE,this._inputLine=l||null},io={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Mr.prototype.isDeletable=function(l,h,b,E){var I=this._inputLine[l],J=this._inputLine[h],at=this._inputLine[b];return!!this.isConcave(I,J,at)&&!!this.isShallow(I,J,at,E)&&this.isShallowSampled(I,J,l,b,E)},Mr.prototype.deleteShallowConcavities=function(){for(var l=1,h=this.findNextNonDeletedIndex(l),b=this.findNextNonDeletedIndex(h),E=!1;b<this._inputLine.length;){var I=!1;this.isDeletable(l,h,b,this._distanceTol)&&(this._isDeleted[h]=Mr.DELETE,I=!0,E=!0),l=I?b:h,h=this.findNextNonDeletedIndex(l),b=this.findNextNonDeletedIndex(h)}return E},Mr.prototype.isShallowConcavity=function(l,h,b,E){return Et.computeOrientation(l,h,b)!==this._angleOrientation?!1:Et.distancePointLine(h,l,b)<E},Mr.prototype.isShallowSampled=function(l,h,b,E,I){var J=Math.trunc((E-b)/Mr.NUM_PTS_TO_CHECK);J<=0&&(J=1);for(var at=b;at<E;at+=J)if(!this.isShallow(l,h,this._inputLine[at],I))return!1;return!0},Mr.prototype.isConcave=function(l,h,b){var E=Et.computeOrientation(l,h,b)===this._angleOrientation;return E},Mr.prototype.simplify=function(l){this._distanceTol=Math.abs(l),l<0&&(this._angleOrientation=Et.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var h=!1;do h=this.deleteShallowConcavities();while(h);return this.collapseLine()},Mr.prototype.findNextNonDeletedIndex=function(l){for(var h=l+1;h<this._inputLine.length&&this._isDeleted[h]===Mr.DELETE;)h++;return h},Mr.prototype.isShallow=function(l,h,b,E){return Et.distancePointLine(h,l,b)<E},Mr.prototype.collapseLine=function(){for(var l=new bi,h=0;h<this._inputLine.length;h++)this._isDeleted[h]!==Mr.DELETE&&l.add(this._inputLine[h]);return l.toCoordinateArray()},Mr.prototype.interfaces_=function(){return[]},Mr.prototype.getClass=function(){return Mr},Mr.simplify=function(l,h){return new Mr(l).simplify(h)},io.INIT.get=function(){return 0},io.DELETE.get=function(){return 1},io.KEEP.get=function(){return 1},io.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Mr,io);var Wr=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new $t},ql={COORDINATE_ARRAY_TYPE:{configurable:!0}};Wr.prototype.getCoordinates=function(){return this._ptList.toArray(Wr.COORDINATE_ARRAY_TYPE)},Wr.prototype.setPrecisionModel=function(l){this._precisionModel=l},Wr.prototype.addPt=function(l){var h=new G(l);if(this._precisionModel.makePrecise(h),this.isRedundant(h))return null;this._ptList.add(h)},Wr.prototype.revere=function(){},Wr.prototype.addPts=function(l,h){if(h)for(var b=0;b<l.length;b++)this.addPt(l[b]);else for(var E=l.length-1;E>=0;E--)this.addPt(l[E])},Wr.prototype.isRedundant=function(l){if(this._ptList.size()<1)return!1;var h=this._ptList.get(this._ptList.size()-1);return l.distance(h)<this._minimimVertexDistance},Wr.prototype.toString=function(){return new Se().createLineString(this.getCoordinates()).toString()},Wr.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var l=new G(this._ptList.get(0)),h=this._ptList.get(this._ptList.size()-1);if(l.equals(h))return null;this._ptList.add(l)},Wr.prototype.setMinimumVertexDistance=function(l){this._minimimVertexDistance=l},Wr.prototype.interfaces_=function(){return[]},Wr.prototype.getClass=function(){return Wr},ql.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Wr,ql);var di=function(){},yn={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};di.prototype.interfaces_=function(){return[]},di.prototype.getClass=function(){return di},di.toDegrees=function(l){return 180*l/Math.PI},di.normalize=function(l){for(;l>Math.PI;)l-=di.PI_TIMES_2;for(;l<=-Math.PI;)l+=di.PI_TIMES_2;return l},di.angle=function(){if(arguments.length===1){var l=arguments[0];return Math.atan2(l.y,l.x)}if(arguments.length===2){var h=arguments[0],b=arguments[1],E=b.x-h.x,I=b.y-h.y;return Math.atan2(I,E)}},di.isAcute=function(l,h,b){var E=l.x-h.x,I=l.y-h.y;return E*(b.x-h.x)+I*(b.y-h.y)>0},di.isObtuse=function(l,h,b){var E=l.x-h.x,I=l.y-h.y;return E*(b.x-h.x)+I*(b.y-h.y)<0},di.interiorAngle=function(l,h,b){var E=di.angle(h,l),I=di.angle(h,b);return Math.abs(I-E)},di.normalizePositive=function(l){if(l<0){for(;l<0;)l+=di.PI_TIMES_2;l>=di.PI_TIMES_2&&(l=0)}else{for(;l>=di.PI_TIMES_2;)l-=di.PI_TIMES_2;l<0&&(l=0)}return l},di.angleBetween=function(l,h,b){var E=di.angle(h,l),I=di.angle(h,b);return di.diff(E,I)},di.diff=function(l,h){var b=null;return(b=l<h?h-l:l-h)>Math.PI&&(b=2*Math.PI-b),b},di.toRadians=function(l){return l*Math.PI/180},di.getTurn=function(l,h){var b=Math.sin(h-l);return b>0?di.COUNTERCLOCKWISE:b<0?di.CLOCKWISE:di.NONE},di.angleBetweenOriented=function(l,h,b){var E=di.angle(h,l),I=di.angle(h,b)-E;return I<=-Math.PI?I+di.PI_TIMES_2:I>Math.PI?I-di.PI_TIMES_2:I},yn.PI_TIMES_2.get=function(){return 2*Math.PI},yn.PI_OVER_2.get=function(){return Math.PI/2},yn.PI_OVER_4.get=function(){return Math.PI/4},yn.COUNTERCLOCKWISE.get=function(){return Et.COUNTERCLOCKWISE},yn.CLOCKWISE.get=function(){return Et.CLOCKWISE},yn.NONE.get=function(){return Et.COLLINEAR},Object.defineProperties(di,yn);var br=function l(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new Pe,this._seg1=new Pe,this._offset0=new Pe,this._offset1=new Pe,this._side=0,this._hasNarrowConcaveAngle=!1;var h=arguments[0],b=arguments[1],E=arguments[2];this._precisionModel=h,this._bufParams=b,this._li=new lt,this._filletAngleQuantum=Math.PI/2/b.getQuadrantSegments(),b.getQuadrantSegments()>=8&&b.getJoinStyle()===ki.JOIN_ROUND&&(this._closingSegLengthFactor=l.MAX_CLOSING_SEG_LEN_FACTOR),this.init(E)},No={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};br.prototype.addNextSegment=function(l,h){if(this._s0=this._s1,this._s1=this._s2,this._s2=l,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var b=Et.computeOrientation(this._s0,this._s1,this._s2),E=b===Et.CLOCKWISE&&this._side===oe.LEFT||b===Et.COUNTERCLOCKWISE&&this._side===oe.RIGHT;b===0?this.addCollinear(h):E?this.addOutsideTurn(b,h):this.addInsideTurn(b,h)},br.prototype.addLineEndCap=function(l,h){var b=new Pe(l,h),E=new Pe;this.computeOffsetSegment(b,oe.LEFT,this._distance,E);var I=new Pe;this.computeOffsetSegment(b,oe.RIGHT,this._distance,I);var J=h.x-l.x,at=h.y-l.y,yt=Math.atan2(at,J);switch(this._bufParams.getEndCapStyle()){case ki.CAP_ROUND:this._segList.addPt(E.p1),this.addFilletArc(h,yt+Math.PI/2,yt-Math.PI/2,Et.CLOCKWISE,this._distance),this._segList.addPt(I.p1);break;case ki.CAP_FLAT:this._segList.addPt(E.p1),this._segList.addPt(I.p1);break;case ki.CAP_SQUARE:var St=new G;St.x=Math.abs(this._distance)*Math.cos(yt),St.y=Math.abs(this._distance)*Math.sin(yt);var Bt=new G(E.p1.x+St.x,E.p1.y+St.y),Yt=new G(I.p1.x+St.x,I.p1.y+St.y);this._segList.addPt(Bt),this._segList.addPt(Yt)}},br.prototype.getCoordinates=function(){return this._segList.getCoordinates()},br.prototype.addMitreJoin=function(l,h,b,E){var I=!0,J=null;try{J=mt.intersection(h.p0,h.p1,b.p0,b.p1),(E<=0?1:J.distance(l)/Math.abs(E))>this._bufParams.getMitreLimit()&&(I=!1)}catch(at){if(!(at instanceof V))throw at;J=new G(0,0),I=!1}I?this._segList.addPt(J):this.addLimitedMitreJoin(h,b,E,this._bufParams.getMitreLimit())},br.prototype.addFilletCorner=function(l,h,b,E,I){var J=h.x-l.x,at=h.y-l.y,yt=Math.atan2(at,J),St=b.x-l.x,Bt=b.y-l.y,Yt=Math.atan2(Bt,St);E===Et.CLOCKWISE?yt<=Yt&&(yt+=2*Math.PI):yt>=Yt&&(yt-=2*Math.PI),this._segList.addPt(h),this.addFilletArc(l,yt,Yt,E,I),this._segList.addPt(b)},br.prototype.addOutsideTurn=function(l,h){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*br.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===ki.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===ki.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(h&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,l,this._distance),this._segList.addPt(this._offset1.p0))},br.prototype.createSquare=function(l){this._segList.addPt(new G(l.x+this._distance,l.y+this._distance)),this._segList.addPt(new G(l.x+this._distance,l.y-this._distance)),this._segList.addPt(new G(l.x-this._distance,l.y-this._distance)),this._segList.addPt(new G(l.x-this._distance,l.y+this._distance)),this._segList.closeRing()},br.prototype.addSegments=function(l,h){this._segList.addPts(l,h)},br.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},br.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},br.prototype.initSideSegments=function(l,h,b){this._s1=l,this._s2=h,this._side=b,this._seg1.setCoordinates(l,h),this.computeOffsetSegment(this._seg1,b,this._distance,this._offset1)},br.prototype.addLimitedMitreJoin=function(l,h,b,E){var I=this._seg0.p1,J=di.angle(I,this._seg0.p0),at=di.angleBetweenOriented(this._seg0.p0,I,this._seg1.p1)/2,yt=di.normalize(J+at),St=di.normalize(yt+Math.PI),Bt=E*b,Yt=b-Bt*Math.abs(Math.sin(at)),ee=I.x+Bt*Math.cos(St),xe=I.y+Bt*Math.sin(St),Me=new G(ee,xe),Be=new Pe(I,Me),Ve=Be.pointAlongOffset(1,Yt),pr=Be.pointAlongOffset(1,-Yt);this._side===oe.LEFT?(this._segList.addPt(Ve),this._segList.addPt(pr)):(this._segList.addPt(pr),this._segList.addPt(Ve))},br.prototype.computeOffsetSegment=function(l,h,b,E){var I=h===oe.LEFT?1:-1,J=l.p1.x-l.p0.x,at=l.p1.y-l.p0.y,yt=Math.sqrt(J*J+at*at),St=I*b*J/yt,Bt=I*b*at/yt;E.p0.x=l.p0.x-Bt,E.p0.y=l.p0.y+St,E.p1.x=l.p1.x-Bt,E.p1.y=l.p1.y+St},br.prototype.addFilletArc=function(l,h,b,E,I){var J=E===Et.CLOCKWISE?-1:1,at=Math.abs(h-b),yt=Math.trunc(at/this._filletAngleQuantum+.5);if(yt<1)return null;for(var St=at/yt,Bt=0,Yt=new G;Bt<at;){var ee=h+J*Bt;Yt.x=l.x+I*Math.cos(ee),Yt.y=l.y+I*Math.sin(ee),this._segList.addPt(Yt),Bt+=St}},br.prototype.addInsideTurn=function(l,h){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*br.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var b=new G((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(b);var E=new G((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(E)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},br.prototype.createCircle=function(l){var h=new G(l.x+this._distance,l.y);this._segList.addPt(h),this.addFilletArc(l,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},br.prototype.addBevelJoin=function(l,h){this._segList.addPt(l.p1),this._segList.addPt(h.p0)},br.prototype.init=function(l){this._distance=l,this._maxCurveSegmentError=l*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Wr,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(l*br.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},br.prototype.addCollinear=function(l){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===ki.JOIN_BEVEL||this._bufParams.getJoinStyle()===ki.JOIN_MITRE?(l&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,Et.CLOCKWISE,this._distance))},br.prototype.closeRing=function(){this._segList.closeRing()},br.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},br.prototype.interfaces_=function(){return[]},br.prototype.getClass=function(){return br},No.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return .001},No.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return .001},No.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},No.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(br,No);var Sn=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var l=arguments[0],h=arguments[1];this._precisionModel=l,this._bufParams=h};Sn.prototype.getOffsetCurve=function(l,h){if(this._distance=h,h===0)return null;var b=h<0,E=Math.abs(h),I=this.getSegGen(E);l.length<=1?this.computePointCurve(l[0],I):this.computeOffsetCurve(l,b,I);var J=I.getCoordinates();return b&&ue.reverse(J),J},Sn.prototype.computeSingleSidedBufferCurve=function(l,h,b){var E=this.simplifyTolerance(this._distance);if(h){b.addSegments(l,!0);var I=Mr.simplify(l,-E),J=I.length-1;b.initSideSegments(I[J],I[J-1],oe.LEFT),b.addFirstSegment();for(var at=J-2;at>=0;at--)b.addNextSegment(I[at],!0)}else{b.addSegments(l,!1);var yt=Mr.simplify(l,E),St=yt.length-1;b.initSideSegments(yt[0],yt[1],oe.LEFT),b.addFirstSegment();for(var Bt=2;Bt<=St;Bt++)b.addNextSegment(yt[Bt],!0)}b.addLastSegment(),b.closeRing()},Sn.prototype.computeRingBufferCurve=function(l,h,b){var E=this.simplifyTolerance(this._distance);h===oe.RIGHT&&(E=-E);var I=Mr.simplify(l,E),J=I.length-1;b.initSideSegments(I[J-1],I[0],h);for(var at=1;at<=J;at++){var yt=at!==1;b.addNextSegment(I[at],yt)}b.closeRing()},Sn.prototype.computeLineBufferCurve=function(l,h){var b=this.simplifyTolerance(this._distance),E=Mr.simplify(l,b),I=E.length-1;h.initSideSegments(E[0],E[1],oe.LEFT);for(var J=2;J<=I;J++)h.addNextSegment(E[J],!0);h.addLastSegment(),h.addLineEndCap(E[I-1],E[I]);var at=Mr.simplify(l,-b),yt=at.length-1;h.initSideSegments(at[yt],at[yt-1],oe.LEFT);for(var St=yt-2;St>=0;St--)h.addNextSegment(at[St],!0);h.addLastSegment(),h.addLineEndCap(at[1],at[0]),h.closeRing()},Sn.prototype.computePointCurve=function(l,h){switch(this._bufParams.getEndCapStyle()){case ki.CAP_ROUND:h.createCircle(l);break;case ki.CAP_SQUARE:h.createSquare(l)}},Sn.prototype.getLineCurve=function(l,h){if(this._distance=h,h<0&&!this._bufParams.isSingleSided()||h===0)return null;var b=Math.abs(h),E=this.getSegGen(b);if(l.length<=1)this.computePointCurve(l[0],E);else if(this._bufParams.isSingleSided()){var I=h<0;this.computeSingleSidedBufferCurve(l,I,E)}else this.computeLineBufferCurve(l,E);return E.getCoordinates()},Sn.prototype.getBufferParameters=function(){return this._bufParams},Sn.prototype.simplifyTolerance=function(l){return l*this._bufParams.getSimplifyFactor()},Sn.prototype.getRingCurve=function(l,h,b){if(this._distance=b,l.length<=2)return this.getLineCurve(l,b);if(b===0)return Sn.copyCoordinates(l);var E=this.getSegGen(b);return this.computeRingBufferCurve(l,h,E),E.getCoordinates()},Sn.prototype.computeOffsetCurve=function(l,h,b){var E=this.simplifyTolerance(this._distance);if(h){var I=Mr.simplify(l,-E),J=I.length-1;b.initSideSegments(I[J],I[J-1],oe.LEFT),b.addFirstSegment();for(var at=J-2;at>=0;at--)b.addNextSegment(I[at],!0)}else{var yt=Mr.simplify(l,E),St=yt.length-1;b.initSideSegments(yt[0],yt[1],oe.LEFT),b.addFirstSegment();for(var Bt=2;Bt<=St;Bt++)b.addNextSegment(yt[Bt],!0)}b.addLastSegment()},Sn.prototype.getSegGen=function(l){return new br(this._precisionModel,this._bufParams,l)},Sn.prototype.interfaces_=function(){return[]},Sn.prototype.getClass=function(){return Sn},Sn.copyCoordinates=function(l){for(var h=new Array(l.length).fill(null),b=0;b<h.length;b++)h[b]=new G(l[b]);return h};var ro=function(){this._subgraphs=null,this._seg=new Pe,this._cga=new Et;var l=arguments[0];this._subgraphs=l},Ka={DepthSegment:{configurable:!0}};ro.prototype.findStabbedSegments=function(){if(arguments.length===1){for(var l=arguments[0],h=new $t,b=this._subgraphs.iterator();b.hasNext();){var E=b.next(),I=E.getEnvelope();l.y<I.getMinY()||l.y>I.getMaxY()||this.findStabbedSegments(l,E.getDirectedEdges(),h)}return h}if(arguments.length===3){if(w(arguments[2],He)&&arguments[0]instanceof G&&arguments[1]instanceof nt){for(var J=arguments[0],at=arguments[1],yt=arguments[2],St=at.getEdge().getCoordinates(),Bt=0;Bt<St.length-1;Bt++)if(this._seg.p0=St[Bt],this._seg.p1=St[Bt+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<J.x)&&!(this._seg.isHorizontal()||J.y<this._seg.p0.y||J.y>this._seg.p1.y||Et.computeOrientation(this._seg.p0,this._seg.p1,J)===Et.RIGHT)){var Yt=at.getDepth(oe.LEFT);this._seg.p0.equals(St[Bt])||(Yt=at.getDepth(oe.RIGHT));var ee=new no(this._seg,Yt);yt.add(ee)}}else if(w(arguments[2],He)&&arguments[0]instanceof G&&w(arguments[1],He))for(var xe=arguments[0],Me=arguments[1],Be=arguments[2],Ve=Me.iterator();Ve.hasNext();){var pr=Ve.next();pr.isForward()&&this.findStabbedSegments(xe,pr,Be)}}},ro.prototype.getDepth=function(l){var h=this.findStabbedSegments(l);return h.size()===0?0:Ce.min(h)._leftDepth},ro.prototype.interfaces_=function(){return[]},ro.prototype.getClass=function(){return ro},Ka.DepthSegment.get=function(){return no},Object.defineProperties(ro,Ka);var no=function(){this._upwardSeg=null,this._leftDepth=null;var l=arguments[0],h=arguments[1];this._upwardSeg=new Pe(l),this._leftDepth=h};no.prototype.compareTo=function(l){var h=l;if(this._upwardSeg.minX()>=h._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=h._upwardSeg.minX())return-1;var b=this._upwardSeg.orientationIndex(h._upwardSeg);return b!==0||(b=-1*h._upwardSeg.orientationIndex(this._upwardSeg))!=0?b:this._upwardSeg.compareTo(h._upwardSeg)},no.prototype.compareX=function(l,h){var b=l.p0.compareTo(h.p0);return b!==0?b:l.p1.compareTo(h.p1)},no.prototype.toString=function(){return this._upwardSeg.toString()},no.prototype.interfaces_=function(){return[U]},no.prototype.getClass=function(){return no};var Ei=function(l,h,b){this.p0=l||null,this.p1=h||null,this.p2=b||null};Ei.prototype.area=function(){return Ei.area(this.p0,this.p1,this.p2)},Ei.prototype.signedArea=function(){return Ei.signedArea(this.p0,this.p1,this.p2)},Ei.prototype.interpolateZ=function(l){if(l===null)throw new S("Supplied point is null.");return Ei.interpolateZ(l,this.p0,this.p1,this.p2)},Ei.prototype.longestSideLength=function(){return Ei.longestSideLength(this.p0,this.p1,this.p2)},Ei.prototype.isAcute=function(){return Ei.isAcute(this.p0,this.p1,this.p2)},Ei.prototype.circumcentre=function(){return Ei.circumcentre(this.p0,this.p1,this.p2)},Ei.prototype.area3D=function(){return Ei.area3D(this.p0,this.p1,this.p2)},Ei.prototype.centroid=function(){return Ei.centroid(this.p0,this.p1,this.p2)},Ei.prototype.inCentre=function(){return Ei.inCentre(this.p0,this.p1,this.p2)},Ei.prototype.interfaces_=function(){return[]},Ei.prototype.getClass=function(){return Ei},Ei.area=function(l,h,b){return Math.abs(((b.x-l.x)*(h.y-l.y)-(h.x-l.x)*(b.y-l.y))/2)},Ei.signedArea=function(l,h,b){return((b.x-l.x)*(h.y-l.y)-(h.x-l.x)*(b.y-l.y))/2},Ei.det=function(l,h,b,E){return l*E-h*b},Ei.interpolateZ=function(l,h,b,E){var I=h.x,J=h.y,at=b.x-I,yt=E.x-I,St=b.y-J,Bt=E.y-J,Yt=at*Bt-yt*St,ee=l.x-I,xe=l.y-J,Me=(Bt*ee-yt*xe)/Yt,Be=(-St*ee+at*xe)/Yt;return h.z+Me*(b.z-h.z)+Be*(E.z-h.z)},Ei.longestSideLength=function(l,h,b){var E=l.distance(h),I=h.distance(b),J=b.distance(l),at=E;return I>at&&(at=I),J>at&&(at=J),at},Ei.isAcute=function(l,h,b){return!!di.isAcute(l,h,b)&&!!di.isAcute(h,b,l)&&!!di.isAcute(b,l,h)},Ei.circumcentre=function(l,h,b){var E=b.x,I=b.y,J=l.x-E,at=l.y-I,yt=h.x-E,St=h.y-I,Bt=2*Ei.det(J,at,yt,St),Yt=Ei.det(at,J*J+at*at,St,yt*yt+St*St),ee=Ei.det(J,J*J+at*at,yt,yt*yt+St*St);return new G(E-Yt/Bt,I+ee/Bt)},Ei.perpendicularBisector=function(l,h){var b=h.x-l.x,E=h.y-l.y,I=new mt(l.x+b/2,l.y+E/2,1),J=new mt(l.x-E+b/2,l.y+b+E/2,1);return new mt(I,J)},Ei.angleBisector=function(l,h,b){var E=h.distance(l),I=E/(E+h.distance(b)),J=b.x-l.x,at=b.y-l.y;return new G(l.x+I*J,l.y+I*at)},Ei.area3D=function(l,h,b){var E=h.x-l.x,I=h.y-l.y,J=h.z-l.z,at=b.x-l.x,yt=b.y-l.y,St=b.z-l.z,Bt=I*St-J*yt,Yt=J*at-E*St,ee=E*yt-I*at,xe=Bt*Bt+Yt*Yt+ee*ee,Me=Math.sqrt(xe)/2;return Me},Ei.centroid=function(l,h,b){var E=(l.x+h.x+b.x)/3,I=(l.y+h.y+b.y)/3;return new G(E,I)},Ei.inCentre=function(l,h,b){var E=h.distance(b),I=l.distance(b),J=l.distance(h),at=E+I+J,yt=(E*l.x+I*h.x+J*b.x)/at,St=(E*l.y+I*h.y+J*b.y)/at;return new G(yt,St)};var An=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new $t;var l=arguments[0],h=arguments[1],b=arguments[2];this._inputGeom=l,this._distance=h,this._curveBuilder=b};An.prototype.addPoint=function(l){if(this._distance<=0)return null;var h=l.getCoordinates(),b=this._curveBuilder.getLineCurve(h,this._distance);this.addCurve(b,N.EXTERIOR,N.INTERIOR)},An.prototype.addPolygon=function(l){var h=this._distance,b=oe.LEFT;this._distance<0&&(h=-this._distance,b=oe.RIGHT);var E=l.getExteriorRing(),I=ue.removeRepeatedPoints(E.getCoordinates());if(this._distance<0&&this.isErodedCompletely(E,this._distance)||this._distance<=0&&I.length<3)return null;this.addPolygonRing(I,h,b,N.EXTERIOR,N.INTERIOR);for(var J=0;J<l.getNumInteriorRing();J++){var at=l.getInteriorRingN(J),yt=ue.removeRepeatedPoints(at.getCoordinates());this._distance>0&&this.isErodedCompletely(at,-this._distance)||this.addPolygonRing(yt,h,oe.opposite(b),N.INTERIOR,N.EXTERIOR)}},An.prototype.isTriangleErodedCompletely=function(l,h){var b=new Ei(l[0],l[1],l[2]),E=b.inCentre();return Et.distancePointLine(E,b.p0,b.p1)<Math.abs(h)},An.prototype.addLineString=function(l){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var h=ue.removeRepeatedPoints(l.getCoordinates()),b=this._curveBuilder.getLineCurve(h,this._distance);this.addCurve(b,N.EXTERIOR,N.INTERIOR)},An.prototype.addCurve=function(l,h,b){if(l===null||l.length<2)return null;var E=new Cr(l,new fi(0,N.BOUNDARY,h,b));this._curveList.add(E)},An.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},An.prototype.addPolygonRing=function(l,h,b,E,I){if(h===0&&l.length<Qt.MINIMUM_VALID_SIZE)return null;var J=E,at=I;l.length>=Qt.MINIMUM_VALID_SIZE&&Et.isCCW(l)&&(J=I,at=E,b=oe.opposite(b));var yt=this._curveBuilder.getRingCurve(l,b,h);this.addCurve(yt,J,at)},An.prototype.add=function(l){if(l.isEmpty())return null;l instanceof Ht?this.addPolygon(l):l instanceof oi?this.addLineString(l):l instanceof Mi?this.addPoint(l):l instanceof re?this.addCollection(l):l instanceof Ye?this.addCollection(l):l instanceof he?this.addCollection(l):l instanceof fe&&this.addCollection(l)},An.prototype.isErodedCompletely=function(l,h){var b=l.getCoordinates();if(b.length<4)return h<0;if(b.length===4)return this.isTriangleErodedCompletely(b,h);var E=l.getEnvelopeInternal(),I=Math.min(E.getHeight(),E.getWidth());return h<0&&2*Math.abs(h)>I},An.prototype.addCollection=function(l){for(var h=0;h<l.getNumGeometries();h++){var b=l.getGeometryN(h);this.add(b)}},An.prototype.interfaces_=function(){return[]},An.prototype.getClass=function(){return An};var Do=function(){};Do.prototype.locate=function(l){},Do.prototype.interfaces_=function(){return[]},Do.prototype.getClass=function(){return Do};var xs=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var l=arguments[0];this._parent=l,this._atStart=!0,this._index=0,this._max=l.getNumGeometries()};xs.prototype.next=function(){if(this._atStart)return this._atStart=!1,xs.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new i;var l=this._parent.getGeometryN(this._index++);return l instanceof fe?(this._subcollectionIterator=new xs(l),this._subcollectionIterator.next()):l},xs.prototype.remove=function(){throw new Error(this.getClass().getName())},xs.prototype.hasNext=function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},xs.prototype.interfaces_=function(){return[ke]},xs.prototype.getClass=function(){return xs},xs.isAtomic=function(l){return!(l instanceof fe)};var In=function(){this._geom=null;var l=arguments[0];this._geom=l};In.prototype.locate=function(l){return In.locate(l,this._geom)},In.prototype.interfaces_=function(){return[Do]},In.prototype.getClass=function(){return In},In.isPointInRing=function(l,h){return!!h.getEnvelopeInternal().intersects(l)&&Et.isPointInRing(l,h.getCoordinates())},In.containsPointInPolygon=function(l,h){if(h.isEmpty())return!1;var b=h.getExteriorRing();if(!In.isPointInRing(l,b))return!1;for(var E=0;E<h.getNumInteriorRing();E++){var I=h.getInteriorRingN(E);if(In.isPointInRing(l,I))return!1}return!0},In.containsPoint=function(l,h){if(h instanceof Ht)return In.containsPointInPolygon(l,h);if(h instanceof fe)for(var b=new xs(h);b.hasNext();){var E=b.next();if(E!==h&&In.containsPoint(l,E))return!0}return!1},In.locate=function(l,h){return h.isEmpty()?N.EXTERIOR:In.containsPoint(l,h)?N.INTERIOR:N.EXTERIOR};var dn=function(){this._edgeMap=new d,this._edgeList=null,this._ptInAreaLocation=[N.NONE,N.NONE]};dn.prototype.getNextCW=function(l){this.getEdges();var h=this._edgeList.indexOf(l),b=h-1;return h===0&&(b=this._edgeList.size()-1),this._edgeList.get(b)},dn.prototype.propagateSideLabels=function(l){for(var h=N.NONE,b=this.iterator();b.hasNext();){var E=b.next().getLabel();E.isArea(l)&&E.getLocation(l,oe.LEFT)!==N.NONE&&(h=E.getLocation(l,oe.LEFT))}if(h===N.NONE)return null;for(var I=h,J=this.iterator();J.hasNext();){var at=J.next(),yt=at.getLabel();if(yt.getLocation(l,oe.ON)===N.NONE&&yt.setLocation(l,oe.ON,I),yt.isArea(l)){var St=yt.getLocation(l,oe.LEFT),Bt=yt.getLocation(l,oe.RIGHT);if(Bt!==N.NONE){if(Bt!==I)throw new vr("side location conflict",at.getCoordinate());St===N.NONE&&Q.shouldNeverReachHere("found single null side (at "+at.getCoordinate()+")"),I=St}else Q.isTrue(yt.getLocation(l,oe.LEFT)===N.NONE,"found single null side"),yt.setLocation(l,oe.RIGHT,I),yt.setLocation(l,oe.LEFT,I)}}},dn.prototype.getCoordinate=function(){var l=this.iterator();return l.hasNext()?l.next().getCoordinate():null},dn.prototype.print=function(l){rt.out.println("EdgeEndStar:   "+this.getCoordinate());for(var h=this.iterator();h.hasNext();)h.next().print(l)},dn.prototype.isAreaLabelsConsistent=function(l){return this.computeEdgeEndLabels(l.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},dn.prototype.checkAreaLabelsConsistent=function(l){var h=this.getEdges();if(h.size()<=0)return!0;var b=h.size()-1,E=h.get(b).getLabel().getLocation(l,oe.LEFT);Q.isTrue(E!==N.NONE,"Found unlabelled area edge");for(var I=E,J=this.iterator();J.hasNext();){var at=J.next().getLabel();Q.isTrue(at.isArea(l),"Found non-area edge");var yt=at.getLocation(l,oe.LEFT),St=at.getLocation(l,oe.RIGHT);if(yt===St||St!==I)return!1;I=yt}return!0},dn.prototype.findIndex=function(l){this.iterator();for(var h=0;h<this._edgeList.size();h++)if(this._edgeList.get(h)===l)return h;return-1},dn.prototype.iterator=function(){return this.getEdges().iterator()},dn.prototype.getEdges=function(){return this._edgeList===null&&(this._edgeList=new $t(this._edgeMap.values())),this._edgeList},dn.prototype.getLocation=function(l,h,b){return this._ptInAreaLocation[l]===N.NONE&&(this._ptInAreaLocation[l]=In.locate(h,b[l].getGeometry())),this._ptInAreaLocation[l]},dn.prototype.toString=function(){var l=new T;l.append("EdgeEndStar:   "+this.getCoordinate()),l.append(`
`);for(var h=this.iterator();h.hasNext();){var b=h.next();l.append(b),l.append(`
`)}return l.toString()},dn.prototype.computeEdgeEndLabels=function(l){for(var h=this.iterator();h.hasNext();)h.next().computeLabel(l)},dn.prototype.computeLabelling=function(l){this.computeEdgeEndLabels(l[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var h=[!1,!1],b=this.iterator();b.hasNext();)for(var E=b.next().getLabel(),I=0;I<2;I++)E.isLine(I)&&E.getLocation(I)===N.BOUNDARY&&(h[I]=!0);for(var J=this.iterator();J.hasNext();)for(var at=J.next(),yt=at.getLabel(),St=0;St<2;St++)if(yt.isAnyNull(St)){var Bt=N.NONE;if(h[St])Bt=N.EXTERIOR;else{var Yt=at.getCoordinate();Bt=this.getLocation(St,Yt,l)}yt.setAllLocationsIfNull(St,Bt)}},dn.prototype.getDegree=function(){return this._edgeMap.size()},dn.prototype.insertEdgeEnd=function(l,h){this._edgeMap.put(l,h),this._edgeList=null},dn.prototype.interfaces_=function(){return[]},dn.prototype.getClass=function(){return dn};var Es=function(l){function h(){l.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return l&&(h.__proto__=l),h.prototype=Object.create(l&&l.prototype),h.prototype.constructor=h,h.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var b=null,E=null,I=this._SCANNING_FOR_INCOMING,J=0;J<this._resultAreaEdgeList.size();J++){var at=this._resultAreaEdgeList.get(J),yt=at.getSym();if(at.getLabel().isArea())switch(b===null&&at.isInResult()&&(b=at),I){case this._SCANNING_FOR_INCOMING:if(!yt.isInResult())continue;E=yt,I=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!at.isInResult())continue;E.setNext(at),I=this._SCANNING_FOR_INCOMING}}if(I===this._LINKING_TO_OUTGOING){if(b===null)throw new vr("no outgoing dirEdge found",this.getCoordinate());Q.isTrue(b.isInResult(),"unable to link last incoming dirEdge"),E.setNext(b)}},h.prototype.insert=function(b){var E=b;this.insertEdgeEnd(E,E)},h.prototype.getRightmostEdge=function(){var b=this.getEdges(),E=b.size();if(E<1)return null;var I=b.get(0);if(E===1)return I;var J=b.get(E-1),at=I.getQuadrant(),yt=J.getQuadrant();return M.isNorthern(at)&&M.isNorthern(yt)?I:M.isNorthern(at)||M.isNorthern(yt)?I.getDy()!==0?I:J.getDy()!==0?J:(Q.shouldNeverReachHere("found two horizontal edges incident on node"),null):J},h.prototype.print=function(b){rt.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var E=this.iterator();E.hasNext();){var I=E.next();b.print("out "),I.print(b),b.println(),b.print("in "),I.getSym().print(b),b.println()}},h.prototype.getResultAreaEdges=function(){if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new $t;for(var b=this.iterator();b.hasNext();){var E=b.next();(E.isInResult()||E.getSym().isInResult())&&this._resultAreaEdgeList.add(E)}return this._resultAreaEdgeList},h.prototype.updateLabelling=function(b){for(var E=this.iterator();E.hasNext();){var I=E.next().getLabel();I.setAllLocationsIfNull(0,b.getLocation(0)),I.setAllLocationsIfNull(1,b.getLocation(1))}},h.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var b=null,E=null,I=this._edgeList.size()-1;I>=0;I--){var J=this._edgeList.get(I),at=J.getSym();E===null&&(E=at),b!==null&&at.setNext(b),b=J}E.setNext(b)},h.prototype.computeDepths=function(){if(arguments.length===1){var b=arguments[0],E=this.findIndex(b),I=b.getDepth(oe.LEFT),J=b.getDepth(oe.RIGHT),at=this.computeDepths(E+1,this._edgeList.size(),I);if(this.computeDepths(0,E,at)!==J)throw new vr("depth mismatch at "+b.getCoordinate())}else if(arguments.length===3){for(var yt=arguments[0],St=arguments[1],Bt=arguments[2],Yt=yt;Yt<St;Yt++){var ee=this._edgeList.get(Yt);ee.setEdgeDepths(oe.RIGHT,Bt),Bt=ee.getDepth(oe.LEFT)}return Bt}},h.prototype.mergeSymLabels=function(){for(var b=this.iterator();b.hasNext();){var E=b.next();E.getLabel().merge(E.getSym().getLabel())}},h.prototype.linkMinimalDirectedEdges=function(b){for(var E=null,I=null,J=this._SCANNING_FOR_INCOMING,at=this._resultAreaEdgeList.size()-1;at>=0;at--){var yt=this._resultAreaEdgeList.get(at),St=yt.getSym();switch(E===null&&yt.getEdgeRing()===b&&(E=yt),J){case this._SCANNING_FOR_INCOMING:if(St.getEdgeRing()!==b)continue;I=St,J=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(yt.getEdgeRing()!==b)continue;I.setNextMin(yt),J=this._SCANNING_FOR_INCOMING}}J===this._LINKING_TO_OUTGOING&&(Q.isTrue(E!==null,"found null for first outgoing dirEdge"),Q.isTrue(E.getEdgeRing()===b,"unable to link last incoming dirEdge"),I.setNextMin(E))},h.prototype.getOutgoingDegree=function(){if(arguments.length===0){for(var b=0,E=this.iterator();E.hasNext();)E.next().isInResult()&&b++;return b}if(arguments.length===1){for(var I=arguments[0],J=0,at=this.iterator();at.hasNext();)at.next().getEdgeRing()===I&&J++;return J}},h.prototype.getLabel=function(){return this._label},h.prototype.findCoveredLineEdges=function(){for(var b=N.NONE,E=this.iterator();E.hasNext();){var I=E.next(),J=I.getSym();if(!I.isLineEdge()){if(I.isInResult()){b=N.INTERIOR;break}if(J.isInResult()){b=N.EXTERIOR;break}}}if(b===N.NONE)return null;for(var at=b,yt=this.iterator();yt.hasNext();){var St=yt.next(),Bt=St.getSym();St.isLineEdge()?St.getEdge().setCovered(at===N.INTERIOR):(St.isInResult()&&(at=N.EXTERIOR),Bt.isInResult()&&(at=N.INTERIOR))}},h.prototype.computeLabelling=function(b){l.prototype.computeLabelling.call(this,b),this._label=new fi(N.NONE);for(var E=this.iterator();E.hasNext();)for(var I=E.next().getEdge().getLabel(),J=0;J<2;J++){var at=I.getLocation(J);at!==N.INTERIOR&&at!==N.BOUNDARY||this._label.setLocation(J,N.INTERIOR)}},h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},h}(dn),bo=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),h.prototype=Object.create(l&&l.prototype),h.prototype.constructor=h,h.prototype.createNode=function(b){return new qr(b,new Es)},h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},h}(ht),js=function l(){this._pts=null,this._orientation=null;var h=arguments[0];this._pts=h,this._orientation=l.orientation(h)};js.prototype.compareTo=function(l){var h=l;return js.compareOriented(this._pts,this._orientation,h._pts,h._orientation)},js.prototype.interfaces_=function(){return[U]},js.prototype.getClass=function(){return js},js.orientation=function(l){return ue.increasingDirection(l)===1},js.compareOriented=function(l,h,b,E){for(var I=h?1:-1,J=E?1:-1,at=h?l.length:-1,yt=E?b.length:-1,St=h?0:l.length-1,Bt=E?0:b.length-1;;){var Yt=l[St].compareTo(b[Bt]);if(Yt!==0)return Yt;var ee=(St+=I)===at,xe=(Bt+=J)===yt;if(ee&&!xe)return-1;if(!ee&&xe)return 1;if(ee&&xe)return 0}};var Xr=function(){this._edges=new $t,this._ocaMap=new d};Xr.prototype.print=function(l){l.print("MULTILINESTRING ( ");for(var h=0;h<this._edges.size();h++){var b=this._edges.get(h);h>0&&l.print(","),l.print("(");for(var E=b.getCoordinates(),I=0;I<E.length;I++)I>0&&l.print(","),l.print(E[I].x+" "+E[I].y);l.println(")")}l.print(")  ")},Xr.prototype.addAll=function(l){for(var h=l.iterator();h.hasNext();)this.add(h.next())},Xr.prototype.findEdgeIndex=function(l){for(var h=0;h<this._edges.size();h++)if(this._edges.get(h).equals(l))return h;return-1},Xr.prototype.iterator=function(){return this._edges.iterator()},Xr.prototype.getEdges=function(){return this._edges},Xr.prototype.get=function(l){return this._edges.get(l)},Xr.prototype.findEqualEdge=function(l){var h=new js(l.getCoordinates());return this._ocaMap.get(h)},Xr.prototype.add=function(l){this._edges.add(l);var h=new js(l.getCoordinates());this._ocaMap.put(h,l)},Xr.prototype.interfaces_=function(){return[]},Xr.prototype.getClass=function(){return Xr};var so=function(){};so.prototype.processIntersections=function(l,h,b,E){},so.prototype.isDone=function(){},so.prototype.interfaces_=function(){return[]},so.prototype.getClass=function(){return so};var sn=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var l=arguments[0];this._li=l};sn.prototype.isTrivialIntersection=function(l,h,b,E){if(l===b&&this._li.getIntersectionNum()===1){if(sn.isAdjacentSegments(h,E))return!0;if(l.isClosed()){var I=l.size()-1;if(h===0&&E===I||E===0&&h===I)return!0}}return!1},sn.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},sn.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},sn.prototype.getLineIntersector=function(){return this._li},sn.prototype.hasProperIntersection=function(){return this._hasProper},sn.prototype.processIntersections=function(l,h,b,E){if(l===b&&h===E)return null;this.numTests++;var I=l.getCoordinates()[h],J=l.getCoordinates()[h+1],at=b.getCoordinates()[E],yt=b.getCoordinates()[E+1];this._li.computeIntersection(I,J,at,yt),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(l,h,b,E)||(this._hasIntersection=!0,l.addIntersections(this._li,h,0),b.addIntersections(this._li,E,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},sn.prototype.hasIntersection=function(){return this._hasIntersection},sn.prototype.isDone=function(){return!1},sn.prototype.hasInteriorIntersection=function(){return this._hasInterior},sn.prototype.interfaces_=function(){return[so]},sn.prototype.getClass=function(){return sn},sn.isAdjacentSegments=function(l,h){return Math.abs(l-h)===1};var ds=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var l=arguments[0],h=arguments[1],b=arguments[2];this.coord=new G(l),this.segmentIndex=h,this.dist=b};ds.prototype.getSegmentIndex=function(){return this.segmentIndex},ds.prototype.getCoordinate=function(){return this.coord},ds.prototype.print=function(l){l.print(this.coord),l.print(" seg # = "+this.segmentIndex),l.println(" dist = "+this.dist)},ds.prototype.compareTo=function(l){var h=l;return this.compare(h.segmentIndex,h.dist)},ds.prototype.isEndPoint=function(l){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===l},ds.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},ds.prototype.getDistance=function(){return this.dist},ds.prototype.compare=function(l,h){return this.segmentIndex<l?-1:this.segmentIndex>l?1:this.dist<h?-1:this.dist>h?1:0},ds.prototype.interfaces_=function(){return[U]},ds.prototype.getClass=function(){return ds};var Un=function(){this._nodeMap=new d,this.edge=null;var l=arguments[0];this.edge=l};Un.prototype.print=function(l){l.println("Intersections:");for(var h=this.iterator();h.hasNext();)h.next().print(l)},Un.prototype.iterator=function(){return this._nodeMap.values().iterator()},Un.prototype.addSplitEdges=function(l){this.addEndpoints();for(var h=this.iterator(),b=h.next();h.hasNext();){var E=h.next(),I=this.createSplitEdge(b,E);l.add(I),b=E}},Un.prototype.addEndpoints=function(){var l=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[l],l,0)},Un.prototype.createSplitEdge=function(l,h){var b=h.segmentIndex-l.segmentIndex+2,E=this.edge.pts[h.segmentIndex],I=h.dist>0||!h.coord.equals2D(E);I||b--;var J=new Array(b).fill(null),at=0;J[at++]=new G(l.coord);for(var yt=l.segmentIndex+1;yt<=h.segmentIndex;yt++)J[at++]=this.edge.pts[yt];return I&&(J[at]=h.coord),new _o(J,new fi(this.edge._label))},Un.prototype.add=function(l,h,b){var E=new ds(l,h,b),I=this._nodeMap.get(E);return I!==null?I:(this._nodeMap.put(E,E),E)},Un.prototype.isIntersection=function(l){for(var h=this.iterator();h.hasNext();)if(h.next().coord.equals(l))return!0;return!1},Un.prototype.interfaces_=function(){return[]},Un.prototype.getClass=function(){return Un};var Hs=function(){};Hs.prototype.getChainStartIndices=function(l){var h=0,b=new $t;b.add(new R(h));do{var E=this.findChainEnd(l,h);b.add(new R(E)),h=E}while(h<l.length-1);return Hs.toIntArray(b)},Hs.prototype.findChainEnd=function(l,h){for(var b=M.quadrant(l[h],l[h+1]),E=h+1;E<l.length&&M.quadrant(l[E-1],l[E])===b;)E++;return E-1},Hs.prototype.interfaces_=function(){return[]},Hs.prototype.getClass=function(){return Hs},Hs.toIntArray=function(l){for(var h=new Array(l.size()).fill(null),b=0;b<h.length;b++)h[b]=l.get(b).intValue();return h};var os=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new wt,this.env2=new wt;var l=arguments[0];this.e=l,this.pts=l.getCoordinates();var h=new Hs;this.startIndex=h.getChainStartIndices(this.pts)};os.prototype.getCoordinates=function(){return this.pts},os.prototype.getMaxX=function(l){var h=this.pts[this.startIndex[l]].x,b=this.pts[this.startIndex[l+1]].x;return h>b?h:b},os.prototype.getMinX=function(l){var h=this.pts[this.startIndex[l]].x,b=this.pts[this.startIndex[l+1]].x;return h<b?h:b},os.prototype.computeIntersectsForChain=function(){if(arguments.length===4){var l=arguments[0],h=arguments[1],b=arguments[2],E=arguments[3];this.computeIntersectsForChain(this.startIndex[l],this.startIndex[l+1],h,h.startIndex[b],h.startIndex[b+1],E)}else if(arguments.length===6){var I=arguments[0],J=arguments[1],at=arguments[2],yt=arguments[3],St=arguments[4],Bt=arguments[5],Yt=this.pts[I],ee=this.pts[J],xe=at.pts[yt],Me=at.pts[St];if(J-I==1&&St-yt==1)return Bt.addIntersections(this.e,I,at.e,yt),null;if(this.env1.init(Yt,ee),this.env2.init(xe,Me),!this.env1.intersects(this.env2))return null;var Be=Math.trunc((I+J)/2),Ve=Math.trunc((yt+St)/2);I<Be&&(yt<Ve&&this.computeIntersectsForChain(I,Be,at,yt,Ve,Bt),Ve<St&&this.computeIntersectsForChain(I,Be,at,Ve,St,Bt)),Be<J&&(yt<Ve&&this.computeIntersectsForChain(Be,J,at,yt,Ve,Bt),Ve<St&&this.computeIntersectsForChain(Be,J,at,Ve,St,Bt))}},os.prototype.getStartIndexes=function(){return this.startIndex},os.prototype.computeIntersects=function(l,h){for(var b=0;b<this.startIndex.length-1;b++)for(var E=0;E<l.startIndex.length-1;E++)this.computeIntersectsForChain(b,l,E,h)},os.prototype.interfaces_=function(){return[]},os.prototype.getClass=function(){return os};var on=function l(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var h=0;h<2;h++)for(var b=0;b<3;b++)this._depth[h][b]=l.NULL_VALUE},Gs={NULL_VALUE:{configurable:!0}};on.prototype.getDepth=function(l,h){return this._depth[l][h]},on.prototype.setDepth=function(l,h,b){this._depth[l][h]=b},on.prototype.isNull=function(){if(arguments.length===0){for(var l=0;l<2;l++)for(var h=0;h<3;h++)if(this._depth[l][h]!==on.NULL_VALUE)return!1;return!0}if(arguments.length===1){var b=arguments[0];return this._depth[b][1]===on.NULL_VALUE}if(arguments.length===2){var E=arguments[0],I=arguments[1];return this._depth[E][I]===on.NULL_VALUE}},on.prototype.normalize=function(){for(var l=0;l<2;l++)if(!this.isNull(l)){var h=this._depth[l][1];this._depth[l][2]<h&&(h=this._depth[l][2]),h<0&&(h=0);for(var b=1;b<3;b++){var E=0;this._depth[l][b]>h&&(E=1),this._depth[l][b]=E}}},on.prototype.getDelta=function(l){return this._depth[l][oe.RIGHT]-this._depth[l][oe.LEFT]},on.prototype.getLocation=function(l,h){return this._depth[l][h]<=0?N.EXTERIOR:N.INTERIOR},on.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},on.prototype.add=function(){if(arguments.length===1)for(var l=arguments[0],h=0;h<2;h++)for(var b=1;b<3;b++){var E=l.getLocation(h,b);E!==N.EXTERIOR&&E!==N.INTERIOR||(this.isNull(h,b)?this._depth[h][b]=on.depthAtLocation(E):this._depth[h][b]+=on.depthAtLocation(E))}else if(arguments.length===3){var I=arguments[0],J=arguments[1];arguments[2]===N.INTERIOR&&this._depth[I][J]++}},on.prototype.interfaces_=function(){return[]},on.prototype.getClass=function(){return on},on.depthAtLocation=function(l){return l===N.EXTERIOR?0:l===N.INTERIOR?1:on.NULL_VALUE},Gs.NULL_VALUE.get=function(){return-1},Object.defineProperties(on,Gs);var _o=function(l){function h(){if(l.call(this),this.pts=null,this._env=null,this.eiList=new Un(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new on,this._depthDelta=0,arguments.length===1){var b=arguments[0];h.call(this,b,null)}else if(arguments.length===2){var E=arguments[0],I=arguments[1];this.pts=E,this._label=I}}return l&&(h.__proto__=l),h.prototype=Object.create(l&&l.prototype),h.prototype.constructor=h,h.prototype.getDepth=function(){return this._depth},h.prototype.getCollapsedEdge=function(){var b=new Array(2).fill(null);return b[0]=this.pts[0],b[1]=this.pts[1],new h(b,fi.toLineLabel(this._label))},h.prototype.isIsolated=function(){return this._isIsolated},h.prototype.getCoordinates=function(){return this.pts},h.prototype.setIsolated=function(b){this._isIsolated=b},h.prototype.setName=function(b){this._name=b},h.prototype.equals=function(b){if(!(b instanceof h))return!1;var E=b;if(this.pts.length!==E.pts.length)return!1;for(var I=!0,J=!0,at=this.pts.length,yt=0;yt<this.pts.length;yt++)if(this.pts[yt].equals2D(E.pts[yt])||(I=!1),this.pts[yt].equals2D(E.pts[--at])||(J=!1),!I&&!J)return!1;return!0},h.prototype.getCoordinate=function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var b=arguments[0];return this.pts[b]}},h.prototype.print=function(b){b.print("edge "+this._name+": "),b.print("LINESTRING (");for(var E=0;E<this.pts.length;E++)E>0&&b.print(","),b.print(this.pts[E].x+" "+this.pts[E].y);b.print(")  "+this._label+" "+this._depthDelta)},h.prototype.computeIM=function(b){h.updateIM(this._label,b)},h.prototype.isCollapsed=function(){return!!this._label.isArea()&&this.pts.length===3&&!!this.pts[0].equals(this.pts[2])},h.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},h.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},h.prototype.getDepthDelta=function(){return this._depthDelta},h.prototype.getNumPoints=function(){return this.pts.length},h.prototype.printReverse=function(b){b.print("edge "+this._name+": ");for(var E=this.pts.length-1;E>=0;E--)b.print(this.pts[E]+" ");b.println("")},h.prototype.getMonotoneChainEdge=function(){return this._mce===null&&(this._mce=new os(this)),this._mce},h.prototype.getEnvelope=function(){if(this._env===null){this._env=new wt;for(var b=0;b<this.pts.length;b++)this._env.expandToInclude(this.pts[b])}return this._env},h.prototype.addIntersection=function(b,E,I,J){var at=new G(b.getIntersection(J)),yt=E,St=b.getEdgeDistance(I,J),Bt=yt+1;if(Bt<this.pts.length){var Yt=this.pts[Bt];at.equals2D(Yt)&&(yt=Bt,St=0)}this.eiList.add(at,yt,St)},h.prototype.toString=function(){var b=new T;b.append("edge "+this._name+": "),b.append("LINESTRING (");for(var E=0;E<this.pts.length;E++)E>0&&b.append(","),b.append(this.pts[E].x+" "+this.pts[E].y);return b.append(")  "+this._label+" "+this._depthDelta),b.toString()},h.prototype.isPointwiseEqual=function(b){if(this.pts.length!==b.pts.length)return!1;for(var E=0;E<this.pts.length;E++)if(!this.pts[E].equals2D(b.pts[E]))return!1;return!0},h.prototype.setDepthDelta=function(b){this._depthDelta=b},h.prototype.getEdgeIntersectionList=function(){return this.eiList},h.prototype.addIntersections=function(b,E,I){for(var J=0;J<b.getIntersectionNum();J++)this.addIntersection(b,E,I,J)},h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},h.updateIM=function(){if(arguments.length!==2)return l.prototype.updateIM.apply(this,arguments);var b=arguments[0],E=arguments[1];E.setAtLeastIfValid(b.getLocation(0,oe.ON),b.getLocation(1,oe.ON),1),b.isArea()&&(E.setAtLeastIfValid(b.getLocation(0,oe.LEFT),b.getLocation(1,oe.LEFT),2),E.setAtLeastIfValid(b.getLocation(0,oe.RIGHT),b.getLocation(1,oe.RIGHT),2))},h}(je),vn=function(l){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Xr,this._bufParams=l||null};vn.prototype.setWorkingPrecisionModel=function(l){this._workingPrecisionModel=l},vn.prototype.insertUniqueEdge=function(l){var h=this._edgeList.findEqualEdge(l);if(h!==null){var b=h.getLabel(),E=l.getLabel();h.isPointwiseEqual(l)||(E=new fi(l.getLabel())).flip(),b.merge(E);var I=vn.depthDelta(E),J=h.getDepthDelta()+I;h.setDepthDelta(J)}else this._edgeList.add(l),l.setDepthDelta(vn.depthDelta(l.getLabel()))},vn.prototype.buildSubgraphs=function(l,h){for(var b=new $t,E=l.iterator();E.hasNext();){var I=E.next(),J=I.getRightmostCoordinate(),at=new ro(b).getDepth(J);I.computeDepth(at),I.findResultEdges(),b.add(I),h.add(I.getDirectedEdges(),I.getNodes())}},vn.prototype.createSubgraphs=function(l){for(var h=new $t,b=l.getNodes().iterator();b.hasNext();){var E=b.next();if(!E.isVisited()){var I=new mr;I.create(E),h.add(I)}}return Ce.sort(h,Ce.reverseOrder()),h},vn.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},vn.prototype.getNoder=function(l){if(this._workingNoder!==null)return this._workingNoder;var h=new Za,b=new lt;return b.setPrecisionModel(l),h.setSegmentIntersector(new sn(b)),h},vn.prototype.buffer=function(l,h){var b=this._workingPrecisionModel;b===null&&(b=l.getPrecisionModel()),this._geomFact=l.getFactory();var E=new Sn(b,this._bufParams),I=new An(l,h,E).getCurves();if(I.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(I,b),this._graph=new xt(new bo),this._graph.addEdges(this._edgeList.getEdges());var J=this.createSubgraphs(this._graph),at=new Lt(this._geomFact);this.buildSubgraphs(J,at);var yt=at.getPolygons();return yt.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(yt)},vn.prototype.computeNodedEdges=function(l,h){var b=this.getNoder(h);b.computeNodes(l);for(var E=b.getNodedSubstrings().iterator();E.hasNext();){var I=E.next(),J=I.getCoordinates();if(J.length!==2||!J[0].equals2D(J[1])){var at=I.getData(),yt=new _o(I.getCoordinates(),new fi(at));this.insertUniqueEdge(yt)}}},vn.prototype.setNoder=function(l){this._workingNoder=l},vn.prototype.interfaces_=function(){return[]},vn.prototype.getClass=function(){return vn},vn.depthDelta=function(l){var h=l.getLocation(0,oe.LEFT),b=l.getLocation(0,oe.RIGHT);return h===N.INTERIOR&&b===N.EXTERIOR?1:h===N.EXTERIOR&&b===N.INTERIOR?-1:0},vn.convertSegStrings=function(l){for(var h=new Se,b=new $t;l.hasNext();){var E=l.next(),I=h.createLineString(E.getCoordinates());b.add(I)}return h.buildGeometry(b)};var Cs=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var l=arguments[0],h=arguments[1];this._noder=l,this._scaleFactor=h,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(arguments.length===4){var b=arguments[0],E=arguments[1],I=arguments[2],J=arguments[3];this._noder=b,this._scaleFactor=E,this._offsetX=I,this._offsetY=J,this._isScaled=!this.isIntegerPrecision()}};Cs.prototype.rescale=function(){if(w(arguments[0],ce))for(var l=arguments[0].iterator();l.hasNext();){var h=l.next();this.rescale(h.getCoordinates())}else if(arguments[0]instanceof Array){for(var b=arguments[0],E=0;E<b.length;E++)b[E].x=b[E].x/this._scaleFactor+this._offsetX,b[E].y=b[E].y/this._scaleFactor+this._offsetY;b.length===2&&b[0].equals2D(b[1])&&rt.out.println(b)}},Cs.prototype.scale=function(){if(w(arguments[0],ce)){for(var l=arguments[0],h=new $t,b=l.iterator();b.hasNext();){var E=b.next();h.add(new Cr(this.scale(E.getCoordinates()),E.getData()))}return h}if(arguments[0]instanceof Array){for(var I=arguments[0],J=new Array(I.length).fill(null),at=0;at<I.length;at++)J[at]=new G(Math.round((I[at].x-this._offsetX)*this._scaleFactor),Math.round((I[at].y-this._offsetY)*this._scaleFactor),I[at].z);return ue.removeRepeatedPoints(J)}},Cs.prototype.isIntegerPrecision=function(){return this._scaleFactor===1},Cs.prototype.getNodedSubstrings=function(){var l=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(l),l},Cs.prototype.computeNodes=function(l){var h=l;this._isScaled&&(h=this.scale(l)),this._noder.computeNodes(h)},Cs.prototype.interfaces_=function(){return[zs]},Cs.prototype.getClass=function(){return Cs};var ps=function(){this._li=new lt,this._segStrings=null;var l=arguments[0];this._segStrings=l},Ps={fact:{configurable:!0}};ps.prototype.checkEndPtVertexIntersections=function(){if(arguments.length===0)for(var l=this._segStrings.iterator();l.hasNext();){var h=l.next().getCoordinates();this.checkEndPtVertexIntersections(h[0],this._segStrings),this.checkEndPtVertexIntersections(h[h.length-1],this._segStrings)}else if(arguments.length===2){for(var b=arguments[0],E=arguments[1].iterator();E.hasNext();)for(var I=E.next().getCoordinates(),J=1;J<I.length-1;J++)if(I[J].equals(b))throw new gt("found endpt/interior pt intersection at index "+J+" :pt "+b)}},ps.prototype.checkInteriorIntersections=function(){if(arguments.length===0)for(var l=this._segStrings.iterator();l.hasNext();)for(var h=l.next(),b=this._segStrings.iterator();b.hasNext();){var E=b.next();this.checkInteriorIntersections(h,E)}else if(arguments.length===2)for(var I=arguments[0],J=arguments[1],at=I.getCoordinates(),yt=J.getCoordinates(),St=0;St<at.length-1;St++)for(var Bt=0;Bt<yt.length-1;Bt++)this.checkInteriorIntersections(I,St,J,Bt);else if(arguments.length===4){var Yt=arguments[0],ee=arguments[1],xe=arguments[2],Me=arguments[3];if(Yt===xe&&ee===Me)return null;var Be=Yt.getCoordinates()[ee],Ve=Yt.getCoordinates()[ee+1],pr=xe.getCoordinates()[Me],Hr=xe.getCoordinates()[Me+1];if(this._li.computeIntersection(Be,Ve,pr,Hr),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,Be,Ve)||this.hasInteriorIntersection(this._li,pr,Hr)))throw new gt("found non-noded intersection at "+Be+"-"+Ve+" and "+pr+"-"+Hr)}},ps.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},ps.prototype.checkCollapses=function(){if(arguments.length===0)for(var l=this._segStrings.iterator();l.hasNext();){var h=l.next();this.checkCollapses(h)}else if(arguments.length===1)for(var b=arguments[0].getCoordinates(),E=0;E<b.length-2;E++)this.checkCollapse(b[E],b[E+1],b[E+2])},ps.prototype.hasInteriorIntersection=function(l,h,b){for(var E=0;E<l.getIntersectionNum();E++){var I=l.getIntersection(E);if(!I.equals(h)&&!I.equals(b))return!0}return!1},ps.prototype.checkCollapse=function(l,h,b){if(l.equals(b))throw new gt("found non-noded collapse at "+ps.fact.createLineString([l,h,b]))},ps.prototype.interfaces_=function(){return[]},ps.prototype.getClass=function(){return ps},Ps.fact.get=function(){return new Se},Object.defineProperties(ps,Ps);var kn=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var l=arguments[0],h=arguments[1],b=arguments[2];if(this._originalPt=l,this._pt=l,this._scaleFactor=h,this._li=b,h<=0)throw new S("Scale factor must be non-zero");h!==1&&(this._pt=new G(this.scale(l.x),this.scale(l.y)),this._p0Scaled=new G,this._p1Scaled=new G),this.initCorners(this._pt)},wo={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};kn.prototype.intersectsScaled=function(l,h){var b=Math.min(l.x,h.x),E=Math.max(l.x,h.x),I=Math.min(l.y,h.y),J=Math.max(l.y,h.y),at=this._maxx<b||this._minx>E||this._maxy<I||this._miny>J;if(at)return!1;var yt=this.intersectsToleranceSquare(l,h);return Q.isTrue(!(at&&yt),"Found bad envelope test"),yt},kn.prototype.initCorners=function(l){this._minx=l.x-.5,this._maxx=l.x+.5,this._miny=l.y-.5,this._maxy=l.y+.5,this._corner[0]=new G(this._maxx,this._maxy),this._corner[1]=new G(this._minx,this._maxy),this._corner[2]=new G(this._minx,this._miny),this._corner[3]=new G(this._maxx,this._miny)},kn.prototype.intersects=function(l,h){return this._scaleFactor===1?this.intersectsScaled(l,h):(this.copyScaled(l,this._p0Scaled),this.copyScaled(h,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},kn.prototype.scale=function(l){return Math.round(l*this._scaleFactor)},kn.prototype.getCoordinate=function(){return this._originalPt},kn.prototype.copyScaled=function(l,h){h.x=this.scale(l.x),h.y=this.scale(l.y)},kn.prototype.getSafeEnvelope=function(){if(this._safeEnv===null){var l=kn.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new wt(this._originalPt.x-l,this._originalPt.x+l,this._originalPt.y-l,this._originalPt.y+l)}return this._safeEnv},kn.prototype.intersectsPixelClosure=function(l,h){return this._li.computeIntersection(l,h,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(l,h,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(l,h,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(l,h,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))},kn.prototype.intersectsToleranceSquare=function(l,h){var b=!1,E=!1;return this._li.computeIntersection(l,h,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(l,h,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(b=!0),this._li.computeIntersection(l,h,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(E=!0),this._li.computeIntersection(l,h,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!b||!E)||!!l.equals(this._pt)||!!h.equals(this._pt))))},kn.prototype.addSnappedNode=function(l,h){var b=l.getCoordinate(h),E=l.getCoordinate(h+1);return!!this.intersects(b,E)&&(l.addIntersection(this.getCoordinate(),h),!0)},kn.prototype.interfaces_=function(){return[]},kn.prototype.getClass=function(){return kn},wo.SAFE_ENV_EXPANSION_FACTOR.get=function(){return .75},Object.defineProperties(kn,wo);var Zo=function(){this.tempEnv1=new wt,this.selectedSegment=new Pe};Zo.prototype.select=function(){if(arguments.length!==1){if(arguments.length===2){var l=arguments[0],h=arguments[1];l.getLineSegment(h,this.selectedSegment),this.select(this.selectedSegment)}}},Zo.prototype.interfaces_=function(){return[]},Zo.prototype.getClass=function(){return Zo};var Kn=function(){this._index=null;var l=arguments[0];this._index=l},Ko={HotPixelSnapAction:{configurable:!0}};Kn.prototype.snap=function(){if(arguments.length===1){var l=arguments[0];return this.snap(l,null,-1)}if(arguments.length===3){var h=arguments[0],b=arguments[1],E=arguments[2],I=h.getSafeEnvelope(),J=new Ja(h,b,E);return this._index.query(I,{interfaces_:function(){return[Vt]},visitItem:function(at){at.select(I,J)}}),J.isNodeAdded()}},Kn.prototype.interfaces_=function(){return[]},Kn.prototype.getClass=function(){return Kn},Ko.HotPixelSnapAction.get=function(){return Ja},Object.defineProperties(Kn,Ko);var Ja=function(l){function h(){l.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var b=arguments[0],E=arguments[1],I=arguments[2];this._hotPixel=b,this._parentEdge=E,this._hotPixelVertexIndex=I}return l&&(h.__proto__=l),h.prototype=Object.create(l&&l.prototype),h.prototype.constructor=h,h.prototype.isNodeAdded=function(){return this._isNodeAdded},h.prototype.select=function(){if(arguments.length!==2)return l.prototype.select.apply(this,arguments);var b=arguments[0],E=arguments[1],I=b.getContext();if(this._parentEdge!==null&&I===this._parentEdge&&E===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(I,E)},h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},h}(Zo),Us=function(){this._li=null,this._interiorIntersections=null;var l=arguments[0];this._li=l,this._interiorIntersections=new $t};Us.prototype.processIntersections=function(l,h,b,E){if(l===b&&h===E)return null;var I=l.getCoordinates()[h],J=l.getCoordinates()[h+1],at=b.getCoordinates()[E],yt=b.getCoordinates()[E+1];if(this._li.computeIntersection(I,J,at,yt),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var St=0;St<this._li.getIntersectionNum();St++)this._interiorIntersections.add(this._li.getIntersection(St));l.addIntersections(this._li,h,0),b.addIntersections(this._li,E,1)}},Us.prototype.isDone=function(){return!1},Us.prototype.getInteriorIntersections=function(){return this._interiorIntersections},Us.prototype.interfaces_=function(){return[so]},Us.prototype.getClass=function(){return Us};var Jn=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var l=arguments[0];this._pm=l,this._li=new lt,this._li.setPrecisionModel(l),this._scaleFactor=l.getScale()};Jn.prototype.checkCorrectness=function(l){var h=Cr.getNodedSubstrings(l),b=new ps(h);try{b.checkValid()}catch(E){if(!(E instanceof W))throw E;E.printStackTrace()}},Jn.prototype.getNodedSubstrings=function(){return Cr.getNodedSubstrings(this._nodedSegStrings)},Jn.prototype.snapRound=function(l,h){var b=this.findInteriorIntersections(l,h);this.computeIntersectionSnaps(b),this.computeVertexSnaps(l)},Jn.prototype.findInteriorIntersections=function(l,h){var b=new Us(h);return this._noder.setSegmentIntersector(b),this._noder.computeNodes(l),b.getInteriorIntersections()},Jn.prototype.computeVertexSnaps=function(){if(w(arguments[0],ce))for(var l=arguments[0].iterator();l.hasNext();){var h=l.next();this.computeVertexSnaps(h)}else if(arguments[0]instanceof Cr)for(var b=arguments[0],E=b.getCoordinates(),I=0;I<E.length;I++){var J=new kn(E[I],this._scaleFactor,this._li);this._pointSnapper.snap(J,b,I)&&b.addIntersection(E[I],I)}},Jn.prototype.computeNodes=function(l){this._nodedSegStrings=l,this._noder=new Za,this._pointSnapper=new Kn(this._noder.getIndex()),this.snapRound(l,this._li)},Jn.prototype.computeIntersectionSnaps=function(l){for(var h=l.iterator();h.hasNext();){var b=h.next(),E=new kn(b,this._scaleFactor,this._li);this._pointSnapper.snap(E)}},Jn.prototype.interfaces_=function(){return[zs]},Jn.prototype.getClass=function(){return Jn};var Br=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new ki,this._resultGeometry=null,this._saveException=null,arguments.length===1){var l=arguments[0];this._argGeom=l}else if(arguments.length===2){var h=arguments[0],b=arguments[1];this._argGeom=h,this._bufParams=b}},Vs={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Br.prototype.bufferFixedPrecision=function(l){var h=new Cs(new Jn(new me(1)),l.getScale()),b=new vn(this._bufParams);b.setWorkingPrecisionModel(l),b.setNoder(h),this._resultGeometry=b.buffer(this._argGeom,this._distance)},Br.prototype.bufferReducedPrecision=function(){var l=this;if(arguments.length===0){for(var h=Br.MAX_PRECISION_DIGITS;h>=0;h--){try{l.bufferReducedPrecision(h)}catch(J){if(!(J instanceof vr))throw J;l._saveException=J}if(l._resultGeometry!==null)return null}throw this._saveException}if(arguments.length===1){var b=arguments[0],E=Br.precisionScaleFactor(this._argGeom,this._distance,b),I=new me(E);this.bufferFixedPrecision(I)}},Br.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var l=this._argGeom.getFactory().getPrecisionModel();l.getType()===me.FIXED?this.bufferFixedPrecision(l):this.bufferReducedPrecision()},Br.prototype.setQuadrantSegments=function(l){this._bufParams.setQuadrantSegments(l)},Br.prototype.bufferOriginalPrecision=function(){try{var l=new vn(this._bufParams);this._resultGeometry=l.buffer(this._argGeom,this._distance)}catch(h){if(!(h instanceof gt))throw h;this._saveException=h}},Br.prototype.getResultGeometry=function(l){return this._distance=l,this.computeGeometry(),this._resultGeometry},Br.prototype.setEndCapStyle=function(l){this._bufParams.setEndCapStyle(l)},Br.prototype.interfaces_=function(){return[]},Br.prototype.getClass=function(){return Br},Br.bufferOp=function(){if(arguments.length===2){var l=arguments[0],h=arguments[1];return new Br(l).getResultGeometry(h)}if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Gt&&typeof arguments[1]=="number"){var b=arguments[0],E=arguments[1],I=arguments[2],J=new Br(b);return J.setQuadrantSegments(I),J.getResultGeometry(E)}if(arguments[2]instanceof ki&&arguments[0]instanceof Gt&&typeof arguments[1]=="number"){var at=arguments[0],yt=arguments[1],St=arguments[2];return new Br(at,St).getResultGeometry(yt)}}else if(arguments.length===4){var Bt=arguments[0],Yt=arguments[1],ee=arguments[2],xe=arguments[3],Me=new Br(Bt);return Me.setQuadrantSegments(ee),Me.setEndCapStyle(xe),Me.getResultGeometry(Yt)}},Br.precisionScaleFactor=function(l,h,b){var E=l.getEnvelopeInternal(),I=C.max(Math.abs(E.getMaxX()),Math.abs(E.getMaxY()),Math.abs(E.getMinX()),Math.abs(E.getMinY()))+2*(h>0?h:0),J=b-Math.trunc(Math.log(I)/Math.log(10)+1);return Math.pow(10,J)},Vs.CAP_ROUND.get=function(){return ki.CAP_ROUND},Vs.CAP_BUTT.get=function(){return ki.CAP_FLAT},Vs.CAP_FLAT.get=function(){return ki.CAP_FLAT},Vs.CAP_SQUARE.get=function(){return ki.CAP_SQUARE},Vs.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(Br,Vs);var Nr=function(){this._pt=[new G,new G],this._distance=O.NaN,this._isNull=!0};Nr.prototype.getCoordinates=function(){return this._pt},Nr.prototype.getCoordinate=function(l){return this._pt[l]},Nr.prototype.setMinimum=function(){if(arguments.length===1){var l=arguments[0];this.setMinimum(l._pt[0],l._pt[1])}else if(arguments.length===2){var h=arguments[0],b=arguments[1];if(this._isNull)return this.initialize(h,b),null;var E=h.distance(b);E<this._distance&&this.initialize(h,b,E)}},Nr.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var l=arguments[0],h=arguments[1];this._pt[0].setCoordinate(l),this._pt[1].setCoordinate(h),this._distance=l.distance(h),this._isNull=!1}else if(arguments.length===3){var b=arguments[0],E=arguments[1],I=arguments[2];this._pt[0].setCoordinate(b),this._pt[1].setCoordinate(E),this._distance=I,this._isNull=!1}},Nr.prototype.getDistance=function(){return this._distance},Nr.prototype.setMaximum=function(){if(arguments.length===1){var l=arguments[0];this.setMaximum(l._pt[0],l._pt[1])}else if(arguments.length===2){var h=arguments[0],b=arguments[1];if(this._isNull)return this.initialize(h,b),null;var E=h.distance(b);E>this._distance&&this.initialize(h,b,E)}},Nr.prototype.interfaces_=function(){return[]},Nr.prototype.getClass=function(){return Nr};var Qn=function(){};Qn.prototype.interfaces_=function(){return[]},Qn.prototype.getClass=function(){return Qn},Qn.computeDistance=function(){if(arguments[2]instanceof Nr&&arguments[0]instanceof oi&&arguments[1]instanceof G)for(var l=arguments[0],h=arguments[1],b=arguments[2],E=l.getCoordinates(),I=new Pe,J=0;J<E.length-1;J++){I.setCoordinates(E[J],E[J+1]);var at=I.closestPoint(h);b.setMinimum(at,h)}else if(arguments[2]instanceof Nr&&arguments[0]instanceof Ht&&arguments[1]instanceof G){var yt=arguments[0],St=arguments[1],Bt=arguments[2];Qn.computeDistance(yt.getExteriorRing(),St,Bt);for(var Yt=0;Yt<yt.getNumInteriorRing();Yt++)Qn.computeDistance(yt.getInteriorRingN(Yt),St,Bt)}else if(arguments[2]instanceof Nr&&arguments[0]instanceof Gt&&arguments[1]instanceof G){var ee=arguments[0],xe=arguments[1],Me=arguments[2];if(ee instanceof oi)Qn.computeDistance(ee,xe,Me);else if(ee instanceof Ht)Qn.computeDistance(ee,xe,Me);else if(ee instanceof fe)for(var Be=ee,Ve=0;Ve<Be.getNumGeometries();Ve++){var pr=Be.getGeometryN(Ve);Qn.computeDistance(pr,xe,Me)}else Me.setMinimum(ee.getCoordinate(),xe)}else if(arguments[2]instanceof Nr&&arguments[0]instanceof Pe&&arguments[1]instanceof G){var Hr=arguments[0],Nn=arguments[1],Ys=arguments[2],ko=Hr.closestPoint(Nn);Ys.setMinimum(ko,Nn)}};var Rs=function(l){this._maxPtDist=new Nr,this._inputGeom=l||null},da={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};Rs.prototype.computeMaxMidpointDistance=function(l){var h=new ms(this._inputGeom);l.apply(h),this._maxPtDist.setMaximum(h.getMaxPointDistance())},Rs.prototype.computeMaxVertexDistance=function(l){var h=new xo(this._inputGeom);l.apply(h),this._maxPtDist.setMaximum(h.getMaxPointDistance())},Rs.prototype.findDistance=function(l){return this.computeMaxVertexDistance(l),this.computeMaxMidpointDistance(l),this._maxPtDist.getDistance()},Rs.prototype.getDistancePoints=function(){return this._maxPtDist},Rs.prototype.interfaces_=function(){return[]},Rs.prototype.getClass=function(){return Rs},da.MaxPointDistanceFilter.get=function(){return xo},da.MaxMidpointDistanceFilter.get=function(){return ms},Object.defineProperties(Rs,da);var xo=function(l){this._maxPtDist=new Nr,this._minPtDist=new Nr,this._geom=l||null};xo.prototype.filter=function(l){this._minPtDist.initialize(),Qn.computeDistance(this._geom,l,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},xo.prototype.getMaxPointDistance=function(){return this._maxPtDist},xo.prototype.interfaces_=function(){return[ie]},xo.prototype.getClass=function(){return xo};var ms=function(l){this._maxPtDist=new Nr,this._minPtDist=new Nr,this._geom=l||null};ms.prototype.filter=function(l,h){if(h===0)return null;var b=l.getCoordinate(h-1),E=l.getCoordinate(h),I=new G((b.x+E.x)/2,(b.y+E.y)/2);this._minPtDist.initialize(),Qn.computeDistance(this._geom,I,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},ms.prototype.isDone=function(){return!1},ms.prototype.isGeometryChanged=function(){return!1},ms.prototype.getMaxPointDistance=function(){return this._maxPtDist},ms.prototype.interfaces_=function(){return[Ae]},ms.prototype.getClass=function(){return ms};var Os=function(l){this._comps=l||null};Os.prototype.filter=function(l){l instanceof Ht&&this._comps.add(l)},Os.prototype.interfaces_=function(){return[$e]},Os.prototype.getClass=function(){return Os},Os.getPolygons=function(){if(arguments.length===1){var l=arguments[0];return Os.getPolygons(l,new $t)}if(arguments.length===2){var h=arguments[0],b=arguments[1];return h instanceof Ht?b.add(h):h instanceof fe&&h.apply(new Os(b)),b}};var $r=function(){if(this._lines=null,this._isForcedToLineString=!1,arguments.length===1){var l=arguments[0];this._lines=l}else if(arguments.length===2){var h=arguments[0],b=arguments[1];this._lines=h,this._isForcedToLineString=b}};$r.prototype.filter=function(l){if(this._isForcedToLineString&&l instanceof Qt){var h=l.getFactory().createLineString(l.getCoordinateSequence());return this._lines.add(h),null}l instanceof oi&&this._lines.add(l)},$r.prototype.setForceToLineString=function(l){this._isForcedToLineString=l},$r.prototype.interfaces_=function(){return[zt]},$r.prototype.getClass=function(){return $r},$r.getGeometry=function(){if(arguments.length===1){var l=arguments[0];return l.getFactory().buildGeometry($r.getLines(l))}if(arguments.length===2){var h=arguments[0],b=arguments[1];return h.getFactory().buildGeometry($r.getLines(h,b))}},$r.getLines=function(){if(arguments.length===1){var l=arguments[0];return $r.getLines(l,!1)}if(arguments.length===2){if(w(arguments[0],ce)&&w(arguments[1],ce)){for(var h=arguments[0],b=arguments[1],E=h.iterator();E.hasNext();){var I=E.next();$r.getLines(I,b)}return b}if(arguments[0]instanceof Gt&&typeof arguments[1]=="boolean"){var J=arguments[0],at=arguments[1],yt=new $t;return J.apply(new $r(yt,at)),yt}if(arguments[0]instanceof Gt&&w(arguments[1],ce)){var St=arguments[0],Bt=arguments[1];return St instanceof oi?Bt.add(St):St.apply(new $r(Bt)),Bt}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&w(arguments[0],ce)&&w(arguments[1],ce)){for(var Yt=arguments[0],ee=arguments[1],xe=arguments[2],Me=Yt.iterator();Me.hasNext();){var Be=Me.next();$r.getLines(Be,ee,xe)}return ee}if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Gt&&w(arguments[1],ce)){var Ve=arguments[0],pr=arguments[1],Hr=arguments[2];return Ve.apply(new $r(pr,Hr)),pr}}};var as=function(){if(this._boundaryRule=Xt.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,arguments.length!==0){if(arguments.length===1){var l=arguments[0];if(l===null)throw new S("Rule must be non-null");this._boundaryRule=l}}};as.prototype.locateInternal=function(){if(arguments[0]instanceof G&&arguments[1]instanceof Ht){var l=arguments[0],h=arguments[1];if(h.isEmpty())return N.EXTERIOR;var b=h.getExteriorRing(),E=this.locateInPolygonRing(l,b);if(E===N.EXTERIOR)return N.EXTERIOR;if(E===N.BOUNDARY)return N.BOUNDARY;for(var I=0;I<h.getNumInteriorRing();I++){var J=h.getInteriorRingN(I),at=this.locateInPolygonRing(l,J);if(at===N.INTERIOR)return N.EXTERIOR;if(at===N.BOUNDARY)return N.BOUNDARY}return N.INTERIOR}if(arguments[0]instanceof G&&arguments[1]instanceof oi){var yt=arguments[0],St=arguments[1];if(!St.getEnvelopeInternal().intersects(yt))return N.EXTERIOR;var Bt=St.getCoordinates();return St.isClosed()||!yt.equals(Bt[0])&&!yt.equals(Bt[Bt.length-1])?Et.isOnLine(yt,Bt)?N.INTERIOR:N.EXTERIOR:N.BOUNDARY}if(arguments[0]instanceof G&&arguments[1]instanceof Mi){var Yt=arguments[0];return arguments[1].getCoordinate().equals2D(Yt)?N.INTERIOR:N.EXTERIOR}},as.prototype.locateInPolygonRing=function(l,h){return h.getEnvelopeInternal().intersects(l)?Et.locatePointInRing(l,h.getCoordinates()):N.EXTERIOR},as.prototype.intersects=function(l,h){return this.locate(l,h)!==N.EXTERIOR},as.prototype.updateLocationInfo=function(l){l===N.INTERIOR&&(this._isIn=!0),l===N.BOUNDARY&&this._numBoundaries++},as.prototype.computeLocation=function(l,h){if(h instanceof Mi&&this.updateLocationInfo(this.locateInternal(l,h)),h instanceof oi)this.updateLocationInfo(this.locateInternal(l,h));else if(h instanceof Ht)this.updateLocationInfo(this.locateInternal(l,h));else if(h instanceof Ye)for(var b=h,E=0;E<b.getNumGeometries();E++){var I=b.getGeometryN(E);this.updateLocationInfo(this.locateInternal(l,I))}else if(h instanceof he)for(var J=h,at=0;at<J.getNumGeometries();at++){var yt=J.getGeometryN(at);this.updateLocationInfo(this.locateInternal(l,yt))}else if(h instanceof fe)for(var St=new xs(h);St.hasNext();){var Bt=St.next();Bt!==h&&this.computeLocation(l,Bt)}},as.prototype.locate=function(l,h){return h.isEmpty()?N.EXTERIOR:h instanceof oi?this.locateInternal(l,h):h instanceof Ht?this.locateInternal(l,h):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(l,h),this._boundaryRule.isInBoundary(this._numBoundaries)?N.BOUNDARY:this._numBoundaries>0||this._isIn?N.INTERIOR:N.EXTERIOR)},as.prototype.interfaces_=function(){return[]},as.prototype.getClass=function(){return as};var pn=function l(){if(this._component=null,this._segIndex=null,this._pt=null,arguments.length===2){var h=arguments[0],b=arguments[1];l.call(this,h,l.INSIDE_AREA,b)}else if(arguments.length===3){var E=arguments[0],I=arguments[1],J=arguments[2];this._component=E,this._segIndex=I,this._pt=J}},Wl={INSIDE_AREA:{configurable:!0}};pn.prototype.isInsideArea=function(){return this._segIndex===pn.INSIDE_AREA},pn.prototype.getCoordinate=function(){return this._pt},pn.prototype.getGeometryComponent=function(){return this._component},pn.prototype.getSegmentIndex=function(){return this._segIndex},pn.prototype.interfaces_=function(){return[]},pn.prototype.getClass=function(){return pn},Wl.INSIDE_AREA.get=function(){return-1},Object.defineProperties(pn,Wl);var bn=function(l){this._pts=l||null};bn.prototype.filter=function(l){l instanceof Mi&&this._pts.add(l)},bn.prototype.interfaces_=function(){return[$e]},bn.prototype.getClass=function(){return bn},bn.getPoints=function(){if(arguments.length===1){var l=arguments[0];return l instanceof Mi?Ce.singletonList(l):bn.getPoints(l,new $t)}if(arguments.length===2){var h=arguments[0],b=arguments[1];return h instanceof Mi?b.add(h):h instanceof fe&&h.apply(new bn(b)),b}};var As=function(){this._locations=null;var l=arguments[0];this._locations=l};As.prototype.filter=function(l){(l instanceof Mi||l instanceof oi||l instanceof Ht)&&this._locations.add(new pn(l,0,l.getCoordinate()))},As.prototype.interfaces_=function(){return[$e]},As.prototype.getClass=function(){return As},As.getLocations=function(l){var h=new $t;return l.apply(new As(h)),h};var an=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new as,this._minDistanceLocation=null,this._minDistance=O.MAX_VALUE,arguments.length===2){var l=arguments[0],h=arguments[1];this._geom=[l,h],this._terminateDistance=0}else if(arguments.length===3){var b=arguments[0],E=arguments[1],I=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=b,this._geom[1]=E,this._terminateDistance=I}};an.prototype.computeContainmentDistance=function(){if(arguments.length===0){var l=new Array(2).fill(null);if(this.computeContainmentDistance(0,l),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,l)}else if(arguments.length===2){var h=arguments[0],b=arguments[1],E=1-h,I=Os.getPolygons(this._geom[h]);if(I.size()>0){var J=As.getLocations(this._geom[E]);if(this.computeContainmentDistance(J,I,b),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[E]=b[0],this._minDistanceLocation[h]=b[1],null}}else if(arguments.length===3){if(arguments[2]instanceof Array&&w(arguments[0],He)&&w(arguments[1],He)){for(var at=arguments[0],yt=arguments[1],St=arguments[2],Bt=0;Bt<at.size();Bt++)for(var Yt=at.get(Bt),ee=0;ee<yt.size();ee++)if(this.computeContainmentDistance(Yt,yt.get(ee),St),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof pn&&arguments[1]instanceof Ht){var xe=arguments[0],Me=arguments[1],Be=arguments[2],Ve=xe.getCoordinate();if(N.EXTERIOR!==this._ptLocator.locate(Ve,Me))return this._minDistance=0,Be[0]=xe,Be[1]=new pn(Me,Ve),null}}},an.prototype.computeMinDistanceLinesPoints=function(l,h,b){for(var E=0;E<l.size();E++)for(var I=l.get(E),J=0;J<h.size();J++){var at=h.get(J);if(this.computeMinDistance(I,at,b),this._minDistance<=this._terminateDistance)return null}},an.prototype.computeFacetDistance=function(){var l=new Array(2).fill(null),h=$r.getLines(this._geom[0]),b=$r.getLines(this._geom[1]),E=bn.getPoints(this._geom[0]),I=bn.getPoints(this._geom[1]);return this.computeMinDistanceLines(h,b,l),this.updateMinDistance(l,!1),this._minDistance<=this._terminateDistance?null:(l[0]=null,l[1]=null,this.computeMinDistanceLinesPoints(h,I,l),this.updateMinDistance(l,!1),this._minDistance<=this._terminateDistance?null:(l[0]=null,l[1]=null,this.computeMinDistanceLinesPoints(b,E,l),this.updateMinDistance(l,!0),this._minDistance<=this._terminateDistance?null:(l[0]=null,l[1]=null,this.computeMinDistancePoints(E,I,l),void this.updateMinDistance(l,!1))))},an.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},an.prototype.updateMinDistance=function(l,h){if(l[0]===null)return null;h?(this._minDistanceLocation[0]=l[1],this._minDistanceLocation[1]=l[0]):(this._minDistanceLocation[0]=l[0],this._minDistanceLocation[1]=l[1])},an.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},an.prototype.computeMinDistance=function(){if(arguments.length===0){if(this._minDistanceLocation!==null||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(arguments.length===3){if(arguments[2]instanceof Array&&arguments[0]instanceof oi&&arguments[1]instanceof Mi){var l=arguments[0],h=arguments[1],b=arguments[2];if(l.getEnvelopeInternal().distance(h.getEnvelopeInternal())>this._minDistance)return null;for(var E=l.getCoordinates(),I=h.getCoordinate(),J=0;J<E.length-1;J++){var at=Et.distancePointLine(I,E[J],E[J+1]);if(at<this._minDistance){this._minDistance=at;var yt=new Pe(E[J],E[J+1]).closestPoint(I);b[0]=new pn(l,J,yt),b[1]=new pn(h,0,I)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof oi&&arguments[1]instanceof oi){var St=arguments[0],Bt=arguments[1],Yt=arguments[2];if(St.getEnvelopeInternal().distance(Bt.getEnvelopeInternal())>this._minDistance)return null;for(var ee=St.getCoordinates(),xe=Bt.getCoordinates(),Me=0;Me<ee.length-1;Me++)for(var Be=0;Be<xe.length-1;Be++){var Ve=Et.distanceLineLine(ee[Me],ee[Me+1],xe[Be],xe[Be+1]);if(Ve<this._minDistance){this._minDistance=Ve;var pr=new Pe(ee[Me],ee[Me+1]),Hr=new Pe(xe[Be],xe[Be+1]),Nn=pr.closestPoints(Hr);Yt[0]=new pn(St,Me,Nn[0]),Yt[1]=new pn(Bt,Be,Nn[1])}if(this._minDistance<=this._terminateDistance)return null}}}},an.prototype.computeMinDistancePoints=function(l,h,b){for(var E=0;E<l.size();E++)for(var I=l.get(E),J=0;J<h.size();J++){var at=h.get(J),yt=I.getCoordinate().distance(at.getCoordinate());if(yt<this._minDistance&&(this._minDistance=yt,b[0]=new pn(I,0,I.getCoordinate()),b[1]=new pn(at,0,at.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},an.prototype.distance=function(){if(this._geom[0]===null||this._geom[1]===null)throw new S("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},an.prototype.computeMinDistanceLines=function(l,h,b){for(var E=0;E<l.size();E++)for(var I=l.get(E),J=0;J<h.size();J++){var at=h.get(J);if(this.computeMinDistance(I,at,b),this._minDistance<=this._terminateDistance)return null}},an.prototype.interfaces_=function(){return[]},an.prototype.getClass=function(){return an},an.distance=function(l,h){return new an(l,h).distance()},an.isWithinDistance=function(l,h,b){return new an(l,h,b).distance()<=b},an.nearestPoints=function(l,h){return new an(l,h).nearestPoints()};var Fr=function(){this._pt=[new G,new G],this._distance=O.NaN,this._isNull=!0};Fr.prototype.getCoordinates=function(){return this._pt},Fr.prototype.getCoordinate=function(l){return this._pt[l]},Fr.prototype.setMinimum=function(){if(arguments.length===1){var l=arguments[0];this.setMinimum(l._pt[0],l._pt[1])}else if(arguments.length===2){var h=arguments[0],b=arguments[1];if(this._isNull)return this.initialize(h,b),null;var E=h.distance(b);E<this._distance&&this.initialize(h,b,E)}},Fr.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var l=arguments[0],h=arguments[1];this._pt[0].setCoordinate(l),this._pt[1].setCoordinate(h),this._distance=l.distance(h),this._isNull=!1}else if(arguments.length===3){var b=arguments[0],E=arguments[1],I=arguments[2];this._pt[0].setCoordinate(b),this._pt[1].setCoordinate(E),this._distance=I,this._isNull=!1}},Fr.prototype.toString=function(){return kt.toLineString(this._pt[0],this._pt[1])},Fr.prototype.getDistance=function(){return this._distance},Fr.prototype.setMaximum=function(){if(arguments.length===1){var l=arguments[0];this.setMaximum(l._pt[0],l._pt[1])}else if(arguments.length===2){var h=arguments[0],b=arguments[1];if(this._isNull)return this.initialize(h,b),null;var E=h.distance(b);E>this._distance&&this.initialize(h,b,E)}},Fr.prototype.interfaces_=function(){return[]},Fr.prototype.getClass=function(){return Fr};var gs=function(){};gs.prototype.interfaces_=function(){return[]},gs.prototype.getClass=function(){return gs},gs.computeDistance=function(){if(arguments[2]instanceof Fr&&arguments[0]instanceof oi&&arguments[1]instanceof G)for(var l=arguments[0],h=arguments[1],b=arguments[2],E=new Pe,I=l.getCoordinates(),J=0;J<I.length-1;J++){E.setCoordinates(I[J],I[J+1]);var at=E.closestPoint(h);b.setMinimum(at,h)}else if(arguments[2]instanceof Fr&&arguments[0]instanceof Ht&&arguments[1]instanceof G){var yt=arguments[0],St=arguments[1],Bt=arguments[2];gs.computeDistance(yt.getExteriorRing(),St,Bt);for(var Yt=0;Yt<yt.getNumInteriorRing();Yt++)gs.computeDistance(yt.getInteriorRingN(Yt),St,Bt)}else if(arguments[2]instanceof Fr&&arguments[0]instanceof Gt&&arguments[1]instanceof G){var ee=arguments[0],xe=arguments[1],Me=arguments[2];if(ee instanceof oi)gs.computeDistance(ee,xe,Me);else if(ee instanceof Ht)gs.computeDistance(ee,xe,Me);else if(ee instanceof fe)for(var Be=ee,Ve=0;Ve<Be.getNumGeometries();Ve++){var pr=Be.getGeometryN(Ve);gs.computeDistance(pr,xe,Me)}else Me.setMinimum(ee.getCoordinate(),xe)}else if(arguments[2]instanceof Fr&&arguments[0]instanceof Pe&&arguments[1]instanceof G){var Hr=arguments[0],Nn=arguments[1],Ys=arguments[2],ko=Hr.closestPoint(Nn);Ys.setMinimum(ko,Nn)}};var Vn=function(){this._g0=null,this._g1=null,this._ptDist=new Fr,this._densifyFrac=0;var l=arguments[0],h=arguments[1];this._g0=l,this._g1=h},Qa={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Vn.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Vn.prototype.setDensifyFraction=function(l){if(l>1||l<=0)throw new S("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=l},Vn.prototype.compute=function(l,h){this.computeOrientedDistance(l,h,this._ptDist),this.computeOrientedDistance(h,l,this._ptDist)},Vn.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Vn.prototype.computeOrientedDistance=function(l,h,b){var E=new Ms(h);if(l.apply(E),b.setMaximum(E.getMaxPointDistance()),this._densifyFrac>0){var I=new qs(h,this._densifyFrac);l.apply(I),b.setMaximum(I.getMaxPointDistance())}},Vn.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Vn.prototype.interfaces_=function(){return[]},Vn.prototype.getClass=function(){return Vn},Vn.distance=function(){if(arguments.length===2){var l=arguments[0],h=arguments[1];return new Vn(l,h).distance()}if(arguments.length===3){var b=arguments[0],E=arguments[1],I=arguments[2],J=new Vn(b,E);return J.setDensifyFraction(I),J.distance()}},Qa.MaxPointDistanceFilter.get=function(){return Ms},Qa.MaxDensifiedByFractionDistanceFilter.get=function(){return qs},Object.defineProperties(Vn,Qa);var Ms=function(){this._maxPtDist=new Fr,this._minPtDist=new Fr,this._euclideanDist=new gs,this._geom=null;var l=arguments[0];this._geom=l};Ms.prototype.filter=function(l){this._minPtDist.initialize(),gs.computeDistance(this._geom,l,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Ms.prototype.getMaxPointDistance=function(){return this._maxPtDist},Ms.prototype.interfaces_=function(){return[ie]},Ms.prototype.getClass=function(){return Ms};var qs=function(){this._maxPtDist=new Fr,this._minPtDist=new Fr,this._geom=null,this._numSubSegs=0;var l=arguments[0],h=arguments[1];this._geom=l,this._numSubSegs=Math.trunc(Math.round(1/h))};qs.prototype.filter=function(l,h){if(h===0)return null;for(var b=l.getCoordinate(h-1),E=l.getCoordinate(h),I=(E.x-b.x)/this._numSubSegs,J=(E.y-b.y)/this._numSubSegs,at=0;at<this._numSubSegs;at++){var yt=b.x+at*I,St=b.y+at*J,Bt=new G(yt,St);this._minPtDist.initialize(),gs.computeDistance(this._geom,Bt,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},qs.prototype.isDone=function(){return!1},qs.prototype.isGeometryChanged=function(){return!1},qs.prototype.getMaxPointDistance=function(){return this._maxPtDist},qs.prototype.interfaces_=function(){return[Ae]},qs.prototype.getClass=function(){return qs};var Yr=function(l,h,b){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=l||null,this._bufDistance=h||null,this._result=b||null},pa={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Yr.prototype.checkMaximumDistance=function(l,h,b){var E=new Vn(h,l);if(E.setDensifyFraction(.25),this._maxDistanceFound=E.orientedDistance(),this._maxDistanceFound>b){this._isValid=!1;var I=E.getCoordinates();this._errorLocation=I[1],this._errorIndicator=l.getFactory().createLineString(I),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+kt.toLineString(I[0],I[1])+")"}},Yr.prototype.isValid=function(){var l=Math.abs(this._bufDistance),h=Yr.MAX_DISTANCE_DIFF_FRAC*l;return this._minValidDistance=l-h,this._maxValidDistance=l+h,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Yr.VERBOSE&&rt.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Yr.prototype.checkNegativeValid=function(){if(!(this._input instanceof Ht||this._input instanceof he||this._input instanceof fe))return null;var l=this.getPolygonLines(this._input);if(this.checkMinimumDistance(l,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(l,this._result,this._maxValidDistance)},Yr.prototype.getErrorIndicator=function(){return this._errorIndicator},Yr.prototype.checkMinimumDistance=function(l,h,b){var E=new an(l,h,b);if(this._minDistanceFound=E.distance(),this._minDistanceFound<b){this._isValid=!1;var I=E.nearestPoints();this._errorLocation=E.nearestPoints()[1],this._errorIndicator=l.getFactory().createLineString(I),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+kt.toLineString(I[0],I[1])+" )"}},Yr.prototype.checkPositiveValid=function(){var l=this._result.getBoundary();if(this.checkMinimumDistance(this._input,l,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,l,this._maxValidDistance)},Yr.prototype.getErrorLocation=function(){return this._errorLocation},Yr.prototype.getPolygonLines=function(l){for(var h=new $t,b=new $r(h),E=Os.getPolygons(l).iterator();E.hasNext();)E.next().apply(b);return l.getFactory().buildGeometry(h)},Yr.prototype.getErrorMessage=function(){return this._errMsg},Yr.prototype.interfaces_=function(){return[]},Yr.prototype.getClass=function(){return Yr},pa.VERBOSE.get=function(){return!1},pa.MAX_DISTANCE_DIFF_FRAC.get=function(){return .012},Object.defineProperties(Yr,pa);var Zr=function(l,h,b){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=l||null,this._distance=h||null,this._result=b||null},tl={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Zr.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},Zr.prototype.checkEnvelope=function(){if(this._distance<0)return null;var l=this._distance*Zr.MAX_ENV_DIFF_FRAC;l===0&&(l=.001);var h=new wt(this._input.getEnvelopeInternal());h.expandBy(this._distance);var b=new wt(this._result.getEnvelopeInternal());b.expandBy(l),b.contains(h)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(b)),this.report("Envelope")},Zr.prototype.checkDistance=function(){var l=new Yr(this._input,this._distance,this._result);l.isValid()||(this._isValid=!1,this._errorMsg=l.getErrorMessage(),this._errorLocation=l.getErrorLocation(),this._errorIndicator=l.getErrorIndicator()),this.report("Distance")},Zr.prototype.checkArea=function(){var l=this._input.getArea(),h=this._result.getArea();this._distance>0&&l>h&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&l<h&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},Zr.prototype.checkPolygonal=function(){this._result instanceof Ht||this._result instanceof he||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},Zr.prototype.getErrorIndicator=function(){return this._errorIndicator},Zr.prototype.getErrorLocation=function(){return this._errorLocation},Zr.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},Zr.prototype.report=function(l){if(!Zr.VERBOSE)return null;rt.out.println("Check "+l+": "+(this._isValid?"passed":"FAILED"))},Zr.prototype.getErrorMessage=function(){return this._errorMsg},Zr.prototype.interfaces_=function(){return[]},Zr.prototype.getClass=function(){return Zr},Zr.isValidMsg=function(l,h,b){var E=new Zr(l,h,b);return E.isValid()?null:E.getErrorMessage()},Zr.isValid=function(l,h,b){return!!new Zr(l,h,b).isValid()},tl.VERBOSE.get=function(){return!1},tl.MAX_ENV_DIFF_FRAC.get=function(){return .012},Object.defineProperties(Zr,tl);var ln=function(){this._pts=null,this._data=null;var l=arguments[0],h=arguments[1];this._pts=l,this._data=h};ln.prototype.getCoordinates=function(){return this._pts},ln.prototype.size=function(){return this._pts.length},ln.prototype.getCoordinate=function(l){return this._pts[l]},ln.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},ln.prototype.getSegmentOctant=function(l){return l===this._pts.length-1?-1:Gn.octant(this.getCoordinate(l),this.getCoordinate(l+1))},ln.prototype.setData=function(l){this._data=l},ln.prototype.getData=function(){return this._data},ln.prototype.toString=function(){return kt.toLineString(new pe(this._pts))},ln.prototype.interfaces_=function(){return[Zn]},ln.prototype.getClass=function(){return ln};var zr=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new $t,this._intersectionCount=0,this._keepIntersections=!0;var l=arguments[0];this._li=l,this._interiorIntersection=null};zr.prototype.getInteriorIntersection=function(){return this._interiorIntersection},zr.prototype.setCheckEndSegmentsOnly=function(l){this._isCheckEndSegmentsOnly=l},zr.prototype.getIntersectionSegments=function(){return this._intSegments},zr.prototype.count=function(){return this._intersectionCount},zr.prototype.getIntersections=function(){return this._intersections},zr.prototype.setFindAllIntersections=function(l){this._findAllIntersections=l},zr.prototype.setKeepIntersections=function(l){this._keepIntersections=l},zr.prototype.processIntersections=function(l,h,b,E){if(!this._findAllIntersections&&this.hasIntersection()||l===b&&h===E||this._isCheckEndSegmentsOnly&&!(this.isEndSegment(l,h)||this.isEndSegment(b,E)))return null;var I=l.getCoordinates()[h],J=l.getCoordinates()[h+1],at=b.getCoordinates()[E],yt=b.getCoordinates()[E+1];this._li.computeIntersection(I,J,at,yt),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=I,this._intSegments[1]=J,this._intSegments[2]=at,this._intSegments[3]=yt,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},zr.prototype.isEndSegment=function(l,h){return h===0||h>=l.size()-2},zr.prototype.hasIntersection=function(){return this._interiorIntersection!==null},zr.prototype.isDone=function(){return!this._findAllIntersections&&this._interiorIntersection!==null},zr.prototype.interfaces_=function(){return[so]},zr.prototype.getClass=function(){return zr},zr.createAllIntersectionsFinder=function(l){var h=new zr(l);return h.setFindAllIntersections(!0),h},zr.createAnyIntersectionFinder=function(l){return new zr(l)},zr.createIntersectionCounter=function(l){var h=new zr(l);return h.setFindAllIntersections(!0),h.setKeepIntersections(!1),h};var ts=function(){this._li=new lt,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var l=arguments[0];this._segStrings=l};ts.prototype.execute=function(){if(this._segInt!==null)return null;this.checkInteriorIntersections()},ts.prototype.getIntersections=function(){return this._segInt.getIntersections()},ts.prototype.isValid=function(){return this.execute(),this._isValid},ts.prototype.setFindAllIntersections=function(l){this._findAllIntersections=l},ts.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new zr(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var l=new Za;if(l.setSegmentIntersector(this._segInt),l.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},ts.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new vr(this.getErrorMessage(),this._segInt.getInteriorIntersection())},ts.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var l=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+kt.toLineString(l[0],l[1])+" and "+kt.toLineString(l[2],l[3])},ts.prototype.interfaces_=function(){return[]},ts.prototype.getClass=function(){return ts},ts.computeIntersections=function(l){var h=new ts(l);return h.setFindAllIntersections(!0),h.isValid(),h.getIntersections()};var ys=function l(){this._nv=null;var h=arguments[0];this._nv=new ts(l.toSegmentStrings(h))};ys.prototype.checkValid=function(){this._nv.checkValid()},ys.prototype.interfaces_=function(){return[]},ys.prototype.getClass=function(){return ys},ys.toSegmentStrings=function(l){for(var h=new $t,b=l.iterator();b.hasNext();){var E=b.next();h.add(new ln(E.getCoordinates(),E))}return h},ys.checkValid=function(l){new ys(l).checkValid()};var Eo=function(l){this._mapOp=l};Eo.prototype.map=function(l){for(var h=new $t,b=0;b<l.getNumGeometries();b++){var E=this._mapOp.map(l.getGeometryN(b));E.isEmpty()||h.add(E)}return l.getFactory().createGeometryCollection(Se.toGeometryArray(h))},Eo.prototype.interfaces_=function(){return[]},Eo.prototype.getClass=function(){return Eo},Eo.map=function(l,h){return new Eo(h).map(l)};var qn=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new $t,this._resultLineList=new $t;var l=arguments[0],h=arguments[1],b=arguments[2];this._op=l,this._geometryFactory=h,this._ptLocator=b};qn.prototype.collectLines=function(l){for(var h=this._op.getGraph().getEdgeEnds().iterator();h.hasNext();){var b=h.next();this.collectLineEdge(b,l,this._lineEdgesList),this.collectBoundaryTouchEdge(b,l,this._lineEdgesList)}},qn.prototype.labelIsolatedLine=function(l,h){var b=this._ptLocator.locate(l.getCoordinate(),this._op.getArgGeometry(h));l.getLabel().setLocation(h,b)},qn.prototype.build=function(l){return this.findCoveredLineEdges(),this.collectLines(l),this.buildLines(l),this._resultLineList},qn.prototype.collectLineEdge=function(l,h,b){var E=l.getLabel(),I=l.getEdge();l.isLineEdge()&&(l.isVisited()||!ei.isResultOfOp(E,h)||I.isCovered()||(b.add(I),l.setVisitedEdge(!0)))},qn.prototype.findCoveredLineEdges=function(){for(var l=this._op.getGraph().getNodes().iterator();l.hasNext();)l.next().getEdges().findCoveredLineEdges();for(var h=this._op.getGraph().getEdgeEnds().iterator();h.hasNext();){var b=h.next(),E=b.getEdge();if(b.isLineEdge()&&!E.isCoveredSet()){var I=this._op.isCoveredByA(b.getCoordinate());E.setCovered(I)}}},qn.prototype.labelIsolatedLines=function(l){for(var h=l.iterator();h.hasNext();){var b=h.next(),E=b.getLabel();b.isIsolated()&&(E.isNull(0)?this.labelIsolatedLine(b,0):this.labelIsolatedLine(b,1))}},qn.prototype.buildLines=function(l){for(var h=this._lineEdgesList.iterator();h.hasNext();){var b=h.next(),E=this._geometryFactory.createLineString(b.getCoordinates());this._resultLineList.add(E),b.setInResult(!0)}},qn.prototype.collectBoundaryTouchEdge=function(l,h,b){var E=l.getLabel();return l.isLineEdge()||l.isVisited()||l.isInteriorAreaEdge()||l.getEdge().isInResult()?null:(Q.isTrue(!(l.isInResult()||l.getSym().isInResult())||!l.getEdge().isInResult()),void(ei.isResultOfOp(E,h)&&h===ei.INTERSECTION&&(b.add(l.getEdge()),l.setVisitedEdge(!0))))},qn.prototype.interfaces_=function(){return[]},qn.prototype.getClass=function(){return qn};var Ss=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new $t;var l=arguments[0],h=arguments[1];this._op=l,this._geometryFactory=h};Ss.prototype.filterCoveredNodeToPoint=function(l){var h=l.getCoordinate();if(!this._op.isCoveredByLA(h)){var b=this._geometryFactory.createPoint(h);this._resultPointList.add(b)}},Ss.prototype.extractNonCoveredResultNodes=function(l){for(var h=this._op.getGraph().getNodes().iterator();h.hasNext();){var b=h.next();if(!b.isInResult()&&!b.isIncidentEdgeInResult()&&(b.getEdges().getDegree()===0||l===ei.INTERSECTION)){var E=b.getLabel();ei.isResultOfOp(E,l)&&this.filterCoveredNodeToPoint(b)}}},Ss.prototype.build=function(l){return this.extractNonCoveredResultNodes(l),this._resultPointList},Ss.prototype.interfaces_=function(){return[]},Ss.prototype.getClass=function(){return Ss};var _n=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};_n.prototype.transformPoint=function(l,h){return this._factory.createPoint(this.transformCoordinates(l.getCoordinateSequence(),l))},_n.prototype.transformPolygon=function(l,h){var b=!0,E=this.transformLinearRing(l.getExteriorRing(),l);E!==null&&E instanceof Qt&&!E.isEmpty()||(b=!1);for(var I=new $t,J=0;J<l.getNumInteriorRing();J++){var at=this.transformLinearRing(l.getInteriorRingN(J),l);at===null||at.isEmpty()||(at instanceof Qt||(b=!1),I.add(at))}if(b)return this._factory.createPolygon(E,I.toArray([]));var yt=new $t;return E!==null&&yt.add(E),yt.addAll(I),this._factory.buildGeometry(yt)},_n.prototype.createCoordinateSequence=function(l){return this._factory.getCoordinateSequenceFactory().create(l)},_n.prototype.getInputGeometry=function(){return this._inputGeom},_n.prototype.transformMultiLineString=function(l,h){for(var b=new $t,E=0;E<l.getNumGeometries();E++){var I=this.transformLineString(l.getGeometryN(E),l);I!==null&&(I.isEmpty()||b.add(I))}return this._factory.buildGeometry(b)},_n.prototype.transformCoordinates=function(l,h){return this.copy(l)},_n.prototype.transformLineString=function(l,h){return this._factory.createLineString(this.transformCoordinates(l.getCoordinateSequence(),l))},_n.prototype.transformMultiPoint=function(l,h){for(var b=new $t,E=0;E<l.getNumGeometries();E++){var I=this.transformPoint(l.getGeometryN(E),l);I!==null&&(I.isEmpty()||b.add(I))}return this._factory.buildGeometry(b)},_n.prototype.transformMultiPolygon=function(l,h){for(var b=new $t,E=0;E<l.getNumGeometries();E++){var I=this.transformPolygon(l.getGeometryN(E),l);I!==null&&(I.isEmpty()||b.add(I))}return this._factory.buildGeometry(b)},_n.prototype.copy=function(l){return l.copy()},_n.prototype.transformGeometryCollection=function(l,h){for(var b=new $t,E=0;E<l.getNumGeometries();E++){var I=this.transform(l.getGeometryN(E));I!==null&&(this._pruneEmptyGeometry&&I.isEmpty()||b.add(I))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(Se.toGeometryArray(b)):this._factory.buildGeometry(b)},_n.prototype.transform=function(l){if(this._inputGeom=l,this._factory=l.getFactory(),l instanceof Mi)return this.transformPoint(l,null);if(l instanceof re)return this.transformMultiPoint(l,null);if(l instanceof Qt)return this.transformLinearRing(l,null);if(l instanceof oi)return this.transformLineString(l,null);if(l instanceof Ye)return this.transformMultiLineString(l,null);if(l instanceof Ht)return this.transformPolygon(l,null);if(l instanceof he)return this.transformMultiPolygon(l,null);if(l instanceof fe)return this.transformGeometryCollection(l,null);throw new S("Unknown Geometry subtype: "+l.getClass().getName())},_n.prototype.transformLinearRing=function(l,h){var b=this.transformCoordinates(l.getCoordinateSequence(),l);if(b===null)return this._factory.createLinearRing(null);var E=b.size();return E>0&&E<4&&!this._preserveType?this._factory.createLineString(b):this._factory.createLinearRing(b)},_n.prototype.interfaces_=function(){return[]},_n.prototype.getClass=function(){return _n};var vs=function l(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new Pe,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof oi&&typeof arguments[1]=="number"){var h=arguments[0],b=arguments[1];l.call(this,h.getCoordinates(),b)}else if(arguments[0]instanceof Array&&typeof arguments[1]=="number"){var E=arguments[0],I=arguments[1];this._srcPts=E,this._isClosed=l.isClosed(E),this._snapTolerance=I}};vs.prototype.snapVertices=function(l,h){for(var b=this._isClosed?l.size()-1:l.size(),E=0;E<b;E++){var I=l.get(E),J=this.findSnapForVertex(I,h);J!==null&&(l.set(E,new G(J)),E===0&&this._isClosed&&l.set(l.size()-1,new G(J)))}},vs.prototype.findSnapForVertex=function(l,h){for(var b=0;b<h.length;b++){if(l.equals2D(h[b]))return null;if(l.distance(h[b])<this._snapTolerance)return h[b]}return null},vs.prototype.snapTo=function(l){var h=new bi(this._srcPts);return this.snapVertices(h,l),this.snapSegments(h,l),h.toCoordinateArray()},vs.prototype.snapSegments=function(l,h){if(h.length===0)return null;var b=h.length;h[0].equals2D(h[h.length-1])&&(b=h.length-1);for(var E=0;E<b;E++){var I=h[E],J=this.findSegmentIndexToSnap(I,l);J>=0&&l.add(J+1,new G(I),!1)}},vs.prototype.findSegmentIndexToSnap=function(l,h){for(var b=O.MAX_VALUE,E=-1,I=0;I<h.size()-1;I++){if(this._seg.p0=h.get(I),this._seg.p1=h.get(I+1),this._seg.p0.equals2D(l)||this._seg.p1.equals2D(l)){if(this._allowSnappingToSourceVertices)continue;return-1}var J=this._seg.distance(l);J<this._snapTolerance&&J<b&&(b=J,E=I)}return E},vs.prototype.setAllowSnappingToSourceVertices=function(l){this._allowSnappingToSourceVertices=l},vs.prototype.interfaces_=function(){return[]},vs.prototype.getClass=function(){return vs},vs.isClosed=function(l){return!(l.length<=1)&&l[0].equals2D(l[l.length-1])};var Pr=function(l){this._srcGeom=l||null},el={SNAP_PRECISION_FACTOR:{configurable:!0}};Pr.prototype.snapTo=function(l,h){var b=this.extractTargetCoordinates(l);return new il(h,b).transform(this._srcGeom)},Pr.prototype.snapToSelf=function(l,h){var b=this.extractTargetCoordinates(this._srcGeom),E=new il(l,b,!0).transform(this._srcGeom),I=E;return h&&w(I,Tt)&&(I=E.buffer(0)),I},Pr.prototype.computeSnapTolerance=function(l){return this.computeMinimumSegmentLength(l)/10},Pr.prototype.extractTargetCoordinates=function(l){for(var h=new v,b=l.getCoordinates(),E=0;E<b.length;E++)h.add(b[E]);return h.toArray(new Array(0).fill(null))},Pr.prototype.computeMinimumSegmentLength=function(l){for(var h=O.MAX_VALUE,b=0;b<l.length-1;b++){var E=l[b].distance(l[b+1]);E<h&&(h=E)}return h},Pr.prototype.interfaces_=function(){return[]},Pr.prototype.getClass=function(){return Pr},Pr.snap=function(l,h,b){var E=new Array(2).fill(null),I=new Pr(l);E[0]=I.snapTo(h,b);var J=new Pr(h);return E[1]=J.snapTo(E[0],b),E},Pr.computeOverlaySnapTolerance=function(){if(arguments.length===1){var l=arguments[0],h=Pr.computeSizeBasedSnapTolerance(l),b=l.getPrecisionModel();if(b.getType()===me.FIXED){var E=1/b.getScale()*2/1.415;E>h&&(h=E)}return h}if(arguments.length===2){var I=arguments[0],J=arguments[1];return Math.min(Pr.computeOverlaySnapTolerance(I),Pr.computeOverlaySnapTolerance(J))}},Pr.computeSizeBasedSnapTolerance=function(l){var h=l.getEnvelopeInternal();return Math.min(h.getHeight(),h.getWidth())*Pr.SNAP_PRECISION_FACTOR},Pr.snapToSelf=function(l,h,b){return new Pr(l).snapToSelf(h,b)},el.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Pr,el);var il=function(l){function h(b,E,I){l.call(this),this._snapTolerance=b||null,this._snapPts=E||null,this._isSelfSnap=I!==void 0&&I}return l&&(h.__proto__=l),h.prototype=Object.create(l&&l.prototype),h.prototype.constructor=h,h.prototype.snapLine=function(b,E){var I=new vs(b,this._snapTolerance);return I.setAllowSnappingToSourceVertices(this._isSelfSnap),I.snapTo(E)},h.prototype.transformCoordinates=function(b,E){var I=b.toCoordinateArray(),J=this.snapLine(I,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(J)},h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},h}(_n),mn=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};mn.prototype.getCommon=function(){return O.longBitsToDouble(this._commonBits)},mn.prototype.add=function(l){var h=O.doubleToLongBits(l);if(this._isFirst)return this._commonBits=h,this._commonSignExp=mn.signExpBits(this._commonBits),this._isFirst=!1,null;if(mn.signExpBits(h)!==this._commonSignExp)return this._commonBits=0,null;this._commonMantissaBitsCount=mn.numCommonMostSigMantissaBits(this._commonBits,h),this._commonBits=mn.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))},mn.prototype.toString=function(){if(arguments.length===1){var l=arguments[0],h=O.longBitsToDouble(l),b="0000000000000000000000000000000000000000000000000000000000000000"+O.toBinaryString(l),E=b.substring(b.length-64);return E.substring(0,1)+"  "+E.substring(1,12)+"(exp) "+E.substring(12)+" [ "+h+" ]"}},mn.prototype.interfaces_=function(){return[]},mn.prototype.getClass=function(){return mn},mn.getBit=function(l,h){return l&1<<h?1:0},mn.signExpBits=function(l){return l>>52},mn.zeroLowerBits=function(l,h){return l&~((1<<h)-1)},mn.numCommonMostSigMantissaBits=function(l,h){for(var b=0,E=52;E>=0;E--){if(mn.getBit(l,E)!==mn.getBit(h,E))return b;b++}return 52};var Is=function(){this._commonCoord=null,this._ccFilter=new Co},ma={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};Is.prototype.addCommonBits=function(l){var h=new Ns(this._commonCoord);l.apply(h),l.geometryChanged()},Is.prototype.removeCommonBits=function(l){if(this._commonCoord.x===0&&this._commonCoord.y===0)return l;var h=new G(this._commonCoord);h.x=-h.x,h.y=-h.y;var b=new Ns(h);return l.apply(b),l.geometryChanged(),l},Is.prototype.getCommonCoordinate=function(){return this._commonCoord},Is.prototype.add=function(l){l.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},Is.prototype.interfaces_=function(){return[]},Is.prototype.getClass=function(){return Is},ma.CommonCoordinateFilter.get=function(){return Co},ma.Translater.get=function(){return Ns},Object.defineProperties(Is,ma);var Co=function(){this._commonBitsX=new mn,this._commonBitsY=new mn};Co.prototype.filter=function(l){this._commonBitsX.add(l.x),this._commonBitsY.add(l.y)},Co.prototype.getCommonCoordinate=function(){return new G(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},Co.prototype.interfaces_=function(){return[ie]},Co.prototype.getClass=function(){return Co};var Ns=function(){this.trans=null;var l=arguments[0];this.trans=l};Ns.prototype.filter=function(l,h){var b=l.getOrdinate(h,0)+this.trans.x,E=l.getOrdinate(h,1)+this.trans.y;l.setOrdinate(h,0,b),l.setOrdinate(h,1,E)},Ns.prototype.isDone=function(){return!1},Ns.prototype.isGeometryChanged=function(){return!0},Ns.prototype.interfaces_=function(){return[Ae]},Ns.prototype.getClass=function(){return Ns};var jr=function(l,h){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=l,this._geom[1]=h,this.computeSnapTolerance()};jr.prototype.selfSnap=function(l){return new Pr(l).snapTo(l,this._snapTolerance)},jr.prototype.removeCommonBits=function(l){this._cbr=new Is,this._cbr.add(l[0]),this._cbr.add(l[1]);var h=new Array(2).fill(null);return h[0]=this._cbr.removeCommonBits(l[0].copy()),h[1]=this._cbr.removeCommonBits(l[1].copy()),h},jr.prototype.prepareResult=function(l){return this._cbr.addCommonBits(l),l},jr.prototype.getResultGeometry=function(l){var h=this.snap(this._geom),b=ei.overlayOp(h[0],h[1],l);return this.prepareResult(b)},jr.prototype.checkValid=function(l){l.isValid()||rt.out.println("Snapped geometry is invalid")},jr.prototype.computeSnapTolerance=function(){this._snapTolerance=Pr.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},jr.prototype.snap=function(l){var h=this.removeCommonBits(l);return Pr.snap(h[0],h[1],this._snapTolerance)},jr.prototype.interfaces_=function(){return[]},jr.prototype.getClass=function(){return jr},jr.overlayOp=function(l,h,b){return new jr(l,h).getResultGeometry(b)},jr.union=function(l,h){return jr.overlayOp(l,h,ei.UNION)},jr.intersection=function(l,h){return jr.overlayOp(l,h,ei.INTERSECTION)},jr.symDifference=function(l,h){return jr.overlayOp(l,h,ei.SYMDIFFERENCE)},jr.difference=function(l,h){return jr.overlayOp(l,h,ei.DIFFERENCE)};var wn=function(l,h){this._geom=new Array(2).fill(null),this._geom[0]=l,this._geom[1]=h};wn.prototype.getResultGeometry=function(l){var h=null,b=!1,E=null;try{h=ei.overlayOp(this._geom[0],this._geom[1],l),b=!0}catch(I){if(!(I instanceof gt))throw I;E=I}if(!b)try{h=jr.overlayOp(this._geom[0],this._geom[1],l)}catch(I){throw I instanceof gt?E:I}return h},wn.prototype.interfaces_=function(){return[]},wn.prototype.getClass=function(){return wn},wn.overlayOp=function(l,h,b){return new wn(l,h).getResultGeometry(b)},wn.union=function(l,h){return wn.overlayOp(l,h,ei.UNION)},wn.intersection=function(l,h){return wn.overlayOp(l,h,ei.INTERSECTION)},wn.symDifference=function(l,h){return wn.overlayOp(l,h,ei.SYMDIFFERENCE)},wn.difference=function(l,h){return wn.overlayOp(l,h,ei.DIFFERENCE)};var g=function(){this.mce=null,this.chainIndex=null;var l=arguments[0],h=arguments[1];this.mce=l,this.chainIndex=h};g.prototype.computeIntersections=function(l,h){this.mce.computeIntersectsForChain(this.chainIndex,l.mce,l.chainIndex,h)},g.prototype.interfaces_=function(){return[]},g.prototype.getClass=function(){return g};var P=function l(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,arguments.length===2){var h=arguments[0],b=arguments[1];this._eventType=l.DELETE,this._xValue=h,this._insertEvent=b}else if(arguments.length===3){var E=arguments[0],I=arguments[1],J=arguments[2];this._eventType=l.INSERT,this._label=E,this._xValue=I,this._obj=J}},X={INSERT:{configurable:!0},DELETE:{configurable:!0}};P.prototype.isDelete=function(){return this._eventType===P.DELETE},P.prototype.setDeleteEventIndex=function(l){this._deleteEventIndex=l},P.prototype.getObject=function(){return this._obj},P.prototype.compareTo=function(l){var h=l;return this._xValue<h._xValue?-1:this._xValue>h._xValue?1:this._eventType<h._eventType?-1:this._eventType>h._eventType?1:0},P.prototype.getInsertEvent=function(){return this._insertEvent},P.prototype.isInsert=function(){return this._eventType===P.INSERT},P.prototype.isSameLabel=function(l){return this._label!==null&&this._label===l._label},P.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},P.prototype.interfaces_=function(){return[U]},P.prototype.getClass=function(){return P},X.INSERT.get=function(){return 1},X.DELETE.get=function(){return 2},Object.defineProperties(P,X);var st=function(){};st.prototype.interfaces_=function(){return[]},st.prototype.getClass=function(){return st};var ft=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var l=arguments[0],h=arguments[1],b=arguments[2];this._li=l,this._includeProper=h,this._recordIsolated=b};ft.prototype.isTrivialIntersection=function(l,h,b,E){if(l===b&&this._li.getIntersectionNum()===1){if(ft.isAdjacentSegments(h,E))return!0;if(l.isClosed()){var I=l.getNumPoints()-1;if(h===0&&E===I||E===0&&h===I)return!0}}return!1},ft.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},ft.prototype.setIsDoneIfProperInt=function(l){this._isDoneWhenProperInt=l},ft.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},ft.prototype.isBoundaryPointInternal=function(l,h){for(var b=h.iterator();b.hasNext();){var E=b.next().getCoordinate();if(l.isIntersection(E))return!0}return!1},ft.prototype.hasProperIntersection=function(){return this._hasProper},ft.prototype.hasIntersection=function(){return this._hasIntersection},ft.prototype.isDone=function(){return this._isDone},ft.prototype.isBoundaryPoint=function(l,h){return h!==null&&(!!this.isBoundaryPointInternal(l,h[0])||!!this.isBoundaryPointInternal(l,h[1]))},ft.prototype.setBoundaryNodes=function(l,h){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=l,this._bdyNodes[1]=h},ft.prototype.addIntersections=function(l,h,b,E){if(l===b&&h===E)return null;this.numTests++;var I=l.getCoordinates()[h],J=l.getCoordinates()[h+1],at=b.getCoordinates()[E],yt=b.getCoordinates()[E+1];this._li.computeIntersection(I,J,at,yt),this._li.hasIntersection()&&(this._recordIsolated&&(l.setIsolated(!1),b.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(l,h,b,E)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(l.addIntersections(this._li,h,0),b.addIntersections(this._li,E,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},ft.prototype.interfaces_=function(){return[]},ft.prototype.getClass=function(){return ft},ft.isAdjacentSegments=function(l,h){return Math.abs(l-h)===1};var Mt=function(l){function h(){l.call(this),this.events=new $t,this.nOverlaps=null}return l&&(h.__proto__=l),h.prototype=Object.create(l&&l.prototype),h.prototype.constructor=h,h.prototype.prepareEvents=function(){Ce.sort(this.events);for(var b=0;b<this.events.size();b++){var E=this.events.get(b);E.isDelete()&&E.getInsertEvent().setDeleteEventIndex(b)}},h.prototype.computeIntersections=function(){if(arguments.length===1){var b=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var E=0;E<this.events.size();E++){var I=this.events.get(E);if(I.isInsert()&&this.processOverlaps(E,I.getDeleteEventIndex(),I,b),b.isDone())break}}else if(arguments.length===3){if(arguments[2]instanceof ft&&w(arguments[0],He)&&w(arguments[1],He)){var J=arguments[0],at=arguments[1],yt=arguments[2];this.addEdges(J,J),this.addEdges(at,at),this.computeIntersections(yt)}else if(typeof arguments[2]=="boolean"&&w(arguments[0],He)&&arguments[1]instanceof ft){var St=arguments[0],Bt=arguments[1];arguments[2]?this.addEdges(St,null):this.addEdges(St),this.computeIntersections(Bt)}}},h.prototype.addEdge=function(b,E){for(var I=b.getMonotoneChainEdge(),J=I.getStartIndexes(),at=0;at<J.length-1;at++){var yt=new g(I,at),St=new P(E,I.getMinX(at),yt);this.events.add(St),this.events.add(new P(I.getMaxX(at),St))}},h.prototype.processOverlaps=function(b,E,I,J){for(var at=I.getObject(),yt=b;yt<E;yt++){var St=this.events.get(yt);if(St.isInsert()){var Bt=St.getObject();I.isSameLabel(St)||(at.computeIntersections(Bt,J),this.nOverlaps++)}}},h.prototype.addEdges=function(){if(arguments.length===1)for(var b=arguments[0].iterator();b.hasNext();){var E=b.next();this.addEdge(E,E)}else if(arguments.length===2)for(var I=arguments[0],J=arguments[1],at=I.iterator();at.hasNext();){var yt=at.next();this.addEdge(yt,J)}},h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},h}(st),Dt=function(){this._min=O.POSITIVE_INFINITY,this._max=O.NEGATIVE_INFINITY},Wt={NodeComparator:{configurable:!0}};Dt.prototype.getMin=function(){return this._min},Dt.prototype.intersects=function(l,h){return!(this._min>h||this._max<l)},Dt.prototype.getMax=function(){return this._max},Dt.prototype.toString=function(){return kt.toLineString(new G(this._min,0),new G(this._max,0))},Dt.prototype.interfaces_=function(){return[]},Dt.prototype.getClass=function(){return Dt},Wt.NodeComparator.get=function(){return te},Object.defineProperties(Dt,Wt);var te=function(){};te.prototype.compare=function(l,h){var b=l,E=h,I=(b._min+b._max)/2,J=(E._min+E._max)/2;return I<J?-1:I>J?1:0},te.prototype.interfaces_=function(){return[q]},te.prototype.getClass=function(){return te};var de=function(l){function h(){l.call(this),this._item=null;var b=arguments[0],E=arguments[1],I=arguments[2];this._min=b,this._max=E,this._item=I}return l&&(h.__proto__=l),h.prototype=Object.create(l&&l.prototype),h.prototype.constructor=h,h.prototype.query=function(b,E,I){if(!this.intersects(b,E))return null;I.visitItem(this._item)},h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},h}(Dt),De=function(l){function h(){l.call(this),this._node1=null,this._node2=null;var b=arguments[0],E=arguments[1];this._node1=b,this._node2=E,this.buildExtent(this._node1,this._node2)}return l&&(h.__proto__=l),h.prototype=Object.create(l&&l.prototype),h.prototype.constructor=h,h.prototype.buildExtent=function(b,E){this._min=Math.min(b._min,E._min),this._max=Math.max(b._max,E._max)},h.prototype.query=function(b,E,I){if(!this.intersects(b,E))return null;this._node1!==null&&this._node1.query(b,E,I),this._node2!==null&&this._node2.query(b,E,I)},h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},h}(Dt),Xe=function(){this._leaves=new $t,this._root=null,this._level=0};Xe.prototype.buildTree=function(){Ce.sort(this._leaves,new Dt.NodeComparator);for(var l=this._leaves,h=null,b=new $t;;){if(this.buildLevel(l,b),b.size()===1)return b.get(0);h=l,l=b,b=h}},Xe.prototype.insert=function(l,h,b){if(this._root!==null)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new de(l,h,b))},Xe.prototype.query=function(l,h,b){this.init(),this._root.query(l,h,b)},Xe.prototype.buildRoot=function(){if(this._root!==null)return null;this._root=this.buildTree()},Xe.prototype.printNode=function(l){rt.out.println(kt.toLineString(new G(l._min,this._level),new G(l._max,this._level)))},Xe.prototype.init=function(){if(this._root!==null)return null;this.buildRoot()},Xe.prototype.buildLevel=function(l,h){this._level++,h.clear();for(var b=0;b<l.size();b+=2){var E=l.get(b);if((b+1<l.size()?l.get(b):null)===null)h.add(E);else{var I=new De(l.get(b),l.get(b+1));h.add(I)}}},Xe.prototype.interfaces_=function(){return[]},Xe.prototype.getClass=function(){return Xe};var _i=function(){this._items=new $t};_i.prototype.visitItem=function(l){this._items.add(l)},_i.prototype.getItems=function(){return this._items},_i.prototype.interfaces_=function(){return[Vt]},_i.prototype.getClass=function(){return _i};var Ln=function(){this._index=null;var l=arguments[0];if(!w(l,Tt))throw new S("Argument must be Polygonal");this._index=new Wn(l)},Ws={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};Ln.prototype.locate=function(l){var h=new bt(l),b=new Xs(h);return this._index.query(l.y,l.y,b),h.getLocation()},Ln.prototype.interfaces_=function(){return[Do]},Ln.prototype.getClass=function(){return Ln},Ws.SegmentVisitor.get=function(){return Xs},Ws.IntervalIndexedGeometry.get=function(){return Wn},Object.defineProperties(Ln,Ws);var Xs=function(){this._counter=null;var l=arguments[0];this._counter=l};Xs.prototype.visitItem=function(l){var h=l;this._counter.countSegment(h.getCoordinate(0),h.getCoordinate(1))},Xs.prototype.interfaces_=function(){return[Vt]},Xs.prototype.getClass=function(){return Xs};var Wn=function(){this._index=new Xe;var l=arguments[0];this.init(l)};Wn.prototype.init=function(l){for(var h=$r.getLines(l).iterator();h.hasNext();){var b=h.next().getCoordinates();this.addLine(b)}},Wn.prototype.addLine=function(l){for(var h=1;h<l.length;h++){var b=new Pe(l[h-1],l[h]),E=Math.min(b.p0.y,b.p1.y),I=Math.max(b.p0.y,b.p1.y);this._index.insert(E,I,b)}},Wn.prototype.query=function(){if(arguments.length===2){var l=arguments[0],h=arguments[1],b=new _i;return this._index.query(l,h,b),b.getItems()}if(arguments.length===3){var E=arguments[0],I=arguments[1],J=arguments[2];this._index.query(E,I,J)}},Wn.prototype.interfaces_=function(){return[]},Wn.prototype.getClass=function(){return Wn};var Mo=function(l){function h(){if(l.call(this),this._parentGeom=null,this._lineEdgeMap=new wi,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new as,arguments.length===2){var b=arguments[0],E=arguments[1],I=Xt.OGC_SFS_BOUNDARY_RULE;this._argIndex=b,this._parentGeom=E,this._boundaryNodeRule=I,E!==null&&this.add(E)}else if(arguments.length===3){var J=arguments[0],at=arguments[1],yt=arguments[2];this._argIndex=J,this._parentGeom=at,this._boundaryNodeRule=yt,at!==null&&this.add(at)}}return l&&(h.__proto__=l),h.prototype=Object.create(l&&l.prototype),h.prototype.constructor=h,h.prototype.insertBoundaryPoint=function(b,E){var I=this._nodes.addNode(E).getLabel(),J=1;N.NONE,I.getLocation(b,oe.ON)===N.BOUNDARY&&J++;var at=h.determineBoundary(this._boundaryNodeRule,J);I.setLocation(b,at)},h.prototype.computeSelfNodes=function(){if(arguments.length===2){var b=arguments[0],E=arguments[1];return this.computeSelfNodes(b,E,!1)}if(arguments.length===3){var I=arguments[0],J=arguments[1],at=arguments[2],yt=new ft(I,!0,!1);yt.setIsDoneIfProperInt(at);var St=this.createEdgeSetIntersector(),Bt=this._parentGeom instanceof Qt||this._parentGeom instanceof Ht||this._parentGeom instanceof he,Yt=J||!Bt;return St.computeIntersections(this._edges,yt,Yt),this.addSelfIntersectionNodes(this._argIndex),yt}},h.prototype.computeSplitEdges=function(b){for(var E=this._edges.iterator();E.hasNext();)E.next().eiList.addSplitEdges(b)},h.prototype.computeEdgeIntersections=function(b,E,I){var J=new ft(E,I,!0);return J.setBoundaryNodes(this.getBoundaryNodes(),b.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,b._edges,J),J},h.prototype.getGeometry=function(){return this._parentGeom},h.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},h.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},h.prototype.addPoint=function(){if(arguments[0]instanceof Mi){var b=arguments[0].getCoordinate();this.insertPoint(this._argIndex,b,N.INTERIOR)}else if(arguments[0]instanceof G){var E=arguments[0];this.insertPoint(this._argIndex,E,N.INTERIOR)}},h.prototype.addPolygon=function(b){this.addPolygonRing(b.getExteriorRing(),N.EXTERIOR,N.INTERIOR);for(var E=0;E<b.getNumInteriorRing();E++){var I=b.getInteriorRingN(E);this.addPolygonRing(I,N.INTERIOR,N.EXTERIOR)}},h.prototype.addEdge=function(b){this.insertEdge(b);var E=b.getCoordinates();this.insertPoint(this._argIndex,E[0],N.BOUNDARY),this.insertPoint(this._argIndex,E[E.length-1],N.BOUNDARY)},h.prototype.addLineString=function(b){var E=ue.removeRepeatedPoints(b.getCoordinates());if(E.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=E[0],null;var I=new _o(E,new fi(this._argIndex,N.INTERIOR));this._lineEdgeMap.put(b,I),this.insertEdge(I),Q.isTrue(E.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,E[0]),this.insertBoundaryPoint(this._argIndex,E[E.length-1])},h.prototype.getInvalidPoint=function(){return this._invalidPoint},h.prototype.getBoundaryPoints=function(){for(var b=this.getBoundaryNodes(),E=new Array(b.size()).fill(null),I=0,J=b.iterator();J.hasNext();){var at=J.next();E[I++]=at.getCoordinate().copy()}return E},h.prototype.getBoundaryNodes=function(){return this._boundaryNodes===null&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},h.prototype.addSelfIntersectionNode=function(b,E,I){if(this.isBoundaryNode(b,E))return null;I===N.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(b,E):this.insertPoint(b,E,I)},h.prototype.addPolygonRing=function(b,E,I){if(b.isEmpty())return null;var J=ue.removeRepeatedPoints(b.getCoordinates());if(J.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=J[0],null;var at=E,yt=I;Et.isCCW(J)&&(at=I,yt=E);var St=new _o(J,new fi(this._argIndex,N.BOUNDARY,at,yt));this._lineEdgeMap.put(b,St),this.insertEdge(St),this.insertPoint(this._argIndex,J[0],N.BOUNDARY)},h.prototype.insertPoint=function(b,E,I){var J=this._nodes.addNode(E),at=J.getLabel();at===null?J._label=new fi(b,I):at.setLocation(b,I)},h.prototype.createEdgeSetIntersector=function(){return new Mt},h.prototype.addSelfIntersectionNodes=function(b){for(var E=this._edges.iterator();E.hasNext();)for(var I=E.next(),J=I.getLabel().getLocation(b),at=I.eiList.iterator();at.hasNext();){var yt=at.next();this.addSelfIntersectionNode(b,yt.coord,J)}},h.prototype.add=function(){if(arguments.length!==1)return l.prototype.add.apply(this,arguments);var b=arguments[0];if(b.isEmpty())return null;if(b instanceof he&&(this._useBoundaryDeterminationRule=!1),b instanceof Ht)this.addPolygon(b);else if(b instanceof oi)this.addLineString(b);else if(b instanceof Mi)this.addPoint(b);else if(b instanceof re)this.addCollection(b);else if(b instanceof Ye)this.addCollection(b);else if(b instanceof he)this.addCollection(b);else{if(!(b instanceof fe))throw new Error(b.getClass().getName());this.addCollection(b)}},h.prototype.addCollection=function(b){for(var E=0;E<b.getNumGeometries();E++){var I=b.getGeometryN(E);this.add(I)}},h.prototype.locate=function(b){return w(this._parentGeom,Tt)&&this._parentGeom.getNumGeometries()>50?(this._areaPtLocator===null&&(this._areaPtLocator=new Ln(this._parentGeom)),this._areaPtLocator.locate(b)):this._ptLocator.locate(b,this._parentGeom)},h.prototype.findEdge=function(){if(arguments.length===1){var b=arguments[0];return this._lineEdgeMap.get(b)}return l.prototype.findEdge.apply(this,arguments)},h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},h.determineBoundary=function(b,E){return b.isInBoundary(E)?N.BOUNDARY:N.INTERIOR},h}(xt),Bo=function(){if(this._li=new lt,this._resultPrecisionModel=null,this._arg=null,arguments.length===1){var l=arguments[0];this.setComputationPrecision(l.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Mo(0,l)}else if(arguments.length===2){var h=arguments[0],b=arguments[1],E=Xt.OGC_SFS_BOUNDARY_RULE;h.getPrecisionModel().compareTo(b.getPrecisionModel())>=0?this.setComputationPrecision(h.getPrecisionModel()):this.setComputationPrecision(b.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Mo(0,h,E),this._arg[1]=new Mo(1,b,E)}else if(arguments.length===3){var I=arguments[0],J=arguments[1],at=arguments[2];I.getPrecisionModel().compareTo(J.getPrecisionModel())>=0?this.setComputationPrecision(I.getPrecisionModel()):this.setComputationPrecision(J.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Mo(0,I,at),this._arg[1]=new Mo(1,J,at)}};Bo.prototype.getArgGeometry=function(l){return this._arg[l].getGeometry()},Bo.prototype.setComputationPrecision=function(l){this._resultPrecisionModel=l,this._li.setPrecisionModel(this._resultPrecisionModel)},Bo.prototype.interfaces_=function(){return[]},Bo.prototype.getClass=function(){return Bo};var oo=function(){};oo.prototype.interfaces_=function(){return[]},oo.prototype.getClass=function(){return oo},oo.map=function(){if(arguments[0]instanceof Gt&&w(arguments[1],oo.MapOp)){for(var l=arguments[0],h=arguments[1],b=new $t,E=0;E<l.getNumGeometries();E++){var I=h.map(l.getGeometryN(E));I!==null&&b.add(I)}return l.getFactory().buildGeometry(b)}if(w(arguments[0],ce)&&w(arguments[1],oo.MapOp)){for(var J=arguments[0],at=arguments[1],yt=new $t,St=J.iterator();St.hasNext();){var Bt=St.next(),Yt=at.map(Bt);Yt!==null&&yt.add(Yt)}return yt}},oo.MapOp=function(){};var ei=function(l){function h(){var b=arguments[0],E=arguments[1];l.call(this,b,E),this._ptLocator=new as,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Xr,this._resultPolyList=new $t,this._resultLineList=new $t,this._resultPointList=new $t,this._graph=new xt(new bo),this._geomFact=b.getFactory()}return l&&(h.__proto__=l),h.prototype=Object.create(l&&l.prototype),h.prototype.constructor=h,h.prototype.insertUniqueEdge=function(b){var E=this._edgeList.findEqualEdge(b);if(E!==null){var I=E.getLabel(),J=b.getLabel();E.isPointwiseEqual(b)||(J=new fi(b.getLabel())).flip();var at=E.getDepth();at.isNull()&&at.add(I),at.add(J),I.merge(J)}else this._edgeList.add(b)},h.prototype.getGraph=function(){return this._graph},h.prototype.cancelDuplicateResultEdges=function(){for(var b=this._graph.getEdgeEnds().iterator();b.hasNext();){var E=b.next(),I=E.getSym();E.isInResult()&&I.isInResult()&&(E.setInResult(!1),I.setInResult(!1))}},h.prototype.isCoveredByLA=function(b){return!!this.isCovered(b,this._resultLineList)||!!this.isCovered(b,this._resultPolyList)},h.prototype.computeGeometry=function(b,E,I,J){var at=new $t;return at.addAll(b),at.addAll(E),at.addAll(I),at.isEmpty()?h.createEmptyResult(J,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(at)},h.prototype.mergeSymLabels=function(){for(var b=this._graph.getNodes().iterator();b.hasNext();)b.next().getEdges().mergeSymLabels()},h.prototype.isCovered=function(b,E){for(var I=E.iterator();I.hasNext();){var J=I.next();if(this._ptLocator.locate(b,J)!==N.EXTERIOR)return!0}return!1},h.prototype.replaceCollapsedEdges=function(){for(var b=new $t,E=this._edgeList.iterator();E.hasNext();){var I=E.next();I.isCollapsed()&&(E.remove(),b.add(I.getCollapsedEdge()))}this._edgeList.addAll(b)},h.prototype.updateNodeLabelling=function(){for(var b=this._graph.getNodes().iterator();b.hasNext();){var E=b.next(),I=E.getEdges().getLabel();E.getLabel().merge(I)}},h.prototype.getResultGeometry=function(b){return this.computeOverlay(b),this._resultGeom},h.prototype.insertUniqueEdges=function(b){for(var E=b.iterator();E.hasNext();){var I=E.next();this.insertUniqueEdge(I)}},h.prototype.computeOverlay=function(b){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var E=new $t;this._arg[0].computeSplitEdges(E),this._arg[1].computeSplitEdges(E),this.insertUniqueEdges(E),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),ys.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(b),this.cancelDuplicateResultEdges();var I=new Lt(this._geomFact);I.add(this._graph),this._resultPolyList=I.getPolygons();var J=new qn(this,this._geomFact,this._ptLocator);this._resultLineList=J.build(b);var at=new Ss(this,this._geomFact,this._ptLocator);this._resultPointList=at.build(b),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,b)},h.prototype.labelIncompleteNode=function(b,E){var I=this._ptLocator.locate(b.getCoordinate(),this._arg[E].getGeometry());b.getLabel().setLocation(E,I)},h.prototype.copyPoints=function(b){for(var E=this._arg[b].getNodeIterator();E.hasNext();){var I=E.next();this._graph.addNode(I.getCoordinate()).setLabel(b,I.getLabel().getLocation(b))}},h.prototype.findResultAreaEdges=function(b){for(var E=this._graph.getEdgeEnds().iterator();E.hasNext();){var I=E.next(),J=I.getLabel();J.isArea()&&!I.isInteriorAreaEdge()&&h.isResultOfOp(J.getLocation(0,oe.RIGHT),J.getLocation(1,oe.RIGHT),b)&&I.setInResult(!0)}},h.prototype.computeLabelsFromDepths=function(){for(var b=this._edgeList.iterator();b.hasNext();){var E=b.next(),I=E.getLabel(),J=E.getDepth();if(!J.isNull()){J.normalize();for(var at=0;at<2;at++)I.isNull(at)||!I.isArea()||J.isNull(at)||(J.getDelta(at)===0?I.toLine(at):(Q.isTrue(!J.isNull(at,oe.LEFT),"depth of LEFT side has not been initialized"),I.setLocation(at,oe.LEFT,J.getLocation(at,oe.LEFT)),Q.isTrue(!J.isNull(at,oe.RIGHT),"depth of RIGHT side has not been initialized"),I.setLocation(at,oe.RIGHT,J.getLocation(at,oe.RIGHT))))}}},h.prototype.computeLabelling=function(){for(var b=this._graph.getNodes().iterator();b.hasNext();)b.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},h.prototype.labelIncompleteNodes=function(){for(var b=this._graph.getNodes().iterator();b.hasNext();){var E=b.next(),I=E.getLabel();E.isIsolated()&&(I.isNull(0)?this.labelIncompleteNode(E,0):this.labelIncompleteNode(E,1)),E.getEdges().updateLabelling(I)}},h.prototype.isCoveredByA=function(b){return!!this.isCovered(b,this._resultPolyList)},h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},h}(Bo);ei.overlayOp=function(l,h,b){return new ei(l,h).getResultGeometry(b)},ei.intersection=function(l,h){if(l.isEmpty()||h.isEmpty())return ei.createEmptyResult(ei.INTERSECTION,l,h,l.getFactory());if(l.isGeometryCollection()){var b=h;return Eo.map(l,{interfaces_:function(){return[oo.MapOp]},map:function(E){return E.intersection(b)}})}return l.checkNotGeometryCollection(l),l.checkNotGeometryCollection(h),wn.overlayOp(l,h,ei.INTERSECTION)},ei.symDifference=function(l,h){if(l.isEmpty()||h.isEmpty()){if(l.isEmpty()&&h.isEmpty())return ei.createEmptyResult(ei.SYMDIFFERENCE,l,h,l.getFactory());if(l.isEmpty())return h.copy();if(h.isEmpty())return l.copy()}return l.checkNotGeometryCollection(l),l.checkNotGeometryCollection(h),wn.overlayOp(l,h,ei.SYMDIFFERENCE)},ei.resultDimension=function(l,h,b){var E=h.getDimension(),I=b.getDimension(),J=-1;switch(l){case ei.INTERSECTION:J=Math.min(E,I);break;case ei.UNION:J=Math.max(E,I);break;case ei.DIFFERENCE:J=E;break;case ei.SYMDIFFERENCE:J=Math.max(E,I)}return J},ei.createEmptyResult=function(l,h,b,E){var I=null;switch(ei.resultDimension(l,h,b)){case-1:I=E.createGeometryCollection(new Array(0).fill(null));break;case 0:I=E.createPoint();break;case 1:I=E.createLineString();break;case 2:I=E.createPolygon()}return I},ei.difference=function(l,h){return l.isEmpty()?ei.createEmptyResult(ei.DIFFERENCE,l,h,l.getFactory()):h.isEmpty()?l.copy():(l.checkNotGeometryCollection(l),l.checkNotGeometryCollection(h),wn.overlayOp(l,h,ei.DIFFERENCE))},ei.isResultOfOp=function(){if(arguments.length===2){var l=arguments[0],h=arguments[1],b=l.getLocation(0),E=l.getLocation(1);return ei.isResultOfOp(b,E,h)}if(arguments.length===3){var I=arguments[0],J=arguments[1],at=arguments[2];switch(I===N.BOUNDARY&&(I=N.INTERIOR),J===N.BOUNDARY&&(J=N.INTERIOR),at){case ei.INTERSECTION:return I===N.INTERIOR&&J===N.INTERIOR;case ei.UNION:return I===N.INTERIOR||J===N.INTERIOR;case ei.DIFFERENCE:return I===N.INTERIOR&&J!==N.INTERIOR;case ei.SYMDIFFERENCE:return I===N.INTERIOR&&J!==N.INTERIOR||I!==N.INTERIOR&&J===N.INTERIOR}return!1}},ei.INTERSECTION=1,ei.UNION=2,ei.DIFFERENCE=3,ei.SYMDIFFERENCE=4;var Ds=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new as,this._seg=new Pe;var l=arguments[0],h=arguments[1];this._g=l,this._boundaryDistanceTolerance=h,this._linework=this.extractLinework(l)};Ds.prototype.isWithinToleranceOfBoundary=function(l){for(var h=0;h<this._linework.getNumGeometries();h++)for(var b=this._linework.getGeometryN(h).getCoordinateSequence(),E=0;E<b.size()-1;E++)if(b.getCoordinate(E,this._seg.p0),b.getCoordinate(E+1,this._seg.p1),this._seg.distance(l)<=this._boundaryDistanceTolerance)return!0;return!1},Ds.prototype.getLocation=function(l){return this.isWithinToleranceOfBoundary(l)?N.BOUNDARY:this._ptLocator.locate(l,this._g)},Ds.prototype.extractLinework=function(l){var h=new Fo;l.apply(h);var b=h.getLinework(),E=Se.toLineStringArray(b);return l.getFactory().createMultiLineString(E)},Ds.prototype.interfaces_=function(){return[]},Ds.prototype.getClass=function(){return Ds};var Fo=function(){this._linework=null,this._linework=new $t};Fo.prototype.getLinework=function(){return this._linework},Fo.prototype.filter=function(l){if(l instanceof Ht){var h=l;this._linework.add(h.getExteriorRing());for(var b=0;b<h.getNumInteriorRing();b++)this._linework.add(h.getInteriorRingN(b))}},Fo.prototype.interfaces_=function(){return[$e]},Fo.prototype.getClass=function(){return Fo};var $s=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var l=arguments[0];this._g=l};$s.prototype.extractPoints=function(l,h,b){for(var E=l.getCoordinates(),I=0;I<E.length-1;I++)this.computeOffsetPoints(E[I],E[I+1],h,b)},$s.prototype.setSidesToGenerate=function(l,h){this._doLeft=l,this._doRight=h},$s.prototype.getPoints=function(l){for(var h=new $t,b=$r.getLines(this._g).iterator();b.hasNext();){var E=b.next();this.extractPoints(E,l,h)}return h},$s.prototype.computeOffsetPoints=function(l,h,b,E){var I=h.x-l.x,J=h.y-l.y,at=Math.sqrt(I*I+J*J),yt=b*I/at,St=b*J/at,Bt=(h.x+l.x)/2,Yt=(h.y+l.y)/2;if(this._doLeft){var ee=new G(Bt-St,Yt+yt);E.add(ee)}if(this._doRight){var xe=new G(Bt+St,Yt-yt);E.add(xe)}},$s.prototype.interfaces_=function(){return[]},$s.prototype.getClass=function(){return $s};var ur=function l(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=l.TOLERANCE,this._testCoords=new $t;var h=arguments[0],b=arguments[1],E=arguments[2];this._boundaryDistanceTolerance=l.computeBoundaryDistanceTolerance(h,b),this._geom=[h,b,E],this._locFinder=[new Ds(this._geom[0],this._boundaryDistanceTolerance),new Ds(this._geom[1],this._boundaryDistanceTolerance),new Ds(this._geom[2],this._boundaryDistanceTolerance)]},Jo={TOLERANCE:{configurable:!0}};ur.prototype.reportResult=function(l,h,b){rt.out.println("Overlay result invalid - A:"+N.toLocationSymbol(h[0])+" B:"+N.toLocationSymbol(h[1])+" expected:"+(b?"i":"e")+" actual:"+N.toLocationSymbol(h[2]))},ur.prototype.isValid=function(l){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var h=this.checkValid(l);return h},ur.prototype.checkValid=function(){if(arguments.length===1){for(var l=arguments[0],h=0;h<this._testCoords.size();h++){var b=this._testCoords.get(h);if(!this.checkValid(l,b))return this._invalidLocation=b,!1}return!0}if(arguments.length===2){var E=arguments[0],I=arguments[1];return this._location[0]=this._locFinder[0].getLocation(I),this._location[1]=this._locFinder[1].getLocation(I),this._location[2]=this._locFinder[2].getLocation(I),!!ur.hasLocation(this._location,N.BOUNDARY)||this.isValidResult(E,this._location)}},ur.prototype.addTestPts=function(l){var h=new $s(l);this._testCoords.addAll(h.getPoints(5*this._boundaryDistanceTolerance))},ur.prototype.isValidResult=function(l,h){var b=ei.isResultOfOp(h[0],h[1],l),E=!(b^h[2]===N.INTERIOR);return E||this.reportResult(l,h,b),E},ur.prototype.getInvalidLocation=function(){return this._invalidLocation},ur.prototype.interfaces_=function(){return[]},ur.prototype.getClass=function(){return ur},ur.hasLocation=function(l,h){for(var b=0;b<3;b++)if(l[b]===h)return!0;return!1},ur.computeBoundaryDistanceTolerance=function(l,h){return Math.min(Pr.computeSizeBasedSnapTolerance(l),Pr.computeSizeBasedSnapTolerance(h))},ur.isValid=function(l,h,b,E){return new ur(l,h,E).isValid(b)},Jo.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(ur,Jo);var Xn=function l(h){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=l.extractFactory(h),this._inputGeoms=h};Xn.prototype.extractElements=function(l,h){if(l===null)return null;for(var b=0;b<l.getNumGeometries();b++){var E=l.getGeometryN(b);this._skipEmpty&&E.isEmpty()||h.add(E)}},Xn.prototype.combine=function(){for(var l=new $t,h=this._inputGeoms.iterator();h.hasNext();){var b=h.next();this.extractElements(b,l)}return l.size()===0?this._geomFactory!==null?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(l)},Xn.prototype.interfaces_=function(){return[]},Xn.prototype.getClass=function(){return Xn},Xn.combine=function(){if(arguments.length===1){var l=arguments[0];return new Xn(l).combine()}if(arguments.length===2){var h=arguments[0],b=arguments[1];return new Xn(Xn.createList(h,b)).combine()}if(arguments.length===3){var E=arguments[0],I=arguments[1],J=arguments[2];return new Xn(Xn.createList(E,I,J)).combine()}},Xn.extractFactory=function(l){return l.isEmpty()?null:l.iterator().next().getFactory()},Xn.createList=function(){if(arguments.length===2){var l=arguments[0],h=arguments[1],b=new $t;return b.add(l),b.add(h),b}if(arguments.length===3){var E=arguments[0],I=arguments[1],J=arguments[2],at=new $t;return at.add(E),at.add(I),at.add(J),at}};var Or=function(){this._inputPolys=null,this._geomFactory=null;var l=arguments[0];this._inputPolys=l,this._inputPolys===null&&(this._inputPolys=new $t)},Xl={STRTREE_NODE_CAPACITY:{configurable:!0}};Or.prototype.reduceToGeometries=function(l){for(var h=new $t,b=l.iterator();b.hasNext();){var E=b.next(),I=null;w(E,He)?I=this.unionTree(E):E instanceof Gt&&(I=E),h.add(I)}return h},Or.prototype.extractByEnvelope=function(l,h,b){for(var E=new $t,I=0;I<h.getNumGeometries();I++){var J=h.getGeometryN(I);J.getEnvelopeInternal().intersects(l)?E.add(J):b.add(J)}return this._geomFactory.buildGeometry(E)},Or.prototype.unionOptimized=function(l,h){var b=l.getEnvelopeInternal(),E=h.getEnvelopeInternal();if(!b.intersects(E))return Xn.combine(l,h);if(l.getNumGeometries()<=1&&h.getNumGeometries()<=1)return this.unionActual(l,h);var I=b.intersection(E);return this.unionUsingEnvelopeIntersection(l,h,I)},Or.prototype.union=function(){if(this._inputPolys===null)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var l=new nn(Or.STRTREE_NODE_CAPACITY),h=this._inputPolys.iterator();h.hasNext();){var b=h.next();l.insert(b.getEnvelopeInternal(),b)}this._inputPolys=null;var E=l.itemsTree();return this.unionTree(E)},Or.prototype.binaryUnion=function(){if(arguments.length===1){var l=arguments[0];return this.binaryUnion(l,0,l.size())}if(arguments.length===3){var h=arguments[0],b=arguments[1],E=arguments[2];if(E-b<=1){var I=Or.getGeometry(h,b);return this.unionSafe(I,null)}if(E-b==2)return this.unionSafe(Or.getGeometry(h,b),Or.getGeometry(h,b+1));var J=Math.trunc((E+b)/2),at=this.binaryUnion(h,b,J),yt=this.binaryUnion(h,J,E);return this.unionSafe(at,yt)}},Or.prototype.repeatedUnion=function(l){for(var h=null,b=l.iterator();b.hasNext();){var E=b.next();h=h===null?E.copy():h.union(E)}return h},Or.prototype.unionSafe=function(l,h){return l===null&&h===null?null:l===null?h.copy():h===null?l.copy():this.unionOptimized(l,h)},Or.prototype.unionActual=function(l,h){return Or.restrictToPolygons(l.union(h))},Or.prototype.unionTree=function(l){var h=this.reduceToGeometries(l);return this.binaryUnion(h)},Or.prototype.unionUsingEnvelopeIntersection=function(l,h,b){var E=new $t,I=this.extractByEnvelope(b,l,E),J=this.extractByEnvelope(b,h,E),at=this.unionActual(I,J);return E.add(at),Xn.combine(E)},Or.prototype.bufferUnion=function(){if(arguments.length===1){var l=arguments[0];return l.get(0).getFactory().buildGeometry(l).buffer(0)}if(arguments.length===2){var h=arguments[0],b=arguments[1];return h.getFactory().createGeometryCollection([h,b]).buffer(0)}},Or.prototype.interfaces_=function(){return[]},Or.prototype.getClass=function(){return Or},Or.restrictToPolygons=function(l){if(w(l,Tt))return l;var h=Os.getPolygons(l);return h.size()===1?h.get(0):l.getFactory().createMultiPolygon(Se.toPolygonArray(h))},Or.getGeometry=function(l,h){return h>=l.size()?null:l.get(h)},Or.union=function(l){return new Or(l).union()},Xl.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Or,Xl);var So=function(){};So.prototype.interfaces_=function(){return[]},So.prototype.getClass=function(){return So},So.union=function(l,h){if(l.isEmpty()||h.isEmpty()){if(l.isEmpty()&&h.isEmpty())return ei.createEmptyResult(ei.UNION,l,h,l.getFactory());if(l.isEmpty())return h.copy();if(h.isEmpty())return l.copy()}return l.checkNotGeometryCollection(l),l.checkNotGeometryCollection(h),wn.overlayOp(l,h,ei.UNION)},e.GeoJSONReader=Tr,e.GeoJSONWriter=gn,e.OverlayOp=ei,e.UnionOp=So,e.BufferOp=Br,Object.defineProperty(e,"__esModule",{value:!0})})});var ah=qe((Ef,Cf)=>{(function(e,t){typeof Ef=="object"&&typeof Cf<"u"?Cf.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self,e.DOMPurify=t())})(Ef,function(){"use strict";let{entries:e,setPrototypeOf:t,isFrozen:n,getPrototypeOf:i,getOwnPropertyDescriptor:r}=Object,{freeze:o,seal:a,create:s}=Object,{apply:u,construct:f}=typeof Reflect<"u"&&Reflect;u||(u=function(kt,gt,ut){return kt.apply(gt,ut)}),o||(o=function(kt){return kt}),a||(a=function(kt){return kt}),f||(f=function(kt,gt){return new kt(...gt)});let c=U(Array.prototype.forEach),d=U(Array.prototype.pop),m=U(Array.prototype.push),v=U(String.prototype.toLowerCase),p=U(String.prototype.toString),_=U(String.prototype.match),y=U(String.prototype.replace),x=U(String.prototype.indexOf),S=U(String.prototype.trim),O=U(RegExp.prototype.test),B=z(TypeError);function U(vt){return function(kt){for(var gt=arguments.length,ut=new Array(gt>1?gt-1:0),Q=1;Q<gt;Q++)ut[Q-1]=arguments[Q];return u(vt,kt,ut)}}function z(vt){return function(){for(var kt=arguments.length,gt=new Array(kt),ut=0;ut<kt;ut++)gt[ut]=arguments[ut];return f(vt,gt)}}function q(vt,kt,gt){gt=gt||v,t&&t(vt,null);let ut=kt.length;for(;ut--;){let Q=kt[ut];if(typeof Q=="string"){let Y=gt(Q);Y!==Q&&(n(kt)||(kt[ut]=Y),Q=Y)}vt[Q]=!0}return vt}function G(vt){let kt=s(null);for(let[gt,ut]of e(vt))kt[gt]=ut;return kt}function tt(vt,kt){for(;vt!==null;){let ut=r(vt,kt);if(ut){if(ut.get)return U(ut.get);if(typeof ut.value=="function")return U(ut.value)}vt=i(vt)}function gt(ut){return console.warn("fallback value for",ut),null}return gt}let K=o(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),D=o(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),N=o(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Z=o(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),w=o(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),C=o(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),k=o(["#text"]),T=o(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),R=o(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),F=o(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),H=o(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),it=a(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ot=a(/<%[\w\W]*|[\w\W]*%>/gm),dt=a(/\${[\w\W]*}/gm),$=a(/^data-[\-\w.\u00B7-\uFFFF]/),ct=a(/^aria-[\-\w]+$/),W=a(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),V=a(/^(?:\w+script|data):/i),rt=a(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),mt=a(/^html$/i);var wt=Object.freeze({__proto__:null,MUSTACHE_EXPR:it,ERB_EXPR:ot,TMPLIT_EXPR:dt,DATA_ATTR:$,ARIA_ATTR:ct,IS_ALLOWED_URI:W,IS_SCRIPT_OR_DATA:V,ATTR_WHITESPACE:rt,DOCTYPE_NAME:mt});let _t=()=>typeof window>"u"?null:window,Ct=function(kt,gt){if(typeof kt!="object"||typeof kt.createPolicy!="function")return null;let ut=null,Q="data-tt-policy-suffix";gt.currentScript&&gt.currentScript.hasAttribute(Q)&&(ut=gt.currentScript.getAttribute(Q));let Y="dompurify"+(ut?"#"+ut:"");try{return kt.createPolicy(Y,{createHTML(et){return et},createScriptURL(et){return et}})}catch{return console.warn("TrustedTypes policy "+Y+" could not be created."),null}};function Ft(){let vt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_t(),kt=A=>Ft(A);if(kt.version="3.0.2",kt.removed=[],!vt||!vt.document||vt.document.nodeType!==9)return kt.isSupported=!1,kt;let gt=vt.document,{document:ut}=vt,{DocumentFragment:Q,HTMLTemplateElement:Y,Node:et,Element:lt,NodeFilter:pt,NamedNodeMap:bt=vt.NamedNodeMap||vt.MozNamedAttrMap,HTMLFormElement:Et,DOMParser:Ot,trustedTypes:zt}=vt,Gt=lt.prototype,Jt=tt(Gt,"cloneNode"),Kt=tt(Gt,"nextSibling"),ie=tt(Gt,"childNodes"),Xt=tt(Gt,"parentNode");if(typeof Y=="function"){let A=ut.createElement("template");A.content&&A.content.ownerDocument&&(ut=A.content.ownerDocument)}let Ut=Ct(zt,gt),_e=Ut?Ut.createHTML(""):"",{implementation:le,createNodeIterator:ye,createDocumentFragment:Ze,getElementsByTagName:ce}=ut,{importNode:ke}=gt,He={};kt.isSupported=typeof e=="function"&&typeof Xt=="function"&&le&&typeof le.createHTMLDocument<"u";let{MUSTACHE_EXPR:$t,ERB_EXPR:Te,TMPLIT_EXPR:bi,DATA_ATTR:ue,ARIA_ATTR:Fe,IS_SCRIPT_OR_DATA:ai,ATTR_WHITESPACE:Le}=wt,{IS_ALLOWED_URI:Oe}=wt,Qi=null,We=q({},[...K,...D,...N,...w,...k]),At=null,qt=q({},[...T,...R,...F,...H]),jt=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ae=null,Qe=null,se=!0,ve=!0,$e=!1,Ae=!0,fe=!1,Ye=!1,Ue=!1,ii=!1,Ke=!1,fr=!1,Je=!1,oi=!0,lr=!1,Mi="user-content-",Tt=!0,Ht=!1,re={},Qt=null,he=q({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Ee=null,Ie=q({},["audio","video","img","source","image","track"]),ti=null,Ge=q({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),we="http://www.w3.org/1998/Math/MathML",pe="http://www.w3.org/2000/svg",yi="http://www.w3.org/1999/xhtml",ri=yi,li=!1,wi=null,me=q({},[we,pe,yi],p),ui,yr=["application/xhtml+xml","text/html"],Ur="text/html",Se,Mn=null,jn=ut.createElement("form"),ni=function(j){return j instanceof RegExp||j instanceof Function},ze=function(j){Mn&&Mn===j||((!j||typeof j!="object")&&(j={}),j=G(j),ui=yr.indexOf(j.PARSER_MEDIA_TYPE)===-1?ui=Ur:ui=j.PARSER_MEDIA_TYPE,Se=ui==="application/xhtml+xml"?p:v,Qi="ALLOWED_TAGS"in j?q({},j.ALLOWED_TAGS,Se):We,At="ALLOWED_ATTR"in j?q({},j.ALLOWED_ATTR,Se):qt,wi="ALLOWED_NAMESPACES"in j?q({},j.ALLOWED_NAMESPACES,p):me,ti="ADD_URI_SAFE_ATTR"in j?q(G(Ge),j.ADD_URI_SAFE_ATTR,Se):Ge,Ee="ADD_DATA_URI_TAGS"in j?q(G(Ie),j.ADD_DATA_URI_TAGS,Se):Ie,Qt="FORBID_CONTENTS"in j?q({},j.FORBID_CONTENTS,Se):he,ae="FORBID_TAGS"in j?q({},j.FORBID_TAGS,Se):{},Qe="FORBID_ATTR"in j?q({},j.FORBID_ATTR,Se):{},re="USE_PROFILES"in j?j.USE_PROFILES:!1,se=j.ALLOW_ARIA_ATTR!==!1,ve=j.ALLOW_DATA_ATTR!==!1,$e=j.ALLOW_UNKNOWN_PROTOCOLS||!1,Ae=j.ALLOW_SELF_CLOSE_IN_ATTR!==!1,fe=j.SAFE_FOR_TEMPLATES||!1,Ye=j.WHOLE_DOCUMENT||!1,Ke=j.RETURN_DOM||!1,fr=j.RETURN_DOM_FRAGMENT||!1,Je=j.RETURN_TRUSTED_TYPE||!1,ii=j.FORCE_BODY||!1,oi=j.SANITIZE_DOM!==!1,lr=j.SANITIZE_NAMED_PROPS||!1,Tt=j.KEEP_CONTENT!==!1,Ht=j.IN_PLACE||!1,Oe=j.ALLOWED_URI_REGEXP||W,ri=j.NAMESPACE||yi,jt=j.CUSTOM_ELEMENT_HANDLING||{},j.CUSTOM_ELEMENT_HANDLING&&ni(j.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(jt.tagNameCheck=j.CUSTOM_ELEMENT_HANDLING.tagNameCheck),j.CUSTOM_ELEMENT_HANDLING&&ni(j.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(jt.attributeNameCheck=j.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),j.CUSTOM_ELEMENT_HANDLING&&typeof j.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(jt.allowCustomizedBuiltInElements=j.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),fe&&(ve=!1),fr&&(Ke=!0),re&&(Qi=q({},[...k]),At=[],re.html===!0&&(q(Qi,K),q(At,T)),re.svg===!0&&(q(Qi,D),q(At,R),q(At,H)),re.svgFilters===!0&&(q(Qi,N),q(At,R),q(At,H)),re.mathMl===!0&&(q(Qi,w),q(At,F),q(At,H))),j.ADD_TAGS&&(Qi===We&&(Qi=G(Qi)),q(Qi,j.ADD_TAGS,Se)),j.ADD_ATTR&&(At===qt&&(At=G(At)),q(At,j.ADD_ATTR,Se)),j.ADD_URI_SAFE_ATTR&&q(ti,j.ADD_URI_SAFE_ATTR,Se),j.FORBID_CONTENTS&&(Qt===he&&(Qt=G(Qt)),q(Qt,j.FORBID_CONTENTS,Se)),Tt&&(Qi["#text"]=!0),Ye&&q(Qi,["html","head","body"]),Qi.table&&(q(Qi,["tbody"]),delete ae.tbody),o&&o(j),Mn=j)},kr=q({},["mi","mo","mn","ms","mtext"]),Tr=q({},["foreignobject","desc","title","annotation-xml"]),gn=q({},["title","style","font","a","script"]),oe=q({},D);q(oe,N),q(oe,Z);let Rr=q({},w);q(Rr,C);let gi=function(j){let nt=Xt(j);(!nt||!nt.tagName)&&(nt={namespaceURI:ri,tagName:"template"});let ht=v(j.tagName),xt=v(nt.tagName);return wi[j.namespaceURI]?j.namespaceURI===pe?nt.namespaceURI===yi?ht==="svg":nt.namespaceURI===we?ht==="svg"&&(xt==="annotation-xml"||kr[xt]):!!oe[ht]:j.namespaceURI===we?nt.namespaceURI===yi?ht==="math":nt.namespaceURI===pe?ht==="math"&&Tr[xt]:!!Rr[ht]:j.namespaceURI===yi?nt.namespaceURI===pe&&!Tr[xt]||nt.namespaceURI===we&&!kr[xt]?!1:!Rr[ht]&&(gn[ht]||!oe[ht]):!!(ui==="application/xhtml+xml"&&wi[j.namespaceURI]):!1},vr=function(j){m(kt.removed,{element:j});try{j.parentNode.removeChild(j)}catch{j.remove()}},rn=function(j,nt){try{m(kt.removed,{attribute:nt.getAttributeNode(j),from:nt})}catch{m(kt.removed,{attribute:null,from:nt})}if(nt.removeAttribute(j),j==="is"&&!At[j])if(Ke||fr)try{vr(nt)}catch{}else try{nt.setAttribute(j,"")}catch{}},mr=function(j){let nt,ht;if(ii)j="<remove></remove>"+j;else{let Rt=_(j,/^[\r\n\t ]+/);ht=Rt&&Rt[0]}ui==="application/xhtml+xml"&&ri===yi&&(j='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+j+"</body></html>");let xt=Ut?Ut.createHTML(j):j;if(ri===yi)try{nt=new Ot().parseFromString(xt,ui)}catch{}if(!nt||!nt.documentElement){nt=le.createDocument(ri,"template",null);try{nt.documentElement.innerHTML=li?_e:xt}catch{}}let Lt=nt.body||nt.documentElement;return j&&ht&&Lt.insertBefore(ut.createTextNode(ht),Lt.childNodes[0]||null),ri===yi?ce.call(nt,Ye?"html":"body")[0]:Ye?nt.documentElement:Lt},hi=function(j){return ye.call(j.ownerDocument||j,j,pt.SHOW_ELEMENT|pt.SHOW_COMMENT|pt.SHOW_TEXT,null,!1)},fi=function(j){return j instanceof Et&&(typeof j.nodeName!="string"||typeof j.textContent!="string"||typeof j.removeChild!="function"||!(j.attributes instanceof bt)||typeof j.removeAttribute!="function"||typeof j.setAttribute!="function"||typeof j.namespaceURI!="string"||typeof j.insertBefore!="function"||typeof j.hasChildNodes!="function")},Si=function(j){return typeof et=="object"?j instanceof et:j&&typeof j=="object"&&typeof j.nodeType=="number"&&typeof j.nodeName=="string"},Vr=function(j,nt,ht){He[j]&&c(He[j],xt=>{xt.call(kt,nt,ht,Mn)})},ns=function(j){let nt;if(Vr("beforeSanitizeElements",j,null),fi(j))return vr(j),!0;let ht=Se(j.nodeName);if(Vr("uponSanitizeElement",j,{tagName:ht,allowedTags:Qi}),j.hasChildNodes()&&!Si(j.firstElementChild)&&(!Si(j.content)||!Si(j.content.firstElementChild))&&O(/<[/\w]/g,j.innerHTML)&&O(/<[/\w]/g,j.textContent))return vr(j),!0;if(!Qi[ht]||ae[ht]){if(!ae[ht]&&qr(ht)&&(jt.tagNameCheck instanceof RegExp&&O(jt.tagNameCheck,ht)||jt.tagNameCheck instanceof Function&&jt.tagNameCheck(ht)))return!1;if(Tt&&!Qt[ht]){let xt=Xt(j)||j.parentNode,Lt=ie(j)||j.childNodes;if(Lt&&xt){let Rt=Lt.length;for(let Pt=Rt-1;Pt>=0;--Pt)xt.insertBefore(Jt(Lt[Pt],!0),Kt(j))}}return vr(j),!0}return j instanceof lt&&!gi(j)||(ht==="noscript"||ht==="noembed")&&O(/<\/no(script|embed)/i,j.innerHTML)?(vr(j),!0):(fe&&j.nodeType===3&&(nt=j.textContent,nt=y(nt,$t," "),nt=y(nt,Te," "),nt=y(nt,bi," "),j.textContent!==nt&&(m(kt.removed,{element:j.cloneNode()}),j.textContent=nt)),Vr("afterSanitizeElements",j,null),!1)},je=function(j,nt,ht){if(oi&&(nt==="id"||nt==="name")&&(ht in ut||ht in jn))return!1;if(!(ve&&!Qe[nt]&&O(ue,nt))){if(!(se&&O(Fe,nt))){if(!At[nt]||Qe[nt]){if(!(qr(j)&&(jt.tagNameCheck instanceof RegExp&&O(jt.tagNameCheck,j)||jt.tagNameCheck instanceof Function&&jt.tagNameCheck(j))&&(jt.attributeNameCheck instanceof RegExp&&O(jt.attributeNameCheck,nt)||jt.attributeNameCheck instanceof Function&&jt.attributeNameCheck(nt))||nt==="is"&&jt.allowCustomizedBuiltInElements&&(jt.tagNameCheck instanceof RegExp&&O(jt.tagNameCheck,ht)||jt.tagNameCheck instanceof Function&&jt.tagNameCheck(ht))))return!1}else if(!ti[nt]){if(!O(Oe,y(ht,Le,""))){if(!((nt==="src"||nt==="xlink:href"||nt==="href")&&j!=="script"&&x(ht,"data:")===0&&Ee[j])){if(!($e&&!O(ai,y(ht,Le,"")))){if(ht)return!1}}}}}}return!0},qr=function(j){return j.indexOf("-")>0},ci=function(j){let nt,ht,xt,Lt;Vr("beforeSanitizeAttributes",j,null);let{attributes:Rt}=j;if(!Rt)return;let Pt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:At};for(Lt=Rt.length;Lt--;){nt=Rt[Lt];let{name:Nt,namespaceURI:Vt}=nt;if(ht=Nt==="value"?nt.value:S(nt.value),xt=Se(Nt),Pt.attrName=xt,Pt.attrValue=ht,Pt.keepAttr=!0,Pt.forceKeepAttr=void 0,Vr("uponSanitizeAttribute",j,Pt),ht=Pt.attrValue,Pt.forceKeepAttr||(rn(Nt,j),!Pt.keepAttr))continue;if(!Ae&&O(/\/>/i,ht)){rn(Nt,j);continue}fe&&(ht=y(ht,$t," "),ht=y(ht,Te," "),ht=y(ht,bi," "));let ne=Se(j.nodeName);if(je(ne,xt,ht)){if(lr&&(xt==="id"||xt==="name")&&(rn(Nt,j),ht=Mi+ht),Ut&&typeof zt=="object"&&typeof zt.getAttributeType=="function"&&!Vt)switch(zt.getAttributeType(ne,xt)){case"TrustedHTML":ht=Ut.createHTML(ht);break;case"TrustedScriptURL":ht=Ut.createScriptURL(ht);break}try{Vt?j.setAttributeNS(Vt,Nt,ht):j.setAttribute(Nt,ht),d(kt.removed)}catch{}}}Vr("afterSanitizeAttributes",j,null)},M=function A(j){let nt,ht=hi(j);for(Vr("beforeSanitizeShadowDOM",j,null);nt=ht.nextNode();)Vr("uponSanitizeShadowNode",nt,null),!ns(nt)&&(nt.content instanceof Q&&A(nt.content),ci(nt));Vr("afterSanitizeShadowDOM",j,null)};return kt.sanitize=function(A){let j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},nt,ht,xt,Lt;if(li=!A,li&&(A="<!-->"),typeof A!="string"&&!Si(A)){if(typeof A.toString!="function")throw B("toString is not a function");if(A=A.toString(),typeof A!="string")throw B("dirty is not a string, aborting")}if(!kt.isSupported)return A;if(Ue||ze(j),kt.removed=[],typeof A=="string"&&(Ht=!1),Ht){if(A.nodeName){let Nt=Se(A.nodeName);if(!Qi[Nt]||ae[Nt])throw B("root node is forbidden and cannot be sanitized in-place")}}else if(A instanceof et)nt=mr("<!---->"),ht=nt.ownerDocument.importNode(A,!0),ht.nodeType===1&&ht.nodeName==="BODY"||ht.nodeName==="HTML"?nt=ht:nt.appendChild(ht);else{if(!Ke&&!fe&&!Ye&&A.indexOf("<")===-1)return Ut&&Je?Ut.createHTML(A):A;if(nt=mr(A),!nt)return Ke?null:Je?_e:""}nt&&ii&&vr(nt.firstChild);let Rt=hi(Ht?A:nt);for(;xt=Rt.nextNode();)ns(xt)||(xt.content instanceof Q&&M(xt.content),ci(xt));if(Ht)return A;if(Ke){if(fr)for(Lt=Ze.call(nt.ownerDocument);nt.firstChild;)Lt.appendChild(nt.firstChild);else Lt=nt;return(At.shadowroot||At.shadowrootmod)&&(Lt=ke.call(gt,Lt,!0)),Lt}let Pt=Ye?nt.outerHTML:nt.innerHTML;return Ye&&Qi["!doctype"]&&nt.ownerDocument&&nt.ownerDocument.doctype&&nt.ownerDocument.doctype.name&&O(mt,nt.ownerDocument.doctype.name)&&(Pt="<!DOCTYPE "+nt.ownerDocument.doctype.name+`>
`+Pt),fe&&(Pt=y(Pt,$t," "),Pt=y(Pt,Te," "),Pt=y(Pt,bi," ")),Ut&&Je?Ut.createHTML(Pt):Pt},kt.setConfig=function(A){ze(A),Ue=!0},kt.clearConfig=function(){Mn=null,Ue=!1},kt.isValidAttribute=function(A,j,nt){Mn||ze({});let ht=Se(A),xt=Se(j);return je(ht,xt,nt)},kt.addHook=function(A,j){typeof j=="function"&&(He[A]=He[A]||[],m(He[A],j))},kt.removeHook=function(A){if(He[A])return d(He[A])},kt.removeHooks=function(A){He[A]&&(He[A]=[])},kt.removeAllHooks=function(){He={}},kt}var It=Ft();return It})});var A0=qe((yD,Of)=>{(function(e){if(typeof define=="function"&&define.amd)define(["leaflet"],e);else if(typeof Of<"u")Of.exports=e(ks());else{if(typeof window.L>"u")throw new Error("Leaflet must be loaded first");e(window.L)}})(function(e){return e.Control.Search=e.Control.extend({includes:e.version[0]==="1"?e.Evented.prototype:e.Mixin.Events,options:{url:"",layer:null,sourceData:null,jsonpParam:null,propertyLoc:"loc",propertyName:"title",formatData:null,filterData:null,moveToLocation:null,buildTip:null,container:"",zoom:null,minLength:1,initial:!0,casesensitive:!1,autoType:!0,delayType:400,tooltipLimit:-1,tipAutoSubmit:!0,firstTipSubmit:!1,autoResize:!0,collapsed:!0,autoCollapse:!1,autoCollapseTime:1200,textErr:"Location not found",textCancel:"Cancel",textPlaceholder:"Search...",hideMarkerOnCollapse:!1,position:"topleft",marker:{icon:!1,animate:!0,circle:{radius:10,weight:3,color:"#e03",stroke:!0,fill:!1}}},_getPath:function(t,n){let i=n.split("."),r=i.pop(),o=i.length,a=i[0],s=1;if(o>0)for(;(t=t[a])&&s<o;)a=i[s++];if(t)return t[r]},_isObject:function(t){return Object.prototype.toString.call(t)==="[object Object]"},initialize:function(t){e.Util.setOptions(this,t||{}),this._inputMinSize=this.options.textPlaceholder?this.options.textPlaceholder.length:10,this._layer=this.options.layer||new e.LayerGroup,this._filterData=this.options.filterData||this._defaultFilterData,this._formatData=this.options.formatData||this._defaultFormatData,this._moveToLocation=this.options.moveToLocation||this._defaultMoveToLocation,this._autoTypeTmp=this.options.autoType,this._countertips=0,this._recordsCache={},this._curReq=null},onAdd:function(t){return this._map=t,this._container=e.DomUtil.create("div","leaflet-control-search"),this._input=this._createInput(this.options.textPlaceholder,"search-input"),this._tooltip=this._createTooltip("search-tooltip"),this._cancel=this._createCancel(this.options.textCancel,"search-cancel"),this._button=this._createButton(this.options.textPlaceholder,"search-button"),this._alert=this._createAlert("search-alert"),this.options.collapsed===!1&&this.expand(this.options.collapsed),this.options.marker&&(this.options.marker instanceof e.Marker||this.options.marker instanceof e.CircleMarker?this._markerSearch=this.options.marker:this._isObject(this.options.marker)&&(this._markerSearch=new e.Control.Search.Marker([0,0],this.options.marker)),this._markerSearch._isMarkerSearch=!0),this.setLayer(this._layer),t.on({resize:this._handleAutoresize},this),this._container},addTo:function(t){return this.options.container?(this._container=this.onAdd(t),this._wrapper=e.DomUtil.get(this.options.container),this._wrapper.style.position="relative",this._wrapper.appendChild(this._container)):e.Control.prototype.addTo.call(this,t),this},onRemove:function(t){this._recordsCache={},t.off({resize:this._handleAutoresize},this)},setLayer:function(t){return this._layer=t,this._layer.addTo(this._map),this},showAlert:function(t){let n=this;return t=t||this.options.textErr,this._alert.style.display="block",this._alert.innerHTML=t,clearTimeout(this.timerAlert),this.timerAlert=setTimeout(function(){n.hideAlert()},this.options.autoCollapseTime),this},hideAlert:function(){return this._alert.style.display="none",this},cancel:function(){return this._input.value="",this._handleKeypress({keyCode:8}),this._input.size=this._inputMinSize,this._input.focus(),this._cancel.style.display="none",this._hideTooltip(),this.fire("search:cancel"),this},expand:function(t){return t=typeof t=="boolean"?t:!0,this._input.style.display="block",e.DomUtil.addClass(this._container,"search-exp"),t!==!1&&(this._input.focus(),this._map.on("dragstart click",this.collapse,this)),this.fire("search:expanded"),this},collapse:function(){return this._hideTooltip(),this.cancel(),this._alert.style.display="none",this._input.blur(),this.options.collapsed&&(this._input.style.display="none",this._cancel.style.display="none",e.DomUtil.removeClass(this._container,"search-exp"),this.options.hideMarkerOnCollapse&&this._map.removeLayer(this._markerSearch),this._map.off("dragstart click",this.collapse,this)),this.fire("search:collapsed"),this},collapseDelayed:function(){let t=this;return this.options.autoCollapse?(clearTimeout(this.timerCollapse),this.timerCollapse=setTimeout(function(){t.collapse()},this.options.autoCollapseTime),this):this},collapseDelayedStop:function(){return clearTimeout(this.timerCollapse),this},_createAlert:function(t){let n=e.DomUtil.create("div",t,this._container);return n.style.display="none",e.DomEvent.on(n,"click",e.DomEvent.stop,this).on(n,"click",this.hideAlert,this),n},_createInput:function(t,n){let i=this,r=e.DomUtil.create("label",n,this._container),o=e.DomUtil.create("input",n,this._container);return o.type="text",o.size=this._inputMinSize,o.value="",o.autocomplete="off",o.autocorrect="off",o.autocapitalize="off",o.placeholder=t,o.style.display="none",o.role="search",o.id=o.role+o.type+o.size,r.htmlFor=o.id,r.style.display="none",r.value=t,e.DomEvent.disableClickPropagation(o).on(o,"keyup",this._handleKeypress,this).on(o,"paste",function(a){setTimeout(function(s){i._handleKeypress(s)},10,a)},this).on(o,"blur",this.collapseDelayed,this).on(o,"focus",this.collapseDelayedStop,this),o},_createCancel:function(t,n){let i=e.DomUtil.create("a",n,this._container);return i.href="#",i.title=t,i.style.display="none",i.innerHTML="<span>&otimes;</span>",e.DomEvent.on(i,"click",e.DomEvent.stop,this).on(i,"click",this.cancel,this),i},_createButton:function(t,n){let i=e.DomUtil.create("a",n,this._container);return i.href="#",i.title=t,e.DomEvent.on(i,"click",e.DomEvent.stop,this).on(i,"click",this._handleSubmit,this).on(i,"focus",this.collapseDelayedStop,this).on(i,"blur",this.collapseDelayed,this),i},_createTooltip:function(t){let n=this,i=e.DomUtil.create("ul",t,this._container);return i.style.display="none",e.DomEvent.disableClickPropagation(i).on(i,"blur",this.collapseDelayed,this).on(i,"wheel",function(r){n.collapseDelayedStop(),e.DomEvent.stopPropagation(r)},this).on(i,"mouseover",function(r){n.collapseDelayedStop()},this),i},_createTip:function(t,n){let i;if(this.options.buildTip){if(i=this.options.buildTip.call(this,t,n),typeof i=="string"){let r=e.DomUtil.create("div");r.innerHTML=i,i=r.firstChild}}else i=e.DomUtil.create("li",""),i.innerHTML=t;return e.DomUtil.addClass(i,"search-tip"),i._text=t,this.options.tipAutoSubmit&&e.DomEvent.disableClickPropagation(i).on(i,"click",e.DomEvent.stop,this).on(i,"click",function(r){this._input.value=t,this._handleAutoresize(),this._input.focus(),this._hideTooltip(),this._handleSubmit()},this),i},_getUrl:function(t){return typeof this.options.url=="function"?this.options.url(t):this.options.url},_defaultFilterData:function(t,n){let i={};if(t=t.replace(new RegExp("[.*+?^${}()|[]\\]","g"),""),t==="")return[];let r=this.options.initial?"^":"",o=this.options.casesensitive?void 0:"i",a=new RegExp(r+t,o);for(let s in n)a.test(s)&&(i[s]=n[s]);return i},showTooltip:function(t){if(this._countertips=0,this._tooltip.innerHTML="",this._tooltip.currentSelection=-1,this.options.tooltipLimit)for(let n in t){if(this._countertips===this.options.tooltipLimit)break;this._countertips++,this._tooltip.appendChild(this._createTip(n,t[n]))}return this._countertips>0?(this._tooltip.style.display="block",this._autoTypeTmp&&this._autoType(),this._autoTypeTmp=this.options.autoType):this._hideTooltip(),this._tooltip.scrollTop=0,this._countertips},_hideTooltip:function(){return this._tooltip.style.display="none",this._tooltip.innerHTML="",0},_defaultFormatData:function(t){let n=this,i=this.options.propertyName,r=this.options.propertyLoc,o={};if(e.Util.isArray(r))for(let a in t)o[n._getPath(t[a],i)]=e.latLng(n._getPath(t[a],r[0]),n._getPath(t[a],r[1]));else for(let a in t)o[n._getPath(t[a],i)]=e.latLng(n._getPath(t[a],r));return o},_recordsFromJsonp:function(t,n){e.Control.Search.callJsonp=n;let i=e.DomUtil.create("script","leaflet-search-jsonp",document.getElementsByTagName("body")[0]),r=e.Util.template(this._getUrl(t)+"&"+this.options.jsonpParam+"=L.Control.Search.callJsonp",{s:t});return i.type="text/javascript",i.src=r,{abort:function(){i.parentNode.removeChild(i)}}},_recordsFromAjax:function(t,n){let i;try{i=new window.XMLHttpRequest}catch{throw new Error("XMLHttpRequest is not supported")}let r=e.Util.template(this._getUrl(t),{s:t});return i.open("GET",r),i.onload=function(){n(JSON.parse(i.responseText))},i.onreadystatechange=function(){i.readyState===4&&i.status===200&&this.onload()},i.send(),i},_searchInLayer:function(t,n,i){let r=this,o;t instanceof e.Control.Search.Marker||(t instanceof e.Marker||t instanceof e.CircleMarker?r._getPath(t.options,i)?(o=t.getLatLng(),o.layer=t,n[r._getPath(t.options,i)]=o):r._getPath(t.feature.properties,i)&&(o=t.getLatLng(),o.layer=t,n[r._getPath(t.feature.properties,i)]=o):t instanceof e.Path||t instanceof e.Polyline||t instanceof e.Polygon?r._getPath(t.options,i)?(o=t.getBounds().getCenter(),o.layer=t,n[r._getPath(t.options,i)]=o):r._getPath(t.feature.properties,i)&&(o=t.getBounds().getCenter(),o.layer=t,n[r._getPath(t.feature.properties,i)]=o):Object.prototype.hasOwnProperty.call(t,"feature")?Object.prototype.hasOwnProperty.call(t.feature.properties,i)&&(t.getLatLng&&typeof t.getLatLng=="function"?(o=t.getLatLng(),o.layer=t,n[t.feature.properties[i]]=o):t.getBounds&&typeof t.getBounds=="function"&&(o=t.getBounds().getCenter(),o.layer=t,n[t.feature.properties[i]]=o)):t instanceof e.LayerGroup&&t.eachLayer(function(a){r._searchInLayer(a,n,i)}))},_recordsFromLayer:function(){let t=this,n={},i=this.options.propertyName;return this._layer.eachLayer(function(r){t._searchInLayer(r,n,i)}),n},_autoType:function(){let t=this._input.value.length,n=this._tooltip.firstChild?this._tooltip.firstChild._text:"",i=n.length;if(n.indexOf(this._input.value)===0)if(this._input.value=n,this._handleAutoresize(),this._input.createTextRange){let r=this._input.createTextRange();r.collapse(!0),r.moveStart("character",t),r.moveEnd("character",i),r.select()}else this._input.setSelectionRange?this._input.setSelectionRange(t,i):this._input.selectionStart&&(this._input.selectionStart=t,this._input.selectionEnd=i)},_hideAutoType:function(){let t;if((t=this._input.selection)&&t.empty)t.empty();else if(this._input.createTextRange){t=this._input.createTextRange(),t.collapse(!0);let n=this._input.value.length;t.moveStart("character",n),t.moveEnd("character",n),t.select()}else this._input.getSelection&&this._input.getSelection().removeAllRanges(),this._input.selectionStart=this._input.selectionEnd},_handleKeypress:function(t){let n=this;switch(t.keyCode){case 27:this.collapse();break;case 13:(this._countertips===1||this.options.firstTipSubmit&&this._countertips>0)&&this._tooltip.currentSelection===-1&&this._handleArrowSelect(1),this._handleSubmit();break;case 38:this._handleArrowSelect(-1);break;case 40:this._handleArrowSelect(1);break;case 45:case 46:this._autoTypeTmp=!1;break;case 37:case 39:case 16:case 17:case 35:case 36:break;default:this._input.value.length?this._cancel.style.display="block":this._cancel.style.display="none",this._input.value.length>=this.options.minLength?(clearTimeout(this.timerKeypress),this.timerKeypress=setTimeout(function(){n._fillRecordsCache()},this.options.delayType)):this._hideTooltip()}this._handleAutoresize()},searchText:function(t){let n=t.charCodeAt(t.length);this._input.value=t,this._input.style.display="block",e.DomUtil.addClass(this._container,"search-exp"),this._autoTypeTmp=!1,this._handleKeypress({keyCode:n})},_fillRecordsCache:function(){let t=this,n=this._input.value,i;this._curReq&&this._curReq.abort&&this._curReq.abort(),e.DomUtil.addClass(this._container,"search-load"),this.options.layer?(this._recordsCache=this._recordsFromLayer(),i=this._filterData(this._input.value,this._recordsCache),this.showTooltip(i),e.DomUtil.removeClass(this._container,"search-load")):(this.options.sourceData?this._retrieveData=this.options.sourceData:this.options.url&&(this._retrieveData=this.options.jsonpParam?this._recordsFromJsonp:this._recordsFromAjax),this._curReq=this._retrieveData(this,n,function(r){t._recordsCache=t._formatData(t,r),t.options.sourceData?i=t._filterData(t._input.value,t._recordsCache):i=t._recordsCache,t.showTooltip(i),e.DomUtil.removeClass(t._container,"search-load")}))},_handleAutoresize:function(){let t;this._input.style.maxWidth!==this._map._container.offsetWidth&&(t=this._map._container.clientWidth,t-=83,this._input.style.maxWidth=t.toString()+"px"),this.options.autoResize&&this._container.offsetWidth+20<this._map._container.offsetWidth&&(this._input.size=this._input.value.length<this._inputMinSize?this._inputMinSize:this._input.value.length)},_handleArrowSelect:function(t){let n=this._tooltip.hasChildNodes()?this._tooltip.childNodes:[];for(let i=0;i<n.length;i++)e.DomUtil.removeClass(n[i],"search-tip-select");if(t===1&&this._tooltip.currentSelection>=n.length-1)e.DomUtil.addClass(n[this._tooltip.currentSelection],"search-tip-select");else if(t===-1&&this._tooltip.currentSelection<=0)this._tooltip.currentSelection=-1;else if(this._tooltip.style.display!=="none"){this._tooltip.currentSelection+=t,e.DomUtil.addClass(n[this._tooltip.currentSelection],"search-tip-select"),this._input.value=n[this._tooltip.currentSelection]._text;let i=n[this._tooltip.currentSelection].offsetTop;i+n[this._tooltip.currentSelection].clientHeight>=this._tooltip.scrollTop+this._tooltip.clientHeight?this._tooltip.scrollTop=i-this._tooltip.clientHeight+n[this._tooltip.currentSelection].clientHeight:i<=this._tooltip.scrollTop&&(this._tooltip.scrollTop=i)}},_handleSubmit:function(){if(this._hideAutoType(),this.hideAlert(),this._hideTooltip(),this._input.style.display==="none")this.expand();else if(this._input.value==="")this.collapse();else{let t=this._getLocation(this._input.value);t?(this.showLocation(t,this._input.value),this.fire("search:locationfound",{latlng:t,text:this._input.value,layer:t.layer?t.layer:null})):this.showAlert()}},_getLocation:function(t){return Object.prototype.hasOwnProperty.call(this._recordsCache,t)?this._recordsCache[t]:!1},_defaultMoveToLocation:function(t,n,i){this.options.zoom?this._map.setView(t,this.options.zoom):this._map.panTo(t)},showLocation:function(t,n){let i=this;return i._map.once("moveend zoomend",function(r){i._markerSearch&&i._markerSearch.addTo(i._map).setLatLng(t)}),i._moveToLocation(t,n,i._map),i.options.autoCollapse&&i.collapse(),i}}),e.Control.Search.Marker=e.Marker.extend({includes:e.version[0]==="1"?e.Evented.prototype:e.Mixin.Events,options:{icon:new e.Icon.Default,animate:!0,circle:{radius:10,weight:3,color:"#e03",stroke:!0,fill:!1}},initialize:function(t,n){e.setOptions(this,n),n.icon===!0&&(n.icon=new e.Icon.Default),e.Marker.prototype.initialize.call(this,t,n),e.Control.Search.prototype._isObject(this.options.circle)&&(this._circleLoc=new e.CircleMarker(t,this.options.circle))},onAdd:function(t){e.Marker.prototype.onAdd.call(this,t),this._circleLoc&&(t.addLayer(this._circleLoc),this.options.animate&&this.animate())},onRemove:function(t){e.Marker.prototype.onRemove.call(this,t),this._circleLoc&&t.removeLayer(this._circleLoc)},setLatLng:function(t){return e.Marker.prototype.setLatLng.call(this,t),this._circleLoc&&this._circleLoc.setLatLng(t),this},_initIcon:function(){this.options.icon&&e.Marker.prototype._initIcon.call(this)},_removeIcon:function(){this.options.icon&&e.Marker.prototype._removeIcon.call(this)},animate:function(){if(this._circleLoc){let t=this._circleLoc,n=200,r=parseInt(t._radius/5),o=this.options.circle.radius,a=t._radius*2,s=0;t._timerAnimLoc=setInterval(function(){s+=.5,r+=s,a-=r,t.setRadius(a),a<o&&(clearInterval(t._timerAnimLoc),t.setRadius(o))},n)}return this}}),e.Map.addInitHook(function(){this.options.searchControl&&(this.searchControl=e.control.search(this.options.searchControl),this.addControl(this.searchControl))}),e.control.search=function(t){return new e.Control.Search(t)},e.Control.Search})});var G0=qe((H0,ed)=>{(function(e){typeof H0=="object"&&typeof ed<"u"?ed.exports=e():typeof define=="function"&&define.amd?define([],e):(typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this).ExcelJS=e()})(function(){return function e(t,n,i){function r(s,u){if(!n[s]){if(!t[s]){var f=typeof rl=="function"&&rl;if(!u&&f)return f(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[s]={exports:{}};t[s][0].call(d.exports,function(m){return r(t[s][1][m]||m)},d,d.exports,e,t,n,i)}return n[s].exports}for(var o=typeof rl=="function"&&rl,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,n){"use strict";let i=e("fs"),r=e("fast-csv"),o=e("dayjs/plugin/customParseFormat"),a=e("dayjs/plugin/utc"),s=e("dayjs").extend(o).extend(a),u=e("../utils/stream-buf"),{fs:{exists:f}}=e("../utils/utils"),c={true:!0,false:!1,"#N/A":{error:"#N/A"},"#REF!":{error:"#REF!"},"#NAME?":{error:"#NAME?"},"#DIV/0!":{error:"#DIV/0!"},"#NULL!":{error:"#NULL!"},"#VALUE!":{error:"#VALUE!"},"#NUM!":{error:"#NUM!"}};t.exports=class{constructor(d){this.workbook=d,this.worksheet=null}async readFile(d,m){if(m=m||{},!await f(d))throw new Error("File not found: "+d);let v=i.createReadStream(d),p=await this.read(v,m);return v.close(),p}read(d,m){return m=m||{},new Promise((v,p)=>{let _=this.workbook.addWorksheet(m.sheetName),y=m.dateFormats||["YYYY-MM-DD[T]HH:mm:ssZ","YYYY-MM-DD[T]HH:mm:ss","MM-DD-YYYY","YYYY-MM-DD"],x=m.map||function(O){if(O==="")return null;let B=Number(O);if(!Number.isNaN(B)&&B!==1/0)return B;let U=y.reduce((q,G)=>{if(q)return q;let tt=s(O,G,!0);return tt.isValid()?tt:null},null);if(U)return new Date(U.valueOf());let z=c[O];return z!==void 0?z:O},S=r.parse(m.parserOptions).on("data",O=>{_.addRow(O.map(x))}).on("end",()=>{S.emit("worksheet",_)});S.on("worksheet",v).on("error",p),d.pipe(S)})}createInputStream(){throw new Error("`CSV#createInputStream` is deprecated. You should use `CSV#read` instead. This method will be removed in version 5.0. Please follow upgrade instruction: https://github.com/exceljs/exceljs/blob/master/UPGRADE-4.0.md")}write(d,m){return new Promise((v,p)=>{m=m||{};let _=this.workbook.getWorksheet(m.sheetName||m.sheetId),y=r.format(m.formatterOptions);d.on("finish",()=>{v()}),y.on("error",p),y.pipe(d);let{dateFormat:x,dateUTC:S}=m,O=m.map||(z=>{if(z){if(z.text||z.hyperlink)return z.hyperlink||z.text||"";if(z.formula||z.result)return z.result||"";if(z instanceof Date)return x?S?s.utc(z).format(x):s(z).format(x):S?s.utc(z).format():s(z).format();if(z.error)return z.error;if(typeof z=="object")return JSON.stringify(z)}return z}),B=m.includeEmptyRows===void 0||m.includeEmptyRows,U=1;_&&_.eachRow((z,q)=>{if(B)for(;U++<q-1;)y.write([]);let{values:G}=z;G.shift(),y.write(G.map(O)),U=q}),y.end()})}writeFile(d,m){let v={encoding:(m=m||{}).encoding||"utf8"},p=i.createWriteStream(d,v);return this.write(p,m)}async writeBuffer(d){let m=new u;return await this.write(m,d),m.read()}}},{"../utils/stream-buf":24,"../utils/utils":27,dayjs:391,"dayjs/plugin/customParseFormat":392,"dayjs/plugin/utc":393,"fast-csv":424,fs:216}],2:[function(e,t,n){"use strict";let i=e("../utils/col-cache");class r{constructor(a,s){let u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(this.worksheet=a,s)if(typeof s=="string"){let f=i.decodeAddress(s);this.nativeCol=f.col+u,this.nativeColOff=0,this.nativeRow=f.row+u,this.nativeRowOff=0}else s.nativeCol!==void 0?(this.nativeCol=s.nativeCol||0,this.nativeColOff=s.nativeColOff||0,this.nativeRow=s.nativeRow||0,this.nativeRowOff=s.nativeRowOff||0):s.col!==void 0?(this.col=s.col+u,this.row=s.row+u):(this.nativeCol=0,this.nativeColOff=0,this.nativeRow=0,this.nativeRowOff=0);else this.nativeCol=0,this.nativeColOff=0,this.nativeRow=0,this.nativeRowOff=0}static asInstance(a){return a instanceof r||a==null?a:new r(a)}get col(){return this.nativeCol+Math.min(this.colWidth-1,this.nativeColOff)/this.colWidth}set col(a){this.nativeCol=Math.floor(a),this.nativeColOff=Math.floor((a-this.nativeCol)*this.colWidth)}get row(){return this.nativeRow+Math.min(this.rowHeight-1,this.nativeRowOff)/this.rowHeight}set row(a){this.nativeRow=Math.floor(a),this.nativeRowOff=Math.floor((a-this.nativeRow)*this.rowHeight)}get colWidth(){return this.worksheet&&this.worksheet.getColumn(this.nativeCol+1)&&this.worksheet.getColumn(this.nativeCol+1).isCustomWidth?Math.floor(1e4*this.worksheet.getColumn(this.nativeCol+1).width):64e4}get rowHeight(){return this.worksheet&&this.worksheet.getRow(this.nativeRow+1)&&this.worksheet.getRow(this.nativeRow+1).height?Math.floor(1e4*this.worksheet.getRow(this.nativeRow+1).height):18e4}get model(){return{nativeCol:this.nativeCol,nativeColOff:this.nativeColOff,nativeRow:this.nativeRow,nativeRowOff:this.nativeRowOff}}set model(a){this.nativeCol=a.nativeCol,this.nativeColOff=a.nativeColOff,this.nativeRow=a.nativeRow,this.nativeRowOff=a.nativeRowOff}}t.exports=r},{"../utils/col-cache":19}],3:[function(e,t,n){"use strict";let i=e("../utils/col-cache"),r=e("../utils/under-dash"),o=e("./enums"),{slideFormula:a}=e("../utils/shared-formula"),s=e("./note");class u{constructor(d,m,v){if(!d||!m)throw new Error("A Cell needs a Row");this._row=d,this._column=m,i.validateAddress(v),this._address=v,this._value=f.create(u.Types.Null,this),this.style=this._mergeStyle(d.style,m.style,{}),this._mergeCount=0}get worksheet(){return this._row.worksheet}get workbook(){return this._row.worksheet.workbook}destroy(){delete this.style,delete this._value,delete this._row,delete this._column,delete this._address}get numFmt(){return this.style.numFmt}set numFmt(d){this.style.numFmt=d}get font(){return this.style.font}set font(d){this.style.font=d}get alignment(){return this.style.alignment}set alignment(d){this.style.alignment=d}get border(){return this.style.border}set border(d){this.style.border=d}get fill(){return this.style.fill}set fill(d){this.style.fill=d}get protection(){return this.style.protection}set protection(d){this.style.protection=d}_mergeStyle(d,m,v){let p=d&&d.numFmt||m&&m.numFmt;p&&(v.numFmt=p);let _=d&&d.font||m&&m.font;_&&(v.font=_);let y=d&&d.alignment||m&&m.alignment;y&&(v.alignment=y);let x=d&&d.border||m&&m.border;x&&(v.border=x);let S=d&&d.fill||m&&m.fill;S&&(v.fill=S);let O=d&&d.protection||m&&m.protection;return O&&(v.protection=O),v}get address(){return this._address}get row(){return this._row.number}get col(){return this._column.number}get $col$row(){return`$${this._column.letter}$${this.row}`}get type(){return this._value.type}get effectiveType(){return this._value.effectiveType}toCsvString(){return this._value.toCsvString()}addMergeRef(){this._mergeCount++}releaseMergeRef(){this._mergeCount--}get isMerged(){return this._mergeCount>0||this.type===u.Types.Merge}merge(d,m){this._value.release(),this._value=f.create(u.Types.Merge,this,d),m||(this.style=d.style)}unmerge(){this.type===u.Types.Merge&&(this._value.release(),this._value=f.create(u.Types.Null,this),this.style=this._mergeStyle(this._row.style,this._column.style,{}))}isMergedTo(d){return this._value.type===u.Types.Merge&&this._value.isMergedTo(d)}get master(){return this.type===u.Types.Merge?this._value.master:this}get isHyperlink(){return this._value.type===u.Types.Hyperlink}get hyperlink(){return this._value.hyperlink}get value(){return this._value.value}set value(d){this.type!==u.Types.Merge?(this._value.release(),this._value=f.create(f.getType(d),this,d)):this._value.master.value=d}get note(){return this._comment&&this._comment.note}set note(d){this._comment=new s(d)}get text(){return this._value.toString()}get html(){return r.escapeHtml(this.text)}toString(){return this.text}_upgradeToHyperlink(d){this.type===u.Types.String&&(this._value=f.create(u.Types.Hyperlink,this,{text:this._value.value,hyperlink:d}))}get formula(){return this._value.formula}get result(){return this._value.result}get formulaType(){return this._value.formulaType}get fullAddress(){let{worksheet:d}=this._row;return{sheetName:d.name,address:this.address,row:this.row,col:this.col}}get name(){return this.names[0]}set name(d){this.names=[d]}get names(){return this.workbook.definedNames.getNamesEx(this.fullAddress)}set names(d){let{definedNames:m}=this.workbook;m.removeAllNames(this.fullAddress),d.forEach(v=>{m.addEx(this.fullAddress,v)})}addName(d){this.workbook.definedNames.addEx(this.fullAddress,d)}removeName(d){this.workbook.definedNames.removeEx(this.fullAddress,d)}removeAllNames(){this.workbook.definedNames.removeAllNames(this.fullAddress)}get _dataValidations(){return this.worksheet.dataValidations}get dataValidation(){return this._dataValidations.find(this.address)}set dataValidation(d){this._dataValidations.add(this.address,d)}get model(){let{model:d}=this._value;return d.style=this.style,this._comment&&(d.comment=this._comment.model),d}set model(d){if(this._value.release(),this._value=f.create(d.type,this),this._value.model=d,d.comment)switch(d.comment.type){case"note":this._comment=s.fromModel(d.comment)}d.style?this.style=d.style:this.style={}}}u.Types=o.ValueType;let f={getType:c=>c==null?u.Types.Null:c instanceof String||typeof c=="string"?u.Types.String:typeof c=="number"?u.Types.Number:typeof c=="boolean"?u.Types.Boolean:c instanceof Date?u.Types.Date:c.text&&c.hyperlink?u.Types.Hyperlink:c.formula||c.sharedFormula?u.Types.Formula:c.richText?u.Types.RichText:c.sharedString?u.Types.SharedString:c.error?u.Types.Error:u.Types.JSON,types:[{t:u.Types.Null,f:class{constructor(c){this.model={address:c.address,type:u.Types.Null}}get value(){return null}set value(c){}get type(){return u.Types.Null}get effectiveType(){return u.Types.Null}get address(){return this.model.address}set address(c){this.model.address=c}toCsvString(){return""}release(){}toString(){return""}}},{t:u.Types.Number,f:class{constructor(c,d){this.model={address:c.address,type:u.Types.Number,value:d}}get value(){return this.model.value}set value(c){this.model.value=c}get type(){return u.Types.Number}get effectiveType(){return u.Types.Number}get address(){return this.model.address}set address(c){this.model.address=c}toCsvString(){return this.model.value.toString()}release(){}toString(){return this.model.value.toString()}}},{t:u.Types.String,f:class{constructor(c,d){this.model={address:c.address,type:u.Types.String,value:d}}get value(){return this.model.value}set value(c){this.model.value=c}get type(){return u.Types.String}get effectiveType(){return u.Types.String}get address(){return this.model.address}set address(c){this.model.address=c}toCsvString(){return`"${this.model.value.replace(/"/g,'""')}"`}release(){}toString(){return this.model.value}}},{t:u.Types.Date,f:class{constructor(c,d){this.model={address:c.address,type:u.Types.Date,value:d}}get value(){return this.model.value}set value(c){this.model.value=c}get type(){return u.Types.Date}get effectiveType(){return u.Types.Date}get address(){return this.model.address}set address(c){this.model.address=c}toCsvString(){return this.model.value.toISOString()}release(){}toString(){return this.model.value.toString()}}},{t:u.Types.Hyperlink,f:class{constructor(c,d){this.model={address:c.address,type:u.Types.Hyperlink,text:d?d.text:void 0,hyperlink:d?d.hyperlink:void 0},d&&d.tooltip&&(this.model.tooltip=d.tooltip)}get value(){let c={text:this.model.text,hyperlink:this.model.hyperlink};return this.model.tooltip&&(c.tooltip=this.model.tooltip),c}set value(c){this.model={text:c.text,hyperlink:c.hyperlink},c.tooltip&&(this.model.tooltip=c.tooltip)}get text(){return this.model.text}set text(c){this.model.text=c}get hyperlink(){return this.model.hyperlink}set hyperlink(c){this.model.hyperlink=c}get type(){return u.Types.Hyperlink}get effectiveType(){return u.Types.Hyperlink}get address(){return this.model.address}set address(c){this.model.address=c}toCsvString(){return this.model.hyperlink}release(){}toString(){return this.model.text}}},{t:u.Types.Formula,f:class{constructor(c,d){this.cell=c,this.model={address:c.address,type:u.Types.Formula,shareType:d?d.shareType:void 0,ref:d?d.ref:void 0,formula:d?d.formula:void 0,sharedFormula:d?d.sharedFormula:void 0,result:d?d.result:void 0}}_copyModel(c){let d={},m=v=>{let p=c[v];p&&(d[v]=p)};return m("formula"),m("result"),m("ref"),m("shareType"),m("sharedFormula"),d}get value(){return this._copyModel(this.model)}set value(c){this.model=this._copyModel(c)}validate(c){switch(f.getType(c)){case u.Types.Null:case u.Types.String:case u.Types.Number:case u.Types.Date:break;case u.Types.Hyperlink:case u.Types.Formula:default:throw new Error("Cannot process that type of result value")}}get dependencies(){return{ranges:this.formula.match(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}:[A-Z]{1,3}\d{1,4}/g),cells:this.formula.replace(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}:[A-Z]{1,3}\d{1,4}/g,"").match(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}/g)}}get formula(){return this.model.formula||this._getTranslatedFormula()}set formula(c){this.model.formula=c}get formulaType(){return this.model.formula?o.FormulaType.Master:this.model.sharedFormula?o.FormulaType.Shared:o.FormulaType.None}get result(){return this.model.result}set result(c){this.model.result=c}get type(){return u.Types.Formula}get effectiveType(){let c=this.model.result;return c==null?o.ValueType.Null:c instanceof String||typeof c=="string"?o.ValueType.String:typeof c=="number"?o.ValueType.Number:c instanceof Date?o.ValueType.Date:c.text&&c.hyperlink?o.ValueType.Hyperlink:c.formula?o.ValueType.Formula:o.ValueType.Null}get address(){return this.model.address}set address(c){this.model.address=c}_getTranslatedFormula(){if(!this._translatedFormula&&this.model.sharedFormula){let{worksheet:c}=this.cell,d=c.findCell(this.model.sharedFormula);this._translatedFormula=d&&a(d.formula,d.address,this.model.address)}return this._translatedFormula}toCsvString(){return""+(this.model.result||"")}release(){}toString(){return this.model.result?this.model.result.toString():""}}},{t:u.Types.Merge,f:class{constructor(c,d){this.model={address:c.address,type:u.Types.Merge,master:d?d.address:void 0},this._master=d,d&&d.addMergeRef()}get value(){return this._master.value}set value(c){c instanceof u?(this._master&&this._master.releaseMergeRef(),c.addMergeRef(),this._master=c):this._master.value=c}isMergedTo(c){return c===this._master}get master(){return this._master}get type(){return u.Types.Merge}get effectiveType(){return this._master.effectiveType}get address(){return this.model.address}set address(c){this.model.address=c}toCsvString(){return""}release(){this._master.releaseMergeRef()}toString(){return this.value.toString()}}},{t:u.Types.JSON,f:class{constructor(c,d){this.model={address:c.address,type:u.Types.String,value:JSON.stringify(d),rawValue:d}}get value(){return this.model.rawValue}set value(c){this.model.rawValue=c,this.model.value=JSON.stringify(c)}get type(){return u.Types.String}get effectiveType(){return u.Types.String}get address(){return this.model.address}set address(c){this.model.address=c}toCsvString(){return this.model.value}release(){}toString(){return this.model.value}}},{t:u.Types.SharedString,f:class{constructor(c,d){this.model={address:c.address,type:u.Types.SharedString,value:d}}get value(){return this.model.value}set value(c){this.model.value=c}get type(){return u.Types.SharedString}get effectiveType(){return u.Types.SharedString}get address(){return this.model.address}set address(c){this.model.address=c}toCsvString(){return this.model.value.toString()}release(){}toString(){return this.model.value.toString()}}},{t:u.Types.RichText,f:class{constructor(c,d){this.model={address:c.address,type:u.Types.String,value:d}}get value(){return this.model.value}set value(c){this.model.value=c}toString(){return this.model.value.richText.map(c=>c.text).join("")}get type(){return u.Types.RichText}get effectiveType(){return u.Types.RichText}get address(){return this.model.address}set address(c){this.model.address=c}toCsvString(){return`"${this.text.replace(/"/g,'""')}"`}release(){}}},{t:u.Types.Boolean,f:class{constructor(c,d){this.model={address:c.address,type:u.Types.Boolean,value:d}}get value(){return this.model.value}set value(c){this.model.value=c}get type(){return u.Types.Boolean}get effectiveType(){return u.Types.Boolean}get address(){return this.model.address}set address(c){this.model.address=c}toCsvString(){return this.model.value?1:0}release(){}toString(){return this.model.value.toString()}}},{t:u.Types.Error,f:class{constructor(c,d){this.model={address:c.address,type:u.Types.Error,value:d}}get value(){return this.model.value}set value(c){this.model.value=c}get type(){return u.Types.Error}get effectiveType(){return u.Types.Error}get address(){return this.model.address}set address(c){this.model.address=c}toCsvString(){return this.toString()}release(){}toString(){return this.model.value.error.toString()}}}].reduce((c,d)=>(c[d.t]=d.f,c),[]),create(c,d,m){let v=this.types[c];if(!v)throw new Error("Could not create Value of type "+c);return new v(d,m)}};t.exports=u},{"../utils/col-cache":19,"../utils/shared-formula":23,"../utils/under-dash":26,"./enums":7,"./note":9}],4:[function(e,t,n){"use strict";let i=e("../utils/under-dash"),r=e("./enums"),o=e("../utils/col-cache");class a{constructor(u,f,c){this._worksheet=u,this._number=f,c!==!1&&(this.defn=c)}get number(){return this._number}get worksheet(){return this._worksheet}get letter(){return o.n2l(this._number)}get isCustomWidth(){return this.width!==void 0&&this.width!==9}get defn(){return{header:this._header,key:this.key,width:this.width,style:this.style,hidden:this.hidden,outlineLevel:this.outlineLevel}}set defn(u){u?(this.key=u.key,this.width=u.width!==void 0?u.width:9,this.outlineLevel=u.outlineLevel,u.style?this.style=u.style:this.style={},this.header=u.header,this._hidden=!!u.hidden):(delete this._header,delete this._key,delete this.width,this.style={},this.outlineLevel=0)}get headers(){return this._header&&this._header instanceof Array?this._header:[this._header]}get header(){return this._header}set header(u){u!==void 0?(this._header=u,this.headers.forEach((f,c)=>{this._worksheet.getCell(c+1,this.number).value=f})):this._header=void 0}get key(){return this._key}set key(u){(this._key&&this._worksheet.getColumnKey(this._key))===this&&this._worksheet.deleteColumnKey(this._key),this._key=u,u&&this._worksheet.setColumnKey(this._key,this)}get hidden(){return!!this._hidden}set hidden(u){this._hidden=u}get outlineLevel(){return this._outlineLevel||0}set outlineLevel(u){this._outlineLevel=u}get collapsed(){return!!(this._outlineLevel&&this._outlineLevel>=this._worksheet.properties.outlineLevelCol)}toString(){return JSON.stringify({key:this.key,width:this.width,headers:this.headers.length?this.headers:void 0})}equivalentTo(u){return this.width===u.width&&this.hidden===u.hidden&&this.outlineLevel===u.outlineLevel&&i.isEqual(this.style,u.style)}get isDefault(){if(this.isCustomWidth||this.hidden||this.outlineLevel)return!1;let u=this.style;return!u||!(u.font||u.numFmt||u.alignment||u.border||u.fill||u.protection)}get headerCount(){return this.headers.length}eachCell(u,f){let c=this.number;f||(f=u,u=null),this._worksheet.eachRow(u,(d,m)=>{f(d.getCell(c),m)})}get values(){let u=[];return this.eachCell((f,c)=>{f&&f.type!==r.ValueType.Null&&(u[c]=f.value)}),u}set values(u){if(!u)return;let f=this.number,c=0;u.hasOwnProperty("0")&&(c=1),u.forEach((d,m)=>{this._worksheet.getCell(m+c,f).value=d})}_applyStyle(u,f){return this.style[u]=f,this.eachCell(c=>{c[u]=f}),f}get numFmt(){return this.style.numFmt}set numFmt(u){this._applyStyle("numFmt",u)}get font(){return this.style.font}set font(u){this._applyStyle("font",u)}get alignment(){return this.style.alignment}set alignment(u){this._applyStyle("alignment",u)}get protection(){return this.style.protection}set protection(u){this._applyStyle("protection",u)}get border(){return this.style.border}set border(u){this._applyStyle("border",u)}get fill(){return this.style.fill}set fill(u){this._applyStyle("fill",u)}static toModel(u){let f=[],c=null;return u&&u.forEach((d,m)=>{d.isDefault?c&&(c=null):c&&d.equivalentTo(c)?c.max=m+1:(c={min:m+1,max:m+1,width:d.width!==void 0?d.width:9,style:d.style,isCustomWidth:d.isCustomWidth,hidden:d.hidden,outlineLevel:d.outlineLevel,collapsed:d.collapsed},f.push(c))}),f.length?f:void 0}static fromModel(u,f){let c=[],d=1,m=0;for(f=(f=f||[]).sort(function(v,p){return v.min-p.min});m<f.length;){let v=f[m++];for(;d<v.min;)c.push(new a(u,d++));for(;d<=v.max;)c.push(new a(u,d++,v))}return c.length?c:null}}t.exports=a},{"../utils/col-cache":19,"../utils/under-dash":26,"./enums":7}],5:[function(e,t,n){"use strict";t.exports=class{constructor(i){this.model=i||{}}add(i,r){return this.model[i]=r}find(i){return this.model[i]}remove(i){this.model[i]=void 0}}},{}],6:[function(e,t,n){"use strict";let i=e("../utils/under-dash"),r=e("../utils/col-cache"),o=e("../utils/cell-matrix"),a=e("./range"),s=/[$](\w+)[$](\d+)(:[$](\w+)[$](\d+))?/;t.exports=class{constructor(){this.matrixMap={}}getMatrix(u){return this.matrixMap[u]||(this.matrixMap[u]=new o)}add(u,f){let c=r.decodeEx(u);this.addEx(c,f)}addEx(u,f){let c=this.getMatrix(f);if(u.top)for(let d=u.left;d<=u.right;d++)for(let m=u.top;m<=u.bottom;m++){let v={sheetName:u.sheetName,address:r.n2l(d)+m,row:m,col:d};c.addCellEx(v)}else c.addCellEx(u)}remove(u,f){let c=r.decodeEx(u);this.removeEx(c,f)}removeEx(u,f){this.getMatrix(f).removeCellEx(u)}removeAllNames(u){i.each(this.matrixMap,f=>{f.removeCellEx(u)})}forEach(u){i.each(this.matrixMap,(f,c)=>{f.forEach(d=>{u(c,d)})})}getNames(u){return this.getNamesEx(r.decodeEx(u))}getNamesEx(u){return i.map(this.matrixMap,(f,c)=>f.findCellEx(u)&&c).filter(Boolean)}_explore(u,f){f.mark=!1;let{sheetName:c}=f,d=new a(f.row,f.col,f.row,f.col,c),m,v;function p(y,x){let S=u.findCellAt(c,y,f.col);return!(!S||!S.mark)&&(d[x]=y,S.mark=!1,!0)}for(v=f.row-1;p(v,"top");v--);for(v=f.row+1;p(v,"bottom");v++);function _(y,x){let S=[];for(v=d.top;v<=d.bottom;v++){let O=u.findCellAt(c,v,y);if(!O||!O.mark)return!1;S.push(O)}d[x]=y;for(let O=0;O<S.length;O++)S[O].mark=!1;return!0}for(m=f.col-1;_(m,"left");m--);for(m=f.col+1;_(m,"right");m++);return d}getRanges(u,f){return(f=f||this.matrixMap[u])?(f.forEach(c=>{c.mark=!0}),{name:u,ranges:f.map(c=>c.mark&&this._explore(f,c)).filter(Boolean).map(c=>c.$shortRange)}):{name:u,ranges:[]}}normaliseMatrix(u,f){u.forEachInSheet(f,(c,d,m)=>{c&&(c.row===d&&c.col===m||(c.row=d,c.col=m,c.address=r.n2l(m)+d))})}spliceRows(u,f,c,d){i.each(this.matrixMap,m=>{m.spliceRows(u,f,c,d),this.normaliseMatrix(m,u)})}spliceColumns(u,f,c,d){i.each(this.matrixMap,m=>{m.spliceColumns(u,f,c,d),this.normaliseMatrix(m,u)})}get model(){return i.map(this.matrixMap,(u,f)=>this.getRanges(f,u)).filter(u=>u.ranges.length)}set model(u){let f=this.matrixMap={};u.forEach(c=>{let d=f[c.name]=new o;c.ranges.forEach(m=>{s.test(m.split("!").pop()||"")&&d.addCell(m)})})}}},{"../utils/cell-matrix":18,"../utils/col-cache":19,"../utils/under-dash":26,"./range":10}],7:[function(e,t,n){"use strict";t.exports={ValueType:{Null:0,Merge:1,Number:2,String:3,Date:4,Hyperlink:5,Formula:6,SharedString:7,RichText:8,Boolean:9,Error:10},FormulaType:{None:0,Master:1,Shared:2},RelationshipType:{None:0,OfficeDocument:1,Worksheet:2,CalcChain:3,SharedStrings:4,Styles:5,Theme:6,Hyperlink:7},DocumentType:{Xlsx:1},ReadingOrder:{LeftToRight:1,RightToLeft:2},ErrorValue:{NotApplicable:"#N/A",Ref:"#REF!",Name:"#NAME?",DivZero:"#DIV/0!",Null:"#NULL!",Value:"#VALUE!",Num:"#NUM!"}}},{}],8:[function(e,t,n){"use strict";let i=e("../utils/col-cache"),r=e("./anchor");t.exports=class{constructor(o,a){this.worksheet=o,this.model=a}get model(){switch(this.type){case"background":return{type:this.type,imageId:this.imageId};case"image":return{type:this.type,imageId:this.imageId,hyperlinks:this.range.hyperlinks,range:{tl:this.range.tl.model,br:this.range.br&&this.range.br.model,ext:this.range.ext,editAs:this.range.editAs}};default:throw new Error("Invalid Image Type")}}set model(o){let{type:a,imageId:s,range:u,hyperlinks:f}=o;if(this.type=a,this.imageId=s,a==="image")if(typeof u=="string"){let c=i.decode(u);this.range={tl:new r(this.worksheet,{col:c.left,row:c.top},-1),br:new r(this.worksheet,{col:c.right,row:c.bottom},0),editAs:"oneCell"}}else this.range={tl:new r(this.worksheet,u.tl,0),br:u.br&&new r(this.worksheet,u.br,0),ext:u.ext,editAs:u.editAs,hyperlinks:f||u.hyperlinks}}}},{"../utils/col-cache":19,"./anchor":2}],9:[function(e,t,n){"use strict";let i=e("../utils/under-dash");class r{constructor(a){this.note=a}get model(){let a=null;switch(typeof this.note){case"string":a={type:"note",note:{texts:[{text:this.note}]}};break;default:a={type:"note",note:this.note}}return i.deepMerge({},r.DEFAULT_CONFIGS,a)}set model(a){let{note:s}=a,{texts:u}=s;u.length===1&&Object.keys(u[0]).length===1?this.note=u[0].text:this.note=s}static fromModel(a){let s=new r;return s.model=a,s}}r.DEFAULT_CONFIGS={note:{margins:{insetmode:"auto",inset:[.13,.13,.25,.25]},protection:{locked:"True",lockText:"True"},editAs:"absolute"}},t.exports=r},{"../utils/under-dash":26}],10:[function(e,t,n){"use strict";let i=e("../utils/col-cache");class r{constructor(){this.decode(arguments)}setTLBR(a,s,u,f,c){if(arguments.length<4){let d=i.decodeAddress(a),m=i.decodeAddress(s);this.model={top:Math.min(d.row,m.row),left:Math.min(d.col,m.col),bottom:Math.max(d.row,m.row),right:Math.max(d.col,m.col),sheetName:u},this.setTLBR(d.row,d.col,m.row,m.col,c)}else this.model={top:Math.min(a,u),left:Math.min(s,f),bottom:Math.max(a,u),right:Math.max(s,f),sheetName:c}}decode(a){switch(a.length){case 5:this.setTLBR(a[0],a[1],a[2],a[3],a[4]);break;case 4:this.setTLBR(a[0],a[1],a[2],a[3]);break;case 3:this.setTLBR(a[0],a[1],a[2]);break;case 2:this.setTLBR(a[0],a[1]);break;case 1:{let s=a[0];if(s instanceof r)this.model={top:s.model.top,left:s.model.left,bottom:s.model.bottom,right:s.model.right,sheetName:s.sheetName};else if(s instanceof Array)this.decode(s);else if(s.top&&s.left&&s.bottom&&s.right)this.model={top:s.top,left:s.left,bottom:s.bottom,right:s.right,sheetName:s.sheetName};else{let u=i.decodeEx(s);u.top?this.model={top:u.top,left:u.left,bottom:u.bottom,right:u.right,sheetName:u.sheetName}:this.model={top:u.row,left:u.col,bottom:u.row,right:u.col,sheetName:u.sheetName}}break}case 0:this.model={top:0,left:0,bottom:0,right:0};break;default:throw new Error("Invalid number of arguments to _getDimensions() - "+a.length)}}get top(){return this.model.top||1}set top(a){this.model.top=a}get left(){return this.model.left||1}set left(a){this.model.left=a}get bottom(){return this.model.bottom||1}set bottom(a){this.model.bottom=a}get right(){return this.model.right||1}set right(a){this.model.right=a}get sheetName(){return this.model.sheetName}set sheetName(a){this.model.sheetName=a}get _serialisedSheetName(){let{sheetName:a}=this.model;return a?/^[a-zA-Z0-9]*$/.test(a)?a+"!":`'${a}'!`:""}expand(a,s,u,f){(!this.model.top||a<this.top)&&(this.top=a),(!this.model.left||s<this.left)&&(this.left=s),(!this.model.bottom||u>this.bottom)&&(this.bottom=u),(!this.model.right||f>this.right)&&(this.right=f)}expandRow(a){if(a){let{dimensions:s,number:u}=a;s&&this.expand(u,s.min,u,s.max)}}expandToAddress(a){let s=i.decodeEx(a);this.expand(s.row,s.col,s.row,s.col)}get tl(){return i.n2l(this.left)+this.top}get $t$l(){return`$${i.n2l(this.left)}$${this.top}`}get br(){return i.n2l(this.right)+this.bottom}get $b$r(){return`$${i.n2l(this.right)}$${this.bottom}`}get range(){return`${this._serialisedSheetName+this.tl}:${this.br}`}get $range(){return`${this._serialisedSheetName+this.$t$l}:${this.$b$r}`}get shortRange(){return this.count>1?this.range:this._serialisedSheetName+this.tl}get $shortRange(){return this.count>1?this.$range:this._serialisedSheetName+this.$t$l}get count(){return(1+this.bottom-this.top)*(1+this.right-this.left)}toString(){return this.range}intersects(a){return(!a.sheetName||!this.sheetName||a.sheetName===this.sheetName)&&!(a.bottom<this.top)&&!(a.top>this.bottom)&&!(a.right<this.left)&&!(a.left>this.right)}contains(a){let s=i.decodeEx(a);return this.containsEx(s)}containsEx(a){return(!a.sheetName||!this.sheetName||a.sheetName===this.sheetName)&&a.row>=this.top&&a.row<=this.bottom&&a.col>=this.left&&a.col<=this.right}forEachAddress(a){for(let s=this.left;s<=this.right;s++)for(let u=this.top;u<=this.bottom;u++)a(i.encodeAddress(u,s),u,s)}}t.exports=r},{"../utils/col-cache":19}],11:[function(e,t,n){"use strict";let i=e("../utils/under-dash"),r=e("./enums"),o=e("../utils/col-cache"),a=e("./cell");t.exports=class{constructor(s,u){this._worksheet=s,this._number=u,this._cells=[],this.style={},this.outlineLevel=0}get number(){return this._number}get worksheet(){return this._worksheet}commit(){this._worksheet._commitRow(this)}destroy(){delete this._worksheet,delete this._cells,delete this.style}findCell(s){return this._cells[s-1]}getCellEx(s){let u=this._cells[s.col-1];if(!u){let f=this._worksheet.getColumn(s.col);u=new a(this,f,s.address),this._cells[s.col-1]=u}return u}getCell(s){if(typeof s=="string"){let u=this._worksheet.getColumnKey(s);s=u?u.number:o.l2n(s)}return this._cells[s-1]||this.getCellEx({address:o.encodeAddress(this._number,s),row:this._number,col:s})}splice(s,u){let f=s+u;for(var c=arguments.length,d=new Array(c>2?c-2:0),m=2;m<c;m++)d[m-2]=arguments[m];let v=d.length-u,p=this._cells.length,_,y,x;if(v<0)for(_=s+d.length;_<=p;_++)x=this._cells[_-1],y=this._cells[_-v-1],y?(x=this.getCell(_),x.value=y.value,x.style=y.style,x._comment=y._comment):x&&(x.value=null,x.style={},x._comment=void 0);else if(v>0)for(_=p;_>=f;_--)y=this._cells[_-1],y?(x=this.getCell(_+v),x.value=y.value,x.style=y.style,x._comment=y._comment):this._cells[_+v-1]=void 0;for(_=0;_<d.length;_++)x=this.getCell(s+_),x.value=d[_],x.style={},x._comment=void 0}eachCell(s,u){if(u||(u=s,s=null),s&&s.includeEmpty){let f=this._cells.length;for(let c=1;c<=f;c++)u(this.getCell(c),c)}else this._cells.forEach((f,c)=>{f&&f.type!==r.ValueType.Null&&u(f,c+1)})}addPageBreak(s,u){let f=this._worksheet,c=Math.max(0,s-1)||0,d=Math.max(0,u-1)||16838,m={id:this._number,max:d,man:1};c&&(m.min=c),f.rowBreaks.push(m)}get values(){let s=[];return this._cells.forEach(u=>{u&&u.type!==r.ValueType.Null&&(s[u.col]=u.value)}),s}set values(s){if(this._cells=[],s)if(s instanceof Array){let u=0;s.hasOwnProperty("0")&&(u=1),s.forEach((f,c)=>{f!==void 0&&(this.getCellEx({address:o.encodeAddress(this._number,c+u),row:this._number,col:c+u}).value=f)})}else this._worksheet.eachColumnKey((u,f)=>{s[f]!==void 0&&(this.getCellEx({address:o.encodeAddress(this._number,u.number),row:this._number,col:u.number}).value=s[f])})}get hasValues(){return i.some(this._cells,s=>s&&s.type!==r.ValueType.Null)}get cellCount(){return this._cells.length}get actualCellCount(){let s=0;return this.eachCell(()=>{s++}),s}get dimensions(){let s=0,u=0;return this._cells.forEach(f=>{f&&f.type!==r.ValueType.Null&&((!s||s>f.col)&&(s=f.col),u<f.col&&(u=f.col))}),s>0?{min:s,max:u}:null}_applyStyle(s,u){return this.style[s]=u,this._cells.forEach(f=>{f&&(f[s]=u)}),u}get numFmt(){return this.style.numFmt}set numFmt(s){this._applyStyle("numFmt",s)}get font(){return this.style.font}set font(s){this._applyStyle("font",s)}get alignment(){return this.style.alignment}set alignment(s){this._applyStyle("alignment",s)}get protection(){return this.style.protection}set protection(s){this._applyStyle("protection",s)}get border(){return this.style.border}set border(s){this._applyStyle("border",s)}get fill(){return this.style.fill}set fill(s){this._applyStyle("fill",s)}get hidden(){return!!this._hidden}set hidden(s){this._hidden=s}get outlineLevel(){return this._outlineLevel||0}set outlineLevel(s){this._outlineLevel=s}get collapsed(){return!!(this._outlineLevel&&this._outlineLevel>=this._worksheet.properties.outlineLevelRow)}get model(){let s=[],u=0,f=0;return this._cells.forEach(c=>{if(c){let d=c.model;d&&((!u||u>c.col)&&(u=c.col),f<c.col&&(f=c.col),s.push(d))}}),this.height||s.length?{cells:s,number:this.number,min:u,max:f,height:this.height,style:this.style,hidden:this.hidden,outlineLevel:this.outlineLevel,collapsed:this.collapsed}:null}set model(s){if(s.number!==this._number)throw new Error("Invalid row number in model");let u;this._cells=[],s.cells.forEach(f=>{switch(f.type){case a.Types.Merge:break;default:{let c;if(f.address)c=o.decodeAddress(f.address);else if(u){let{row:d}=u,m=u.col+1;c={row:d,col:m,address:o.encodeAddress(d,m),$col$row:`$${o.n2l(m)}$${d}`}}u=c,this.getCellEx(c).model=f;break}}}),s.height?this.height=s.height:delete this.height,this.hidden=s.hidden,this.outlineLevel=s.outlineLevel||0,this.style=s.style&&JSON.parse(JSON.stringify(s.style))||{}}}},{"../utils/col-cache":19,"../utils/under-dash":26,"./cell":3,"./enums":7}],12:[function(e,t,n){"use strict";let i=e("../utils/col-cache");class r{constructor(a,s,u){this.table=a,this.column=s,this.index=u}_set(a,s){this.table.cacheState(),this.column[a]=s}get name(){return this.column.name}set name(a){this._set("name",a)}get filterButton(){return this.column.filterButton}set filterButton(a){this.column.filterButton=a}get style(){return this.column.style}set style(a){this.column.style=a}get totalsRowLabel(){return this.column.totalsRowLabel}set totalsRowLabel(a){this._set("totalsRowLabel",a)}get totalsRowFunction(){return this.column.totalsRowFunction}set totalsRowFunction(a){this._set("totalsRowFunction",a)}get totalsRowResult(){return this.column.totalsRowResult}set totalsRowResult(a){this._set("totalsRowResult",a)}get totalsRowFormula(){return this.column.totalsRowFormula}set totalsRowFormula(a){this._set("totalsRowFormula",a)}}t.exports=class{constructor(o,a){this.worksheet=o,a&&(this.table=a,this.validate(),this.store())}getFormula(o){switch(o.totalsRowFunction){case"none":return null;case"average":return`SUBTOTAL(101,${this.table.name}[${o.name}])`;case"countNums":return`SUBTOTAL(102,${this.table.name}[${o.name}])`;case"count":return`SUBTOTAL(103,${this.table.name}[${o.name}])`;case"max":return`SUBTOTAL(104,${this.table.name}[${o.name}])`;case"min":return`SUBTOTAL(105,${this.table.name}[${o.name}])`;case"stdDev":return`SUBTOTAL(106,${this.table.name}[${o.name}])`;case"var":return`SUBTOTAL(107,${this.table.name}[${o.name}])`;case"sum":return`SUBTOTAL(109,${this.table.name}[${o.name}])`;case"custom":return o.totalsRowFormula;default:throw new Error("Invalid Totals Row Function: "+o.totalsRowFunction)}}get width(){return this.table.columns.length}get height(){return this.table.rows.length}get filterHeight(){return this.height+(this.table.headerRow?1:0)}get tableHeight(){return this.filterHeight+(this.table.totalsRow?1:0)}validate(){let{table:o}=this,a=(v,p,_)=>{v[p]===void 0&&(v[p]=_)};a(o,"headerRow",!0),a(o,"totalsRow",!1),a(o,"style",{}),a(o.style,"theme","TableStyleMedium2"),a(o.style,"showFirstColumn",!1),a(o.style,"showLastColumn",!1),a(o.style,"showRowStripes",!1),a(o.style,"showColumnStripes",!1);let s=(v,p)=>{if(!v)throw new Error(p)};s(o.ref,"Table must have ref"),s(o.columns,"Table must have column definitions"),s(o.rows,"Table must have row definitions"),o.tl=i.decodeAddress(o.ref);let{row:u,col:f}=o.tl;s(u>0,"Table must be on valid row"),s(f>0,"Table must be on valid col");let{width:c,filterHeight:d,tableHeight:m}=this;o.autoFilterRef=i.encode(u,f,u+d-1,f+c-1),o.tableRef=i.encode(u,f,u+m-1,f+c-1),o.columns.forEach((v,p)=>{s(v.name,`Column ${p} must have a name`),p===0?a(v,"totalsRowLabel","Total"):(a(v,"totalsRowFunction","none"),v.totalsRowFormula=this.getFormula(v))})}store(){let o=(d,m)=>{m&&Object.keys(m).forEach(v=>{d[v]=m[v]})},{worksheet:a,table:s}=this,{row:u,col:f}=s.tl,c=0;if(s.headerRow){let d=a.getRow(u+c++);s.columns.forEach((m,v)=>{let{style:p,name:_}=m,y=d.getCell(f+v);y.value=_,o(y,p)})}if(s.rows.forEach(d=>{let m=a.getRow(u+c++);d.forEach((v,p)=>{let _=m.getCell(f+p);_.value=v,o(_,s.columns[p].style)})}),s.totalsRow){let d=a.getRow(u+c++);s.columns.forEach((m,v)=>{let p=d.getCell(f+v);if(v===0)p.value=m.totalsRowLabel;else{let _=this.getFormula(m);p.value=_?{formula:m.totalsRowFormula,result:m.totalsRowResult}:null}o(p,m.style)})}}load(o){let{table:a}=this,{row:s,col:u}=a.tl,f=0;if(a.headerRow){let c=o.getRow(s+f++);a.columns.forEach((d,m)=>{c.getCell(u+m).value=d.name})}if(a.rows.forEach(c=>{let d=o.getRow(s+f++);c.forEach((m,v)=>{d.getCell(u+v).value=m})}),a.totalsRow){let c=o.getRow(s+f++);a.columns.forEach((d,m)=>{let v=c.getCell(u+m);m===0?v.value=d.totalsRowLabel:this.getFormula(d)&&(v.value={formula:d.totalsRowFormula,result:d.totalsRowResult})})}}get model(){return this.table}set model(o){this.table=o}cacheState(){this._cache||(this._cache={ref:this.ref,width:this.width,tableHeight:this.tableHeight})}commit(){if(!this._cache)return;this.validate();let o=i.decodeAddress(this._cache.ref);if(this.ref!==this._cache.ref)for(let a=0;a<this._cache.tableHeight;a++){let s=this.worksheet.getRow(o.row+a);for(let u=0;u<this._cache.width;u++)s.getCell(o.col+u).value=null}else{for(let a=this.tableHeight;a<this._cache.tableHeight;a++){let s=this.worksheet.getRow(o.row+a);for(let u=0;u<this._cache.width;u++)s.getCell(o.col+u).value=null}for(let a=0;a<this.tableHeight;a++){let s=this.worksheet.getRow(o.row+a);for(let u=this.width;u<this._cache.width;u++)s.getCell(o.col+u).value=null}}this.store()}addRow(o,a){this.cacheState(),a===void 0?this.table.rows.push(o):this.table.rows.splice(a,0,o)}removeRows(o){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cacheState(),this.table.rows.splice(o,a)}getColumn(o){let a=this.table.columns[o];return new r(this,a,o)}addColumn(o,a,s){this.cacheState(),s===void 0?(this.table.columns.push(o),this.table.rows.forEach((u,f)=>{u.push(a[f])})):(this.table.columns.splice(s,0,o),this.table.rows.forEach((u,f)=>{u.splice(s,0,a[f])}))}removeColumns(o){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cacheState(),this.table.columns.splice(o,a),this.table.rows.forEach(s=>{s.splice(o,a)})}_assign(o,a,s){this.cacheState(),o[a]=s}get ref(){return this.table.ref}set ref(o){this._assign(this.table,"ref",o)}get name(){return this.table.name}set name(o){this.table.name=o}get displayName(){return this.table.displyName||this.table.name}set displayNamename(o){this.table.displayName=o}get headerRow(){return this.table.headerRow}set headerRow(o){this._assign(this.table,"headerRow",o)}get totalsRow(){return this.table.totalsRow}set totalsRow(o){this._assign(this.table,"totalsRow",o)}get theme(){return this.table.style.name}set theme(o){this.table.style.name=o}get showFirstColumn(){return this.table.style.showFirstColumn}set showFirstColumn(o){this.table.style.showFirstColumn=o}get showLastColumn(){return this.table.style.showLastColumn}set showLastColumn(o){this.table.style.showLastColumn=o}get showRowStripes(){return this.table.style.showRowStripes}set showRowStripes(o){this.table.style.showRowStripes=o}get showColumnStripes(){return this.table.style.showColumnStripes}set showColumnStripes(o){this.table.style.showColumnStripes=o}}},{"../utils/col-cache":19}],13:[function(e,t,n){"use strict";let i=e("./worksheet"),r=e("./defined-names"),o=e("../xlsx/xlsx"),a=e("../csv/csv");t.exports=class{constructor(){this.category="",this.company="",this.created=new Date,this.description="",this.keywords="",this.manager="",this.modified=this.created,this.properties={},this.calcProperties={},this._worksheets=[],this.subject="",this.title="",this.views=[],this.media=[],this._definedNames=new r}get xlsx(){return this._xlsx||(this._xlsx=new o(this)),this._xlsx}get csv(){return this._csv||(this._csv=new a(this)),this._csv}get nextId(){for(let s=1;s<this._worksheets.length;s++)if(!this._worksheets[s])return s;return this._worksheets.length||1}addWorksheet(s,u){let f=this.nextId;u&&(typeof u=="string"?(console.trace('tabColor argument is now deprecated. Please use workbook.addWorksheet(name, {properties: { tabColor: { argb: "rbg value" } }'),u={properties:{tabColor:{argb:u}}}):(u.argb||u.theme||u.indexed)&&(console.trace("tabColor argument is now deprecated. Please use workbook.addWorksheet(name, {properties: { tabColor: { ... } }"),u={properties:{tabColor:u}}));let c=this._worksheets.reduce((v,p)=>(p&&p.orderNo)>v?p.orderNo:v,0),d=Object.assign({},u,{id:f,name:s,orderNo:c+1,workbook:this}),m=new i(d);return this._worksheets[f]=m,m}removeWorksheetEx(s){delete this._worksheets[s.id]}removeWorksheet(s){let u=this.getWorksheet(s);u&&u.destroy()}getWorksheet(s){return s===void 0?this._worksheets.find(Boolean):typeof s=="number"?this._worksheets[s]:typeof s=="string"?this._worksheets.find(u=>u&&u.name===s):void 0}get worksheets(){return this._worksheets.slice(1).sort((s,u)=>s.orderNo-u.orderNo).filter(Boolean)}eachSheet(s){this.worksheets.forEach(u=>{s(u,u.id)})}get definedNames(){return this._definedNames}clearThemes(){this._themes=void 0}addImage(s){let u=this.media.length;return this.media.push(Object.assign({},s,{type:"image"})),u}getImage(s){return this.media[s]}get model(){return{creator:this.creator||"Unknown",lastModifiedBy:this.lastModifiedBy||"Unknown",lastPrinted:this.lastPrinted,created:this.created,modified:this.modified,properties:this.properties,worksheets:this.worksheets.map(s=>s.model),sheets:this.worksheets.map(s=>s.model).filter(Boolean),definedNames:this._definedNames.model,views:this.views,company:this.company,manager:this.manager,title:this.title,subject:this.subject,keywords:this.keywords,category:this.category,description:this.description,language:this.language,revision:this.revision,contentStatus:this.contentStatus,themes:this._themes,media:this.media,calcProperties:this.calcProperties}}set model(s){this.creator=s.creator,this.lastModifiedBy=s.lastModifiedBy,this.lastPrinted=s.lastPrinted,this.created=s.created,this.modified=s.modified,this.company=s.company,this.manager=s.manager,this.title=s.title,this.subject=s.subject,this.keywords=s.keywords,this.category=s.category,this.description=s.description,this.language=s.language,this.revision=s.revision,this.contentStatus=s.contentStatus,this.properties=s.properties,this.calcProperties=s.calcProperties,this._worksheets=[],s.worksheets.forEach(u=>{let{id:f,name:c,state:d}=u,m=s.sheets&&s.sheets.findIndex(v=>v.id===f);(this._worksheets[f]=new i({id:f,name:c,orderNo:m,state:d,workbook:this})).model=u}),this._definedNames.model=s.definedNames,this.views=s.views,this._themes=s.themes,this.media=s.media||[]}}},{"../csv/csv":1,"../xlsx/xlsx":144,"./defined-names":6,"./worksheet":14}],14:[function(e,t,n){"use strict";let i=e("../utils/under-dash"),r=e("../utils/col-cache"),o=e("./range"),a=e("./row"),s=e("./column"),u=e("./enums"),f=e("./image"),c=e("./table"),d=e("./data-validations"),m=e("../utils/encryptor"),{copyStyle:v}=e("../utils/copy-style");t.exports=class{constructor(p){p=p||{},this._workbook=p.workbook,this.id=p.id,this.orderNo=p.orderNo,this.name=p.name,this.state=p.state||"visible",this._rows=[],this._columns=null,this._keys={},this._merges={},this.rowBreaks=[],this.properties=Object.assign({},{defaultRowHeight:15,dyDescent:55,outlineLevelCol:0,outlineLevelRow:0},p.properties),this.pageSetup=Object.assign({},{margins:{left:.7,right:.7,top:.75,bottom:.75,header:.3,footer:.3},orientation:"portrait",horizontalDpi:4294967295,verticalDpi:4294967295,fitToPage:!(!p.pageSetup||!p.pageSetup.fitToWidth&&!p.pageSetup.fitToHeight||p.pageSetup.scale),pageOrder:"downThenOver",blackAndWhite:!1,draft:!1,cellComments:"None",errors:"displayed",scale:100,fitToWidth:1,fitToHeight:1,paperSize:void 0,showRowColHeaders:!1,showGridLines:!1,firstPageNumber:void 0,horizontalCentered:!1,verticalCentered:!1,rowBreaks:null,colBreaks:null},p.pageSetup),this.headerFooter=Object.assign({},{differentFirst:!1,differentOddEven:!1,oddHeader:null,oddFooter:null,evenHeader:null,evenFooter:null,firstHeader:null,firstFooter:null},p.headerFooter),this.dataValidations=new d,this.views=p.views||[],this.autoFilter=p.autoFilter||null,this._media=[],this.sheetProtection=null,this.tables={},this.conditionalFormattings=[]}get name(){return this._name}set name(p){if(p===void 0&&(p="sheet"+this.id),this._name!==p){if(typeof p!="string")throw new Error("The name has to be a string.");if(p==="")throw new Error("The name can't be empty.");if(p==="History")throw new Error('The name "History" is protected. Please use a different name.');if(/[*?:/\\[\]]/.test(p))throw new Error(`Worksheet name ${p} cannot include any of the following characters: * ? : \\ / [ ]`);if(/(^')|('$)/.test(p))throw new Error("The first or last character of worksheet name cannot be a single quotation mark: "+p);if(p&&p.length>31&&(console.warn(`Worksheet name ${p} exceeds 31 chars. This will be truncated`),p=p.substring(0,31)),this._workbook._worksheets.find(_=>_&&_.name.toLowerCase()===p.toLowerCase()))throw new Error("Worksheet name already exists: "+p);this._name=p}}get workbook(){return this._workbook}destroy(){this._workbook.removeWorksheetEx(this)}get dimensions(){let p=new o;return this._rows.forEach(_=>{if(_){let y=_.dimensions;y&&p.expand(_.number,y.min,_.number,y.max)}}),p}get columns(){return this._columns}set columns(p){this._headerRowCount=p.reduce((x,S)=>{let O=(S.header?1:S.headers&&S.headers.length)||0;return Math.max(x,O)},0);let _=1,y=this._columns=[];p.forEach(x=>{let S=new s(this,_++,!1);y.push(S),S.defn=x})}getColumnKey(p){return this._keys[p]}setColumnKey(p,_){this._keys[p]=_}deleteColumnKey(p){delete this._keys[p]}eachColumnKey(p){i.each(this._keys,p)}getColumn(p){if(typeof p=="string"){let _=this._keys[p];if(_)return _;p=r.l2n(p)}if(this._columns||(this._columns=[]),p>this._columns.length){let _=this._columns.length+1;for(;_<=p;)this._columns.push(new s(this,_++))}return this._columns[p-1]}spliceColumns(p,_){let y=this._rows.length;for(var x=arguments.length,S=new Array(x>2?x-2:0),O=2;O<x;O++)S[O-2]=arguments[O];if(S.length>0)for(let q=0;q<y;q++){let G=[p,_];S.forEach(K=>{G.push(K[q]||null)});let tt=this.getRow(q+1);tt.splice.apply(tt,G)}else this._rows.forEach(q=>{q&&q.splice(p,_)});let B=S.length-_,U=p+_,z=this._columns.length;if(B<0)for(let q=p+S.length;q<=z;q++)this.getColumn(q).defn=this.getColumn(q-B).defn;else if(B>0)for(let q=z;q>=U;q--)this.getColumn(q+B).defn=this.getColumn(q).defn;for(let q=p;q<p+S.length;q++)this.getColumn(q).defn=null;this.workbook.definedNames.spliceColumns(this.name,p,_,S.length)}get lastColumn(){return this.getColumn(this.columnCount)}get columnCount(){let p=0;return this.eachRow(_=>{p=Math.max(p,_.cellCount)}),p}get actualColumnCount(){let p=[],_=0;return this.eachRow(y=>{y.eachCell(x=>{let{col:S}=x;p[S]||(p[S]=!0,_++)})}),_}_commitRow(){}get _lastRowNumber(){let p=this._rows,_=p.length;for(;_>0&&p[_-1]===void 0;)_--;return _}get _nextRow(){return this._lastRowNumber+1}get lastRow(){if(this._rows.length)return this._rows[this._rows.length-1]}findRow(p){return this._rows[p-1]}findRows(p,_){return this._rows.slice(p-1,p-1+_)}get rowCount(){return this._lastRowNumber}get actualRowCount(){let p=0;return this.eachRow(()=>{p++}),p}getRow(p){let _=this._rows[p-1];return _||(_=this._rows[p-1]=new a(this,p)),_}getRows(p,_){if(_<1)return;let y=[];for(let x=p;x<p+_;x++)y.push(this.getRow(x));return y}addRow(p){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n",y=this._nextRow,x=this.getRow(y);return x.values=p,this._setStyleOption(y,_[0]==="i"?_:"n"),x}addRows(p){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n",y=[];return p.forEach(x=>{y.push(this.addRow(x,_))}),y}insertRow(p,_){let y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"n";return this.spliceRows(p,0,_),this._setStyleOption(p,y),this.getRow(p)}insertRows(p,_){let y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"n";if(this.spliceRows(p,0,..._),y!=="n")for(let x=0;x<_.length;x++)y[0]==="o"&&this.findRow(_.length+p+x)!==void 0?this._copyStyle(_.length+p+x,p+x,y[1]==="+"):y[0]==="i"&&this.findRow(p-1)!==void 0&&this._copyStyle(p-1,p+x,y[1]==="+");return this.getRows(p,_.length)}_setStyleOption(p){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n";_[0]==="o"&&this.findRow(p+1)!==void 0?this._copyStyle(p+1,p,_[1]==="+"):_[0]==="i"&&this.findRow(p-1)!==void 0&&this._copyStyle(p-1,p,_[1]==="+")}_copyStyle(p,_){let y=arguments.length>2&&arguments[2]!==void 0&&arguments[2],x=this.getRow(p),S=this.getRow(_);S.style=v(x.style),x.eachCell({includeEmpty:y},(O,B)=>{S.getCell(B).style=v(O.style)}),S.height=x.height}duplicateRow(p,_){let y=arguments.length>2&&arguments[2]!==void 0&&arguments[2],x=this._rows[p-1],S=new Array(_).fill(x.values);this.spliceRows(p+1,y?0:_,...S);for(let O=0;O<_;O++){let B=this._rows[p+O];B.style=x.style,B.height=x.height,x.eachCell({includeEmpty:!0},(U,z)=>{B.getCell(z).style=U.style})}}spliceRows(p,_){let y=p+_;for(var x=arguments.length,S=new Array(x>2?x-2:0),O=2;O<x;O++)S[O-2]=arguments[O];let B=S.length,U=B-_,z=this._rows.length,q,G;if(U<0)for(p===z&&(this._rows[z-1]=void 0),q=y;q<=z;q++)if(G=this._rows[q-1],G){let tt=this.getRow(q+U);tt.values=G.values,tt.style=G.style,tt.height=G.height,G.eachCell({includeEmpty:!0},(K,D)=>{tt.getCell(D).style=K.style}),this._rows[q-1]=void 0}else this._rows[q+U-1]=void 0;else if(U>0)for(q=z;q>=y;q--)if(G=this._rows[q-1],G){let tt=this.getRow(q+U);tt.values=G.values,tt.style=G.style,tt.height=G.height,G.eachCell({includeEmpty:!0},(K,D)=>{if(tt.getCell(D).style=K.style,K._value.constructor.name==="MergeValue"){let N=this.getRow(K._row._number+B).getCell(D),Z=K._value._master,w=this.getRow(Z._row._number+B).getCell(Z._column._number);N.merge(w)}})}else this._rows[q+U-1]=void 0;for(q=0;q<B;q++){let tt=this.getRow(p+q);tt.style={},tt.values=S[q]}this.workbook.definedNames.spliceRows(this.name,p,_,B)}eachRow(p,_){if(_||(_=p,p=void 0),p&&p.includeEmpty){let y=this._rows.length;for(let x=1;x<=y;x++)_(this.getRow(x),x)}else this._rows.forEach(y=>{y&&y.hasValues&&_(y,y.number)})}getSheetValues(){let p=[];return this._rows.forEach(_=>{_&&(p[_.number]=_.values)}),p}findCell(p,_){let y=r.getAddress(p,_),x=this._rows[y.row-1];return x?x.findCell(y.col):void 0}getCell(p,_){let y=r.getAddress(p,_);return this.getRow(y.row).getCellEx(y)}mergeCells(){for(var p=arguments.length,_=new Array(p),y=0;y<p;y++)_[y]=arguments[y];let x=new o(_);this._mergeCellsInternal(x)}mergeCellsWithoutStyle(){for(var p=arguments.length,_=new Array(p),y=0;y<p;y++)_[y]=arguments[y];let x=new o(_);this._mergeCellsInternal(x,!0)}_mergeCellsInternal(p,_){i.each(this._merges,x=>{if(x.intersects(p))throw new Error("Cannot merge already merged cells")});let y=this.getCell(p.top,p.left);for(let x=p.top;x<=p.bottom;x++)for(let S=p.left;S<=p.right;S++)(x>p.top||S>p.left)&&this.getCell(x,S).merge(y,_);this._merges[y.address]=p}_unMergeMaster(p){let _=this._merges[p.address];if(_){for(let y=_.top;y<=_.bottom;y++)for(let x=_.left;x<=_.right;x++)this.getCell(y,x).unmerge();delete this._merges[p.address]}}get hasMerges(){return i.some(this._merges,Boolean)}unMergeCells(){for(var p=arguments.length,_=new Array(p),y=0;y<p;y++)_[y]=arguments[y];let x=new o(_);for(let S=x.top;S<=x.bottom;S++)for(let O=x.left;O<=x.right;O++){let B=this.findCell(S,O);B&&(B.type===u.ValueType.Merge?this._unMergeMaster(B.master):this._merges[B.address]&&this._unMergeMaster(B))}}fillFormula(p,_,y){let x=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"shared",S=r.decode(p),{top:O,left:B,bottom:U,right:z}=S,q=z-B+1,G=r.encodeAddress(O,B),tt=x==="shared",K;K=typeof y=="function"?y:Array.isArray(y)?Array.isArray(y[0])?(N,Z)=>y[N-O][Z-B]:(N,Z)=>y[(N-O)*q+(Z-B)]:()=>{};let D=!0;for(let N=O;N<=U;N++)for(let Z=B;Z<=z;Z++)D?(this.getCell(N,Z).value={shareType:x,formula:_,ref:p,result:K(N,Z)},D=!1):this.getCell(N,Z).value=tt?{sharedFormula:G,result:K(N,Z)}:K(N,Z)}addImage(p,_){let y={type:"image",imageId:p,range:_};this._media.push(new f(this,y))}getImages(){return this._media.filter(p=>p.type==="image")}addBackgroundImage(p){let _={type:"background",imageId:p};this._media.push(new f(this,_))}getBackgroundImageId(){let p=this._media.find(_=>_.type==="background");return p&&p.imageId}protect(p,_){return new Promise(y=>{this.sheetProtection={sheet:!0},_&&"spinCount"in _&&(_.spinCount=Number.isFinite(_.spinCount)?Math.round(Math.max(0,_.spinCount)):1e5),p&&(this.sheetProtection.algorithmName="SHA-512",this.sheetProtection.saltValue=m.randomBytes(16).toString("base64"),this.sheetProtection.spinCount=_&&"spinCount"in _?_.spinCount:1e5,this.sheetProtection.hashValue=m.convertPasswordToHash(p,"SHA512",this.sheetProtection.saltValue,this.sheetProtection.spinCount)),_&&(this.sheetProtection=Object.assign(this.sheetProtection,_),!p&&"spinCount"in _&&delete this.sheetProtection.spinCount),y()})}unprotect(){this.sheetProtection=null}addTable(p){let _=new c(this,p);return this.tables[p.name]=_,_}getTable(p){return this.tables[p]}removeTable(p){delete this.tables[p]}getTables(){return Object.values(this.tables)}addConditionalFormatting(p){this.conditionalFormattings.push(p)}removeConditionalFormatting(p){typeof p=="number"?this.conditionalFormattings.splice(p,1):this.conditionalFormattings=p instanceof Function?this.conditionalFormattings.filter(p):[]}get tabColor(){return console.trace("worksheet.tabColor property is now deprecated. Please use worksheet.properties.tabColor"),this.properties.tabColor}set tabColor(p){console.trace("worksheet.tabColor property is now deprecated. Please use worksheet.properties.tabColor"),this.properties.tabColor=p}get model(){let p={id:this.id,name:this.name,dataValidations:this.dataValidations.model,properties:this.properties,state:this.state,pageSetup:this.pageSetup,headerFooter:this.headerFooter,rowBreaks:this.rowBreaks,views:this.views,autoFilter:this.autoFilter,media:this._media.map(x=>x.model),sheetProtection:this.sheetProtection,tables:Object.values(this.tables).map(x=>x.model),conditionalFormattings:this.conditionalFormattings};p.cols=s.toModel(this.columns);let _=p.rows=[],y=p.dimensions=new o;return this._rows.forEach(x=>{let S=x&&x.model;S&&(y.expand(S.number,S.min,S.number,S.max),_.push(S))}),p.merges=[],i.each(this._merges,x=>{p.merges.push(x.range)}),p}_parseRows(p){this._rows=[],p.rows.forEach(_=>{let y=new a(this,_.number);this._rows[y.number-1]=y,y.model=_})}_parseMergeCells(p){i.each(p.mergeCells,_=>{this.mergeCellsWithoutStyle(_)})}set model(p){this.name=p.name,this._columns=s.fromModel(this,p.cols),this._parseRows(p),this._parseMergeCells(p),this.dataValidations=new d(p.dataValidations),this.properties=p.properties,this.pageSetup=p.pageSetup,this.headerFooter=p.headerFooter,this.views=p.views,this.autoFilter=p.autoFilter,this._media=p.media.map(_=>new f(this,_)),this.sheetProtection=p.sheetProtection,this.tables=p.tables.reduce((_,y)=>{let x=new c;return x.model=y,_[y.name]=x,_},{}),this.conditionalFormattings=p.conditionalFormattings}}},{"../utils/col-cache":19,"../utils/copy-style":20,"../utils/encryptor":21,"../utils/under-dash":26,"./column":4,"./data-validations":5,"./enums":7,"./image":8,"./range":10,"./row":11,"./table":12}],15:[function(e,t,n){"use strict";e("core-js/modules/es.promise"),e("core-js/modules/es.promise.finally"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.values"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.async-iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.find-index"),e("core-js/modules/es.array.find"),e("core-js/modules/es.string.from-code-point"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.number.is-nan"),e("regenerator-runtime/runtime");let i={Workbook:e("./doc/workbook")},r=e("./doc/enums");Object.keys(r).forEach(o=>{i[o]=r[o]}),t.exports=i},{"./doc/enums":7,"./doc/workbook":13,"core-js/modules/es.array.find":359,"core-js/modules/es.array.find-index":358,"core-js/modules/es.array.includes":360,"core-js/modules/es.array.iterator":361,"core-js/modules/es.number.is-nan":363,"core-js/modules/es.object.assign":364,"core-js/modules/es.object.keys":366,"core-js/modules/es.object.values":367,"core-js/modules/es.promise":372,"core-js/modules/es.promise.finally":371,"core-js/modules/es.string.from-code-point":376,"core-js/modules/es.string.includes":377,"core-js/modules/es.symbol":381,"core-js/modules/es.symbol.async-iterator":378,"regenerator-runtime/runtime":492}],16:[function(e,t,n){"use strict";let i=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");n.bufferToString=function(r){return typeof r=="string"?r:i?i.decode(r):r.toString()}},{}],17:[function(e,t,n){"use strict";let i=typeof TextEncoder>"u"?null:new TextEncoder("utf-8"),{Buffer:r}=e("buffer");n.stringToBuffer=function(o){return typeof o!="string"?o:i?r.from(i.encode(o).buffer):r.from(o)}},{buffer:220}],18:[function(e,t,n){"use strict";let i=e("./under-dash"),r=e("./col-cache");t.exports=class{constructor(o){this.template=o,this.sheets={}}addCell(o){this.addCellEx(r.decodeEx(o))}getCell(o){return this.findCellEx(r.decodeEx(o),!0)}findCell(o){return this.findCellEx(r.decodeEx(o),!1)}findCellAt(o,a,s){let u=this.sheets[o],f=u&&u[a];return f&&f[s]}addCellEx(o){if(o.top)for(let a=o.top;a<=o.bottom;a++)for(let s=o.left;s<=o.right;s++)this.getCellAt(o.sheetName,a,s);else this.findCellEx(o,!0)}getCellEx(o){return this.findCellEx(o,!0)}findCellEx(o,a){let s=this.findSheet(o,a),u=this.findSheetRow(s,o,a);return this.findRowCell(u,o,a)}getCellAt(o,a,s){let u=this.sheets[o]||(this.sheets[o]=[]),f=u[a]||(u[a]=[]);return f[s]||(f[s]={sheetName:o,address:r.n2l(s)+a,row:a,col:s})}removeCellEx(o){let a=this.findSheet(o);if(!a)return;let s=this.findSheetRow(a,o);s&&delete s[o.col]}forEachInSheet(o,a){let s=this.sheets[o];s&&s.forEach((u,f)=>{u&&u.forEach((c,d)=>{c&&a(c,f,d)})})}forEach(o){i.each(this.sheets,(a,s)=>{this.forEachInSheet(s,o)})}map(o){let a=[];return this.forEach(s=>{a.push(o(s))}),a}findSheet(o,a){let s=o.sheetName;return this.sheets[s]?this.sheets[s]:a?this.sheets[s]=[]:void 0}findSheetRow(o,a,s){let{row:u}=a;return o&&o[u]?o[u]:s?o[u]=[]:void 0}findRowCell(o,a,s){let{col:u}=a;return o&&o[u]?o[u]:s?o[u]=this.template?Object.assign(a,JSON.parse(JSON.stringify(this.template))):a:void 0}spliceRows(o,a,s,u){let f=this.sheets[o];if(f){let c=[];for(let d=0;d<u;d++)c.push([]);f.splice(a,s,...c)}}spliceColumns(o,a,s,u){let f=this.sheets[o];if(f){let c=[];for(let d=0;d<u;d++)c.push(null);i.each(f,d=>{d.splice(a,s,...c)})}}}},{"./col-cache":19,"./under-dash":26}],19:[function(e,t,n){"use strict";let i=/^[A-Z]+\d+$/,r={_dictionary:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],_l2nFill:0,_l2n:{},_n2l:[],_level:o=>o<=26?1:o<=676?2:3,_fill(o){let a,s,u,f,c,d=1;if(o>=4)throw new Error("Out of bounds. Excel supports columns from 1 to 16384");if(this._l2nFill<1&&o>=1){for(;d<=26;)a=this._dictionary[d-1],this._n2l[d]=a,this._l2n[a]=d,d++;this._l2nFill=1}if(this._l2nFill<2&&o>=2){for(d=27;d<=702;)s=d-27,u=s%26,f=Math.floor(s/26),a=this._dictionary[f]+this._dictionary[u],this._n2l[d]=a,this._l2n[a]=d,d++;this._l2nFill=2}if(this._l2nFill<3&&o>=3){for(d=703;d<=16384;)s=d-703,u=s%26,f=Math.floor(s/26)%26,c=Math.floor(s/676),a=this._dictionary[c]+this._dictionary[f]+this._dictionary[u],this._n2l[d]=a,this._l2n[a]=d,d++;this._l2nFill=3}},l2n(o){if(this._l2n[o]||this._fill(o.length),!this._l2n[o])throw new Error("Out of bounds. Invalid column letter: "+o);return this._l2n[o]},n2l(o){if(o<1||o>16384)throw new Error(o+" is out of bounds. Excel supports columns from 1 to 16384");return this._n2l[o]||this._fill(this._level(o)),this._n2l[o]},_hash:{},validateAddress(o){if(!i.test(o))throw new Error("Invalid Address: "+o);return!0},decodeAddress(o){let a=o.length<5&&this._hash[o];if(a)return a;let s=!1,u="",f=0,c=!1,d="",m=0;for(let p,_=0;_<o.length;_++)if(p=o.charCodeAt(_),!c&&p>=65&&p<=90)s=!0,u+=o[_],f=26*f+p-64;else if(p>=48&&p<=57)c=!0,d+=o[_],m=10*m+p-48;else if(c&&s&&p!==36)break;if(s){if(f>16384)throw new Error("Out of bounds. Invalid column letter: "+u)}else f=void 0;c||(m=void 0);let v={address:o=u+d,col:f,row:m,$col$row:`$${u}$${d}`};return f<=100&&m<=100&&(this._hash[o]=v,this._hash[v.$col$row]=v),v},getAddress(o,a){if(a){let s=this.n2l(a)+o;return this.decodeAddress(s)}return this.decodeAddress(o)},decode(o){let a=o.split(":");if(a.length===2){let s=this.decodeAddress(a[0]),u=this.decodeAddress(a[1]),f={top:Math.min(s.row,u.row),left:Math.min(s.col,u.col),bottom:Math.max(s.row,u.row),right:Math.max(s.col,u.col)};return f.tl=this.n2l(f.left)+f.top,f.br=this.n2l(f.right)+f.bottom,f.dimensions=`${f.tl}:${f.br}`,f}return this.decodeAddress(o)},decodeEx(o){let a=o.match(/(?:(?:(?:'((?:[^']|'')*)')|([^'^ !]*))!)?(.*)/),s=a[1]||a[2],u=a[3],f=u.split(":");if(f.length>1){let d=this.decodeAddress(f[0]),m=this.decodeAddress(f[1]),v=Math.min(d.row,m.row),p=Math.min(d.col,m.col),_=Math.max(d.row,m.row),y=Math.max(d.col,m.col);return d=this.n2l(p)+v,m=this.n2l(y)+_,{top:v,left:p,bottom:_,right:y,sheetName:s,tl:{address:d,col:p,row:v,$col$row:`$${this.n2l(p)}$${v}`,sheetName:s},br:{address:m,col:y,row:_,$col$row:`$${this.n2l(y)}$${_}`,sheetName:s},dimensions:`${d}:${m}`}}if(u.startsWith("#"))return s?{sheetName:s,error:u}:{error:u};let c=this.decodeAddress(u);return s?{sheetName:s,...c}:c},encodeAddress:(o,a)=>r.n2l(a)+o,encode(){switch(arguments.length){case 2:return r.encodeAddress(arguments[0],arguments[1]);case 4:return`${r.encodeAddress(arguments[0],arguments[1])}:${r.encodeAddress(arguments[2],arguments[3])}`;default:throw new Error("Can only encode with 2 or 4 arguments")}},inRange(o,a){let[s,u,,f,c]=o,[d,m]=a;return d>=s&&d<=f&&m>=u&&m<=c}};t.exports=r},{}],20:[function(e,t,n){"use strict";let i=(o,a)=>({...o,...a.reduce((s,u)=>(o[u]&&(s[u]={...o[u]}),s),{})}),r=function(o,a,s){let u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];o[s]&&(a[s]=i(o[s],u))};n.copyStyle=o=>{if(!o)return o;if(a=o,Object.keys(a).length===0)return{};var a;let s={...o};return r(o,s,"font",["color"]),r(o,s,"alignment"),r(o,s,"protection"),o.border&&(r(o,s,"border"),r(o.border,s.border,"top",["color"]),r(o.border,s.border,"left",["color"]),r(o.border,s.border,"bottom",["color"]),r(o.border,s.border,"right",["color"]),r(o.border,s.border,"diagonal",["color"])),o.fill&&(r(o,s,"fill",["fgColor","bgColor","center"]),o.fill.stops&&(s.fill.stops=o.fill.stops.map(u=>i(u,["color"])))),s}},{}],21:[function(e,t,n){(function(i){(function(){"use strict";let r=e("crypto"),o={hash(a){let s=r.createHash(a);for(var u=arguments.length,f=new Array(u>1?u-1:0),c=1;c<u;c++)f[c-1]=arguments[c];return s.update(i.concat(f)),s.digest()},convertPasswordToHash(a,s,u,f){if(s=s.toLowerCase(),r.getHashes().indexOf(s)<0)throw new Error(`Hash algorithm '${s}' not supported!`);let c=i.from(a,"utf16le"),d=this.hash(s,i.from(u,"base64"),c);for(let m=0;m<f;m++){let v=i.alloc(4);v.writeUInt32LE(m,0),d=this.hash(s,d,v)}return d.toString("base64")},randomBytes:a=>r.randomBytes(a)};t.exports=o}).call(this)}).call(this,e("buffer").Buffer)},{buffer:220,crypto:390}],22:[function(e,t,n){"use strict";let{SaxesParser:i}=e("saxes"),{PassThrough:r}=e("readable-stream"),{bufferToString:o}=e("./browser-buffer-decode");t.exports=async function*(a){a.pipe&&!a[Symbol.asyncIterator]&&(a=a.pipe(new r));let s=new i,u;s.on("error",c=>{u=c});let f=[];s.on("opentag",c=>f.push({eventType:"opentag",value:c})),s.on("text",c=>f.push({eventType:"text",value:c})),s.on("closetag",c=>f.push({eventType:"closetag",value:c}));for await(let c of a){if(s.write(o(c)),u)throw u;yield f,f=[]}}},{"./browser-buffer-decode":16,"readable-stream":491,saxes:496}],23:[function(e,t,n){"use strict";let i=e("./col-cache"),r=/(([a-z_\-0-9]*)!)?([a-z0-9_$]{2,})([(])?/gi,o=/^([$])?([a-z]+)([$])?([1-9][0-9]*)$/i;t.exports={slideFormula:function(a,s,u){let f=i.decode(s),c=i.decode(u);return a.replace(r,(d,m,v,p,_)=>{if(_)return d;let y=o.exec(p);if(y){let x=y[1],S=y[2].toUpperCase(),O=y[3],B=y[4];if(S.length>3||S.length===3&&S>"XFD")return d;let U=i.l2n(S),z=parseInt(B,10);return x||(U+=c.col-f.col),O||(z+=c.row-f.row),(m||"")+(x||"")+i.n2l(U)+(O||"")+z}return d})}}},{"./col-cache":19}],24:[function(e,t,n){(function(i,r){(function(){"use strict";let o=e("readable-stream"),a=e("./utils"),s=e("./string-buf");class u{constructor(p,_){this._data=p,this._encoding=_}get length(){return this.toBuffer().length}copy(p,_,y,x){return this.toBuffer().copy(p,_,y,x)}toBuffer(){return this._buffer||(this._buffer=r.from(this._data,this._encoding)),this._buffer}}class f{constructor(p){this._data=p}get length(){return this._data.length}copy(p,_,y,x){return this._data._buf.copy(p,_,y,x)}toBuffer(){return this._data.toBuffer()}}class c{constructor(p){this._data=p}get length(){return this._data.length}copy(p,_,y,x){this._data.copy(p,_,y,x)}toBuffer(){return this._data}}class d{constructor(p){this.size=p,this.buffer=r.alloc(p),this.iRead=0,this.iWrite=0}toBuffer(){if(this.iRead===0&&this.iWrite===this.size)return this.buffer;let p=r.alloc(this.iWrite-this.iRead);return this.buffer.copy(p,0,this.iRead,this.iWrite),p}get length(){return this.iWrite-this.iRead}get eod(){return this.iRead===this.iWrite}get full(){return this.iWrite===this.size}read(p){let _;return p===0?null:p===void 0||p>=this.length?(_=this.toBuffer(),this.iRead=this.iWrite,_):(_=r.alloc(p),this.buffer.copy(_,0,this.iRead,p),this.iRead+=p,_)}write(p,_,y){let x=Math.min(y,this.size-this.iWrite);return p.copy(this.buffer,this.iWrite,_,_+x),this.iWrite+=x,x}}let m=function(v){v=v||{},this.bufSize=v.bufSize||1048576,this.buffers=[],this.batch=v.batch||!1,this.corked=!1,this.inPos=0,this.outPos=0,this.pipes=[],this.paused=!1,this.encoding=null};a.inherits(m,o.Duplex,{toBuffer(){switch(this.buffers.length){case 0:return null;case 1:return this.buffers[0].toBuffer();default:return r.concat(this.buffers.map(v=>v.toBuffer()))}},_getWritableBuffer(){if(this.buffers.length){let p=this.buffers[this.buffers.length-1];if(!p.full)return p}let v=new d(this.bufSize);return this.buffers.push(v),v},async _pipe(v){await Promise.all(this.pipes.map(function(p){return new Promise(_=>{p.write(v.toBuffer(),()=>{_()})})}))},_writeToBuffers(v){let p=0,_=v.length;for(;p<_;)p+=this._getWritableBuffer().write(v,p,_-p)},async write(v,p,_){let y;if(p instanceof Function&&(_=p,p="utf8"),_=_||a.nop,v instanceof s)y=new f(v);else if(v instanceof r)y=new c(v);else{if(!(typeof v=="string"||v instanceof String||v instanceof ArrayBuffer))throw new Error("Chunk must be one of type String, Buffer or StringBuf.");y=new u(v,p)}if(this.pipes.length)if(this.batch)for(this._writeToBuffers(y);!this.corked&&this.buffers.length>1;)this._pipe(this.buffers.shift());else this.corked?(this._writeToBuffers(y),i.nextTick(_)):(await this._pipe(y),_());else this.paused||this.emit("data",y.toBuffer()),this._writeToBuffers(y),this.emit("readable");return!0},cork(){this.corked=!0},_flush(){if(this.pipes.length)for(;this.buffers.length;)this._pipe(this.buffers.shift())},uncork(){this.corked=!1,this._flush()},end(v,p,_){let y=x=>{x?_(x):(this._flush(),this.pipes.forEach(S=>{S.end()}),this.emit("finish"))};v?this.write(v,p,y):y()},read(v){let p;if(v){for(p=[];v&&this.buffers.length&&!this.buffers[0].eod;){let _=this.buffers[0],y=_.read(v);v-=y.length,p.push(y),_.eod&&_.full&&this.buffers.shift()}return r.concat(p)}return p=this.buffers.map(_=>_.toBuffer()).filter(Boolean),this.buffers=[],r.concat(p)},setEncoding(v){this.encoding=v},pause(){this.paused=!0},resume(){this.paused=!1},isPaused(){return!!this.paused},pipe(v){this.pipes.push(v),!this.paused&&this.buffers.length&&this.end()},unpipe(v){this.pipes=this.pipes.filter(p=>p!==v)},unshift(){throw new Error("Not Implemented")},wrap(){throw new Error("Not Implemented")}}),t.exports=m}).call(this)}).call(this,e("_process"),e("buffer").Buffer)},{"./string-buf":25,"./utils":27,_process:467,buffer:220,"readable-stream":491}],25:[function(e,t,n){(function(i){(function(){"use strict";t.exports=class{constructor(r){this._buf=i.alloc(r&&r.size||16384),this._encoding=r&&r.encoding||"utf8",this._inPos=0,this._buffer=void 0}get length(){return this._inPos}get capacity(){return this._buf.length}get buffer(){return this._buf}toBuffer(){return this._buffer||(this._buffer=i.alloc(this.length),this._buf.copy(this._buffer,0,0,this.length)),this._buffer}reset(r){r=r||0,this._buffer=void 0,this._inPos=r}_grow(r){let o=2*this._buf.length;for(;o<r;)o*=2;let a=i.alloc(o);this._buf.copy(a,0),this._buf=a}addText(r){this._buffer=void 0;let o=this._inPos+this._buf.write(r,this._inPos,this._encoding);for(;o>=this._buf.length-4;)this._grow(this._inPos+r.length),o=this._inPos+this._buf.write(r,this._inPos,this._encoding);this._inPos=o}addStringBuf(r){r.length&&(this._buffer=void 0,this.length+r.length>this.capacity&&this._grow(this.length+r.length),r._buf.copy(this._buf,this._inPos,0,r.length),this._inPos+=r.length)}}}).call(this)}).call(this,e("buffer").Buffer)},{buffer:220}],26:[function(e,t,n){"use strict";let{toString:i}=Object.prototype,r=/["&<>]/,o={each:function(a,s){a&&(Array.isArray(a)?a.forEach(s):Object.keys(a).forEach(u=>{s(a[u],u)}))},some:function(a,s){return!!a&&(Array.isArray(a)?a.some(s):Object.keys(a).some(u=>s(a[u],u)))},every:function(a,s){return!a||(Array.isArray(a)?a.every(s):Object.keys(a).every(u=>s(a[u],u)))},map:function(a,s){return a?Array.isArray(a)?a.map(s):Object.keys(a).map(u=>s(a[u],u)):[]},keyBy:(a,s)=>a.reduce((u,f)=>(u[f[s]]=f,u),{}),isEqual:function(a,s){let u=typeof a,f=typeof s,c=Array.isArray(a),d=Array.isArray(s),m;if(u!==f)return!1;switch(typeof a){case"object":if(c||d)return!(!c||!d)&&a.length===s.length&&a.every((v,p)=>{let _=s[p];return o.isEqual(v,_)});if(a===null||s===null)return a===s;if(m=Object.keys(a),Object.keys(s).length!==m.length)return!1;for(let v of m)if(!s.hasOwnProperty(v))return!1;return o.every(a,(v,p)=>{let _=s[p];return o.isEqual(v,_)});default:return a===s}},escapeHtml(a){let s=r.exec(a);if(!s)return a;let u="",f="",c=0,d=s.index;for(;d<a.length;d++){switch(a.charAt(d)){case'"':f="&quot;";break;case"&":f="&amp;";break;case"'":f="&apos;";break;case"<":f="&lt;";break;case">":f="&gt;";break;default:continue}c!==d&&(u+=a.substring(c,d)),c=d+1,u+=f}return c!==d?u+a.substring(c,d):u},strcmp:(a,s)=>a<s?-1:a>s?1:0,isUndefined:a=>i.call(a)==="[object Undefined]",isObject:a=>i.call(a)==="[object Object]",deepMerge(){let a=arguments[0]||{},{length:s}=arguments,u,f,c;function d(m,v){u=a[v],c=Array.isArray(m),o.isObject(m)||c?(c?(c=!1,f=u&&Array.isArray(u)?u:[]):f=u&&o.isObject(u)?u:{},a[v]=o.deepMerge(f,m)):o.isUndefined(m)||(a[v]=m)}for(let m=0;m<s;m++)o.each(arguments[m],d);return a}};t.exports=o},{}],27:[function(e,t,n){(function(i,r){(function(){"use strict";let o=e("fs"),a=/[<>&'"\x7F\x00-\x08\x0B-\x0C\x0E-\x1F]/,s={nop(){},promiseImmediate:u=>new Promise(f=>{i.setImmediate?r(()=>{f(u)}):setTimeout(()=>{f(u)},1)}),inherits:function(u,f,c,d){u.super_=f,d||(d=c,c=null),c&&Object.keys(c).forEach(v=>{Object.defineProperty(u,v,Object.getOwnPropertyDescriptor(c,v))});let m={constructor:{value:u,enumerable:!1,writable:!1,configurable:!0}};d&&Object.keys(d).forEach(v=>{m[v]=Object.getOwnPropertyDescriptor(d,v)}),u.prototype=Object.create(f.prototype,m)},dateToExcel:(u,f)=>25569+u.getTime()/864e5-(f?1462:0),excelToDate(u,f){let c=Math.round(24*(u-25569+(f?1462:0))*3600*1e3);return new Date(c)},parsePath(u){let f=u.lastIndexOf("/");return{path:u.substring(0,f),name:u.substring(f+1)}},getRelsPath(u){let f=s.parsePath(u);return`${f.path}/_rels/${f.name}.rels`},xmlEncode(u){let f=a.exec(u);if(!f)return u;let c="",d="",m=0,v=f.index;for(;v<u.length;v++){let p=u.charCodeAt(v);switch(p){case 34:d="&quot;";break;case 38:d="&amp;";break;case 39:d="&apos;";break;case 60:d="&lt;";break;case 62:d="&gt;";break;case 127:d="";break;default:if(p<=31&&(p<=8||p>=11&&p!==13)){d="";break}continue}m!==v&&(c+=u.substring(m,v)),m=v+1,d&&(c+=d)}return m!==v?c+u.substring(m,v):c},xmlDecode:u=>u.replace(/&([a-z]*);/g,f=>{switch(f){case"&lt;":return"<";case"&gt;":return">";case"&amp;":return"&";case"&apos;":return"'";case"&quot;":return'"';default:return f}}),validInt(u){let f=parseInt(u,10);return Number.isNaN(f)?0:f},isDateFmt(u){return u?(u=(u=u.replace(/\[[^\]]*]/g,"")).replace(/"[^"]*"/g,"")).match(/[ymdhMsb]+/)!==null:!1},fs:{exists:u=>new Promise(f=>{o.access(u,o.constants.F_OK,c=>{f(!c)})})},toIsoDateString:u=>u.toIsoString().subsstr(0,10),parseBoolean:u=>u===!0||u==="true"||u===1||u==="1"};t.exports=s}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},e("timers").setImmediate)},{fs:216,timers:523}],28:[function(e,t,n){"use strict";let i=e("./under-dash"),r=e("./utils");function o(u,f,c){u.push(` ${f}="${r.xmlEncode(c.toString())}"`)}function a(u,f){if(f){let c=[];i.each(f,(d,m)=>{d!==void 0&&o(c,m,d)}),u.push(c.join(""))}}class s{constructor(){this._xml=[],this._stack=[],this._rollbacks=[]}get tos(){return this._stack.length?this._stack[this._stack.length-1]:void 0}get cursor(){return this._xml.length}openXml(f){let c=this._xml;c.push("<?xml"),a(c,f),c.push(`?>
`)}openNode(f,c){let d=this.tos,m=this._xml;d&&this.open&&m.push(">"),this._stack.push(f),m.push("<"),m.push(f),a(m,c),this.leaf=!0,this.open=!0}addAttribute(f,c){if(!this.open)throw new Error("Cannot write attributes to node if it is not open");c!==void 0&&o(this._xml,f,c)}addAttributes(f){if(!this.open)throw new Error("Cannot write attributes to node if it is not open");a(this._xml,f)}writeText(f){let c=this._xml;this.open&&(c.push(">"),this.open=!1),this.leaf=!1,c.push(r.xmlEncode(f.toString()))}writeXml(f){this.open&&(this._xml.push(">"),this.open=!1),this.leaf=!1,this._xml.push(f)}closeNode(){let f=this._stack.pop(),c=this._xml;this.leaf?c.push("/>"):(c.push("</"),c.push(f),c.push(">")),this.open=!1,this.leaf=!1}leafNode(f,c,d){this.openNode(f,c),d!==void 0&&this.writeText(d),this.closeNode()}closeAll(){for(;this._stack.length;)this.closeNode()}addRollback(){return this._rollbacks.push({xml:this._xml.length,stack:this._stack.length,leaf:this.leaf,open:this.open}),this.cursor}commit(){this._rollbacks.pop()}rollback(){let f=this._rollbacks.pop();this._xml.length>f.xml&&this._xml.splice(f.xml,this._xml.length-f.xml),this._stack.length>f.stack&&this._stack.splice(f.stack,this._stack.length-f.stack),this.leaf=f.leaf,this.open=f.open}get xml(){return this.closeAll(),this._xml.join("")}}s.StdDocAttributes={version:"1.0",encoding:"UTF-8",standalone:"yes"},t.exports=s},{"./under-dash":26,"./utils":27}],29:[function(e,t,n){(function(i){(function(){"use strict";let r=e("events"),o=e("jszip"),a=e("./stream-buf"),{stringToBuffer:s}=e("./browser-buffer-encode");class u extends r.EventEmitter{constructor(c){super(),this.options=Object.assign({type:"nodebuffer",compression:"DEFLATE"},c),this.zip=new o,this.stream=new a}append(c,d){d.hasOwnProperty("base64")&&d.base64?this.zip.file(d.name,c,{base64:!0}):(i.browser&&typeof c=="string"&&(c=s(c)),this.zip.file(d.name,c))}async finalize(){let c=await this.zip.generateAsync(this.options);this.stream.end(c),this.emit("finish")}read(c){return this.stream.read(c)}setEncoding(c){return this.stream.setEncoding(c)}pause(){return this.stream.pause()}resume(){return this.stream.resume()}isPaused(){return this.stream.isPaused()}pipe(c,d){return this.stream.pipe(c,d)}unpipe(c){return this.stream.unpipe(c)}unshift(c){return this.stream.unshift(c)}wrap(c){return this.stream.wrap(c)}}t.exports={ZipWriter:u}}).call(this)}).call(this,e("_process"))},{"./browser-buffer-encode":17,"./stream-buf":24,_process:467,events:422,jszip:441}],30:[function(e,t,n){"use strict";t.exports={0:{f:"General"},1:{f:"0"},2:{f:"0.00"},3:{f:"#,##0"},4:{f:"#,##0.00"},9:{f:"0%"},10:{f:"0.00%"},11:{f:"0.00E+00"},12:{f:"# ?/?"},13:{f:"# ??/??"},14:{f:"mm-dd-yy"},15:{f:"d-mmm-yy"},16:{f:"d-mmm"},17:{f:"mmm-yy"},18:{f:"h:mm AM/PM"},19:{f:"h:mm:ss AM/PM"},20:{f:"h:mm"},21:{f:"h:mm:ss"},22:{f:'m/d/yy "h":mm'},27:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy"\u5E74"m"\u6708"',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"\u5E74" mm"\u6708" dd"\u65E5"'},28:{"zh-tw":'[$-404]e"\u5E74"m"\u6708"d"\u65E5"',"zh-cn":'m"\u6708"d"\u65E5"',"ja-jp":'[$-411]ggge"\u5E74"m"\u6708"d"\u65E5"',"ko-kr":"mm-dd"},29:{"zh-tw":'[$-404]e"\u5E74"m"\u6708"d"\u65E5"',"zh-cn":'m"\u6708"d"\u65E5"',"ja-jp":'[$-411]ggge"\u5E74"m"\u6708"d"\u65E5"',"ko-kr":"mm-dd"},30:{"zh-tw":"m/d/yy ","zh-cn":"m-d-yy","ja-jp":"m/d/yy","ko-kr":"mm-dd-yy"},31:{"zh-tw":'yyyy"\u5E74"m"\u6708"d"\u65E5"',"zh-cn":'yyyy"\u5E74"m"\u6708"d"\u65E5"',"ja-jp":'yyyy"\u5E74"m"\u6708"d"\u65E5"',"ko-kr":'yyyy"\uB144" mm"\uC6D4" dd"\uC77C"'},32:{"zh-tw":'hh"\u6642"mm"\u5206"',"zh-cn":'h"\u65F6"mm"\u5206"',"ja-jp":'h"\u6642"mm"\u5206"',"ko-kr":'h"\uC2DC" mm"\uBD84"'},33:{"zh-tw":'hh"\u6642"mm"\u5206"ss"\u79D2"',"zh-cn":'h"\u65F6"mm"\u5206"ss"\u79D2"',"ja-jp":'h"\u6642"mm"\u5206"ss"\u79D2"',"ko-kr":'h"\uC2DC" mm"\uBD84" ss"\uCD08"'},34:{"zh-tw":'\u4E0A\u5348/\u4E0B\u5348 hh"\u6642"mm"\u5206"',"zh-cn":'\u4E0A\u5348/\u4E0B\u5348 h"\u65F6"mm"\u5206"',"ja-jp":'yyyy"\u5E74"m"\u6708"',"ko-kr":"yyyy-mm-dd"},35:{"zh-tw":'\u4E0A\u5348/\u4E0B\u5348 hh"\u6642"mm"\u5206"ss"\u79D2"',"zh-cn":'\u4E0A\u5348/\u4E0B\u5348 h"\u65F6"mm"\u5206"ss"\u79D2"',"ja-jp":'m"\u6708"d"\u65E5"',"ko-kr":"yyyy-mm-dd"},36:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy"\u5E74"m"\u6708"',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"\u5E74" mm"\u6708" dd"\u65E5"'},37:{f:"#,##0 ;(#,##0)"},38:{f:"#,##0 ;[Red](#,##0)"},39:{f:"#,##0.00 ;(#,##0.00)"},40:{f:"#,##0.00 ;[Red](#,##0.00)"},45:{f:"mm:ss"},46:{f:"[h]:mm:ss"},47:{f:"mmss.0"},48:{f:"##0.0E+0"},49:{f:"@"},50:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy"\u5E74"m"\u6708"',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"\u5E74" mm"\u6708" dd"\u65E5"'},51:{"zh-tw":'[$-404]e"\u5E74"m"\u6708"d"\u65E5"',"zh-cn":'m"\u6708"d"\u65E5"',"ja-jp":'[$-411]ggge"\u5E74"m"\u6708"d"\u65E5"',"ko-kr":"mm-dd"},52:{"zh-tw":'\u4E0A\u5348/\u4E0B\u5348 hh"\u6642"mm"\u5206"',"zh-cn":'yyyy"\u5E74"m"\u6708"',"ja-jp":'yyyy"\u5E74"m"\u6708"',"ko-kr":"yyyy-mm-dd"},53:{"zh-tw":'\u4E0A\u5348/\u4E0B\u5348 hh"\u6642"mm"\u5206"ss"\u79D2"',"zh-cn":'m"\u6708"d"\u65E5"',"ja-jp":'m"\u6708"d"\u65E5"',"ko-kr":"yyyy-mm-dd"},54:{"zh-tw":'[$-404]e"\u5E74"m"\u6708"d"\u65E5"',"zh-cn":'m"\u6708"d"\u65E5"',"ja-jp":'[$-411]ggge"\u5E74"m"\u6708"d"\u65E5"',"ko-kr":"mm-dd"},55:{"zh-tw":'\u4E0A\u5348/\u4E0B\u5348 hh"\u6642"mm"\u5206"',"zh-cn":'\u4E0A\u5348/\u4E0B\u5348 h"\u65F6"mm"\u5206"',"ja-jp":'yyyy"\u5E74"m"\u6708"',"ko-kr":"yyyy-mm-dd"},56:{"zh-tw":'\u4E0A\u5348/\u4E0B\u5348 hh"\u6642"mm"\u5206"ss"\u79D2"',"zh-cn":'\u4E0A\u5348/\u4E0B\u5348 h"\u65F6"mm"\u5206"ss"\u79D2"',"ja-jp":'m"\u6708"d"\u65E5"',"ko-kr":"yyyy-mm-dd"},57:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy"\u5E74"m"\u6708"',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"\u5E74" mm"\u6708" dd"\u65E5"'},58:{"zh-tw":'[$-404]e"\u5E74"m"\u6708"d"\u65E5"',"zh-cn":'m"\u6708"d"\u65E5"',"ja-jp":'[$-411]ggge"\u5E74"m"\u6708"d"\u65E5"',"ko-kr":"mm-dd"},59:{"th-th":"t0"},60:{"th-th":"t0.00"},61:{"th-th":"t#,##0"},62:{"th-th":"t#,##0.00"},67:{"th-th":"t0%"},68:{"th-th":"t0.00%"},69:{"th-th":"t# ?/?"},70:{"th-th":"t# ??/??"},81:{"th-th":"d/m/bb"}}},{}],31:[function(e,t,n){"use strict";t.exports={OfficeDocument:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",Worksheet:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",CalcChain:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/calcChain",SharedStrings:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Styles:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Theme:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",Hyperlink:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",Image:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",CoreProperties:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",ExtenderProperties:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",Comments:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",VmlDrawing:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",Table:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/table"}},{}],32:[function(e,t,n){"use strict";let i=e("../../utils/parse-sax"),r=e("../../utils/xml-stream");class o{prepare(){}render(){}parseOpen(s){}parseText(s){}parseClose(s){}reconcile(s,u){}reset(){this.model=null,this.map&&Object.values(this.map).forEach(s=>{s instanceof o?s.reset():s.xform&&s.xform.reset()})}mergeModel(s){this.model=Object.assign(this.model||{},s)}async parse(s){for await(let u of s)for(let{eventType:f,value:c}of u)if(f==="opentag")this.parseOpen(c);else if(f==="text")this.parseText(c);else if(f==="closetag"&&!this.parseClose(c.name))return this.model;return this.model}async parseStream(s){return this.parse(i(s))}get xml(){return this.toXml(this.model)}toXml(s){let u=new r;return this.render(u,s),u.xml}static toAttribute(s,u){let f=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(s===void 0){if(f)return u}else if(f||s!==u)return s.toString()}static toStringAttribute(s,u){let f=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return o.toAttribute(s,u,f)}static toStringValue(s,u){return s===void 0?u:s}static toBoolAttribute(s,u){let f=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(s===void 0){if(f)return u}else if(f||s!==u)return s?"1":"0"}static toBoolValue(s,u){return s===void 0?u:s==="1"}static toIntAttribute(s,u){let f=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return o.toAttribute(s,u,f)}static toIntValue(s,u){return s===void 0?u:parseInt(s,10)}static toFloatAttribute(s,u){let f=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return o.toAttribute(s,u,f)}static toFloatValue(s,u){return s===void 0?u:parseFloat(s)}}t.exports=o},{"../../utils/parse-sax":22,"../../utils/xml-stream":28}],33:[function(e,t,n){"use strict";let i=e("../base-xform"),r=e("../../../utils/col-cache");function o(s){try{return r.decodeEx(s),!0}catch{return!1}}function a(s){let u=[],f=!1,c="";return s.split(",").forEach(d=>{if(!d)return;let m=(d.match(/'/g)||[]).length;if(!m)return void(f?c+=d+",":o(d)&&u.push(d));let v=m%2==0;!f&&v&&o(d)?u.push(d):f&&!v?(f=!1,o(c+d)&&u.push(c+d),c=""):(f=!0,c+=d+",")}),u}t.exports=class extends i{render(s,u){s.openNode("definedName",{name:u.name,localSheetId:u.localSheetId}),s.writeText(u.ranges.join(",")),s.closeNode()}parseOpen(s){switch(s.name){case"definedName":return this._parsedName=s.attributes.name,this._parsedLocalSheetId=s.attributes.localSheetId,this._parsedText=[],!0;default:return!1}}parseText(s){this._parsedText.push(s)}parseClose(){return this.model={name:this._parsedName,ranges:a(this._parsedText.join(""))},this._parsedLocalSheetId!==void 0&&(this.model.localSheetId=parseInt(this._parsedLocalSheetId,10)),!1}}},{"../../../utils/col-cache":19,"../base-xform":32}],34:[function(e,t,n){"use strict";let i=e("../../../utils/utils"),r=e("../base-xform");t.exports=class extends r{render(o,a){o.leafNode("sheet",{sheetId:a.id,name:a.name,state:a.state,"r:id":a.rId})}parseOpen(o){return o.name==="sheet"&&(this.model={name:i.xmlDecode(o.attributes.name),id:parseInt(o.attributes.sheetId,10),state:o.attributes.state,rId:o.attributes["r:id"]},!0)}parseText(){}parseClose(){return!1}}},{"../../../utils/utils":27,"../base-xform":32}],35:[function(e,t,n){"use strict";let i=e("../base-xform");t.exports=class extends i{render(r,o){r.leafNode("calcPr",{calcId:171027,fullCalcOnLoad:o.fullCalcOnLoad?1:void 0})}parseOpen(r){return r.name==="calcPr"&&(this.model={},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],36:[function(e,t,n){"use strict";let i=e("../base-xform");t.exports=class extends i{render(r,o){r.leafNode("workbookPr",{date1904:o.date1904?1:void 0,defaultThemeVersion:164011,filterPrivacy:1})}parseOpen(r){return r.name==="workbookPr"&&(this.model={date1904:r.attributes.date1904==="1"},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],37:[function(e,t,n){"use strict";let i=e("../base-xform");t.exports=class extends i{render(r,o){let a={xWindow:o.x||0,yWindow:o.y||0,windowWidth:o.width||12e3,windowHeight:o.height||24e3,firstSheet:o.firstSheet,activeTab:o.activeTab};o.visibility&&o.visibility!=="visible"&&(a.visibility=o.visibility),r.leafNode("workbookView",a)}parseOpen(r){if(r.name==="workbookView"){let o=this.model={},a=function(u,f,c){let d=f!==void 0?o[u]=f:c;d!==void 0&&(o[u]=d)},s=function(u,f,c){let d=f!==void 0?o[u]=parseInt(f,10):c;d!==void 0&&(o[u]=d)};return s("x",r.attributes.xWindow,0),s("y",r.attributes.yWindow,0),s("width",r.attributes.windowWidth,25e3),s("height",r.attributes.windowHeight,1e4),a("visibility",r.attributes.visibility,"visible"),s("activeTab",r.attributes.activeTab,void 0),s("firstSheet",r.attributes.firstSheet,void 0),!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],38:[function(e,t,n){"use strict";let i=e("../../../utils/under-dash"),r=e("../../../utils/col-cache"),o=e("../../../utils/xml-stream"),a=e("../base-xform"),s=e("../static-xform"),u=e("../list-xform"),f=e("./defined-name-xform"),c=e("./sheet-xform"),d=e("./workbook-view-xform"),m=e("./workbook-properties-xform"),v=e("./workbook-calc-properties-xform");class p extends a{constructor(){super(),this.map={fileVersion:p.STATIC_XFORMS.fileVersion,workbookPr:new m,bookViews:new u({tag:"bookViews",count:!1,childXform:new d}),sheets:new u({tag:"sheets",count:!1,childXform:new c}),definedNames:new u({tag:"definedNames",count:!1,childXform:new f}),calcPr:new v}}prepare(y){y.sheets=y.worksheets;let x=[],S=0;y.sheets.forEach(O=>{if(O.pageSetup&&O.pageSetup.printArea&&O.pageSetup.printArea.split("&&").forEach(B=>{let U=B.split(":"),z={name:"_xlnm.Print_Area",ranges:[`'${O.name}'!$${U[0]}:$${U[1]}`],localSheetId:S};x.push(z)}),O.pageSetup&&(O.pageSetup.printTitlesRow||O.pageSetup.printTitlesColumn)){let B=[];if(O.pageSetup.printTitlesColumn){let z=O.pageSetup.printTitlesColumn.split(":");B.push(`'${O.name}'!$${z[0]}:$${z[1]}`)}if(O.pageSetup.printTitlesRow){let z=O.pageSetup.printTitlesRow.split(":");B.push(`'${O.name}'!$${z[0]}:$${z[1]}`)}let U={name:"_xlnm.Print_Titles",ranges:B,localSheetId:S};x.push(U)}S++}),x.length&&(y.definedNames=y.definedNames.concat(x)),(y.media||[]).forEach((O,B)=>{O.name=O.type+(B+1)})}render(y,x){y.openXml(o.StdDocAttributes),y.openNode("workbook",p.WORKBOOK_ATTRIBUTES),this.map.fileVersion.render(y),this.map.workbookPr.render(y,x.properties),this.map.bookViews.render(y,x.views),this.map.sheets.render(y,x.sheets),this.map.definedNames.render(y,x.definedNames),this.map.calcPr.render(y,x.calcProperties),y.closeNode()}parseOpen(y){if(this.parser)return this.parser.parseOpen(y),!0;switch(y.name){case"workbook":return!0;default:return this.parser=this.map[y.name],this.parser&&this.parser.parseOpen(y),!0}}parseText(y){this.parser&&this.parser.parseText(y)}parseClose(y){if(this.parser)return this.parser.parseClose(y)||(this.parser=void 0),!0;switch(y){case"workbook":return this.model={sheets:this.map.sheets.model,properties:this.map.workbookPr.model||{},views:this.map.bookViews.model,calcProperties:{}},this.map.definedNames.model&&(this.model.definedNames=this.map.definedNames.model),!1;default:return!0}}reconcile(y){let x=(y.workbookRels||[]).reduce((z,q)=>(z[q.Id]=q,z),{}),S=[],O,B=0;(y.sheets||[]).forEach(z=>{let q=x[z.rId];q&&(O=y.worksheetHash["xl/"+q.Target.replace(/^(\s|\/xl\/)+/,"")],O&&(O.name=z.name,O.id=z.id,O.state=z.state,S[B++]=O))});let U=[];i.each(y.definedNames,z=>{if(z.name==="_xlnm.Print_Area"){if(O=S[z.localSheetId],O){O.pageSetup||(O.pageSetup={});let q=r.decodeEx(z.ranges[0]);O.pageSetup.printArea=O.pageSetup.printArea?`${O.pageSetup.printArea}&&${q.dimensions}`:q.dimensions}}else if(z.name==="_xlnm.Print_Titles"){if(O=S[z.localSheetId],O){O.pageSetup||(O.pageSetup={});let q=z.ranges.join(","),G=/\$/g,tt=/\$\d+:\$\d+/,K=q.match(tt);if(K&&K.length){let Z=K[0];O.pageSetup.printTitlesRow=Z.replace(G,"")}let D=/\$[A-Z]+:\$[A-Z]+/,N=q.match(D);if(N&&N.length){let Z=N[0];O.pageSetup.printTitlesColumn=Z.replace(G,"")}}}else U.push(z)}),y.definedNames=U,y.media.forEach((z,q)=>{z.index=q})}}p.WORKBOOK_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x15","xmlns:x15":"http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"},p.STATIC_XFORMS={fileVersion:new s({tag:"fileVersion",$:{appName:"xl",lastEdited:5,lowestEdited:5,rupBuild:9303}})},t.exports=p},{"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"../static-xform":120,"./defined-name-xform":33,"./sheet-xform":34,"./workbook-calc-properties-xform":35,"./workbook-properties-xform":36,"./workbook-view-xform":37}],39:[function(e,t,n){"use strict";let i=e("../strings/rich-text-xform"),r=e("../../../utils/utils"),o=e("../base-xform"),a=t.exports=function(s){this.model=s};r.inherits(a,o,{get tag(){return"r"},get richTextXform(){return this._richTextXform||(this._richTextXform=new i),this._richTextXform},render(s,u){u=u||this.model,s.openNode("comment",{ref:u.ref,authorId:0}),s.openNode("text"),u&&u.note&&u.note.texts&&u.note.texts.forEach(f=>{this.richTextXform.render(s,f)}),s.closeNode(),s.closeNode()},parseOpen(s){if(this.parser)return this.parser.parseOpen(s),!0;switch(s.name){case"comment":return this.model={type:"note",note:{texts:[]},...s.attributes},!0;case"r":return this.parser=this.richTextXform,this.parser.parseOpen(s),!0;default:return!1}},parseText(s){this.parser&&this.parser.parseText(s)},parseClose(s){switch(s){case"comment":return!1;case"r":return this.model.note.texts.push(this.parser.model),this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(s),!0}}})},{"../../../utils/utils":27,"../base-xform":32,"../strings/rich-text-xform":122}],40:[function(e,t,n){"use strict";let i=e("../../../utils/xml-stream"),r=e("../../../utils/utils"),o=e("../base-xform"),a=e("./comment-xform"),s=t.exports=function(){this.map={comment:new a}};r.inherits(s,o,{COMMENTS_ATTRIBUTES:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},{render(u,f){f=f||this.model,u.openXml(i.StdDocAttributes),u.openNode("comments",s.COMMENTS_ATTRIBUTES),u.openNode("authors"),u.leafNode("author",null,"Author"),u.closeNode(),u.openNode("commentList"),f.comments.forEach(c=>{this.map.comment.render(u,c)}),u.closeNode(),u.closeNode()},parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case"commentList":return this.model={comments:[]},!0;case"comment":return this.parser=this.map.comment,this.parser.parseOpen(u),!0;default:return!1}},parseText(u){this.parser&&this.parser.parseText(u)},parseClose(u){switch(u){case"commentList":return!1;case"comment":return this.model.comments.push(this.parser.model),this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(u),!0}}})},{"../../../utils/utils":27,"../../../utils/xml-stream":28,"../base-xform":32,"./comment-xform":39}],41:[function(e,t,n){"use strict";let i=e("../../base-xform");t.exports=class extends i{constructor(r){super(),this._model=r}get tag(){return this._model&&this._model.tag}render(r,o,a){(o===a[2]||this.tag==="x:SizeWithCells"&&o===a[1])&&r.leafNode(this.tag)}parseOpen(r){switch(r.name){case this.tag:return this.model={},this.model[this.tag]=!0,!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../base-xform":32}],42:[function(e,t,n){"use strict";let i=e("../../base-xform");t.exports=class extends i{constructor(r){super(),this._model=r}get tag(){return this._model&&this._model.tag}render(r,o){r.leafNode(this.tag,null,o)}parseOpen(r){switch(r.name){case this.tag:return this.text="",!0;default:return!1}}parseText(r){this.text=r}parseClose(){return!1}}},{"../../base-xform":32}],43:[function(e,t,n){"use strict";let i=e("../base-xform");t.exports=class extends i{get tag(){return"x:Anchor"}getAnchorRect(r){let o=Math.floor(r.left),a=Math.floor(68*(r.left-o)),s=Math.floor(r.top),u=Math.floor(18*(r.top-s)),f=Math.floor(r.right),c=Math.floor(68*(r.right-f)),d=Math.floor(r.bottom);return[o,a,s,u,f,c,d,Math.floor(18*(r.bottom-d))]}getDefaultRect(r){let o=r.col,a=Math.max(r.row-2,0);return[o,6,a,14,o+2,2,a+4,16]}render(r,o){let a=o.anchor?this.getAnchorRect(o.anchor):this.getDefaultRect(o.refAddress);r.leafNode("x:Anchor",null,a.join(", "))}parseOpen(r){switch(r.name){case this.tag:return this.text="",!0;default:return!1}}parseText(r){this.text=r}parseClose(){return!1}}},{"../base-xform":32}],44:[function(e,t,n){"use strict";let i=e("../base-xform"),r=e("./vml-anchor-xform"),o=e("./style/vml-protection-xform"),a=e("./style/vml-position-xform"),s=["twoCells","oneCells","absolute"];t.exports=class extends i{constructor(){super(),this.map={"x:Anchor":new r,"x:Locked":new o({tag:"x:Locked"}),"x:LockText":new o({tag:"x:LockText"}),"x:SizeWithCells":new a({tag:"x:SizeWithCells"}),"x:MoveWithCells":new a({tag:"x:MoveWithCells"})}}get tag(){return"x:ClientData"}render(u,f){let{protection:c,editAs:d}=f.note;u.openNode(this.tag,{ObjectType:"Note"}),this.map["x:MoveWithCells"].render(u,d,s),this.map["x:SizeWithCells"].render(u,d,s),this.map["x:Anchor"].render(u,f),this.map["x:Locked"].render(u,c.locked),u.leafNode("x:AutoFill",null,"False"),this.map["x:LockText"].render(u,c.lockText),u.leafNode("x:Row",null,f.refAddress.row-1),u.leafNode("x:Column",null,f.refAddress.col-1),u.closeNode()}parseOpen(u){switch(u.name){case this.tag:this.reset(),this.model={anchor:[],protection:{},editAs:""};break;default:this.parser=this.map[u.name],this.parser&&this.parser.parseOpen(u)}return!0}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.parser=void 0),!0;switch(u){case this.tag:return this.normalizeModel(),!1;default:return!0}}normalizeModel(){let u=Object.assign({},this.map["x:MoveWithCells"].model,this.map["x:SizeWithCells"].model),f=Object.keys(u).length;this.model.editAs=s[f],this.model.anchor=this.map["x:Anchor"].text,this.model.protection.locked=this.map["x:Locked"].text,this.model.protection.lockText=this.map["x:LockText"].text}}},{"../base-xform":32,"./style/vml-position-xform":41,"./style/vml-protection-xform":42,"./vml-anchor-xform":43}],45:[function(e,t,n){"use strict";let i=e("../../../utils/xml-stream"),r=e("../base-xform"),o=e("./vml-shape-xform");class a extends r{constructor(){super(),this.map={"v:shape":new o}}get tag(){return"xml"}render(u,f){u.openXml(i.StdDocAttributes),u.openNode(this.tag,a.DRAWING_ATTRIBUTES),u.openNode("o:shapelayout",{"v:ext":"edit"}),u.leafNode("o:idmap",{"v:ext":"edit",data:1}),u.closeNode(),u.openNode("v:shapetype",{id:"_x0000_t202",coordsize:"21600,21600","o:spt":202,path:"m,l,21600r21600,l21600,xe"}),u.leafNode("v:stroke",{joinstyle:"miter"}),u.leafNode("v:path",{gradientshapeok:"t","o:connecttype":"rect"}),u.closeNode(),f.comments.forEach((c,d)=>{this.map["v:shape"].render(u,c,d)}),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case this.tag:this.reset(),this.model={comments:[]};break;default:this.parser=this.map[u.name],this.parser&&this.parser.parseOpen(u)}return!0}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.model.comments.push(this.parser.model),this.parser=void 0),!0;switch(u){case this.tag:return!1;default:return!0}}reconcile(u,f){u.anchors.forEach(c=>{c.br?this.map["xdr:twoCellAnchor"].reconcile(c,f):this.map["xdr:oneCellAnchor"].reconcile(c,f)})}}a.DRAWING_ATTRIBUTES={"xmlns:v":"urn:schemas-microsoft-com:vml","xmlns:o":"urn:schemas-microsoft-com:office:office","xmlns:x":"urn:schemas-microsoft-com:office:excel"},t.exports=a},{"../../../utils/xml-stream":28,"../base-xform":32,"./vml-shape-xform":46}],46:[function(e,t,n){"use strict";let i=e("../base-xform"),r=e("./vml-textbox-xform"),o=e("./vml-client-data-xform");class a extends i{constructor(){super(),this.map={"v:textbox":new r,"x:ClientData":new o}}get tag(){return"v:shape"}render(u,f,c){u.openNode("v:shape",a.V_SHAPE_ATTRIBUTES(f,c)),u.leafNode("v:fill",{color2:"infoBackground [80]"}),u.leafNode("v:shadow",{color:"none [81]",obscured:"t"}),u.leafNode("v:path",{"o:connecttype":"none"}),this.map["v:textbox"].render(u,f),this.map["x:ClientData"].render(u,f),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case this.tag:this.reset(),this.model={margins:{insetmode:u.attributes["o:insetmode"]},anchor:"",editAs:"",protection:{}};break;default:this.parser=this.map[u.name],this.parser&&this.parser.parseOpen(u)}return!0}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.parser=void 0),!0;switch(u){case this.tag:return this.model.margins.inset=this.map["v:textbox"].model&&this.map["v:textbox"].model.inset,this.model.protection=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.protection,this.model.anchor=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.anchor,this.model.editAs=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.editAs,!1;default:return!0}}}a.V_SHAPE_ATTRIBUTES=(s,u)=>({id:"_x0000_s"+(1025+u),type:"#_x0000_t202",style:"position:absolute; margin-left:105.3pt;margin-top:10.5pt;width:97.8pt;height:59.1pt;z-index:1;visibility:hidden",fillcolor:"infoBackground [80]",strokecolor:"none [81]","o:insetmode":s.note.margins&&s.note.margins.insetmode}),t.exports=a},{"../base-xform":32,"./vml-client-data-xform":44,"./vml-textbox-xform":47}],47:[function(e,t,n){"use strict";let i=e("../base-xform");t.exports=class extends i{get tag(){return"v:textbox"}conversionUnit(r,o,a){return`${parseFloat(r)*o.toFixed(2)}${a}`}reverseConversionUnit(r){return(r||"").split(",").map(o=>Number(parseFloat(this.conversionUnit(parseFloat(o),.1,"")).toFixed(2)))}render(r,o){let a={style:"mso-direction-alt:auto"};if(o&&o.note){let{inset:s}=o.note&&o.note.margins;Array.isArray(s)&&(s=s.map(u=>this.conversionUnit(u,10,"mm")).join(",")),s&&(a.inset=s)}r.openNode("v:textbox",a),r.leafNode("div",{style:"text-align:left"}),r.closeNode()}parseOpen(r){switch(r.name){case this.tag:return this.model={inset:this.reverseConversionUnit(r.attributes.inset)},!0;default:return!0}}parseText(){}parseClose(r){switch(r){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],48:[function(e,t,n){"use strict";let i=e("./base-xform");t.exports=class extends i{createNewModel(r){return{}}parseOpen(r){return this.parser=this.parser||this.map[r.name],this.parser?(this.parser.parseOpen(r),!0):r.name===this.tag&&(this.model=this.createNewModel(r),!0)}parseText(r){this.parser&&this.parser.parseText(r)}onParserClose(r,o){this.model[r]=o.model}parseClose(r){return this.parser?(this.parser.parseClose(r)||(this.onParserClose(r,this.parser),this.parser=void 0),!0):r!==this.tag}}},{"./base-xform":32}],49:[function(e,t,n){"use strict";let i=e("../base-xform");t.exports=class extends i{render(r,o){r.openNode("HeadingPairs"),r.openNode("vt:vector",{size:2,baseType:"variant"}),r.openNode("vt:variant"),r.leafNode("vt:lpstr",void 0,"Worksheets"),r.closeNode(),r.openNode("vt:variant"),r.leafNode("vt:i4",void 0,o.length),r.closeNode(),r.closeNode(),r.closeNode()}parseOpen(r){return r.name==="HeadingPairs"}parseText(){}parseClose(r){return r!=="HeadingPairs"}}},{"../base-xform":32}],50:[function(e,t,n){"use strict";let i=e("../base-xform");t.exports=class extends i{render(r,o){r.openNode("TitlesOfParts"),r.openNode("vt:vector",{size:o.length,baseType:"lpstr"}),o.forEach(a=>{r.leafNode("vt:lpstr",void 0,a.name)}),r.closeNode(),r.closeNode()}parseOpen(r){return r.name==="TitlesOfParts"}parseText(){}parseClose(r){return r!=="TitlesOfParts"}}},{"../base-xform":32}],51:[function(e,t,n){"use strict";let i=e("../../../utils/xml-stream"),r=e("../base-xform"),o=e("../simple/string-xform"),a=e("./app-heading-pairs-xform"),s=e("./app-titles-of-parts-xform");class u extends r{constructor(){super(),this.map={Company:new o({tag:"Company"}),Manager:new o({tag:"Manager"}),HeadingPairs:new a,TitleOfParts:new s}}render(c,d){c.openXml(i.StdDocAttributes),c.openNode("Properties",u.PROPERTY_ATTRIBUTES),c.leafNode("Application",void 0,"Microsoft Excel"),c.leafNode("DocSecurity",void 0,"0"),c.leafNode("ScaleCrop",void 0,"false"),this.map.HeadingPairs.render(c,d.worksheets),this.map.TitleOfParts.render(c,d.worksheets),this.map.Company.render(c,d.company||""),this.map.Manager.render(c,d.manager),c.leafNode("LinksUpToDate",void 0,"false"),c.leafNode("SharedDoc",void 0,"false"),c.leafNode("HyperlinksChanged",void 0,"false"),c.leafNode("AppVersion",void 0,"16.0300"),c.closeNode()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case"Properties":return!0;default:return this.parser=this.map[c.name],!!this.parser&&(this.parser.parseOpen(c),!0)}}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){if(this.parser)return this.parser.parseClose(c)||(this.parser=void 0),!0;switch(c){case"Properties":return this.model={worksheets:this.map.TitleOfParts.model,company:this.map.Company.model,manager:this.map.Manager.model},!1;default:return!0}}}u.DateFormat=function(f){return f.toISOString().replace(/[.]\d{3,6}/,"")},u.DateAttrs={"xsi:type":"dcterms:W3CDTF"},u.PROPERTY_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties","xmlns:vt":"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"},t.exports=u},{"../../../utils/xml-stream":28,"../base-xform":32,"../simple/string-xform":119,"./app-heading-pairs-xform":49,"./app-titles-of-parts-xform":50}],52:[function(e,t,n){"use strict";let i=e("../../../utils/xml-stream"),r=e("../base-xform");class o extends r{render(s,u){s.openXml(i.StdDocAttributes),s.openNode("Types",o.PROPERTY_ATTRIBUTES);let f={};(u.media||[]).forEach(c=>{if(c.type==="image"){let d=c.extension;f[d]||(f[d]=!0,s.leafNode("Default",{Extension:d,ContentType:"image/"+d}))}}),s.leafNode("Default",{Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"}),s.leafNode("Default",{Extension:"xml",ContentType:"application/xml"}),s.leafNode("Override",{PartName:"/xl/workbook.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"}),u.worksheets.forEach(c=>{let d=`/xl/worksheets/sheet${c.id}.xml`;s.leafNode("Override",{PartName:d,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"})}),s.leafNode("Override",{PartName:"/xl/theme/theme1.xml",ContentType:"application/vnd.openxmlformats-officedocument.theme+xml"}),s.leafNode("Override",{PartName:"/xl/styles.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"}),u.sharedStrings&&u.sharedStrings.count&&s.leafNode("Override",{PartName:"/xl/sharedStrings.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"}),u.tables&&u.tables.forEach(c=>{s.leafNode("Override",{PartName:"/xl/tables/"+c.target,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml"})}),u.drawings&&u.drawings.forEach(c=>{s.leafNode("Override",{PartName:`/xl/drawings/${c.name}.xml`,ContentType:"application/vnd.openxmlformats-officedocument.drawing+xml"})}),u.commentRefs&&(s.leafNode("Default",{Extension:"vml",ContentType:"application/vnd.openxmlformats-officedocument.vmlDrawing"}),u.commentRefs.forEach(c=>{let{commentName:d}=c;s.leafNode("Override",{PartName:`/xl/${d}.xml`,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml"})})),s.leafNode("Override",{PartName:"/docProps/core.xml",ContentType:"application/vnd.openxmlformats-package.core-properties+xml"}),s.leafNode("Override",{PartName:"/docProps/app.xml",ContentType:"application/vnd.openxmlformats-officedocument.extended-properties+xml"}),s.closeNode()}parseOpen(){return!1}parseText(){}parseClose(){return!1}}o.PROPERTY_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"},t.exports=o},{"../../../utils/xml-stream":28,"../base-xform":32}],53:[function(e,t,n){"use strict";let i=e("../../../utils/xml-stream"),r=e("../base-xform"),o=e("../simple/date-xform"),a=e("../simple/string-xform"),s=e("../simple/integer-xform");class u extends r{constructor(){super(),this.map={"dc:creator":new a({tag:"dc:creator"}),"dc:title":new a({tag:"dc:title"}),"dc:subject":new a({tag:"dc:subject"}),"dc:description":new a({tag:"dc:description"}),"dc:identifier":new a({tag:"dc:identifier"}),"dc:language":new a({tag:"dc:language"}),"cp:keywords":new a({tag:"cp:keywords"}),"cp:category":new a({tag:"cp:category"}),"cp:lastModifiedBy":new a({tag:"cp:lastModifiedBy"}),"cp:lastPrinted":new o({tag:"cp:lastPrinted",format:u.DateFormat}),"cp:revision":new s({tag:"cp:revision"}),"cp:version":new a({tag:"cp:version"}),"cp:contentStatus":new a({tag:"cp:contentStatus"}),"cp:contentType":new a({tag:"cp:contentType"}),"dcterms:created":new o({tag:"dcterms:created",attrs:u.DateAttrs,format:u.DateFormat}),"dcterms:modified":new o({tag:"dcterms:modified",attrs:u.DateAttrs,format:u.DateFormat})}}render(c,d){c.openXml(i.StdDocAttributes),c.openNode("cp:coreProperties",u.CORE_PROPERTY_ATTRIBUTES),this.map["dc:creator"].render(c,d.creator),this.map["dc:title"].render(c,d.title),this.map["dc:subject"].render(c,d.subject),this.map["dc:description"].render(c,d.description),this.map["dc:identifier"].render(c,d.identifier),this.map["dc:language"].render(c,d.language),this.map["cp:keywords"].render(c,d.keywords),this.map["cp:category"].render(c,d.category),this.map["cp:lastModifiedBy"].render(c,d.lastModifiedBy),this.map["cp:lastPrinted"].render(c,d.lastPrinted),this.map["cp:revision"].render(c,d.revision),this.map["cp:version"].render(c,d.version),this.map["cp:contentStatus"].render(c,d.contentStatus),this.map["cp:contentType"].render(c,d.contentType),this.map["dcterms:created"].render(c,d.created),this.map["dcterms:modified"].render(c,d.modified),c.closeNode()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case"cp:coreProperties":case"coreProperties":return!0;default:if(this.parser=this.map[c.name],this.parser)return this.parser.parseOpen(c),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(c))}}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){if(this.parser)return this.parser.parseClose(c)||(this.parser=void 0),!0;switch(c){case"cp:coreProperties":case"coreProperties":return this.model={creator:this.map["dc:creator"].model,title:this.map["dc:title"].model,subject:this.map["dc:subject"].model,description:this.map["dc:description"].model,identifier:this.map["dc:identifier"].model,language:this.map["dc:language"].model,keywords:this.map["cp:keywords"].model,category:this.map["cp:category"].model,lastModifiedBy:this.map["cp:lastModifiedBy"].model,lastPrinted:this.map["cp:lastPrinted"].model,revision:this.map["cp:revision"].model,contentStatus:this.map["cp:contentStatus"].model,contentType:this.map["cp:contentType"].model,created:this.map["dcterms:created"].model,modified:this.map["dcterms:modified"].model},!1;default:throw new Error("Unexpected xml node in parseClose: "+c)}}}u.DateFormat=function(f){return f.toISOString().replace(/[.]\d{3}/,"")},u.DateAttrs={"xsi:type":"dcterms:W3CDTF"},u.CORE_PROPERTY_ATTRIBUTES={"xmlns:cp":"http://schemas.openxmlformats.org/package/2006/metadata/core-properties","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:dcterms":"http://purl.org/dc/terms/","xmlns:dcmitype":"http://purl.org/dc/dcmitype/","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance"},t.exports=u},{"../../../utils/xml-stream":28,"../base-xform":32,"../simple/date-xform":117,"../simple/integer-xform":118,"../simple/string-xform":119}],54:[function(e,t,n){"use strict";let i=e("../base-xform");t.exports=class extends i{render(r,o){r.leafNode("Relationship",o)}parseOpen(r){switch(r.name){case"Relationship":return this.model=r.attributes,!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],55:[function(e,t,n){"use strict";let i=e("../../../utils/xml-stream"),r=e("../base-xform"),o=e("./relationship-xform");class a extends r{constructor(){super(),this.map={Relationship:new o}}render(u,f){f=f||this._values,u.openXml(i.StdDocAttributes),u.openNode("Relationships",a.RELATIONSHIPS_ATTRIBUTES),f.forEach(c=>{this.map.Relationship.render(u,c)}),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case"Relationships":return this.model=[],!0;default:if(this.parser=this.map[u.name],this.parser)return this.parser.parseOpen(u),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(u))}}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.model.push(this.parser.model),this.parser=void 0),!0;switch(u){case"Relationships":return!1;default:throw new Error("Unexpected xml node in parseClose: "+u)}}}a.RELATIONSHIPS_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"},t.exports=a},{"../../../utils/xml-stream":28,"../base-xform":32,"./relationship-xform":54}],56:[function(e,t,n){"use strict";let i=e("../base-xform");t.exports=class extends i{parseOpen(r){if(this.parser)return this.parser.parseOpen(r),!0;switch(r.name){case this.tag:this.reset(),this.model={range:{editAs:r.attributes.editAs||"oneCell"}};break;default:this.parser=this.map[r.name],this.parser&&this.parser.parseOpen(r)}return!0}parseText(r){this.parser&&this.parser.parseText(r)}reconcilePicture(r,o){if(r&&r.rId){let a=o.rels[r.rId].Target.match(/.*\/media\/(.+[.][a-zA-Z]{3,4})/);if(a){let s=a[1],u=o.mediaIndex[s];return o.media[u]}}}}},{"../base-xform":32}],57:[function(e,t,n){"use strict";let i=e("../base-xform"),r=e("./blip-xform");t.exports=class extends i{constructor(){super(),this.map={"a:blip":new r}}get tag(){return"xdr:blipFill"}render(o,a){o.openNode(this.tag),this.map["a:blip"].render(o,a),o.openNode("a:stretch"),o.leafNode("a:fillRect"),o.closeNode(),o.closeNode()}parseOpen(o){if(this.parser)return this.parser.parseOpen(o),!0;switch(o.name){case this.tag:this.reset();break;default:this.parser=this.map[o.name],this.parser&&this.parser.parseOpen(o)}return!0}parseText(){}parseClose(o){if(this.parser)return this.parser.parseClose(o)||(this.parser=void 0),!0;switch(o){case this.tag:return this.model=this.map["a:blip"].model,!1;default:return!0}}}},{"../base-xform":32,"./blip-xform":58}],58:[function(e,t,n){"use strict";let i=e("../base-xform");t.exports=class extends i{get tag(){return"a:blip"}render(r,o){r.leafNode(this.tag,{"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","r:embed":o.rId,cstate:"print"})}parseOpen(r){switch(r.name){case this.tag:return this.model={rId:r.attributes["r:embed"]},!0;default:return!0}}parseText(){}parseClose(r){switch(r){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],59:[function(e,t,n){"use strict";let i=e("../base-xform");t.exports=class extends i{get tag(){return"xdr:cNvPicPr"}render(r){r.openNode(this.tag),r.leafNode("a:picLocks",{noChangeAspect:"1"}),r.closeNode()}parseOpen(r){switch(r.name){case this.tag:default:return!0}}parseText(){}parseClose(r){switch(r){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],60:[function(e,t,n){"use strict";let i=e("../base-xform"),r=e("./hlink-click-xform"),o=e("./ext-lst-xform");t.exports=class extends i{constructor(){super(),this.map={"a:hlinkClick":new r,"a:extLst":new o}}get tag(){return"xdr:cNvPr"}render(a,s){a.openNode(this.tag,{id:s.index,name:"Picture "+s.index}),this.map["a:hlinkClick"].render(a,s),this.map["a:extLst"].render(a,s),a.closeNode()}parseOpen(a){if(this.parser)return this.parser.parseOpen(a),!0;switch(a.name){case this.tag:this.reset();break;default:this.parser=this.map[a.name],this.parser&&this.parser.parseOpen(a)}return!0}parseText(){}parseClose(a){if(this.parser)return this.parser.parseClose(a)||(this.parser=void 0),!0;switch(a){case this.tag:return this.model=this.map["a:hlinkClick"].model,!1;default:return!0}}}},{"../base-xform":32,"./ext-lst-xform":63,"./hlink-click-xform":65}],61:[function(e,t,n){"use strict";let i=e("../base-xform"),r=e("../simple/integer-xform");t.exports=class extends i{constructor(o){super(),this.tag=o.tag,this.map={"xdr:col":new r({tag:"xdr:col",zero:!0}),"xdr:colOff":new r({tag:"xdr:colOff",zero:!0}),"xdr:row":new r({tag:"xdr:row",zero:!0}),"xdr:rowOff":new r({tag:"xdr:rowOff",zero:!0})}}render(o,a){o.openNode(this.tag),this.map["xdr:col"].render(o,a.nativeCol),this.map["xdr:colOff"].render(o,a.nativeColOff),this.map["xdr:row"].render(o,a.nativeRow),this.map["xdr:rowOff"].render(o,a.nativeRowOff),o.closeNode()}parseOpen(o){if(this.parser)return this.parser.parseOpen(o),!0;switch(o.name){case this.tag:this.reset();break;default:this.parser=this.map[o.name],this.parser&&this.parser.parseOpen(o)}return!0}parseText(o){this.parser&&this.parser.parseText(o)}parseClose(o){if(this.parser)return this.parser.parseClose(o)||(this.parser=void 0),!0;switch(o){case this.tag:return this.model={nativeCol:this.map["xdr:col"].model,nativeColOff:this.map["xdr:colOff"].model,nativeRow:this.map["xdr:row"].model,nativeRowOff:this.map["xdr:rowOff"].model},!1;default:return!0}}}},{"../base-xform":32,"../simple/integer-xform":118}],62:[function(e,t,n){"use strict";let i=e("../../../utils/col-cache"),r=e("../../../utils/xml-stream"),o=e("../base-xform"),a=e("./two-cell-anchor-xform"),s=e("./one-cell-anchor-xform");class u extends o{constructor(){super(),this.map={"xdr:twoCellAnchor":new a,"xdr:oneCellAnchor":new s}}prepare(c){c.anchors.forEach((d,m)=>{d.anchorType=function(v){return(typeof v.range=="string"?i.decode(v.range):v.range).br?"xdr:twoCellAnchor":"xdr:oneCellAnchor"}(d),this.map[d.anchorType].prepare(d,{index:m})})}get tag(){return"xdr:wsDr"}render(c,d){c.openXml(r.StdDocAttributes),c.openNode(this.tag,u.DRAWING_ATTRIBUTES),d.anchors.forEach(m=>{this.map[m.anchorType].render(c,m)}),c.closeNode()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case this.tag:this.reset(),this.model={anchors:[]};break;default:this.parser=this.map[c.name],this.parser&&this.parser.parseOpen(c)}return!0}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){if(this.parser)return this.parser.parseClose(c)||(this.model.anchors.push(this.parser.model),this.parser=void 0),!0;switch(c){case this.tag:return!1;default:return!0}}reconcile(c,d){c.anchors.forEach(m=>{m.br?this.map["xdr:twoCellAnchor"].reconcile(m,d):this.map["xdr:oneCellAnchor"].reconcile(m,d)})}}u.DRAWING_ATTRIBUTES={"xmlns:xdr":"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing","xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main"},t.exports=u},{"../../../utils/col-cache":19,"../../../utils/xml-stream":28,"../base-xform":32,"./one-cell-anchor-xform":67,"./two-cell-anchor-xform":70}],63:[function(e,t,n){"use strict";let i=e("../base-xform");t.exports=class extends i{get tag(){return"a:extLst"}render(r){r.openNode(this.tag),r.openNode("a:ext",{uri:"{FF2B5EF4-FFF2-40B4-BE49-F238E27FC236}"}),r.leafNode("a16:creationId",{"xmlns:a16":"http://schemas.microsoft.com/office/drawing/2014/main",id:"{00000000-0008-0000-0000-000002000000}"}),r.closeNode(),r.closeNode()}parseOpen(r){switch(r.name){case this.tag:default:return!0}}parseText(){}parseClose(r){switch(r){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],64:[function(e,t,n){"use strict";let i=e("../base-xform");t.exports=class extends i{constructor(r){super(),this.tag=r.tag,this.map={}}render(r,o){r.openNode(this.tag);let a=Math.floor(9525*o.width),s=Math.floor(9525*o.height);r.addAttribute("cx",a),r.addAttribute("cy",s),r.closeNode()}parseOpen(r){return r.name===this.tag&&(this.model={width:parseInt(r.attributes.cx||"0",10)/9525,height:parseInt(r.attributes.cy||"0",10)/9525},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],65:[function(e,t,n){"use strict";let i=e("../base-xform");t.exports=class extends i{get tag(){return"a:hlinkClick"}render(r,o){o.hyperlinks&&o.hyperlinks.rId&&r.leafNode(this.tag,{"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","r:id":o.hyperlinks.rId,tooltip:o.hyperlinks.tooltip})}parseOpen(r){switch(r.name){case this.tag:return this.model={hyperlinks:{rId:r.attributes["r:id"],tooltip:r.attributes.tooltip}},!0;default:return!0}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],66:[function(e,t,n){"use strict";let i=e("../base-xform"),r=e("./c-nv-pr-xform"),o=e("./c-nv-pic-pr-xform");t.exports=class extends i{constructor(){super(),this.map={"xdr:cNvPr":new r,"xdr:cNvPicPr":new o}}get tag(){return"xdr:nvPicPr"}render(a,s){a.openNode(this.tag),this.map["xdr:cNvPr"].render(a,s),this.map["xdr:cNvPicPr"].render(a,s),a.closeNode()}parseOpen(a){if(this.parser)return this.parser.parseOpen(a),!0;switch(a.name){case this.tag:this.reset();break;default:this.parser=this.map[a.name],this.parser&&this.parser.parseOpen(a)}return!0}parseText(){}parseClose(a){if(this.parser)return this.parser.parseClose(a)||(this.parser=void 0),!0;switch(a){case this.tag:return this.model=this.map["xdr:cNvPr"].model,!1;default:return!0}}}},{"../base-xform":32,"./c-nv-pic-pr-xform":59,"./c-nv-pr-xform":60}],67:[function(e,t,n){"use strict";let i=e("./base-cell-anchor-xform"),r=e("../static-xform"),o=e("./cell-position-xform"),a=e("./ext-xform"),s=e("./pic-xform");t.exports=class extends i{constructor(){super(),this.map={"xdr:from":new o({tag:"xdr:from"}),"xdr:ext":new a({tag:"xdr:ext"}),"xdr:pic":new s,"xdr:clientData":new r({tag:"xdr:clientData"})}}get tag(){return"xdr:oneCellAnchor"}prepare(u,f){this.map["xdr:pic"].prepare(u.picture,f)}render(u,f){u.openNode(this.tag,{editAs:f.range.editAs||"oneCell"}),this.map["xdr:from"].render(u,f.range.tl),this.map["xdr:ext"].render(u,f.range.ext),this.map["xdr:pic"].render(u,f.picture),this.map["xdr:clientData"].render(u,{}),u.closeNode()}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.parser=void 0),!0;switch(u){case this.tag:return this.model.range.tl=this.map["xdr:from"].model,this.model.range.ext=this.map["xdr:ext"].model,this.model.picture=this.map["xdr:pic"].model,!1;default:return!0}}reconcile(u,f){u.medium=this.reconcilePicture(u.picture,f)}}},{"../static-xform":120,"./base-cell-anchor-xform":56,"./cell-position-xform":61,"./ext-xform":64,"./pic-xform":68}],68:[function(e,t,n){"use strict";let i=e("../base-xform"),r=e("../static-xform"),o=e("./blip-fill-xform"),a=e("./nv-pic-pr-xform"),s=e("./sp-pr");t.exports=class extends i{constructor(){super(),this.map={"xdr:nvPicPr":new a,"xdr:blipFill":new o,"xdr:spPr":new r(s)}}get tag(){return"xdr:pic"}prepare(u,f){u.index=f.index+1}render(u,f){u.openNode(this.tag),this.map["xdr:nvPicPr"].render(u,f),this.map["xdr:blipFill"].render(u,f),this.map["xdr:spPr"].render(u,f),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case this.tag:this.reset();break;default:this.parser=this.map[u.name],this.parser&&this.parser.parseOpen(u)}return!0}parseText(){}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.mergeModel(this.parser.model),this.parser=void 0),!0;switch(u){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"../static-xform":120,"./blip-fill-xform":57,"./nv-pic-pr-xform":66,"./sp-pr":69}],69:[function(e,t,n){"use strict";t.exports={tag:"xdr:spPr",c:[{tag:"a:xfrm",c:[{tag:"a:off",$:{x:"0",y:"0"}},{tag:"a:ext",$:{cx:"0",cy:"0"}}]},{tag:"a:prstGeom",$:{prst:"rect"},c:[{tag:"a:avLst"}]}]}},{}],70:[function(e,t,n){"use strict";let i=e("./base-cell-anchor-xform"),r=e("../static-xform"),o=e("./cell-position-xform"),a=e("./pic-xform");t.exports=class extends i{constructor(){super(),this.map={"xdr:from":new o({tag:"xdr:from"}),"xdr:to":new o({tag:"xdr:to"}),"xdr:pic":new a,"xdr:clientData":new r({tag:"xdr:clientData"})}}get tag(){return"xdr:twoCellAnchor"}prepare(s,u){this.map["xdr:pic"].prepare(s.picture,u)}render(s,u){s.openNode(this.tag,{editAs:u.range.editAs||"oneCell"}),this.map["xdr:from"].render(s,u.range.tl),this.map["xdr:to"].render(s,u.range.br),this.map["xdr:pic"].render(s,u.picture),this.map["xdr:clientData"].render(s,{}),s.closeNode()}parseClose(s){if(this.parser)return this.parser.parseClose(s)||(this.parser=void 0),!0;switch(s){case this.tag:return this.model.range.tl=this.map["xdr:from"].model,this.model.range.br=this.map["xdr:to"].model,this.model.picture=this.map["xdr:pic"].model,!1;default:return!0}}reconcile(s,u){s.medium=this.reconcilePicture(s.picture,u)}}},{"../static-xform":120,"./base-cell-anchor-xform":56,"./cell-position-xform":61,"./pic-xform":68}],71:[function(e,t,n){"use strict";let i=e("./base-xform");t.exports=class extends i{constructor(r){super(),this.tag=r.tag,this.always=!!r.always,this.count=r.count,this.empty=r.empty,this.$count=r.$count||"count",this.$=r.$,this.childXform=r.childXform,this.maxItems=r.maxItems}prepare(r,o){let{childXform:a}=this;r&&r.forEach((s,u)=>{o.index=u,a.prepare(s,o)})}render(r,o){if(this.always||o&&o.length){r.openNode(this.tag,this.$),this.count&&r.addAttribute(this.$count,o&&o.length||0);let{childXform:a}=this;(o||[]).forEach((s,u)=>{a.render(r,s,u)}),r.closeNode()}else this.empty&&r.leafNode(this.tag)}parseOpen(r){if(this.parser)return this.parser.parseOpen(r),!0;switch(r.name){case this.tag:return this.model=[],!0;default:return!!this.childXform.parseOpen(r)&&(this.parser=this.childXform,!0)}}parseText(r){this.parser&&this.parser.parseText(r)}parseClose(r){if(this.parser){if(!this.parser.parseClose(r)&&(this.model.push(this.parser.model),this.parser=void 0,this.maxItems&&this.model.length>this.maxItems))throw new Error(`Max ${this.childXform.tag} count (${this.maxItems}) exceeded`);return!0}return!1}reconcile(r,o){if(r){let{childXform:a}=this;r.forEach(s=>{a.reconcile(s,o)})}}}},{"./base-xform":32}],72:[function(e,t,n){"use strict";let i=e("../../../utils/col-cache"),r=e("../base-xform");t.exports=class extends r{get tag(){return"autoFilter"}render(o,a){if(a)if(typeof a=="string")o.leafNode("autoFilter",{ref:a});else{let s=function(c){return typeof c=="string"?c:i.getAddress(c.row,c.column).address},u=s(a.from),f=s(a.to);u&&f&&o.leafNode("autoFilter",{ref:`${u}:${f}`})}}parseOpen(o){o.name==="autoFilter"&&(this.model=o.attributes.ref)}}},{"../../../utils/col-cache":19,"../base-xform":32}],73:[function(e,t,n){"use strict";let i=e("../../../utils/utils"),r=e("../base-xform"),o=e("../../../doc/range"),a=e("../../../doc/enums"),s=e("../strings/rich-text-xform");function u(f){if(f==null)return a.ValueType.Null;if(f instanceof String||typeof f=="string")return a.ValueType.String;if(typeof f=="number")return a.ValueType.Number;if(typeof f=="boolean")return a.ValueType.Boolean;if(f instanceof Date)return a.ValueType.Date;if(f.text&&f.hyperlink)return a.ValueType.Hyperlink;if(f.formula)return a.ValueType.Formula;if(f.error)return a.ValueType.Error;throw new Error("I could not understand type of value")}t.exports=class extends r{constructor(){super(),this.richTextXForm=new s}get tag(){return"c"}prepare(f,c){let d=c.styles.addStyleModel(f.style||{},function(m){switch(m.type){case a.ValueType.Formula:return u(m.result);default:return m.type}}(f));switch(d&&(f.styleId=d),f.comment&&c.comments.push({...f.comment,ref:f.address}),f.type){case a.ValueType.String:case a.ValueType.RichText:c.sharedStrings&&(f.ssId=c.sharedStrings.add(f.value));break;case a.ValueType.Date:c.date1904&&(f.date1904=!0);break;case a.ValueType.Hyperlink:c.sharedStrings&&f.text!==void 0&&f.text!==null&&(f.ssId=c.sharedStrings.add(f.text)),c.hyperlinks.push({address:f.address,target:f.hyperlink,tooltip:f.tooltip});break;case a.ValueType.Merge:c.merges.add(f);break;case a.ValueType.Formula:if(c.date1904&&(f.date1904=!0),f.shareType==="shared"&&(f.si=c.siFormulae++),f.formula)c.formulae[f.address]=f;else if(f.sharedFormula){let m=c.formulae[f.sharedFormula];if(!m)throw new Error("Shared Formula master must exist above and or left of clone for cell "+f.address);m.si===void 0?(m.shareType="shared",m.si=c.siFormulae++,m.range=new o(m.address,f.address)):m.range&&m.range.expandToAddress(f.address),f.si=m.si}}}renderFormula(f,c){let d=null;switch(c.shareType){case"shared":d={t:"shared",ref:c.ref||c.range.range,si:c.si};break;case"array":d={t:"array",ref:c.ref};break;default:c.si!==void 0&&(d={t:"shared",si:c.si})}switch(u(c.result)){case a.ValueType.Null:f.leafNode("f",d,c.formula);break;case a.ValueType.String:f.addAttribute("t","str"),f.leafNode("f",d,c.formula),f.leafNode("v",null,c.result);break;case a.ValueType.Number:f.leafNode("f",d,c.formula),f.leafNode("v",null,c.result);break;case a.ValueType.Boolean:f.addAttribute("t","b"),f.leafNode("f",d,c.formula),f.leafNode("v",null,c.result?1:0);break;case a.ValueType.Error:f.addAttribute("t","e"),f.leafNode("f",d,c.formula),f.leafNode("v",null,c.result.error);break;case a.ValueType.Date:f.leafNode("f",d,c.formula),f.leafNode("v",null,i.dateToExcel(c.result,c.date1904));break;default:throw new Error("I could not understand type of value")}}render(f,c){if(c.type!==a.ValueType.Null||c.styleId){switch(f.openNode("c"),f.addAttribute("r",c.address),c.styleId&&f.addAttribute("s",c.styleId),c.type){case a.ValueType.Null:break;case a.ValueType.Number:f.leafNode("v",null,c.value);break;case a.ValueType.Boolean:f.addAttribute("t","b"),f.leafNode("v",null,c.value?"1":"0");break;case a.ValueType.Error:f.addAttribute("t","e"),f.leafNode("v",null,c.value.error);break;case a.ValueType.String:case a.ValueType.RichText:c.ssId!==void 0?(f.addAttribute("t","s"),f.leafNode("v",null,c.ssId)):c.value&&c.value.richText?(f.addAttribute("t","inlineStr"),f.openNode("is"),c.value.richText.forEach(d=>{this.richTextXForm.render(f,d)}),f.closeNode("is")):(f.addAttribute("t","str"),f.leafNode("v",null,c.value));break;case a.ValueType.Date:f.leafNode("v",null,i.dateToExcel(c.value,c.date1904));break;case a.ValueType.Hyperlink:c.ssId!==void 0?(f.addAttribute("t","s"),f.leafNode("v",null,c.ssId)):(f.addAttribute("t","str"),f.leafNode("v",null,c.text));break;case a.ValueType.Formula:this.renderFormula(f,c);break;case a.ValueType.Merge:}f.closeNode()}}parseOpen(f){if(this.parser)return this.parser.parseOpen(f),!0;switch(f.name){case"c":return this.model={address:f.attributes.r},this.t=f.attributes.t,f.attributes.s&&(this.model.styleId=parseInt(f.attributes.s,10)),!0;case"f":return this.currentNode="f",this.model.si=f.attributes.si,this.model.shareType=f.attributes.t,this.model.ref=f.attributes.ref,!0;case"v":return this.currentNode="v",!0;case"t":return this.currentNode="t",!0;case"r":return this.parser=this.richTextXForm,this.parser.parseOpen(f),!0;default:return!1}}parseText(f){if(this.parser)this.parser.parseText(f);else switch(this.currentNode){case"f":this.model.formula=this.model.formula?this.model.formula+f:f;break;case"v":case"t":this.model.value&&this.model.value.richText?this.model.value.richText.text=this.model.value.richText.text?this.model.value.richText.text+f:f:this.model.value=this.model.value?this.model.value+f:f}}parseClose(f){switch(f){case"c":{let{model:c}=this;if(c.formula||c.shareType)c.type=a.ValueType.Formula,c.value&&(this.t==="str"?c.result=i.xmlDecode(c.value):this.t==="b"?c.result=parseInt(c.value,10)!==0:this.t==="e"?c.result={error:c.value}:c.result=parseFloat(c.value),c.value=void 0);else if(c.value!==void 0)switch(this.t){case"s":c.type=a.ValueType.String,c.value=parseInt(c.value,10);break;case"str":c.type=a.ValueType.String,c.value=i.xmlDecode(c.value);break;case"inlineStr":c.type=a.ValueType.String;break;case"b":c.type=a.ValueType.Boolean,c.value=parseInt(c.value,10)!==0;break;case"e":c.type=a.ValueType.Error,c.value={error:c.value};break;default:c.type=a.ValueType.Number,c.value=parseFloat(c.value)}else c.styleId?c.type=a.ValueType.Null:c.type=a.ValueType.Merge;return!1}case"f":case"v":case"is":return this.currentNode=void 0,!0;case"t":return this.parser?(this.parser.parseClose(f),!0):(this.currentNode=void 0,!0);case"r":return this.model.value=this.model.value||{},this.model.value.richText=this.model.value.richText||[],this.model.value.richText.push(this.parser.model),this.parser=void 0,this.currentNode=void 0,!0;default:return!!this.parser&&(this.parser.parseClose(f),!0)}}reconcile(f,c){let d=f.styleId&&c.styles&&c.styles.getStyleModel(f.styleId);switch(d&&(f.style=d),f.styleId!==void 0&&(f.styleId=void 0),f.type){case a.ValueType.String:typeof f.value=="number"&&c.sharedStrings&&(f.value=c.sharedStrings.getString(f.value)),f.value.richText&&(f.type=a.ValueType.RichText);break;case a.ValueType.Number:d&&i.isDateFmt(d.numFmt)&&(f.type=a.ValueType.Date,f.value=i.excelToDate(f.value,c.date1904));break;case a.ValueType.Formula:f.result!==void 0&&d&&i.isDateFmt(d.numFmt)&&(f.result=i.excelToDate(f.result,c.date1904)),f.shareType==="shared"&&(f.ref?c.formulae[f.si]=f.address:(f.sharedFormula=c.formulae[f.si],delete f.shareType),delete f.si)}let m=c.hyperlinkMap[f.address];m&&(f.type===a.ValueType.Formula?(f.text=f.result,f.result=void 0):(f.text=f.value,f.value=void 0),f.type=a.ValueType.Hyperlink,f.hyperlink=m);let v=c.commentsMap&&c.commentsMap[f.address];v&&(f.comment=v)}}},{"../../../doc/enums":7,"../../../doc/range":10,"../../../utils/utils":27,"../base-xform":32,"../strings/rich-text-xform":122}],74:[function(e,t,n){"use strict";let i=e("../../base-xform");t.exports=class extends i{get tag(){return"x14:cfIcon"}render(r,o){r.leafNode(this.tag,{iconSet:o.iconSet,iconId:o.iconId})}parseOpen(r){let{attributes:o}=r;this.model={iconSet:o.iconSet,iconId:i.toIntValue(o.iconId)}}parseClose(r){return r!==this.tag}}},{"../../base-xform":32}],75:[function(e,t,n){"use strict";let{v4:i}=e("uuid"),r=e("../../base-xform"),o=e("../../composite-xform"),a=e("./databar-ext-xform"),s=e("./icon-set-ext-xform"),u={"3Triangles":!0,"3Stars":!0,"5Boxes":!0};class f extends o{constructor(){super(),this.map={"x14:dataBar":this.databarXform=new a,"x14:iconSet":this.iconSetXform=new s}}get tag(){return"x14:cfRule"}static isExt(d){return d.type==="dataBar"?a.isExt(d):!(d.type!=="iconSet"||!d.custom&&!u[d.iconSet])}prepare(d){f.isExt(d)&&(d.x14Id=`{${i()}}`.toUpperCase())}render(d,m){if(f.isExt(m))switch(m.type){case"dataBar":this.renderDataBar(d,m);break;case"iconSet":this.renderIconSet(d,m)}}renderDataBar(d,m){d.openNode(this.tag,{type:"dataBar",id:m.x14Id}),this.databarXform.render(d,m),d.closeNode()}renderIconSet(d,m){d.openNode(this.tag,{type:"iconSet",priority:m.priority,id:m.x14Id||`{${i()}}`}),this.iconSetXform.render(d,m),d.closeNode()}createNewModel(d){let{attributes:m}=d;return{type:m.type,x14Id:m.id,priority:r.toIntValue(m.priority)}}onParserClose(d,m){Object.assign(this.model,m.model)}}t.exports=f},{"../../base-xform":32,"../../composite-xform":48,"./databar-ext-xform":79,"./icon-set-ext-xform":81,uuid:528}],76:[function(e,t,n){"use strict";let i=e("../../composite-xform"),r=e("./f-ext-xform");t.exports=class extends i{constructor(){super(),this.map={"xm:f":this.fExtXform=new r}}get tag(){return"x14:cfvo"}render(o,a){o.openNode(this.tag,{type:a.type}),a.value!==void 0&&this.fExtXform.render(o,a.value),o.closeNode()}createNewModel(o){return{type:o.attributes.type}}onParserClose(o,a){switch(o){case"xm:f":this.model.value=a.model?parseFloat(a.model):0}}}},{"../../composite-xform":48,"./f-ext-xform":80}],77:[function(e,t,n){"use strict";let i=e("../../composite-xform"),r=e("./sqref-ext-xform"),o=e("./cf-rule-ext-xform");t.exports=class extends i{constructor(){super(),this.map={"xm:sqref":this.sqRef=new r,"x14:cfRule":this.cfRule=new o}}get tag(){return"x14:conditionalFormatting"}prepare(a,s){a.rules.forEach(u=>{this.cfRule.prepare(u,s)})}render(a,s){s.rules.some(o.isExt)&&(a.openNode(this.tag,{"xmlns:xm":"http://schemas.microsoft.com/office/excel/2006/main"}),s.rules.filter(o.isExt).forEach(u=>this.cfRule.render(a,u)),this.sqRef.render(a,s.ref),a.closeNode())}createNewModel(){return{rules:[]}}onParserClose(a,s){switch(a){case"xm:sqref":this.model.ref=s.model;break;case"x14:cfRule":this.model.rules.push(s.model)}}}},{"../../composite-xform":48,"./cf-rule-ext-xform":75,"./sqref-ext-xform":82}],78:[function(e,t,n){"use strict";let i=e("../../composite-xform"),r=e("./cf-rule-ext-xform"),o=e("./conditional-formatting-ext-xform");t.exports=class extends i{constructor(){super(),this.map={"x14:conditionalFormatting":this.cfXform=new o}}get tag(){return"x14:conditionalFormattings"}hasContent(a){return a.hasExtContent===void 0&&(a.hasExtContent=a.some(s=>s.rules.some(r.isExt))),a.hasExtContent}prepare(a,s){a.forEach(u=>{this.cfXform.prepare(u,s)})}render(a,s){this.hasContent(s)&&(a.openNode(this.tag),s.forEach(u=>this.cfXform.render(a,u)),a.closeNode())}createNewModel(){return[]}onParserClose(a,s){this.model.push(s.model)}}},{"../../composite-xform":48,"./cf-rule-ext-xform":75,"./conditional-formatting-ext-xform":77}],79:[function(e,t,n){"use strict";let i=e("../../base-xform"),r=e("../../composite-xform"),o=e("../../style/color-xform"),a=e("./cfvo-ext-xform");t.exports=class extends r{constructor(){super(),this.map={"x14:cfvo":this.cfvoXform=new a,"x14:borderColor":this.borderColorXform=new o("x14:borderColor"),"x14:negativeBorderColor":this.negativeBorderColorXform=new o("x14:negativeBorderColor"),"x14:negativeFillColor":this.negativeFillColorXform=new o("x14:negativeFillColor"),"x14:axisColor":this.axisColorXform=new o("x14:axisColor")}}static isExt(s){return!s.gradient}get tag(){return"x14:dataBar"}render(s,u){s.openNode(this.tag,{minLength:i.toIntAttribute(u.minLength,0,!0),maxLength:i.toIntAttribute(u.maxLength,100,!0),border:i.toBoolAttribute(u.border,!1),gradient:i.toBoolAttribute(u.gradient,!0),negativeBarColorSameAsPositive:i.toBoolAttribute(u.negativeBarColorSameAsPositive,!0),negativeBarBorderColorSameAsPositive:i.toBoolAttribute(u.negativeBarBorderColorSameAsPositive,!0),axisPosition:i.toAttribute(u.axisPosition,"auto"),direction:i.toAttribute(u.direction,"leftToRight")}),u.cfvo.forEach(f=>{this.cfvoXform.render(s,f)}),this.borderColorXform.render(s,u.borderColor),this.negativeBorderColorXform.render(s,u.negativeBorderColor),this.negativeFillColorXform.render(s,u.negativeFillColor),this.axisColorXform.render(s,u.axisColor),s.closeNode()}createNewModel(s){let{attributes:u}=s;return{cfvo:[],minLength:i.toIntValue(u.minLength,0),maxLength:i.toIntValue(u.maxLength,100),border:i.toBoolValue(u.border,!1),gradient:i.toBoolValue(u.gradient,!0),negativeBarColorSameAsPositive:i.toBoolValue(u.negativeBarColorSameAsPositive,!0),negativeBarBorderColorSameAsPositive:i.toBoolValue(u.negativeBarBorderColorSameAsPositive,!0),axisPosition:i.toStringValue(u.axisPosition,"auto"),direction:i.toStringValue(u.direction,"leftToRight")}}onParserClose(s,u){let[,f]=s.split(":");switch(f){case"cfvo":this.model.cfvo.push(u.model);break;default:this.model[f]=u.model}}}},{"../../base-xform":32,"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-ext-xform":76}],80:[function(e,t,n){"use strict";let i=e("../../base-xform");t.exports=class extends i{get tag(){return"xm:f"}render(r,o){r.leafNode(this.tag,null,o)}parseOpen(){this.model=""}parseText(r){this.model+=r}parseClose(r){return r!==this.tag}}},{"../../base-xform":32}],81:[function(e,t,n){"use strict";let i=e("../../base-xform"),r=e("../../composite-xform"),o=e("./cfvo-ext-xform"),a=e("./cf-icon-ext-xform");t.exports=class extends r{constructor(){super(),this.map={"x14:cfvo":this.cfvoXform=new o,"x14:cfIcon":this.cfIconXform=new a}}get tag(){return"x14:iconSet"}render(s,u){s.openNode(this.tag,{iconSet:i.toStringAttribute(u.iconSet),reverse:i.toBoolAttribute(u.reverse,!1),showValue:i.toBoolAttribute(u.showValue,!0),custom:i.toBoolAttribute(u.icons,!1)}),u.cfvo.forEach(f=>{this.cfvoXform.render(s,f)}),u.icons&&u.icons.forEach((f,c)=>{f.iconId=c,this.cfIconXform.render(s,f)}),s.closeNode()}createNewModel(s){let{attributes:u}=s;return{cfvo:[],iconSet:i.toStringValue(u.iconSet,"3TrafficLights"),reverse:i.toBoolValue(u.reverse,!1),showValue:i.toBoolValue(u.showValue,!0)}}onParserClose(s,u){let[,f]=s.split(":");switch(f){case"cfvo":this.model.cfvo.push(u.model);break;case"cfIcon":this.model.icons||(this.model.icons=[]),this.model.icons.push(u.model);break;default:this.model[f]=u.model}}}},{"../../base-xform":32,"../../composite-xform":48,"./cf-icon-ext-xform":74,"./cfvo-ext-xform":76}],82:[function(e,t,n){"use strict";let i=e("../../base-xform");t.exports=class extends i{get tag(){return"xm:sqref"}render(r,o){r.leafNode(this.tag,null,o)}parseOpen(){this.model=""}parseText(r){this.model+=r}parseClose(r){return r!==this.tag}}},{"../../base-xform":32}],83:[function(e,t,n){"use strict";let i=e("../../base-xform"),r=e("../../composite-xform"),o=e("../../../../doc/range"),a=e("./databar-xform"),s=e("./ext-lst-ref-xform"),u=e("./formula-xform"),f=e("./color-scale-xform"),c=e("./icon-set-xform"),d={"3Triangles":!0,"3Stars":!0,"5Boxes":!0},m=p=>{let{type:_,operator:y}=p;switch(_){case"containsText":case"containsBlanks":case"notContainsBlanks":case"containsErrors":case"notContainsErrors":return{type:"containsText",operator:_};default:return{type:_,operator:y}}};class v extends r{constructor(){super(),this.map={dataBar:this.databarXform=new a,extLst:this.extLstRefXform=new s,formula:this.formulaXform=new u,colorScale:this.colorScaleXform=new f,iconSet:this.iconSetXform=new c}}get tag(){return"cfRule"}static isPrimitive(_){return _.type!=="iconSet"||!_.custom&&!d[_.iconSet]}render(_,y){switch(y.type){case"expression":this.renderExpression(_,y);break;case"cellIs":this.renderCellIs(_,y);break;case"top10":this.renderTop10(_,y);break;case"aboveAverage":this.renderAboveAverage(_,y);break;case"dataBar":this.renderDataBar(_,y);break;case"colorScale":this.renderColorScale(_,y);break;case"iconSet":this.renderIconSet(_,y);break;case"containsText":this.renderText(_,y);break;case"timePeriod":this.renderTimePeriod(_,y)}}renderExpression(_,y){_.openNode(this.tag,{type:"expression",dxfId:y.dxfId,priority:y.priority}),this.formulaXform.render(_,y.formulae[0]),_.closeNode()}renderCellIs(_,y){_.openNode(this.tag,{type:"cellIs",dxfId:y.dxfId,priority:y.priority,operator:y.operator}),y.formulae.forEach(x=>{this.formulaXform.render(_,x)}),_.closeNode()}renderTop10(_,y){_.leafNode(this.tag,{type:"top10",dxfId:y.dxfId,priority:y.priority,percent:i.toBoolAttribute(y.percent,!1),bottom:i.toBoolAttribute(y.bottom,!1),rank:i.toIntValue(y.rank,10,!0)})}renderAboveAverage(_,y){_.leafNode(this.tag,{type:"aboveAverage",dxfId:y.dxfId,priority:y.priority,aboveAverage:i.toBoolAttribute(y.aboveAverage,!0)})}renderDataBar(_,y){_.openNode(this.tag,{type:"dataBar",priority:y.priority}),this.databarXform.render(_,y),this.extLstRefXform.render(_,y),_.closeNode()}renderColorScale(_,y){_.openNode(this.tag,{type:"colorScale",priority:y.priority}),this.colorScaleXform.render(_,y),_.closeNode()}renderIconSet(_,y){v.isPrimitive(y)&&(_.openNode(this.tag,{type:"iconSet",priority:y.priority}),this.iconSetXform.render(_,y),_.closeNode())}renderText(_,y){_.openNode(this.tag,{type:y.operator,dxfId:y.dxfId,priority:y.priority,operator:i.toStringAttribute(y.operator,"containsText")});let x=(S=>{if(S.formulae&&S.formulae[0])return S.formulae[0];let O=new o(S.ref),{tl:B}=O;switch(S.operator){case"containsText":return`NOT(ISERROR(SEARCH("${S.text}",${B})))`;case"containsBlanks":return`LEN(TRIM(${B}))=0`;case"notContainsBlanks":return`LEN(TRIM(${B}))>0`;case"containsErrors":return`ISERROR(${B})`;case"notContainsErrors":return`NOT(ISERROR(${B}))`;default:return}})(y);x&&this.formulaXform.render(_,x),_.closeNode()}renderTimePeriod(_,y){_.openNode(this.tag,{type:"timePeriod",dxfId:y.dxfId,priority:y.priority,timePeriod:y.timePeriod});let x=(S=>{if(S.formulae&&S.formulae[0])return S.formulae[0];let O=new o(S.ref),{tl:B}=O;switch(S.timePeriod){case"thisWeek":return`AND(TODAY()-ROUNDDOWN(${B},0)<=WEEKDAY(TODAY())-1,ROUNDDOWN(${B},0)-TODAY()<=7-WEEKDAY(TODAY()))`;case"lastWeek":return`AND(TODAY()-ROUNDDOWN(${B},0)>=(WEEKDAY(TODAY())),TODAY()-ROUNDDOWN(${B},0)<(WEEKDAY(TODAY())+7))`;case"nextWeek":return`AND(ROUNDDOWN(${B},0)-TODAY()>(7-WEEKDAY(TODAY())),ROUNDDOWN(${B},0)-TODAY()<(15-WEEKDAY(TODAY())))`;case"yesterday":return`FLOOR(${B},1)=TODAY()-1`;case"today":return`FLOOR(${B},1)=TODAY()`;case"tomorrow":return`FLOOR(${B},1)=TODAY()+1`;case"last7Days":return`AND(TODAY()-FLOOR(${B},1)<=6,FLOOR(${B},1)<=TODAY())`;case"lastMonth":return`AND(MONTH(${B})=MONTH(EDATE(TODAY(),0-1)),YEAR(${B})=YEAR(EDATE(TODAY(),0-1)))`;case"thisMonth":return`AND(MONTH(${B})=MONTH(TODAY()),YEAR(${B})=YEAR(TODAY()))`;case"nextMonth":return`AND(MONTH(${B})=MONTH(EDATE(TODAY(),0+1)),YEAR(${B})=YEAR(EDATE(TODAY(),0+1)))`;default:return}})(y);x&&this.formulaXform.render(_,x),_.closeNode()}createNewModel(_){let{attributes:y}=_;return{...m(y),dxfId:i.toIntValue(y.dxfId),priority:i.toIntValue(y.priority),timePeriod:y.timePeriod,percent:i.toBoolValue(y.percent),bottom:i.toBoolValue(y.bottom),rank:i.toIntValue(y.rank),aboveAverage:i.toBoolValue(y.aboveAverage)}}onParserClose(_,y){switch(_){case"dataBar":case"extLst":case"colorScale":case"iconSet":Object.assign(this.model,y.model);break;case"formula":this.model.formulae=this.model.formulae||[],this.model.formulae.push(y.model)}}}t.exports=v},{"../../../../doc/range":10,"../../base-xform":32,"../../composite-xform":48,"./color-scale-xform":85,"./databar-xform":88,"./ext-lst-ref-xform":89,"./formula-xform":90,"./icon-set-xform":91}],84:[function(e,t,n){"use strict";let i=e("../../base-xform");t.exports=class extends i{get tag(){return"cfvo"}render(r,o){r.leafNode(this.tag,{type:o.type,val:o.value})}parseOpen(r){this.model={type:r.attributes.type,value:i.toFloatValue(r.attributes.val)}}parseClose(r){return r!==this.tag}}},{"../../base-xform":32}],85:[function(e,t,n){"use strict";let i=e("../../composite-xform"),r=e("../../style/color-xform"),o=e("./cfvo-xform");t.exports=class extends i{constructor(){super(),this.map={cfvo:this.cfvoXform=new o,color:this.colorXform=new r}}get tag(){return"colorScale"}render(a,s){a.openNode(this.tag),s.cfvo.forEach(u=>{this.cfvoXform.render(a,u)}),s.color.forEach(u=>{this.colorXform.render(a,u)}),a.closeNode()}createNewModel(a){return{cfvo:[],color:[]}}onParserClose(a,s){this.model[a].push(s.model)}}},{"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-xform":84}],86:[function(e,t,n){"use strict";let i=e("../../composite-xform"),r=e("./cf-rule-xform");t.exports=class extends i{constructor(){super(),this.map={cfRule:new r}}get tag(){return"conditionalFormatting"}render(o,a){a.rules.some(r.isPrimitive)&&(o.openNode(this.tag,{sqref:a.ref}),a.rules.forEach(s=>{r.isPrimitive(s)&&(s.ref=a.ref,this.map.cfRule.render(o,s))}),o.closeNode())}createNewModel(o){let{attributes:a}=o;return{ref:a.sqref,rules:[]}}onParserClose(o,a){this.model.rules.push(a.model)}}},{"../../composite-xform":48,"./cf-rule-xform":83}],87:[function(e,t,n){"use strict";let i=e("../../base-xform"),r=e("./conditional-formatting-xform");t.exports=class extends i{constructor(){super(),this.cfXform=new r}get tag(){return"conditionalFormatting"}reset(){this.model=[]}prepare(o,a){let s=o.reduce((u,f)=>Math.max(u,...f.rules.map(c=>c.priority||0)),1);o.forEach(u=>{u.rules.forEach(f=>{f.priority||(f.priority=s++),f.style&&(f.dxfId=a.styles.addDxfStyle(f.style))})})}render(o,a){a.forEach(s=>{this.cfXform.render(o,s)})}parseOpen(o){if(this.parser)return this.parser.parseOpen(o),!0;switch(o.name){case"conditionalFormatting":return this.parser=this.cfXform,this.parser.parseOpen(o),!0;default:return!1}}parseText(o){this.parser&&this.parser.parseText(o)}parseClose(o){return!!this.parser&&(!!this.parser.parseClose(o)||(this.model.push(this.parser.model),this.parser=void 0,!1))}reconcile(o,a){o.forEach(s=>{s.rules.forEach(u=>{u.dxfId!==void 0&&(u.style=a.styles.getDxfStyle(u.dxfId),delete u.dxfId)})})}}},{"../../base-xform":32,"./conditional-formatting-xform":86}],88:[function(e,t,n){"use strict";let i=e("../../composite-xform"),r=e("../../style/color-xform"),o=e("./cfvo-xform");t.exports=class extends i{constructor(){super(),this.map={cfvo:this.cfvoXform=new o,color:this.colorXform=new r}}get tag(){return"dataBar"}render(a,s){a.openNode(this.tag),s.cfvo.forEach(u=>{this.cfvoXform.render(a,u)}),this.colorXform.render(a,s.color),a.closeNode()}createNewModel(){return{cfvo:[]}}onParserClose(a,s){switch(a){case"cfvo":this.model.cfvo.push(s.model);break;case"color":this.model.color=s.model}}}},{"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-xform":84}],89:[function(e,t,n){"use strict";let i=e("../../base-xform"),r=e("../../composite-xform");class o extends i{get tag(){return"x14:id"}render(u,f){u.leafNode(this.tag,null,f)}parseOpen(){this.model=""}parseText(u){this.model+=u}parseClose(u){return u!==this.tag}}class a extends r{constructor(){super(),this.map={"x14:id":this.idXform=new o}}get tag(){return"ext"}render(u,f){u.openNode(this.tag,{uri:"{B025F937-C7B1-47D3-B67F-A62EFF666E3E}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"}),this.idXform.render(u,f.x14Id),u.closeNode()}createNewModel(){return{}}onParserClose(u,f){this.model.x14Id=f.model}}t.exports=class extends r{constructor(){super(),this.map={ext:new a}}get tag(){return"extLst"}render(s,u){s.openNode(this.tag),this.map.ext.render(s,u),s.closeNode()}createNewModel(){return{}}onParserClose(s,u){Object.assign(this.model,u.model)}}},{"../../base-xform":32,"../../composite-xform":48}],90:[function(e,t,n){"use strict";let i=e("../../base-xform");t.exports=class extends i{get tag(){return"formula"}render(r,o){r.leafNode(this.tag,null,o)}parseOpen(){this.model=""}parseText(r){this.model+=r}parseClose(r){return r!==this.tag}}},{"../../base-xform":32}],91:[function(e,t,n){"use strict";let i=e("../../base-xform"),r=e("../../composite-xform"),o=e("./cfvo-xform");t.exports=class extends r{constructor(){super(),this.map={cfvo:this.cfvoXform=new o}}get tag(){return"iconSet"}render(a,s){a.openNode(this.tag,{iconSet:i.toStringAttribute(s.iconSet,"3TrafficLights"),reverse:i.toBoolAttribute(s.reverse,!1),showValue:i.toBoolAttribute(s.showValue,!0)}),s.cfvo.forEach(u=>{this.cfvoXform.render(a,u)}),a.closeNode()}createNewModel(a){let{attributes:s}=a;return{iconSet:i.toStringValue(s.iconSet,"3TrafficLights"),reverse:i.toBoolValue(s.reverse),showValue:i.toBoolValue(s.showValue),cfvo:[]}}onParserClose(a,s){this.model[a].push(s.model)}}},{"../../base-xform":32,"../../composite-xform":48,"./cfvo-xform":84}],92:[function(e,t,n){"use strict";let i=e("../../../utils/utils"),r=e("../base-xform");t.exports=class extends r{get tag(){return"col"}prepare(o,a){let s=a.styles.addStyleModel(o.style||{});s&&(o.styleId=s)}render(o,a){o.openNode("col"),o.addAttribute("min",a.min),o.addAttribute("max",a.max),a.width&&o.addAttribute("width",a.width),a.styleId&&o.addAttribute("style",a.styleId),a.hidden&&o.addAttribute("hidden","1"),a.bestFit&&o.addAttribute("bestFit","1"),a.outlineLevel&&o.addAttribute("outlineLevel",a.outlineLevel),a.collapsed&&o.addAttribute("collapsed","1"),o.addAttribute("customWidth","1"),o.closeNode()}parseOpen(o){if(o.name==="col"){let a=this.model={min:parseInt(o.attributes.min||"0",10),max:parseInt(o.attributes.max||"0",10),width:o.attributes.width===void 0?void 0:parseFloat(o.attributes.width||"0")};return o.attributes.style&&(a.styleId=parseInt(o.attributes.style,10)),i.parseBoolean(o.attributes.hidden)&&(a.hidden=!0),i.parseBoolean(o.attributes.bestFit)&&(a.bestFit=!0),o.attributes.outlineLevel&&(a.outlineLevel=parseInt(o.attributes.outlineLevel,10)),i.parseBoolean(o.attributes.collapsed)&&(a.collapsed=!0),!0}return!1}parseText(){}parseClose(){return!1}reconcile(o,a){o.styleId&&(o.style=a.styles.getStyleModel(o.styleId))}}},{"../../../utils/utils":27,"../base-xform":32}],93:[function(e,t,n){"use strict";let i=e("../../../utils/under-dash"),r=e("../../../utils/utils"),o=e("../../../utils/col-cache"),a=e("../base-xform"),s=e("../../../doc/range");function u(c,d,m,v){let p=d[m];p!==void 0?c[m]=p:v!==void 0&&(c[m]=v)}function f(c,d,m,v){let p=d[m];p!==void 0?c[m]=r.parseBoolean(p):v!==void 0&&(c[m]=v)}t.exports=class extends a{get tag(){return"dataValidations"}render(c,d){let m=function(v){let p=i.map(v,(x,S)=>({address:S,dataValidation:x,marked:!1})).sort((x,S)=>i.strcmp(x.address,S.address)),_=i.keyBy(p,"address"),y=(x,S,O)=>{for(let B=0;B<S;B++){let U=o.encodeAddress(x.row+B,O);if(!v[U]||!i.isEqual(v[x.address],v[U]))return!1}return!0};return p.map(x=>{if(!x.marked){let S=o.decodeEx(x.address);if(S.dimensions)return _[S.dimensions].marked=!0,{...x.dataValidation,sqref:x.address};let O=1,B=o.encodeAddress(S.row+O,S.col);for(;v[B]&&i.isEqual(x.dataValidation,v[B]);)O++,B=o.encodeAddress(S.row+O,S.col);let U=1;for(;y(S,O,S.col+U);)U++;for(let z=0;z<O;z++)for(let q=0;q<U;q++)B=o.encodeAddress(S.row+z,S.col+q),_[B].marked=!0;if(O>1||U>1){let z=S.row+(O-1),q=S.col+(U-1);return{...x.dataValidation,sqref:`${x.address}:${o.encodeAddress(z,q)}`}}return{...x.dataValidation,sqref:x.address}}return null}).filter(Boolean)}(d);m.length&&(c.openNode("dataValidations",{count:m.length}),m.forEach(v=>{c.openNode("dataValidation"),v.type!=="any"&&(c.addAttribute("type",v.type),v.operator&&v.type!=="list"&&v.operator!=="between"&&c.addAttribute("operator",v.operator),v.allowBlank&&c.addAttribute("allowBlank","1")),v.showInputMessage&&c.addAttribute("showInputMessage","1"),v.promptTitle&&c.addAttribute("promptTitle",v.promptTitle),v.prompt&&c.addAttribute("prompt",v.prompt),v.showErrorMessage&&c.addAttribute("showErrorMessage","1"),v.errorStyle&&c.addAttribute("errorStyle",v.errorStyle),v.errorTitle&&c.addAttribute("errorTitle",v.errorTitle),v.error&&c.addAttribute("error",v.error),c.addAttribute("sqref",v.sqref),(v.formulae||[]).forEach((p,_)=>{c.openNode("formula"+(_+1)),v.type==="date"?c.writeText(r.dateToExcel(new Date(p))):c.writeText(p),c.closeNode()}),c.closeNode()}),c.closeNode())}parseOpen(c){switch(c.name){case"dataValidations":return this.model={},!0;case"dataValidation":{this._address=c.attributes.sqref;let d={type:c.attributes.type||"any",formulae:[]};switch(c.attributes.type&&f(d,c.attributes,"allowBlank"),f(d,c.attributes,"showInputMessage"),f(d,c.attributes,"showErrorMessage"),d.type){case"any":case"list":case"custom":break;default:u(d,c.attributes,"operator","between")}return u(d,c.attributes,"promptTitle"),u(d,c.attributes,"prompt"),u(d,c.attributes,"errorStyle"),u(d,c.attributes,"errorTitle"),u(d,c.attributes,"error"),this._dataValidation=d,!0}case"formula1":case"formula2":return this._formula=[],!0;default:return!1}}parseText(c){this._formula&&this._formula.push(c)}parseClose(c){switch(c){case"dataValidations":return!1;case"dataValidation":return this._dataValidation.formulae&&this._dataValidation.formulae.length||(delete this._dataValidation.formulae,delete this._dataValidation.operator),(this._address.split(/\s+/g)||[]).forEach(d=>{d.includes(":")?new s(d).forEachAddress(m=>{this.model[m]=this._dataValidation}):this.model[d]=this._dataValidation}),!0;case"formula1":case"formula2":{let d=this._formula.join("");switch(this._dataValidation.type){case"whole":case"textLength":d=parseInt(d,10);break;case"decimal":d=parseFloat(d);break;case"date":d=r.excelToDate(parseFloat(d))}return this._dataValidation.formulae.push(d),this._formula=void 0,!0}default:return!0}}}},{"../../../doc/range":10,"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/utils":27,"../base-xform":32}],94:[function(e,t,n){"use strict";let i=e("../base-xform");t.exports=class extends i{get tag(){return"dimension"}render(r,o){o&&r.leafNode("dimension",{ref:o})}parseOpen(r){return r.name==="dimension"&&(this.model=r.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],95:[function(e,t,n){"use strict";let i=e("../base-xform");t.exports=class extends i{get tag(){return"drawing"}render(r,o){o&&r.leafNode(this.tag,{"r:id":o.rId})}parseOpen(r){switch(r.name){case this.tag:return this.model={rId:r.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],96:[function(e,t,n){"use strict";let i=e("../composite-xform"),r=e("./cf-ext/conditional-formattings-ext-xform");class o extends i{constructor(){super(),this.map={"x14:conditionalFormattings":this.conditionalFormattings=new r}}get tag(){return"ext"}hasContent(s){return this.conditionalFormattings.hasContent(s.conditionalFormattings)}prepare(s,u){this.conditionalFormattings.prepare(s.conditionalFormattings,u)}render(s,u){s.openNode("ext",{uri:"{78C0D931-6437-407d-A8EE-F0AAD7539E65}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"}),this.conditionalFormattings.render(s,u.conditionalFormattings),s.closeNode()}createNewModel(){return{}}onParserClose(s,u){this.model[s]=u.model}}t.exports=class extends i{constructor(){super(),this.map={ext:this.ext=new o}}get tag(){return"extLst"}prepare(a,s){this.ext.prepare(a,s)}hasContent(a){return this.ext.hasContent(a)}render(a,s){this.hasContent(s)&&(a.openNode("extLst"),this.ext.render(a,s),a.closeNode())}createNewModel(){return{}}onParserClose(a,s){Object.assign(this.model,s.model)}}},{"../composite-xform":48,"./cf-ext/conditional-formattings-ext-xform":78}],97:[function(e,t,n){"use strict";let i=e("../base-xform");t.exports=class extends i{get tag(){return"headerFooter"}render(r,o){if(o){r.addRollback();let a=!1;r.openNode("headerFooter"),o.differentFirst&&(r.addAttribute("differentFirst","1"),a=!0),o.differentOddEven&&(r.addAttribute("differentOddEven","1"),a=!0),o.oddHeader&&typeof o.oddHeader=="string"&&(r.leafNode("oddHeader",null,o.oddHeader),a=!0),o.oddFooter&&typeof o.oddFooter=="string"&&(r.leafNode("oddFooter",null,o.oddFooter),a=!0),o.evenHeader&&typeof o.evenHeader=="string"&&(r.leafNode("evenHeader",null,o.evenHeader),a=!0),o.evenFooter&&typeof o.evenFooter=="string"&&(r.leafNode("evenFooter",null,o.evenFooter),a=!0),o.firstHeader&&typeof o.firstHeader=="string"&&(r.leafNode("firstHeader",null,o.firstHeader),a=!0),o.firstFooter&&typeof o.firstFooter=="string"&&(r.leafNode("firstFooter",null,o.firstFooter),a=!0),a?(r.closeNode(),r.commit()):r.rollback()}}parseOpen(r){switch(r.name){case"headerFooter":return this.model={},r.attributes.differentFirst&&(this.model.differentFirst=parseInt(r.attributes.differentFirst,0)===1),r.attributes.differentOddEven&&(this.model.differentOddEven=parseInt(r.attributes.differentOddEven,0)===1),!0;case"oddHeader":return this.currentNode="oddHeader",!0;case"oddFooter":return this.currentNode="oddFooter",!0;case"evenHeader":return this.currentNode="evenHeader",!0;case"evenFooter":return this.currentNode="evenFooter",!0;case"firstHeader":return this.currentNode="firstHeader",!0;case"firstFooter":return this.currentNode="firstFooter",!0;default:return!1}}parseText(r){switch(this.currentNode){case"oddHeader":this.model.oddHeader=r;break;case"oddFooter":this.model.oddFooter=r;break;case"evenHeader":this.model.evenHeader=r;break;case"evenFooter":this.model.evenFooter=r;break;case"firstHeader":this.model.firstHeader=r;break;case"firstFooter":this.model.firstFooter=r}}parseClose(){switch(this.currentNode){case"oddHeader":case"oddFooter":case"evenHeader":case"evenFooter":case"firstHeader":case"firstFooter":return this.currentNode=void 0,!0;default:return!1}}}},{"../base-xform":32}],98:[function(e,t,n){"use strict";let i=e("../base-xform");t.exports=class extends i{get tag(){return"hyperlink"}render(r,o){this.isInternalLink(o)?r.leafNode("hyperlink",{ref:o.address,"r:id":o.rId,tooltip:o.tooltip,location:o.target}):r.leafNode("hyperlink",{ref:o.address,"r:id":o.rId,tooltip:o.tooltip})}parseOpen(r){return r.name==="hyperlink"&&(this.model={address:r.attributes.ref,rId:r.attributes["r:id"],tooltip:r.attributes.tooltip},r.attributes.location&&(this.model.target=r.attributes.location),!0)}parseText(){}parseClose(){return!1}isInternalLink(r){return r.target&&/^[^!]+![a-zA-Z]+[\d]+$/.test(r.target)}}},{"../base-xform":32}],99:[function(e,t,n){"use strict";let i=e("../base-xform");t.exports=class extends i{get tag(){return"mergeCell"}render(r,o){r.leafNode("mergeCell",{ref:o})}parseOpen(r){return r.name==="mergeCell"&&(this.model=r.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],100:[function(e,t,n){"use strict";let i=e("../../../utils/under-dash"),r=e("../../../doc/range"),o=e("../../../utils/col-cache"),a=e("../../../doc/enums");t.exports=class{constructor(){this.merges={}}add(s){if(this.merges[s.master])this.merges[s.master].expandToAddress(s.address);else{let u=`${s.master}:${s.address}`;this.merges[s.master]=new r(u)}}get mergeCells(){return i.map(this.merges,s=>s.range)}reconcile(s,u){i.each(s,f=>{let c=o.decode(f);for(let d=c.top;d<=c.bottom;d++){let m=u[d-1];for(let v=c.left;v<=c.right;v++){let p=m.cells[v-1];p?p.type===a.ValueType.Merge&&(p.master=c.tl):m.cells[v]={type:a.ValueType.Null,address:o.encodeAddress(d,v)}}}})}getMasterAddress(s){let u=this.hash[s];return u&&u.tl}}},{"../../../doc/enums":7,"../../../doc/range":10,"../../../utils/col-cache":19,"../../../utils/under-dash":26}],101:[function(e,t,n){"use strict";let i=e("../base-xform"),r=o=>o!==void 0;t.exports=class extends i{get tag(){return"outlinePr"}render(o,a){return!(!a||!r(a.summaryBelow)&&!r(a.summaryRight))&&(o.leafNode(this.tag,{summaryBelow:r(a.summaryBelow)?Number(a.summaryBelow):void 0,summaryRight:r(a.summaryRight)?Number(a.summaryRight):void 0}),!0)}parseOpen(o){return o.name===this.tag&&(this.model={summaryBelow:r(o.attributes.summaryBelow)?!!Number(o.attributes.summaryBelow):void 0,summaryRight:r(o.attributes.summaryRight)?!!Number(o.attributes.summaryRight):void 0},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],102:[function(e,t,n){"use strict";let i=e("../base-xform");t.exports=class extends i{get tag(){return"brk"}render(r,o){r.leafNode("brk",o)}parseOpen(r){return r.name==="brk"&&(this.model=r.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],103:[function(e,t,n){"use strict";let i=e("../../../utils/under-dash"),r=e("../base-xform");t.exports=class extends r{get tag(){return"pageMargins"}render(o,a){if(a){let s={left:a.left,right:a.right,top:a.top,bottom:a.bottom,header:a.header,footer:a.footer};i.some(s,u=>u!==void 0)&&o.leafNode(this.tag,s)}}parseOpen(o){switch(o.name){case this.tag:return this.model={left:parseFloat(o.attributes.left||.7),right:parseFloat(o.attributes.right||.7),top:parseFloat(o.attributes.top||.75),bottom:parseFloat(o.attributes.bottom||.75),header:parseFloat(o.attributes.header||.3),footer:parseFloat(o.attributes.footer||.3)},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],104:[function(e,t,n){"use strict";let i=e("../base-xform");t.exports=class extends i{get tag(){return"pageSetUpPr"}render(r,o){return!(!o||!o.fitToPage)&&(r.leafNode(this.tag,{fitToPage:o.fitToPage?"1":void 0}),!0)}parseOpen(r){return r.name===this.tag&&(this.model={fitToPage:r.attributes.fitToPage==="1"},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],105:[function(e,t,n){"use strict";let i=e("../../../utils/under-dash"),r=e("../base-xform");function o(f){return f?"1":void 0}function a(f){switch(f){case"overThenDown":return f;default:return}}function s(f){switch(f){case"atEnd":case"asDisplyed":return f;default:return}}function u(f){switch(f){case"dash":case"blank":case"NA":return f;default:return}}t.exports=class extends r{get tag(){return"pageSetup"}render(f,c){if(c){let d={paperSize:c.paperSize,orientation:c.orientation,horizontalDpi:c.horizontalDpi,verticalDpi:c.verticalDpi,pageOrder:a(c.pageOrder),blackAndWhite:o(c.blackAndWhite),draft:o(c.draft),cellComments:s(c.cellComments),errors:u(c.errors),scale:c.scale,fitToWidth:c.fitToWidth,fitToHeight:c.fitToHeight,firstPageNumber:c.firstPageNumber,useFirstPageNumber:o(c.firstPageNumber),usePrinterDefaults:o(c.usePrinterDefaults),copies:c.copies};i.some(d,m=>m!==void 0)&&f.leafNode(this.tag,d)}}parseOpen(f){switch(f.name){case this.tag:return this.model={paperSize:(c=f.attributes.paperSize,c!==void 0?parseInt(c,10):void 0),orientation:f.attributes.orientation||"portrait",horizontalDpi:parseInt(f.attributes.horizontalDpi||"4294967295",10),verticalDpi:parseInt(f.attributes.verticalDpi||"4294967295",10),pageOrder:f.attributes.pageOrder||"downThenOver",blackAndWhite:f.attributes.blackAndWhite==="1",draft:f.attributes.draft==="1",cellComments:f.attributes.cellComments||"None",errors:f.attributes.errors||"displayed",scale:parseInt(f.attributes.scale||"100",10),fitToWidth:parseInt(f.attributes.fitToWidth||"1",10),fitToHeight:parseInt(f.attributes.fitToHeight||"1",10),firstPageNumber:parseInt(f.attributes.firstPageNumber||"1",10),useFirstPageNumber:f.attributes.useFirstPageNumber==="1",usePrinterDefaults:f.attributes.usePrinterDefaults==="1",copies:parseInt(f.attributes.copies||"1",10)},!0;default:return!1}var c}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],106:[function(e,t,n){"use strict";let i=e("../base-xform");t.exports=class extends i{get tag(){return"picture"}render(r,o){o&&r.leafNode(this.tag,{"r:id":o.rId})}parseOpen(r){switch(r.name){case this.tag:return this.model={rId:r.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],107:[function(e,t,n){"use strict";let i=e("../../../utils/under-dash"),r=e("../base-xform");function o(a){return a?"1":void 0}t.exports=class extends r{get tag(){return"printOptions"}render(a,s){if(s){let u={headings:o(s.showRowColHeaders),gridLines:o(s.showGridLines),horizontalCentered:o(s.horizontalCentered),verticalCentered:o(s.verticalCentered)};i.some(u,f=>f!==void 0)&&a.leafNode(this.tag,u)}}parseOpen(a){switch(a.name){case this.tag:return this.model={showRowColHeaders:a.attributes.headings==="1",showGridLines:a.attributes.gridLines==="1",horizontalCentered:a.attributes.horizontalCentered==="1",verticalCentered:a.attributes.verticalCentered==="1"},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],108:[function(e,t,n){"use strict";let i=e("./page-breaks-xform"),r=e("../list-xform");t.exports=class extends r{constructor(){super({tag:"rowBreaks",count:!0,childXform:new i})}render(o,a){if(a&&a.length){o.openNode(this.tag,this.$),this.count&&(o.addAttribute(this.$count,a.length),o.addAttribute("manualBreakCount",a.length));let{childXform:s}=this;a.forEach(u=>{s.render(o,u)}),o.closeNode()}else this.empty&&o.leafNode(this.tag)}}},{"../list-xform":71,"./page-breaks-xform":102}],109:[function(e,t,n){"use strict";let i=e("../base-xform"),r=e("../../../utils/utils"),o=e("./cell-xform");t.exports=class extends i{constructor(a){super(),this.maxItems=a&&a.maxItems,this.map={c:new o}}get tag(){return"row"}prepare(a,s){let u=s.styles.addStyleModel(a.style);u&&(a.styleId=u);let f=this.map.c;a.cells.forEach(c=>{f.prepare(c,s)})}render(a,s,u){a.openNode("row"),a.addAttribute("r",s.number),s.height&&(a.addAttribute("ht",s.height),a.addAttribute("customHeight","1")),s.hidden&&a.addAttribute("hidden","1"),s.min>0&&s.max>0&&s.min<=s.max&&a.addAttribute("spans",`${s.min}:${s.max}`),s.styleId&&(a.addAttribute("s",s.styleId),a.addAttribute("customFormat","1")),a.addAttribute("x14ac:dyDescent","0.25"),s.outlineLevel&&a.addAttribute("outlineLevel",s.outlineLevel),s.collapsed&&a.addAttribute("collapsed","1");let f=this.map.c;s.cells.forEach(c=>{f.render(a,c,u)}),a.closeNode()}parseOpen(a){if(this.parser)return this.parser.parseOpen(a),!0;if(a.name==="row"){this.numRowsSeen+=1;let s=a.attributes.spans?a.attributes.spans.split(":").map(f=>parseInt(f,10)):[void 0,void 0],u=this.model={number:parseInt(a.attributes.r,10),min:s[0],max:s[1],cells:[]};return a.attributes.s&&(u.styleId=parseInt(a.attributes.s,10)),r.parseBoolean(a.attributes.hidden)&&(u.hidden=!0),r.parseBoolean(a.attributes.bestFit)&&(u.bestFit=!0),a.attributes.ht&&(u.height=parseFloat(a.attributes.ht)),a.attributes.outlineLevel&&(u.outlineLevel=parseInt(a.attributes.outlineLevel,10)),r.parseBoolean(a.attributes.collapsed)&&(u.collapsed=!0),!0}return this.parser=this.map[a.name],!!this.parser&&(this.parser.parseOpen(a),!0)}parseText(a){this.parser&&this.parser.parseText(a)}parseClose(a){if(this.parser){if(!this.parser.parseClose(a)){if(this.model.cells.push(this.parser.model),this.maxItems&&this.model.cells.length>this.maxItems)throw new Error(`Max column count (${this.maxItems}) exceeded`);this.parser=void 0}return!0}return!1}reconcile(a,s){a.style=a.styleId?s.styles.getStyleModel(a.styleId):{},a.styleId!==void 0&&(a.styleId=void 0);let u=this.map.c;a.cells.forEach(f=>{u.reconcile(f,s)})}}},{"../../../utils/utils":27,"../base-xform":32,"./cell-xform":73}],110:[function(e,t,n){"use strict";let i=e("../../../utils/under-dash"),r=e("../base-xform");t.exports=class extends r{get tag(){return"sheetFormatPr"}render(o,a){if(a){let s={defaultRowHeight:a.defaultRowHeight,outlineLevelRow:a.outlineLevelRow,outlineLevelCol:a.outlineLevelCol,"x14ac:dyDescent":a.dyDescent};a.defaultColWidth&&(s.defaultColWidth=a.defaultColWidth),a.defaultRowHeight&&a.defaultRowHeight===15||(s.customHeight="1"),i.some(s,u=>u!==void 0)&&o.leafNode("sheetFormatPr",s)}}parseOpen(o){return o.name==="sheetFormatPr"&&(this.model={defaultRowHeight:parseFloat(o.attributes.defaultRowHeight||"0"),dyDescent:parseFloat(o.attributes["x14ac:dyDescent"]||"0"),outlineLevelRow:parseInt(o.attributes.outlineLevelRow||"0",10),outlineLevelCol:parseInt(o.attributes.outlineLevelCol||"0",10)},o.attributes.defaultColWidth&&(this.model.defaultColWidth=parseFloat(o.attributes.defaultColWidth)),!0)}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],111:[function(e,t,n){"use strict";let i=e("../base-xform"),r=e("../style/color-xform"),o=e("./page-setup-properties-xform"),a=e("./outline-properties-xform");t.exports=class extends i{constructor(){super(),this.map={tabColor:new r("tabColor"),pageSetUpPr:new o,outlinePr:new a}}get tag(){return"sheetPr"}render(s,u){if(u){s.addRollback(),s.openNode("sheetPr");let f=!1;f=this.map.tabColor.render(s,u.tabColor)||f,f=this.map.pageSetUpPr.render(s,u.pageSetup)||f,f=this.map.outlinePr.render(s,u.outlineProperties)||f,f?(s.closeNode(),s.commit()):s.rollback()}}parseOpen(s){return this.parser?(this.parser.parseOpen(s),!0):s.name===this.tag?(this.reset(),!0):!!this.map[s.name]&&(this.parser=this.map[s.name],this.parser.parseOpen(s),!0)}parseText(s){return!!this.parser&&(this.parser.parseText(s),!0)}parseClose(s){return this.parser?(this.parser.parseClose(s)||(this.parser=void 0),!0):(this.map.tabColor.model||this.map.pageSetUpPr.model||this.map.outlinePr.model?(this.model={},this.map.tabColor.model&&(this.model.tabColor=this.map.tabColor.model),this.map.pageSetUpPr.model&&(this.model.pageSetup=this.map.pageSetUpPr.model),this.map.outlinePr.model&&(this.model.outlineProperties=this.map.outlinePr.model)):this.model=null,!1)}}},{"../base-xform":32,"../style/color-xform":128,"./outline-properties-xform":101,"./page-setup-properties-xform":104}],112:[function(e,t,n){"use strict";let i=e("../../../utils/under-dash"),r=e("../base-xform");function o(s,u){return s?u:void 0}function a(s,u){return s===u||void 0}t.exports=class extends r{get tag(){return"sheetProtection"}render(s,u){if(u){let f={sheet:o(u.sheet,"1"),selectLockedCells:u.selectLockedCells===!1?"1":void 0,selectUnlockedCells:u.selectUnlockedCells===!1?"1":void 0,formatCells:o(u.formatCells,"0"),formatColumns:o(u.formatColumns,"0"),formatRows:o(u.formatRows,"0"),insertColumns:o(u.insertColumns,"0"),insertRows:o(u.insertRows,"0"),insertHyperlinks:o(u.insertHyperlinks,"0"),deleteColumns:o(u.deleteColumns,"0"),deleteRows:o(u.deleteRows,"0"),sort:o(u.sort,"0"),autoFilter:o(u.autoFilter,"0"),pivotTables:o(u.pivotTables,"0")};u.sheet&&(f.algorithmName=u.algorithmName,f.hashValue=u.hashValue,f.saltValue=u.saltValue,f.spinCount=u.spinCount,f.objects=o(u.objects===!1,"1"),f.scenarios=o(u.scenarios===!1,"1")),i.some(f,c=>c!==void 0)&&s.leafNode(this.tag,f)}}parseOpen(s){switch(s.name){case this.tag:return this.model={sheet:a(s.attributes.sheet,"1"),objects:s.attributes.objects!=="1"&&void 0,scenarios:s.attributes.scenarios!=="1"&&void 0,selectLockedCells:s.attributes.selectLockedCells!=="1"&&void 0,selectUnlockedCells:s.attributes.selectUnlockedCells!=="1"&&void 0,formatCells:a(s.attributes.formatCells,"0"),formatColumns:a(s.attributes.formatColumns,"0"),formatRows:a(s.attributes.formatRows,"0"),insertColumns:a(s.attributes.insertColumns,"0"),insertRows:a(s.attributes.insertRows,"0"),insertHyperlinks:a(s.attributes.insertHyperlinks,"0"),deleteColumns:a(s.attributes.deleteColumns,"0"),deleteRows:a(s.attributes.deleteRows,"0"),sort:a(s.attributes.sort,"0"),autoFilter:a(s.attributes.autoFilter,"0"),pivotTables:a(s.attributes.pivotTables,"0")},s.attributes.algorithmName&&(this.model.algorithmName=s.attributes.algorithmName,this.model.hashValue=s.attributes.hashValue,this.model.saltValue=s.attributes.saltValue,this.model.spinCount=parseInt(s.attributes.spinCount,10)),!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],113:[function(e,t,n){"use strict";let i=e("../../../utils/col-cache"),r=e("../base-xform"),o={frozen:"frozen",frozenSplit:"frozen",split:"split"};t.exports=class extends r{get tag(){return"sheetView"}prepare(a){switch(a.state){case"frozen":case"split":break;default:a.state="normal"}}render(a,s){a.openNode("sheetView",{workbookViewId:s.workbookViewId||0});let u=function(v,p,_){_&&a.addAttribute(v,p)},f,c,d,m;switch(u("rightToLeft","1",s.rightToLeft===!0),u("tabSelected","1",s.tabSelected),u("showRuler","0",s.showRuler===!1),u("showRowColHeaders","0",s.showRowColHeaders===!1),u("showGridLines","0",s.showGridLines===!1),u("zoomScale",s.zoomScale,s.zoomScale),u("zoomScaleNormal",s.zoomScaleNormal,s.zoomScaleNormal),u("view",s.style,s.style),s.state){case"frozen":c=s.xSplit||0,d=s.ySplit||0,f=s.topLeftCell||i.getAddress(d+1,c+1).address,m=(s.xSplit&&s.ySplit?"bottomRight":s.xSplit&&"topRight")||"bottomLeft",a.leafNode("pane",{xSplit:s.xSplit||void 0,ySplit:s.ySplit||void 0,topLeftCell:f,activePane:m,state:"frozen"}),a.leafNode("selection",{pane:m,activeCell:s.activeCell,sqref:s.activeCell});break;case"split":s.activePane==="topLeft"&&(s.activePane=void 0),a.leafNode("pane",{xSplit:s.xSplit||void 0,ySplit:s.ySplit||void 0,topLeftCell:s.topLeftCell,activePane:s.activePane}),a.leafNode("selection",{pane:s.activePane,activeCell:s.activeCell,sqref:s.activeCell});break;case"normal":s.activeCell&&a.leafNode("selection",{activeCell:s.activeCell,sqref:s.activeCell})}a.closeNode()}parseOpen(a){switch(a.name){case"sheetView":return this.sheetView={workbookViewId:parseInt(a.attributes.workbookViewId,10),rightToLeft:a.attributes.rightToLeft==="1",tabSelected:a.attributes.tabSelected==="1",showRuler:a.attributes.showRuler!=="0",showRowColHeaders:a.attributes.showRowColHeaders!=="0",showGridLines:a.attributes.showGridLines!=="0",zoomScale:parseInt(a.attributes.zoomScale||"100",10),zoomScaleNormal:parseInt(a.attributes.zoomScaleNormal||"100",10),style:a.attributes.view},this.pane=void 0,this.selections={},!0;case"pane":return this.pane={xSplit:parseInt(a.attributes.xSplit||"0",10),ySplit:parseInt(a.attributes.ySplit||"0",10),topLeftCell:a.attributes.topLeftCell,activePane:a.attributes.activePane||"topLeft",state:a.attributes.state},!0;case"selection":{let s=a.attributes.pane||"topLeft";return this.selections[s]={pane:s,activeCell:a.attributes.activeCell},!0}default:return!1}}parseText(){}parseClose(a){let s,u;switch(a){case"sheetView":return this.sheetView&&this.pane?(s=this.model={workbookViewId:this.sheetView.workbookViewId,rightToLeft:this.sheetView.rightToLeft,state:o[this.pane.state]||"split",xSplit:this.pane.xSplit,ySplit:this.pane.ySplit,topLeftCell:this.pane.topLeftCell,showRuler:this.sheetView.showRuler,showRowColHeaders:this.sheetView.showRowColHeaders,showGridLines:this.sheetView.showGridLines,zoomScale:this.sheetView.zoomScale,zoomScaleNormal:this.sheetView.zoomScaleNormal},this.model.state==="split"&&(s.activePane=this.pane.activePane),u=this.selections[this.pane.activePane],u&&u.activeCell&&(s.activeCell=u.activeCell),this.sheetView.style&&(s.style=this.sheetView.style)):(s=this.model={workbookViewId:this.sheetView.workbookViewId,rightToLeft:this.sheetView.rightToLeft,state:"normal",showRuler:this.sheetView.showRuler,showRowColHeaders:this.sheetView.showRowColHeaders,showGridLines:this.sheetView.showGridLines,zoomScale:this.sheetView.zoomScale,zoomScaleNormal:this.sheetView.zoomScaleNormal},u=this.selections.topLeft,u&&u.activeCell&&(s.activeCell=u.activeCell),this.sheetView.style&&(s.style=this.sheetView.style)),!1;default:return!0}}reconcile(){}}},{"../../../utils/col-cache":19,"../base-xform":32}],114:[function(e,t,n){"use strict";let i=e("../base-xform");t.exports=class extends i{get tag(){return"tablePart"}render(r,o){o&&r.leafNode(this.tag,{"r:id":o.rId})}parseOpen(r){switch(r.name){case this.tag:return this.model={rId:r.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],115:[function(e,t,n){"use strict";let i=e("../../../utils/under-dash"),r=e("../../../utils/col-cache"),o=e("../../../utils/xml-stream"),a=e("../../rel-type"),s=e("./merges"),u=e("../base-xform"),f=e("../list-xform"),c=e("./row-xform"),d=e("./col-xform"),m=e("./dimension-xform"),v=e("./hyperlink-xform"),p=e("./merge-cell-xform"),_=e("./data-validations-xform"),y=e("./sheet-properties-xform"),x=e("./sheet-format-properties-xform"),S=e("./sheet-view-xform"),O=e("./sheet-protection-xform"),B=e("./page-margins-xform"),U=e("./page-setup-xform"),z=e("./print-options-xform"),q=e("./auto-filter-xform"),G=e("./picture-xform"),tt=e("./drawing-xform"),K=e("./table-part-xform"),D=e("./row-breaks-xform"),N=e("./header-footer-xform"),Z=e("./cf/conditional-formattings-xform"),w=e("./ext-lst-xform"),C=(T,R)=>{if(!R||!R.length)return T;if(!T||!T.length)return R;let F={},H={};return T.forEach(it=>{F[it.ref]=it,it.rules.forEach(ot=>{let{x14Id:dt}=ot;dt&&(H[dt]=ot)})}),R.forEach(it=>{it.rules.forEach(ot=>{let dt=H[ot.x14Id];dt?(($,ct)=>{Object.keys(ct).forEach(W=>{let V=$[W],rt=ct[W];V===void 0&&rt!==void 0&&($[W]=rt)})})(dt,ot):F[it.ref]?F[it.ref].rules.push(ot):T.push({ref:it.ref,rules:[ot]})})}),T};class k extends u{constructor(R){super();let{maxRows:F,maxCols:H,ignoreNodes:it}=R||{};this.ignoreNodes=it||[],this.map={sheetPr:new y,dimension:new m,sheetViews:new f({tag:"sheetViews",count:!1,childXform:new S}),sheetFormatPr:new x,cols:new f({tag:"cols",count:!1,childXform:new d}),sheetData:new f({tag:"sheetData",count:!1,empty:!0,childXform:new c({maxItems:H}),maxItems:F}),autoFilter:new q,mergeCells:new f({tag:"mergeCells",count:!0,childXform:new p}),rowBreaks:new D,hyperlinks:new f({tag:"hyperlinks",count:!1,childXform:new v}),pageMargins:new B,dataValidations:new _,pageSetup:new U,headerFooter:new N,printOptions:new z,picture:new G,drawing:new tt,sheetProtection:new O,tableParts:new f({tag:"tableParts",count:!0,childXform:new K}),conditionalFormatting:new Z,extLst:new w}}prepare(R,F){F.merges=new s,R.hyperlinks=F.hyperlinks=[],R.comments=F.comments=[],F.formulae={},F.siFormulae=0,this.map.cols.prepare(R.cols,F),this.map.sheetData.prepare(R.rows,F),this.map.conditionalFormatting.prepare(R.conditionalFormattings,F),R.mergeCells=F.merges.mergeCells;let H=R.rels=[];function it($){return"rId"+($.length+1)}if(R.hyperlinks.forEach($=>{let ct=it(H);$.rId=ct,H.push({Id:ct,Type:a.Hyperlink,Target:$.target,TargetMode:"External"})}),R.comments.length>0){let $={Id:it(H),Type:a.Comments,Target:`../comments${R.id}.xml`};H.push($);let ct={Id:it(H),Type:a.VmlDrawing,Target:`../drawings/vmlDrawing${R.id}.vml`};H.push(ct),R.comments.forEach(W=>{W.refAddress=r.decodeAddress(W.ref)}),F.commentRefs.push({commentName:"comments"+R.id,vmlDrawing:"vmlDrawing"+R.id})}let ot=[],dt;R.media.forEach($=>{if($.type==="background"){let ct=it(H);dt=F.media[$.imageId],H.push({Id:ct,Type:a.Image,Target:`../media/${dt.name}.${dt.extension}`}),R.background={rId:ct},R.image=F.media[$.imageId]}else if($.type==="image"){let{drawing:ct}=R;dt=F.media[$.imageId],ct||(ct=R.drawing={rId:it(H),name:"drawing"+ ++F.drawingsCount,anchors:[],rels:[]},F.drawings.push(ct),H.push({Id:ct.rId,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",Target:`../drawings/${ct.name}.xml`}));let W=this.preImageId===$.imageId?ot[$.imageId]:ot[ct.rels.length];W||(W=it(ct.rels),ot[ct.rels.length]=W,ct.rels.push({Id:W,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:`../media/${dt.name}.${dt.extension}`}));let V={picture:{rId:W},range:$.range};if($.hyperlinks&&$.hyperlinks.hyperlink){let rt=it(ct.rels);ot[ct.rels.length]=rt,V.picture.hyperlinks={tooltip:$.hyperlinks.tooltip,rId:rt},ct.rels.push({Id:rt,Type:a.Hyperlink,Target:$.hyperlinks.hyperlink,TargetMode:"External"})}this.preImageId=$.imageId,ct.anchors.push(V)}}),R.tables.forEach($=>{let ct=it(H);$.rId=ct,H.push({Id:ct,Type:a.Table,Target:"../tables/"+$.target}),$.columns.forEach(W=>{let{style:V}=W;V&&(W.dxfId=F.styles.addDxfStyle(V))})}),this.map.extLst.prepare(R,F)}render(R,F){R.openXml(o.StdDocAttributes),R.openNode("worksheet",k.WORKSHEET_ATTRIBUTES);let H=F.properties?{defaultRowHeight:F.properties.defaultRowHeight,dyDescent:F.properties.dyDescent,outlineLevelCol:F.properties.outlineLevelCol,outlineLevelRow:F.properties.outlineLevelRow}:void 0;F.properties&&F.properties.defaultColWidth&&(H.defaultColWidth=F.properties.defaultColWidth);let it={outlineProperties:F.properties&&F.properties.outlineProperties,tabColor:F.properties&&F.properties.tabColor,pageSetup:F.pageSetup&&F.pageSetup.fitToPage?{fitToPage:F.pageSetup.fitToPage}:void 0},ot=F.pageSetup&&F.pageSetup.margins,dt={showRowColHeaders:F.pageSetup&&F.pageSetup.showRowColHeaders,showGridLines:F.pageSetup&&F.pageSetup.showGridLines,horizontalCentered:F.pageSetup&&F.pageSetup.horizontalCentered,verticalCentered:F.pageSetup&&F.pageSetup.verticalCentered},$=F.sheetProtection;this.map.sheetPr.render(R,it),this.map.dimension.render(R,F.dimensions),this.map.sheetViews.render(R,F.views),this.map.sheetFormatPr.render(R,H),this.map.cols.render(R,F.cols),this.map.sheetData.render(R,F.rows),this.map.sheetProtection.render(R,$),this.map.autoFilter.render(R,F.autoFilter),this.map.mergeCells.render(R,F.mergeCells),this.map.conditionalFormatting.render(R,F.conditionalFormattings),this.map.dataValidations.render(R,F.dataValidations),this.map.hyperlinks.render(R,F.hyperlinks),this.map.printOptions.render(R,dt),this.map.pageMargins.render(R,ot),this.map.pageSetup.render(R,F.pageSetup),this.map.headerFooter.render(R,F.headerFooter),this.map.rowBreaks.render(R,F.rowBreaks),this.map.drawing.render(R,F.drawing),this.map.picture.render(R,F.background),this.map.tableParts.render(R,F.tables),this.map.extLst.render(R,F),F.rels&&F.rels.forEach(ct=>{ct.Type===a.VmlDrawing&&R.leafNode("legacyDrawing",{"r:id":ct.Id})}),R.closeNode()}parseOpen(R){return this.parser?(this.parser.parseOpen(R),!0):R.name==="worksheet"?(i.each(this.map,F=>{F.reset()}),!0):(this.map[R.name]&&!this.ignoreNodes.includes(R.name)&&(this.parser=this.map[R.name],this.parser.parseOpen(R)),!0)}parseText(R){this.parser&&this.parser.parseText(R)}parseClose(R){if(this.parser)return this.parser.parseClose(R)||(this.parser=void 0),!0;switch(R){case"worksheet":{let F=this.map.sheetFormatPr.model||{};this.map.sheetPr.model&&this.map.sheetPr.model.tabColor&&(F.tabColor=this.map.sheetPr.model.tabColor),this.map.sheetPr.model&&this.map.sheetPr.model.outlineProperties&&(F.outlineProperties=this.map.sheetPr.model.outlineProperties);let H={fitToPage:this.map.sheetPr.model&&this.map.sheetPr.model.pageSetup&&this.map.sheetPr.model.pageSetup.fitToPage||!1,margins:this.map.pageMargins.model},it=Object.assign(H,this.map.pageSetup.model,this.map.printOptions.model),ot=C(this.map.conditionalFormatting.model,this.map.extLst.model&&this.map.extLst.model["x14:conditionalFormattings"]);return this.model={dimensions:this.map.dimension.model,cols:this.map.cols.model,rows:this.map.sheetData.model,mergeCells:this.map.mergeCells.model,hyperlinks:this.map.hyperlinks.model,dataValidations:this.map.dataValidations.model,properties:F,views:this.map.sheetViews.model,pageSetup:it,headerFooter:this.map.headerFooter.model,background:this.map.picture.model,drawing:this.map.drawing.model,tables:this.map.tableParts.model,conditionalFormattings:ot},this.map.autoFilter.model&&(this.model.autoFilter=this.map.autoFilter.model),this.map.sheetProtection.model&&(this.model.sheetProtection=this.map.sheetProtection.model),!1}default:return!0}}reconcile(R,F){let H=(R.relationships||[]).reduce((ot,dt)=>{if(ot[dt.Id]=dt,dt.Type===a.Comments&&(R.comments=F.comments[dt.Target].comments),dt.Type===a.VmlDrawing&&R.comments&&R.comments.length){let $=F.vmlDrawings[dt.Target].comments;R.comments.forEach((ct,W)=>{ct.note=Object.assign({},ct.note,$[W])})}return ot},{});if(F.commentsMap=(R.comments||[]).reduce((ot,dt)=>(dt.ref&&(ot[dt.ref]=dt),ot),{}),F.hyperlinkMap=(R.hyperlinks||[]).reduce((ot,dt)=>(dt.rId&&(ot[dt.address]=H[dt.rId].Target),ot),{}),F.formulae={},R.rows=R.rows&&R.rows.filter(Boolean)||[],R.rows.forEach(ot=>{ot.cells=ot.cells&&ot.cells.filter(Boolean)||[]}),this.map.cols.reconcile(R.cols,F),this.map.sheetData.reconcile(R.rows,F),this.map.conditionalFormatting.reconcile(R.conditionalFormattings,F),R.media=[],R.drawing){let ot=H[R.drawing.rId].Target.match(/\/drawings\/([a-zA-Z0-9]+)[.][a-zA-Z]{3,4}$/);if(ot){let dt=ot[1];F.drawings[dt].anchors.forEach($=>{if($.medium){let ct={type:"image",imageId:$.medium.index,range:$.range,hyperlinks:$.picture.hyperlinks};R.media.push(ct)}})}}let it=R.background&&H[R.background.rId];if(it){let ot=it.Target.split("/media/")[1],dt=F.mediaIndex&&F.mediaIndex[ot];dt!==void 0&&R.media.push({type:"background",imageId:dt})}R.tables=(R.tables||[]).map(ot=>{let dt=H[ot.rId];return F.tables[dt.Target]}),delete R.relationships,delete R.hyperlinks,delete R.comments}}k.WORKSHEET_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x14ac","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"},t.exports=k},{"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/xml-stream":28,"../../rel-type":31,"../base-xform":32,"../list-xform":71,"./auto-filter-xform":72,"./cf/conditional-formattings-xform":87,"./col-xform":92,"./data-validations-xform":93,"./dimension-xform":94,"./drawing-xform":95,"./ext-lst-xform":96,"./header-footer-xform":97,"./hyperlink-xform":98,"./merge-cell-xform":99,"./merges":100,"./page-margins-xform":103,"./page-setup-xform":105,"./picture-xform":106,"./print-options-xform":107,"./row-breaks-xform":108,"./row-xform":109,"./sheet-format-properties-xform":110,"./sheet-properties-xform":111,"./sheet-protection-xform":112,"./sheet-view-xform":113,"./table-part-xform":114}],116:[function(e,t,n){"use strict";let i=e("../base-xform");t.exports=class extends i{constructor(r){super(),this.tag=r.tag,this.attr=r.attr}render(r,o){o&&(r.openNode(this.tag),r.closeNode())}parseOpen(r){r.name===this.tag&&(this.model=!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],117:[function(e,t,n){"use strict";let i=e("../base-xform");t.exports=class extends i{constructor(r){super(),this.tag=r.tag,this.attr=r.attr,this.attrs=r.attrs,this._format=r.format||function(o){try{return Number.isNaN(o.getTime())?"":o.toISOString()}catch{return""}},this._parse=r.parse||function(o){return new Date(o)}}render(r,o){o&&(r.openNode(this.tag),this.attrs&&r.addAttributes(this.attrs),this.attr?r.addAttribute(this.attr,this._format(o)):r.writeText(this._format(o)),r.closeNode())}parseOpen(r){r.name===this.tag&&(this.attr?this.model=this._parse(r.attributes[this.attr]):this.text=[])}parseText(r){this.attr||this.text.push(r)}parseClose(){return this.attr||(this.model=this._parse(this.text.join(""))),!1}}},{"../base-xform":32}],118:[function(e,t,n){"use strict";let i=e("../base-xform");t.exports=class extends i{constructor(r){super(),this.tag=r.tag,this.attr=r.attr,this.attrs=r.attrs,this.zero=r.zero}render(r,o){(o||this.zero)&&(r.openNode(this.tag),this.attrs&&r.addAttributes(this.attrs),this.attr?r.addAttribute(this.attr,o):r.writeText(o),r.closeNode())}parseOpen(r){return r.name===this.tag&&(this.attr?this.model=parseInt(r.attributes[this.attr],10):this.text=[],!0)}parseText(r){this.attr||this.text.push(r)}parseClose(){return this.attr||(this.model=parseInt(this.text.join("")||0,10)),!1}}},{"../base-xform":32}],119:[function(e,t,n){"use strict";let i=e("../base-xform");t.exports=class extends i{constructor(r){super(),this.tag=r.tag,this.attr=r.attr,this.attrs=r.attrs}render(r,o){o!==void 0&&(r.openNode(this.tag),this.attrs&&r.addAttributes(this.attrs),this.attr?r.addAttribute(this.attr,o):r.writeText(o),r.closeNode())}parseOpen(r){r.name===this.tag&&(this.attr?this.model=r.attributes[this.attr]:this.text=[])}parseText(r){this.attr||this.text.push(r)}parseClose(){return this.attr||(this.model=this.text.join("")),!1}}},{"../base-xform":32}],120:[function(e,t,n){"use strict";let i=e("./base-xform"),r=e("../../utils/xml-stream");t.exports=class extends i{constructor(o){super(),this._model=o}render(o){if(!this._xml){let a=new r;(function s(u,f){u.openNode(f.tag,f.$),f.c&&f.c.forEach(c=>{s(u,c)}),f.t&&u.writeText(f.t),u.closeNode()})(a,this._model),this._xml=a.xml}o.writeXml(this._xml)}parseOpen(){return!0}parseText(){}parseClose(o){switch(o){case this._model.tag:return!1;default:return!0}}}},{"../../utils/xml-stream":28,"./base-xform":32}],121:[function(e,t,n){"use strict";let i=e("./text-xform"),r=e("./rich-text-xform"),o=e("../base-xform");t.exports=class extends o{constructor(){super(),this.map={r:new r,t:new i}}get tag(){return"rPh"}render(a,s){if(a.openNode(this.tag,{sb:s.sb||0,eb:s.eb||0}),s&&s.hasOwnProperty("richText")&&s.richText){let{r:u}=this.map;s.richText.forEach(f=>{u.render(a,f)})}else s&&this.map.t.render(a,s.text);a.closeNode()}parseOpen(a){let{name:s}=a;return this.parser?(this.parser.parseOpen(a),!0):s===this.tag?(this.model={sb:parseInt(a.attributes.sb,10),eb:parseInt(a.attributes.eb,10)},!0):(this.parser=this.map[s],!!this.parser&&(this.parser.parseOpen(a),!0))}parseText(a){this.parser&&this.parser.parseText(a)}parseClose(a){if(this.parser){if(!this.parser.parseClose(a)){switch(a){case"r":{let s=this.model.richText;s||(s=this.model.richText=[]),s.push(this.parser.model);break}case"t":this.model.text=this.parser.model}this.parser=void 0}return!0}switch(a){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"./rich-text-xform":122,"./text-xform":125}],122:[function(e,t,n){"use strict";let i=e("./text-xform"),r=e("../style/font-xform"),o=e("../base-xform");class a extends o{constructor(u){super(),this.model=u}get tag(){return"r"}get textXform(){return this._textXform||(this._textXform=new i)}get fontXform(){return this._fontXform||(this._fontXform=new r(a.FONT_OPTIONS))}render(u,f){f=f||this.model,u.openNode("r"),f.font&&this.fontXform.render(u,f.font),this.textXform.render(u,f.text),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case"r":return this.model={},!0;case"t":return this.parser=this.textXform,this.parser.parseOpen(u),!0;case"rPr":return this.parser=this.fontXform,this.parser.parseOpen(u),!0;default:return!1}}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){switch(u){case"r":return!1;case"t":return this.model.text=this.parser.model,this.parser=void 0,!0;case"rPr":return this.model.font=this.parser.model,this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(u),!0}}}a.FONT_OPTIONS={tagName:"rPr",fontNameTag:"rFont"},t.exports=a},{"../base-xform":32,"../style/font-xform":131,"./text-xform":125}],123:[function(e,t,n){"use strict";let i=e("./text-xform"),r=e("./rich-text-xform"),o=e("./phonetic-text-xform"),a=e("../base-xform");t.exports=class extends a{constructor(s){super(),this.model=s,this.map={r:new r,t:new i,rPh:new o}}get tag(){return"si"}render(s,u){s.openNode(this.tag),u&&u.hasOwnProperty("richText")&&u.richText?u.richText.length?u.richText.forEach(f=>{this.map.r.render(s,f)}):this.map.t.render(s,""):u!=null&&this.map.t.render(s,u),s.closeNode()}parseOpen(s){let{name:u}=s;return this.parser?(this.parser.parseOpen(s),!0):u===this.tag?(this.model={},!0):(this.parser=this.map[u],!!this.parser&&(this.parser.parseOpen(s),!0))}parseText(s){this.parser&&this.parser.parseText(s)}parseClose(s){if(this.parser){if(!this.parser.parseClose(s)){switch(s){case"r":{let u=this.model.richText;u||(u=this.model.richText=[]),u.push(this.parser.model);break}case"t":this.model=this.parser.model}this.parser=void 0}return!0}switch(s){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"./phonetic-text-xform":121,"./rich-text-xform":122,"./text-xform":125}],124:[function(e,t,n){"use strict";let i=e("../../../utils/xml-stream"),r=e("../base-xform"),o=e("./shared-string-xform");t.exports=class extends r{constructor(a){super(),this.model=a||{values:[],count:0},this.hash=Object.create(null),this.rich=Object.create(null)}get sharedStringXform(){return this._sharedStringXform||(this._sharedStringXform=new o)}get values(){return this.model.values}get uniqueCount(){return this.model.values.length}get count(){return this.model.count}getString(a){return this.model.values[a]}add(a){return a.richText?this.addRichText(a):this.addText(a)}addText(a){let s=this.hash[a];return s===void 0&&(s=this.hash[a]=this.model.values.length,this.model.values.push(a)),this.model.count++,s}addRichText(a){let s=this.sharedStringXform.toXml(a),u=this.rich[s];return u===void 0&&(u=this.rich[s]=this.model.values.length,this.model.values.push(a)),this.model.count++,u}render(a,s){s=s||this._values,a.openXml(i.StdDocAttributes),a.openNode("sst",{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main",count:s.count,uniqueCount:s.values.length});let u=this.sharedStringXform;s.values.forEach(f=>{u.render(a,f)}),a.closeNode()}parseOpen(a){if(this.parser)return this.parser.parseOpen(a),!0;switch(a.name){case"sst":return!0;case"si":return this.parser=this.sharedStringXform,this.parser.parseOpen(a),!0;default:throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(a))}}parseText(a){this.parser&&this.parser.parseText(a)}parseClose(a){if(this.parser)return this.parser.parseClose(a)||(this.model.values.push(this.parser.model),this.model.count++,this.parser=void 0),!0;switch(a){case"sst":return!1;default:throw new Error("Unexpected xml node in parseClose: "+a)}}}},{"../../../utils/xml-stream":28,"../base-xform":32,"./shared-string-xform":123}],125:[function(e,t,n){"use strict";let i=e("../base-xform");t.exports=class extends i{get tag(){return"t"}render(r,o){r.openNode("t"),/^\s|\n|\s$/.test(o)&&r.addAttribute("xml:space","preserve"),r.writeText(o),r.closeNode()}get model(){return this._text.join("").replace(/_x([0-9A-F]{4})_/g,(r,o)=>String.fromCharCode(parseInt(o,16)))}parseOpen(r){switch(r.name){case"t":return this._text=[],!0;default:return!1}}parseText(r){this._text.push(r)}parseClose(){return!1}}},{"../base-xform":32}],126:[function(e,t,n){"use strict";let i=e("../../../doc/enums"),r=e("../../../utils/utils"),o=e("../base-xform"),a={horizontalValues:["left","center","right","fill","centerContinuous","distributed","justify"].reduce((u,f)=>(u[f]=!0,u),{}),horizontal(u){return this.horizontalValues[u]?u:void 0},verticalValues:["top","middle","bottom","distributed","justify"].reduce((u,f)=>(u[f]=!0,u),{}),vertical(u){return u==="middle"?"center":this.verticalValues[u]?u:void 0},wrapText:u=>!!u||void 0,shrinkToFit:u=>!!u||void 0,textRotation(u){switch(u){case"vertical":return u;default:return(u=r.validInt(u))>=-90&&u<=90?u:void 0}},indent:u=>(u=r.validInt(u),Math.max(0,u)),readingOrder(u){switch(u){case"ltr":return i.ReadingOrder.LeftToRight;case"rtl":return i.ReadingOrder.RightToLeft;default:return}}},s={toXml(u){if(u=a.textRotation(u)){if(u==="vertical")return 255;let f=Math.round(u);if(f>=0&&f<=90)return f;if(f<0&&f>=-90)return 90-f}},toModel(u){let f=r.validInt(u);if(f!==void 0){if(f===255)return"vertical";if(f>=0&&f<=90)return f;if(f>90&&f<=180)return 90-f}}};t.exports=class extends o{get tag(){return"alignment"}render(u,f){u.addRollback(),u.openNode("alignment");let c=!1;function d(m,v){v&&(u.addAttribute(m,v),c=!0)}d("horizontal",a.horizontal(f.horizontal)),d("vertical",a.vertical(f.vertical)),d("wrapText",!!a.wrapText(f.wrapText)&&"1"),d("shrinkToFit",!!a.shrinkToFit(f.shrinkToFit)&&"1"),d("indent",a.indent(f.indent)),d("textRotation",s.toXml(f.textRotation)),d("readingOrder",a.readingOrder(f.readingOrder)),u.closeNode(),c?u.commit():u.rollback()}parseOpen(u){let f={},c=!1;function d(m,v,p){m&&(f[v]=p,c=!0)}d(u.attributes.horizontal,"horizontal",u.attributes.horizontal),d(u.attributes.vertical,"vertical",u.attributes.vertical==="center"?"middle":u.attributes.vertical),d(u.attributes.wrapText,"wrapText",r.parseBoolean(u.attributes.wrapText)),d(u.attributes.shrinkToFit,"shrinkToFit",r.parseBoolean(u.attributes.shrinkToFit)),d(u.attributes.indent,"indent",parseInt(u.attributes.indent,10)),d(u.attributes.textRotation,"textRotation",s.toModel(u.attributes.textRotation)),d(u.attributes.readingOrder,"readingOrder",u.attributes.readingOrder==="2"?"rtl":"ltr"),this.model=c?f:null}parseText(){}parseClose(){return!1}}},{"../../../doc/enums":7,"../../../utils/utils":27,"../base-xform":32}],127:[function(e,t,n){"use strict";let i=e("../base-xform"),r=e("../../../utils/utils"),o=e("./color-xform");class a extends i{constructor(u){super(),this.name=u,this.map={color:new o}}get tag(){return this.name}render(u,f,c){let d=f&&f.color||c||this.defaultColor;u.openNode(this.name),f&&f.style&&(u.addAttribute("style",f.style),d&&this.map.color.render(u,d)),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case this.name:{let{style:f}=u.attributes;return this.model=f?{style:f}:void 0,!0}case"color":return this.parser=this.map.color,this.parser.parseOpen(u),!0;default:return!1}}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){return this.parser?(this.parser.parseClose(u)||(this.parser=void 0),!0):(u===this.name&&this.map.color.model&&(this.model||(this.model={}),this.model.color=this.map.color.model),!1)}validStyle(u){return a.validStyleValues[u]}}a.validStyleValues=["thin","dashed","dotted","dashDot","hair","dashDotDot","slantDashDot","mediumDashed","mediumDashDotDot","mediumDashDot","medium","double","thick"].reduce((s,u)=>(s[u]=!0,s),{}),t.exports=class extends i{constructor(){super(),this.map={top:new a("top"),left:new a("left"),bottom:new a("bottom"),right:new a("right"),diagonal:new a("diagonal")}}render(s,u){let{color:f}=u;function c(d,m){d&&!d.color&&u.color&&(d={...d,color:u.color}),m.render(s,d,f)}s.openNode("border"),u.diagonal&&u.diagonal.style&&(u.diagonal.up&&s.addAttribute("diagonalUp","1"),u.diagonal.down&&s.addAttribute("diagonalDown","1")),c(u.left,this.map.left),c(u.right,this.map.right),c(u.top,this.map.top),c(u.bottom,this.map.bottom),c(u.diagonal,this.map.diagonal),s.closeNode()}parseOpen(s){if(this.parser)return this.parser.parseOpen(s),!0;switch(s.name){case"border":return this.reset(),this.diagonalUp=r.parseBoolean(s.attributes.diagonalUp),this.diagonalDown=r.parseBoolean(s.attributes.diagonalDown),!0;default:return this.parser=this.map[s.name],!!this.parser&&(this.parser.parseOpen(s),!0)}}parseText(s){this.parser&&this.parser.parseText(s)}parseClose(s){if(this.parser)return this.parser.parseClose(s)||(this.parser=void 0),!0;if(s==="border"){let u=this.model={},f=function(c,d,m){d&&(m&&Object.assign(d,m),u[c]=d)};f("left",this.map.left.model),f("right",this.map.right.model),f("top",this.map.top.model),f("bottom",this.map.bottom.model),f("diagonal",this.map.diagonal.model,{up:this.diagonalUp,down:this.diagonalDown})}return!1}}},{"../../../utils/utils":27,"../base-xform":32,"./color-xform":128}],128:[function(e,t,n){"use strict";let i=e("../base-xform");t.exports=class extends i{constructor(r){super(),this.name=r||"color"}get tag(){return this.name}render(r,o){return!!o&&(r.openNode(this.name),o.argb?r.addAttribute("rgb",o.argb):o.theme!==void 0?(r.addAttribute("theme",o.theme),o.tint!==void 0&&r.addAttribute("tint",o.tint)):o.indexed!==void 0?r.addAttribute("indexed",o.indexed):r.addAttribute("auto","1"),r.closeNode(),!0)}parseOpen(r){return r.name===this.name&&(r.attributes.rgb?this.model={argb:r.attributes.rgb}:r.attributes.theme?(this.model={theme:parseInt(r.attributes.theme,10)},r.attributes.tint&&(this.model.tint=parseFloat(r.attributes.tint))):r.attributes.indexed?this.model={indexed:parseInt(r.attributes.indexed,10)}:this.model=void 0,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],129:[function(e,t,n){"use strict";let i=e("../base-xform"),r=e("./alignment-xform"),o=e("./border-xform"),a=e("./fill-xform"),s=e("./font-xform"),u=e("./numfmt-xform"),f=e("./protection-xform");t.exports=class extends i{constructor(){super(),this.map={alignment:new r,border:new o,fill:new a,font:new s,numFmt:new u,protection:new f}}get tag(){return"dxf"}render(c,d){if(c.openNode(this.tag),d.font&&this.map.font.render(c,d.font),d.numFmt&&d.numFmtId){let m={id:d.numFmtId,formatCode:d.numFmt};this.map.numFmt.render(c,m)}d.fill&&this.map.fill.render(c,d.fill),d.alignment&&this.map.alignment.render(c,d.alignment),d.border&&this.map.border.render(c,d.border),d.protection&&this.map.protection.render(c,d.protection),c.closeNode()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case this.tag:return this.reset(),!0;default:return this.parser=this.map[c.name],this.parser&&this.parser.parseOpen(c),!0}}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){return this.parser?(this.parser.parseClose(c)||(this.parser=void 0),!0):c!==this.tag||(this.model={alignment:this.map.alignment.model,border:this.map.border.model,fill:this.map.fill.model,font:this.map.font.model,numFmt:this.map.numFmt.model,protection:this.map.protection.model},!1)}}},{"../base-xform":32,"./alignment-xform":126,"./border-xform":127,"./fill-xform":130,"./font-xform":131,"./numfmt-xform":132,"./protection-xform":133}],130:[function(e,t,n){"use strict";let i=e("../base-xform"),r=e("./color-xform");class o extends i{constructor(){super(),this.map={color:new r}}get tag(){return"stop"}render(c,d){c.openNode("stop"),c.addAttribute("position",d.position),this.map.color.render(c,d.color),c.closeNode()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case"stop":return this.model={position:parseFloat(c.attributes.position)},!0;case"color":return this.parser=this.map.color,this.parser.parseOpen(c),!0;default:return!1}}parseText(){}parseClose(c){return!!this.parser&&(this.parser.parseClose(c)||(this.model.color=this.parser.model,this.parser=void 0),!0)}}class a extends i{constructor(){super(),this.map={fgColor:new r("fgColor"),bgColor:new r("bgColor")}}get name(){return"pattern"}get tag(){return"patternFill"}render(c,d){c.openNode("patternFill"),c.addAttribute("patternType",d.pattern),d.fgColor&&this.map.fgColor.render(c,d.fgColor),d.bgColor&&this.map.bgColor.render(c,d.bgColor),c.closeNode()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case"patternFill":return this.model={type:"pattern",pattern:c.attributes.patternType},!0;default:return this.parser=this.map[c.name],!!this.parser&&(this.parser.parseOpen(c),!0)}}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){return!!this.parser&&(this.parser.parseClose(c)||(this.parser.model&&(this.model[c]=this.parser.model),this.parser=void 0),!0)}}class s extends i{constructor(){super(),this.map={stop:new o}}get name(){return"gradient"}get tag(){return"gradientFill"}render(c,d){switch(c.openNode("gradientFill"),d.gradient){case"angle":c.addAttribute("degree",d.degree);break;case"path":c.addAttribute("type","path"),d.center.left&&(c.addAttribute("left",d.center.left),d.center.right===void 0&&c.addAttribute("right",d.center.left)),d.center.right&&c.addAttribute("right",d.center.right),d.center.top&&(c.addAttribute("top",d.center.top),d.center.bottom===void 0&&c.addAttribute("bottom",d.center.top)),d.center.bottom&&c.addAttribute("bottom",d.center.bottom)}let m=this.map.stop;d.stops.forEach(v=>{m.render(c,v)}),c.closeNode()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case"gradientFill":{let d=this.model={stops:[]};return c.attributes.degree?(d.gradient="angle",d.degree=parseInt(c.attributes.degree,10)):c.attributes.type==="path"&&(d.gradient="path",d.center={left:c.attributes.left?parseFloat(c.attributes.left):0,top:c.attributes.top?parseFloat(c.attributes.top):0},c.attributes.right!==c.attributes.left&&(d.center.right=c.attributes.right?parseFloat(c.attributes.right):0),c.attributes.bottom!==c.attributes.top&&(d.center.bottom=c.attributes.bottom?parseFloat(c.attributes.bottom):0)),!0}case"stop":return this.parser=this.map.stop,this.parser.parseOpen(c),!0;default:return!1}}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){return!!this.parser&&(this.parser.parseClose(c)||(this.model.stops.push(this.parser.model),this.parser=void 0),!0)}}class u extends i{constructor(){super(),this.map={patternFill:new a,gradientFill:new s}}get tag(){return"fill"}render(c,d){switch(c.addRollback(),c.openNode("fill"),d.type){case"pattern":this.map.patternFill.render(c,d);break;case"gradient":this.map.gradientFill.render(c,d);break;default:return void c.rollback()}c.closeNode(),c.commit()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case"fill":return this.model={},!0;default:return this.parser=this.map[c.name],!!this.parser&&(this.parser.parseOpen(c),!0)}}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){return!!this.parser&&(this.parser.parseClose(c)||(this.model=this.parser.model,this.model.type=this.parser.name,this.parser=void 0),!0)}validStyle(c){return u.validPatternValues[c]}}u.validPatternValues=["none","solid","darkVertical","darkGray","mediumGray","lightGray","gray125","gray0625","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","lightGrid"].reduce((f,c)=>(f[c]=!0,f),{}),u.StopXform=o,u.PatternFillXform=a,u.GradientFillXform=s,t.exports=u},{"../base-xform":32,"./color-xform":128}],131:[function(e,t,n){"use strict";let i=e("./color-xform"),r=e("../simple/boolean-xform"),o=e("../simple/integer-xform"),a=e("../simple/string-xform"),s=e("./underline-xform"),u=e("../../../utils/under-dash"),f=e("../base-xform");class c extends f{constructor(m){super(),this.options=m||c.OPTIONS,this.map={b:{prop:"bold",xform:new r({tag:"b",attr:"val"})},i:{prop:"italic",xform:new r({tag:"i",attr:"val"})},u:{prop:"underline",xform:new s},charset:{prop:"charset",xform:new o({tag:"charset",attr:"val"})},color:{prop:"color",xform:new i},condense:{prop:"condense",xform:new r({tag:"condense",attr:"val"})},extend:{prop:"extend",xform:new r({tag:"extend",attr:"val"})},family:{prop:"family",xform:new o({tag:"family",attr:"val"})},outline:{prop:"outline",xform:new r({tag:"outline",attr:"val"})},vertAlign:{prop:"vertAlign",xform:new a({tag:"vertAlign",attr:"val"})},scheme:{prop:"scheme",xform:new a({tag:"scheme",attr:"val"})},shadow:{prop:"shadow",xform:new r({tag:"shadow",attr:"val"})},strike:{prop:"strike",xform:new r({tag:"strike",attr:"val"})},sz:{prop:"size",xform:new o({tag:"sz",attr:"val"})}},this.map[this.options.fontNameTag]={prop:"name",xform:new a({tag:this.options.fontNameTag,attr:"val"})}}get tag(){return this.options.tagName}render(m,v){let{map:p}=this;m.openNode(this.options.tagName),u.each(this.map,(_,y)=>{p[y].xform.render(m,v[_.prop])}),m.closeNode()}parseOpen(m){if(this.parser)return this.parser.parseOpen(m),!0;if(this.map[m.name])return this.parser=this.map[m.name].xform,this.parser.parseOpen(m);switch(m.name){case this.options.tagName:return this.model={},!0;default:return!1}}parseText(m){this.parser&&this.parser.parseText(m)}parseClose(m){if(this.parser&&!this.parser.parseClose(m)){let v=this.map[m];return this.parser.model&&(this.model[v.prop]=this.parser.model),this.parser=void 0,!0}switch(m){case this.options.tagName:return!1;default:return!0}}}c.OPTIONS={tagName:"font",fontNameTag:"name"},t.exports=c},{"../../../utils/under-dash":26,"../base-xform":32,"../simple/boolean-xform":116,"../simple/integer-xform":118,"../simple/string-xform":119,"./color-xform":128,"./underline-xform":136}],132:[function(e,t,n){"use strict";let i=e("../../../utils/under-dash"),r=e("../../defaultnumformats"),o=e("../base-xform"),a=function(){let u={};return i.each(r,(f,c)=>{f.f&&(u[f.f]=parseInt(c,10))}),u}();class s extends o{constructor(f,c){super(),this.id=f,this.formatCode=c}get tag(){return"numFmt"}render(f,c){f.leafNode("numFmt",{numFmtId:c.id,formatCode:c.formatCode})}parseOpen(f){switch(f.name){case"numFmt":return this.model={id:parseInt(f.attributes.numFmtId,10),formatCode:f.attributes.formatCode.replace(/[\\](.)/g,"$1")},!0;default:return!1}}parseText(){}parseClose(){return!1}}s.getDefaultFmtId=function(u){return a[u]},s.getDefaultFmtCode=function(u){return r[u]&&r[u].f},t.exports=s},{"../../../utils/under-dash":26,"../../defaultnumformats":30,"../base-xform":32}],133:[function(e,t,n){"use strict";let i=e("../base-xform"),r={boolean:(o,a)=>o===void 0?a:o};t.exports=class extends i{get tag(){return"protection"}render(o,a){o.addRollback(),o.openNode("protection");let s=!1;function u(f,c){c!==void 0&&(o.addAttribute(f,c),s=!0)}u("locked",r.boolean(a.locked,!0)?void 0:"0"),u("hidden",r.boolean(a.hidden,!1)?"1":void 0),o.closeNode(),s?o.commit():o.rollback()}parseOpen(o){let a={locked:o.attributes.locked!=="0",hidden:o.attributes.hidden==="1"},s=!a.locked||a.hidden;this.model=s?a:null}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],134:[function(e,t,n){"use strict";let i=e("../base-xform"),r=e("./alignment-xform"),o=e("./protection-xform");t.exports=class extends i{constructor(a){super(),this.xfId=!(!a||!a.xfId),this.map={alignment:new r,protection:new o}}get tag(){return"xf"}render(a,s){a.openNode("xf",{numFmtId:s.numFmtId||0,fontId:s.fontId||0,fillId:s.fillId||0,borderId:s.borderId||0}),this.xfId&&a.addAttribute("xfId",s.xfId||0),s.numFmtId&&a.addAttribute("applyNumberFormat","1"),s.fontId&&a.addAttribute("applyFont","1"),s.fillId&&a.addAttribute("applyFill","1"),s.borderId&&a.addAttribute("applyBorder","1"),s.alignment&&a.addAttribute("applyAlignment","1"),s.protection&&a.addAttribute("applyProtection","1"),s.alignment&&this.map.alignment.render(a,s.alignment),s.protection&&this.map.protection.render(a,s.protection),a.closeNode()}parseOpen(a){if(this.parser)return this.parser.parseOpen(a),!0;switch(a.name){case"xf":return this.model={numFmtId:parseInt(a.attributes.numFmtId,10),fontId:parseInt(a.attributes.fontId,10),fillId:parseInt(a.attributes.fillId,10),borderId:parseInt(a.attributes.borderId,10)},this.xfId&&(this.model.xfId=parseInt(a.attributes.xfId,10)),!0;case"alignment":return this.parser=this.map.alignment,this.parser.parseOpen(a),!0;case"protection":return this.parser=this.map.protection,this.parser.parseOpen(a),!0;default:return!1}}parseText(a){this.parser&&this.parser.parseText(a)}parseClose(a){return this.parser?(this.parser.parseClose(a)||(this.map.protection===this.parser?this.model.protection=this.parser.model:this.model.alignment=this.parser.model,this.parser=void 0),!0):a!=="xf"}}},{"../base-xform":32,"./alignment-xform":126,"./protection-xform":133}],135:[function(e,t,n){"use strict";let i=e("../../../doc/enums"),r=e("../../../utils/xml-stream"),o=e("../base-xform"),a=e("../static-xform"),s=e("../list-xform"),u=e("./font-xform"),f=e("./fill-xform"),c=e("./border-xform"),d=e("./numfmt-xform"),m=e("./style-xform"),v=e("./dxf-xform");class p extends o{constructor(y){super(),this.map={numFmts:new s({tag:"numFmts",count:!0,childXform:new d}),fonts:new s({tag:"fonts",count:!0,childXform:new u,$:{"x14ac:knownFonts":1}}),fills:new s({tag:"fills",count:!0,childXform:new f}),borders:new s({tag:"borders",count:!0,childXform:new c}),cellStyleXfs:new s({tag:"cellStyleXfs",count:!0,childXform:new m}),cellXfs:new s({tag:"cellXfs",count:!0,childXform:new m({xfId:!0})}),dxfs:new s({tag:"dxfs",always:!0,count:!0,childXform:new v}),numFmt:new d,font:new u,fill:new f,border:new c,style:new m({xfId:!0}),cellStyles:p.STATIC_XFORMS.cellStyles,tableStyles:p.STATIC_XFORMS.tableStyles,extLst:p.STATIC_XFORMS.extLst},y&&this.init()}initIndex(){this.index={style:{},numFmt:{},numFmtNextId:164,font:{},border:{},fill:{}}}init(){this.model={styles:[],numFmts:[],fonts:[],borders:[],fills:[],dxfs:[]},this.initIndex(),this._addBorder({}),this._addStyle({numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}),this._addFill({type:"pattern",pattern:"none"}),this._addFill({type:"pattern",pattern:"gray125"}),this.weakMap=new WeakMap}render(y,x){x=x||this.model,y.openXml(r.StdDocAttributes),y.openNode("styleSheet",p.STYLESHEET_ATTRIBUTES),this.index?(x.numFmts&&x.numFmts.length&&(y.openNode("numFmts",{count:x.numFmts.length}),x.numFmts.forEach(S=>{y.writeXml(S)}),y.closeNode()),x.fonts.length||this._addFont({size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}),y.openNode("fonts",{count:x.fonts.length,"x14ac:knownFonts":1}),x.fonts.forEach(S=>{y.writeXml(S)}),y.closeNode(),y.openNode("fills",{count:x.fills.length}),x.fills.forEach(S=>{y.writeXml(S)}),y.closeNode(),y.openNode("borders",{count:x.borders.length}),x.borders.forEach(S=>{y.writeXml(S)}),y.closeNode(),this.map.cellStyleXfs.render(y,[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}]),y.openNode("cellXfs",{count:x.styles.length}),x.styles.forEach(S=>{y.writeXml(S)}),y.closeNode()):(this.map.numFmts.render(y,x.numFmts),this.map.fonts.render(y,x.fonts),this.map.fills.render(y,x.fills),this.map.borders.render(y,x.borders),this.map.cellStyleXfs.render(y,[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}]),this.map.cellXfs.render(y,x.styles)),p.STATIC_XFORMS.cellStyles.render(y),this.map.dxfs.render(y,x.dxfs),p.STATIC_XFORMS.tableStyles.render(y),p.STATIC_XFORMS.extLst.render(y),y.closeNode()}parseOpen(y){if(this.parser)return this.parser.parseOpen(y),!0;switch(y.name){case"styleSheet":return this.initIndex(),!0;default:return this.parser=this.map[y.name],this.parser&&this.parser.parseOpen(y),!0}}parseText(y){this.parser&&this.parser.parseText(y)}parseClose(y){if(this.parser)return this.parser.parseClose(y)||(this.parser=void 0),!0;switch(y){case"styleSheet":{this.model={};let x=(S,O)=>{O.model&&O.model.length&&(this.model[S]=O.model)};if(x("numFmts",this.map.numFmts),x("fonts",this.map.fonts),x("fills",this.map.fills),x("borders",this.map.borders),x("styles",this.map.cellXfs),x("dxfs",this.map.dxfs),this.index={model:[],numFmt:[]},this.model.numFmts){let S=this.index.numFmt;this.model.numFmts.forEach(O=>{S[O.id]=O.formatCode})}return!1}default:return!0}}addStyleModel(y,x){if(!y)return 0;if(this.model.fonts.length||this._addFont({size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}),this.weakMap&&this.weakMap.has(y))return this.weakMap.get(y);let S={};if(x=x||i.ValueType.Number,y.numFmt)S.numFmtId=this._addNumFmtStr(y.numFmt);else switch(x){case i.ValueType.Number:S.numFmtId=this._addNumFmtStr("General");break;case i.ValueType.Date:S.numFmtId=this._addNumFmtStr("mm-dd-yy")}y.font&&(S.fontId=this._addFont(y.font)),y.border&&(S.borderId=this._addBorder(y.border)),y.fill&&(S.fillId=this._addFill(y.fill)),y.alignment&&(S.alignment=y.alignment),y.protection&&(S.protection=y.protection);let O=this._addStyle(S);return this.weakMap&&this.weakMap.set(y,O),O}getStyleModel(y){let x=this.model.styles[y];if(!x)return null;let S=this.index.model[y];if(S)return S;if(S=this.index.model[y]={},x.numFmtId){let B=this.index.numFmt[x.numFmtId]||d.getDefaultFmtCode(x.numFmtId);B&&(S.numFmt=B)}function O(B,U,z){if(z||z===0){let q=U[z];q&&(S[B]=q)}}return O("font",this.model.fonts,x.fontId),O("border",this.model.borders,x.borderId),O("fill",this.model.fills,x.fillId),x.alignment&&(S.alignment=x.alignment),x.protection&&(S.protection=x.protection),S}addDxfStyle(y){return y.numFmt&&(y.numFmtId=this._addNumFmtStr(y.numFmt)),this.model.dxfs.push(y),this.model.dxfs.length-1}getDxfStyle(y){return this.model.dxfs[y]}_addStyle(y){let x=this.map.style.toXml(y),S=this.index.style[x];return S===void 0&&(S=this.index.style[x]=this.model.styles.length,this.model.styles.push(x)),S}_addNumFmtStr(y){let x=d.getDefaultFmtId(y);if(x!==void 0||(x=this.index.numFmt[y],x!==void 0))return x;x=this.index.numFmt[y]=164+this.model.numFmts.length;let S=this.map.numFmt.toXml({id:x,formatCode:y});return this.model.numFmts.push(S),x}_addFont(y){let x=this.map.font.toXml(y),S=this.index.font[x];return S===void 0&&(S=this.index.font[x]=this.model.fonts.length,this.model.fonts.push(x)),S}_addBorder(y){let x=this.map.border.toXml(y),S=this.index.border[x];return S===void 0&&(S=this.index.border[x]=this.model.borders.length,this.model.borders.push(x)),S}_addFill(y){let x=this.map.fill.toXml(y),S=this.index.fill[x];return S===void 0&&(S=this.index.fill[x]=this.model.fills.length,this.model.fills.push(x)),S}}p.STYLESHEET_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x14ac x16r2","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac","xmlns:x16r2":"http://schemas.microsoft.com/office/spreadsheetml/2015/02/main"},p.STATIC_XFORMS={cellStyles:new a({tag:"cellStyles",$:{count:1},c:[{tag:"cellStyle",$:{name:"Normal",xfId:0,builtinId:0}}]}),dxfs:new a({tag:"dxfs",$:{count:0}}),tableStyles:new a({tag:"tableStyles",$:{count:0,defaultTableStyle:"TableStyleMedium2",defaultPivotStyle:"PivotStyleLight16"}}),extLst:new a({tag:"extLst",c:[{tag:"ext",$:{uri:"{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"},c:[{tag:"x14:slicerStyles",$:{defaultSlicerStyle:"SlicerStyleLight1"}}]},{tag:"ext",$:{uri:"{9260A510-F301-46a8-8635-F512D64BE5F5}","xmlns:x15":"http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"},c:[{tag:"x15:timelineStyles",$:{defaultTimelineStyle:"TimeSlicerStyleLight1"}}]}]})},p.Mock=class extends p{constructor(){super(),this.model={styles:[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}],numFmts:[],fonts:[{size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}],borders:[{}],fills:[{type:"pattern",pattern:"none"},{type:"pattern",pattern:"gray125"}]}}parseStream(_){return _.autodrain(),Promise.resolve()}addStyleModel(_,y){switch(y){case i.ValueType.Date:return this.dateStyleId;default:return 0}}get dateStyleId(){if(!this._dateStyleId){let _={numFmtId:d.getDefaultFmtId("mm-dd-yy")};this._dateStyleId=this.model.styles.length,this.model.styles.push(_)}return this._dateStyleId}getStyleModel(){return{}}},t.exports=p},{"../../../doc/enums":7,"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"../static-xform":120,"./border-xform":127,"./dxf-xform":129,"./fill-xform":130,"./font-xform":131,"./numfmt-xform":132,"./style-xform":134}],136:[function(e,t,n){"use strict";let i=e("../base-xform");class r extends i{constructor(a){super(),this.model=a}get tag(){return"u"}render(a,s){if((s=s||this.model)===!0)a.leafNode("u");else{let u=r.Attributes[s];u&&a.leafNode("u",u)}}parseOpen(a){a.name==="u"&&(this.model=a.attributes.val||!0)}parseText(){}parseClose(){return!1}}r.Attributes={single:{},double:{val:"double"},singleAccounting:{val:"singleAccounting"},doubleAccounting:{val:"doubleAccounting"}},t.exports=r},{"../base-xform":32}],137:[function(e,t,n){"use strict";let i=e("../base-xform"),r=e("./filter-column-xform");t.exports=class extends i{constructor(){super(),this.map={filterColumn:new r}}get tag(){return"autoFilter"}prepare(o){o.columns.forEach((a,s)=>{this.map.filterColumn.prepare(a,{index:s})})}render(o,a){return o.openNode(this.tag,{ref:a.autoFilterRef}),a.columns.forEach(s=>{this.map.filterColumn.render(o,s)}),o.closeNode(),!0}parseOpen(o){if(this.parser)return this.parser.parseOpen(o),!0;switch(o.name){case this.tag:return this.model={autoFilterRef:o.attributes.ref,columns:[]},!0;default:if(this.parser=this.map[o.name],this.parser)return this.parseOpen(o),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(o))}}parseText(o){this.parser&&this.parser.parseText(o)}parseClose(o){if(this.parser)return this.parser.parseClose(o)||(this.model.columns.push(this.parser.model),this.parser=void 0),!0;switch(o){case this.tag:return!1;default:throw new Error("Unexpected xml node in parseClose: "+o)}}}},{"../base-xform":32,"./filter-column-xform":139}],138:[function(e,t,n){"use strict";let i=e("../base-xform");t.exports=class extends i{get tag(){return"customFilter"}render(r,o){r.leafNode(this.tag,{val:o.val,operator:o.operator})}parseOpen(r){return r.name===this.tag&&(this.model={val:r.attributes.val,operator:r.attributes.operator},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],139:[function(e,t,n){"use strict";let i=e("../base-xform"),r=e("../list-xform"),o=e("./custom-filter-xform"),a=e("./filter-xform");t.exports=class extends i{constructor(){super(),this.map={customFilters:new r({tag:"customFilters",count:!1,empty:!0,childXform:new o}),filters:new r({tag:"filters",count:!1,empty:!0,childXform:new a})}}get tag(){return"filterColumn"}prepare(s,u){s.colId=u.index.toString()}render(s,u){return u.customFilters?(s.openNode(this.tag,{colId:u.colId,hiddenButton:u.filterButton?"0":"1"}),this.map.customFilters.render(s,u.customFilters),s.closeNode(),!0):(s.leafNode(this.tag,{colId:u.colId,hiddenButton:u.filterButton?"0":"1"}),!0)}parseOpen(s){if(this.parser)return this.parser.parseOpen(s),!0;let{attributes:u}=s;switch(s.name){case this.tag:return this.model={filterButton:u.hiddenButton==="0"},!0;default:if(this.parser=this.map[s.name],this.parser)return this.parseOpen(s),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(s))}}parseText(){}parseClose(s){if(this.parser)return this.parser.parseClose(s)||(this.parser=void 0),!0;switch(s){case this.tag:return this.model.customFilters=this.map.customFilters.model,!1;default:return!0}}}},{"../base-xform":32,"../list-xform":71,"./custom-filter-xform":138,"./filter-xform":140}],140:[function(e,t,n){"use strict";let i=e("../base-xform");t.exports=class extends i{get tag(){return"filter"}render(r,o){r.leafNode(this.tag,{val:o.val})}parseOpen(r){return r.name===this.tag&&(this.model={val:r.attributes.val},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],141:[function(e,t,n){"use strict";let i=e("../base-xform");t.exports=class extends i{get tag(){return"tableColumn"}prepare(r,o){r.id=o.index+1}render(r,o){return r.leafNode(this.tag,{id:o.id.toString(),name:o.name,totalsRowLabel:o.totalsRowLabel,totalsRowFunction:o.totalsRowFunction,dxfId:o.dxfId}),!0}parseOpen(r){if(r.name===this.tag){let{attributes:o}=r;return this.model={name:o.name,totalsRowLabel:o.totalsRowLabel,totalsRowFunction:o.totalsRowFunction,dxfId:o.dxfId},!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],142:[function(e,t,n){"use strict";let i=e("../base-xform");t.exports=class extends i{get tag(){return"tableStyleInfo"}render(r,o){return r.leafNode(this.tag,{name:o.theme?o.theme:void 0,showFirstColumn:o.showFirstColumn?"1":"0",showLastColumn:o.showLastColumn?"1":"0",showRowStripes:o.showRowStripes?"1":"0",showColumnStripes:o.showColumnStripes?"1":"0"}),!0}parseOpen(r){if(r.name===this.tag){let{attributes:o}=r;return this.model={theme:o.name?o.name:null,showFirstColumn:o.showFirstColumn==="1",showLastColumn:o.showLastColumn==="1",showRowStripes:o.showRowStripes==="1",showColumnStripes:o.showColumnStripes==="1"},!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],143:[function(e,t,n){"use strict";let i=e("../../../utils/xml-stream"),r=e("../base-xform"),o=e("../list-xform"),a=e("./auto-filter-xform"),s=e("./table-column-xform"),u=e("./table-style-info-xform");class f extends r{constructor(){super(),this.map={autoFilter:new a,tableColumns:new o({tag:"tableColumns",count:!0,empty:!0,childXform:new s}),tableStyleInfo:new u}}prepare(d,m){this.map.autoFilter.prepare(d),this.map.tableColumns.prepare(d.columns,m)}get tag(){return"table"}render(d,m){d.openXml(i.StdDocAttributes),d.openNode(this.tag,{...f.TABLE_ATTRIBUTES,id:m.id,name:m.name,displayName:m.displayName||m.name,ref:m.tableRef,totalsRowCount:m.totalsRow?"1":void 0,totalsRowShown:m.totalsRow?void 0:"1",headerRowCount:m.headerRow?"1":"0"}),this.map.autoFilter.render(d,m),this.map.tableColumns.render(d,m.columns),this.map.tableStyleInfo.render(d,m.style),d.closeNode()}parseOpen(d){if(this.parser)return this.parser.parseOpen(d),!0;let{name:m,attributes:v}=d;switch(m){case this.tag:this.reset(),this.model={name:v.name,displayName:v.displayName||v.name,tableRef:v.ref,totalsRow:v.totalsRowCount==="1",headerRow:v.headerRowCount==="1"};break;default:this.parser=this.map[d.name],this.parser&&this.parser.parseOpen(d)}return!0}parseText(d){this.parser&&this.parser.parseText(d)}parseClose(d){if(this.parser)return this.parser.parseClose(d)||(this.parser=void 0),!0;switch(d){case this.tag:return this.model.columns=this.map.tableColumns.model,this.map.autoFilter.model&&(this.model.autoFilterRef=this.map.autoFilter.model.autoFilterRef,this.map.autoFilter.model.columns.forEach((m,v)=>{this.model.columns[v].filterButton=m.filterButton})),this.model.style=this.map.tableStyleInfo.model,!1;default:return!0}}reconcile(d,m){d.columns.forEach(v=>{v.dxfId!==void 0&&(v.style=m.styles.getDxfStyle(v.dxfId))})}}f.TABLE_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"xr xr3","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision","xmlns:xr3":"http://schemas.microsoft.com/office/spreadsheetml/2016/revision3"},t.exports=f},{"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"./auto-filter-xform":137,"./table-column-xform":141,"./table-style-info-xform":142}],144:[function(e,t,n){(function(i,r){(function(){"use strict";let o=e("fs"),a=e("jszip"),{PassThrough:s}=e("readable-stream"),u=e("../utils/zip-stream"),f=e("../utils/stream-buf"),c=e("../utils/utils"),d=e("../utils/xml-stream"),{bufferToString:m}=e("../utils/browser-buffer-decode"),v=e("./xform/style/styles-xform"),p=e("./xform/core/core-xform"),_=e("./xform/strings/shared-strings-xform"),y=e("./xform/core/relationships-xform"),x=e("./xform/core/content-types-xform"),S=e("./xform/core/app-xform"),O=e("./xform/book/workbook-xform"),B=e("./xform/sheet/worksheet-xform"),U=e("./xform/drawing/drawing-xform"),z=e("./xform/table/table-xform"),q=e("./xform/comment/comments-xform"),G=e("./xform/comment/vml-notes-xform"),tt=e("./xml/theme1");class K{constructor(N){this.workbook=N}async readFile(N,Z){if(!await c.fs.exists(N))throw new Error("File not found: "+N);let w=o.createReadStream(N);try{let C=await this.read(w,Z);return w.close(),C}catch(C){throw w.close(),C}}parseRels(N){return new y().parseStream(N)}parseWorkbook(N){return new O().parseStream(N)}parseSharedStrings(N){return new _().parseStream(N)}reconcile(N,Z){let w=new O,C=new B(Z),k=new U,T=new z;w.reconcile(N);let R={media:N.media,mediaIndex:N.mediaIndex};Object.keys(N.drawings).forEach(it=>{let ot=N.drawings[it],dt=N.drawingRels[it];dt&&(R.rels=dt.reduce(($,ct)=>($[ct.Id]=ct,$),{}),(ot.anchors||[]).forEach($=>{let ct=$.picture&&$.picture.hyperlinks;ct&&R.rels[ct.rId]&&(ct.hyperlink=R.rels[ct.rId].Target,delete ct.rId)}),k.reconcile(ot,R))});let F={styles:N.styles};Object.values(N.tables).forEach(it=>{T.reconcile(it,F)});let H={styles:N.styles,sharedStrings:N.sharedStrings,media:N.media,mediaIndex:N.mediaIndex,date1904:N.properties&&N.properties.date1904,drawings:N.drawings,comments:N.comments,tables:N.tables,vmlDrawings:N.vmlDrawings};N.worksheets.forEach(it=>{it.relationships=N.worksheetRels[it.sheetNo],C.reconcile(it,H)}),delete N.worksheetHash,delete N.worksheetRels,delete N.globalRels,delete N.sharedStrings,delete N.workbookRels,delete N.sheetDefs,delete N.styles,delete N.mediaIndex,delete N.drawings,delete N.drawingRels,delete N.vmlDrawings}async _processWorksheetEntry(N,Z,w,C,k){let T=new B(C),R=await T.parseStream(N);R.sheetNo=w,Z.worksheetHash[k]=R,Z.worksheets.push(R)}async _processCommentEntry(N,Z,w){let C=new q,k=await C.parseStream(N);Z.comments[`../${w}.xml`]=k}async _processTableEntry(N,Z,w){let C=new z,k=await C.parseStream(N);Z.tables[`../tables/${w}.xml`]=k}async _processWorksheetRelsEntry(N,Z,w){let C=new y,k=await C.parseStream(N);Z.worksheetRels[w]=k}async _processMediaEntry(N,Z,w){let C=w.lastIndexOf(".");if(C>=1){let k=w.substr(C+1),T=w.substr(0,C);await new Promise((R,F)=>{let H=new f;H.on("finish",()=>{Z.mediaIndex[w]=Z.media.length,Z.mediaIndex[T]=Z.media.length;let it={type:"image",name:T,extension:k,buffer:H.toBuffer()};Z.media.push(it),R()}),N.on("error",it=>{F(it)}),N.pipe(H)})}}async _processDrawingEntry(N,Z,w){let C=new U,k=await C.parseStream(N);Z.drawings[w]=k}async _processDrawingRelsEntry(N,Z,w){let C=new y,k=await C.parseStream(N);Z.drawingRels[w]=k}async _processVmlDrawingEntry(N,Z,w){let C=new G,k=await C.parseStream(N);Z.vmlDrawings[`../drawings/${w}.vml`]=k}async _processThemeEntry(N,Z,w){await new Promise((C,k)=>{let T=new f;N.on("error",k),T.on("error",k),T.on("finish",()=>{Z.themes[w]=T.read().toString(),C()}),N.pipe(T)})}createInputStream(){throw new Error("`XLSX#createInputStream` is deprecated. You should use `XLSX#read` instead. This method will be removed in version 5.0. Please follow upgrade instruction: https://github.com/exceljs/exceljs/blob/master/UPGRADE-4.0.md")}async read(N,Z){!N[Symbol.asyncIterator]&&N.pipe&&(N=N.pipe(new s));let w=[];for await(let C of N)w.push(C);return this.load(r.concat(w),Z)}async load(N,Z){let w;w=Z&&Z.base64?r.from(N.toString(),"base64"):N;let C={worksheets:[],worksheetHash:{},worksheetRels:[],themes:{},media:[],mediaIndex:{},drawings:{},drawingRels:{},comments:{},tables:{},vmlDrawings:{}},k=await a.loadAsync(w);for(let T of Object.values(k.files))if(!T.dir){let R,F=T.name;if(F[0]==="/"&&(F=F.substr(1)),F.match(/xl\/media\//)||F.match(/xl\/theme\/([a-zA-Z0-9]+)[.]xml/))R=new s,R.write(await T.async("nodebuffer"));else{let H;R=new s({writableObjectMode:!0,readableObjectMode:!0}),H=i.browser?m(await T.async("nodebuffer")):await T.async("string");let it=16384;for(let ot=0;ot<H.length;ot+=it)R.write(H.substring(ot,ot+it))}switch(R.end(),F){case"_rels/.rels":C.globalRels=await this.parseRels(R);break;case"xl/workbook.xml":{let H=await this.parseWorkbook(R);C.sheets=H.sheets,C.definedNames=H.definedNames,C.views=H.views,C.properties=H.properties,C.calcProperties=H.calcProperties;break}case"xl/_rels/workbook.xml.rels":C.workbookRels=await this.parseRels(R);break;case"xl/sharedStrings.xml":C.sharedStrings=new _,await C.sharedStrings.parseStream(R);break;case"xl/styles.xml":C.styles=new v,await C.styles.parseStream(R);break;case"docProps/app.xml":{let H=new S,it=await H.parseStream(R);C.company=it.company,C.manager=it.manager;break}case"docProps/core.xml":{let H=new p,it=await H.parseStream(R);Object.assign(C,it);break}default:{let H=F.match(/xl\/worksheets\/sheet(\d+)[.]xml/);if(H){await this._processWorksheetEntry(R,C,H[1],Z,F);break}if(H=F.match(/xl\/worksheets\/_rels\/sheet(\d+)[.]xml.rels/),H){await this._processWorksheetRelsEntry(R,C,H[1]);break}if(H=F.match(/xl\/theme\/([a-zA-Z0-9]+)[.]xml/),H){await this._processThemeEntry(R,C,H[1]);break}if(H=F.match(/xl\/media\/([a-zA-Z0-9]+[.][a-zA-Z0-9]{3,4})$/),H){await this._processMediaEntry(R,C,H[1]);break}if(H=F.match(/xl\/drawings\/([a-zA-Z0-9]+)[.]xml/),H){await this._processDrawingEntry(R,C,H[1]);break}if(H=F.match(/xl\/(comments\d+)[.]xml/),H){await this._processCommentEntry(R,C,H[1]);break}if(H=F.match(/xl\/tables\/(table\d+)[.]xml/),H){await this._processTableEntry(R,C,H[1]);break}if(H=F.match(/xl\/drawings\/_rels\/([a-zA-Z0-9]+)[.]xml[.]rels/),H){await this._processDrawingRelsEntry(R,C,H[1]);break}if(H=F.match(/xl\/drawings\/(vmlDrawing\d+)[.]vml/),H){await this._processVmlDrawingEntry(R,C,H[1]);break}}}}return this.reconcile(C,Z),this.workbook.model=C,this.workbook}async addMedia(N,Z){await Promise.all(Z.media.map(async w=>{if(w.type==="image"){let C=`xl/media/${w.name}.${w.extension}`;if(w.filename){let k=await function(T,R){return new Promise((F,H)=>{o.readFile(T,R,(it,ot)=>{it?H(it):F(ot)})})}(w.filename);return N.append(k,{name:C})}if(w.buffer)return N.append(w.buffer,{name:C});if(w.base64){let k=w.base64,T=k.substring(k.indexOf(",")+1);return N.append(T,{name:C,base64:!0})}}throw new Error("Unsupported media")}))}addDrawings(N,Z){let w=new U,C=new y;Z.worksheets.forEach(k=>{let{drawing:T}=k;if(T){w.prepare(T,{});let R=w.toXml(T);N.append(R,{name:`xl/drawings/${T.name}.xml`}),R=C.toXml(T.rels),N.append(R,{name:`xl/drawings/_rels/${T.name}.xml.rels`})}})}addTables(N,Z){let w=new z;Z.worksheets.forEach(C=>{let{tables:k}=C;k.forEach(T=>{w.prepare(T,{});let R=w.toXml(T);N.append(R,{name:"xl/tables/"+T.target})})})}async addContentTypes(N,Z){let w=new x().toXml(Z);N.append(w,{name:"[Content_Types].xml"})}async addApp(N,Z){let w=new S().toXml(Z);N.append(w,{name:"docProps/app.xml"})}async addCore(N,Z){let w=new p;N.append(w.toXml(Z),{name:"docProps/core.xml"})}async addThemes(N,Z){let w=Z.themes||{theme1:tt};Object.keys(w).forEach(C=>{let k=w[C],T=`xl/theme/${C}.xml`;N.append(k,{name:T})})}async addOfficeRels(N){let Z=new y().toXml([{Id:"rId1",Type:K.RelType.OfficeDocument,Target:"xl/workbook.xml"},{Id:"rId2",Type:K.RelType.CoreProperties,Target:"docProps/core.xml"},{Id:"rId3",Type:K.RelType.ExtenderProperties,Target:"docProps/app.xml"}]);N.append(Z,{name:"_rels/.rels"})}async addWorkbookRels(N,Z){let w=1,C=[{Id:"rId"+w++,Type:K.RelType.Styles,Target:"styles.xml"},{Id:"rId"+w++,Type:K.RelType.Theme,Target:"theme/theme1.xml"}];Z.sharedStrings.count&&C.push({Id:"rId"+w++,Type:K.RelType.SharedStrings,Target:"sharedStrings.xml"}),Z.worksheets.forEach(T=>{T.rId="rId"+w++,C.push({Id:T.rId,Type:K.RelType.Worksheet,Target:`worksheets/sheet${T.id}.xml`})});let k=new y().toXml(C);N.append(k,{name:"xl/_rels/workbook.xml.rels"})}async addSharedStrings(N,Z){Z.sharedStrings&&Z.sharedStrings.count&&N.append(Z.sharedStrings.xml,{name:"xl/sharedStrings.xml"})}async addStyles(N,Z){let{xml:w}=Z.styles;w&&N.append(w,{name:"xl/styles.xml"})}async addWorkbook(N,Z){let w=new O;N.append(w.toXml(Z),{name:"xl/workbook.xml"})}async addWorksheets(N,Z){let w=new B,C=new y,k=new q,T=new G;Z.worksheets.forEach(R=>{let F=new d;w.render(F,R),N.append(F.xml,{name:`xl/worksheets/sheet${R.id}.xml`}),R.rels&&R.rels.length&&(F=new d,C.render(F,R.rels),N.append(F.xml,{name:`xl/worksheets/_rels/sheet${R.id}.xml.rels`})),R.comments.length>0&&(F=new d,k.render(F,R),N.append(F.xml,{name:`xl/comments${R.id}.xml`}),F=new d,T.render(F,R),N.append(F.xml,{name:`xl/drawings/vmlDrawing${R.id}.vml`}))})}_finalize(N){return new Promise((Z,w)=>{N.on("finish",()=>{Z(this)}),N.on("error",w),N.finalize()})}prepareModel(N,Z){N.creator=N.creator||"ExcelJS",N.lastModifiedBy=N.lastModifiedBy||"ExcelJS",N.created=N.created||new Date,N.modified=N.modified||new Date,N.useSharedStrings=Z.useSharedStrings===void 0||Z.useSharedStrings,N.useStyles=Z.useStyles===void 0||Z.useStyles,N.sharedStrings=new _,N.styles=N.useStyles?new v(!0):new v.Mock;let w=new O,C=new B;w.prepare(N);let k={sharedStrings:N.sharedStrings,styles:N.styles,date1904:N.properties.date1904,drawingsCount:0,media:N.media};k.drawings=N.drawings=[],k.commentRefs=N.commentRefs=[];let T=0;N.tables=[],N.worksheets.forEach(R=>{R.tables.forEach(F=>{T++,F.target=`table${T}.xml`,F.id=T,N.tables.push(F)}),C.prepare(R,k)})}async write(N,Z){Z=Z||{};let{model:w}=this.workbook,C=new u.ZipWriter(Z.zip);return C.pipe(N),this.prepareModel(w,Z),await this.addContentTypes(C,w),await this.addOfficeRels(C,w),await this.addWorkbookRels(C,w),await this.addWorksheets(C,w),await this.addSharedStrings(C,w),await this.addDrawings(C,w),await this.addTables(C,w),await Promise.all([this.addThemes(C,w),this.addStyles(C,w)]),await this.addMedia(C,w),await Promise.all([this.addApp(C,w),this.addCore(C,w)]),await this.addWorkbook(C,w),this._finalize(C)}writeFile(N,Z){let w=o.createWriteStream(N);return new Promise((C,k)=>{w.on("finish",()=>{C()}),w.on("error",T=>{k(T)}),this.write(w,Z).then(()=>{w.end()}).catch(T=>{k(T)})})}async writeBuffer(N){let Z=new f;return await this.write(Z,N),Z.read()}}K.RelType=e("./rel-type"),t.exports=K}).call(this)}).call(this,e("_process"),e("buffer").Buffer)},{"../utils/browser-buffer-decode":16,"../utils/stream-buf":24,"../utils/utils":27,"../utils/xml-stream":28,"../utils/zip-stream":29,"./rel-type":31,"./xform/book/workbook-xform":38,"./xform/comment/comments-xform":40,"./xform/comment/vml-notes-xform":45,"./xform/core/app-xform":51,"./xform/core/content-types-xform":52,"./xform/core/core-xform":53,"./xform/core/relationships-xform":55,"./xform/drawing/drawing-xform":62,"./xform/sheet/worksheet-xform":115,"./xform/strings/shared-strings-xform":124,"./xform/style/styles-xform":135,"./xform/table/table-xform":143,"./xml/theme1":145,_process:467,buffer:220,fs:216,jszip:441,"readable-stream":491}],145:[function(e,t,n){"use strict";t.exports=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme"> <a:themeElements> <a:clrScheme name="Office"> <a:dk1> <a:sysClr val="windowText" lastClr="000000"/> </a:dk1> <a:lt1> <a:sysClr val="window" lastClr="FFFFFF"/> </a:lt1> <a:dk2> <a:srgbClr val="1F497D"/> </a:dk2> <a:lt2> <a:srgbClr val="EEECE1"/> </a:lt2> <a:accent1> <a:srgbClr val="4F81BD"/> </a:accent1> <a:accent2> <a:srgbClr val="C0504D"/> </a:accent2> <a:accent3> <a:srgbClr val="9BBB59"/> </a:accent3> <a:accent4> <a:srgbClr val="8064A2"/> </a:accent4> <a:accent5> <a:srgbClr val="4BACC6"/> </a:accent5> <a:accent6> <a:srgbClr val="F79646"/> </a:accent6> <a:hlink> <a:srgbClr val="0000FF"/> </a:hlink> <a:folHlink> <a:srgbClr val="800080"/> </a:folHlink> </a:clrScheme> <a:fontScheme name="Office"> <a:majorFont> <a:latin typeface="Cambria"/> <a:ea typeface=""/> <a:cs typeface=""/> <a:font script="Jpan" typeface="\uFF2D\uFF33 \uFF30\u30B4\u30B7\u30C3\u30AF"/> <a:font script="Hang" typeface="\uB9D1\uC740 \uACE0\uB515"/> <a:font script="Hans" typeface="\u5B8B\u4F53"/> <a:font script="Hant" typeface="\u65B0\u7D30\u660E\u9AD4"/> <a:font script="Arab" typeface="Times New Roman"/> <a:font script="Hebr" typeface="Times New Roman"/> <a:font script="Thai" typeface="Tahoma"/> <a:font script="Ethi" typeface="Nyala"/> <a:font script="Beng" typeface="Vrinda"/> <a:font script="Gujr" typeface="Shruti"/> <a:font script="Khmr" typeface="MoolBoran"/> <a:font script="Knda" typeface="Tunga"/> <a:font script="Guru" typeface="Raavi"/> <a:font script="Cans" typeface="Euphemia"/> <a:font script="Cher" typeface="Plantagenet Cherokee"/> <a:font script="Yiii" typeface="Microsoft Yi Baiti"/> <a:font script="Tibt" typeface="Microsoft Himalaya"/> <a:font script="Thaa" typeface="MV Boli"/> <a:font script="Deva" typeface="Mangal"/> <a:font script="Telu" typeface="Gautami"/> <a:font script="Taml" typeface="Latha"/> <a:font script="Syrc" typeface="Estrangelo Edessa"/> <a:font script="Orya" typeface="Kalinga"/> <a:font script="Mlym" typeface="Kartika"/> <a:font script="Laoo" typeface="DokChampa"/> <a:font script="Sinh" typeface="Iskoola Pota"/> <a:font script="Mong" typeface="Mongolian Baiti"/> <a:font script="Viet" typeface="Times New Roman"/> <a:font script="Uigh" typeface="Microsoft Uighur"/> <a:font script="Geor" typeface="Sylfaen"/> </a:majorFont> <a:minorFont> <a:latin typeface="Calibri"/> <a:ea typeface=""/> <a:cs typeface=""/> <a:font script="Jpan" typeface="\uFF2D\uFF33 \uFF30\u30B4\u30B7\u30C3\u30AF"/> <a:font script="Hang" typeface="\uB9D1\uC740 \uACE0\uB515"/> <a:font script="Hans" typeface="\u5B8B\u4F53"/> <a:font script="Hant" typeface="\u65B0\u7D30\u660E\u9AD4"/> <a:font script="Arab" typeface="Arial"/> <a:font script="Hebr" typeface="Arial"/> <a:font script="Thai" typeface="Tahoma"/> <a:font script="Ethi" typeface="Nyala"/> <a:font script="Beng" typeface="Vrinda"/> <a:font script="Gujr" typeface="Shruti"/> <a:font script="Khmr" typeface="DaunPenh"/> <a:font script="Knda" typeface="Tunga"/> <a:font script="Guru" typeface="Raavi"/> <a:font script="Cans" typeface="Euphemia"/> <a:font script="Cher" typeface="Plantagenet Cherokee"/> <a:font script="Yiii" typeface="Microsoft Yi Baiti"/> <a:font script="Tibt" typeface="Microsoft Himalaya"/> <a:font script="Thaa" typeface="MV Boli"/> <a:font script="Deva" typeface="Mangal"/> <a:font script="Telu" typeface="Gautami"/> <a:font script="Taml" typeface="Latha"/> <a:font script="Syrc" typeface="Estrangelo Edessa"/> <a:font script="Orya" typeface="Kalinga"/> <a:font script="Mlym" typeface="Kartika"/> <a:font script="Laoo" typeface="DokChampa"/> <a:font script="Sinh" typeface="Iskoola Pota"/> <a:font script="Mong" typeface="Mongolian Baiti"/> <a:font script="Viet" typeface="Arial"/> <a:font script="Uigh" typeface="Microsoft Uighur"/> <a:font script="Geor" typeface="Sylfaen"/> </a:minorFont> </a:fontScheme> <a:fmtScheme name="Office"> <a:fillStyleLst> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="50000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="35000"> <a:schemeClr val="phClr"> <a:tint val="37000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:tint val="15000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:lin ang="16200000" scaled="1"/> </a:gradFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="100000"/> <a:shade val="100000"/> <a:satMod val="130000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:tint val="50000"/> <a:shade val="100000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:lin ang="16200000" scaled="0"/> </a:gradFill> </a:fillStyleLst> <a:lnStyleLst> <a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"> <a:shade val="95000"/> <a:satMod val="105000"/> </a:schemeClr> </a:solidFill> <a:prstDash val="solid"/> </a:ln> <a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:prstDash val="solid"/> </a:ln> <a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:prstDash val="solid"/> </a:ln> </a:lnStyleLst> <a:effectStyleLst> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="38000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> </a:effectStyle> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="35000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> </a:effectStyle> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="35000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> <a:scene3d> <a:camera prst="orthographicFront"> <a:rot lat="0" lon="0" rev="0"/> </a:camera> <a:lightRig rig="threePt" dir="t"> <a:rot lat="0" lon="0" rev="1200000"/> </a:lightRig> </a:scene3d> <a:sp3d> <a:bevelT w="63500" h="25400"/> </a:sp3d> </a:effectStyle> </a:effectStyleLst> <a:bgFillStyleLst> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="40000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> <a:gs pos="40000"> <a:schemeClr val="phClr"> <a:tint val="45000"/> <a:shade val="99000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:shade val="20000"/> <a:satMod val="255000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:path path="circle"> <a:fillToRect l="50000" t="-80000" r="50000" b="180000"/> </a:path> </a:gradFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="80000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:shade val="30000"/> <a:satMod val="200000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:path path="circle"> <a:fillToRect l="50000" t="50000" r="50000" b="50000"/> </a:path> </a:gradFill> </a:bgFillStyleLst> </a:fmtScheme> </a:themeElements> <a:objectDefaults> <a:spDef> <a:spPr/> <a:bodyPr/> <a:lstStyle/> <a:style> <a:lnRef idx="1"> <a:schemeClr val="accent1"/> </a:lnRef> <a:fillRef idx="3"> <a:schemeClr val="accent1"/> </a:fillRef> <a:effectRef idx="2"> <a:schemeClr val="accent1"/> </a:effectRef> <a:fontRef idx="minor"> <a:schemeClr val="lt1"/> </a:fontRef> </a:style> </a:spDef> <a:lnDef> <a:spPr/> <a:bodyPr/> <a:lstStyle/> <a:style> <a:lnRef idx="2"> <a:schemeClr val="accent1"/> </a:lnRef> <a:fillRef idx="0"> <a:schemeClr val="accent1"/> </a:fillRef> <a:effectRef idx="1"> <a:schemeClr val="accent1"/> </a:effectRef> <a:fontRef idx="minor"> <a:schemeClr val="tx1"/> </a:fontRef> </a:style> </a:lnDef> </a:objectDefaults> <a:extraClrSchemeLst/> </a:theme>`},{}],146:[function(e,t,n){(function(i){(function(){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.CsvFormatterStream=void 0;let r=e("stream"),o=e("./formatter");class a extends r.Transform{constructor(u){super({writableObjectMode:u.objectMode}),this.hasWrittenBOM=!1,this.formatterOptions=u,this.rowFormatter=new o.RowFormatter(u),this.hasWrittenBOM=!u.writeBOM}transform(u){return this.rowFormatter.rowTransform=u,this}_transform(u,f,c){let d=!1;try{this.hasWrittenBOM||(this.push(this.formatterOptions.BOM),this.hasWrittenBOM=!0),this.rowFormatter.format(u,(m,v)=>m?(d=!0,c(m)):(v&&v.forEach(p=>{this.push(i.from(p,"utf8"))}),d=!0,c()))}catch(m){if(d)throw m;c(m)}}_flush(u){this.rowFormatter.finish((f,c)=>f?u(f):(c&&c.forEach(d=>{this.push(i.from(d,"utf8"))}),u()))}}n.CsvFormatterStream=a}).call(this)}).call(this,e("buffer").Buffer)},{"./formatter":150,buffer:220,stream:505}],147:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.FormatterOptions=void 0,n.FormatterOptions=class{constructor(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};var r;this.objectMode=!0,this.delimiter=",",this.rowDelimiter=`
`,this.quote='"',this.escape=this.quote,this.quoteColumns=!1,this.quoteHeaders=this.quoteColumns,this.headers=null,this.includeEndRowDelimiter=!1,this.writeBOM=!1,this.BOM="\uFEFF",this.alwaysWriteHeaders=!1,Object.assign(this,i||{}),i?.quoteHeaders===void 0&&(this.quoteHeaders=this.quoteColumns),i?.quote===!0?this.quote='"':i?.quote===!1&&(this.quote=""),typeof i?.escape!="string"&&(this.escape=this.quote),this.shouldWriteHeaders=!!this.headers&&((r=i.writeHeaders)===null||r===void 0||r),this.headers=Array.isArray(this.headers)?this.headers:null,this.escapedQuote=`${this.escape}${this.quote}`}}},{}],148:[function(e,t,n){"use strict";var i=function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(n,"__esModule",{value:!0}),n.FieldFormatter=void 0;let r=i(e("lodash.isboolean")),o=i(e("lodash.isnil")),a=i(e("lodash.escaperegexp"));n.FieldFormatter=class{constructor(s){this._headers=null,this.formatterOptions=s,s.headers!==null&&(this.headers=s.headers),this.REPLACE_REGEXP=new RegExp(s.quote,"g");let u=`[${s.delimiter}${a.default(s.rowDelimiter)}|\r|
]`;this.ESCAPE_REGEXP=new RegExp(u)}set headers(s){this._headers=s}shouldQuote(s,u){let f=u?this.formatterOptions.quoteHeaders:this.formatterOptions.quoteColumns;return r.default(f)?f:Array.isArray(f)?f[s]:this._headers!==null&&f[this._headers[s]]}format(s,u,f){let c=(""+(o.default(s)?"":s)).replace(/\0/g,""),{formatterOptions:d}=this;return d.quote!==""&&c.indexOf(d.quote)!==-1?this.quoteField(c.replace(this.REPLACE_REGEXP,d.escapedQuote)):c.search(this.ESCAPE_REGEXP)!==-1||this.shouldQuote(u,f)?this.quoteField(c):c}quoteField(s){let{quote:u}=this.formatterOptions;return`${u}${s}${u}`}}},{"lodash.escaperegexp":442,"lodash.isboolean":444,"lodash.isnil":447}],149:[function(e,t,n){"use strict";var i=function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(n,"__esModule",{value:!0}),n.RowFormatter=void 0;let r=i(e("lodash.isfunction")),o=i(e("lodash.isequal")),a=e("./FieldFormatter"),s=e("../types");class u{constructor(c){this.rowCount=0,this.formatterOptions=c,this.fieldFormatter=new a.FieldFormatter(c),this.headers=c.headers,this.shouldWriteHeaders=c.shouldWriteHeaders,this.hasWrittenHeaders=!1,this.headers!==null&&(this.fieldFormatter.headers=this.headers),c.transform&&(this.rowTransform=c.transform)}static isRowHashArray(c){return!!Array.isArray(c)&&Array.isArray(c[0])&&c[0].length===2}static isRowArray(c){return Array.isArray(c)&&!this.isRowHashArray(c)}static gatherHeaders(c){return u.isRowHashArray(c)?c.map(d=>d[0]):Array.isArray(c)?c:Object.keys(c)}static createTransform(c){return s.isSyncTransform(c)?(d,m)=>{let v=null;try{v=c(d)}catch(p){return m(p)}return m(null,v)}:(d,m)=>{c(d,m)}}set rowTransform(c){if(!r.default(c))throw new TypeError("The transform should be a function");this._rowTransform=u.createTransform(c)}format(c,d){this.callTransformer(c,(m,v)=>{if(m)return d(m);if(!c)return d(null);let p=[];if(v){let{shouldFormatColumns:_,headers:y}=this.checkHeaders(v);if(this.shouldWriteHeaders&&y&&!this.hasWrittenHeaders&&(p.push(this.formatColumns(y,!0)),this.hasWrittenHeaders=!0),_){let x=this.gatherColumns(v);p.push(this.formatColumns(x,!1))}}return d(null,p)})}finish(c){let d=[];if(this.formatterOptions.alwaysWriteHeaders&&this.rowCount===0){if(!this.headers)return c(new Error("`alwaysWriteHeaders` option is set to true but `headers` option not provided."));d.push(this.formatColumns(this.headers,!0))}return this.formatterOptions.includeEndRowDelimiter&&d.push(this.formatterOptions.rowDelimiter),c(null,d)}checkHeaders(c){if(this.headers)return{shouldFormatColumns:!0,headers:this.headers};let d=u.gatherHeaders(c);return this.headers=d,this.fieldFormatter.headers=d,this.shouldWriteHeaders?{shouldFormatColumns:!o.default(d,c),headers:d}:{shouldFormatColumns:!0,headers:null}}gatherColumns(c){if(this.headers===null)throw new Error("Headers is currently null");return Array.isArray(c)?u.isRowHashArray(c)?this.headers.map((d,m)=>{let v=c[m];return v?v[1]:""}):u.isRowArray(c)&&!this.shouldWriteHeaders?c:this.headers.map((d,m)=>c[m]):this.headers.map(d=>c[d])}callTransformer(c,d){return this._rowTransform?this._rowTransform(c,d):d(null,c)}formatColumns(c,d){let m=c.map((p,_)=>this.fieldFormatter.format(p,_,d)).join(this.formatterOptions.delimiter),{rowCount:v}=this;return this.rowCount+=1,v?[this.formatterOptions.rowDelimiter,m].join(""):m}}n.RowFormatter=u},{"../types":152,"./FieldFormatter":148,"lodash.isequal":445,"lodash.isfunction":446}],150:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.FieldFormatter=n.RowFormatter=void 0;var i=e("./RowFormatter");Object.defineProperty(n,"RowFormatter",{enumerable:!0,get:function(){return i.RowFormatter}});var r=e("./FieldFormatter");Object.defineProperty(n,"FieldFormatter",{enumerable:!0,get:function(){return r.FieldFormatter}})},{"./FieldFormatter":148,"./RowFormatter":149}],151:[function(e,t,n){(function(i){(function(){"use strict";var r=Object.create?function(_,y,x,S){S===void 0&&(S=x),Object.defineProperty(_,S,{enumerable:!0,get:function(){return y[x]}})}:function(_,y,x,S){S===void 0&&(S=x),_[S]=y[x]},o=Object.create?function(_,y){Object.defineProperty(_,"default",{enumerable:!0,value:y})}:function(_,y){_.default=y},a=function(_){if(_&&_.__esModule)return _;var y={};if(_!=null)for(var x in _)x!=="default"&&Object.prototype.hasOwnProperty.call(_,x)&&r(y,_,x);return o(y,_),y},s=function(_,y){for(var x in _)x==="default"||Object.prototype.hasOwnProperty.call(y,x)||r(y,_,x)};Object.defineProperty(n,"__esModule",{value:!0}),n.writeToPath=n.writeToString=n.writeToBuffer=n.writeToStream=n.write=n.format=n.FormatterOptions=n.CsvFormatterStream=void 0;let u=e("util"),f=e("stream"),c=a(e("fs")),d=e("./FormatterOptions"),m=e("./CsvFormatterStream");s(e("./types"),n);var v=e("./CsvFormatterStream");Object.defineProperty(n,"CsvFormatterStream",{enumerable:!0,get:function(){return v.CsvFormatterStream}});var p=e("./FormatterOptions");Object.defineProperty(n,"FormatterOptions",{enumerable:!0,get:function(){return p.FormatterOptions}}),n.format=_=>new m.CsvFormatterStream(new d.FormatterOptions(_)),n.write=(_,y)=>{let x=n.format(y),S=u.promisify((O,B)=>{x.write(O,void 0,B)});return _.reduce((O,B)=>O.then(()=>S(B)),Promise.resolve()).then(()=>x.end()).catch(O=>{x.emit("error",O)}),x},n.writeToStream=(_,y,x)=>n.write(y,x).pipe(_),n.writeToBuffer=function(_){let y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},x=[],S=new f.Writable({write(O,B,U){x.push(O),U()}});return new Promise((O,B)=>{S.on("error",B).on("finish",()=>O(i.concat(x))),n.write(_,y).pipe(S)})},n.writeToString=(_,y)=>n.writeToBuffer(_,y).then(x=>x.toString()),n.writeToPath=(_,y,x)=>{let S=c.createWriteStream(_,{encoding:"utf8"});return n.write(y,x).pipe(S)}}).call(this)}).call(this,e("buffer").Buffer)},{"./CsvFormatterStream":146,"./FormatterOptions":147,"./types":152,buffer:220,fs:216,stream:505,util:527}],152:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isSyncTransform=void 0,n.isSyncTransform=i=>i.length===1},{}],153:[function(e,t,n){(function(i){(function(){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.CsvParserStream=void 0;let r=e("string_decoder"),o=e("stream"),a=e("./transforms"),s=e("./parser");class u extends o.Transform{constructor(c){super({objectMode:c.objectMode}),this.lines="",this.rowCount=0,this.parsedRowCount=0,this.parsedLineCount=0,this.endEmitted=!1,this.headersEmitted=!1,this.parserOptions=c,this.parser=new s.Parser(c),this.headerTransformer=new a.HeaderTransformer(c),this.decoder=new r.StringDecoder(c.encoding),this.rowTransformerValidator=new a.RowTransformerValidator}get hasHitRowLimit(){return this.parserOptions.limitRows&&this.rowCount>=this.parserOptions.maxRows}get shouldEmitRows(){return this.parsedRowCount>this.parserOptions.skipRows}get shouldSkipLine(){return this.parsedLineCount<=this.parserOptions.skipLines}transform(c){return this.rowTransformerValidator.rowTransform=c,this}validate(c){return this.rowTransformerValidator.rowValidator=c,this}emit(c){if(c==="end")return this.endEmitted||(this.endEmitted=!0,super.emit("end",this.rowCount)),!1;for(var d=arguments.length,m=new Array(d>1?d-1:0),v=1;v<d;v++)m[v-1]=arguments[v];return super.emit(c,...m)}_transform(c,d,m){if(this.hasHitRowLimit)return m();let v=u.wrapDoneCallback(m);try{let{lines:p}=this,_=p+this.decoder.write(c),y=this.parse(_,!0);return this.processRows(y,v)}catch(p){return v(p)}}_flush(c){let d=u.wrapDoneCallback(c);if(this.hasHitRowLimit)return d();try{let m=this.lines+this.decoder.end(),v=this.parse(m,!1);return this.processRows(v,d)}catch(m){return d(m)}}parse(c,d){if(!c)return[];let{line:m,rows:v}=this.parser.parse(c,d);return this.lines=m,v}processRows(c,d){let m=c.length,v=p=>{let _=S=>S?d(S):p%100!=0?v(p+1):void i(()=>v(p+1));if(this.checkAndEmitHeaders(),p>=m||this.hasHitRowLimit)return d();if(this.parsedLineCount+=1,this.shouldSkipLine)return _();let y=c[p];this.rowCount+=1,this.parsedRowCount+=1;let x=this.rowCount;return this.transformRow(y,(S,O)=>{if(S)return this.rowCount-=1,_(S);if(!O)return _(new Error("expected transform result"));if(O.isValid){if(O.row)return this.pushRow(O.row,_)}else this.emit("data-invalid",O.row,x,O.reason);return _()})};v(0)}transformRow(c,d){try{this.headerTransformer.transform(c,(m,v)=>m?d(m):v?v.isValid?v.row?this.shouldEmitRows?this.rowTransformerValidator.transformAndValidate(v.row,d):this.skipRow(d):(this.rowCount-=1,this.parsedRowCount-=1,d(null,{row:null,isValid:!0})):this.shouldEmitRows?d(null,{isValid:!1,row:c}):this.skipRow(d):d(new Error("Expected result from header transform")))}catch(m){d(m)}}checkAndEmitHeaders(){!this.headersEmitted&&this.headerTransformer.headers&&(this.headersEmitted=!0,this.emit("headers",this.headerTransformer.headers))}skipRow(c){return this.rowCount-=1,c(null,{row:null,isValid:!0})}pushRow(c,d){try{this.parserOptions.objectMode?this.push(c):this.push(JSON.stringify(c)),d()}catch(m){d(m)}}static wrapDoneCallback(c){let d=!1;return function(m){if(m){if(d)throw m;return d=!0,void c(m)}for(var v=arguments.length,p=new Array(v>1?v-1:0),_=1;_<v;_++)p[_-1]=arguments[_];c(...p)}}}n.CsvParserStream=u}).call(this)}).call(this,e("timers").setImmediate)},{"./parser":165,"./transforms":168,stream:505,string_decoder:218,timers:523}],154:[function(e,t,n){"use strict";var i=function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(n,"__esModule",{value:!0}),n.ParserOptions=void 0;let r=i(e("lodash.escaperegexp")),o=i(e("lodash.isnil"));n.ParserOptions=class{constructor(a){var s;if(this.objectMode=!0,this.delimiter=",",this.ignoreEmpty=!1,this.quote='"',this.escape=null,this.escapeChar=this.quote,this.comment=null,this.supportsComments=!1,this.ltrim=!1,this.rtrim=!1,this.trim=!1,this.headers=null,this.renameHeaders=!1,this.strictColumnHandling=!1,this.discardUnmappedColumns=!1,this.carriageReturn="\r",this.encoding="utf8",this.limitRows=!1,this.maxRows=0,this.skipLines=0,this.skipRows=0,Object.assign(this,a||{}),this.delimiter.length>1)throw new Error("delimiter option must be one character long");this.escapedDelimiter=r.default(this.delimiter),this.escapeChar=(s=this.escape)!==null&&s!==void 0?s:this.quote,this.supportsComments=!o.default(this.comment),this.NEXT_TOKEN_REGEXP=new RegExp(`([^\\s]|\\r\\n|\\n|\\r|${this.escapedDelimiter})`),this.maxRows>0&&(this.limitRows=!0)}}},{"lodash.escaperegexp":442,"lodash.isnil":447}],155:[function(e,t,n){"use strict";var i=Object.create?function(v,p,_,y){y===void 0&&(y=_),Object.defineProperty(v,y,{enumerable:!0,get:function(){return p[_]}})}:function(v,p,_,y){y===void 0&&(y=_),v[y]=p[_]},r=Object.create?function(v,p){Object.defineProperty(v,"default",{enumerable:!0,value:p})}:function(v,p){v.default=p},o=function(v){if(v&&v.__esModule)return v;var p={};if(v!=null)for(var _ in v)_!=="default"&&Object.prototype.hasOwnProperty.call(v,_)&&i(p,v,_);return r(p,v),p},a=function(v,p){for(var _ in v)_==="default"||Object.prototype.hasOwnProperty.call(p,_)||i(p,v,_)};Object.defineProperty(n,"__esModule",{value:!0}),n.parseString=n.parseFile=n.parseStream=n.parse=n.ParserOptions=n.CsvParserStream=void 0;let s=o(e("fs")),u=e("stream"),f=e("./ParserOptions"),c=e("./CsvParserStream");a(e("./types"),n);var d=e("./CsvParserStream");Object.defineProperty(n,"CsvParserStream",{enumerable:!0,get:function(){return d.CsvParserStream}});var m=e("./ParserOptions");Object.defineProperty(n,"ParserOptions",{enumerable:!0,get:function(){return m.ParserOptions}}),n.parse=v=>new c.CsvParserStream(new f.ParserOptions(v)),n.parseStream=(v,p)=>v.pipe(new c.CsvParserStream(new f.ParserOptions(p))),n.parseFile=function(v){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return s.createReadStream(v).pipe(new c.CsvParserStream(new f.ParserOptions(p)))},n.parseString=(v,p)=>{let _=new u.Readable;return _.push(v),_.push(null),_.pipe(new c.CsvParserStream(new f.ParserOptions(p)))}},{"./CsvParserStream":153,"./ParserOptions":154,"./types":169,fs:216,stream:505}],156:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Parser=void 0;let i=e("./Scanner"),r=e("./RowParser"),o=e("./Token");class a{constructor(u){this.parserOptions=u,this.rowParser=new r.RowParser(this.parserOptions)}static removeBOM(u){return u&&u.charCodeAt(0)===65279?u.slice(1):u}parse(u,f){let c=new i.Scanner({line:a.removeBOM(u),parserOptions:this.parserOptions,hasMoreData:f});return this.parserOptions.supportsComments?this.parseWithComments(c):this.parseWithoutComments(c)}parseWithoutComments(u){let f=[],c=!0;for(;c;)c=this.parseRow(u,f);return{line:u.line,rows:f}}parseWithComments(u){let{parserOptions:f}=this,c=[];for(let d=u.nextCharacterToken;d!==null;d=u.nextCharacterToken)if(o.Token.isTokenComment(d,f)){if(u.advancePastLine()===null)return{line:u.lineFromCursor,rows:c};if(!u.hasMoreCharacters)return{line:u.lineFromCursor,rows:c};u.truncateToCursor()}else if(!this.parseRow(u,c))break;return{line:u.line,rows:c}}parseRow(u,f){if(!u.nextNonSpaceToken)return!1;let c=this.rowParser.parse(u);return c!==null&&(this.parserOptions.ignoreEmpty&&r.RowParser.isEmptyRow(c)||f.push(c),!0)}}n.Parser=a},{"./RowParser":157,"./Scanner":158,"./Token":159}],157:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.RowParser=void 0;let i=e("./column"),r=e("./Token");n.RowParser=class{constructor(o){this.parserOptions=o,this.columnParser=new i.ColumnParser(o)}static isEmptyRow(o){return o.join("").replace(/\s+/g,"")===""}parse(o){let{parserOptions:a}=this,{hasMoreData:s}=o,u=o,f=[],c=this.getStartToken(u,f);for(;c;){if(r.Token.isTokenRowDelimiter(c))return u.advancePastToken(c),!u.hasMoreCharacters&&r.Token.isTokenCarriageReturn(c,a)&&s?null:(u.truncateToCursor(),f);if(!this.shouldSkipColumnParse(u,c,f)){let d=this.columnParser.parse(u);if(d===null)return null;f.push(d)}c=u.nextNonSpaceToken}return s?null:(u.truncateToCursor(),f)}getStartToken(o,a){let s=o.nextNonSpaceToken;return s!==null&&r.Token.isTokenDelimiter(s,this.parserOptions)?(a.push(""),o.nextNonSpaceToken):s}shouldSkipColumnParse(o,a,s){let{parserOptions:u}=this;if(r.Token.isTokenDelimiter(a,u)){o.advancePastToken(a);let f=o.nextCharacterToken;if(!o.hasMoreCharacters||f!==null&&r.Token.isTokenRowDelimiter(f)||f!==null&&r.Token.isTokenDelimiter(f,u))return s.push(""),!0}return!1}}},{"./Token":159,"./column":164}],158:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Scanner=void 0;let i=e("./Token"),r=/((?:\r\n)|\n|\r)/;n.Scanner=class{constructor(o){this.cursor=0,this.line=o.line,this.lineLength=this.line.length,this.parserOptions=o.parserOptions,this.hasMoreData=o.hasMoreData,this.cursor=o.cursor||0}get hasMoreCharacters(){return this.lineLength>this.cursor}get nextNonSpaceToken(){let{lineFromCursor:o}=this,a=this.parserOptions.NEXT_TOKEN_REGEXP;if(o.search(a)===-1)return null;let s=a.exec(o);if(s==null)return null;let u=s[1],f=this.cursor+(s.index||0);return new i.Token({token:u,startCursor:f,endCursor:f+u.length-1})}get nextCharacterToken(){let{cursor:o,lineLength:a}=this;return a<=o?null:new i.Token({token:this.line[o],startCursor:o,endCursor:o})}get lineFromCursor(){return this.line.substr(this.cursor)}advancePastLine(){let o=r.exec(this.lineFromCursor);return o?(this.cursor+=(o.index||0)+o[0].length,this):this.hasMoreData?null:(this.cursor=this.lineLength,this)}advanceTo(o){return this.cursor=o,this}advanceToToken(o){return this.cursor=o.startCursor,this}advancePastToken(o){return this.cursor=o.endCursor+1,this}truncateToCursor(){return this.line=this.lineFromCursor,this.lineLength=this.line.length,this.cursor=0,this}}},{"./Token":159}],159:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Token=void 0,n.Token=class{constructor(i){this.token=i.token,this.startCursor=i.startCursor,this.endCursor=i.endCursor}static isTokenRowDelimiter(i){let r=i.token;return r==="\r"||r===`
`||r===`\r
`}static isTokenCarriageReturn(i,r){return i.token===r.carriageReturn}static isTokenComment(i,r){return r.supportsComments&&!!i&&i.token===r.comment}static isTokenEscapeCharacter(i,r){return i.token===r.escapeChar}static isTokenQuote(i,r){return i.token===r.quote}static isTokenDelimiter(i,r){return i.token===r.delimiter}}},{}],160:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ColumnFormatter=void 0,n.ColumnFormatter=class{constructor(i){i.trim?this.format=r=>r.trim():i.ltrim?this.format=r=>r.trimLeft():i.rtrim?this.format=r=>r.trimRight():this.format=r=>r}}},{}],161:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ColumnParser=void 0;let i=e("./NonQuotedColumnParser"),r=e("./QuotedColumnParser"),o=e("../Token");n.ColumnParser=class{constructor(a){this.parserOptions=a,this.quotedColumnParser=new r.QuotedColumnParser(a),this.nonQuotedColumnParser=new i.NonQuotedColumnParser(a)}parse(a){let{nextNonSpaceToken:s}=a;return s!==null&&o.Token.isTokenQuote(s,this.parserOptions)?(a.advanceToToken(s),this.quotedColumnParser.parse(a)):this.nonQuotedColumnParser.parse(a)}}},{"../Token":159,"./NonQuotedColumnParser":162,"./QuotedColumnParser":163}],162:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.NonQuotedColumnParser=void 0;let i=e("./ColumnFormatter"),r=e("../Token");n.NonQuotedColumnParser=class{constructor(o){this.parserOptions=o,this.columnFormatter=new i.ColumnFormatter(o)}parse(o){if(!o.hasMoreCharacters)return null;let{parserOptions:a}=this,s=[],u=o.nextCharacterToken;for(;u&&!r.Token.isTokenDelimiter(u,a)&&!r.Token.isTokenRowDelimiter(u);u=o.nextCharacterToken)s.push(u.token),o.advancePastToken(u);return this.columnFormatter.format(s.join(""))}}},{"../Token":159,"./ColumnFormatter":160}],163:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.QuotedColumnParser=void 0;let i=e("./ColumnFormatter"),r=e("../Token");n.QuotedColumnParser=class{constructor(o){this.parserOptions=o,this.columnFormatter=new i.ColumnFormatter(o)}parse(o){if(!o.hasMoreCharacters)return null;let a=o.cursor,{foundClosingQuote:s,col:u}=this.gatherDataBetweenQuotes(o);if(!s){if(o.advanceTo(a),!o.hasMoreData)throw new Error(`Parse Error: missing closing: '${this.parserOptions.quote||""}' in line: at '${o.lineFromCursor.replace(/[\r\n]/g,"\\n'")}'`);return null}return this.checkForMalformedColumn(o),u}gatherDataBetweenQuotes(o){let{parserOptions:a}=this,s=!1,u=!1,f=[],c=o.nextCharacterToken;for(;!u&&c!==null;c=o.nextCharacterToken){let d=r.Token.isTokenQuote(c,a);if(!s&&d)s=!0;else if(s)if(r.Token.isTokenEscapeCharacter(c,a)){o.advancePastToken(c);let m=o.nextCharacterToken;m!==null&&(r.Token.isTokenQuote(m,a)||r.Token.isTokenEscapeCharacter(m,a))?(f.push(m.token),c=m):d?u=!0:f.push(c.token)}else d?u=!0:f.push(c.token);o.advancePastToken(c)}return{col:this.columnFormatter.format(f.join("")),foundClosingQuote:u}}checkForMalformedColumn(o){let{parserOptions:a}=this,{nextNonSpaceToken:s}=o;if(s){let u=r.Token.isTokenDelimiter(s,a),f=r.Token.isTokenRowDelimiter(s);if(!u&&!f){let c=o.lineFromCursor.substr(0,10).replace(/[\r\n]/g,"\\n'");throw new Error(`Parse Error: expected: '${a.escapedDelimiter}' OR new line got: '${s.token}'. at '${c}`)}o.advanceToToken(s)}else o.hasMoreData||o.advancePastLine()}}},{"../Token":159,"./ColumnFormatter":160}],164:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ColumnFormatter=n.QuotedColumnParser=n.NonQuotedColumnParser=n.ColumnParser=void 0;var i=e("./ColumnParser");Object.defineProperty(n,"ColumnParser",{enumerable:!0,get:function(){return i.ColumnParser}});var r=e("./NonQuotedColumnParser");Object.defineProperty(n,"NonQuotedColumnParser",{enumerable:!0,get:function(){return r.NonQuotedColumnParser}});var o=e("./QuotedColumnParser");Object.defineProperty(n,"QuotedColumnParser",{enumerable:!0,get:function(){return o.QuotedColumnParser}});var a=e("./ColumnFormatter");Object.defineProperty(n,"ColumnFormatter",{enumerable:!0,get:function(){return a.ColumnFormatter}})},{"./ColumnFormatter":160,"./ColumnParser":161,"./NonQuotedColumnParser":162,"./QuotedColumnParser":163}],165:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.QuotedColumnParser=n.NonQuotedColumnParser=n.ColumnParser=n.Token=n.Scanner=n.RowParser=n.Parser=void 0;var i=e("./Parser");Object.defineProperty(n,"Parser",{enumerable:!0,get:function(){return i.Parser}});var r=e("./RowParser");Object.defineProperty(n,"RowParser",{enumerable:!0,get:function(){return r.RowParser}});var o=e("./Scanner");Object.defineProperty(n,"Scanner",{enumerable:!0,get:function(){return o.Scanner}});var a=e("./Token");Object.defineProperty(n,"Token",{enumerable:!0,get:function(){return a.Token}});var s=e("./column");Object.defineProperty(n,"ColumnParser",{enumerable:!0,get:function(){return s.ColumnParser}}),Object.defineProperty(n,"NonQuotedColumnParser",{enumerable:!0,get:function(){return s.NonQuotedColumnParser}}),Object.defineProperty(n,"QuotedColumnParser",{enumerable:!0,get:function(){return s.QuotedColumnParser}})},{"./Parser":156,"./RowParser":157,"./Scanner":158,"./Token":159,"./column":164}],166:[function(e,t,n){"use strict";var i=function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(n,"__esModule",{value:!0}),n.HeaderTransformer=void 0;let r=i(e("lodash.isundefined")),o=i(e("lodash.isfunction")),a=i(e("lodash.uniq")),s=i(e("lodash.groupby"));n.HeaderTransformer=class{constructor(u){this.headers=null,this.receivedHeaders=!1,this.shouldUseFirstRow=!1,this.processedFirstRow=!1,this.headersLength=0,this.parserOptions=u,u.headers===!0?this.shouldUseFirstRow=!0:Array.isArray(u.headers)?this.setHeaders(u.headers):o.default(u.headers)&&(this.headersTransform=u.headers)}transform(u,f){return this.shouldMapRow(u)?f(null,this.processRow(u)):f(null,{row:null,isValid:!0})}shouldMapRow(u){let{parserOptions:f}=this;if(!this.headersTransform&&f.renameHeaders&&!this.processedFirstRow){if(!this.receivedHeaders)throw new Error("Error renaming headers: new headers must be provided in an array");return this.processedFirstRow=!0,!1}if(!this.receivedHeaders&&Array.isArray(u)){if(this.headersTransform)this.setHeaders(this.headersTransform(u));else{if(!this.shouldUseFirstRow)return!0;this.setHeaders(u)}return!1}return!0}processRow(u){if(!this.headers)return{row:u,isValid:!0};let{parserOptions:f}=this;if(!f.discardUnmappedColumns&&u.length>this.headersLength){if(!f.strictColumnHandling)throw new Error(`Unexpected Error: column header mismatch expected: ${this.headersLength} columns got: ${u.length}`);return{row:u,isValid:!1,reason:`Column header mismatch expected: ${this.headersLength} columns got: ${u.length}`}}return f.strictColumnHandling&&u.length<this.headersLength?{row:u,isValid:!1,reason:`Column header mismatch expected: ${this.headersLength} columns got: ${u.length}`}:{row:this.mapHeaders(u),isValid:!0}}mapHeaders(u){let f={},{headers:c,headersLength:d}=this;for(let m=0;m<d;m+=1){let v=c[m];if(!r.default(v)){let p=u[m];r.default(p)?f[v]="":f[v]=p}}return f}setHeaders(u){var f;let c=u.filter(d=>!!d);if(a.default(c).length!==c.length){let d=s.default(c),m=Object.keys(d).filter(v=>d[v].length>1);throw new Error("Duplicate headers found "+JSON.stringify(m))}this.headers=u,this.receivedHeaders=!0,this.headersLength=((f=this.headers)===null||f===void 0?void 0:f.length)||0}}},{"lodash.groupby":443,"lodash.isfunction":446,"lodash.isundefined":448,"lodash.uniq":449}],167:[function(e,t,n){"use strict";var i=function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(n,"__esModule",{value:!0}),n.RowTransformerValidator=void 0;let r=i(e("lodash.isfunction")),o=e("../types");class a{constructor(){this._rowTransform=null,this._rowValidator=null}static createTransform(u){return o.isSyncTransform(u)?(f,c)=>{let d=null;try{d=u(f)}catch(m){return c(m)}return c(null,d)}:u}static createValidator(u){return o.isSyncValidate(u)?(f,c)=>{c(null,{row:f,isValid:u(f)})}:(f,c)=>{u(f,(d,m,v)=>d?c(d):c(null,m?{row:f,isValid:m,reason:v}:{row:f,isValid:!1,reason:v}))}}set rowTransform(u){if(!r.default(u))throw new TypeError("The transform should be a function");this._rowTransform=a.createTransform(u)}set rowValidator(u){if(!r.default(u))throw new TypeError("The validate should be a function");this._rowValidator=a.createValidator(u)}transformAndValidate(u,f){return this.callTransformer(u,(c,d)=>c?f(c):d?this.callValidator(d,(m,v)=>m?f(m):v&&!v.isValid?f(null,{row:d,isValid:!1,reason:v.reason}):f(null,{row:d,isValid:!0})):f(null,{row:null,isValid:!0}))}callTransformer(u,f){return this._rowTransform?this._rowTransform(u,f):f(null,u)}callValidator(u,f){return this._rowValidator?this._rowValidator(u,f):f(null,{row:u,isValid:!0})}}n.RowTransformerValidator=a},{"../types":169,"lodash.isfunction":446}],168:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.HeaderTransformer=n.RowTransformerValidator=void 0;var i=e("./RowTransformerValidator");Object.defineProperty(n,"RowTransformerValidator",{enumerable:!0,get:function(){return i.RowTransformerValidator}});var r=e("./HeaderTransformer");Object.defineProperty(n,"HeaderTransformer",{enumerable:!0,get:function(){return r.HeaderTransformer}})},{"./HeaderTransformer":166,"./RowTransformerValidator":167}],169:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isSyncValidate=n.isSyncTransform=void 0,n.isSyncTransform=i=>i.length===1,n.isSyncValidate=i=>i.length===1},{}],170:[function(e,t,n){"use strict";let i=n;i.bignum=e("bn.js"),i.define=e("./asn1/api").define,i.base=e("./asn1/base"),i.constants=e("./asn1/constants"),i.decoders=e("./asn1/decoders"),i.encoders=e("./asn1/encoders")},{"./asn1/api":171,"./asn1/base":173,"./asn1/constants":177,"./asn1/decoders":179,"./asn1/encoders":182,"bn.js":184}],171:[function(e,t,n){"use strict";let i=e("./encoders"),r=e("./decoders"),o=e("inherits");function a(s,u){this.name=s,this.body=u,this.decoders={},this.encoders={}}n.define=function(s,u){return new a(s,u)},a.prototype._createNamed=function(s){let u=this.name;function f(c){this._initNamed(c,u)}return o(f,s),f.prototype._initNamed=function(c,d){s.call(this,c,d)},new f(this)},a.prototype._getDecoder=function(s){return s=s||"der",this.decoders.hasOwnProperty(s)||(this.decoders[s]=this._createNamed(r[s])),this.decoders[s]},a.prototype.decode=function(s,u,f){return this._getDecoder(u).decode(s,f)},a.prototype._getEncoder=function(s){return s=s||"der",this.encoders.hasOwnProperty(s)||(this.encoders[s]=this._createNamed(i[s])),this.encoders[s]},a.prototype.encode=function(s,u,f){return this._getEncoder(u).encode(s,f)}},{"./decoders":179,"./encoders":182,inherits:440}],172:[function(e,t,n){"use strict";let i=e("inherits"),r=e("../base/reporter").Reporter,o=e("safer-buffer").Buffer;function a(u,f){r.call(this,f),o.isBuffer(u)?(this.base=u,this.offset=0,this.length=u.length):this.error("Input not Buffer")}function s(u,f){if(Array.isArray(u))this.length=0,this.value=u.map(function(c){return s.isEncoderBuffer(c)||(c=new s(c,f)),this.length+=c.length,c},this);else if(typeof u=="number"){if(!(0<=u&&u<=255))return f.error("non-byte EncoderBuffer value");this.value=u,this.length=1}else if(typeof u=="string")this.value=u,this.length=o.byteLength(u);else{if(!o.isBuffer(u))return f.error("Unsupported type: "+typeof u);this.value=u,this.length=u.length}}i(a,r),n.DecoderBuffer=a,a.isDecoderBuffer=function(u){return u instanceof a?!0:typeof u=="object"&&o.isBuffer(u.base)&&u.constructor.name==="DecoderBuffer"&&typeof u.offset=="number"&&typeof u.length=="number"&&typeof u.save=="function"&&typeof u.restore=="function"&&typeof u.isEmpty=="function"&&typeof u.readUInt8=="function"&&typeof u.skip=="function"&&typeof u.raw=="function"},a.prototype.save=function(){return{offset:this.offset,reporter:r.prototype.save.call(this)}},a.prototype.restore=function(u){let f=new a(this.base);return f.offset=u.offset,f.length=this.offset,this.offset=u.offset,r.prototype.restore.call(this,u.reporter),f},a.prototype.isEmpty=function(){return this.offset===this.length},a.prototype.readUInt8=function(u){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(u||"DecoderBuffer overrun")},a.prototype.skip=function(u,f){if(!(this.offset+u<=this.length))return this.error(f||"DecoderBuffer overrun");let c=new a(this.base);return c._reporterState=this._reporterState,c.offset=this.offset,c.length=this.offset+u,this.offset+=u,c},a.prototype.raw=function(u){return this.base.slice(u?u.offset:this.offset,this.length)},n.EncoderBuffer=s,s.isEncoderBuffer=function(u){return u instanceof s?!0:typeof u=="object"&&u.constructor.name==="EncoderBuffer"&&typeof u.length=="number"&&typeof u.join=="function"},s.prototype.join=function(u,f){return u||(u=o.alloc(this.length)),f||(f=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(c){c.join(u,f),f+=c.length}):(typeof this.value=="number"?u[f]=this.value:typeof this.value=="string"?u.write(this.value,f):o.isBuffer(this.value)&&this.value.copy(u,f),f+=this.length)),u}},{"../base/reporter":175,inherits:440,"safer-buffer":495}],173:[function(e,t,n){"use strict";let i=n;i.Reporter=e("./reporter").Reporter,i.DecoderBuffer=e("./buffer").DecoderBuffer,i.EncoderBuffer=e("./buffer").EncoderBuffer,i.Node=e("./node")},{"./buffer":172,"./node":174,"./reporter":175}],174:[function(e,t,n){"use strict";let i=e("../base/reporter").Reporter,r=e("../base/buffer").EncoderBuffer,o=e("../base/buffer").DecoderBuffer,a=e("minimalistic-assert"),s=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],u=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(s);function f(d,m,v){let p={};this._baseState=p,p.name=v,p.enc=d,p.parent=m||null,p.children=null,p.tag=null,p.args=null,p.reverseArgs=null,p.choice=null,p.optional=!1,p.any=!1,p.obj=!1,p.use=null,p.useDecoder=null,p.key=null,p.default=null,p.explicit=null,p.implicit=null,p.contains=null,p.parent||(p.children=[],this._wrap())}t.exports=f;let c=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];f.prototype.clone=function(){let d=this._baseState,m={};c.forEach(function(p){m[p]=d[p]});let v=new this.constructor(m.parent);return v._baseState=m,v},f.prototype._wrap=function(){let d=this._baseState;u.forEach(function(m){this[m]=function(){let v=new this.constructor(this);return d.children.push(v),v[m].apply(v,arguments)}},this)},f.prototype._init=function(d){let m=this._baseState;a(m.parent===null),d.call(this),m.children=m.children.filter(function(v){return v._baseState.parent===this},this),a.equal(m.children.length,1,"Root node can have only one child")},f.prototype._useArgs=function(d){let m=this._baseState,v=d.filter(function(p){return p instanceof this.constructor},this);d=d.filter(function(p){return!(p instanceof this.constructor)},this),v.length!==0&&(a(m.children===null),m.children=v,v.forEach(function(p){p._baseState.parent=this},this)),d.length!==0&&(a(m.args===null),m.args=d,m.reverseArgs=d.map(function(p){if(typeof p!="object"||p.constructor!==Object)return p;let _={};return Object.keys(p).forEach(function(y){y==(0|y)&&(y|=0);let x=p[y];_[x]=y}),_}))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach(function(d){f.prototype[d]=function(){let m=this._baseState;throw new Error(d+" not implemented for encoding: "+m.enc)}}),s.forEach(function(d){f.prototype[d]=function(){let m=this._baseState,v=Array.prototype.slice.call(arguments);return a(m.tag===null),m.tag=d,this._useArgs(v),this}}),f.prototype.use=function(d){a(d);let m=this._baseState;return a(m.use===null),m.use=d,this},f.prototype.optional=function(){return this._baseState.optional=!0,this},f.prototype.def=function(d){let m=this._baseState;return a(m.default===null),m.default=d,m.optional=!0,this},f.prototype.explicit=function(d){let m=this._baseState;return a(m.explicit===null&&m.implicit===null),m.explicit=d,this},f.prototype.implicit=function(d){let m=this._baseState;return a(m.explicit===null&&m.implicit===null),m.implicit=d,this},f.prototype.obj=function(){let d=this._baseState,m=Array.prototype.slice.call(arguments);return d.obj=!0,m.length!==0&&this._useArgs(m),this},f.prototype.key=function(d){let m=this._baseState;return a(m.key===null),m.key=d,this},f.prototype.any=function(){return this._baseState.any=!0,this},f.prototype.choice=function(d){let m=this._baseState;return a(m.choice===null),m.choice=d,this._useArgs(Object.keys(d).map(function(v){return d[v]})),this},f.prototype.contains=function(d){let m=this._baseState;return a(m.use===null),m.contains=d,this},f.prototype._decode=function(d,m){let v=this._baseState;if(v.parent===null)return d.wrapResult(v.children[0]._decode(d,m));let p,_=v.default,y=!0,x=null;if(v.key!==null&&(x=d.enterKey(v.key)),v.optional){let S=null;if(v.explicit!==null?S=v.explicit:v.implicit!==null?S=v.implicit:v.tag!==null&&(S=v.tag),S!==null||v.any){if(y=this._peekTag(d,S,v.any),d.isError(y))return y}else{let O=d.save();try{v.choice===null?this._decodeGeneric(v.tag,d,m):this._decodeChoice(d,m),y=!0}catch{y=!1}d.restore(O)}}if(v.obj&&y&&(p=d.enterObject()),y){if(v.explicit!==null){let O=this._decodeTag(d,v.explicit);if(d.isError(O))return O;d=O}let S=d.offset;if(v.use===null&&v.choice===null){let O;v.any&&(O=d.save());let B=this._decodeTag(d,v.implicit!==null?v.implicit:v.tag,v.any);if(d.isError(B))return B;v.any?_=d.raw(O):d=B}if(m&&m.track&&v.tag!==null&&m.track(d.path(),S,d.length,"tagged"),m&&m.track&&v.tag!==null&&m.track(d.path(),d.offset,d.length,"content"),v.any||(_=v.choice===null?this._decodeGeneric(v.tag,d,m):this._decodeChoice(d,m)),d.isError(_))return _;if(v.any||v.choice!==null||v.children===null||v.children.forEach(function(O){O._decode(d,m)}),v.contains&&(v.tag==="octstr"||v.tag==="bitstr")){let O=new o(_);_=this._getUse(v.contains,d._reporterState.obj)._decode(O,m)}}return v.obj&&y&&(_=d.leaveObject(p)),v.key===null||_===null&&y!==!0?x!==null&&d.exitKey(x):d.leaveKey(x,v.key,_),_},f.prototype._decodeGeneric=function(d,m,v){let p=this._baseState;return d==="seq"||d==="set"?null:d==="seqof"||d==="setof"?this._decodeList(m,d,p.args[0],v):/str$/.test(d)?this._decodeStr(m,d,v):d==="objid"&&p.args?this._decodeObjid(m,p.args[0],p.args[1],v):d==="objid"?this._decodeObjid(m,null,null,v):d==="gentime"||d==="utctime"?this._decodeTime(m,d,v):d==="null_"?this._decodeNull(m,v):d==="bool"?this._decodeBool(m,v):d==="objDesc"?this._decodeStr(m,d,v):d==="int"||d==="enum"?this._decodeInt(m,p.args&&p.args[0],v):p.use!==null?this._getUse(p.use,m._reporterState.obj)._decode(m,v):m.error("unknown tag: "+d)},f.prototype._getUse=function(d,m){let v=this._baseState;return v.useDecoder=this._use(d,m),a(v.useDecoder._baseState.parent===null),v.useDecoder=v.useDecoder._baseState.children[0],v.implicit!==v.useDecoder._baseState.implicit&&(v.useDecoder=v.useDecoder.clone(),v.useDecoder._baseState.implicit=v.implicit),v.useDecoder},f.prototype._decodeChoice=function(d,m){let v=this._baseState,p=null,_=!1;return Object.keys(v.choice).some(function(y){let x=d.save(),S=v.choice[y];try{let O=S._decode(d,m);if(d.isError(O))return!1;p={type:y,value:O},_=!0}catch{return d.restore(x),!1}return!0},this),_?p:d.error("Choice not matched")},f.prototype._createEncoderBuffer=function(d){return new r(d,this.reporter)},f.prototype._encode=function(d,m,v){let p=this._baseState;if(p.default!==null&&p.default===d)return;let _=this._encodeValue(d,m,v);return _===void 0||this._skipDefault(_,m,v)?void 0:_},f.prototype._encodeValue=function(d,m,v){let p=this._baseState;if(p.parent===null)return p.children[0]._encode(d,m||new i);let _=null;if(this.reporter=m,p.optional&&d===void 0){if(p.default===null)return;d=p.default}let y=null,x=!1;if(p.any)_=this._createEncoderBuffer(d);else if(p.choice)_=this._encodeChoice(d,m);else if(p.contains)y=this._getUse(p.contains,v)._encode(d,m),x=!0;else if(p.children)y=p.children.map(function(S){if(S._baseState.tag==="null_")return S._encode(null,m,d);if(S._baseState.key===null)return m.error("Child should have a key");let O=m.enterKey(S._baseState.key);if(typeof d!="object")return m.error("Child expected, but input is not object");let B=S._encode(d[S._baseState.key],m,d);return m.leaveKey(O),B},this).filter(function(S){return S}),y=this._createEncoderBuffer(y);else if(p.tag==="seqof"||p.tag==="setof"){if(!p.args||p.args.length!==1)return m.error("Too many args for : "+p.tag);if(!Array.isArray(d))return m.error("seqof/setof, but data is not Array");let S=this.clone();S._baseState.implicit=null,y=this._createEncoderBuffer(d.map(function(O){let B=this._baseState;return this._getUse(B.args[0],d)._encode(O,m)},S))}else p.use!==null?_=this._getUse(p.use,v)._encode(d,m):(y=this._encodePrimitive(p.tag,d),x=!0);if(!p.any&&p.choice===null){let S=p.implicit!==null?p.implicit:p.tag,O=p.implicit===null?"universal":"context";S===null?p.use===null&&m.error("Tag could be omitted only for .use()"):p.use===null&&(_=this._encodeComposite(S,x,O,y))}return p.explicit!==null&&(_=this._encodeComposite(p.explicit,!1,"context",_)),_},f.prototype._encodeChoice=function(d,m){let v=this._baseState,p=v.choice[d.type];return p||a(!1,d.type+" not found in "+JSON.stringify(Object.keys(v.choice))),p._encode(d.value,m)},f.prototype._encodePrimitive=function(d,m){let v=this._baseState;if(/str$/.test(d))return this._encodeStr(m,d);if(d==="objid"&&v.args)return this._encodeObjid(m,v.reverseArgs[0],v.args[1]);if(d==="objid")return this._encodeObjid(m,null,null);if(d==="gentime"||d==="utctime")return this._encodeTime(m,d);if(d==="null_")return this._encodeNull();if(d==="int"||d==="enum")return this._encodeInt(m,v.args&&v.reverseArgs[0]);if(d==="bool")return this._encodeBool(m);if(d==="objDesc")return this._encodeStr(m,d);throw new Error("Unsupported tag: "+d)},f.prototype._isNumstr=function(d){return/^[0-9 ]*$/.test(d)},f.prototype._isPrintstr=function(d){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(d)}},{"../base/buffer":172,"../base/reporter":175,"minimalistic-assert":453}],175:[function(e,t,n){"use strict";let i=e("inherits");function r(a){this._reporterState={obj:null,path:[],options:a||{},errors:[]}}function o(a,s){this.path=a,this.rethrow(s)}n.Reporter=r,r.prototype.isError=function(a){return a instanceof o},r.prototype.save=function(){let a=this._reporterState;return{obj:a.obj,pathLen:a.path.length}},r.prototype.restore=function(a){let s=this._reporterState;s.obj=a.obj,s.path=s.path.slice(0,a.pathLen)},r.prototype.enterKey=function(a){return this._reporterState.path.push(a)},r.prototype.exitKey=function(a){let s=this._reporterState;s.path=s.path.slice(0,a-1)},r.prototype.leaveKey=function(a,s,u){let f=this._reporterState;this.exitKey(a),f.obj!==null&&(f.obj[s]=u)},r.prototype.path=function(){return this._reporterState.path.join("/")},r.prototype.enterObject=function(){let a=this._reporterState,s=a.obj;return a.obj={},s},r.prototype.leaveObject=function(a){let s=this._reporterState,u=s.obj;return s.obj=a,u},r.prototype.error=function(a){let s,u=this._reporterState,f=a instanceof o;if(s=f?a:new o(u.path.map(function(c){return"["+JSON.stringify(c)+"]"}).join(""),a.message||a,a.stack),!u.options.partial)throw s;return f||u.errors.push(s),s},r.prototype.wrapResult=function(a){let s=this._reporterState;return s.options.partial?{result:this.isError(a)?null:a,errors:s.errors}:a},i(o,Error),o.prototype.rethrow=function(a){if(this.message=a+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,o),!this.stack)try{throw new Error(this.message)}catch(s){this.stack=s.stack}return this}},{inherits:440}],176:[function(e,t,n){"use strict";function i(r){let o={};return Object.keys(r).forEach(function(a){(0|a)==a&&(a|=0);let s=r[a];o[s]=a}),o}n.tagClass={0:"universal",1:"application",2:"context",3:"private"},n.tagClassByName=i(n.tagClass),n.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},n.tagByName=i(n.tag)},{}],177:[function(e,t,n){"use strict";let i=n;i._reverse=function(r){let o={};return Object.keys(r).forEach(function(a){(0|a)==a&&(a|=0);let s=r[a];o[s]=a}),o},i.der=e("./der")},{"./der":176}],178:[function(e,t,n){"use strict";let i=e("inherits"),r=e("bn.js"),o=e("../base/buffer").DecoderBuffer,a=e("../base/node"),s=e("../constants/der");function u(m){this.enc="der",this.name=m.name,this.entity=m,this.tree=new f,this.tree._init(m.body)}function f(m){a.call(this,"der",m)}function c(m,v){let p=m.readUInt8(v);if(m.isError(p))return p;let _=s.tagClass[p>>6],y=(32&p)==0;if((31&p)==31){let x=p;for(p=0;(128&x)==128;){if(x=m.readUInt8(v),m.isError(x))return x;p<<=7,p|=127&x}}else p&=31;return{cls:_,primitive:y,tag:p,tagStr:s.tag[p]}}function d(m,v,p){let _=m.readUInt8(p);if(m.isError(_))return _;if(!v&&_===128)return null;if(!(128&_))return _;let y=127&_;if(y>4)return m.error("length octect is too long");_=0;for(let x=0;x<y;x++){_<<=8;let S=m.readUInt8(p);if(m.isError(S))return S;_|=S}return _}t.exports=u,u.prototype.decode=function(m,v){return o.isDecoderBuffer(m)||(m=new o(m,v)),this.tree._decode(m,v)},i(f,a),f.prototype._peekTag=function(m,v,p){if(m.isEmpty())return!1;let _=m.save(),y=c(m,'Failed to peek tag: "'+v+'"');return m.isError(y)?y:(m.restore(_),y.tag===v||y.tagStr===v||y.tagStr+"of"===v||p)},f.prototype._decodeTag=function(m,v,p){let _=c(m,'Failed to decode tag of "'+v+'"');if(m.isError(_))return _;let y=d(m,_.primitive,'Failed to get length of "'+v+'"');if(m.isError(y))return y;if(!p&&_.tag!==v&&_.tagStr!==v&&_.tagStr+"of"!==v)return m.error('Failed to match tag: "'+v+'"');if(_.primitive||y!==null)return m.skip(y,'Failed to match body of: "'+v+'"');let x=m.save(),S=this._skipUntilEnd(m,'Failed to skip indefinite length body: "'+this.tag+'"');return m.isError(S)?S:(y=m.offset-x.offset,m.restore(x),m.skip(y,'Failed to match body of: "'+v+'"'))},f.prototype._skipUntilEnd=function(m,v){for(;;){let p=c(m,v);if(m.isError(p))return p;let _=d(m,p.primitive,v);if(m.isError(_))return _;let y;if(y=p.primitive||_!==null?m.skip(_):this._skipUntilEnd(m,v),m.isError(y))return y;if(p.tagStr==="end")break}},f.prototype._decodeList=function(m,v,p,_){let y=[];for(;!m.isEmpty();){let x=this._peekTag(m,"end");if(m.isError(x))return x;let S=p.decode(m,"der",_);if(m.isError(S)&&x)break;y.push(S)}return y},f.prototype._decodeStr=function(m,v){if(v==="bitstr"){let p=m.readUInt8();return m.isError(p)?p:{unused:p,data:m.raw()}}if(v==="bmpstr"){let p=m.raw();if(p.length%2==1)return m.error("Decoding of string type: bmpstr length mismatch");let _="";for(let y=0;y<p.length/2;y++)_+=String.fromCharCode(p.readUInt16BE(2*y));return _}if(v==="numstr"){let p=m.raw().toString("ascii");return this._isNumstr(p)?p:m.error("Decoding of string type: numstr unsupported characters")}if(v==="octstr"||v==="objDesc")return m.raw();if(v==="printstr"){let p=m.raw().toString("ascii");return this._isPrintstr(p)?p:m.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(v)?m.raw().toString():m.error("Decoding of string type: "+v+" unsupported")},f.prototype._decodeObjid=function(m,v,p){let _,y=[],x=0,S=0;for(;!m.isEmpty();)S=m.readUInt8(),x<<=7,x|=127&S,!(128&S)&&(y.push(x),x=0);128&S&&y.push(x);let O=y[0]/40|0,B=y[0]%40;if(_=p?y:[O,B].concat(y.slice(1)),v){let U=v[_.join(" ")];U===void 0&&(U=v[_.join(".")]),U!==void 0&&(_=U)}return _},f.prototype._decodeTime=function(m,v){let p=m.raw().toString(),_,y,x,S,O,B;if(v==="gentime")_=0|p.slice(0,4),y=0|p.slice(4,6),x=0|p.slice(6,8),S=0|p.slice(8,10),O=0|p.slice(10,12),B=0|p.slice(12,14);else{if(v!=="utctime")return m.error("Decoding "+v+" time is not supported yet");_=0|p.slice(0,2),y=0|p.slice(2,4),x=0|p.slice(4,6),S=0|p.slice(6,8),O=0|p.slice(8,10),B=0|p.slice(10,12),_=_<70?2e3+_:1900+_}return Date.UTC(_,y-1,x,S,O,B,0)},f.prototype._decodeNull=function(){return null},f.prototype._decodeBool=function(m){let v=m.readUInt8();return m.isError(v)?v:v!==0},f.prototype._decodeInt=function(m,v){let p=m.raw(),_=new r(p);return v&&(_=v[_.toString(10)]||_),_},f.prototype._use=function(m,v){return typeof m=="function"&&(m=m(v)),m._getDecoder("der").tree}},{"../base/buffer":172,"../base/node":174,"../constants/der":176,"bn.js":184,inherits:440}],179:[function(e,t,n){"use strict";let i=n;i.der=e("./der"),i.pem=e("./pem")},{"./der":178,"./pem":180}],180:[function(e,t,n){"use strict";let i=e("inherits"),r=e("safer-buffer").Buffer,o=e("./der");function a(s){o.call(this,s),this.enc="pem"}i(a,o),t.exports=a,a.prototype.decode=function(s,u){let f=s.toString().split(/[\r\n]+/g),c=u.label.toUpperCase(),d=/^-----(BEGIN|END) ([^-]+)-----$/,m=-1,v=-1;for(let y=0;y<f.length;y++){let x=f[y].match(d);if(x!==null&&x[2]===c){if(m!==-1){if(x[1]!=="END")break;v=y;break}if(x[1]!=="BEGIN")break;m=y}}if(m===-1||v===-1)throw new Error("PEM section not found for: "+c);let p=f.slice(m+1,v).join("");p.replace(/[^a-z0-9+/=]+/gi,"");let _=r.from(p,"base64");return o.prototype.decode.call(this,_,u)}},{"./der":178,inherits:440,"safer-buffer":495}],181:[function(e,t,n){"use strict";let i=e("inherits"),r=e("safer-buffer").Buffer,o=e("../base/node"),a=e("../constants/der");function s(c){this.enc="der",this.name=c.name,this.entity=c,this.tree=new u,this.tree._init(c.body)}function u(c){o.call(this,"der",c)}function f(c){return c<10?"0"+c:c}t.exports=s,s.prototype.encode=function(c,d){return this.tree._encode(c,d).join()},i(u,o),u.prototype._encodeComposite=function(c,d,m,v){let p=function(x,S,O,B){let U;if(x==="seqof"?x="seq":x==="setof"&&(x="set"),a.tagByName.hasOwnProperty(x))U=a.tagByName[x];else{if(typeof x!="number"||(0|x)!==x)return B.error("Unknown tag: "+x);U=x}return U>=31?B.error("Multi-octet tag encoding unsupported"):(S||(U|=32),U|=a.tagClassByName[O||"universal"]<<6,U)}(c,d,m,this.reporter);if(v.length<128){let x=r.alloc(2);return x[0]=p,x[1]=v.length,this._createEncoderBuffer([x,v])}let _=1;for(let x=v.length;x>=256;x>>=8)_++;let y=r.alloc(2+_);y[0]=p,y[1]=128|_;for(let x=1+_,S=v.length;S>0;x--,S>>=8)y[x]=255&S;return this._createEncoderBuffer([y,v])},u.prototype._encodeStr=function(c,d){if(d==="bitstr")return this._createEncoderBuffer([0|c.unused,c.data]);if(d==="bmpstr"){let m=r.alloc(2*c.length);for(let v=0;v<c.length;v++)m.writeUInt16BE(c.charCodeAt(v),2*v);return this._createEncoderBuffer(m)}return d==="numstr"?this._isNumstr(c)?this._createEncoderBuffer(c):this.reporter.error("Encoding of string type: numstr supports only digits and space"):d==="printstr"?this._isPrintstr(c)?this._createEncoderBuffer(c):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(d)||d==="objDesc"?this._createEncoderBuffer(c):this.reporter.error("Encoding of string type: "+d+" unsupported")},u.prototype._encodeObjid=function(c,d,m){if(typeof c=="string"){if(!d)return this.reporter.error("string objid given, but no values map found");if(!d.hasOwnProperty(c))return this.reporter.error("objid not found in values map");c=d[c].split(/[\s.]+/g);for(let y=0;y<c.length;y++)c[y]|=0}else if(Array.isArray(c)){c=c.slice();for(let y=0;y<c.length;y++)c[y]|=0}if(!Array.isArray(c))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(c));if(!m){if(c[1]>=40)return this.reporter.error("Second objid identifier OOB");c.splice(0,2,40*c[0]+c[1])}let v=0;for(let y=0;y<c.length;y++){let x=c[y];for(v++;x>=128;x>>=7)v++}let p=r.alloc(v),_=p.length-1;for(let y=c.length-1;y>=0;y--){let x=c[y];for(p[_--]=127&x;(x>>=7)>0;)p[_--]=128|127&x}return this._createEncoderBuffer(p)},u.prototype._encodeTime=function(c,d){let m,v=new Date(c);return d==="gentime"?m=[f(v.getUTCFullYear()),f(v.getUTCMonth()+1),f(v.getUTCDate()),f(v.getUTCHours()),f(v.getUTCMinutes()),f(v.getUTCSeconds()),"Z"].join(""):d==="utctime"?m=[f(v.getUTCFullYear()%100),f(v.getUTCMonth()+1),f(v.getUTCDate()),f(v.getUTCHours()),f(v.getUTCMinutes()),f(v.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+d+" time is not supported yet"),this._encodeStr(m,"octstr")},u.prototype._encodeNull=function(){return this._createEncoderBuffer("")},u.prototype._encodeInt=function(c,d){if(typeof c=="string"){if(!d)return this.reporter.error("String int or enum given, but no values map");if(!d.hasOwnProperty(c))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(c));c=d[c]}if(typeof c!="number"&&!r.isBuffer(c)){let p=c.toArray();!c.sign&&128&p[0]&&p.unshift(0),c=r.from(p)}if(r.isBuffer(c)){let p=c.length;c.length===0&&p++;let _=r.alloc(p);return c.copy(_),c.length===0&&(_[0]=0),this._createEncoderBuffer(_)}if(c<128)return this._createEncoderBuffer(c);if(c<256)return this._createEncoderBuffer([0,c]);let m=1;for(let p=c;p>=256;p>>=8)m++;let v=new Array(m);for(let p=v.length-1;p>=0;p--)v[p]=255&c,c>>=8;return 128&v[0]&&v.unshift(0),this._createEncoderBuffer(r.from(v))},u.prototype._encodeBool=function(c){return this._createEncoderBuffer(c?255:0)},u.prototype._use=function(c,d){return typeof c=="function"&&(c=c(d)),c._getEncoder("der").tree},u.prototype._skipDefault=function(c,d,m){let v=this._baseState,p;if(v.default===null)return!1;let _=c.join();if(v.defaultBuffer===void 0&&(v.defaultBuffer=this._encodeValue(v.default,d,m).join()),_.length!==v.defaultBuffer.length)return!1;for(p=0;p<_.length;p++)if(_[p]!==v.defaultBuffer[p])return!1;return!0}},{"../base/node":174,"../constants/der":176,inherits:440,"safer-buffer":495}],182:[function(e,t,n){"use strict";let i=n;i.der=e("./der"),i.pem=e("./pem")},{"./der":181,"./pem":183}],183:[function(e,t,n){"use strict";let i=e("inherits"),r=e("./der");function o(a){r.call(this,a),this.enc="pem"}i(o,r),t.exports=o,o.prototype.encode=function(a,s){let u=r.prototype.encode.call(this,a).toString("base64"),f=["-----BEGIN "+s.label+"-----"];for(let c=0;c<u.length;c+=64)f.push(u.slice(c,c+64));return f.push("-----END "+s.label+"-----"),f.join(`
`)}},{"./der":181,inherits:440}],184:[function(e,t,n){"use strict";(function(i,r){function o(D,N){if(!D)throw new Error(N||"Assertion failed")}function a(D,N){D.super_=N;var Z=function(){};Z.prototype=N.prototype,D.prototype=new Z,D.prototype.constructor=D}function s(D,N,Z){if(s.isBN(D))return D;this.negative=0,this.words=null,this.length=0,this.red=null,D!==null&&(N!=="le"&&N!=="be"||(Z=N,N=10),this._init(D||0,N||10,Z||"be"))}var u;typeof i=="object"?i.exports=s:(void 0).BN=s,s.BN=s,s.wordSize=26;try{u=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:e("buffer").Buffer}catch{}function f(D,N){var Z=D.charCodeAt(N);return Z>=65&&Z<=70?Z-55:Z>=97&&Z<=102?Z-87:Z-48&15}function c(D,N,Z){var w=f(D,Z);return Z-1>=N&&(w|=f(D,Z-1)<<4),w}function d(D,N,Z,w){for(var C=0,k=Math.min(D.length,Z),T=N;T<k;T++){var R=D.charCodeAt(T)-48;C*=w,C+=R>=49?R-49+10:R>=17?R-17+10:R}return C}s.isBN=function(D){return D instanceof s||D!==null&&typeof D=="object"&&D.constructor.wordSize===s.wordSize&&Array.isArray(D.words)},s.max=function(D,N){return D.cmp(N)>0?D:N},s.min=function(D,N){return D.cmp(N)<0?D:N},s.prototype._init=function(D,N,Z){if(typeof D=="number")return this._initNumber(D,N,Z);if(typeof D=="object")return this._initArray(D,N,Z);N==="hex"&&(N=16),o(N===(0|N)&&N>=2&&N<=36);var w=0;(D=D.toString().replace(/\s+/g,""))[0]==="-"&&(w++,this.negative=1),w<D.length&&(N===16?this._parseHex(D,w,Z):(this._parseBase(D,N,w),Z==="le"&&this._initArray(this.toArray(),N,Z)))},s.prototype._initNumber=function(D,N,Z){D<0&&(this.negative=1,D=-D),D<67108864?(this.words=[67108863&D],this.length=1):D<4503599627370496?(this.words=[67108863&D,D/67108864&67108863],this.length=2):(o(D<9007199254740992),this.words=[67108863&D,D/67108864&67108863,1],this.length=3),Z==="le"&&this._initArray(this.toArray(),N,Z)},s.prototype._initArray=function(D,N,Z){if(o(typeof D.length=="number"),D.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(D.length/3),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var C,k,T=0;if(Z==="be")for(w=D.length-1,C=0;w>=0;w-=3)k=D[w]|D[w-1]<<8|D[w-2]<<16,this.words[C]|=k<<T&67108863,this.words[C+1]=k>>>26-T&67108863,(T+=24)>=26&&(T-=26,C++);else if(Z==="le")for(w=0,C=0;w<D.length;w+=3)k=D[w]|D[w+1]<<8|D[w+2]<<16,this.words[C]|=k<<T&67108863,this.words[C+1]=k>>>26-T&67108863,(T+=24)>=26&&(T-=26,C++);return this.strip()},s.prototype._parseHex=function(D,N,Z){this.length=Math.ceil((D.length-N)/6),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var C,k=0,T=0;if(Z==="be")for(w=D.length-1;w>=N;w-=2)C=c(D,N,w)<<k,this.words[T]|=67108863&C,k>=18?(k-=18,T+=1,this.words[T]|=C>>>26):k+=8;else for(w=(D.length-N)%2==0?N+1:N;w<D.length;w+=2)C=c(D,N,w)<<k,this.words[T]|=67108863&C,k>=18?(k-=18,T+=1,this.words[T]|=C>>>26):k+=8;this.strip()},s.prototype._parseBase=function(D,N,Z){this.words=[0],this.length=1;for(var w=0,C=1;C<=67108863;C*=N)w++;w--,C=C/N|0;for(var k=D.length-Z,T=k%w,R=Math.min(k,k-T)+Z,F=0,H=Z;H<R;H+=w)F=d(D,H,H+w,N),this.imuln(C),this.words[0]+F<67108864?this.words[0]+=F:this._iaddn(F);if(T!==0){var it=1;for(F=d(D,H,D.length,N),H=0;H<T;H++)it*=N;this.imuln(it),this.words[0]+F<67108864?this.words[0]+=F:this._iaddn(F)}this.strip()},s.prototype.copy=function(D){D.words=new Array(this.length);for(var N=0;N<this.length;N++)D.words[N]=this.words[N];D.length=this.length,D.negative=this.negative,D.red=this.red},s.prototype.clone=function(){var D=new s(null);return this.copy(D),D},s.prototype._expand=function(D){for(;this.length<D;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var m=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],v=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function _(D,N,Z){Z.negative=N.negative^D.negative;var w=D.length+N.length|0;Z.length=w,w=w-1|0;var C=0|D.words[0],k=0|N.words[0],T=C*k,R=67108863&T,F=T/67108864|0;Z.words[0]=R;for(var H=1;H<w;H++){for(var it=F>>>26,ot=67108863&F,dt=Math.min(H,N.length-1),$=Math.max(0,H-D.length+1);$<=dt;$++){var ct=H-$|0;it+=(T=(C=0|D.words[ct])*(k=0|N.words[$])+ot)/67108864|0,ot=67108863&T}Z.words[H]=0|ot,F=0|it}return F!==0?Z.words[H]=0|F:Z.length--,Z.strip()}s.prototype.toString=function(D,N){var Z;if(N=0|N||1,(D=D||10)===16||D==="hex"){Z="";for(var w=0,C=0,k=0;k<this.length;k++){var T=this.words[k],R=(16777215&(T<<w|C)).toString(16);Z=(C=T>>>24-w&16777215)!==0||k!==this.length-1?m[6-R.length]+R+Z:R+Z,(w+=2)>=26&&(w-=26,k--)}for(C!==0&&(Z=C.toString(16)+Z);Z.length%N!=0;)Z="0"+Z;return this.negative!==0&&(Z="-"+Z),Z}if(D===(0|D)&&D>=2&&D<=36){var F=v[D],H=p[D];Z="";var it=this.clone();for(it.negative=0;!it.isZero();){var ot=it.modn(H).toString(D);Z=(it=it.idivn(H)).isZero()?ot+Z:m[F-ot.length]+ot+Z}for(this.isZero()&&(Z="0"+Z);Z.length%N!=0;)Z="0"+Z;return this.negative!==0&&(Z="-"+Z),Z}o(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var D=this.words[0];return this.length===2?D+=67108864*this.words[1]:this.length===3&&this.words[2]===1?D+=4503599627370496+67108864*this.words[1]:this.length>2&&o(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-D:D},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(D,N){return o(u!==void 0),this.toArrayLike(u,D,N)},s.prototype.toArray=function(D,N){return this.toArrayLike(Array,D,N)},s.prototype.toArrayLike=function(D,N,Z){var w=this.byteLength(),C=Z||Math.max(1,w);o(w<=C,"byte array longer than desired length"),o(C>0,"Requested array length <= 0"),this.strip();var k,T,R=N==="le",F=new D(C),H=this.clone();if(R){for(T=0;!H.isZero();T++)k=H.andln(255),H.iushrn(8),F[T]=k;for(;T<C;T++)F[T]=0}else{for(T=0;T<C-w;T++)F[T]=0;for(T=0;!H.isZero();T++)k=H.andln(255),H.iushrn(8),F[C-T-1]=k}return F},Math.clz32?s.prototype._countBits=function(D){return 32-Math.clz32(D)}:s.prototype._countBits=function(D){var N=D,Z=0;return N>=4096&&(Z+=13,N>>>=13),N>=64&&(Z+=7,N>>>=7),N>=8&&(Z+=4,N>>>=4),N>=2&&(Z+=2,N>>>=2),Z+N},s.prototype._zeroBits=function(D){if(D===0)return 26;var N=D,Z=0;return!(8191&N)&&(Z+=13,N>>>=13),!(127&N)&&(Z+=7,N>>>=7),!(15&N)&&(Z+=4,N>>>=4),!(3&N)&&(Z+=2,N>>>=2),!(1&N)&&Z++,Z},s.prototype.bitLength=function(){var D=this.words[this.length-1],N=this._countBits(D);return 26*(this.length-1)+N},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var D=0,N=0;N<this.length;N++){var Z=this._zeroBits(this.words[N]);if(D+=Z,Z!==26)break}return D},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(D){return this.negative!==0?this.abs().inotn(D).iaddn(1):this.clone()},s.prototype.fromTwos=function(D){return this.testn(D-1)?this.notn(D).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(D){for(;this.length<D.length;)this.words[this.length++]=0;for(var N=0;N<D.length;N++)this.words[N]=this.words[N]|D.words[N];return this.strip()},s.prototype.ior=function(D){return o((this.negative|D.negative)==0),this.iuor(D)},s.prototype.or=function(D){return this.length>D.length?this.clone().ior(D):D.clone().ior(this)},s.prototype.uor=function(D){return this.length>D.length?this.clone().iuor(D):D.clone().iuor(this)},s.prototype.iuand=function(D){var N;N=this.length>D.length?D:this;for(var Z=0;Z<N.length;Z++)this.words[Z]=this.words[Z]&D.words[Z];return this.length=N.length,this.strip()},s.prototype.iand=function(D){return o((this.negative|D.negative)==0),this.iuand(D)},s.prototype.and=function(D){return this.length>D.length?this.clone().iand(D):D.clone().iand(this)},s.prototype.uand=function(D){return this.length>D.length?this.clone().iuand(D):D.clone().iuand(this)},s.prototype.iuxor=function(D){var N,Z;this.length>D.length?(N=this,Z=D):(N=D,Z=this);for(var w=0;w<Z.length;w++)this.words[w]=N.words[w]^Z.words[w];if(this!==N)for(;w<N.length;w++)this.words[w]=N.words[w];return this.length=N.length,this.strip()},s.prototype.ixor=function(D){return o((this.negative|D.negative)==0),this.iuxor(D)},s.prototype.xor=function(D){return this.length>D.length?this.clone().ixor(D):D.clone().ixor(this)},s.prototype.uxor=function(D){return this.length>D.length?this.clone().iuxor(D):D.clone().iuxor(this)},s.prototype.inotn=function(D){o(typeof D=="number"&&D>=0);var N=0|Math.ceil(D/26),Z=D%26;this._expand(N),Z>0&&N--;for(var w=0;w<N;w++)this.words[w]=67108863&~this.words[w];return Z>0&&(this.words[w]=~this.words[w]&67108863>>26-Z),this.strip()},s.prototype.notn=function(D){return this.clone().inotn(D)},s.prototype.setn=function(D,N){o(typeof D=="number"&&D>=0);var Z=D/26|0,w=D%26;return this._expand(Z+1),this.words[Z]=N?this.words[Z]|1<<w:this.words[Z]&~(1<<w),this.strip()},s.prototype.iadd=function(D){var N,Z,w;if(this.negative!==0&&D.negative===0)return this.negative=0,N=this.isub(D),this.negative^=1,this._normSign();if(this.negative===0&&D.negative!==0)return D.negative=0,N=this.isub(D),D.negative=1,N._normSign();this.length>D.length?(Z=this,w=D):(Z=D,w=this);for(var C=0,k=0;k<w.length;k++)N=(0|Z.words[k])+(0|w.words[k])+C,this.words[k]=67108863&N,C=N>>>26;for(;C!==0&&k<Z.length;k++)N=(0|Z.words[k])+C,this.words[k]=67108863&N,C=N>>>26;if(this.length=Z.length,C!==0)this.words[this.length]=C,this.length++;else if(Z!==this)for(;k<Z.length;k++)this.words[k]=Z.words[k];return this},s.prototype.add=function(D){var N;return D.negative!==0&&this.negative===0?(D.negative=0,N=this.sub(D),D.negative^=1,N):D.negative===0&&this.negative!==0?(this.negative=0,N=D.sub(this),this.negative=1,N):this.length>D.length?this.clone().iadd(D):D.clone().iadd(this)},s.prototype.isub=function(D){if(D.negative!==0){D.negative=0;var N=this.iadd(D);return D.negative=1,N._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(D),this.negative=1,this._normSign();var Z,w,C=this.cmp(D);if(C===0)return this.negative=0,this.length=1,this.words[0]=0,this;C>0?(Z=this,w=D):(Z=D,w=this);for(var k=0,T=0;T<w.length;T++)k=(N=(0|Z.words[T])-(0|w.words[T])+k)>>26,this.words[T]=67108863&N;for(;k!==0&&T<Z.length;T++)k=(N=(0|Z.words[T])+k)>>26,this.words[T]=67108863&N;if(k===0&&T<Z.length&&Z!==this)for(;T<Z.length;T++)this.words[T]=Z.words[T];return this.length=Math.max(this.length,T),Z!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(D){return this.clone().isub(D)};var y=function(D,N,Z){var w,C,k,T=D.words,R=N.words,F=Z.words,H=0,it=0|T[0],ot=8191&it,dt=it>>>13,$=0|T[1],ct=8191&$,W=$>>>13,V=0|T[2],rt=8191&V,mt=V>>>13,wt=0|T[3],_t=8191&wt,Ct=wt>>>13,Ft=0|T[4],It=8191&Ft,vt=Ft>>>13,kt=0|T[5],gt=8191&kt,ut=kt>>>13,Q=0|T[6],Y=8191&Q,et=Q>>>13,lt=0|T[7],pt=8191&lt,bt=lt>>>13,Et=0|T[8],Ot=8191&Et,zt=Et>>>13,Gt=0|T[9],Jt=8191&Gt,Kt=Gt>>>13,ie=0|R[0],Xt=8191&ie,Ut=ie>>>13,_e=0|R[1],le=8191&_e,ye=_e>>>13,Ze=0|R[2],ce=8191&Ze,ke=Ze>>>13,He=0|R[3],$t=8191&He,Te=He>>>13,bi=0|R[4],ue=8191&bi,Fe=bi>>>13,ai=0|R[5],Le=8191&ai,Oe=ai>>>13,Qi=0|R[6],We=8191&Qi,At=Qi>>>13,qt=0|R[7],jt=8191&qt,ae=qt>>>13,Qe=0|R[8],se=8191&Qe,ve=Qe>>>13,$e=0|R[9],Ae=8191&$e,fe=$e>>>13;Z.negative=D.negative^N.negative,Z.length=19;var Ye=(H+(w=Math.imul(ot,Xt))|0)+((8191&(C=(C=Math.imul(ot,Ut))+Math.imul(dt,Xt)|0))<<13)|0;H=((k=Math.imul(dt,Ut))+(C>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,w=Math.imul(ct,Xt),C=(C=Math.imul(ct,Ut))+Math.imul(W,Xt)|0,k=Math.imul(W,Ut);var Ue=(H+(w=w+Math.imul(ot,le)|0)|0)+((8191&(C=(C=C+Math.imul(ot,ye)|0)+Math.imul(dt,le)|0))<<13)|0;H=((k=k+Math.imul(dt,ye)|0)+(C>>>13)|0)+(Ue>>>26)|0,Ue&=67108863,w=Math.imul(rt,Xt),C=(C=Math.imul(rt,Ut))+Math.imul(mt,Xt)|0,k=Math.imul(mt,Ut),w=w+Math.imul(ct,le)|0,C=(C=C+Math.imul(ct,ye)|0)+Math.imul(W,le)|0,k=k+Math.imul(W,ye)|0;var ii=(H+(w=w+Math.imul(ot,ce)|0)|0)+((8191&(C=(C=C+Math.imul(ot,ke)|0)+Math.imul(dt,ce)|0))<<13)|0;H=((k=k+Math.imul(dt,ke)|0)+(C>>>13)|0)+(ii>>>26)|0,ii&=67108863,w=Math.imul(_t,Xt),C=(C=Math.imul(_t,Ut))+Math.imul(Ct,Xt)|0,k=Math.imul(Ct,Ut),w=w+Math.imul(rt,le)|0,C=(C=C+Math.imul(rt,ye)|0)+Math.imul(mt,le)|0,k=k+Math.imul(mt,ye)|0,w=w+Math.imul(ct,ce)|0,C=(C=C+Math.imul(ct,ke)|0)+Math.imul(W,ce)|0,k=k+Math.imul(W,ke)|0;var Ke=(H+(w=w+Math.imul(ot,$t)|0)|0)+((8191&(C=(C=C+Math.imul(ot,Te)|0)+Math.imul(dt,$t)|0))<<13)|0;H=((k=k+Math.imul(dt,Te)|0)+(C>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,w=Math.imul(It,Xt),C=(C=Math.imul(It,Ut))+Math.imul(vt,Xt)|0,k=Math.imul(vt,Ut),w=w+Math.imul(_t,le)|0,C=(C=C+Math.imul(_t,ye)|0)+Math.imul(Ct,le)|0,k=k+Math.imul(Ct,ye)|0,w=w+Math.imul(rt,ce)|0,C=(C=C+Math.imul(rt,ke)|0)+Math.imul(mt,ce)|0,k=k+Math.imul(mt,ke)|0,w=w+Math.imul(ct,$t)|0,C=(C=C+Math.imul(ct,Te)|0)+Math.imul(W,$t)|0,k=k+Math.imul(W,Te)|0;var fr=(H+(w=w+Math.imul(ot,ue)|0)|0)+((8191&(C=(C=C+Math.imul(ot,Fe)|0)+Math.imul(dt,ue)|0))<<13)|0;H=((k=k+Math.imul(dt,Fe)|0)+(C>>>13)|0)+(fr>>>26)|0,fr&=67108863,w=Math.imul(gt,Xt),C=(C=Math.imul(gt,Ut))+Math.imul(ut,Xt)|0,k=Math.imul(ut,Ut),w=w+Math.imul(It,le)|0,C=(C=C+Math.imul(It,ye)|0)+Math.imul(vt,le)|0,k=k+Math.imul(vt,ye)|0,w=w+Math.imul(_t,ce)|0,C=(C=C+Math.imul(_t,ke)|0)+Math.imul(Ct,ce)|0,k=k+Math.imul(Ct,ke)|0,w=w+Math.imul(rt,$t)|0,C=(C=C+Math.imul(rt,Te)|0)+Math.imul(mt,$t)|0,k=k+Math.imul(mt,Te)|0,w=w+Math.imul(ct,ue)|0,C=(C=C+Math.imul(ct,Fe)|0)+Math.imul(W,ue)|0,k=k+Math.imul(W,Fe)|0;var Je=(H+(w=w+Math.imul(ot,Le)|0)|0)+((8191&(C=(C=C+Math.imul(ot,Oe)|0)+Math.imul(dt,Le)|0))<<13)|0;H=((k=k+Math.imul(dt,Oe)|0)+(C>>>13)|0)+(Je>>>26)|0,Je&=67108863,w=Math.imul(Y,Xt),C=(C=Math.imul(Y,Ut))+Math.imul(et,Xt)|0,k=Math.imul(et,Ut),w=w+Math.imul(gt,le)|0,C=(C=C+Math.imul(gt,ye)|0)+Math.imul(ut,le)|0,k=k+Math.imul(ut,ye)|0,w=w+Math.imul(It,ce)|0,C=(C=C+Math.imul(It,ke)|0)+Math.imul(vt,ce)|0,k=k+Math.imul(vt,ke)|0,w=w+Math.imul(_t,$t)|0,C=(C=C+Math.imul(_t,Te)|0)+Math.imul(Ct,$t)|0,k=k+Math.imul(Ct,Te)|0,w=w+Math.imul(rt,ue)|0,C=(C=C+Math.imul(rt,Fe)|0)+Math.imul(mt,ue)|0,k=k+Math.imul(mt,Fe)|0,w=w+Math.imul(ct,Le)|0,C=(C=C+Math.imul(ct,Oe)|0)+Math.imul(W,Le)|0,k=k+Math.imul(W,Oe)|0;var oi=(H+(w=w+Math.imul(ot,We)|0)|0)+((8191&(C=(C=C+Math.imul(ot,At)|0)+Math.imul(dt,We)|0))<<13)|0;H=((k=k+Math.imul(dt,At)|0)+(C>>>13)|0)+(oi>>>26)|0,oi&=67108863,w=Math.imul(pt,Xt),C=(C=Math.imul(pt,Ut))+Math.imul(bt,Xt)|0,k=Math.imul(bt,Ut),w=w+Math.imul(Y,le)|0,C=(C=C+Math.imul(Y,ye)|0)+Math.imul(et,le)|0,k=k+Math.imul(et,ye)|0,w=w+Math.imul(gt,ce)|0,C=(C=C+Math.imul(gt,ke)|0)+Math.imul(ut,ce)|0,k=k+Math.imul(ut,ke)|0,w=w+Math.imul(It,$t)|0,C=(C=C+Math.imul(It,Te)|0)+Math.imul(vt,$t)|0,k=k+Math.imul(vt,Te)|0,w=w+Math.imul(_t,ue)|0,C=(C=C+Math.imul(_t,Fe)|0)+Math.imul(Ct,ue)|0,k=k+Math.imul(Ct,Fe)|0,w=w+Math.imul(rt,Le)|0,C=(C=C+Math.imul(rt,Oe)|0)+Math.imul(mt,Le)|0,k=k+Math.imul(mt,Oe)|0,w=w+Math.imul(ct,We)|0,C=(C=C+Math.imul(ct,At)|0)+Math.imul(W,We)|0,k=k+Math.imul(W,At)|0;var lr=(H+(w=w+Math.imul(ot,jt)|0)|0)+((8191&(C=(C=C+Math.imul(ot,ae)|0)+Math.imul(dt,jt)|0))<<13)|0;H=((k=k+Math.imul(dt,ae)|0)+(C>>>13)|0)+(lr>>>26)|0,lr&=67108863,w=Math.imul(Ot,Xt),C=(C=Math.imul(Ot,Ut))+Math.imul(zt,Xt)|0,k=Math.imul(zt,Ut),w=w+Math.imul(pt,le)|0,C=(C=C+Math.imul(pt,ye)|0)+Math.imul(bt,le)|0,k=k+Math.imul(bt,ye)|0,w=w+Math.imul(Y,ce)|0,C=(C=C+Math.imul(Y,ke)|0)+Math.imul(et,ce)|0,k=k+Math.imul(et,ke)|0,w=w+Math.imul(gt,$t)|0,C=(C=C+Math.imul(gt,Te)|0)+Math.imul(ut,$t)|0,k=k+Math.imul(ut,Te)|0,w=w+Math.imul(It,ue)|0,C=(C=C+Math.imul(It,Fe)|0)+Math.imul(vt,ue)|0,k=k+Math.imul(vt,Fe)|0,w=w+Math.imul(_t,Le)|0,C=(C=C+Math.imul(_t,Oe)|0)+Math.imul(Ct,Le)|0,k=k+Math.imul(Ct,Oe)|0,w=w+Math.imul(rt,We)|0,C=(C=C+Math.imul(rt,At)|0)+Math.imul(mt,We)|0,k=k+Math.imul(mt,At)|0,w=w+Math.imul(ct,jt)|0,C=(C=C+Math.imul(ct,ae)|0)+Math.imul(W,jt)|0,k=k+Math.imul(W,ae)|0;var Mi=(H+(w=w+Math.imul(ot,se)|0)|0)+((8191&(C=(C=C+Math.imul(ot,ve)|0)+Math.imul(dt,se)|0))<<13)|0;H=((k=k+Math.imul(dt,ve)|0)+(C>>>13)|0)+(Mi>>>26)|0,Mi&=67108863,w=Math.imul(Jt,Xt),C=(C=Math.imul(Jt,Ut))+Math.imul(Kt,Xt)|0,k=Math.imul(Kt,Ut),w=w+Math.imul(Ot,le)|0,C=(C=C+Math.imul(Ot,ye)|0)+Math.imul(zt,le)|0,k=k+Math.imul(zt,ye)|0,w=w+Math.imul(pt,ce)|0,C=(C=C+Math.imul(pt,ke)|0)+Math.imul(bt,ce)|0,k=k+Math.imul(bt,ke)|0,w=w+Math.imul(Y,$t)|0,C=(C=C+Math.imul(Y,Te)|0)+Math.imul(et,$t)|0,k=k+Math.imul(et,Te)|0,w=w+Math.imul(gt,ue)|0,C=(C=C+Math.imul(gt,Fe)|0)+Math.imul(ut,ue)|0,k=k+Math.imul(ut,Fe)|0,w=w+Math.imul(It,Le)|0,C=(C=C+Math.imul(It,Oe)|0)+Math.imul(vt,Le)|0,k=k+Math.imul(vt,Oe)|0,w=w+Math.imul(_t,We)|0,C=(C=C+Math.imul(_t,At)|0)+Math.imul(Ct,We)|0,k=k+Math.imul(Ct,At)|0,w=w+Math.imul(rt,jt)|0,C=(C=C+Math.imul(rt,ae)|0)+Math.imul(mt,jt)|0,k=k+Math.imul(mt,ae)|0,w=w+Math.imul(ct,se)|0,C=(C=C+Math.imul(ct,ve)|0)+Math.imul(W,se)|0,k=k+Math.imul(W,ve)|0;var Tt=(H+(w=w+Math.imul(ot,Ae)|0)|0)+((8191&(C=(C=C+Math.imul(ot,fe)|0)+Math.imul(dt,Ae)|0))<<13)|0;H=((k=k+Math.imul(dt,fe)|0)+(C>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,w=Math.imul(Jt,le),C=(C=Math.imul(Jt,ye))+Math.imul(Kt,le)|0,k=Math.imul(Kt,ye),w=w+Math.imul(Ot,ce)|0,C=(C=C+Math.imul(Ot,ke)|0)+Math.imul(zt,ce)|0,k=k+Math.imul(zt,ke)|0,w=w+Math.imul(pt,$t)|0,C=(C=C+Math.imul(pt,Te)|0)+Math.imul(bt,$t)|0,k=k+Math.imul(bt,Te)|0,w=w+Math.imul(Y,ue)|0,C=(C=C+Math.imul(Y,Fe)|0)+Math.imul(et,ue)|0,k=k+Math.imul(et,Fe)|0,w=w+Math.imul(gt,Le)|0,C=(C=C+Math.imul(gt,Oe)|0)+Math.imul(ut,Le)|0,k=k+Math.imul(ut,Oe)|0,w=w+Math.imul(It,We)|0,C=(C=C+Math.imul(It,At)|0)+Math.imul(vt,We)|0,k=k+Math.imul(vt,At)|0,w=w+Math.imul(_t,jt)|0,C=(C=C+Math.imul(_t,ae)|0)+Math.imul(Ct,jt)|0,k=k+Math.imul(Ct,ae)|0,w=w+Math.imul(rt,se)|0,C=(C=C+Math.imul(rt,ve)|0)+Math.imul(mt,se)|0,k=k+Math.imul(mt,ve)|0;var Ht=(H+(w=w+Math.imul(ct,Ae)|0)|0)+((8191&(C=(C=C+Math.imul(ct,fe)|0)+Math.imul(W,Ae)|0))<<13)|0;H=((k=k+Math.imul(W,fe)|0)+(C>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,w=Math.imul(Jt,ce),C=(C=Math.imul(Jt,ke))+Math.imul(Kt,ce)|0,k=Math.imul(Kt,ke),w=w+Math.imul(Ot,$t)|0,C=(C=C+Math.imul(Ot,Te)|0)+Math.imul(zt,$t)|0,k=k+Math.imul(zt,Te)|0,w=w+Math.imul(pt,ue)|0,C=(C=C+Math.imul(pt,Fe)|0)+Math.imul(bt,ue)|0,k=k+Math.imul(bt,Fe)|0,w=w+Math.imul(Y,Le)|0,C=(C=C+Math.imul(Y,Oe)|0)+Math.imul(et,Le)|0,k=k+Math.imul(et,Oe)|0,w=w+Math.imul(gt,We)|0,C=(C=C+Math.imul(gt,At)|0)+Math.imul(ut,We)|0,k=k+Math.imul(ut,At)|0,w=w+Math.imul(It,jt)|0,C=(C=C+Math.imul(It,ae)|0)+Math.imul(vt,jt)|0,k=k+Math.imul(vt,ae)|0,w=w+Math.imul(_t,se)|0,C=(C=C+Math.imul(_t,ve)|0)+Math.imul(Ct,se)|0,k=k+Math.imul(Ct,ve)|0;var re=(H+(w=w+Math.imul(rt,Ae)|0)|0)+((8191&(C=(C=C+Math.imul(rt,fe)|0)+Math.imul(mt,Ae)|0))<<13)|0;H=((k=k+Math.imul(mt,fe)|0)+(C>>>13)|0)+(re>>>26)|0,re&=67108863,w=Math.imul(Jt,$t),C=(C=Math.imul(Jt,Te))+Math.imul(Kt,$t)|0,k=Math.imul(Kt,Te),w=w+Math.imul(Ot,ue)|0,C=(C=C+Math.imul(Ot,Fe)|0)+Math.imul(zt,ue)|0,k=k+Math.imul(zt,Fe)|0,w=w+Math.imul(pt,Le)|0,C=(C=C+Math.imul(pt,Oe)|0)+Math.imul(bt,Le)|0,k=k+Math.imul(bt,Oe)|0,w=w+Math.imul(Y,We)|0,C=(C=C+Math.imul(Y,At)|0)+Math.imul(et,We)|0,k=k+Math.imul(et,At)|0,w=w+Math.imul(gt,jt)|0,C=(C=C+Math.imul(gt,ae)|0)+Math.imul(ut,jt)|0,k=k+Math.imul(ut,ae)|0,w=w+Math.imul(It,se)|0,C=(C=C+Math.imul(It,ve)|0)+Math.imul(vt,se)|0,k=k+Math.imul(vt,ve)|0;var Qt=(H+(w=w+Math.imul(_t,Ae)|0)|0)+((8191&(C=(C=C+Math.imul(_t,fe)|0)+Math.imul(Ct,Ae)|0))<<13)|0;H=((k=k+Math.imul(Ct,fe)|0)+(C>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,w=Math.imul(Jt,ue),C=(C=Math.imul(Jt,Fe))+Math.imul(Kt,ue)|0,k=Math.imul(Kt,Fe),w=w+Math.imul(Ot,Le)|0,C=(C=C+Math.imul(Ot,Oe)|0)+Math.imul(zt,Le)|0,k=k+Math.imul(zt,Oe)|0,w=w+Math.imul(pt,We)|0,C=(C=C+Math.imul(pt,At)|0)+Math.imul(bt,We)|0,k=k+Math.imul(bt,At)|0,w=w+Math.imul(Y,jt)|0,C=(C=C+Math.imul(Y,ae)|0)+Math.imul(et,jt)|0,k=k+Math.imul(et,ae)|0,w=w+Math.imul(gt,se)|0,C=(C=C+Math.imul(gt,ve)|0)+Math.imul(ut,se)|0,k=k+Math.imul(ut,ve)|0;var he=(H+(w=w+Math.imul(It,Ae)|0)|0)+((8191&(C=(C=C+Math.imul(It,fe)|0)+Math.imul(vt,Ae)|0))<<13)|0;H=((k=k+Math.imul(vt,fe)|0)+(C>>>13)|0)+(he>>>26)|0,he&=67108863,w=Math.imul(Jt,Le),C=(C=Math.imul(Jt,Oe))+Math.imul(Kt,Le)|0,k=Math.imul(Kt,Oe),w=w+Math.imul(Ot,We)|0,C=(C=C+Math.imul(Ot,At)|0)+Math.imul(zt,We)|0,k=k+Math.imul(zt,At)|0,w=w+Math.imul(pt,jt)|0,C=(C=C+Math.imul(pt,ae)|0)+Math.imul(bt,jt)|0,k=k+Math.imul(bt,ae)|0,w=w+Math.imul(Y,se)|0,C=(C=C+Math.imul(Y,ve)|0)+Math.imul(et,se)|0,k=k+Math.imul(et,ve)|0;var Ee=(H+(w=w+Math.imul(gt,Ae)|0)|0)+((8191&(C=(C=C+Math.imul(gt,fe)|0)+Math.imul(ut,Ae)|0))<<13)|0;H=((k=k+Math.imul(ut,fe)|0)+(C>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,w=Math.imul(Jt,We),C=(C=Math.imul(Jt,At))+Math.imul(Kt,We)|0,k=Math.imul(Kt,At),w=w+Math.imul(Ot,jt)|0,C=(C=C+Math.imul(Ot,ae)|0)+Math.imul(zt,jt)|0,k=k+Math.imul(zt,ae)|0,w=w+Math.imul(pt,se)|0,C=(C=C+Math.imul(pt,ve)|0)+Math.imul(bt,se)|0,k=k+Math.imul(bt,ve)|0;var Ie=(H+(w=w+Math.imul(Y,Ae)|0)|0)+((8191&(C=(C=C+Math.imul(Y,fe)|0)+Math.imul(et,Ae)|0))<<13)|0;H=((k=k+Math.imul(et,fe)|0)+(C>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,w=Math.imul(Jt,jt),C=(C=Math.imul(Jt,ae))+Math.imul(Kt,jt)|0,k=Math.imul(Kt,ae),w=w+Math.imul(Ot,se)|0,C=(C=C+Math.imul(Ot,ve)|0)+Math.imul(zt,se)|0,k=k+Math.imul(zt,ve)|0;var ti=(H+(w=w+Math.imul(pt,Ae)|0)|0)+((8191&(C=(C=C+Math.imul(pt,fe)|0)+Math.imul(bt,Ae)|0))<<13)|0;H=((k=k+Math.imul(bt,fe)|0)+(C>>>13)|0)+(ti>>>26)|0,ti&=67108863,w=Math.imul(Jt,se),C=(C=Math.imul(Jt,ve))+Math.imul(Kt,se)|0,k=Math.imul(Kt,ve);var Ge=(H+(w=w+Math.imul(Ot,Ae)|0)|0)+((8191&(C=(C=C+Math.imul(Ot,fe)|0)+Math.imul(zt,Ae)|0))<<13)|0;H=((k=k+Math.imul(zt,fe)|0)+(C>>>13)|0)+(Ge>>>26)|0,Ge&=67108863;var we=(H+(w=Math.imul(Jt,Ae))|0)+((8191&(C=(C=Math.imul(Jt,fe))+Math.imul(Kt,Ae)|0))<<13)|0;return H=((k=Math.imul(Kt,fe))+(C>>>13)|0)+(we>>>26)|0,we&=67108863,F[0]=Ye,F[1]=Ue,F[2]=ii,F[3]=Ke,F[4]=fr,F[5]=Je,F[6]=oi,F[7]=lr,F[8]=Mi,F[9]=Tt,F[10]=Ht,F[11]=re,F[12]=Qt,F[13]=he,F[14]=Ee,F[15]=Ie,F[16]=ti,F[17]=Ge,F[18]=we,H!==0&&(F[19]=H,Z.length++),Z};function x(D,N,Z){return new S().mulp(D,N,Z)}function S(D,N){this.x=D,this.y=N}Math.imul||(y=_),s.prototype.mulTo=function(D,N){var Z=this.length+D.length;return this.length===10&&D.length===10?y(this,D,N):Z<63?_(this,D,N):Z<1024?function(w,C,k){k.negative=C.negative^w.negative,k.length=w.length+C.length;for(var T=0,R=0,F=0;F<k.length-1;F++){var H=R;R=0;for(var it=67108863&T,ot=Math.min(F,C.length-1),dt=Math.max(0,F-w.length+1);dt<=ot;dt++){var $=F-dt,ct=(0|w.words[$])*(0|C.words[dt]),W=67108863&ct;it=67108863&(W=W+it|0),R+=(H=(H=H+(ct/67108864|0)|0)+(W>>>26)|0)>>>26,H&=67108863}k.words[F]=it,T=H,H=R}return T!==0?k.words[F]=T:k.length--,k.strip()}(this,D,N):x(this,D,N)},S.prototype.makeRBT=function(D){for(var N=new Array(D),Z=s.prototype._countBits(D)-1,w=0;w<D;w++)N[w]=this.revBin(w,Z,D);return N},S.prototype.revBin=function(D,N,Z){if(D===0||D===Z-1)return D;for(var w=0,C=0;C<N;C++)w|=(1&D)<<N-C-1,D>>=1;return w},S.prototype.permute=function(D,N,Z,w,C,k){for(var T=0;T<k;T++)w[T]=N[D[T]],C[T]=Z[D[T]]},S.prototype.transform=function(D,N,Z,w,C,k){this.permute(k,D,N,Z,w,C);for(var T=1;T<C;T<<=1)for(var R=T<<1,F=Math.cos(2*Math.PI/R),H=Math.sin(2*Math.PI/R),it=0;it<C;it+=R)for(var ot=F,dt=H,$=0;$<T;$++){var ct=Z[it+$],W=w[it+$],V=Z[it+$+T],rt=w[it+$+T],mt=ot*V-dt*rt;rt=ot*rt+dt*V,V=mt,Z[it+$]=ct+V,w[it+$]=W+rt,Z[it+$+T]=ct-V,w[it+$+T]=W-rt,$!==R&&(mt=F*ot-H*dt,dt=F*dt+H*ot,ot=mt)}},S.prototype.guessLen13b=function(D,N){var Z=1|Math.max(N,D),w=1&Z,C=0;for(Z=Z/2|0;Z;Z>>>=1)C++;return 1<<C+1+w},S.prototype.conjugate=function(D,N,Z){if(!(Z<=1))for(var w=0;w<Z/2;w++){var C=D[w];D[w]=D[Z-w-1],D[Z-w-1]=C,C=N[w],N[w]=-N[Z-w-1],N[Z-w-1]=-C}},S.prototype.normalize13b=function(D,N){for(var Z=0,w=0;w<N/2;w++){var C=8192*Math.round(D[2*w+1]/N)+Math.round(D[2*w]/N)+Z;D[w]=67108863&C,Z=C<67108864?0:C/67108864|0}return D},S.prototype.convert13b=function(D,N,Z,w){for(var C=0,k=0;k<N;k++)C+=0|D[k],Z[2*k]=8191&C,C>>>=13,Z[2*k+1]=8191&C,C>>>=13;for(k=2*N;k<w;++k)Z[k]=0;o(C===0),o((-8192&C)==0)},S.prototype.stub=function(D){for(var N=new Array(D),Z=0;Z<D;Z++)N[Z]=0;return N},S.prototype.mulp=function(D,N,Z){var w=2*this.guessLen13b(D.length,N.length),C=this.makeRBT(w),k=this.stub(w),T=new Array(w),R=new Array(w),F=new Array(w),H=new Array(w),it=new Array(w),ot=new Array(w),dt=Z.words;dt.length=w,this.convert13b(D.words,D.length,T,w),this.convert13b(N.words,N.length,H,w),this.transform(T,k,R,F,w,C),this.transform(H,k,it,ot,w,C);for(var $=0;$<w;$++){var ct=R[$]*it[$]-F[$]*ot[$];F[$]=R[$]*ot[$]+F[$]*it[$],R[$]=ct}return this.conjugate(R,F,w),this.transform(R,F,dt,k,w,C),this.conjugate(dt,k,w),this.normalize13b(dt,w),Z.negative=D.negative^N.negative,Z.length=D.length+N.length,Z.strip()},s.prototype.mul=function(D){var N=new s(null);return N.words=new Array(this.length+D.length),this.mulTo(D,N)},s.prototype.mulf=function(D){var N=new s(null);return N.words=new Array(this.length+D.length),x(this,D,N)},s.prototype.imul=function(D){return this.clone().mulTo(D,this)},s.prototype.imuln=function(D){o(typeof D=="number"),o(D<67108864);for(var N=0,Z=0;Z<this.length;Z++){var w=(0|this.words[Z])*D,C=(67108863&w)+(67108863&N);N>>=26,N+=w/67108864|0,N+=C>>>26,this.words[Z]=67108863&C}return N!==0&&(this.words[Z]=N,this.length++),this},s.prototype.muln=function(D){return this.clone().imuln(D)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(D){var N=function(k){for(var T=new Array(k.bitLength()),R=0;R<T.length;R++){var F=R/26|0,H=R%26;T[R]=(k.words[F]&1<<H)>>>H}return T}(D);if(N.length===0)return new s(1);for(var Z=this,w=0;w<N.length&&N[w]===0;w++,Z=Z.sqr());if(++w<N.length)for(var C=Z.sqr();w<N.length;w++,C=C.sqr())N[w]!==0&&(Z=Z.mul(C));return Z},s.prototype.iushln=function(D){o(typeof D=="number"&&D>=0);var N,Z=D%26,w=(D-Z)/26,C=67108863>>>26-Z<<26-Z;if(Z!==0){var k=0;for(N=0;N<this.length;N++){var T=this.words[N]&C,R=(0|this.words[N])-T<<Z;this.words[N]=R|k,k=T>>>26-Z}k&&(this.words[N]=k,this.length++)}if(w!==0){for(N=this.length-1;N>=0;N--)this.words[N+w]=this.words[N];for(N=0;N<w;N++)this.words[N]=0;this.length+=w}return this.strip()},s.prototype.ishln=function(D){return o(this.negative===0),this.iushln(D)},s.prototype.iushrn=function(D,N,Z){var w;o(typeof D=="number"&&D>=0),w=N?(N-N%26)/26:0;var C=D%26,k=Math.min((D-C)/26,this.length),T=67108863^67108863>>>C<<C,R=Z;if(w-=k,w=Math.max(0,w),R){for(var F=0;F<k;F++)R.words[F]=this.words[F];R.length=k}if(k!==0)if(this.length>k)for(this.length-=k,F=0;F<this.length;F++)this.words[F]=this.words[F+k];else this.words[0]=0,this.length=1;var H=0;for(F=this.length-1;F>=0&&(H!==0||F>=w);F--){var it=0|this.words[F];this.words[F]=H<<26-C|it>>>C,H=it&T}return R&&H!==0&&(R.words[R.length++]=H),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(D,N,Z){return o(this.negative===0),this.iushrn(D,N,Z)},s.prototype.shln=function(D){return this.clone().ishln(D)},s.prototype.ushln=function(D){return this.clone().iushln(D)},s.prototype.shrn=function(D){return this.clone().ishrn(D)},s.prototype.ushrn=function(D){return this.clone().iushrn(D)},s.prototype.testn=function(D){o(typeof D=="number"&&D>=0);var N=D%26,Z=(D-N)/26,w=1<<N;return!(this.length<=Z)&&!!(this.words[Z]&w)},s.prototype.imaskn=function(D){o(typeof D=="number"&&D>=0);var N=D%26,Z=(D-N)/26;if(o(this.negative===0,"imaskn works only with positive numbers"),this.length<=Z)return this;if(N!==0&&Z++,this.length=Math.min(Z,this.length),N!==0){var w=67108863^67108863>>>N<<N;this.words[this.length-1]&=w}return this.strip()},s.prototype.maskn=function(D){return this.clone().imaskn(D)},s.prototype.iaddn=function(D){return o(typeof D=="number"),o(D<67108864),D<0?this.isubn(-D):this.negative!==0?this.length===1&&(0|this.words[0])<D?(this.words[0]=D-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(D),this.negative=1,this):this._iaddn(D)},s.prototype._iaddn=function(D){this.words[0]+=D;for(var N=0;N<this.length&&this.words[N]>=67108864;N++)this.words[N]-=67108864,N===this.length-1?this.words[N+1]=1:this.words[N+1]++;return this.length=Math.max(this.length,N+1),this},s.prototype.isubn=function(D){if(o(typeof D=="number"),o(D<67108864),D<0)return this.iaddn(-D);if(this.negative!==0)return this.negative=0,this.iaddn(D),this.negative=1,this;if(this.words[0]-=D,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var N=0;N<this.length&&this.words[N]<0;N++)this.words[N]+=67108864,this.words[N+1]-=1;return this.strip()},s.prototype.addn=function(D){return this.clone().iaddn(D)},s.prototype.subn=function(D){return this.clone().isubn(D)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(D,N,Z){var w,C,k=D.length+Z;this._expand(k);var T=0;for(w=0;w<D.length;w++){C=(0|this.words[w+Z])+T;var R=(0|D.words[w])*N;T=((C-=67108863&R)>>26)-(R/67108864|0),this.words[w+Z]=67108863&C}for(;w<this.length-Z;w++)T=(C=(0|this.words[w+Z])+T)>>26,this.words[w+Z]=67108863&C;if(T===0)return this.strip();for(o(T===-1),T=0,w=0;w<this.length;w++)T=(C=-(0|this.words[w])+T)>>26,this.words[w]=67108863&C;return this.negative=1,this.strip()},s.prototype._wordDiv=function(D,N){var Z=(this.length,D.length),w=this.clone(),C=D,k=0|C.words[C.length-1];(Z=26-this._countBits(k))!==0&&(C=C.ushln(Z),w.iushln(Z),k=0|C.words[C.length-1]);var T,R=w.length-C.length;if(N!=="mod"){(T=new s(null)).length=R+1,T.words=new Array(T.length);for(var F=0;F<T.length;F++)T.words[F]=0}var H=w.clone()._ishlnsubmul(C,1,R);H.negative===0&&(w=H,T&&(T.words[R]=1));for(var it=R-1;it>=0;it--){var ot=67108864*(0|w.words[C.length+it])+(0|w.words[C.length+it-1]);for(ot=Math.min(ot/k|0,67108863),w._ishlnsubmul(C,ot,it);w.negative!==0;)ot--,w.negative=0,w._ishlnsubmul(C,1,it),w.isZero()||(w.negative^=1);T&&(T.words[it]=ot)}return T&&T.strip(),w.strip(),N!=="div"&&Z!==0&&w.iushrn(Z),{div:T||null,mod:w}},s.prototype.divmod=function(D,N,Z){return o(!D.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:this.negative!==0&&D.negative===0?(k=this.neg().divmod(D,N),N!=="mod"&&(w=k.div.neg()),N!=="div"&&(C=k.mod.neg(),Z&&C.negative!==0&&C.iadd(D)),{div:w,mod:C}):this.negative===0&&D.negative!==0?(k=this.divmod(D.neg(),N),N!=="mod"&&(w=k.div.neg()),{div:w,mod:k.mod}):this.negative&D.negative?(k=this.neg().divmod(D.neg(),N),N!=="div"&&(C=k.mod.neg(),Z&&C.negative!==0&&C.isub(D)),{div:k.div,mod:C}):D.length>this.length||this.cmp(D)<0?{div:new s(0),mod:this}:D.length===1?N==="div"?{div:this.divn(D.words[0]),mod:null}:N==="mod"?{div:null,mod:new s(this.modn(D.words[0]))}:{div:this.divn(D.words[0]),mod:new s(this.modn(D.words[0]))}:this._wordDiv(D,N);var w,C,k},s.prototype.div=function(D){return this.divmod(D,"div",!1).div},s.prototype.mod=function(D){return this.divmod(D,"mod",!1).mod},s.prototype.umod=function(D){return this.divmod(D,"mod",!0).mod},s.prototype.divRound=function(D){var N=this.divmod(D);if(N.mod.isZero())return N.div;var Z=N.div.negative!==0?N.mod.isub(D):N.mod,w=D.ushrn(1),C=D.andln(1),k=Z.cmp(w);return k<0||C===1&&k===0?N.div:N.div.negative!==0?N.div.isubn(1):N.div.iaddn(1)},s.prototype.modn=function(D){o(D<=67108863);for(var N=(1<<26)%D,Z=0,w=this.length-1;w>=0;w--)Z=(N*Z+(0|this.words[w]))%D;return Z},s.prototype.idivn=function(D){o(D<=67108863);for(var N=0,Z=this.length-1;Z>=0;Z--){var w=(0|this.words[Z])+67108864*N;this.words[Z]=w/D|0,N=w%D}return this.strip()},s.prototype.divn=function(D){return this.clone().idivn(D)},s.prototype.egcd=function(D){o(D.negative===0),o(!D.isZero());var N=this,Z=D.clone();N=N.negative!==0?N.umod(D):N.clone();for(var w=new s(1),C=new s(0),k=new s(0),T=new s(1),R=0;N.isEven()&&Z.isEven();)N.iushrn(1),Z.iushrn(1),++R;for(var F=Z.clone(),H=N.clone();!N.isZero();){for(var it=0,ot=1;!(N.words[0]&ot)&&it<26;++it,ot<<=1);if(it>0)for(N.iushrn(it);it-- >0;)(w.isOdd()||C.isOdd())&&(w.iadd(F),C.isub(H)),w.iushrn(1),C.iushrn(1);for(var dt=0,$=1;!(Z.words[0]&$)&&dt<26;++dt,$<<=1);if(dt>0)for(Z.iushrn(dt);dt-- >0;)(k.isOdd()||T.isOdd())&&(k.iadd(F),T.isub(H)),k.iushrn(1),T.iushrn(1);N.cmp(Z)>=0?(N.isub(Z),w.isub(k),C.isub(T)):(Z.isub(N),k.isub(w),T.isub(C))}return{a:k,b:T,gcd:Z.iushln(R)}},s.prototype._invmp=function(D){o(D.negative===0),o(!D.isZero());var N=this,Z=D.clone();N=N.negative!==0?N.umod(D):N.clone();for(var w,C=new s(1),k=new s(0),T=Z.clone();N.cmpn(1)>0&&Z.cmpn(1)>0;){for(var R=0,F=1;!(N.words[0]&F)&&R<26;++R,F<<=1);if(R>0)for(N.iushrn(R);R-- >0;)C.isOdd()&&C.iadd(T),C.iushrn(1);for(var H=0,it=1;!(Z.words[0]&it)&&H<26;++H,it<<=1);if(H>0)for(Z.iushrn(H);H-- >0;)k.isOdd()&&k.iadd(T),k.iushrn(1);N.cmp(Z)>=0?(N.isub(Z),C.isub(k)):(Z.isub(N),k.isub(C))}return(w=N.cmpn(1)===0?C:k).cmpn(0)<0&&w.iadd(D),w},s.prototype.gcd=function(D){if(this.isZero())return D.abs();if(D.isZero())return this.abs();var N=this.clone(),Z=D.clone();N.negative=0,Z.negative=0;for(var w=0;N.isEven()&&Z.isEven();w++)N.iushrn(1),Z.iushrn(1);for(;;){for(;N.isEven();)N.iushrn(1);for(;Z.isEven();)Z.iushrn(1);var C=N.cmp(Z);if(C<0){var k=N;N=Z,Z=k}else if(C===0||Z.cmpn(1)===0)break;N.isub(Z)}return Z.iushln(w)},s.prototype.invm=function(D){return this.egcd(D).a.umod(D)},s.prototype.isEven=function(){return(1&this.words[0])==0},s.prototype.isOdd=function(){return(1&this.words[0])==1},s.prototype.andln=function(D){return this.words[0]&D},s.prototype.bincn=function(D){o(typeof D=="number");var N=D%26,Z=(D-N)/26,w=1<<N;if(this.length<=Z)return this._expand(Z+1),this.words[Z]|=w,this;for(var C=w,k=Z;C!==0&&k<this.length;k++){var T=0|this.words[k];C=(T+=C)>>>26,T&=67108863,this.words[k]=T}return C!==0&&(this.words[k]=C,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(D){var N,Z=D<0;if(this.negative!==0&&!Z)return-1;if(this.negative===0&&Z)return 1;if(this.strip(),this.length>1)N=1;else{Z&&(D=-D),o(D<=67108863,"Number is too big");var w=0|this.words[0];N=w===D?0:w<D?-1:1}return this.negative!==0?0|-N:N},s.prototype.cmp=function(D){if(this.negative!==0&&D.negative===0)return-1;if(this.negative===0&&D.negative!==0)return 1;var N=this.ucmp(D);return this.negative!==0?0|-N:N},s.prototype.ucmp=function(D){if(this.length>D.length)return 1;if(this.length<D.length)return-1;for(var N=0,Z=this.length-1;Z>=0;Z--){var w=0|this.words[Z],C=0|D.words[Z];if(w!==C){w<C?N=-1:w>C&&(N=1);break}}return N},s.prototype.gtn=function(D){return this.cmpn(D)===1},s.prototype.gt=function(D){return this.cmp(D)===1},s.prototype.gten=function(D){return this.cmpn(D)>=0},s.prototype.gte=function(D){return this.cmp(D)>=0},s.prototype.ltn=function(D){return this.cmpn(D)===-1},s.prototype.lt=function(D){return this.cmp(D)===-1},s.prototype.lten=function(D){return this.cmpn(D)<=0},s.prototype.lte=function(D){return this.cmp(D)<=0},s.prototype.eqn=function(D){return this.cmpn(D)===0},s.prototype.eq=function(D){return this.cmp(D)===0},s.red=function(D){return new tt(D)},s.prototype.toRed=function(D){return o(!this.red,"Already a number in reduction context"),o(this.negative===0,"red works only with positives"),D.convertTo(this)._forceRed(D)},s.prototype.fromRed=function(){return o(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(D){return this.red=D,this},s.prototype.forceRed=function(D){return o(!this.red,"Already a number in reduction context"),this._forceRed(D)},s.prototype.redAdd=function(D){return o(this.red,"redAdd works only with red numbers"),this.red.add(this,D)},s.prototype.redIAdd=function(D){return o(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,D)},s.prototype.redSub=function(D){return o(this.red,"redSub works only with red numbers"),this.red.sub(this,D)},s.prototype.redISub=function(D){return o(this.red,"redISub works only with red numbers"),this.red.isub(this,D)},s.prototype.redShl=function(D){return o(this.red,"redShl works only with red numbers"),this.red.shl(this,D)},s.prototype.redMul=function(D){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,D),this.red.mul(this,D)},s.prototype.redIMul=function(D){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,D),this.red.imul(this,D)},s.prototype.redSqr=function(){return o(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return o(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return o(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return o(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return o(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(D){return o(this.red&&!D.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,D)};var O={k256:null,p224:null,p192:null,p25519:null};function B(D,N){this.name=D,this.p=new s(N,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function U(){B.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function z(){B.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function q(){B.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function G(){B.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function tt(D){if(typeof D=="string"){var N=s._prime(D);this.m=N.p,this.prime=N}else o(D.gtn(1),"modulus must be greater than 1"),this.m=D,this.prime=null}function K(D){tt.call(this,D),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}B.prototype._tmp=function(){var D=new s(null);return D.words=new Array(Math.ceil(this.n/13)),D},B.prototype.ireduce=function(D){var N,Z=D;do this.split(Z,this.tmp),N=(Z=(Z=this.imulK(Z)).iadd(this.tmp)).bitLength();while(N>this.n);var w=N<this.n?-1:Z.ucmp(this.p);return w===0?(Z.words[0]=0,Z.length=1):w>0?Z.isub(this.p):Z.strip!==void 0?Z.strip():Z._strip(),Z},B.prototype.split=function(D,N){D.iushrn(this.n,0,N)},B.prototype.imulK=function(D){return D.imul(this.k)},a(U,B),U.prototype.split=function(D,N){for(var Z=Math.min(D.length,9),w=0;w<Z;w++)N.words[w]=D.words[w];if(N.length=Z,D.length<=9)return D.words[0]=0,void(D.length=1);var C=D.words[9];for(N.words[N.length++]=4194303&C,w=10;w<D.length;w++){var k=0|D.words[w];D.words[w-10]=(4194303&k)<<4|C>>>22,C=k}C>>>=22,D.words[w-10]=C,C===0&&D.length>10?D.length-=10:D.length-=9},U.prototype.imulK=function(D){D.words[D.length]=0,D.words[D.length+1]=0,D.length+=2;for(var N=0,Z=0;Z<D.length;Z++){var w=0|D.words[Z];N+=977*w,D.words[Z]=67108863&N,N=64*w+(N/67108864|0)}return D.words[D.length-1]===0&&(D.length--,D.words[D.length-1]===0&&D.length--),D},a(z,B),a(q,B),a(G,B),G.prototype.imulK=function(D){for(var N=0,Z=0;Z<D.length;Z++){var w=19*(0|D.words[Z])+N,C=67108863&w;w>>>=26,D.words[Z]=C,N=w}return N!==0&&(D.words[D.length++]=N),D},s._prime=function(D){if(O[D])return O[D];var N;if(D==="k256")N=new U;else if(D==="p224")N=new z;else if(D==="p192")N=new q;else{if(D!=="p25519")throw new Error("Unknown prime "+D);N=new G}return O[D]=N,N},tt.prototype._verify1=function(D){o(D.negative===0,"red works only with positives"),o(D.red,"red works only with red numbers")},tt.prototype._verify2=function(D,N){o((D.negative|N.negative)==0,"red works only with positives"),o(D.red&&D.red===N.red,"red works only with red numbers")},tt.prototype.imod=function(D){return this.prime?this.prime.ireduce(D)._forceRed(this):D.umod(this.m)._forceRed(this)},tt.prototype.neg=function(D){return D.isZero()?D.clone():this.m.sub(D)._forceRed(this)},tt.prototype.add=function(D,N){this._verify2(D,N);var Z=D.add(N);return Z.cmp(this.m)>=0&&Z.isub(this.m),Z._forceRed(this)},tt.prototype.iadd=function(D,N){this._verify2(D,N);var Z=D.iadd(N);return Z.cmp(this.m)>=0&&Z.isub(this.m),Z},tt.prototype.sub=function(D,N){this._verify2(D,N);var Z=D.sub(N);return Z.cmpn(0)<0&&Z.iadd(this.m),Z._forceRed(this)},tt.prototype.isub=function(D,N){this._verify2(D,N);var Z=D.isub(N);return Z.cmpn(0)<0&&Z.iadd(this.m),Z},tt.prototype.shl=function(D,N){return this._verify1(D),this.imod(D.ushln(N))},tt.prototype.imul=function(D,N){return this._verify2(D,N),this.imod(D.imul(N))},tt.prototype.mul=function(D,N){return this._verify2(D,N),this.imod(D.mul(N))},tt.prototype.isqr=function(D){return this.imul(D,D.clone())},tt.prototype.sqr=function(D){return this.mul(D,D)},tt.prototype.sqrt=function(D){if(D.isZero())return D.clone();var N=this.m.andln(3);if(o(N%2==1),N===3){var Z=this.m.add(new s(1)).iushrn(2);return this.pow(D,Z)}for(var w=this.m.subn(1),C=0;!w.isZero()&&w.andln(1)===0;)C++,w.iushrn(1);o(!w.isZero());var k=new s(1).toRed(this),T=k.redNeg(),R=this.m.subn(1).iushrn(1),F=this.m.bitLength();for(F=new s(2*F*F).toRed(this);this.pow(F,R).cmp(T)!==0;)F.redIAdd(T);for(var H=this.pow(F,w),it=this.pow(D,w.addn(1).iushrn(1)),ot=this.pow(D,w),dt=C;ot.cmp(k)!==0;){for(var $=ot,ct=0;$.cmp(k)!==0;ct++)$=$.redSqr();o(ct<dt);var W=this.pow(H,new s(1).iushln(dt-ct-1));it=it.redMul(W),H=W.redSqr(),ot=ot.redMul(H),dt=ct}return it},tt.prototype.invm=function(D){var N=D._invmp(this.m);return N.negative!==0?(N.negative=0,this.imod(N).redNeg()):this.imod(N)},tt.prototype.pow=function(D,N){if(N.isZero())return new s(1).toRed(this);if(N.cmpn(1)===0)return D.clone();var Z=new Array(16);Z[0]=new s(1).toRed(this),Z[1]=D;for(var w=2;w<Z.length;w++)Z[w]=this.mul(Z[w-1],D);var C=Z[0],k=0,T=0,R=N.bitLength()%26;for(R===0&&(R=26),w=N.length-1;w>=0;w--){for(var F=N.words[w],H=R-1;H>=0;H--){var it=F>>H&1;C!==Z[0]&&(C=this.sqr(C)),it!==0||k!==0?(k<<=1,k|=it,(++T===4||w===0&&H===0)&&(C=this.mul(C,Z[k]),T=0,k=0)):T=0}R=26}return C},tt.prototype.convertTo=function(D){var N=D.umod(this.m);return N===D?N.clone():N},tt.prototype.convertFrom=function(D){var N=D.clone();return N.red=null,N},s.mont=function(D){return new K(D)},a(K,tt),K.prototype.convertTo=function(D){return this.imod(D.ushln(this.shift))},K.prototype.convertFrom=function(D){var N=this.imod(D.mul(this.rinv));return N.red=null,N},K.prototype.imul=function(D,N){if(D.isZero()||N.isZero())return D.words[0]=0,D.length=1,D;var Z=D.imul(N),w=Z.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),C=Z.isub(w).iushrn(this.shift),k=C;return C.cmp(this.m)>=0?k=C.isub(this.m):C.cmpn(0)<0&&(k=C.iadd(this.m)),k._forceRed(this)},K.prototype.mul=function(D,N){if(D.isZero()||N.isZero())return new s(0)._forceRed(this);var Z=D.mul(N),w=Z.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),C=Z.isub(w).iushrn(this.shift),k=C;return C.cmp(this.m)>=0?k=C.isub(this.m):C.cmpn(0)<0&&(k=C.iadd(this.m)),k._forceRed(this)},K.prototype.invm=function(D){return this.imod(D._invmp(this.m).mul(this.r2))._forceRed(this)}})(t===void 0||t)},{buffer:188}],185:[function(e,t,n){"use strict";n.byteLength=function(d){var m=f(d),v=m[0],p=m[1];return 3*(v+p)/4-p},n.toByteArray=function(d){var m,v,p=f(d),_=p[0],y=p[1],x=new o(function(B,U,z){return 3*(U+z)/4-z}(0,_,y)),S=0,O=y>0?_-4:_;for(v=0;v<O;v+=4)m=r[d.charCodeAt(v)]<<18|r[d.charCodeAt(v+1)]<<12|r[d.charCodeAt(v+2)]<<6|r[d.charCodeAt(v+3)],x[S++]=m>>16&255,x[S++]=m>>8&255,x[S++]=255&m;return y===2&&(m=r[d.charCodeAt(v)]<<2|r[d.charCodeAt(v+1)]>>4,x[S++]=255&m),y===1&&(m=r[d.charCodeAt(v)]<<10|r[d.charCodeAt(v+1)]<<4|r[d.charCodeAt(v+2)]>>2,x[S++]=m>>8&255,x[S++]=255&m),x},n.fromByteArray=function(d){for(var m,v=d.length,p=v%3,_=[],y=0,x=v-p;y<x;y+=16383)_.push(c(d,y,y+16383>x?x:y+16383));return p===1?(m=d[v-1],_.push(i[m>>2]+i[m<<4&63]+"==")):p===2&&(m=(d[v-2]<<8)+d[v-1],_.push(i[m>>10]+i[m>>4&63]+i[m<<2&63]+"=")),_.join("")};for(var i=[],r=[],o=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)i[s]=a[s],r[a.charCodeAt(s)]=s;function f(d){var m=d.length;if(m%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=d.indexOf("=");return v===-1&&(v=m),[v,v===m?0:4-v%4]}function c(d,m,v){for(var p,_,y=[],x=m;x<v;x+=3)p=(d[x]<<16&16711680)+(d[x+1]<<8&65280)+(255&d[x+2]),y.push(i[(_=p)>>18&63]+i[_>>12&63]+i[_>>6&63]+i[63&_]);return y.join("")}r[45]=62,r[95]=63},{}],186:[function(e,t,n){"use strict";(function(i,r){function o(w,C){if(!w)throw new Error(C||"Assertion failed")}function a(w,C){w.super_=C;var k=function(){};k.prototype=C.prototype,w.prototype=new k,w.prototype.constructor=w}function s(w,C,k){if(s.isBN(w))return w;this.negative=0,this.words=null,this.length=0,this.red=null,w!==null&&(C!=="le"&&C!=="be"||(k=C,C=10),this._init(w||0,C||10,k||"be"))}var u;typeof i=="object"?i.exports=s:(void 0).BN=s,s.BN=s,s.wordSize=26;try{u=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:e("buffer").Buffer}catch{}function f(w,C){var k=w.charCodeAt(C);return k>=48&&k<=57?k-48:k>=65&&k<=70?k-55:k>=97&&k<=102?k-87:void o(!1,"Invalid character in "+w)}function c(w,C,k){var T=f(w,k);return k-1>=C&&(T|=f(w,k-1)<<4),T}function d(w,C,k,T){for(var R=0,F=0,H=Math.min(w.length,k),it=C;it<H;it++){var ot=w.charCodeAt(it)-48;R*=T,F=ot>=49?ot-49+10:ot>=17?ot-17+10:ot,o(ot>=0&&F<T,"Invalid character"),R+=F}return R}function m(w,C){w.words=C.words,w.length=C.length,w.negative=C.negative,w.red=C.red}if(s.isBN=function(w){return w instanceof s||w!==null&&typeof w=="object"&&w.constructor.wordSize===s.wordSize&&Array.isArray(w.words)},s.max=function(w,C){return w.cmp(C)>0?w:C},s.min=function(w,C){return w.cmp(C)<0?w:C},s.prototype._init=function(w,C,k){if(typeof w=="number")return this._initNumber(w,C,k);if(typeof w=="object")return this._initArray(w,C,k);C==="hex"&&(C=16),o(C===(0|C)&&C>=2&&C<=36);var T=0;(w=w.toString().replace(/\s+/g,""))[0]==="-"&&(T++,this.negative=1),T<w.length&&(C===16?this._parseHex(w,T,k):(this._parseBase(w,C,T),k==="le"&&this._initArray(this.toArray(),C,k)))},s.prototype._initNumber=function(w,C,k){w<0&&(this.negative=1,w=-w),w<67108864?(this.words=[67108863&w],this.length=1):w<4503599627370496?(this.words=[67108863&w,w/67108864&67108863],this.length=2):(o(w<9007199254740992),this.words=[67108863&w,w/67108864&67108863,1],this.length=3),k==="le"&&this._initArray(this.toArray(),C,k)},s.prototype._initArray=function(w,C,k){if(o(typeof w.length=="number"),w.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(w.length/3),this.words=new Array(this.length);for(var T=0;T<this.length;T++)this.words[T]=0;var R,F,H=0;if(k==="be")for(T=w.length-1,R=0;T>=0;T-=3)F=w[T]|w[T-1]<<8|w[T-2]<<16,this.words[R]|=F<<H&67108863,this.words[R+1]=F>>>26-H&67108863,(H+=24)>=26&&(H-=26,R++);else if(k==="le")for(T=0,R=0;T<w.length;T+=3)F=w[T]|w[T+1]<<8|w[T+2]<<16,this.words[R]|=F<<H&67108863,this.words[R+1]=F>>>26-H&67108863,(H+=24)>=26&&(H-=26,R++);return this._strip()},s.prototype._parseHex=function(w,C,k){this.length=Math.ceil((w.length-C)/6),this.words=new Array(this.length);for(var T=0;T<this.length;T++)this.words[T]=0;var R,F=0,H=0;if(k==="be")for(T=w.length-1;T>=C;T-=2)R=c(w,C,T)<<F,this.words[H]|=67108863&R,F>=18?(F-=18,H+=1,this.words[H]|=R>>>26):F+=8;else for(T=(w.length-C)%2==0?C+1:C;T<w.length;T+=2)R=c(w,C,T)<<F,this.words[H]|=67108863&R,F>=18?(F-=18,H+=1,this.words[H]|=R>>>26):F+=8;this._strip()},s.prototype._parseBase=function(w,C,k){this.words=[0],this.length=1;for(var T=0,R=1;R<=67108863;R*=C)T++;T--,R=R/C|0;for(var F=w.length-k,H=F%T,it=Math.min(F,F-H)+k,ot=0,dt=k;dt<it;dt+=T)ot=d(w,dt,dt+T,C),this.imuln(R),this.words[0]+ot<67108864?this.words[0]+=ot:this._iaddn(ot);if(H!==0){var $=1;for(ot=d(w,dt,w.length,C),dt=0;dt<H;dt++)$*=C;this.imuln($),this.words[0]+ot<67108864?this.words[0]+=ot:this._iaddn(ot)}this._strip()},s.prototype.copy=function(w){w.words=new Array(this.length);for(var C=0;C<this.length;C++)w.words[C]=this.words[C];w.length=this.length,w.negative=this.negative,w.red=this.red},s.prototype._move=function(w){m(w,this)},s.prototype.clone=function(){var w=new s(null);return this.copy(w),w},s.prototype._expand=function(w){for(;this.length<w;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=v}catch{s.prototype.inspect=v}else s.prototype.inspect=v;function v(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var p=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],_=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],y=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(w,C){var k;if(C=0|C||1,(w=w||10)===16||w==="hex"){k="";for(var T=0,R=0,F=0;F<this.length;F++){var H=this.words[F],it=(16777215&(H<<T|R)).toString(16);R=H>>>24-T&16777215,(T+=2)>=26&&(T-=26,F--),k=R!==0||F!==this.length-1?p[6-it.length]+it+k:it+k}for(R!==0&&(k=R.toString(16)+k);k.length%C!=0;)k="0"+k;return this.negative!==0&&(k="-"+k),k}if(w===(0|w)&&w>=2&&w<=36){var ot=_[w],dt=y[w];k="";var $=this.clone();for($.negative=0;!$.isZero();){var ct=$.modrn(dt).toString(w);k=($=$.idivn(dt)).isZero()?ct+k:p[ot-ct.length]+ct+k}for(this.isZero()&&(k="0"+k);k.length%C!=0;)k="0"+k;return this.negative!==0&&(k="-"+k),k}o(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var w=this.words[0];return this.length===2?w+=67108864*this.words[1]:this.length===3&&this.words[2]===1?w+=4503599627370496+67108864*this.words[1]:this.length>2&&o(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-w:w},s.prototype.toJSON=function(){return this.toString(16,2)},u&&(s.prototype.toBuffer=function(w,C){return this.toArrayLike(u,w,C)}),s.prototype.toArray=function(w,C){return this.toArrayLike(Array,w,C)};function x(w,C,k){k.negative=C.negative^w.negative;var T=w.length+C.length|0;k.length=T,T=T-1|0;var R=0|w.words[0],F=0|C.words[0],H=R*F,it=67108863&H,ot=H/67108864|0;k.words[0]=it;for(var dt=1;dt<T;dt++){for(var $=ot>>>26,ct=67108863&ot,W=Math.min(dt,C.length-1),V=Math.max(0,dt-w.length+1);V<=W;V++){var rt=dt-V|0;$+=(H=(R=0|w.words[rt])*(F=0|C.words[V])+ct)/67108864|0,ct=67108863&H}k.words[dt]=0|ct,ot=0|$}return ot!==0?k.words[dt]=0|ot:k.length--,k._strip()}s.prototype.toArrayLike=function(w,C,k){this._strip();var T=this.byteLength(),R=k||Math.max(1,T);o(T<=R,"byte array longer than desired length"),o(R>0,"Requested array length <= 0");var F=function(H,it){return H.allocUnsafe?H.allocUnsafe(it):new H(it)}(w,R);return this["_toArrayLike"+(C==="le"?"LE":"BE")](F,T),F},s.prototype._toArrayLikeLE=function(w,C){for(var k=0,T=0,R=0,F=0;R<this.length;R++){var H=this.words[R]<<F|T;w[k++]=255&H,k<w.length&&(w[k++]=H>>8&255),k<w.length&&(w[k++]=H>>16&255),F===6?(k<w.length&&(w[k++]=H>>24&255),T=0,F=0):(T=H>>>24,F+=2)}if(k<w.length)for(w[k++]=T;k<w.length;)w[k++]=0},s.prototype._toArrayLikeBE=function(w,C){for(var k=w.length-1,T=0,R=0,F=0;R<this.length;R++){var H=this.words[R]<<F|T;w[k--]=255&H,k>=0&&(w[k--]=H>>8&255),k>=0&&(w[k--]=H>>16&255),F===6?(k>=0&&(w[k--]=H>>24&255),T=0,F=0):(T=H>>>24,F+=2)}if(k>=0)for(w[k--]=T;k>=0;)w[k--]=0},Math.clz32?s.prototype._countBits=function(w){return 32-Math.clz32(w)}:s.prototype._countBits=function(w){var C=w,k=0;return C>=4096&&(k+=13,C>>>=13),C>=64&&(k+=7,C>>>=7),C>=8&&(k+=4,C>>>=4),C>=2&&(k+=2,C>>>=2),k+C},s.prototype._zeroBits=function(w){if(w===0)return 26;var C=w,k=0;return!(8191&C)&&(k+=13,C>>>=13),!(127&C)&&(k+=7,C>>>=7),!(15&C)&&(k+=4,C>>>=4),!(3&C)&&(k+=2,C>>>=2),!(1&C)&&k++,k},s.prototype.bitLength=function(){var w=this.words[this.length-1],C=this._countBits(w);return 26*(this.length-1)+C},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var w=0,C=0;C<this.length;C++){var k=this._zeroBits(this.words[C]);if(w+=k,k!==26)break}return w},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(w){return this.negative!==0?this.abs().inotn(w).iaddn(1):this.clone()},s.prototype.fromTwos=function(w){return this.testn(w-1)?this.notn(w).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(w){for(;this.length<w.length;)this.words[this.length++]=0;for(var C=0;C<w.length;C++)this.words[C]=this.words[C]|w.words[C];return this._strip()},s.prototype.ior=function(w){return o((this.negative|w.negative)==0),this.iuor(w)},s.prototype.or=function(w){return this.length>w.length?this.clone().ior(w):w.clone().ior(this)},s.prototype.uor=function(w){return this.length>w.length?this.clone().iuor(w):w.clone().iuor(this)},s.prototype.iuand=function(w){var C;C=this.length>w.length?w:this;for(var k=0;k<C.length;k++)this.words[k]=this.words[k]&w.words[k];return this.length=C.length,this._strip()},s.prototype.iand=function(w){return o((this.negative|w.negative)==0),this.iuand(w)},s.prototype.and=function(w){return this.length>w.length?this.clone().iand(w):w.clone().iand(this)},s.prototype.uand=function(w){return this.length>w.length?this.clone().iuand(w):w.clone().iuand(this)},s.prototype.iuxor=function(w){var C,k;this.length>w.length?(C=this,k=w):(C=w,k=this);for(var T=0;T<k.length;T++)this.words[T]=C.words[T]^k.words[T];if(this!==C)for(;T<C.length;T++)this.words[T]=C.words[T];return this.length=C.length,this._strip()},s.prototype.ixor=function(w){return o((this.negative|w.negative)==0),this.iuxor(w)},s.prototype.xor=function(w){return this.length>w.length?this.clone().ixor(w):w.clone().ixor(this)},s.prototype.uxor=function(w){return this.length>w.length?this.clone().iuxor(w):w.clone().iuxor(this)},s.prototype.inotn=function(w){o(typeof w=="number"&&w>=0);var C=0|Math.ceil(w/26),k=w%26;this._expand(C),k>0&&C--;for(var T=0;T<C;T++)this.words[T]=67108863&~this.words[T];return k>0&&(this.words[T]=~this.words[T]&67108863>>26-k),this._strip()},s.prototype.notn=function(w){return this.clone().inotn(w)},s.prototype.setn=function(w,C){o(typeof w=="number"&&w>=0);var k=w/26|0,T=w%26;return this._expand(k+1),this.words[k]=C?this.words[k]|1<<T:this.words[k]&~(1<<T),this._strip()},s.prototype.iadd=function(w){var C,k,T;if(this.negative!==0&&w.negative===0)return this.negative=0,C=this.isub(w),this.negative^=1,this._normSign();if(this.negative===0&&w.negative!==0)return w.negative=0,C=this.isub(w),w.negative=1,C._normSign();this.length>w.length?(k=this,T=w):(k=w,T=this);for(var R=0,F=0;F<T.length;F++)C=(0|k.words[F])+(0|T.words[F])+R,this.words[F]=67108863&C,R=C>>>26;for(;R!==0&&F<k.length;F++)C=(0|k.words[F])+R,this.words[F]=67108863&C,R=C>>>26;if(this.length=k.length,R!==0)this.words[this.length]=R,this.length++;else if(k!==this)for(;F<k.length;F++)this.words[F]=k.words[F];return this},s.prototype.add=function(w){var C;return w.negative!==0&&this.negative===0?(w.negative=0,C=this.sub(w),w.negative^=1,C):w.negative===0&&this.negative!==0?(this.negative=0,C=w.sub(this),this.negative=1,C):this.length>w.length?this.clone().iadd(w):w.clone().iadd(this)},s.prototype.isub=function(w){if(w.negative!==0){w.negative=0;var C=this.iadd(w);return w.negative=1,C._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(w),this.negative=1,this._normSign();var k,T,R=this.cmp(w);if(R===0)return this.negative=0,this.length=1,this.words[0]=0,this;R>0?(k=this,T=w):(k=w,T=this);for(var F=0,H=0;H<T.length;H++)F=(C=(0|k.words[H])-(0|T.words[H])+F)>>26,this.words[H]=67108863&C;for(;F!==0&&H<k.length;H++)F=(C=(0|k.words[H])+F)>>26,this.words[H]=67108863&C;if(F===0&&H<k.length&&k!==this)for(;H<k.length;H++)this.words[H]=k.words[H];return this.length=Math.max(this.length,H),k!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(w){return this.clone().isub(w)};var S=function(w,C,k){var T,R,F,H=w.words,it=C.words,ot=k.words,dt=0,$=0|H[0],ct=8191&$,W=$>>>13,V=0|H[1],rt=8191&V,mt=V>>>13,wt=0|H[2],_t=8191&wt,Ct=wt>>>13,Ft=0|H[3],It=8191&Ft,vt=Ft>>>13,kt=0|H[4],gt=8191&kt,ut=kt>>>13,Q=0|H[5],Y=8191&Q,et=Q>>>13,lt=0|H[6],pt=8191&lt,bt=lt>>>13,Et=0|H[7],Ot=8191&Et,zt=Et>>>13,Gt=0|H[8],Jt=8191&Gt,Kt=Gt>>>13,ie=0|H[9],Xt=8191&ie,Ut=ie>>>13,_e=0|it[0],le=8191&_e,ye=_e>>>13,Ze=0|it[1],ce=8191&Ze,ke=Ze>>>13,He=0|it[2],$t=8191&He,Te=He>>>13,bi=0|it[3],ue=8191&bi,Fe=bi>>>13,ai=0|it[4],Le=8191&ai,Oe=ai>>>13,Qi=0|it[5],We=8191&Qi,At=Qi>>>13,qt=0|it[6],jt=8191&qt,ae=qt>>>13,Qe=0|it[7],se=8191&Qe,ve=Qe>>>13,$e=0|it[8],Ae=8191&$e,fe=$e>>>13,Ye=0|it[9],Ue=8191&Ye,ii=Ye>>>13;k.negative=w.negative^C.negative,k.length=19;var Ke=(dt+(T=Math.imul(ct,le))|0)+((8191&(R=(R=Math.imul(ct,ye))+Math.imul(W,le)|0))<<13)|0;dt=((F=Math.imul(W,ye))+(R>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,T=Math.imul(rt,le),R=(R=Math.imul(rt,ye))+Math.imul(mt,le)|0,F=Math.imul(mt,ye);var fr=(dt+(T=T+Math.imul(ct,ce)|0)|0)+((8191&(R=(R=R+Math.imul(ct,ke)|0)+Math.imul(W,ce)|0))<<13)|0;dt=((F=F+Math.imul(W,ke)|0)+(R>>>13)|0)+(fr>>>26)|0,fr&=67108863,T=Math.imul(_t,le),R=(R=Math.imul(_t,ye))+Math.imul(Ct,le)|0,F=Math.imul(Ct,ye),T=T+Math.imul(rt,ce)|0,R=(R=R+Math.imul(rt,ke)|0)+Math.imul(mt,ce)|0,F=F+Math.imul(mt,ke)|0;var Je=(dt+(T=T+Math.imul(ct,$t)|0)|0)+((8191&(R=(R=R+Math.imul(ct,Te)|0)+Math.imul(W,$t)|0))<<13)|0;dt=((F=F+Math.imul(W,Te)|0)+(R>>>13)|0)+(Je>>>26)|0,Je&=67108863,T=Math.imul(It,le),R=(R=Math.imul(It,ye))+Math.imul(vt,le)|0,F=Math.imul(vt,ye),T=T+Math.imul(_t,ce)|0,R=(R=R+Math.imul(_t,ke)|0)+Math.imul(Ct,ce)|0,F=F+Math.imul(Ct,ke)|0,T=T+Math.imul(rt,$t)|0,R=(R=R+Math.imul(rt,Te)|0)+Math.imul(mt,$t)|0,F=F+Math.imul(mt,Te)|0;var oi=(dt+(T=T+Math.imul(ct,ue)|0)|0)+((8191&(R=(R=R+Math.imul(ct,Fe)|0)+Math.imul(W,ue)|0))<<13)|0;dt=((F=F+Math.imul(W,Fe)|0)+(R>>>13)|0)+(oi>>>26)|0,oi&=67108863,T=Math.imul(gt,le),R=(R=Math.imul(gt,ye))+Math.imul(ut,le)|0,F=Math.imul(ut,ye),T=T+Math.imul(It,ce)|0,R=(R=R+Math.imul(It,ke)|0)+Math.imul(vt,ce)|0,F=F+Math.imul(vt,ke)|0,T=T+Math.imul(_t,$t)|0,R=(R=R+Math.imul(_t,Te)|0)+Math.imul(Ct,$t)|0,F=F+Math.imul(Ct,Te)|0,T=T+Math.imul(rt,ue)|0,R=(R=R+Math.imul(rt,Fe)|0)+Math.imul(mt,ue)|0,F=F+Math.imul(mt,Fe)|0;var lr=(dt+(T=T+Math.imul(ct,Le)|0)|0)+((8191&(R=(R=R+Math.imul(ct,Oe)|0)+Math.imul(W,Le)|0))<<13)|0;dt=((F=F+Math.imul(W,Oe)|0)+(R>>>13)|0)+(lr>>>26)|0,lr&=67108863,T=Math.imul(Y,le),R=(R=Math.imul(Y,ye))+Math.imul(et,le)|0,F=Math.imul(et,ye),T=T+Math.imul(gt,ce)|0,R=(R=R+Math.imul(gt,ke)|0)+Math.imul(ut,ce)|0,F=F+Math.imul(ut,ke)|0,T=T+Math.imul(It,$t)|0,R=(R=R+Math.imul(It,Te)|0)+Math.imul(vt,$t)|0,F=F+Math.imul(vt,Te)|0,T=T+Math.imul(_t,ue)|0,R=(R=R+Math.imul(_t,Fe)|0)+Math.imul(Ct,ue)|0,F=F+Math.imul(Ct,Fe)|0,T=T+Math.imul(rt,Le)|0,R=(R=R+Math.imul(rt,Oe)|0)+Math.imul(mt,Le)|0,F=F+Math.imul(mt,Oe)|0;var Mi=(dt+(T=T+Math.imul(ct,We)|0)|0)+((8191&(R=(R=R+Math.imul(ct,At)|0)+Math.imul(W,We)|0))<<13)|0;dt=((F=F+Math.imul(W,At)|0)+(R>>>13)|0)+(Mi>>>26)|0,Mi&=67108863,T=Math.imul(pt,le),R=(R=Math.imul(pt,ye))+Math.imul(bt,le)|0,F=Math.imul(bt,ye),T=T+Math.imul(Y,ce)|0,R=(R=R+Math.imul(Y,ke)|0)+Math.imul(et,ce)|0,F=F+Math.imul(et,ke)|0,T=T+Math.imul(gt,$t)|0,R=(R=R+Math.imul(gt,Te)|0)+Math.imul(ut,$t)|0,F=F+Math.imul(ut,Te)|0,T=T+Math.imul(It,ue)|0,R=(R=R+Math.imul(It,Fe)|0)+Math.imul(vt,ue)|0,F=F+Math.imul(vt,Fe)|0,T=T+Math.imul(_t,Le)|0,R=(R=R+Math.imul(_t,Oe)|0)+Math.imul(Ct,Le)|0,F=F+Math.imul(Ct,Oe)|0,T=T+Math.imul(rt,We)|0,R=(R=R+Math.imul(rt,At)|0)+Math.imul(mt,We)|0,F=F+Math.imul(mt,At)|0;var Tt=(dt+(T=T+Math.imul(ct,jt)|0)|0)+((8191&(R=(R=R+Math.imul(ct,ae)|0)+Math.imul(W,jt)|0))<<13)|0;dt=((F=F+Math.imul(W,ae)|0)+(R>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,T=Math.imul(Ot,le),R=(R=Math.imul(Ot,ye))+Math.imul(zt,le)|0,F=Math.imul(zt,ye),T=T+Math.imul(pt,ce)|0,R=(R=R+Math.imul(pt,ke)|0)+Math.imul(bt,ce)|0,F=F+Math.imul(bt,ke)|0,T=T+Math.imul(Y,$t)|0,R=(R=R+Math.imul(Y,Te)|0)+Math.imul(et,$t)|0,F=F+Math.imul(et,Te)|0,T=T+Math.imul(gt,ue)|0,R=(R=R+Math.imul(gt,Fe)|0)+Math.imul(ut,ue)|0,F=F+Math.imul(ut,Fe)|0,T=T+Math.imul(It,Le)|0,R=(R=R+Math.imul(It,Oe)|0)+Math.imul(vt,Le)|0,F=F+Math.imul(vt,Oe)|0,T=T+Math.imul(_t,We)|0,R=(R=R+Math.imul(_t,At)|0)+Math.imul(Ct,We)|0,F=F+Math.imul(Ct,At)|0,T=T+Math.imul(rt,jt)|0,R=(R=R+Math.imul(rt,ae)|0)+Math.imul(mt,jt)|0,F=F+Math.imul(mt,ae)|0;var Ht=(dt+(T=T+Math.imul(ct,se)|0)|0)+((8191&(R=(R=R+Math.imul(ct,ve)|0)+Math.imul(W,se)|0))<<13)|0;dt=((F=F+Math.imul(W,ve)|0)+(R>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,T=Math.imul(Jt,le),R=(R=Math.imul(Jt,ye))+Math.imul(Kt,le)|0,F=Math.imul(Kt,ye),T=T+Math.imul(Ot,ce)|0,R=(R=R+Math.imul(Ot,ke)|0)+Math.imul(zt,ce)|0,F=F+Math.imul(zt,ke)|0,T=T+Math.imul(pt,$t)|0,R=(R=R+Math.imul(pt,Te)|0)+Math.imul(bt,$t)|0,F=F+Math.imul(bt,Te)|0,T=T+Math.imul(Y,ue)|0,R=(R=R+Math.imul(Y,Fe)|0)+Math.imul(et,ue)|0,F=F+Math.imul(et,Fe)|0,T=T+Math.imul(gt,Le)|0,R=(R=R+Math.imul(gt,Oe)|0)+Math.imul(ut,Le)|0,F=F+Math.imul(ut,Oe)|0,T=T+Math.imul(It,We)|0,R=(R=R+Math.imul(It,At)|0)+Math.imul(vt,We)|0,F=F+Math.imul(vt,At)|0,T=T+Math.imul(_t,jt)|0,R=(R=R+Math.imul(_t,ae)|0)+Math.imul(Ct,jt)|0,F=F+Math.imul(Ct,ae)|0,T=T+Math.imul(rt,se)|0,R=(R=R+Math.imul(rt,ve)|0)+Math.imul(mt,se)|0,F=F+Math.imul(mt,ve)|0;var re=(dt+(T=T+Math.imul(ct,Ae)|0)|0)+((8191&(R=(R=R+Math.imul(ct,fe)|0)+Math.imul(W,Ae)|0))<<13)|0;dt=((F=F+Math.imul(W,fe)|0)+(R>>>13)|0)+(re>>>26)|0,re&=67108863,T=Math.imul(Xt,le),R=(R=Math.imul(Xt,ye))+Math.imul(Ut,le)|0,F=Math.imul(Ut,ye),T=T+Math.imul(Jt,ce)|0,R=(R=R+Math.imul(Jt,ke)|0)+Math.imul(Kt,ce)|0,F=F+Math.imul(Kt,ke)|0,T=T+Math.imul(Ot,$t)|0,R=(R=R+Math.imul(Ot,Te)|0)+Math.imul(zt,$t)|0,F=F+Math.imul(zt,Te)|0,T=T+Math.imul(pt,ue)|0,R=(R=R+Math.imul(pt,Fe)|0)+Math.imul(bt,ue)|0,F=F+Math.imul(bt,Fe)|0,T=T+Math.imul(Y,Le)|0,R=(R=R+Math.imul(Y,Oe)|0)+Math.imul(et,Le)|0,F=F+Math.imul(et,Oe)|0,T=T+Math.imul(gt,We)|0,R=(R=R+Math.imul(gt,At)|0)+Math.imul(ut,We)|0,F=F+Math.imul(ut,At)|0,T=T+Math.imul(It,jt)|0,R=(R=R+Math.imul(It,ae)|0)+Math.imul(vt,jt)|0,F=F+Math.imul(vt,ae)|0,T=T+Math.imul(_t,se)|0,R=(R=R+Math.imul(_t,ve)|0)+Math.imul(Ct,se)|0,F=F+Math.imul(Ct,ve)|0,T=T+Math.imul(rt,Ae)|0,R=(R=R+Math.imul(rt,fe)|0)+Math.imul(mt,Ae)|0,F=F+Math.imul(mt,fe)|0;var Qt=(dt+(T=T+Math.imul(ct,Ue)|0)|0)+((8191&(R=(R=R+Math.imul(ct,ii)|0)+Math.imul(W,Ue)|0))<<13)|0;dt=((F=F+Math.imul(W,ii)|0)+(R>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,T=Math.imul(Xt,ce),R=(R=Math.imul(Xt,ke))+Math.imul(Ut,ce)|0,F=Math.imul(Ut,ke),T=T+Math.imul(Jt,$t)|0,R=(R=R+Math.imul(Jt,Te)|0)+Math.imul(Kt,$t)|0,F=F+Math.imul(Kt,Te)|0,T=T+Math.imul(Ot,ue)|0,R=(R=R+Math.imul(Ot,Fe)|0)+Math.imul(zt,ue)|0,F=F+Math.imul(zt,Fe)|0,T=T+Math.imul(pt,Le)|0,R=(R=R+Math.imul(pt,Oe)|0)+Math.imul(bt,Le)|0,F=F+Math.imul(bt,Oe)|0,T=T+Math.imul(Y,We)|0,R=(R=R+Math.imul(Y,At)|0)+Math.imul(et,We)|0,F=F+Math.imul(et,At)|0,T=T+Math.imul(gt,jt)|0,R=(R=R+Math.imul(gt,ae)|0)+Math.imul(ut,jt)|0,F=F+Math.imul(ut,ae)|0,T=T+Math.imul(It,se)|0,R=(R=R+Math.imul(It,ve)|0)+Math.imul(vt,se)|0,F=F+Math.imul(vt,ve)|0,T=T+Math.imul(_t,Ae)|0,R=(R=R+Math.imul(_t,fe)|0)+Math.imul(Ct,Ae)|0,F=F+Math.imul(Ct,fe)|0;var he=(dt+(T=T+Math.imul(rt,Ue)|0)|0)+((8191&(R=(R=R+Math.imul(rt,ii)|0)+Math.imul(mt,Ue)|0))<<13)|0;dt=((F=F+Math.imul(mt,ii)|0)+(R>>>13)|0)+(he>>>26)|0,he&=67108863,T=Math.imul(Xt,$t),R=(R=Math.imul(Xt,Te))+Math.imul(Ut,$t)|0,F=Math.imul(Ut,Te),T=T+Math.imul(Jt,ue)|0,R=(R=R+Math.imul(Jt,Fe)|0)+Math.imul(Kt,ue)|0,F=F+Math.imul(Kt,Fe)|0,T=T+Math.imul(Ot,Le)|0,R=(R=R+Math.imul(Ot,Oe)|0)+Math.imul(zt,Le)|0,F=F+Math.imul(zt,Oe)|0,T=T+Math.imul(pt,We)|0,R=(R=R+Math.imul(pt,At)|0)+Math.imul(bt,We)|0,F=F+Math.imul(bt,At)|0,T=T+Math.imul(Y,jt)|0,R=(R=R+Math.imul(Y,ae)|0)+Math.imul(et,jt)|0,F=F+Math.imul(et,ae)|0,T=T+Math.imul(gt,se)|0,R=(R=R+Math.imul(gt,ve)|0)+Math.imul(ut,se)|0,F=F+Math.imul(ut,ve)|0,T=T+Math.imul(It,Ae)|0,R=(R=R+Math.imul(It,fe)|0)+Math.imul(vt,Ae)|0,F=F+Math.imul(vt,fe)|0;var Ee=(dt+(T=T+Math.imul(_t,Ue)|0)|0)+((8191&(R=(R=R+Math.imul(_t,ii)|0)+Math.imul(Ct,Ue)|0))<<13)|0;dt=((F=F+Math.imul(Ct,ii)|0)+(R>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,T=Math.imul(Xt,ue),R=(R=Math.imul(Xt,Fe))+Math.imul(Ut,ue)|0,F=Math.imul(Ut,Fe),T=T+Math.imul(Jt,Le)|0,R=(R=R+Math.imul(Jt,Oe)|0)+Math.imul(Kt,Le)|0,F=F+Math.imul(Kt,Oe)|0,T=T+Math.imul(Ot,We)|0,R=(R=R+Math.imul(Ot,At)|0)+Math.imul(zt,We)|0,F=F+Math.imul(zt,At)|0,T=T+Math.imul(pt,jt)|0,R=(R=R+Math.imul(pt,ae)|0)+Math.imul(bt,jt)|0,F=F+Math.imul(bt,ae)|0,T=T+Math.imul(Y,se)|0,R=(R=R+Math.imul(Y,ve)|0)+Math.imul(et,se)|0,F=F+Math.imul(et,ve)|0,T=T+Math.imul(gt,Ae)|0,R=(R=R+Math.imul(gt,fe)|0)+Math.imul(ut,Ae)|0,F=F+Math.imul(ut,fe)|0;var Ie=(dt+(T=T+Math.imul(It,Ue)|0)|0)+((8191&(R=(R=R+Math.imul(It,ii)|0)+Math.imul(vt,Ue)|0))<<13)|0;dt=((F=F+Math.imul(vt,ii)|0)+(R>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,T=Math.imul(Xt,Le),R=(R=Math.imul(Xt,Oe))+Math.imul(Ut,Le)|0,F=Math.imul(Ut,Oe),T=T+Math.imul(Jt,We)|0,R=(R=R+Math.imul(Jt,At)|0)+Math.imul(Kt,We)|0,F=F+Math.imul(Kt,At)|0,T=T+Math.imul(Ot,jt)|0,R=(R=R+Math.imul(Ot,ae)|0)+Math.imul(zt,jt)|0,F=F+Math.imul(zt,ae)|0,T=T+Math.imul(pt,se)|0,R=(R=R+Math.imul(pt,ve)|0)+Math.imul(bt,se)|0,F=F+Math.imul(bt,ve)|0,T=T+Math.imul(Y,Ae)|0,R=(R=R+Math.imul(Y,fe)|0)+Math.imul(et,Ae)|0,F=F+Math.imul(et,fe)|0;var ti=(dt+(T=T+Math.imul(gt,Ue)|0)|0)+((8191&(R=(R=R+Math.imul(gt,ii)|0)+Math.imul(ut,Ue)|0))<<13)|0;dt=((F=F+Math.imul(ut,ii)|0)+(R>>>13)|0)+(ti>>>26)|0,ti&=67108863,T=Math.imul(Xt,We),R=(R=Math.imul(Xt,At))+Math.imul(Ut,We)|0,F=Math.imul(Ut,At),T=T+Math.imul(Jt,jt)|0,R=(R=R+Math.imul(Jt,ae)|0)+Math.imul(Kt,jt)|0,F=F+Math.imul(Kt,ae)|0,T=T+Math.imul(Ot,se)|0,R=(R=R+Math.imul(Ot,ve)|0)+Math.imul(zt,se)|0,F=F+Math.imul(zt,ve)|0,T=T+Math.imul(pt,Ae)|0,R=(R=R+Math.imul(pt,fe)|0)+Math.imul(bt,Ae)|0,F=F+Math.imul(bt,fe)|0;var Ge=(dt+(T=T+Math.imul(Y,Ue)|0)|0)+((8191&(R=(R=R+Math.imul(Y,ii)|0)+Math.imul(et,Ue)|0))<<13)|0;dt=((F=F+Math.imul(et,ii)|0)+(R>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,T=Math.imul(Xt,jt),R=(R=Math.imul(Xt,ae))+Math.imul(Ut,jt)|0,F=Math.imul(Ut,ae),T=T+Math.imul(Jt,se)|0,R=(R=R+Math.imul(Jt,ve)|0)+Math.imul(Kt,se)|0,F=F+Math.imul(Kt,ve)|0,T=T+Math.imul(Ot,Ae)|0,R=(R=R+Math.imul(Ot,fe)|0)+Math.imul(zt,Ae)|0,F=F+Math.imul(zt,fe)|0;var we=(dt+(T=T+Math.imul(pt,Ue)|0)|0)+((8191&(R=(R=R+Math.imul(pt,ii)|0)+Math.imul(bt,Ue)|0))<<13)|0;dt=((F=F+Math.imul(bt,ii)|0)+(R>>>13)|0)+(we>>>26)|0,we&=67108863,T=Math.imul(Xt,se),R=(R=Math.imul(Xt,ve))+Math.imul(Ut,se)|0,F=Math.imul(Ut,ve),T=T+Math.imul(Jt,Ae)|0,R=(R=R+Math.imul(Jt,fe)|0)+Math.imul(Kt,Ae)|0,F=F+Math.imul(Kt,fe)|0;var pe=(dt+(T=T+Math.imul(Ot,Ue)|0)|0)+((8191&(R=(R=R+Math.imul(Ot,ii)|0)+Math.imul(zt,Ue)|0))<<13)|0;dt=((F=F+Math.imul(zt,ii)|0)+(R>>>13)|0)+(pe>>>26)|0,pe&=67108863,T=Math.imul(Xt,Ae),R=(R=Math.imul(Xt,fe))+Math.imul(Ut,Ae)|0,F=Math.imul(Ut,fe);var yi=(dt+(T=T+Math.imul(Jt,Ue)|0)|0)+((8191&(R=(R=R+Math.imul(Jt,ii)|0)+Math.imul(Kt,Ue)|0))<<13)|0;dt=((F=F+Math.imul(Kt,ii)|0)+(R>>>13)|0)+(yi>>>26)|0,yi&=67108863;var ri=(dt+(T=Math.imul(Xt,Ue))|0)+((8191&(R=(R=Math.imul(Xt,ii))+Math.imul(Ut,Ue)|0))<<13)|0;return dt=((F=Math.imul(Ut,ii))+(R>>>13)|0)+(ri>>>26)|0,ri&=67108863,ot[0]=Ke,ot[1]=fr,ot[2]=Je,ot[3]=oi,ot[4]=lr,ot[5]=Mi,ot[6]=Tt,ot[7]=Ht,ot[8]=re,ot[9]=Qt,ot[10]=he,ot[11]=Ee,ot[12]=Ie,ot[13]=ti,ot[14]=Ge,ot[15]=we,ot[16]=pe,ot[17]=yi,ot[18]=ri,dt!==0&&(ot[19]=dt,k.length++),k};function O(w,C,k){k.negative=C.negative^w.negative,k.length=w.length+C.length;for(var T=0,R=0,F=0;F<k.length-1;F++){var H=R;R=0;for(var it=67108863&T,ot=Math.min(F,C.length-1),dt=Math.max(0,F-w.length+1);dt<=ot;dt++){var $=F-dt,ct=(0|w.words[$])*(0|C.words[dt]),W=67108863&ct;it=67108863&(W=W+it|0),R+=(H=(H=H+(ct/67108864|0)|0)+(W>>>26)|0)>>>26,H&=67108863}k.words[F]=it,T=H,H=R}return T!==0?k.words[F]=T:k.length--,k._strip()}function B(w,C,k){return O(w,C,k)}function U(w,C){this.x=w,this.y=C}Math.imul||(S=x),s.prototype.mulTo=function(w,C){var k=this.length+w.length;return this.length===10&&w.length===10?S(this,w,C):k<63?x(this,w,C):k<1024?O(this,w,C):B(this,w,C)},U.prototype.makeRBT=function(w){for(var C=new Array(w),k=s.prototype._countBits(w)-1,T=0;T<w;T++)C[T]=this.revBin(T,k,w);return C},U.prototype.revBin=function(w,C,k){if(w===0||w===k-1)return w;for(var T=0,R=0;R<C;R++)T|=(1&w)<<C-R-1,w>>=1;return T},U.prototype.permute=function(w,C,k,T,R,F){for(var H=0;H<F;H++)T[H]=C[w[H]],R[H]=k[w[H]]},U.prototype.transform=function(w,C,k,T,R,F){this.permute(F,w,C,k,T,R);for(var H=1;H<R;H<<=1)for(var it=H<<1,ot=Math.cos(2*Math.PI/it),dt=Math.sin(2*Math.PI/it),$=0;$<R;$+=it)for(var ct=ot,W=dt,V=0;V<H;V++){var rt=k[$+V],mt=T[$+V],wt=k[$+V+H],_t=T[$+V+H],Ct=ct*wt-W*_t;_t=ct*_t+W*wt,wt=Ct,k[$+V]=rt+wt,T[$+V]=mt+_t,k[$+V+H]=rt-wt,T[$+V+H]=mt-_t,V!==it&&(Ct=ot*ct-dt*W,W=ot*W+dt*ct,ct=Ct)}},U.prototype.guessLen13b=function(w,C){var k=1|Math.max(C,w),T=1&k,R=0;for(k=k/2|0;k;k>>>=1)R++;return 1<<R+1+T},U.prototype.conjugate=function(w,C,k){if(!(k<=1))for(var T=0;T<k/2;T++){var R=w[T];w[T]=w[k-T-1],w[k-T-1]=R,R=C[T],C[T]=-C[k-T-1],C[k-T-1]=-R}},U.prototype.normalize13b=function(w,C){for(var k=0,T=0;T<C/2;T++){var R=8192*Math.round(w[2*T+1]/C)+Math.round(w[2*T]/C)+k;w[T]=67108863&R,k=R<67108864?0:R/67108864|0}return w},U.prototype.convert13b=function(w,C,k,T){for(var R=0,F=0;F<C;F++)R+=0|w[F],k[2*F]=8191&R,R>>>=13,k[2*F+1]=8191&R,R>>>=13;for(F=2*C;F<T;++F)k[F]=0;o(R===0),o((-8192&R)==0)},U.prototype.stub=function(w){for(var C=new Array(w),k=0;k<w;k++)C[k]=0;return C},U.prototype.mulp=function(w,C,k){var T=2*this.guessLen13b(w.length,C.length),R=this.makeRBT(T),F=this.stub(T),H=new Array(T),it=new Array(T),ot=new Array(T),dt=new Array(T),$=new Array(T),ct=new Array(T),W=k.words;W.length=T,this.convert13b(w.words,w.length,H,T),this.convert13b(C.words,C.length,dt,T),this.transform(H,F,it,ot,T,R),this.transform(dt,F,$,ct,T,R);for(var V=0;V<T;V++){var rt=it[V]*$[V]-ot[V]*ct[V];ot[V]=it[V]*ct[V]+ot[V]*$[V],it[V]=rt}return this.conjugate(it,ot,T),this.transform(it,ot,W,F,T,R),this.conjugate(W,F,T),this.normalize13b(W,T),k.negative=w.negative^C.negative,k.length=w.length+C.length,k._strip()},s.prototype.mul=function(w){var C=new s(null);return C.words=new Array(this.length+w.length),this.mulTo(w,C)},s.prototype.mulf=function(w){var C=new s(null);return C.words=new Array(this.length+w.length),B(this,w,C)},s.prototype.imul=function(w){return this.clone().mulTo(w,this)},s.prototype.imuln=function(w){var C=w<0;C&&(w=-w),o(typeof w=="number"),o(w<67108864);for(var k=0,T=0;T<this.length;T++){var R=(0|this.words[T])*w,F=(67108863&R)+(67108863&k);k>>=26,k+=R/67108864|0,k+=F>>>26,this.words[T]=67108863&F}return k!==0&&(this.words[T]=k,this.length++),C?this.ineg():this},s.prototype.muln=function(w){return this.clone().imuln(w)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(w){var C=function(F){for(var H=new Array(F.bitLength()),it=0;it<H.length;it++){var ot=it/26|0,dt=it%26;H[it]=F.words[ot]>>>dt&1}return H}(w);if(C.length===0)return new s(1);for(var k=this,T=0;T<C.length&&C[T]===0;T++,k=k.sqr());if(++T<C.length)for(var R=k.sqr();T<C.length;T++,R=R.sqr())C[T]!==0&&(k=k.mul(R));return k},s.prototype.iushln=function(w){o(typeof w=="number"&&w>=0);var C,k=w%26,T=(w-k)/26,R=67108863>>>26-k<<26-k;if(k!==0){var F=0;for(C=0;C<this.length;C++){var H=this.words[C]&R,it=(0|this.words[C])-H<<k;this.words[C]=it|F,F=H>>>26-k}F&&(this.words[C]=F,this.length++)}if(T!==0){for(C=this.length-1;C>=0;C--)this.words[C+T]=this.words[C];for(C=0;C<T;C++)this.words[C]=0;this.length+=T}return this._strip()},s.prototype.ishln=function(w){return o(this.negative===0),this.iushln(w)},s.prototype.iushrn=function(w,C,k){var T;o(typeof w=="number"&&w>=0),T=C?(C-C%26)/26:0;var R=w%26,F=Math.min((w-R)/26,this.length),H=67108863^67108863>>>R<<R,it=k;if(T-=F,T=Math.max(0,T),it){for(var ot=0;ot<F;ot++)it.words[ot]=this.words[ot];it.length=F}if(F!==0)if(this.length>F)for(this.length-=F,ot=0;ot<this.length;ot++)this.words[ot]=this.words[ot+F];else this.words[0]=0,this.length=1;var dt=0;for(ot=this.length-1;ot>=0&&(dt!==0||ot>=T);ot--){var $=0|this.words[ot];this.words[ot]=dt<<26-R|$>>>R,dt=$&H}return it&&dt!==0&&(it.words[it.length++]=dt),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(w,C,k){return o(this.negative===0),this.iushrn(w,C,k)},s.prototype.shln=function(w){return this.clone().ishln(w)},s.prototype.ushln=function(w){return this.clone().iushln(w)},s.prototype.shrn=function(w){return this.clone().ishrn(w)},s.prototype.ushrn=function(w){return this.clone().iushrn(w)},s.prototype.testn=function(w){o(typeof w=="number"&&w>=0);var C=w%26,k=(w-C)/26,T=1<<C;return!(this.length<=k)&&!!(this.words[k]&T)},s.prototype.imaskn=function(w){o(typeof w=="number"&&w>=0);var C=w%26,k=(w-C)/26;if(o(this.negative===0,"imaskn works only with positive numbers"),this.length<=k)return this;if(C!==0&&k++,this.length=Math.min(k,this.length),C!==0){var T=67108863^67108863>>>C<<C;this.words[this.length-1]&=T}return this._strip()},s.prototype.maskn=function(w){return this.clone().imaskn(w)},s.prototype.iaddn=function(w){return o(typeof w=="number"),o(w<67108864),w<0?this.isubn(-w):this.negative!==0?this.length===1&&(0|this.words[0])<=w?(this.words[0]=w-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(w),this.negative=1,this):this._iaddn(w)},s.prototype._iaddn=function(w){this.words[0]+=w;for(var C=0;C<this.length&&this.words[C]>=67108864;C++)this.words[C]-=67108864,C===this.length-1?this.words[C+1]=1:this.words[C+1]++;return this.length=Math.max(this.length,C+1),this},s.prototype.isubn=function(w){if(o(typeof w=="number"),o(w<67108864),w<0)return this.iaddn(-w);if(this.negative!==0)return this.negative=0,this.iaddn(w),this.negative=1,this;if(this.words[0]-=w,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var C=0;C<this.length&&this.words[C]<0;C++)this.words[C]+=67108864,this.words[C+1]-=1;return this._strip()},s.prototype.addn=function(w){return this.clone().iaddn(w)},s.prototype.subn=function(w){return this.clone().isubn(w)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(w,C,k){var T,R,F=w.length+k;this._expand(F);var H=0;for(T=0;T<w.length;T++){R=(0|this.words[T+k])+H;var it=(0|w.words[T])*C;H=((R-=67108863&it)>>26)-(it/67108864|0),this.words[T+k]=67108863&R}for(;T<this.length-k;T++)H=(R=(0|this.words[T+k])+H)>>26,this.words[T+k]=67108863&R;if(H===0)return this._strip();for(o(H===-1),H=0,T=0;T<this.length;T++)H=(R=-(0|this.words[T])+H)>>26,this.words[T]=67108863&R;return this.negative=1,this._strip()},s.prototype._wordDiv=function(w,C){var k=(this.length,w.length),T=this.clone(),R=w,F=0|R.words[R.length-1];(k=26-this._countBits(F))!==0&&(R=R.ushln(k),T.iushln(k),F=0|R.words[R.length-1]);var H,it=T.length-R.length;if(C!=="mod"){(H=new s(null)).length=it+1,H.words=new Array(H.length);for(var ot=0;ot<H.length;ot++)H.words[ot]=0}var dt=T.clone()._ishlnsubmul(R,1,it);dt.negative===0&&(T=dt,H&&(H.words[it]=1));for(var $=it-1;$>=0;$--){var ct=67108864*(0|T.words[R.length+$])+(0|T.words[R.length+$-1]);for(ct=Math.min(ct/F|0,67108863),T._ishlnsubmul(R,ct,$);T.negative!==0;)ct--,T.negative=0,T._ishlnsubmul(R,1,$),T.isZero()||(T.negative^=1);H&&(H.words[$]=ct)}return H&&H._strip(),T._strip(),C!=="div"&&k!==0&&T.iushrn(k),{div:H||null,mod:T}},s.prototype.divmod=function(w,C,k){return o(!w.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:this.negative!==0&&w.negative===0?(F=this.neg().divmod(w,C),C!=="mod"&&(T=F.div.neg()),C!=="div"&&(R=F.mod.neg(),k&&R.negative!==0&&R.iadd(w)),{div:T,mod:R}):this.negative===0&&w.negative!==0?(F=this.divmod(w.neg(),C),C!=="mod"&&(T=F.div.neg()),{div:T,mod:F.mod}):this.negative&w.negative?(F=this.neg().divmod(w.neg(),C),C!=="div"&&(R=F.mod.neg(),k&&R.negative!==0&&R.isub(w)),{div:F.div,mod:R}):w.length>this.length||this.cmp(w)<0?{div:new s(0),mod:this}:w.length===1?C==="div"?{div:this.divn(w.words[0]),mod:null}:C==="mod"?{div:null,mod:new s(this.modrn(w.words[0]))}:{div:this.divn(w.words[0]),mod:new s(this.modrn(w.words[0]))}:this._wordDiv(w,C);var T,R,F},s.prototype.div=function(w){return this.divmod(w,"div",!1).div},s.prototype.mod=function(w){return this.divmod(w,"mod",!1).mod},s.prototype.umod=function(w){return this.divmod(w,"mod",!0).mod},s.prototype.divRound=function(w){var C=this.divmod(w);if(C.mod.isZero())return C.div;var k=C.div.negative!==0?C.mod.isub(w):C.mod,T=w.ushrn(1),R=w.andln(1),F=k.cmp(T);return F<0||R===1&&F===0?C.div:C.div.negative!==0?C.div.isubn(1):C.div.iaddn(1)},s.prototype.modrn=function(w){var C=w<0;C&&(w=-w),o(w<=67108863);for(var k=(1<<26)%w,T=0,R=this.length-1;R>=0;R--)T=(k*T+(0|this.words[R]))%w;return C?-T:T},s.prototype.modn=function(w){return this.modrn(w)},s.prototype.idivn=function(w){var C=w<0;C&&(w=-w),o(w<=67108863);for(var k=0,T=this.length-1;T>=0;T--){var R=(0|this.words[T])+67108864*k;this.words[T]=R/w|0,k=R%w}return this._strip(),C?this.ineg():this},s.prototype.divn=function(w){return this.clone().idivn(w)},s.prototype.egcd=function(w){o(w.negative===0),o(!w.isZero());var C=this,k=w.clone();C=C.negative!==0?C.umod(w):C.clone();for(var T=new s(1),R=new s(0),F=new s(0),H=new s(1),it=0;C.isEven()&&k.isEven();)C.iushrn(1),k.iushrn(1),++it;for(var ot=k.clone(),dt=C.clone();!C.isZero();){for(var $=0,ct=1;!(C.words[0]&ct)&&$<26;++$,ct<<=1);if($>0)for(C.iushrn($);$-- >0;)(T.isOdd()||R.isOdd())&&(T.iadd(ot),R.isub(dt)),T.iushrn(1),R.iushrn(1);for(var W=0,V=1;!(k.words[0]&V)&&W<26;++W,V<<=1);if(W>0)for(k.iushrn(W);W-- >0;)(F.isOdd()||H.isOdd())&&(F.iadd(ot),H.isub(dt)),F.iushrn(1),H.iushrn(1);C.cmp(k)>=0?(C.isub(k),T.isub(F),R.isub(H)):(k.isub(C),F.isub(T),H.isub(R))}return{a:F,b:H,gcd:k.iushln(it)}},s.prototype._invmp=function(w){o(w.negative===0),o(!w.isZero());var C=this,k=w.clone();C=C.negative!==0?C.umod(w):C.clone();for(var T,R=new s(1),F=new s(0),H=k.clone();C.cmpn(1)>0&&k.cmpn(1)>0;){for(var it=0,ot=1;!(C.words[0]&ot)&&it<26;++it,ot<<=1);if(it>0)for(C.iushrn(it);it-- >0;)R.isOdd()&&R.iadd(H),R.iushrn(1);for(var dt=0,$=1;!(k.words[0]&$)&&dt<26;++dt,$<<=1);if(dt>0)for(k.iushrn(dt);dt-- >0;)F.isOdd()&&F.iadd(H),F.iushrn(1);C.cmp(k)>=0?(C.isub(k),R.isub(F)):(k.isub(C),F.isub(R))}return(T=C.cmpn(1)===0?R:F).cmpn(0)<0&&T.iadd(w),T},s.prototype.gcd=function(w){if(this.isZero())return w.abs();if(w.isZero())return this.abs();var C=this.clone(),k=w.clone();C.negative=0,k.negative=0;for(var T=0;C.isEven()&&k.isEven();T++)C.iushrn(1),k.iushrn(1);for(;;){for(;C.isEven();)C.iushrn(1);for(;k.isEven();)k.iushrn(1);var R=C.cmp(k);if(R<0){var F=C;C=k,k=F}else if(R===0||k.cmpn(1)===0)break;C.isub(k)}return k.iushln(T)},s.prototype.invm=function(w){return this.egcd(w).a.umod(w)},s.prototype.isEven=function(){return(1&this.words[0])==0},s.prototype.isOdd=function(){return(1&this.words[0])==1},s.prototype.andln=function(w){return this.words[0]&w},s.prototype.bincn=function(w){o(typeof w=="number");var C=w%26,k=(w-C)/26,T=1<<C;if(this.length<=k)return this._expand(k+1),this.words[k]|=T,this;for(var R=T,F=k;R!==0&&F<this.length;F++){var H=0|this.words[F];R=(H+=R)>>>26,H&=67108863,this.words[F]=H}return R!==0&&(this.words[F]=R,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(w){var C,k=w<0;if(this.negative!==0&&!k)return-1;if(this.negative===0&&k)return 1;if(this._strip(),this.length>1)C=1;else{k&&(w=-w),o(w<=67108863,"Number is too big");var T=0|this.words[0];C=T===w?0:T<w?-1:1}return this.negative!==0?0|-C:C},s.prototype.cmp=function(w){if(this.negative!==0&&w.negative===0)return-1;if(this.negative===0&&w.negative!==0)return 1;var C=this.ucmp(w);return this.negative!==0?0|-C:C},s.prototype.ucmp=function(w){if(this.length>w.length)return 1;if(this.length<w.length)return-1;for(var C=0,k=this.length-1;k>=0;k--){var T=0|this.words[k],R=0|w.words[k];if(T!==R){T<R?C=-1:T>R&&(C=1);break}}return C},s.prototype.gtn=function(w){return this.cmpn(w)===1},s.prototype.gt=function(w){return this.cmp(w)===1},s.prototype.gten=function(w){return this.cmpn(w)>=0},s.prototype.gte=function(w){return this.cmp(w)>=0},s.prototype.ltn=function(w){return this.cmpn(w)===-1},s.prototype.lt=function(w){return this.cmp(w)===-1},s.prototype.lten=function(w){return this.cmpn(w)<=0},s.prototype.lte=function(w){return this.cmp(w)<=0},s.prototype.eqn=function(w){return this.cmpn(w)===0},s.prototype.eq=function(w){return this.cmp(w)===0},s.red=function(w){return new N(w)},s.prototype.toRed=function(w){return o(!this.red,"Already a number in reduction context"),o(this.negative===0,"red works only with positives"),w.convertTo(this)._forceRed(w)},s.prototype.fromRed=function(){return o(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(w){return this.red=w,this},s.prototype.forceRed=function(w){return o(!this.red,"Already a number in reduction context"),this._forceRed(w)},s.prototype.redAdd=function(w){return o(this.red,"redAdd works only with red numbers"),this.red.add(this,w)},s.prototype.redIAdd=function(w){return o(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,w)},s.prototype.redSub=function(w){return o(this.red,"redSub works only with red numbers"),this.red.sub(this,w)},s.prototype.redISub=function(w){return o(this.red,"redISub works only with red numbers"),this.red.isub(this,w)},s.prototype.redShl=function(w){return o(this.red,"redShl works only with red numbers"),this.red.shl(this,w)},s.prototype.redMul=function(w){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,w),this.red.mul(this,w)},s.prototype.redIMul=function(w){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,w),this.red.imul(this,w)},s.prototype.redSqr=function(){return o(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return o(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return o(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return o(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return o(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(w){return o(this.red&&!w.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,w)};var z={k256:null,p224:null,p192:null,p25519:null};function q(w,C){this.name=w,this.p=new s(C,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function G(){q.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function tt(){q.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function K(){q.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function D(){q.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function N(w){if(typeof w=="string"){var C=s._prime(w);this.m=C.p,this.prime=C}else o(w.gtn(1),"modulus must be greater than 1"),this.m=w,this.prime=null}function Z(w){N.call(this,w),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}q.prototype._tmp=function(){var w=new s(null);return w.words=new Array(Math.ceil(this.n/13)),w},q.prototype.ireduce=function(w){var C,k=w;do this.split(k,this.tmp),C=(k=(k=this.imulK(k)).iadd(this.tmp)).bitLength();while(C>this.n);var T=C<this.n?-1:k.ucmp(this.p);return T===0?(k.words[0]=0,k.length=1):T>0?k.isub(this.p):k.strip!==void 0?k.strip():k._strip(),k},q.prototype.split=function(w,C){w.iushrn(this.n,0,C)},q.prototype.imulK=function(w){return w.imul(this.k)},a(G,q),G.prototype.split=function(w,C){for(var k=Math.min(w.length,9),T=0;T<k;T++)C.words[T]=w.words[T];if(C.length=k,w.length<=9)return w.words[0]=0,void(w.length=1);var R=w.words[9];for(C.words[C.length++]=4194303&R,T=10;T<w.length;T++){var F=0|w.words[T];w.words[T-10]=(4194303&F)<<4|R>>>22,R=F}R>>>=22,w.words[T-10]=R,R===0&&w.length>10?w.length-=10:w.length-=9},G.prototype.imulK=function(w){w.words[w.length]=0,w.words[w.length+1]=0,w.length+=2;for(var C=0,k=0;k<w.length;k++){var T=0|w.words[k];C+=977*T,w.words[k]=67108863&C,C=64*T+(C/67108864|0)}return w.words[w.length-1]===0&&(w.length--,w.words[w.length-1]===0&&w.length--),w},a(tt,q),a(K,q),a(D,q),D.prototype.imulK=function(w){for(var C=0,k=0;k<w.length;k++){var T=19*(0|w.words[k])+C,R=67108863&T;T>>>=26,w.words[k]=R,C=T}return C!==0&&(w.words[w.length++]=C),w},s._prime=function(w){if(z[w])return z[w];var C;if(w==="k256")C=new G;else if(w==="p224")C=new tt;else if(w==="p192")C=new K;else{if(w!=="p25519")throw new Error("Unknown prime "+w);C=new D}return z[w]=C,C},N.prototype._verify1=function(w){o(w.negative===0,"red works only with positives"),o(w.red,"red works only with red numbers")},N.prototype._verify2=function(w,C){o((w.negative|C.negative)==0,"red works only with positives"),o(w.red&&w.red===C.red,"red works only with red numbers")},N.prototype.imod=function(w){return this.prime?this.prime.ireduce(w)._forceRed(this):(m(w,w.umod(this.m)._forceRed(this)),w)},N.prototype.neg=function(w){return w.isZero()?w.clone():this.m.sub(w)._forceRed(this)},N.prototype.add=function(w,C){this._verify2(w,C);var k=w.add(C);return k.cmp(this.m)>=0&&k.isub(this.m),k._forceRed(this)},N.prototype.iadd=function(w,C){this._verify2(w,C);var k=w.iadd(C);return k.cmp(this.m)>=0&&k.isub(this.m),k},N.prototype.sub=function(w,C){this._verify2(w,C);var k=w.sub(C);return k.cmpn(0)<0&&k.iadd(this.m),k._forceRed(this)},N.prototype.isub=function(w,C){this._verify2(w,C);var k=w.isub(C);return k.cmpn(0)<0&&k.iadd(this.m),k},N.prototype.shl=function(w,C){return this._verify1(w),this.imod(w.ushln(C))},N.prototype.imul=function(w,C){return this._verify2(w,C),this.imod(w.imul(C))},N.prototype.mul=function(w,C){return this._verify2(w,C),this.imod(w.mul(C))},N.prototype.isqr=function(w){return this.imul(w,w.clone())},N.prototype.sqr=function(w){return this.mul(w,w)},N.prototype.sqrt=function(w){if(w.isZero())return w.clone();var C=this.m.andln(3);if(o(C%2==1),C===3){var k=this.m.add(new s(1)).iushrn(2);return this.pow(w,k)}for(var T=this.m.subn(1),R=0;!T.isZero()&&T.andln(1)===0;)R++,T.iushrn(1);o(!T.isZero());var F=new s(1).toRed(this),H=F.redNeg(),it=this.m.subn(1).iushrn(1),ot=this.m.bitLength();for(ot=new s(2*ot*ot).toRed(this);this.pow(ot,it).cmp(H)!==0;)ot.redIAdd(H);for(var dt=this.pow(ot,T),$=this.pow(w,T.addn(1).iushrn(1)),ct=this.pow(w,T),W=R;ct.cmp(F)!==0;){for(var V=ct,rt=0;V.cmp(F)!==0;rt++)V=V.redSqr();o(rt<W);var mt=this.pow(dt,new s(1).iushln(W-rt-1));$=$.redMul(mt),dt=mt.redSqr(),ct=ct.redMul(dt),W=rt}return $},N.prototype.invm=function(w){var C=w._invmp(this.m);return C.negative!==0?(C.negative=0,this.imod(C).redNeg()):this.imod(C)},N.prototype.pow=function(w,C){if(C.isZero())return new s(1).toRed(this);if(C.cmpn(1)===0)return w.clone();var k=new Array(16);k[0]=new s(1).toRed(this),k[1]=w;for(var T=2;T<k.length;T++)k[T]=this.mul(k[T-1],w);var R=k[0],F=0,H=0,it=C.bitLength()%26;for(it===0&&(it=26),T=C.length-1;T>=0;T--){for(var ot=C.words[T],dt=it-1;dt>=0;dt--){var $=ot>>dt&1;R!==k[0]&&(R=this.sqr(R)),$!==0||F!==0?(F<<=1,F|=$,(++H===4||T===0&&dt===0)&&(R=this.mul(R,k[F]),H=0,F=0)):H=0}it=26}return R},N.prototype.convertTo=function(w){var C=w.umod(this.m);return C===w?C.clone():C},N.prototype.convertFrom=function(w){var C=w.clone();return C.red=null,C},s.mont=function(w){return new Z(w)},a(Z,N),Z.prototype.convertTo=function(w){return this.imod(w.ushln(this.shift))},Z.prototype.convertFrom=function(w){var C=this.imod(w.mul(this.rinv));return C.red=null,C},Z.prototype.imul=function(w,C){if(w.isZero()||C.isZero())return w.words[0]=0,w.length=1,w;var k=w.imul(C),T=k.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),R=k.isub(T).iushrn(this.shift),F=R;return R.cmp(this.m)>=0?F=R.isub(this.m):R.cmpn(0)<0&&(F=R.iadd(this.m)),F._forceRed(this)},Z.prototype.mul=function(w,C){if(w.isZero()||C.isZero())return new s(0)._forceRed(this);var k=w.mul(C),T=k.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),R=k.isub(T).iushrn(this.shift),F=R;return R.cmp(this.m)>=0?F=R.isub(this.m):R.cmpn(0)<0&&(F=R.iadd(this.m)),F._forceRed(this)},Z.prototype.invm=function(w){return this.imod(w._invmp(this.m).mul(this.r2))._forceRed(this)}})(t===void 0||t)},{buffer:188}],187:[function(e,t,n){"use strict";var i;function r(a){this.rand=a}if(t.exports=function(a){return i||(i=new r(null)),i.generate(a)},t.exports.Rand=r,r.prototype.generate=function(a){return this._rand(a)},r.prototype._rand=function(a){if(this.rand.getBytes)return this.rand.getBytes(a);for(var s=new Uint8Array(a),u=0;u<s.length;u++)s[u]=this.rand.getByte();return s},typeof self=="object")self.crypto&&self.crypto.getRandomValues?r.prototype._rand=function(a){var s=new Uint8Array(a);return self.crypto.getRandomValues(s),s}:self.msCrypto&&self.msCrypto.getRandomValues?r.prototype._rand=function(a){var s=new Uint8Array(a);return self.msCrypto.getRandomValues(s),s}:typeof window=="object"&&(r.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var o=e("crypto");if(typeof o.randomBytes!="function")throw new Error("Not supported");r.prototype._rand=function(a){return o.randomBytes(a)}}catch{}},{crypto:188}],188:[function(e,t,n){},{}],189:[function(e,t,n){"use strict";var i=e("safe-buffer").Buffer;function r(c){i.isBuffer(c)||(c=i.from(c));for(var d=c.length/4|0,m=new Array(d),v=0;v<d;v++)m[v]=c.readUInt32BE(4*v);return m}function o(c){for(;0<c.length;c++)c[0]=0}function a(c,d,m,v,p){for(var _,y,x,S,O=m[0],B=m[1],U=m[2],z=m[3],q=c[0]^d[0],G=c[1]^d[1],tt=c[2]^d[2],K=c[3]^d[3],D=4,N=1;N<p;N++)_=O[q>>>24]^B[G>>>16&255]^U[tt>>>8&255]^z[255&K]^d[D++],y=O[G>>>24]^B[tt>>>16&255]^U[K>>>8&255]^z[255&q]^d[D++],x=O[tt>>>24]^B[K>>>16&255]^U[q>>>8&255]^z[255&G]^d[D++],S=O[K>>>24]^B[q>>>16&255]^U[G>>>8&255]^z[255&tt]^d[D++],q=_,G=y,tt=x,K=S;return _=(v[q>>>24]<<24|v[G>>>16&255]<<16|v[tt>>>8&255]<<8|v[255&K])^d[D++],y=(v[G>>>24]<<24|v[tt>>>16&255]<<16|v[K>>>8&255]<<8|v[255&q])^d[D++],x=(v[tt>>>24]<<24|v[K>>>16&255]<<16|v[q>>>8&255]<<8|v[255&G])^d[D++],S=(v[K>>>24]<<24|v[q>>>16&255]<<16|v[G>>>8&255]<<8|v[255&tt])^d[D++],[_>>>=0,y>>>=0,x>>>=0,S>>>=0]}var s=[0,1,2,4,8,16,32,64,128,27,54],u=function(){for(var c=new Array(256),d=0;d<256;d++)c[d]=d<128?d<<1:d<<1^283;for(var m=[],v=[],p=[[],[],[],[]],_=[[],[],[],[]],y=0,x=0,S=0;S<256;++S){var O=x^x<<1^x<<2^x<<3^x<<4;O=O>>>8^255&O^99,m[y]=O,v[O]=y;var B=c[y],U=c[B],z=c[U],q=257*c[O]^16843008*O;p[0][y]=q<<24|q>>>8,p[1][y]=q<<16|q>>>16,p[2][y]=q<<8|q>>>24,p[3][y]=q,q=16843009*z^65537*U^257*B^16843008*y,_[0][O]=q<<24|q>>>8,_[1][O]=q<<16|q>>>16,_[2][O]=q<<8|q>>>24,_[3][O]=q,y===0?y=x=1:(y=B^c[c[c[z^B]]],x^=c[c[x]])}return{SBOX:m,INV_SBOX:v,SUB_MIX:p,INV_SUB_MIX:_}}();function f(c){this._key=r(c),this._reset()}f.blockSize=16,f.keySize=32,f.prototype.blockSize=f.blockSize,f.prototype.keySize=f.keySize,f.prototype._reset=function(){for(var c=this._key,d=c.length,m=d+6,v=4*(m+1),p=[],_=0;_<d;_++)p[_]=c[_];for(_=d;_<v;_++){var y=p[_-1];_%d==0?(y=y<<8|y>>>24,y=u.SBOX[y>>>24]<<24|u.SBOX[y>>>16&255]<<16|u.SBOX[y>>>8&255]<<8|u.SBOX[255&y],y^=s[_/d|0]<<24):d>6&&_%d==4&&(y=u.SBOX[y>>>24]<<24|u.SBOX[y>>>16&255]<<16|u.SBOX[y>>>8&255]<<8|u.SBOX[255&y]),p[_]=p[_-d]^y}for(var x=[],S=0;S<v;S++){var O=v-S,B=p[O-(S%4?0:4)];x[S]=S<4||O<=4?B:u.INV_SUB_MIX[0][u.SBOX[B>>>24]]^u.INV_SUB_MIX[1][u.SBOX[B>>>16&255]]^u.INV_SUB_MIX[2][u.SBOX[B>>>8&255]]^u.INV_SUB_MIX[3][u.SBOX[255&B]]}this._nRounds=m,this._keySchedule=p,this._invKeySchedule=x},f.prototype.encryptBlockRaw=function(c){return a(c=r(c),this._keySchedule,u.SUB_MIX,u.SBOX,this._nRounds)},f.prototype.encryptBlock=function(c){var d=this.encryptBlockRaw(c),m=i.allocUnsafe(16);return m.writeUInt32BE(d[0],0),m.writeUInt32BE(d[1],4),m.writeUInt32BE(d[2],8),m.writeUInt32BE(d[3],12),m},f.prototype.decryptBlock=function(c){var d=(c=r(c))[1];c[1]=c[3],c[3]=d;var m=a(c,this._invKeySchedule,u.INV_SUB_MIX,u.INV_SBOX,this._nRounds),v=i.allocUnsafe(16);return v.writeUInt32BE(m[0],0),v.writeUInt32BE(m[3],4),v.writeUInt32BE(m[2],8),v.writeUInt32BE(m[1],12),v},f.prototype.scrub=function(){o(this._keySchedule),o(this._invKeySchedule),o(this._key)},t.exports.AES=f},{"safe-buffer":494}],190:[function(e,t,n){"use strict";var i=e("./aes"),r=e("safe-buffer").Buffer,o=e("cipher-base"),a=e("inherits"),s=e("./ghash"),u=e("buffer-xor"),f=e("./incr32");function c(d,m,v,p){o.call(this);var _=r.alloc(4,0);this._cipher=new i.AES(m);var y=this._cipher.encryptBlock(_);this._ghash=new s(y),v=function(x,S,O){if(S.length===12)return x._finID=r.concat([S,r.from([0,0,0,1])]),r.concat([S,r.from([0,0,0,2])]);var B=new s(O),U=S.length,z=U%16;B.update(S),z&&(z=16-z,B.update(r.alloc(z,0))),B.update(r.alloc(8,0));var q=8*U,G=r.alloc(8);G.writeUIntBE(q,0,8),B.update(G),x._finID=B.state;var tt=r.from(x._finID);return f(tt),tt}(this,v,y),this._prev=r.from(v),this._cache=r.allocUnsafe(0),this._secCache=r.allocUnsafe(0),this._decrypt=p,this._alen=0,this._len=0,this._mode=d,this._authTag=null,this._called=!1}a(c,o),c.prototype._update=function(d){if(!this._called&&this._alen){var m=16-this._alen%16;m<16&&(m=r.alloc(m,0),this._ghash.update(m))}this._called=!0;var v=this._mode.encrypt(this,d);return this._decrypt?this._ghash.update(d):this._ghash.update(v),this._len+=d.length,v},c.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var d=u(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(m,v){var p=0;m.length!==v.length&&p++;for(var _=Math.min(m.length,v.length),y=0;y<_;++y)p+=m[y]^v[y];return p}(d,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=d,this._cipher.scrub()},c.prototype.getAuthTag=function(){if(this._decrypt||!r.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},c.prototype.setAuthTag=function(d){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=d},c.prototype.setAAD=function(d){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(d),this._alen+=d.length},t.exports=c},{"./aes":189,"./ghash":194,"./incr32":195,"buffer-xor":219,"cipher-base":221,inherits:440,"safe-buffer":494}],191:[function(e,t,n){"use strict";var i=e("./encrypter"),r=e("./decrypter"),o=e("./modes/list.json");n.createCipher=n.Cipher=i.createCipher,n.createCipheriv=n.Cipheriv=i.createCipheriv,n.createDecipher=n.Decipher=r.createDecipher,n.createDecipheriv=n.Decipheriv=r.createDecipheriv,n.listCiphers=n.getCiphers=function(){return Object.keys(o)}},{"./decrypter":192,"./encrypter":193,"./modes/list.json":203}],192:[function(e,t,n){"use strict";var i=e("./authCipher"),r=e("safe-buffer").Buffer,o=e("./modes"),a=e("./streamCipher"),s=e("cipher-base"),u=e("./aes"),f=e("evp_bytestokey");function c(v,p,_){s.call(this),this._cache=new d,this._last=void 0,this._cipher=new u.AES(p),this._prev=r.from(_),this._mode=v,this._autopadding=!0}function d(){this.cache=r.allocUnsafe(0)}function m(v,p,_){var y=o[v.toLowerCase()];if(!y)throw new TypeError("invalid suite type");if(typeof _=="string"&&(_=r.from(_)),y.mode!=="GCM"&&_.length!==y.iv)throw new TypeError("invalid iv length "+_.length);if(typeof p=="string"&&(p=r.from(p)),p.length!==y.key/8)throw new TypeError("invalid key length "+p.length);return y.type==="stream"?new a(y.module,p,_,!0):y.type==="auth"?new i(y.module,p,_,!0):new c(y.module,p,_)}e("inherits")(c,s),c.prototype._update=function(v){var p,_;this._cache.add(v);for(var y=[];p=this._cache.get(this._autopadding);)_=this._mode.decrypt(this,p),y.push(_);return r.concat(y)},c.prototype._final=function(){var v=this._cache.flush();if(this._autopadding)return function(p){var _=p[15];if(_<1||_>16)throw new Error("unable to decrypt data");for(var y=-1;++y<_;)if(p[y+(16-_)]!==_)throw new Error("unable to decrypt data");if(_!==16)return p.slice(0,16-_)}(this._mode.decrypt(this,v));if(v)throw new Error("data not multiple of block length")},c.prototype.setAutoPadding=function(v){return this._autopadding=!!v,this},d.prototype.add=function(v){this.cache=r.concat([this.cache,v])},d.prototype.get=function(v){var p;if(v){if(this.cache.length>16)return p=this.cache.slice(0,16),this.cache=this.cache.slice(16),p}else if(this.cache.length>=16)return p=this.cache.slice(0,16),this.cache=this.cache.slice(16),p;return null},d.prototype.flush=function(){if(this.cache.length)return this.cache},n.createDecipher=function(v,p){var _=o[v.toLowerCase()];if(!_)throw new TypeError("invalid suite type");var y=f(p,!1,_.key,_.iv);return m(v,y.key,y.iv)},n.createDecipheriv=m},{"./aes":189,"./authCipher":190,"./modes":202,"./streamCipher":205,"cipher-base":221,evp_bytestokey:423,inherits:440,"safe-buffer":494}],193:[function(e,t,n){"use strict";var i=e("./modes"),r=e("./authCipher"),o=e("safe-buffer").Buffer,a=e("./streamCipher"),s=e("cipher-base"),u=e("./aes"),f=e("evp_bytestokey");function c(p,_,y){s.call(this),this._cache=new m,this._cipher=new u.AES(_),this._prev=o.from(y),this._mode=p,this._autopadding=!0}e("inherits")(c,s),c.prototype._update=function(p){var _,y;this._cache.add(p);for(var x=[];_=this._cache.get();)y=this._mode.encrypt(this,_),x.push(y);return o.concat(x)};var d=o.alloc(16,16);function m(){this.cache=o.allocUnsafe(0)}function v(p,_,y){var x=i[p.toLowerCase()];if(!x)throw new TypeError("invalid suite type");if(typeof _=="string"&&(_=o.from(_)),_.length!==x.key/8)throw new TypeError("invalid key length "+_.length);if(typeof y=="string"&&(y=o.from(y)),x.mode!=="GCM"&&y.length!==x.iv)throw new TypeError("invalid iv length "+y.length);return x.type==="stream"?new a(x.module,_,y):x.type==="auth"?new r(x.module,_,y):new c(x.module,_,y)}c.prototype._final=function(){var p=this._cache.flush();if(this._autopadding)return p=this._mode.encrypt(this,p),this._cipher.scrub(),p;if(!p.equals(d))throw this._cipher.scrub(),new Error("data not multiple of block length")},c.prototype.setAutoPadding=function(p){return this._autopadding=!!p,this},m.prototype.add=function(p){this.cache=o.concat([this.cache,p])},m.prototype.get=function(){if(this.cache.length>15){var p=this.cache.slice(0,16);return this.cache=this.cache.slice(16),p}return null},m.prototype.flush=function(){for(var p=16-this.cache.length,_=o.allocUnsafe(p),y=-1;++y<p;)_.writeUInt8(p,y);return o.concat([this.cache,_])},n.createCipheriv=v,n.createCipher=function(p,_){var y=i[p.toLowerCase()];if(!y)throw new TypeError("invalid suite type");var x=f(_,!1,y.key,y.iv);return v(p,x.key,x.iv)}},{"./aes":189,"./authCipher":190,"./modes":202,"./streamCipher":205,"cipher-base":221,evp_bytestokey:423,inherits:440,"safe-buffer":494}],194:[function(e,t,n){"use strict";var i=e("safe-buffer").Buffer,r=i.alloc(16,0);function o(s){var u=i.allocUnsafe(16);return u.writeUInt32BE(s[0]>>>0,0),u.writeUInt32BE(s[1]>>>0,4),u.writeUInt32BE(s[2]>>>0,8),u.writeUInt32BE(s[3]>>>0,12),u}function a(s){this.h=s,this.state=i.alloc(16,0),this.cache=i.allocUnsafe(0)}a.prototype.ghash=function(s){for(var u=-1;++u<s.length;)this.state[u]^=s[u];this._multiply()},a.prototype._multiply=function(){for(var s,u,f,c=[(s=this.h).readUInt32BE(0),s.readUInt32BE(4),s.readUInt32BE(8),s.readUInt32BE(12)],d=[0,0,0,0],m=-1;++m<128;){for(this.state[~~(m/8)]&1<<7-m%8&&(d[0]^=c[0],d[1]^=c[1],d[2]^=c[2],d[3]^=c[3]),f=(1&c[3])!=0,u=3;u>0;u--)c[u]=c[u]>>>1|(1&c[u-1])<<31;c[0]=c[0]>>>1,f&&(c[0]=c[0]^225<<24)}this.state=o(d)},a.prototype.update=function(s){var u;for(this.cache=i.concat([this.cache,s]);this.cache.length>=16;)u=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(u)},a.prototype.final=function(s,u){return this.cache.length&&this.ghash(i.concat([this.cache,r],16)),this.ghash(o([0,s,0,u])),this.state},t.exports=a},{"safe-buffer":494}],195:[function(e,t,n){"use strict";t.exports=function(i){for(var r,o=i.length;o--;){if((r=i.readUInt8(o))!==255){r++,i.writeUInt8(r,o);break}i.writeUInt8(0,o)}}},{}],196:[function(e,t,n){"use strict";var i=e("buffer-xor");n.encrypt=function(r,o){var a=i(o,r._prev);return r._prev=r._cipher.encryptBlock(a),r._prev},n.decrypt=function(r,o){var a=r._prev;r._prev=o;var s=r._cipher.decryptBlock(o);return i(s,a)}},{"buffer-xor":219}],197:[function(e,t,n){"use strict";var i=e("safe-buffer").Buffer,r=e("buffer-xor");function o(a,s,u){var f=s.length,c=r(s,a._cache);return a._cache=a._cache.slice(f),a._prev=i.concat([a._prev,u?s:c]),c}n.encrypt=function(a,s,u){for(var f,c=i.allocUnsafe(0);s.length;){if(a._cache.length===0&&(a._cache=a._cipher.encryptBlock(a._prev),a._prev=i.allocUnsafe(0)),!(a._cache.length<=s.length)){c=i.concat([c,o(a,s,u)]);break}f=a._cache.length,c=i.concat([c,o(a,s.slice(0,f),u)]),s=s.slice(f)}return c}},{"buffer-xor":219,"safe-buffer":494}],198:[function(e,t,n){"use strict";var i=e("safe-buffer").Buffer;function r(a,s,u){for(var f,c,d=-1,m=0;++d<8;)f=s&1<<7-d?128:0,m+=(128&(c=a._cipher.encryptBlock(a._prev)[0]^f))>>d%8,a._prev=o(a._prev,u?f:c);return m}function o(a,s){var u=a.length,f=-1,c=i.allocUnsafe(a.length);for(a=i.concat([a,i.from([s])]);++f<u;)c[f]=a[f]<<1|a[f+1]>>7;return c}n.encrypt=function(a,s,u){for(var f=s.length,c=i.allocUnsafe(f),d=-1;++d<f;)c[d]=r(a,s[d],u);return c}},{"safe-buffer":494}],199:[function(e,t,n){"use strict";var i=e("safe-buffer").Buffer;function r(o,a,s){var u=o._cipher.encryptBlock(o._prev)[0]^a;return o._prev=i.concat([o._prev.slice(1),i.from([s?a:u])]),u}n.encrypt=function(o,a,s){for(var u=a.length,f=i.allocUnsafe(u),c=-1;++c<u;)f[c]=r(o,a[c],s);return f}},{"safe-buffer":494}],200:[function(e,t,n){"use strict";var i=e("buffer-xor"),r=e("safe-buffer").Buffer,o=e("../incr32");function a(s){var u=s._cipher.encryptBlockRaw(s._prev);return o(s._prev),u}n.encrypt=function(s,u){var f=Math.ceil(u.length/16),c=s._cache.length;s._cache=r.concat([s._cache,r.allocUnsafe(16*f)]);for(var d=0;d<f;d++){var m=a(s),v=c+16*d;s._cache.writeUInt32BE(m[0],v+0),s._cache.writeUInt32BE(m[1],v+4),s._cache.writeUInt32BE(m[2],v+8),s._cache.writeUInt32BE(m[3],v+12)}var p=s._cache.slice(0,u.length);return s._cache=s._cache.slice(u.length),i(u,p)}},{"../incr32":195,"buffer-xor":219,"safe-buffer":494}],201:[function(e,t,n){"use strict";n.encrypt=function(i,r){return i._cipher.encryptBlock(r)},n.decrypt=function(i,r){return i._cipher.decryptBlock(r)}},{}],202:[function(e,t,n){"use strict";var i={ECB:e("./ecb"),CBC:e("./cbc"),CFB:e("./cfb"),CFB8:e("./cfb8"),CFB1:e("./cfb1"),OFB:e("./ofb"),CTR:e("./ctr"),GCM:e("./ctr")},r=e("./list.json");for(var o in r)r[o].module=i[r[o].mode];t.exports=r},{"./cbc":196,"./cfb":197,"./cfb1":198,"./cfb8":199,"./ctr":200,"./ecb":201,"./list.json":203,"./ofb":204}],203:[function(e,t,n){t.exports={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}}},{}],204:[function(e,t,n){(function(i){(function(){"use strict";var r=e("buffer-xor");function o(a){return a._prev=a._cipher.encryptBlock(a._prev),a._prev}n.encrypt=function(a,s){for(;a._cache.length<s.length;)a._cache=i.concat([a._cache,o(a)]);var u=a._cache.slice(0,s.length);return a._cache=a._cache.slice(s.length),r(s,u)}}).call(this)}).call(this,e("buffer").Buffer)},{buffer:220,"buffer-xor":219}],205:[function(e,t,n){"use strict";var i=e("./aes"),r=e("safe-buffer").Buffer,o=e("cipher-base");function a(s,u,f,c){o.call(this),this._cipher=new i.AES(u),this._prev=r.from(f),this._cache=r.allocUnsafe(0),this._secCache=r.allocUnsafe(0),this._decrypt=c,this._mode=s}e("inherits")(a,o),a.prototype._update=function(s){return this._mode.encrypt(this,s,this._decrypt)},a.prototype._final=function(){this._cipher.scrub()},t.exports=a},{"./aes":189,"cipher-base":221,inherits:440,"safe-buffer":494}],206:[function(e,t,n){"use strict";var i=e("browserify-des"),r=e("browserify-aes/browser"),o=e("browserify-aes/modes"),a=e("browserify-des/modes"),s=e("evp_bytestokey");function u(c,d,m){if(c=c.toLowerCase(),o[c])return r.createCipheriv(c,d,m);if(a[c])return new i({key:d,iv:m,mode:c});throw new TypeError("invalid suite type")}function f(c,d,m){if(c=c.toLowerCase(),o[c])return r.createDecipheriv(c,d,m);if(a[c])return new i({key:d,iv:m,mode:c,decrypt:!0});throw new TypeError("invalid suite type")}n.createCipher=n.Cipher=function(c,d){var m,v;if(c=c.toLowerCase(),o[c])m=o[c].key,v=o[c].iv;else{if(!a[c])throw new TypeError("invalid suite type");m=8*a[c].key,v=a[c].iv}var p=s(d,!1,m,v);return u(c,p.key,p.iv)},n.createCipheriv=n.Cipheriv=u,n.createDecipher=n.Decipher=function(c,d){var m,v;if(c=c.toLowerCase(),o[c])m=o[c].key,v=o[c].iv;else{if(!a[c])throw new TypeError("invalid suite type");m=8*a[c].key,v=a[c].iv}var p=s(d,!1,m,v);return f(c,p.key,p.iv)},n.createDecipheriv=n.Decipheriv=f,n.listCiphers=n.getCiphers=function(){return Object.keys(a).concat(r.getCiphers())}},{"browserify-aes/browser":191,"browserify-aes/modes":202,"browserify-des":207,"browserify-des/modes":208,evp_bytestokey:423}],207:[function(e,t,n){"use strict";var i=e("cipher-base"),r=e("des.js"),o=e("inherits"),a=e("safe-buffer").Buffer,s={"des-ede3-cbc":r.CBC.instantiate(r.EDE),"des-ede3":r.EDE,"des-ede-cbc":r.CBC.instantiate(r.EDE),"des-ede":r.EDE,"des-cbc":r.CBC.instantiate(r.DES),"des-ecb":r.DES};function u(f){i.call(this);var c,d=f.mode.toLowerCase(),m=s[d];c=f.decrypt?"decrypt":"encrypt";var v=f.key;a.isBuffer(v)||(v=a.from(v)),d!=="des-ede"&&d!=="des-ede-cbc"||(v=a.concat([v,v.slice(0,8)]));var p=f.iv;a.isBuffer(p)||(p=a.from(p)),this._des=m.create({key:v,iv:p,type:c})}s.des=s["des-cbc"],s.des3=s["des-ede3-cbc"],t.exports=u,o(u,i),u.prototype._update=function(f){return a.from(this._des.update(f))},u.prototype._final=function(){return a.from(this._des.final())}},{"cipher-base":221,"des.js":394,inherits:440,"safe-buffer":494}],208:[function(e,t,n){"use strict";n["des-ecb"]={key:8,iv:0},n["des-cbc"]=n.des={key:8,iv:8},n["des-ede3-cbc"]=n.des3={key:24,iv:8},n["des-ede3"]={key:24,iv:0},n["des-ede-cbc"]={key:16,iv:8},n["des-ede"]={key:16,iv:0}},{}],209:[function(e,t,n){(function(i){(function(){"use strict";var r=e("bn.js"),o=e("randombytes");function a(u){var f,c=u.modulus.byteLength();do f=new r(o(c));while(f.cmp(u.modulus)>=0||!f.umod(u.prime1)||!f.umod(u.prime2));return f}function s(u,f){var c=function(U){var z=a(U);return{blinder:z.toRed(r.mont(U.modulus)).redPow(new r(U.publicExponent)).fromRed(),unblinder:z.invm(U.modulus)}}(f),d=f.modulus.byteLength(),m=new r(u).mul(c.blinder).umod(f.modulus),v=m.toRed(r.mont(f.prime1)),p=m.toRed(r.mont(f.prime2)),_=f.coefficient,y=f.prime1,x=f.prime2,S=v.redPow(f.exponent1).fromRed(),O=p.redPow(f.exponent2).fromRed(),B=S.isub(O).imul(_).umod(y).imul(x);return O.iadd(B).imul(c.unblinder).umod(f.modulus).toArrayLike(i,"be",d)}s.getr=a,t.exports=s}).call(this)}).call(this,e("buffer").Buffer)},{"bn.js":186,buffer:220,randombytes:475}],210:[function(e,t,n){"use strict";t.exports=e("./browser/algorithms.json")},{"./browser/algorithms.json":211}],211:[function(e,t,n){t.exports={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}}},{}],212:[function(e,t,n){t.exports={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}},{}],213:[function(e,t,n){"use strict";var i=e("safe-buffer").Buffer,r=e("create-hash"),o=e("readable-stream"),a=e("inherits"),s=e("./sign"),u=e("./verify"),f=e("./algorithms.json");function c(p){o.Writable.call(this);var _=f[p];if(!_)throw new Error("Unknown message digest");this._hashType=_.hash,this._hash=r(_.hash),this._tag=_.id,this._signType=_.sign}function d(p){o.Writable.call(this);var _=f[p];if(!_)throw new Error("Unknown message digest");this._hash=r(_.hash),this._tag=_.id,this._signType=_.sign}function m(p){return new c(p)}function v(p){return new d(p)}Object.keys(f).forEach(function(p){f[p].id=i.from(f[p].id,"hex"),f[p.toLowerCase()]=f[p]}),a(c,o.Writable),c.prototype._write=function(p,_,y){this._hash.update(p),y()},c.prototype.update=function(p,_){return typeof p=="string"&&(p=i.from(p,_)),this._hash.update(p),this},c.prototype.sign=function(p,_){this.end();var y=this._hash.digest(),x=s(y,p,this._hashType,this._signType,this._tag);return _?x.toString(_):x},a(d,o.Writable),d.prototype._write=function(p,_,y){this._hash.update(p),y()},d.prototype.update=function(p,_){return typeof p=="string"&&(p=i.from(p,_)),this._hash.update(p),this},d.prototype.verify=function(p,_,y){typeof _=="string"&&(_=i.from(_,y)),this.end();var x=this._hash.digest();return u(_,x,p,this._signType,this._tag)},t.exports={Sign:m,Verify:v,createSign:m,createVerify:v}},{"./algorithms.json":211,"./sign":214,"./verify":215,"create-hash":386,inherits:440,"readable-stream":491,"safe-buffer":494}],214:[function(e,t,n){"use strict";var i=e("safe-buffer").Buffer,r=e("create-hmac"),o=e("browserify-rsa"),a=e("elliptic").ec,s=e("bn.js"),u=e("parse-asn1"),f=e("./curves.json");function c(p,_,y,x){if((p=i.from(p.toArray())).length<_.byteLength()){var S=i.alloc(_.byteLength()-p.length);p=i.concat([S,p])}var O=y.length,B=function(q,G){q=(q=d(q,G)).mod(G);var tt=i.from(q.toArray());if(tt.length<G.byteLength()){var K=i.alloc(G.byteLength()-tt.length);tt=i.concat([K,tt])}return tt}(y,_),U=i.alloc(O);U.fill(1);var z=i.alloc(O);return z=r(x,z).update(U).update(i.from([0])).update(p).update(B).digest(),U=r(x,z).update(U).digest(),{k:z=r(x,z).update(U).update(i.from([1])).update(p).update(B).digest(),v:U=r(x,z).update(U).digest()}}function d(p,_){var y=new s(p),x=(p.length<<3)-_.bitLength();return x>0&&y.ishrn(x),y}function m(p,_,y){var x,S;do{for(x=i.alloc(0);8*x.length<p.bitLength();)_.v=r(y,_.k).update(_.v).digest(),x=i.concat([x,_.v]);S=d(x,p),_.k=r(y,_.k).update(_.v).update(i.from([0])).digest(),_.v=r(y,_.k).update(_.v).digest()}while(S.cmp(p)!==-1);return S}function v(p,_,y,x){return p.toRed(s.mont(y)).redPow(_).fromRed().mod(x)}t.exports=function(p,_,y,x,S){var O=u(_);if(O.curve){if(x!=="ecdsa"&&x!=="ecdsa/rsa")throw new Error("wrong private key type");return function(q,G){var tt=f[G.curve.join(".")];if(!tt)throw new Error("unknown curve "+G.curve.join("."));var K=new a(tt).keyFromPrivate(G.privateKey).sign(q);return i.from(K.toDER())}(p,O)}if(O.type==="dsa"){if(x!=="dsa")throw new Error("wrong private key type");return function(q,G,tt){for(var K,D=G.params.priv_key,N=G.params.p,Z=G.params.q,w=G.params.g,C=new s(0),k=d(q,Z).mod(Z),T=!1,R=c(D,Z,q,tt);T===!1;)K=m(Z,R,tt),C=v(w,K,N,Z),(T=K.invm(Z).imul(k.add(D.mul(C))).mod(Z)).cmpn(0)===0&&(T=!1,C=new s(0));return function(F,H){F=F.toArray(),H=H.toArray(),128&F[0]&&(F=[0].concat(F)),128&H[0]&&(H=[0].concat(H));var it=[48,F.length+H.length+4,2,F.length];return it=it.concat(F,[2,H.length],H),i.from(it)}(C,T)}(p,O,y)}if(x!=="rsa"&&x!=="ecdsa/rsa")throw new Error("wrong private key type");p=i.concat([S,p]);for(var B=O.modulus.byteLength(),U=[0,1];p.length+U.length+1<B;)U.push(255);U.push(0);for(var z=-1;++z<p.length;)U.push(p[z]);return o(U,O)},t.exports.getKey=c,t.exports.makeKey=m},{"./curves.json":212,"bn.js":186,"browserify-rsa":209,"create-hmac":388,elliptic:405,"parse-asn1":459,"safe-buffer":494}],215:[function(e,t,n){"use strict";var i=e("safe-buffer").Buffer,r=e("bn.js"),o=e("elliptic").ec,a=e("parse-asn1"),s=e("./curves.json");function u(f,c){if(f.cmpn(0)<=0)throw new Error("invalid sig");if(f.cmp(c)>=c)throw new Error("invalid sig")}t.exports=function(f,c,d,m,v){var p=a(d);if(p.type==="ec"){if(m!=="ecdsa"&&m!=="ecdsa/rsa")throw new Error("wrong public key type");return function(U,z,q){var G=s[q.data.algorithm.curve.join(".")];if(!G)throw new Error("unknown curve "+q.data.algorithm.curve.join("."));var tt=new o(G),K=q.data.subjectPrivateKey.data;return tt.verify(z,U,K)}(f,c,p)}if(p.type==="dsa"){if(m!=="dsa")throw new Error("wrong public key type");return function(U,z,q){var G=q.data.p,tt=q.data.q,K=q.data.g,D=q.data.pub_key,N=a.signature.decode(U,"der"),Z=N.s,w=N.r;u(Z,tt),u(w,tt);var C=r.mont(G),k=Z.invm(tt);return K.toRed(C).redPow(new r(z).mul(k).mod(tt)).fromRed().mul(D.toRed(C).redPow(w.mul(k).mod(tt)).fromRed()).mod(G).mod(tt).cmp(w)===0}(f,c,p)}if(m!=="rsa"&&m!=="ecdsa/rsa")throw new Error("wrong public key type");c=i.concat([v,c]);for(var _=p.modulus.byteLength(),y=[1],x=0;c.length+y.length+2<_;)y.push(255),x++;y.push(0);for(var S=-1;++S<c.length;)y.push(c[S]);y=i.from(y);var O=r.mont(p.modulus);f=(f=new r(f).toRed(O)).redPow(new r(p.publicExponent)),f=i.from(f.fromRed().toArray());var B=x<8?1:0;for(_=Math.min(f.length,y.length),f.length!==y.length&&(B=1),S=-1;++S<_;)B|=f[S]^y[S];return B===0}},{"./curves.json":212,"bn.js":186,elliptic:405,"parse-asn1":459,"safe-buffer":494}],216:[function(e,t,n){},{}],217:[function(e,t,n){"use strict";var i=e("buffer"),r=i.Buffer;function o(s,u){for(var f in s)u[f]=s[f]}function a(s,u,f){return r(s,u,f)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=i:(o(i,n),n.Buffer=a),o(r,a),a.from=function(s,u,f){if(typeof s=="number")throw new TypeError("Argument must not be a number");return r(s,u,f)},a.alloc=function(s,u,f){if(typeof s!="number")throw new TypeError("Argument must be a number");var c=r(s);return u!==void 0?typeof f=="string"?c.fill(u,f):c.fill(u):c.fill(0),c},a.allocUnsafe=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return r(s)},a.allocUnsafeSlow=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return i.SlowBuffer(s)}},{buffer:220}],218:[function(e,t,n){"use strict";var i=e("safe-buffer").Buffer,r=i.isEncoding||function(p){switch((p=""+p)&&p.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(p){var _;switch(this.encoding=function(y){var x=function(S){if(!S)return"utf8";for(var O;;)switch(S){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return S;default:if(O)return;S=(""+S).toLowerCase(),O=!0}}(y);if(typeof x!="string"&&(i.isEncoding===r||!r(y)))throw new Error("Unknown encoding: "+y);return x||y}(p),this.encoding){case"utf16le":this.text=u,this.end=f,_=4;break;case"utf8":this.fillLast=s,_=4;break;case"base64":this.text=c,this.end=d,_=3;break;default:return this.write=m,void(this.end=v)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(_)}function a(p){return p<=127?0:p>>5==6?2:p>>4==14?3:p>>3==30?4:p>>6==2?-1:-2}function s(p){var _=this.lastTotal-this.lastNeed,y=function(x,S,O){if((192&S[0])!=128)return x.lastNeed=0,"\uFFFD";if(x.lastNeed>1&&S.length>1){if((192&S[1])!=128)return x.lastNeed=1,"\uFFFD";if(x.lastNeed>2&&S.length>2&&(192&S[2])!=128)return x.lastNeed=2,"\uFFFD"}}(this,p);return y!==void 0?y:this.lastNeed<=p.length?(p.copy(this.lastChar,_,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(p.copy(this.lastChar,_,0,p.length),void(this.lastNeed-=p.length))}function u(p,_){if((p.length-_)%2==0){var y=p.toString("utf16le",_);if(y){var x=y.charCodeAt(y.length-1);if(x>=55296&&x<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=p[p.length-2],this.lastChar[1]=p[p.length-1],y.slice(0,-1)}return y}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=p[p.length-1],p.toString("utf16le",_,p.length-1)}function f(p){var _=p&&p.length?this.write(p):"";if(this.lastNeed){var y=this.lastTotal-this.lastNeed;return _+this.lastChar.toString("utf16le",0,y)}return _}function c(p,_){var y=(p.length-_)%3;return y===0?p.toString("base64",_):(this.lastNeed=3-y,this.lastTotal=3,y===1?this.lastChar[0]=p[p.length-1]:(this.lastChar[0]=p[p.length-2],this.lastChar[1]=p[p.length-1]),p.toString("base64",_,p.length-y))}function d(p){var _=p&&p.length?this.write(p):"";return this.lastNeed?_+this.lastChar.toString("base64",0,3-this.lastNeed):_}function m(p){return p.toString(this.encoding)}function v(p){return p&&p.length?this.write(p):""}n.StringDecoder=o,o.prototype.write=function(p){if(p.length===0)return"";var _,y;if(this.lastNeed){if((_=this.fillLast(p))===void 0)return"";y=this.lastNeed,this.lastNeed=0}else y=0;return y<p.length?_?_+this.text(p,y):this.text(p,y):_||""},o.prototype.end=function(p){var _=p&&p.length?this.write(p):"";return this.lastNeed?_+"\uFFFD":_},o.prototype.text=function(p,_){var y=function(S,O,B){var U=O.length-1;if(U<B)return 0;var z=a(O[U]);return z>=0?(z>0&&(S.lastNeed=z-1),z):--U<B||z===-2?0:(z=a(O[U]))>=0?(z>0&&(S.lastNeed=z-2),z):--U<B||z===-2?0:(z=a(O[U]))>=0?(z>0&&(z===2?z=0:S.lastNeed=z-3),z):0}(this,p,_);if(!this.lastNeed)return p.toString("utf8",_);this.lastTotal=y;var x=p.length-(y-this.lastNeed);return p.copy(this.lastChar,0,x),p.toString("utf8",_,x)},o.prototype.fillLast=function(p){if(this.lastNeed<=p.length)return p.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);p.copy(this.lastChar,this.lastTotal-this.lastNeed,0,p.length),this.lastNeed-=p.length}},{"safe-buffer":217}],219:[function(e,t,n){(function(i){(function(){"use strict";t.exports=function(r,o){for(var a=Math.min(r.length,o.length),s=new i(a),u=0;u<a;++u)s[u]=r[u]^o[u];return s}}).call(this)}).call(this,e("buffer").Buffer)},{buffer:220}],220:[function(e,t,n){(function(i){(function(){"use strict";var r=e("base64-js"),o=e("ieee754");n.Buffer=s,n.SlowBuffer=function(W){return+W!=W&&(W=0),s.alloc(+W)},n.INSPECT_MAX_BYTES=50;function a(W){if(W>2147483647)throw new RangeError('The value "'+W+'" is invalid for option "size"');var V=new Uint8Array(W);return V.__proto__=s.prototype,V}function s(W,V,rt){if(typeof W=="number"){if(typeof V=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return c(W)}return u(W,V,rt)}function u(W,V,rt){if(typeof W=="string")return function(_t,Ct){if(typeof Ct=="string"&&Ct!==""||(Ct="utf8"),!s.isEncoding(Ct))throw new TypeError("Unknown encoding: "+Ct);var Ft=0|v(_t,Ct),It=a(Ft),vt=It.write(_t,Ct);return vt!==Ft&&(It=It.slice(0,vt)),It}(W,V);if(ArrayBuffer.isView(W))return d(W);if(W==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof W);if($(W,ArrayBuffer)||W&&$(W.buffer,ArrayBuffer))return function(_t,Ct,Ft){if(Ct<0||_t.byteLength<Ct)throw new RangeError('"offset" is outside of buffer bounds');if(_t.byteLength<Ct+(Ft||0))throw new RangeError('"length" is outside of buffer bounds');var It;return It=Ct===void 0&&Ft===void 0?new Uint8Array(_t):Ft===void 0?new Uint8Array(_t,Ct):new Uint8Array(_t,Ct,Ft),It.__proto__=s.prototype,It}(W,V,rt);if(typeof W=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var mt=W.valueOf&&W.valueOf();if(mt!=null&&mt!==W)return s.from(mt,V,rt);var wt=function(_t){if(s.isBuffer(_t)){var Ct=0|m(_t.length),Ft=a(Ct);return Ft.length===0||_t.copy(Ft,0,0,Ct),Ft}if(_t.length!==void 0)return typeof _t.length!="number"||ct(_t.length)?a(0):d(_t);if(_t.type==="Buffer"&&Array.isArray(_t.data))return d(_t.data)}(W);if(wt)return wt;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof W[Symbol.toPrimitive]=="function")return s.from(W[Symbol.toPrimitive]("string"),V,rt);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof W)}function f(W){if(typeof W!="number")throw new TypeError('"size" argument must be of type number');if(W<0)throw new RangeError('The value "'+W+'" is invalid for option "size"')}function c(W){return f(W),a(W<0?0:0|m(W))}function d(W){for(var V=W.length<0?0:0|m(W.length),rt=a(V),mt=0;mt<V;mt+=1)rt[mt]=255&W[mt];return rt}function m(W){if(W>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|W}function v(W,V){if(s.isBuffer(W))return W.length;if(ArrayBuffer.isView(W)||$(W,ArrayBuffer))return W.byteLength;if(typeof W!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof W);var rt=W.length,mt=arguments.length>2&&arguments[2]===!0;if(!mt&&rt===0)return 0;for(var wt=!1;;)switch(V){case"ascii":case"latin1":case"binary":return rt;case"utf8":case"utf-8":return it(W).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*rt;case"hex":return rt>>>1;case"base64":return ot(W).length;default:if(wt)return mt?-1:it(W).length;V=(""+V).toLowerCase(),wt=!0}}function p(W,V,rt){var mt=!1;if((V===void 0||V<0)&&(V=0),V>this.length||((rt===void 0||rt>this.length)&&(rt=this.length),rt<=0)||(rt>>>=0)<=(V>>>=0))return"";for(W||(W="utf8");;)switch(W){case"hex":return N(this,V,rt);case"utf8":case"utf-8":return tt(this,V,rt);case"ascii":return K(this,V,rt);case"latin1":case"binary":return D(this,V,rt);case"base64":return G(this,V,rt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z(this,V,rt);default:if(mt)throw new TypeError("Unknown encoding: "+W);W=(W+"").toLowerCase(),mt=!0}}function _(W,V,rt){var mt=W[V];W[V]=W[rt],W[rt]=mt}function y(W,V,rt,mt,wt){if(W.length===0)return-1;if(typeof rt=="string"?(mt=rt,rt=0):rt>2147483647?rt=2147483647:rt<-2147483648&&(rt=-2147483648),ct(rt=+rt)&&(rt=wt?0:W.length-1),rt<0&&(rt=W.length+rt),rt>=W.length){if(wt)return-1;rt=W.length-1}else if(rt<0){if(!wt)return-1;rt=0}if(typeof V=="string"&&(V=s.from(V,mt)),s.isBuffer(V))return V.length===0?-1:x(W,V,rt,mt,wt);if(typeof V=="number")return V&=255,typeof Uint8Array.prototype.indexOf=="function"?wt?Uint8Array.prototype.indexOf.call(W,V,rt):Uint8Array.prototype.lastIndexOf.call(W,V,rt):x(W,[V],rt,mt,wt);throw new TypeError("val must be string, number or Buffer")}function x(W,V,rt,mt,wt){var _t,Ct=1,Ft=W.length,It=V.length;if(mt!==void 0&&((mt=String(mt).toLowerCase())==="ucs2"||mt==="ucs-2"||mt==="utf16le"||mt==="utf-16le")){if(W.length<2||V.length<2)return-1;Ct=2,Ft/=2,It/=2,rt/=2}function vt(Q,Y){return Ct===1?Q[Y]:Q.readUInt16BE(Y*Ct)}if(wt){var kt=-1;for(_t=rt;_t<Ft;_t++)if(vt(W,_t)===vt(V,kt===-1?0:_t-kt)){if(kt===-1&&(kt=_t),_t-kt+1===It)return kt*Ct}else kt!==-1&&(_t-=_t-kt),kt=-1}else for(rt+It>Ft&&(rt=Ft-It),_t=rt;_t>=0;_t--){for(var gt=!0,ut=0;ut<It;ut++)if(vt(W,_t+ut)!==vt(V,ut)){gt=!1;break}if(gt)return _t}return-1}function S(W,V,rt,mt){rt=Number(rt)||0;var wt=W.length-rt;mt?(mt=Number(mt))>wt&&(mt=wt):mt=wt;var _t=V.length;mt>_t/2&&(mt=_t/2);for(var Ct=0;Ct<mt;++Ct){var Ft=parseInt(V.substr(2*Ct,2),16);if(ct(Ft))return Ct;W[rt+Ct]=Ft}return Ct}function O(W,V,rt,mt){return dt(it(V,W.length-rt),W,rt,mt)}function B(W,V,rt,mt){return dt(function(wt){for(var _t=[],Ct=0;Ct<wt.length;++Ct)_t.push(255&wt.charCodeAt(Ct));return _t}(V),W,rt,mt)}function U(W,V,rt,mt){return B(W,V,rt,mt)}function z(W,V,rt,mt){return dt(ot(V),W,rt,mt)}function q(W,V,rt,mt){return dt(function(wt,_t){for(var Ct,Ft,It,vt=[],kt=0;kt<wt.length&&!((_t-=2)<0);++kt)Ct=wt.charCodeAt(kt),Ft=Ct>>8,It=Ct%256,vt.push(It),vt.push(Ft);return vt}(V,W.length-rt),W,rt,mt)}function G(W,V,rt){return V===0&&rt===W.length?r.fromByteArray(W):r.fromByteArray(W.slice(V,rt))}function tt(W,V,rt){rt=Math.min(W.length,rt);for(var mt=[],wt=V;wt<rt;){var _t,Ct,Ft,It,vt=W[wt],kt=null,gt=vt>239?4:vt>223?3:vt>191?2:1;if(wt+gt<=rt)switch(gt){case 1:vt<128&&(kt=vt);break;case 2:(192&(_t=W[wt+1]))==128&&(It=(31&vt)<<6|63&_t)>127&&(kt=It);break;case 3:_t=W[wt+1],Ct=W[wt+2],(192&_t)==128&&(192&Ct)==128&&(It=(15&vt)<<12|(63&_t)<<6|63&Ct)>2047&&(It<55296||It>57343)&&(kt=It);break;case 4:_t=W[wt+1],Ct=W[wt+2],Ft=W[wt+3],(192&_t)==128&&(192&Ct)==128&&(192&Ft)==128&&(It=(15&vt)<<18|(63&_t)<<12|(63&Ct)<<6|63&Ft)>65535&&It<1114112&&(kt=It)}kt===null?(kt=65533,gt=1):kt>65535&&(kt-=65536,mt.push(kt>>>10&1023|55296),kt=56320|1023&kt),mt.push(kt),wt+=gt}return function(ut){var Q=ut.length;if(Q<=4096)return String.fromCharCode.apply(String,ut);for(var Y="",et=0;et<Q;)Y+=String.fromCharCode.apply(String,ut.slice(et,et+=4096));return Y}(mt)}n.kMaxLength=2147483647,s.TYPED_ARRAY_SUPPORT=function(){try{var W=new Uint8Array(1);return W.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},W.foo()===42}catch{return!1}}(),s.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),s.poolSize=8192,s.from=function(W,V,rt){return u(W,V,rt)},s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,s.alloc=function(W,V,rt){return function(mt,wt,_t){return f(mt),mt<=0?a(mt):wt!==void 0?typeof _t=="string"?a(mt).fill(wt,_t):a(mt).fill(wt):a(mt)}(W,V,rt)},s.allocUnsafe=function(W){return c(W)},s.allocUnsafeSlow=function(W){return c(W)},s.isBuffer=function(W){return W!=null&&W._isBuffer===!0&&W!==s.prototype},s.compare=function(W,V){if($(W,Uint8Array)&&(W=s.from(W,W.offset,W.byteLength)),$(V,Uint8Array)&&(V=s.from(V,V.offset,V.byteLength)),!s.isBuffer(W)||!s.isBuffer(V))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(W===V)return 0;for(var rt=W.length,mt=V.length,wt=0,_t=Math.min(rt,mt);wt<_t;++wt)if(W[wt]!==V[wt]){rt=W[wt],mt=V[wt];break}return rt<mt?-1:mt<rt?1:0},s.isEncoding=function(W){switch(String(W).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(W,V){if(!Array.isArray(W))throw new TypeError('"list" argument must be an Array of Buffers');if(W.length===0)return s.alloc(0);var rt;if(V===void 0)for(V=0,rt=0;rt<W.length;++rt)V+=W[rt].length;var mt=s.allocUnsafe(V),wt=0;for(rt=0;rt<W.length;++rt){var _t=W[rt];if($(_t,Uint8Array)&&(_t=s.from(_t)),!s.isBuffer(_t))throw new TypeError('"list" argument must be an Array of Buffers');_t.copy(mt,wt),wt+=_t.length}return mt},s.byteLength=v,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var W=this.length;if(W%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var V=0;V<W;V+=2)_(this,V,V+1);return this},s.prototype.swap32=function(){var W=this.length;if(W%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var V=0;V<W;V+=4)_(this,V,V+3),_(this,V+1,V+2);return this},s.prototype.swap64=function(){var W=this.length;if(W%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var V=0;V<W;V+=8)_(this,V,V+7),_(this,V+1,V+6),_(this,V+2,V+5),_(this,V+3,V+4);return this},s.prototype.toString=function(){var W=this.length;return W===0?"":arguments.length===0?tt(this,0,W):p.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(W){if(!s.isBuffer(W))throw new TypeError("Argument must be a Buffer");return this===W||s.compare(this,W)===0},s.prototype.inspect=function(){var W="",V=n.INSPECT_MAX_BYTES;return W=this.toString("hex",0,V).replace(/(.{2})/g,"$1 ").trim(),this.length>V&&(W+=" ... "),"<Buffer "+W+">"},s.prototype.compare=function(W,V,rt,mt,wt){if($(W,Uint8Array)&&(W=s.from(W,W.offset,W.byteLength)),!s.isBuffer(W))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof W);if(V===void 0&&(V=0),rt===void 0&&(rt=W?W.length:0),mt===void 0&&(mt=0),wt===void 0&&(wt=this.length),V<0||rt>W.length||mt<0||wt>this.length)throw new RangeError("out of range index");if(mt>=wt&&V>=rt)return 0;if(mt>=wt)return-1;if(V>=rt)return 1;if(this===W)return 0;for(var _t=(wt>>>=0)-(mt>>>=0),Ct=(rt>>>=0)-(V>>>=0),Ft=Math.min(_t,Ct),It=this.slice(mt,wt),vt=W.slice(V,rt),kt=0;kt<Ft;++kt)if(It[kt]!==vt[kt]){_t=It[kt],Ct=vt[kt];break}return _t<Ct?-1:Ct<_t?1:0},s.prototype.includes=function(W,V,rt){return this.indexOf(W,V,rt)!==-1},s.prototype.indexOf=function(W,V,rt){return y(this,W,V,rt,!0)},s.prototype.lastIndexOf=function(W,V,rt){return y(this,W,V,rt,!1)},s.prototype.write=function(W,V,rt,mt){if(V===void 0)mt="utf8",rt=this.length,V=0;else if(rt===void 0&&typeof V=="string")mt=V,rt=this.length,V=0;else{if(!isFinite(V))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");V>>>=0,isFinite(rt)?(rt>>>=0,mt===void 0&&(mt="utf8")):(mt=rt,rt=void 0)}var wt=this.length-V;if((rt===void 0||rt>wt)&&(rt=wt),W.length>0&&(rt<0||V<0)||V>this.length)throw new RangeError("Attempt to write outside buffer bounds");mt||(mt="utf8");for(var _t=!1;;)switch(mt){case"hex":return S(this,W,V,rt);case"utf8":case"utf-8":return O(this,W,V,rt);case"ascii":return B(this,W,V,rt);case"latin1":case"binary":return U(this,W,V,rt);case"base64":return z(this,W,V,rt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,W,V,rt);default:if(_t)throw new TypeError("Unknown encoding: "+mt);mt=(""+mt).toLowerCase(),_t=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function K(W,V,rt){var mt="";rt=Math.min(W.length,rt);for(var wt=V;wt<rt;++wt)mt+=String.fromCharCode(127&W[wt]);return mt}function D(W,V,rt){var mt="";rt=Math.min(W.length,rt);for(var wt=V;wt<rt;++wt)mt+=String.fromCharCode(W[wt]);return mt}function N(W,V,rt){var mt=W.length;(!V||V<0)&&(V=0),(!rt||rt<0||rt>mt)&&(rt=mt);for(var wt="",_t=V;_t<rt;++_t)wt+=H(W[_t]);return wt}function Z(W,V,rt){for(var mt=W.slice(V,rt),wt="",_t=0;_t<mt.length;_t+=2)wt+=String.fromCharCode(mt[_t]+256*mt[_t+1]);return wt}function w(W,V,rt){if(W%1!=0||W<0)throw new RangeError("offset is not uint");if(W+V>rt)throw new RangeError("Trying to access beyond buffer length")}function C(W,V,rt,mt,wt,_t){if(!s.isBuffer(W))throw new TypeError('"buffer" argument must be a Buffer instance');if(V>wt||V<_t)throw new RangeError('"value" argument is out of bounds');if(rt+mt>W.length)throw new RangeError("Index out of range")}function k(W,V,rt,mt,wt,_t){if(rt+mt>W.length)throw new RangeError("Index out of range");if(rt<0)throw new RangeError("Index out of range")}function T(W,V,rt,mt,wt){return V=+V,rt>>>=0,wt||k(W,0,rt,4),o.write(W,V,rt,mt,23,4),rt+4}function R(W,V,rt,mt,wt){return V=+V,rt>>>=0,wt||k(W,0,rt,8),o.write(W,V,rt,mt,52,8),rt+8}s.prototype.slice=function(W,V){var rt=this.length;(W=~~W)<0?(W+=rt)<0&&(W=0):W>rt&&(W=rt),(V=V===void 0?rt:~~V)<0?(V+=rt)<0&&(V=0):V>rt&&(V=rt),V<W&&(V=W);var mt=this.subarray(W,V);return mt.__proto__=s.prototype,mt},s.prototype.readUIntLE=function(W,V,rt){W>>>=0,V>>>=0,rt||w(W,V,this.length);for(var mt=this[W],wt=1,_t=0;++_t<V&&(wt*=256);)mt+=this[W+_t]*wt;return mt},s.prototype.readUIntBE=function(W,V,rt){W>>>=0,V>>>=0,rt||w(W,V,this.length);for(var mt=this[W+--V],wt=1;V>0&&(wt*=256);)mt+=this[W+--V]*wt;return mt},s.prototype.readUInt8=function(W,V){return W>>>=0,V||w(W,1,this.length),this[W]},s.prototype.readUInt16LE=function(W,V){return W>>>=0,V||w(W,2,this.length),this[W]|this[W+1]<<8},s.prototype.readUInt16BE=function(W,V){return W>>>=0,V||w(W,2,this.length),this[W]<<8|this[W+1]},s.prototype.readUInt32LE=function(W,V){return W>>>=0,V||w(W,4,this.length),(this[W]|this[W+1]<<8|this[W+2]<<16)+16777216*this[W+3]},s.prototype.readUInt32BE=function(W,V){return W>>>=0,V||w(W,4,this.length),16777216*this[W]+(this[W+1]<<16|this[W+2]<<8|this[W+3])},s.prototype.readIntLE=function(W,V,rt){W>>>=0,V>>>=0,rt||w(W,V,this.length);for(var mt=this[W],wt=1,_t=0;++_t<V&&(wt*=256);)mt+=this[W+_t]*wt;return mt>=(wt*=128)&&(mt-=Math.pow(2,8*V)),mt},s.prototype.readIntBE=function(W,V,rt){W>>>=0,V>>>=0,rt||w(W,V,this.length);for(var mt=V,wt=1,_t=this[W+--mt];mt>0&&(wt*=256);)_t+=this[W+--mt]*wt;return _t>=(wt*=128)&&(_t-=Math.pow(2,8*V)),_t},s.prototype.readInt8=function(W,V){return W>>>=0,V||w(W,1,this.length),128&this[W]?-1*(255-this[W]+1):this[W]},s.prototype.readInt16LE=function(W,V){W>>>=0,V||w(W,2,this.length);var rt=this[W]|this[W+1]<<8;return 32768&rt?4294901760|rt:rt},s.prototype.readInt16BE=function(W,V){W>>>=0,V||w(W,2,this.length);var rt=this[W+1]|this[W]<<8;return 32768&rt?4294901760|rt:rt},s.prototype.readInt32LE=function(W,V){return W>>>=0,V||w(W,4,this.length),this[W]|this[W+1]<<8|this[W+2]<<16|this[W+3]<<24},s.prototype.readInt32BE=function(W,V){return W>>>=0,V||w(W,4,this.length),this[W]<<24|this[W+1]<<16|this[W+2]<<8|this[W+3]},s.prototype.readFloatLE=function(W,V){return W>>>=0,V||w(W,4,this.length),o.read(this,W,!0,23,4)},s.prototype.readFloatBE=function(W,V){return W>>>=0,V||w(W,4,this.length),o.read(this,W,!1,23,4)},s.prototype.readDoubleLE=function(W,V){return W>>>=0,V||w(W,8,this.length),o.read(this,W,!0,52,8)},s.prototype.readDoubleBE=function(W,V){return W>>>=0,V||w(W,8,this.length),o.read(this,W,!1,52,8)},s.prototype.writeUIntLE=function(W,V,rt,mt){W=+W,V>>>=0,rt>>>=0,mt||C(this,W,V,rt,Math.pow(2,8*rt)-1,0);var wt=1,_t=0;for(this[V]=255&W;++_t<rt&&(wt*=256);)this[V+_t]=W/wt&255;return V+rt},s.prototype.writeUIntBE=function(W,V,rt,mt){W=+W,V>>>=0,rt>>>=0,mt||C(this,W,V,rt,Math.pow(2,8*rt)-1,0);var wt=rt-1,_t=1;for(this[V+wt]=255&W;--wt>=0&&(_t*=256);)this[V+wt]=W/_t&255;return V+rt},s.prototype.writeUInt8=function(W,V,rt){return W=+W,V>>>=0,rt||C(this,W,V,1,255,0),this[V]=255&W,V+1},s.prototype.writeUInt16LE=function(W,V,rt){return W=+W,V>>>=0,rt||C(this,W,V,2,65535,0),this[V]=255&W,this[V+1]=W>>>8,V+2},s.prototype.writeUInt16BE=function(W,V,rt){return W=+W,V>>>=0,rt||C(this,W,V,2,65535,0),this[V]=W>>>8,this[V+1]=255&W,V+2},s.prototype.writeUInt32LE=function(W,V,rt){return W=+W,V>>>=0,rt||C(this,W,V,4,4294967295,0),this[V+3]=W>>>24,this[V+2]=W>>>16,this[V+1]=W>>>8,this[V]=255&W,V+4},s.prototype.writeUInt32BE=function(W,V,rt){return W=+W,V>>>=0,rt||C(this,W,V,4,4294967295,0),this[V]=W>>>24,this[V+1]=W>>>16,this[V+2]=W>>>8,this[V+3]=255&W,V+4},s.prototype.writeIntLE=function(W,V,rt,mt){if(W=+W,V>>>=0,!mt){var wt=Math.pow(2,8*rt-1);C(this,W,V,rt,wt-1,-wt)}var _t=0,Ct=1,Ft=0;for(this[V]=255&W;++_t<rt&&(Ct*=256);)W<0&&Ft===0&&this[V+_t-1]!==0&&(Ft=1),this[V+_t]=(W/Ct>>0)-Ft&255;return V+rt},s.prototype.writeIntBE=function(W,V,rt,mt){if(W=+W,V>>>=0,!mt){var wt=Math.pow(2,8*rt-1);C(this,W,V,rt,wt-1,-wt)}var _t=rt-1,Ct=1,Ft=0;for(this[V+_t]=255&W;--_t>=0&&(Ct*=256);)W<0&&Ft===0&&this[V+_t+1]!==0&&(Ft=1),this[V+_t]=(W/Ct>>0)-Ft&255;return V+rt},s.prototype.writeInt8=function(W,V,rt){return W=+W,V>>>=0,rt||C(this,W,V,1,127,-128),W<0&&(W=255+W+1),this[V]=255&W,V+1},s.prototype.writeInt16LE=function(W,V,rt){return W=+W,V>>>=0,rt||C(this,W,V,2,32767,-32768),this[V]=255&W,this[V+1]=W>>>8,V+2},s.prototype.writeInt16BE=function(W,V,rt){return W=+W,V>>>=0,rt||C(this,W,V,2,32767,-32768),this[V]=W>>>8,this[V+1]=255&W,V+2},s.prototype.writeInt32LE=function(W,V,rt){return W=+W,V>>>=0,rt||C(this,W,V,4,2147483647,-2147483648),this[V]=255&W,this[V+1]=W>>>8,this[V+2]=W>>>16,this[V+3]=W>>>24,V+4},s.prototype.writeInt32BE=function(W,V,rt){return W=+W,V>>>=0,rt||C(this,W,V,4,2147483647,-2147483648),W<0&&(W=4294967295+W+1),this[V]=W>>>24,this[V+1]=W>>>16,this[V+2]=W>>>8,this[V+3]=255&W,V+4},s.prototype.writeFloatLE=function(W,V,rt){return T(this,W,V,!0,rt)},s.prototype.writeFloatBE=function(W,V,rt){return T(this,W,V,!1,rt)},s.prototype.writeDoubleLE=function(W,V,rt){return R(this,W,V,!0,rt)},s.prototype.writeDoubleBE=function(W,V,rt){return R(this,W,V,!1,rt)},s.prototype.copy=function(W,V,rt,mt){if(!s.isBuffer(W))throw new TypeError("argument should be a Buffer");if(rt||(rt=0),mt||mt===0||(mt=this.length),V>=W.length&&(V=W.length),V||(V=0),mt>0&&mt<rt&&(mt=rt),mt===rt||W.length===0||this.length===0)return 0;if(V<0)throw new RangeError("targetStart out of bounds");if(rt<0||rt>=this.length)throw new RangeError("Index out of range");if(mt<0)throw new RangeError("sourceEnd out of bounds");mt>this.length&&(mt=this.length),W.length-V<mt-rt&&(mt=W.length-V+rt);var wt=mt-rt;if(this===W&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(V,rt,mt);else if(this===W&&rt<V&&V<mt)for(var _t=wt-1;_t>=0;--_t)W[_t+V]=this[_t+rt];else Uint8Array.prototype.set.call(W,this.subarray(rt,mt),V);return wt},s.prototype.fill=function(W,V,rt,mt){if(typeof W=="string"){if(typeof V=="string"?(mt=V,V=0,rt=this.length):typeof rt=="string"&&(mt=rt,rt=this.length),mt!==void 0&&typeof mt!="string")throw new TypeError("encoding must be a string");if(typeof mt=="string"&&!s.isEncoding(mt))throw new TypeError("Unknown encoding: "+mt);if(W.length===1){var wt=W.charCodeAt(0);(mt==="utf8"&&wt<128||mt==="latin1")&&(W=wt)}}else typeof W=="number"&&(W&=255);if(V<0||this.length<V||this.length<rt)throw new RangeError("Out of range index");if(rt<=V)return this;var _t;if(V>>>=0,rt=rt===void 0?this.length:rt>>>0,W||(W=0),typeof W=="number")for(_t=V;_t<rt;++_t)this[_t]=W;else{var Ct=s.isBuffer(W)?W:s.from(W,mt),Ft=Ct.length;if(Ft===0)throw new TypeError('The value "'+W+'" is invalid for argument "value"');for(_t=0;_t<rt-V;++_t)this[_t+V]=Ct[_t%Ft]}return this};var F=/[^+/0-9A-Za-z-_]/g;function H(W){return W<16?"0"+W.toString(16):W.toString(16)}function it(W,V){var rt;V=V||1/0;for(var mt=W.length,wt=null,_t=[],Ct=0;Ct<mt;++Ct){if((rt=W.charCodeAt(Ct))>55295&&rt<57344){if(!wt){if(rt>56319){(V-=3)>-1&&_t.push(239,191,189);continue}if(Ct+1===mt){(V-=3)>-1&&_t.push(239,191,189);continue}wt=rt;continue}if(rt<56320){(V-=3)>-1&&_t.push(239,191,189),wt=rt;continue}rt=65536+(wt-55296<<10|rt-56320)}else wt&&(V-=3)>-1&&_t.push(239,191,189);if(wt=null,rt<128){if((V-=1)<0)break;_t.push(rt)}else if(rt<2048){if((V-=2)<0)break;_t.push(rt>>6|192,63&rt|128)}else if(rt<65536){if((V-=3)<0)break;_t.push(rt>>12|224,rt>>6&63|128,63&rt|128)}else{if(!(rt<1114112))throw new Error("Invalid code point");if((V-=4)<0)break;_t.push(rt>>18|240,rt>>12&63|128,rt>>6&63|128,63&rt|128)}}return _t}function ot(W){return r.toByteArray(function(V){if((V=(V=V.split("=")[0]).trim().replace(F,"")).length<2)return"";for(;V.length%4!=0;)V+="=";return V}(W))}function dt(W,V,rt,mt){for(var wt=0;wt<mt&&!(wt+rt>=V.length||wt>=W.length);++wt)V[wt+rt]=W[wt];return wt}function $(W,V){return W instanceof V||W!=null&&W.constructor!=null&&W.constructor.name!=null&&W.constructor.name===V.name}function ct(W){return W!=W}}).call(this)}).call(this,e("buffer").Buffer)},{"base64-js":185,buffer:220,ieee754:439}],221:[function(e,t,n){"use strict";var i=e("safe-buffer").Buffer,r=e("stream").Transform,o=e("string_decoder").StringDecoder;function a(s){r.call(this),this.hashMode=typeof s=="string",this.hashMode?this[s]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}e("inherits")(a,r),a.prototype.update=function(s,u,f){typeof s=="string"&&(s=i.from(s,u));var c=this._update(s);return this.hashMode?this:(f&&(c=this._toString(c,f)),c)},a.prototype.setAutoPadding=function(){},a.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},a.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},a.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},a.prototype._transform=function(s,u,f){var c;try{this.hashMode?this._update(s):this.push(this._update(s))}catch(d){c=d}finally{f(c)}},a.prototype._flush=function(s){var u;try{this.push(this.__final())}catch(f){u=f}s(u)},a.prototype._finalOrDigest=function(s){var u=this.__final()||i.alloc(0);return s&&(u=this._toString(u,s,!0)),u},a.prototype._toString=function(s,u,f){if(this._decoder||(this._decoder=new o(u),this._encoding=u),this._encoding!==u)throw new Error("can't switch encodings");var c=this._decoder.write(s);return f&&(c+=this._decoder.end()),c},t.exports=a},{inherits:440,"safe-buffer":494,stream:505,string_decoder:218}],222:[function(e,t,n){"use strict";var i=e("../internals/is-callable"),r=e("../internals/try-to-string"),o=TypeError;t.exports=function(a){if(i(a))return a;throw new o(r(a)+" is not a function")}},{"../internals/is-callable":285,"../internals/try-to-string":349}],223:[function(e,t,n){"use strict";var i=e("../internals/is-constructor"),r=e("../internals/try-to-string"),o=TypeError;t.exports=function(a){if(i(a))return a;throw new o(r(a)+" is not a constructor")}},{"../internals/is-constructor":286,"../internals/try-to-string":349}],224:[function(e,t,n){"use strict";var i=e("../internals/is-callable"),r=String,o=TypeError;t.exports=function(a){if(typeof a=="object"||i(a))return a;throw new o("Can't set "+r(a)+" as a prototype")}},{"../internals/is-callable":285}],225:[function(e,t,n){"use strict";var i=e("../internals/well-known-symbol"),r=e("../internals/object-create"),o=e("../internals/object-define-property").f,a=i("unscopables"),s=Array.prototype;s[a]===void 0&&o(s,a,{configurable:!0,value:r(null)}),t.exports=function(u){s[a][u]=!0}},{"../internals/object-create":306,"../internals/object-define-property":308,"../internals/well-known-symbol":357}],226:[function(e,t,n){"use strict";var i=e("../internals/object-is-prototype-of"),r=TypeError;t.exports=function(o,a){if(i(a,o))return o;throw new r("Incorrect invocation")}},{"../internals/object-is-prototype-of":314}],227:[function(e,t,n){"use strict";var i=e("../internals/is-object"),r=String,o=TypeError;t.exports=function(a){if(i(a))return a;throw new o(r(a)+" is not an object")}},{"../internals/is-object":289}],228:[function(e,t,n){"use strict";var i=e("../internals/to-indexed-object"),r=e("../internals/to-absolute-index"),o=e("../internals/length-of-array-like"),a=function(s){return function(u,f,c){var d,m=i(u),v=o(m),p=r(c,v);if(s&&f!=f){for(;v>p;)if((d=m[p++])!=d)return!0}else for(;v>p;p++)if((s||p in m)&&m[p]===f)return s||p||0;return!s&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},{"../internals/length-of-array-like":299,"../internals/to-absolute-index":340,"../internals/to-indexed-object":341}],229:[function(e,t,n){"use strict";var i=e("../internals/function-bind-context"),r=e("../internals/function-uncurry-this"),o=e("../internals/indexed-object"),a=e("../internals/to-object"),s=e("../internals/length-of-array-like"),u=e("../internals/array-species-create"),f=r([].push),c=function(d){var m=d===1,v=d===2,p=d===3,_=d===4,y=d===6,x=d===7,S=d===5||y;return function(O,B,U,z){for(var q,G,tt=a(O),K=o(tt),D=i(B,U),N=s(K),Z=0,w=z||u,C=m?w(O,N):v||x?w(O,0):void 0;N>Z;Z++)if((S||Z in K)&&(G=D(q=K[Z],Z,tt),d))if(m)C[Z]=G;else if(G)switch(d){case 3:return!0;case 5:return q;case 6:return Z;case 2:f(C,q)}else switch(d){case 4:return!1;case 7:f(C,q)}return y?-1:p||_?_:C}};t.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterReject:c(7)}},{"../internals/array-species-create":233,"../internals/function-bind-context":262,"../internals/function-uncurry-this":268,"../internals/indexed-object":280,"../internals/length-of-array-like":299,"../internals/to-object":344}],230:[function(e,t,n){"use strict";var i=e("../internals/to-absolute-index"),r=e("../internals/length-of-array-like"),o=e("../internals/create-property"),a=Array,s=Math.max;t.exports=function(u,f,c){for(var d=r(u),m=i(f,d),v=i(c===void 0?d:c,d),p=a(s(v-m,0)),_=0;m<v;m++,_++)o(p,_,u[m]);return p.length=_,p}},{"../internals/create-property":243,"../internals/length-of-array-like":299,"../internals/to-absolute-index":340}],231:[function(e,t,n){"use strict";var i=e("../internals/function-uncurry-this");t.exports=i([].slice)},{"../internals/function-uncurry-this":268}],232:[function(e,t,n){"use strict";var i=e("../internals/is-array"),r=e("../internals/is-constructor"),o=e("../internals/is-object"),a=e("../internals/well-known-symbol")("species"),s=Array;t.exports=function(u){var f;return i(u)&&(f=u.constructor,(r(f)&&(f===s||i(f.prototype))||o(f)&&(f=f[a])===null)&&(f=void 0)),f===void 0?s:f}},{"../internals/is-array":284,"../internals/is-constructor":286,"../internals/is-object":289,"../internals/well-known-symbol":357}],233:[function(e,t,n){"use strict";var i=e("../internals/array-species-constructor");t.exports=function(r,o){return new(i(r))(o===0?0:o)}},{"../internals/array-species-constructor":232}],234:[function(e,t,n){"use strict";var i=e("../internals/well-known-symbol")("iterator"),r=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){r=!0}};a[i]=function(){return this},Array.from(a,function(){throw 2})}catch{}t.exports=function(s,u){try{if(!u&&!r)return!1}catch{return!1}var f=!1;try{var c={};c[i]=function(){return{next:function(){return{done:f=!0}}}},s(c)}catch{}return f}},{"../internals/well-known-symbol":357}],235:[function(e,t,n){"use strict";var i=e("../internals/function-uncurry-this"),r=i({}.toString),o=i("".slice);t.exports=function(a){return o(r(a),8,-1)}},{"../internals/function-uncurry-this":268}],236:[function(e,t,n){"use strict";var i=e("../internals/to-string-tag-support"),r=e("../internals/is-callable"),o=e("../internals/classof-raw"),a=e("../internals/well-known-symbol")("toStringTag"),s=Object,u=o(function(){return arguments}())==="Arguments";t.exports=i?o:function(f){var c,d,m;return f===void 0?"Undefined":f===null?"Null":typeof(d=function(v,p){try{return v[p]}catch{}}(c=s(f),a))=="string"?d:u?o(c):(m=o(c))==="Object"&&r(c.callee)?"Arguments":m}},{"../internals/classof-raw":235,"../internals/is-callable":285,"../internals/to-string-tag-support":347,"../internals/well-known-symbol":357}],237:[function(e,t,n){"use strict";var i=e("../internals/has-own-property"),r=e("../internals/own-keys"),o=e("../internals/object-get-own-property-descriptor"),a=e("../internals/object-define-property");t.exports=function(s,u,f){for(var c=r(u),d=a.f,m=o.f,v=0;v<c.length;v++){var p=c[v];i(s,p)||f&&i(f,p)||d(s,p,m(u,p))}}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/object-get-own-property-descriptor":309,"../internals/own-keys":321}],238:[function(e,t,n){"use strict";var i=e("../internals/well-known-symbol")("match");t.exports=function(r){var o=/./;try{"/./"[r](o)}catch{try{return o[i]=!1,"/./"[r](o)}catch{}}return!1}},{"../internals/well-known-symbol":357}],239:[function(e,t,n){"use strict";var i=e("../internals/fails");t.exports=!i(function(){function r(){}return r.prototype.constructor=null,Object.getPrototypeOf(new r)!==r.prototype})},{"../internals/fails":260}],240:[function(e,t,n){"use strict";t.exports=function(i,r){return{value:i,done:r}}},{}],241:[function(e,t,n){"use strict";var i=e("../internals/descriptors"),r=e("../internals/object-define-property"),o=e("../internals/create-property-descriptor");t.exports=i?function(a,s,u){return r.f(a,s,o(1,u))}:function(a,s,u){return a[s]=u,a}},{"../internals/create-property-descriptor":242,"../internals/descriptors":247,"../internals/object-define-property":308}],242:[function(e,t,n){"use strict";t.exports=function(i,r){return{enumerable:!(1&i),configurable:!(2&i),writable:!(4&i),value:r}}},{}],243:[function(e,t,n){"use strict";var i=e("../internals/to-property-key"),r=e("../internals/object-define-property"),o=e("../internals/create-property-descriptor");t.exports=function(a,s,u){var f=i(s);f in a?r.f(a,f,o(0,u)):a[f]=u}},{"../internals/create-property-descriptor":242,"../internals/object-define-property":308,"../internals/to-property-key":346}],244:[function(e,t,n){"use strict";var i=e("../internals/make-built-in"),r=e("../internals/object-define-property");t.exports=function(o,a,s){return s.get&&i(s.get,a,{getter:!0}),s.set&&i(s.set,a,{setter:!0}),r.f(o,a,s)}},{"../internals/make-built-in":300,"../internals/object-define-property":308}],245:[function(e,t,n){"use strict";var i=e("../internals/is-callable"),r=e("../internals/object-define-property"),o=e("../internals/make-built-in"),a=e("../internals/define-global-property");t.exports=function(s,u,f,c){c||(c={});var d=c.enumerable,m=c.name!==void 0?c.name:u;if(i(f)&&o(f,m,c),c.global)d?s[u]=f:a(u,f);else{try{c.unsafe?s[u]&&(d=!0):delete s[u]}catch{}d?s[u]=f:r.f(s,u,{value:f,enumerable:!1,configurable:!c.nonConfigurable,writable:!c.nonWritable})}return s}},{"../internals/define-global-property":246,"../internals/is-callable":285,"../internals/make-built-in":300,"../internals/object-define-property":308}],246:[function(e,t,n){"use strict";var i=e("../internals/global"),r=Object.defineProperty;t.exports=function(o,a){try{r(i,o,{value:a,configurable:!0,writable:!0})}catch{i[o]=a}return a}},{"../internals/global":274}],247:[function(e,t,n){"use strict";var i=e("../internals/fails");t.exports=!i(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})},{"../internals/fails":260}],248:[function(e,t,n){"use strict";var i=typeof document=="object"&&document.all,r=i===void 0&&i!==void 0;t.exports={all:i,IS_HTMLDDA:r}},{}],249:[function(e,t,n){"use strict";var i=e("../internals/global"),r=e("../internals/is-object"),o=i.document,a=r(o)&&r(o.createElement);t.exports=function(s){return a?o.createElement(s):{}}},{"../internals/global":274,"../internals/is-object":289}],250:[function(e,t,n){"use strict";var i=e("../internals/engine-is-deno"),r=e("../internals/engine-is-node");t.exports=!i&&!r&&typeof window=="object"&&typeof document=="object"},{"../internals/engine-is-deno":251,"../internals/engine-is-node":254}],251:[function(e,t,n){"use strict";t.exports=typeof Deno=="object"&&Deno&&typeof Deno.version=="object"},{}],252:[function(e,t,n){"use strict";var i=e("../internals/engine-user-agent");t.exports=/ipad|iphone|ipod/i.test(i)&&typeof Pebble<"u"},{"../internals/engine-user-agent":256}],253:[function(e,t,n){"use strict";var i=e("../internals/engine-user-agent");t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(i)},{"../internals/engine-user-agent":256}],254:[function(e,t,n){"use strict";var i=e("../internals/global"),r=e("../internals/classof-raw");t.exports=r(i.process)==="process"},{"../internals/classof-raw":235,"../internals/global":274}],255:[function(e,t,n){"use strict";var i=e("../internals/engine-user-agent");t.exports=/web0s(?!.*chrome)/i.test(i)},{"../internals/engine-user-agent":256}],256:[function(e,t,n){"use strict";t.exports=typeof navigator<"u"&&String(navigator.userAgent)||""},{}],257:[function(e,t,n){"use strict";var i,r,o=e("../internals/global"),a=e("../internals/engine-user-agent"),s=o.process,u=o.Deno,f=s&&s.versions||u&&u.version,c=f&&f.v8;c&&(r=(i=c.split("."))[0]>0&&i[0]<4?1:+(i[0]+i[1])),!r&&a&&(!(i=a.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=a.match(/Chrome\/(\d+)/))&&(r=+i[1]),t.exports=r},{"../internals/engine-user-agent":256,"../internals/global":274}],258:[function(e,t,n){"use strict";t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],259:[function(e,t,n){"use strict";var i=e("../internals/global"),r=e("../internals/object-get-own-property-descriptor").f,o=e("../internals/create-non-enumerable-property"),a=e("../internals/define-built-in"),s=e("../internals/define-global-property"),u=e("../internals/copy-constructor-properties"),f=e("../internals/is-forced");t.exports=function(c,d){var m,v,p,_,y,x=c.target,S=c.global,O=c.stat;if(m=S?i:O?i[x]||s(x,{}):(i[x]||{}).prototype)for(v in d){if(_=d[v],p=c.dontCallGetSet?(y=r(m,v))&&y.value:m[v],!f(S?v:x+(O?".":"#")+v,c.forced)&&p!==void 0){if(typeof _==typeof p)continue;u(_,p)}(c.sham||p&&p.sham)&&o(_,"sham",!0),a(m,v,_,c)}}},{"../internals/copy-constructor-properties":237,"../internals/create-non-enumerable-property":241,"../internals/define-built-in":245,"../internals/define-global-property":246,"../internals/global":274,"../internals/is-forced":287,"../internals/object-get-own-property-descriptor":309}],260:[function(e,t,n){"use strict";t.exports=function(i){try{return!!i()}catch{return!0}}},{}],261:[function(e,t,n){"use strict";var i=e("../internals/function-bind-native"),r=Function.prototype,o=r.apply,a=r.call;t.exports=typeof Reflect=="object"&&Reflect.apply||(i?a.bind(o):function(){return a.apply(o,arguments)})},{"../internals/function-bind-native":263}],262:[function(e,t,n){"use strict";var i=e("../internals/function-uncurry-this-clause"),r=e("../internals/a-callable"),o=e("../internals/function-bind-native"),a=i(i.bind);t.exports=function(s,u){return r(s),u===void 0?s:o?a(s,u):function(){return s.apply(u,arguments)}}},{"../internals/a-callable":222,"../internals/function-bind-native":263,"../internals/function-uncurry-this-clause":267}],263:[function(e,t,n){"use strict";var i=e("../internals/fails");t.exports=!i(function(){var r=function(){}.bind();return typeof r!="function"||r.hasOwnProperty("prototype")})},{"../internals/fails":260}],264:[function(e,t,n){"use strict";var i=e("../internals/function-bind-native"),r=Function.prototype.call;t.exports=i?r.bind(r):function(){return r.apply(r,arguments)}},{"../internals/function-bind-native":263}],265:[function(e,t,n){"use strict";var i=e("../internals/descriptors"),r=e("../internals/has-own-property"),o=Function.prototype,a=i&&Object.getOwnPropertyDescriptor,s=r(o,"name"),u=s&&function(){}.name==="something",f=s&&(!i||i&&a(o,"name").configurable);t.exports={EXISTS:s,PROPER:u,CONFIGURABLE:f}},{"../internals/descriptors":247,"../internals/has-own-property":275}],266:[function(e,t,n){"use strict";var i=e("../internals/function-uncurry-this"),r=e("../internals/a-callable");t.exports=function(o,a,s){try{return i(r(Object.getOwnPropertyDescriptor(o,a)[s]))}catch{}}},{"../internals/a-callable":222,"../internals/function-uncurry-this":268}],267:[function(e,t,n){"use strict";var i=e("../internals/classof-raw"),r=e("../internals/function-uncurry-this");t.exports=function(o){if(i(o)==="Function")return r(o)}},{"../internals/classof-raw":235,"../internals/function-uncurry-this":268}],268:[function(e,t,n){"use strict";var i=e("../internals/function-bind-native"),r=Function.prototype,o=r.call,a=i&&r.bind.bind(o,o);t.exports=i?a:function(s){return function(){return o.apply(s,arguments)}}},{"../internals/function-bind-native":263}],269:[function(e,t,n){"use strict";var i=e("../internals/global"),r=e("../internals/is-callable"),o=function(a){return r(a)?a:void 0};t.exports=function(a,s){return arguments.length<2?o(i[a]):i[a]&&i[a][s]}},{"../internals/global":274,"../internals/is-callable":285}],270:[function(e,t,n){"use strict";var i=e("../internals/classof"),r=e("../internals/get-method"),o=e("../internals/is-null-or-undefined"),a=e("../internals/iterators"),s=e("../internals/well-known-symbol")("iterator");t.exports=function(u){if(!o(u))return r(u,s)||r(u,"@@iterator")||a[i(u)]}},{"../internals/classof":236,"../internals/get-method":273,"../internals/is-null-or-undefined":288,"../internals/iterators":298,"../internals/well-known-symbol":357}],271:[function(e,t,n){"use strict";var i=e("../internals/function-call"),r=e("../internals/a-callable"),o=e("../internals/an-object"),a=e("../internals/try-to-string"),s=e("../internals/get-iterator-method"),u=TypeError;t.exports=function(f,c){var d=arguments.length<2?s(f):c;if(r(d))return o(i(d,f));throw new u(a(f)+" is not iterable")}},{"../internals/a-callable":222,"../internals/an-object":227,"../internals/function-call":264,"../internals/get-iterator-method":270,"../internals/try-to-string":349}],272:[function(e,t,n){"use strict";var i=e("../internals/function-uncurry-this"),r=e("../internals/is-array"),o=e("../internals/is-callable"),a=e("../internals/classof-raw"),s=e("../internals/to-string"),u=i([].push);t.exports=function(f){if(o(f))return f;if(r(f)){for(var c=f.length,d=[],m=0;m<c;m++){var v=f[m];typeof v=="string"?u(d,v):typeof v!="number"&&a(v)!=="Number"&&a(v)!=="String"||u(d,s(v))}var p=d.length,_=!0;return function(y,x){if(_)return _=!1,x;if(r(this))return x;for(var S=0;S<p;S++)if(d[S]===y)return x}}}},{"../internals/classof-raw":235,"../internals/function-uncurry-this":268,"../internals/is-array":284,"../internals/is-callable":285,"../internals/to-string":348}],273:[function(e,t,n){"use strict";var i=e("../internals/a-callable"),r=e("../internals/is-null-or-undefined");t.exports=function(o,a){var s=o[a];return r(s)?void 0:i(s)}},{"../internals/a-callable":222,"../internals/is-null-or-undefined":288}],274:[function(e,t,n){(function(i){(function(){"use strict";var r=function(o){return o&&o.Math===Math&&o};t.exports=r(typeof globalThis=="object"&&globalThis)||r(typeof window=="object"&&window)||r(typeof self=="object"&&self)||r(typeof i=="object"&&i)||function(){return this}()||this||Function("return this")()}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],275:[function(e,t,n){"use strict";var i=e("../internals/function-uncurry-this"),r=e("../internals/to-object"),o=i({}.hasOwnProperty);t.exports=Object.hasOwn||function(a,s){return o(r(a),s)}},{"../internals/function-uncurry-this":268,"../internals/to-object":344}],276:[function(e,t,n){"use strict";t.exports={}},{}],277:[function(e,t,n){"use strict";t.exports=function(i,r){try{arguments.length===1?console.error(i):console.error(i,r)}catch{}}},{}],278:[function(e,t,n){"use strict";var i=e("../internals/get-built-in");t.exports=i("document","documentElement")},{"../internals/get-built-in":269}],279:[function(e,t,n){"use strict";var i=e("../internals/descriptors"),r=e("../internals/fails"),o=e("../internals/document-create-element");t.exports=!i&&!r(function(){return Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a!==7})},{"../internals/descriptors":247,"../internals/document-create-element":249,"../internals/fails":260}],280:[function(e,t,n){"use strict";var i=e("../internals/function-uncurry-this"),r=e("../internals/fails"),o=e("../internals/classof-raw"),a=Object,s=i("".split);t.exports=r(function(){return!a("z").propertyIsEnumerable(0)})?function(u){return o(u)==="String"?s(u,""):a(u)}:a},{"../internals/classof-raw":235,"../internals/fails":260,"../internals/function-uncurry-this":268}],281:[function(e,t,n){"use strict";var i=e("../internals/function-uncurry-this"),r=e("../internals/is-callable"),o=e("../internals/shared-store"),a=i(Function.toString);r(o.inspectSource)||(o.inspectSource=function(s){return a(s)}),t.exports=o.inspectSource},{"../internals/function-uncurry-this":268,"../internals/is-callable":285,"../internals/shared-store":333}],282:[function(e,t,n){"use strict";var i,r,o,a=e("../internals/weak-map-basic-detection"),s=e("../internals/global"),u=e("../internals/is-object"),f=e("../internals/create-non-enumerable-property"),c=e("../internals/has-own-property"),d=e("../internals/shared-store"),m=e("../internals/shared-key"),v=e("../internals/hidden-keys"),p=s.TypeError,_=s.WeakMap;if(a||d.state){var y=d.state||(d.state=new _);y.get=y.get,y.has=y.has,y.set=y.set,i=function(S,O){if(y.has(S))throw new p("Object already initialized");return O.facade=S,y.set(S,O),O},r=function(S){return y.get(S)||{}},o=function(S){return y.has(S)}}else{var x=m("state");v[x]=!0,i=function(S,O){if(c(S,x))throw new p("Object already initialized");return O.facade=S,f(S,x,O),O},r=function(S){return c(S,x)?S[x]:{}},o=function(S){return c(S,x)}}t.exports={set:i,get:r,has:o,enforce:function(S){return o(S)?r(S):i(S,{})},getterFor:function(S){return function(O){var B;if(!u(O)||(B=r(O)).type!==S)throw new p("Incompatible receiver, "+S+" required");return B}}}},{"../internals/create-non-enumerable-property":241,"../internals/global":274,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/is-object":289,"../internals/shared-key":332,"../internals/shared-store":333,"../internals/weak-map-basic-detection":354}],283:[function(e,t,n){"use strict";var i=e("../internals/well-known-symbol"),r=e("../internals/iterators"),o=i("iterator"),a=Array.prototype;t.exports=function(s){return s!==void 0&&(r.Array===s||a[o]===s)}},{"../internals/iterators":298,"../internals/well-known-symbol":357}],284:[function(e,t,n){"use strict";var i=e("../internals/classof-raw");t.exports=Array.isArray||function(r){return i(r)==="Array"}},{"../internals/classof-raw":235}],285:[function(e,t,n){"use strict";var i=e("../internals/document-all"),r=i.all;t.exports=i.IS_HTMLDDA?function(o){return typeof o=="function"||o===r}:function(o){return typeof o=="function"}},{"../internals/document-all":248}],286:[function(e,t,n){"use strict";var i=e("../internals/function-uncurry-this"),r=e("../internals/fails"),o=e("../internals/is-callable"),a=e("../internals/classof"),s=e("../internals/get-built-in"),u=e("../internals/inspect-source"),f=function(){},c=[],d=s("Reflect","construct"),m=/^\s*(?:class|function)\b/,v=i(m.exec),p=!m.test(f),_=function(x){if(!o(x))return!1;try{return d(f,c,x),!0}catch{return!1}},y=function(x){if(!o(x))return!1;switch(a(x)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!v(m,u(x))}catch{return!0}};y.sham=!0,t.exports=!d||r(function(){var x;return _(_.call)||!_(Object)||!_(function(){x=!0})||x})?y:_},{"../internals/classof":236,"../internals/fails":260,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/inspect-source":281,"../internals/is-callable":285}],287:[function(e,t,n){"use strict";var i=e("../internals/fails"),r=e("../internals/is-callable"),o=/#|\.prototype\./,a=function(d,m){var v=u[s(d)];return v===c||v!==f&&(r(m)?i(m):!!m)},s=a.normalize=function(d){return String(d).replace(o,".").toLowerCase()},u=a.data={},f=a.NATIVE="N",c=a.POLYFILL="P";t.exports=a},{"../internals/fails":260,"../internals/is-callable":285}],288:[function(e,t,n){"use strict";t.exports=function(i){return i==null}},{}],289:[function(e,t,n){"use strict";var i=e("../internals/is-callable"),r=e("../internals/document-all"),o=r.all;t.exports=r.IS_HTMLDDA?function(a){return typeof a=="object"?a!==null:i(a)||a===o}:function(a){return typeof a=="object"?a!==null:i(a)}},{"../internals/document-all":248,"../internals/is-callable":285}],290:[function(e,t,n){"use strict";t.exports=!1},{}],291:[function(e,t,n){"use strict";var i=e("../internals/is-object"),r=e("../internals/classof-raw"),o=e("../internals/well-known-symbol")("match");t.exports=function(a){var s;return i(a)&&((s=a[o])!==void 0?!!s:r(a)==="RegExp")}},{"../internals/classof-raw":235,"../internals/is-object":289,"../internals/well-known-symbol":357}],292:[function(e,t,n){"use strict";var i=e("../internals/get-built-in"),r=e("../internals/is-callable"),o=e("../internals/object-is-prototype-of"),a=e("../internals/use-symbol-as-uid"),s=Object;t.exports=a?function(u){return typeof u=="symbol"}:function(u){var f=i("Symbol");return r(f)&&o(f.prototype,s(u))}},{"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/object-is-prototype-of":314,"../internals/use-symbol-as-uid":351}],293:[function(e,t,n){"use strict";var i=e("../internals/function-bind-context"),r=e("../internals/function-call"),o=e("../internals/an-object"),a=e("../internals/try-to-string"),s=e("../internals/is-array-iterator-method"),u=e("../internals/length-of-array-like"),f=e("../internals/object-is-prototype-of"),c=e("../internals/get-iterator"),d=e("../internals/get-iterator-method"),m=e("../internals/iterator-close"),v=TypeError,p=function(y,x){this.stopped=y,this.result=x},_=p.prototype;t.exports=function(y,x,S){var O,B,U,z,q,G,tt,K=S&&S.that,D=!(!S||!S.AS_ENTRIES),N=!(!S||!S.IS_RECORD),Z=!(!S||!S.IS_ITERATOR),w=!(!S||!S.INTERRUPTED),C=i(x,K),k=function(R){return O&&m(O,"normal",R),new p(!0,R)},T=function(R){return D?(o(R),w?C(R[0],R[1],k):C(R[0],R[1])):w?C(R,k):C(R)};if(N)O=y.iterator;else if(Z)O=y;else{if(!(B=d(y)))throw new v(a(y)+" is not iterable");if(s(B)){for(U=0,z=u(y);z>U;U++)if((q=T(y[U]))&&f(_,q))return q;return new p(!1)}O=c(y,B)}for(G=N?y.next:O.next;!(tt=r(G,O)).done;){try{q=T(tt.value)}catch(R){m(O,"throw",R)}if(typeof q=="object"&&q&&f(_,q))return q}return new p(!1)}},{"../internals/an-object":227,"../internals/function-bind-context":262,"../internals/function-call":264,"../internals/get-iterator":271,"../internals/get-iterator-method":270,"../internals/is-array-iterator-method":283,"../internals/iterator-close":294,"../internals/length-of-array-like":299,"../internals/object-is-prototype-of":314,"../internals/try-to-string":349}],294:[function(e,t,n){"use strict";var i=e("../internals/function-call"),r=e("../internals/an-object"),o=e("../internals/get-method");t.exports=function(a,s,u){var f,c;r(a);try{if(!(f=o(a,"return"))){if(s==="throw")throw u;return u}f=i(f,a)}catch(d){c=!0,f=d}if(s==="throw")throw u;if(c)throw f;return r(f),u}},{"../internals/an-object":227,"../internals/function-call":264,"../internals/get-method":273}],295:[function(e,t,n){"use strict";var i=e("../internals/iterators-core").IteratorPrototype,r=e("../internals/object-create"),o=e("../internals/create-property-descriptor"),a=e("../internals/set-to-string-tag"),s=e("../internals/iterators"),u=function(){return this};t.exports=function(f,c,d,m){var v=c+" Iterator";return f.prototype=r(i,{next:o(+!m,d)}),a(f,v,!1,!0),s[v]=u,f}},{"../internals/create-property-descriptor":242,"../internals/iterators":298,"../internals/iterators-core":297,"../internals/object-create":306,"../internals/set-to-string-tag":331}],296:[function(e,t,n){"use strict";var i=e("../internals/export"),r=e("../internals/function-call"),o=e("../internals/is-pure"),a=e("../internals/function-name"),s=e("../internals/is-callable"),u=e("../internals/iterator-create-constructor"),f=e("../internals/object-get-prototype-of"),c=e("../internals/object-set-prototype-of"),d=e("../internals/set-to-string-tag"),m=e("../internals/create-non-enumerable-property"),v=e("../internals/define-built-in"),p=e("../internals/well-known-symbol"),_=e("../internals/iterators"),y=e("../internals/iterators-core"),x=a.PROPER,S=a.CONFIGURABLE,O=y.IteratorPrototype,B=y.BUGGY_SAFARI_ITERATORS,U=p("iterator"),z=function(){return this};t.exports=function(q,G,tt,K,D,N,Z){u(tt,G,K);var w,C,k,T=function($){if($===D&&ot)return ot;if(!B&&$&&$ in H)return H[$];switch($){case"keys":case"values":case"entries":return function(){return new tt(this,$)}}return function(){return new tt(this)}},R=G+" Iterator",F=!1,H=q.prototype,it=H[U]||H["@@iterator"]||D&&H[D],ot=!B&&it||T(D),dt=G==="Array"&&H.entries||it;if(dt&&(w=f(dt.call(new q)))!==Object.prototype&&w.next&&(o||f(w)===O||(c?c(w,O):s(w[U])||v(w,U,z)),d(w,R,!0,!0),o&&(_[R]=z)),x&&D==="values"&&it&&it.name!=="values"&&(!o&&S?m(H,"name","values"):(F=!0,ot=function(){return r(it,this)})),D)if(C={values:T("values"),keys:N?ot:T("keys"),entries:T("entries")},Z)for(k in C)(B||F||!(k in H))&&v(H,k,C[k]);else i({target:G,proto:!0,forced:B||F},C);return o&&!Z||H[U]===ot||v(H,U,ot,{name:D}),_[G]=ot,C}},{"../internals/create-non-enumerable-property":241,"../internals/define-built-in":245,"../internals/export":259,"../internals/function-call":264,"../internals/function-name":265,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/iterator-create-constructor":295,"../internals/iterators":298,"../internals/iterators-core":297,"../internals/object-get-prototype-of":313,"../internals/object-set-prototype-of":318,"../internals/set-to-string-tag":331,"../internals/well-known-symbol":357}],297:[function(e,t,n){"use strict";var i,r,o,a=e("../internals/fails"),s=e("../internals/is-callable"),u=e("../internals/is-object"),f=e("../internals/object-create"),c=e("../internals/object-get-prototype-of"),d=e("../internals/define-built-in"),m=e("../internals/well-known-symbol"),v=e("../internals/is-pure"),p=m("iterator"),_=!1;[].keys&&("next"in(o=[].keys())?(r=c(c(o)))!==Object.prototype&&(i=r):_=!0),!u(i)||a(function(){var y={};return i[p].call(y)!==y})?i={}:v&&(i=f(i)),s(i[p])||d(i,p,function(){return this}),t.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:_}},{"../internals/define-built-in":245,"../internals/fails":260,"../internals/is-callable":285,"../internals/is-object":289,"../internals/is-pure":290,"../internals/object-create":306,"../internals/object-get-prototype-of":313,"../internals/well-known-symbol":357}],298:[function(e,t,n){arguments[4][276][0].apply(n,arguments)},{dup:276}],299:[function(e,t,n){"use strict";var i=e("../internals/to-length");t.exports=function(r){return i(r.length)}},{"../internals/to-length":343}],300:[function(e,t,n){"use strict";var i=e("../internals/function-uncurry-this"),r=e("../internals/fails"),o=e("../internals/is-callable"),a=e("../internals/has-own-property"),s=e("../internals/descriptors"),u=e("../internals/function-name").CONFIGURABLE,f=e("../internals/inspect-source"),c=e("../internals/internal-state"),d=c.enforce,m=c.get,v=String,p=Object.defineProperty,_=i("".slice),y=i("".replace),x=i([].join),S=s&&!r(function(){return p(function(){},"length",{value:8}).length!==8}),O=String(String).split("String"),B=t.exports=function(U,z,q){_(v(z),0,7)==="Symbol("&&(z="["+y(v(z),/^Symbol\(([^)]*)\)/,"$1")+"]"),q&&q.getter&&(z="get "+z),q&&q.setter&&(z="set "+z),(!a(U,"name")||u&&U.name!==z)&&(s?p(U,"name",{value:z,configurable:!0}):U.name=z),S&&q&&a(q,"arity")&&U.length!==q.arity&&p(U,"length",{value:q.arity});try{q&&a(q,"constructor")&&q.constructor?s&&p(U,"prototype",{writable:!1}):U.prototype&&(U.prototype=void 0)}catch{}var G=d(U);return a(G,"source")||(G.source=x(O,typeof z=="string"?z:"")),U};Function.prototype.toString=B(function(){return o(this)&&m(this).source||f(this)},"toString")},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-name":265,"../internals/function-uncurry-this":268,"../internals/has-own-property":275,"../internals/inspect-source":281,"../internals/internal-state":282,"../internals/is-callable":285}],301:[function(e,t,n){"use strict";var i=Math.ceil,r=Math.floor;t.exports=Math.trunc||function(o){var a=+o;return(a>0?r:i)(a)}},{}],302:[function(e,t,n){"use strict";var i,r,o,a,s,u=e("../internals/global"),f=e("../internals/function-bind-context"),c=e("../internals/object-get-own-property-descriptor").f,d=e("../internals/task").set,m=e("../internals/queue"),v=e("../internals/engine-is-ios"),p=e("../internals/engine-is-ios-pebble"),_=e("../internals/engine-is-webos-webkit"),y=e("../internals/engine-is-node"),x=u.MutationObserver||u.WebKitMutationObserver,S=u.document,O=u.process,B=u.Promise,U=c(u,"queueMicrotask"),z=U&&U.value;if(!z){var q=new m,G=function(){var tt,K;for(y&&(tt=O.domain)&&tt.exit();K=q.get();)try{K()}catch(D){throw q.head&&i(),D}tt&&tt.enter()};v||y||_||!x||!S?!p&&B&&B.resolve?((a=B.resolve(void 0)).constructor=B,s=f(a.then,a),i=function(){s(G)}):y?i=function(){O.nextTick(G)}:(d=f(d,u),i=function(){d(G)}):(r=!0,o=S.createTextNode(""),new x(G).observe(o,{characterData:!0}),i=function(){o.data=r=!r}),z=function(tt){q.head||i(),q.add(tt)}}t.exports=z},{"../internals/engine-is-ios":253,"../internals/engine-is-ios-pebble":252,"../internals/engine-is-node":254,"../internals/engine-is-webos-webkit":255,"../internals/function-bind-context":262,"../internals/global":274,"../internals/object-get-own-property-descriptor":309,"../internals/queue":328,"../internals/task":339}],303:[function(e,t,n){"use strict";var i=e("../internals/a-callable"),r=TypeError,o=function(a){var s,u;this.promise=new a(function(f,c){if(s!==void 0||u!==void 0)throw new r("Bad Promise constructor");s=f,u=c}),this.resolve=i(s),this.reject=i(u)};t.exports.f=function(a){return new o(a)}},{"../internals/a-callable":222}],304:[function(e,t,n){"use strict";var i=e("../internals/is-regexp"),r=TypeError;t.exports=function(o){if(i(o))throw new r("The method doesn't accept regular expressions");return o}},{"../internals/is-regexp":291}],305:[function(e,t,n){"use strict";var i=e("../internals/descriptors"),r=e("../internals/function-uncurry-this"),o=e("../internals/function-call"),a=e("../internals/fails"),s=e("../internals/object-keys"),u=e("../internals/object-get-own-property-symbols"),f=e("../internals/object-property-is-enumerable"),c=e("../internals/to-object"),d=e("../internals/indexed-object"),m=Object.assign,v=Object.defineProperty,p=r([].concat);t.exports=!m||a(function(){if(i&&m({b:1},m(v({},"a",{enumerable:!0,get:function(){v(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var _={},y={},x=Symbol("assign detection");return _[x]=7,"abcdefghijklmnopqrst".split("").forEach(function(S){y[S]=S}),m({},_)[x]!==7||s(m({},y)).join("")!=="abcdefghijklmnopqrst"})?function(_,y){for(var x=c(_),S=arguments.length,O=1,B=u.f,U=f.f;S>O;)for(var z,q=d(arguments[O++]),G=B?p(s(q),B(q)):s(q),tt=G.length,K=0;tt>K;)z=G[K++],i&&!o(U,q,z)||(x[z]=q[z]);return x}:m},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/indexed-object":280,"../internals/object-get-own-property-symbols":312,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/to-object":344}],306:[function(e,t,n){"use strict";var i,r=e("../internals/an-object"),o=e("../internals/object-define-properties"),a=e("../internals/enum-bug-keys"),s=e("../internals/hidden-keys"),u=e("../internals/html"),f=e("../internals/document-create-element"),c=e("../internals/shared-key"),d=c("IE_PROTO"),m=function(){},v=function(y){return"<script>"+y+"<\/script>"},p=function(y){y.write(v("")),y.close();var x=y.parentWindow.Object;return y=null,x},_=function(){try{i=new ActiveXObject("htmlfile")}catch{}var y,x;_=typeof document<"u"?document.domain&&i?p(i):((x=f("iframe")).style.display="none",u.appendChild(x),x.src="javascript:",(y=x.contentWindow.document).open(),y.write(v("document.F=Object")),y.close(),y.F):p(i);for(var S=a.length;S--;)delete _.prototype[a[S]];return _()};s[d]=!0,t.exports=Object.create||function(y,x){var S;return y!==null?(m.prototype=r(y),S=new m,m.prototype=null,S[d]=y):S=_(),x===void 0?S:o.f(S,x)}},{"../internals/an-object":227,"../internals/document-create-element":249,"../internals/enum-bug-keys":258,"../internals/hidden-keys":276,"../internals/html":278,"../internals/object-define-properties":307,"../internals/shared-key":332}],307:[function(e,t,n){"use strict";var i=e("../internals/descriptors"),r=e("../internals/v8-prototype-define-bug"),o=e("../internals/object-define-property"),a=e("../internals/an-object"),s=e("../internals/to-indexed-object"),u=e("../internals/object-keys");n.f=i&&!r?Object.defineProperties:function(f,c){a(f);for(var d,m=s(c),v=u(c),p=v.length,_=0;p>_;)o.f(f,d=v[_++],m[d]);return f}},{"../internals/an-object":227,"../internals/descriptors":247,"../internals/object-define-property":308,"../internals/object-keys":316,"../internals/to-indexed-object":341,"../internals/v8-prototype-define-bug":352}],308:[function(e,t,n){"use strict";var i=e("../internals/descriptors"),r=e("../internals/ie8-dom-define"),o=e("../internals/v8-prototype-define-bug"),a=e("../internals/an-object"),s=e("../internals/to-property-key"),u=TypeError,f=Object.defineProperty,c=Object.getOwnPropertyDescriptor;n.f=i?o?function(d,m,v){if(a(d),m=s(m),a(v),typeof d=="function"&&m==="prototype"&&"value"in v&&"writable"in v&&!v.writable){var p=c(d,m);p&&p.writable&&(d[m]=v.value,v={configurable:"configurable"in v?v.configurable:p.configurable,enumerable:"enumerable"in v?v.enumerable:p.enumerable,writable:!1})}return f(d,m,v)}:f:function(d,m,v){if(a(d),m=s(m),a(v),r)try{return f(d,m,v)}catch{}if("get"in v||"set"in v)throw new u("Accessors not supported");return"value"in v&&(d[m]=v.value),d}},{"../internals/an-object":227,"../internals/descriptors":247,"../internals/ie8-dom-define":279,"../internals/to-property-key":346,"../internals/v8-prototype-define-bug":352}],309:[function(e,t,n){"use strict";var i=e("../internals/descriptors"),r=e("../internals/function-call"),o=e("../internals/object-property-is-enumerable"),a=e("../internals/create-property-descriptor"),s=e("../internals/to-indexed-object"),u=e("../internals/to-property-key"),f=e("../internals/has-own-property"),c=e("../internals/ie8-dom-define"),d=Object.getOwnPropertyDescriptor;n.f=i?d:function(m,v){if(m=s(m),v=u(v),c)try{return d(m,v)}catch{}if(f(m,v))return a(!r(o.f,m,v),m[v])}},{"../internals/create-property-descriptor":242,"../internals/descriptors":247,"../internals/function-call":264,"../internals/has-own-property":275,"../internals/ie8-dom-define":279,"../internals/object-property-is-enumerable":317,"../internals/to-indexed-object":341,"../internals/to-property-key":346}],310:[function(e,t,n){"use strict";var i=e("../internals/classof-raw"),r=e("../internals/to-indexed-object"),o=e("../internals/object-get-own-property-names").f,a=e("../internals/array-slice-simple"),s=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(u){return s&&i(u)==="Window"?function(f){try{return o(f)}catch{return a(s)}}(u):o(r(u))}},{"../internals/array-slice-simple":230,"../internals/classof-raw":235,"../internals/object-get-own-property-names":311,"../internals/to-indexed-object":341}],311:[function(e,t,n){"use strict";var i=e("../internals/object-keys-internal"),r=e("../internals/enum-bug-keys").concat("length","prototype");n.f=Object.getOwnPropertyNames||function(o){return i(o,r)}},{"../internals/enum-bug-keys":258,"../internals/object-keys-internal":315}],312:[function(e,t,n){"use strict";n.f=Object.getOwnPropertySymbols},{}],313:[function(e,t,n){"use strict";var i=e("../internals/has-own-property"),r=e("../internals/is-callable"),o=e("../internals/to-object"),a=e("../internals/shared-key"),s=e("../internals/correct-prototype-getter"),u=a("IE_PROTO"),f=Object,c=f.prototype;t.exports=s?f.getPrototypeOf:function(d){var m=o(d);if(i(m,u))return m[u];var v=m.constructor;return r(v)&&m instanceof v?v.prototype:m instanceof f?c:null}},{"../internals/correct-prototype-getter":239,"../internals/has-own-property":275,"../internals/is-callable":285,"../internals/shared-key":332,"../internals/to-object":344}],314:[function(e,t,n){"use strict";var i=e("../internals/function-uncurry-this");t.exports=i({}.isPrototypeOf)},{"../internals/function-uncurry-this":268}],315:[function(e,t,n){"use strict";var i=e("../internals/function-uncurry-this"),r=e("../internals/has-own-property"),o=e("../internals/to-indexed-object"),a=e("../internals/array-includes").indexOf,s=e("../internals/hidden-keys"),u=i([].push);t.exports=function(f,c){var d,m=o(f),v=0,p=[];for(d in m)!r(s,d)&&r(m,d)&&u(p,d);for(;c.length>v;)r(m,d=c[v++])&&(~a(p,d)||u(p,d));return p}},{"../internals/array-includes":228,"../internals/function-uncurry-this":268,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/to-indexed-object":341}],316:[function(e,t,n){"use strict";var i=e("../internals/object-keys-internal"),r=e("../internals/enum-bug-keys");t.exports=Object.keys||function(o){return i(o,r)}},{"../internals/enum-bug-keys":258,"../internals/object-keys-internal":315}],317:[function(e,t,n){"use strict";var i={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,o=r&&!i.call({1:2},1);n.f=o?function(a){var s=r(this,a);return!!s&&s.enumerable}:i},{}],318:[function(e,t,n){"use strict";var i=e("../internals/function-uncurry-this-accessor"),r=e("../internals/an-object"),o=e("../internals/a-possible-prototype");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var a,s=!1,u={};try{(a=i(Object.prototype,"__proto__","set"))(u,[]),s=u instanceof Array}catch{}return function(f,c){return r(f),o(c),s?a(f,c):f.__proto__=c,f}}():void 0)},{"../internals/a-possible-prototype":224,"../internals/an-object":227,"../internals/function-uncurry-this-accessor":266}],319:[function(e,t,n){"use strict";var i=e("../internals/descriptors"),r=e("../internals/fails"),o=e("../internals/function-uncurry-this"),a=e("../internals/object-get-prototype-of"),s=e("../internals/object-keys"),u=e("../internals/to-indexed-object"),f=o(e("../internals/object-property-is-enumerable").f),c=o([].push),d=i&&r(function(){var v=Object.create(null);return v[2]=2,!f(v,2)}),m=function(v){return function(p){for(var _,y=u(p),x=s(y),S=d&&a(y)===null,O=x.length,B=0,U=[];O>B;)_=x[B++],i&&!(S?_ in y:f(y,_))||c(U,v?[_,y[_]]:y[_]);return U}};t.exports={entries:m(!0),values:m(!1)}},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-uncurry-this":268,"../internals/object-get-prototype-of":313,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/to-indexed-object":341}],320:[function(e,t,n){"use strict";var i=e("../internals/function-call"),r=e("../internals/is-callable"),o=e("../internals/is-object"),a=TypeError;t.exports=function(s,u){var f,c;if(u==="string"&&r(f=s.toString)&&!o(c=i(f,s))||r(f=s.valueOf)&&!o(c=i(f,s))||u!=="string"&&r(f=s.toString)&&!o(c=i(f,s)))return c;throw new a("Can't convert object to primitive value")}},{"../internals/function-call":264,"../internals/is-callable":285,"../internals/is-object":289}],321:[function(e,t,n){"use strict";var i=e("../internals/get-built-in"),r=e("../internals/function-uncurry-this"),o=e("../internals/object-get-own-property-names"),a=e("../internals/object-get-own-property-symbols"),s=e("../internals/an-object"),u=r([].concat);t.exports=i("Reflect","ownKeys")||function(f){var c=o.f(s(f)),d=a.f;return d?u(c,d(f)):c}},{"../internals/an-object":227,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/object-get-own-property-names":311,"../internals/object-get-own-property-symbols":312}],322:[function(e,t,n){"use strict";var i=e("../internals/global");t.exports=i},{"../internals/global":274}],323:[function(e,t,n){"use strict";t.exports=function(i){try{return{error:!1,value:i()}}catch(r){return{error:!0,value:r}}}},{}],324:[function(e,t,n){"use strict";var i=e("../internals/global"),r=e("../internals/promise-native-constructor"),o=e("../internals/is-callable"),a=e("../internals/is-forced"),s=e("../internals/inspect-source"),u=e("../internals/well-known-symbol"),f=e("../internals/engine-is-browser"),c=e("../internals/engine-is-deno"),d=e("../internals/is-pure"),m=e("../internals/engine-v8-version"),v=r&&r.prototype,p=u("species"),_=!1,y=o(i.PromiseRejectionEvent),x=a("Promise",function(){var S=s(r),O=S!==String(r);if(!O&&m===66||d&&(!v.catch||!v.finally))return!0;if(!m||m<51||!/native code/.test(S)){var B=new r(function(z){z(1)}),U=function(z){z(function(){},function(){})};if((B.constructor={})[p]=U,!(_=B.then(function(){})instanceof U))return!0}return!O&&(f||c)&&!y});t.exports={CONSTRUCTOR:x,REJECTION_EVENT:y,SUBCLASSING:_}},{"../internals/engine-is-browser":250,"../internals/engine-is-deno":251,"../internals/engine-v8-version":257,"../internals/global":274,"../internals/inspect-source":281,"../internals/is-callable":285,"../internals/is-forced":287,"../internals/is-pure":290,"../internals/promise-native-constructor":325,"../internals/well-known-symbol":357}],325:[function(e,t,n){"use strict";var i=e("../internals/global");t.exports=i.Promise},{"../internals/global":274}],326:[function(e,t,n){"use strict";var i=e("../internals/an-object"),r=e("../internals/is-object"),o=e("../internals/new-promise-capability");t.exports=function(a,s){if(i(a),r(s)&&s.constructor===a)return s;var u=o.f(a);return(0,u.resolve)(s),u.promise}},{"../internals/an-object":227,"../internals/is-object":289,"../internals/new-promise-capability":303}],327:[function(e,t,n){"use strict";var i=e("../internals/promise-native-constructor"),r=e("../internals/check-correctness-of-iteration"),o=e("../internals/promise-constructor-detection").CONSTRUCTOR;t.exports=o||!r(function(a){i.all(a).then(void 0,function(){})})},{"../internals/check-correctness-of-iteration":234,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325}],328:[function(e,t,n){"use strict";var i=function(){this.head=null,this.tail=null};i.prototype={add:function(r){var o={item:r,next:null},a=this.tail;a?a.next=o:this.head=o,this.tail=o},get:function(){var r=this.head;if(r)return(this.head=r.next)===null&&(this.tail=null),r.item}},t.exports=i},{}],329:[function(e,t,n){"use strict";var i=e("../internals/is-null-or-undefined"),r=TypeError;t.exports=function(o){if(i(o))throw new r("Can't call method on "+o);return o}},{"../internals/is-null-or-undefined":288}],330:[function(e,t,n){"use strict";var i=e("../internals/get-built-in"),r=e("../internals/define-built-in-accessor"),o=e("../internals/well-known-symbol"),a=e("../internals/descriptors"),s=o("species");t.exports=function(u){var f=i(u);a&&f&&!f[s]&&r(f,s,{configurable:!0,get:function(){return this}})}},{"../internals/define-built-in-accessor":244,"../internals/descriptors":247,"../internals/get-built-in":269,"../internals/well-known-symbol":357}],331:[function(e,t,n){"use strict";var i=e("../internals/object-define-property").f,r=e("../internals/has-own-property"),o=e("../internals/well-known-symbol")("toStringTag");t.exports=function(a,s,u){a&&!u&&(a=a.prototype),a&&!r(a,o)&&i(a,o,{configurable:!0,value:s})}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/well-known-symbol":357}],332:[function(e,t,n){"use strict";var i=e("../internals/shared"),r=e("../internals/uid"),o=i("keys");t.exports=function(a){return o[a]||(o[a]=r(a))}},{"../internals/shared":334,"../internals/uid":350}],333:[function(e,t,n){"use strict";var i=e("../internals/global"),r=e("../internals/define-global-property"),o=i["__core-js_shared__"]||r("__core-js_shared__",{});t.exports=o},{"../internals/define-global-property":246,"../internals/global":274}],334:[function(e,t,n){"use strict";var i=e("../internals/is-pure"),r=e("../internals/shared-store");(t.exports=function(o,a){return r[o]||(r[o]=a!==void 0?a:{})})("versions",[]).push({version:"3.33.0",mode:i?"pure":"global",copyright:"\xA9 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.0/LICENSE",source:"https://github.com/zloirock/core-js"})},{"../internals/is-pure":290,"../internals/shared-store":333}],335:[function(e,t,n){"use strict";var i=e("../internals/an-object"),r=e("../internals/a-constructor"),o=e("../internals/is-null-or-undefined"),a=e("../internals/well-known-symbol")("species");t.exports=function(s,u){var f,c=i(s).constructor;return c===void 0||o(f=i(c)[a])?u:r(f)}},{"../internals/a-constructor":223,"../internals/an-object":227,"../internals/is-null-or-undefined":288,"../internals/well-known-symbol":357}],336:[function(e,t,n){"use strict";var i=e("../internals/engine-v8-version"),r=e("../internals/fails"),o=e("../internals/global").String;t.exports=!!Object.getOwnPropertySymbols&&!r(function(){var a=Symbol("symbol detection");return!o(a)||!(Object(a)instanceof Symbol)||!Symbol.sham&&i&&i<41})},{"../internals/engine-v8-version":257,"../internals/fails":260,"../internals/global":274}],337:[function(e,t,n){"use strict";var i=e("../internals/function-call"),r=e("../internals/get-built-in"),o=e("../internals/well-known-symbol"),a=e("../internals/define-built-in");t.exports=function(){var s=r("Symbol"),u=s&&s.prototype,f=u&&u.valueOf,c=o("toPrimitive");u&&!u[c]&&a(u,c,function(d){return i(f,this)},{arity:1})}},{"../internals/define-built-in":245,"../internals/function-call":264,"../internals/get-built-in":269,"../internals/well-known-symbol":357}],338:[function(e,t,n){"use strict";var i=e("../internals/symbol-constructor-detection");t.exports=i&&!!Symbol.for&&!!Symbol.keyFor},{"../internals/symbol-constructor-detection":336}],339:[function(e,t,n){"use strict";var i,r,o,a,s=e("../internals/global"),u=e("../internals/function-apply"),f=e("../internals/function-bind-context"),c=e("../internals/is-callable"),d=e("../internals/has-own-property"),m=e("../internals/fails"),v=e("../internals/html"),p=e("../internals/array-slice"),_=e("../internals/document-create-element"),y=e("../internals/validate-arguments-length"),x=e("../internals/engine-is-ios"),S=e("../internals/engine-is-node"),O=s.setImmediate,B=s.clearImmediate,U=s.process,z=s.Dispatch,q=s.Function,G=s.MessageChannel,tt=s.String,K=0,D={};m(function(){i=s.location});var N=function(k){if(d(D,k)){var T=D[k];delete D[k],T()}},Z=function(k){return function(){N(k)}},w=function(k){N(k.data)},C=function(k){s.postMessage(tt(k),i.protocol+"//"+i.host)};O&&B||(O=function(k){y(arguments.length,1);var T=c(k)?k:q(k),R=p(arguments,1);return D[++K]=function(){u(T,void 0,R)},r(K),K},B=function(k){delete D[k]},S?r=function(k){U.nextTick(Z(k))}:z&&z.now?r=function(k){z.now(Z(k))}:G&&!x?(a=(o=new G).port2,o.port1.onmessage=w,r=f(a.postMessage,a)):s.addEventListener&&c(s.postMessage)&&!s.importScripts&&i&&i.protocol!=="file:"&&!m(C)?(r=C,s.addEventListener("message",w,!1)):r="onreadystatechange"in _("script")?function(k){v.appendChild(_("script")).onreadystatechange=function(){v.removeChild(this),N(k)}}:function(k){setTimeout(Z(k),0)}),t.exports={set:O,clear:B}},{"../internals/array-slice":231,"../internals/document-create-element":249,"../internals/engine-is-ios":253,"../internals/engine-is-node":254,"../internals/fails":260,"../internals/function-apply":261,"../internals/function-bind-context":262,"../internals/global":274,"../internals/has-own-property":275,"../internals/html":278,"../internals/is-callable":285,"../internals/validate-arguments-length":353}],340:[function(e,t,n){"use strict";var i=e("../internals/to-integer-or-infinity"),r=Math.max,o=Math.min;t.exports=function(a,s){var u=i(a);return u<0?r(u+s,0):o(u,s)}},{"../internals/to-integer-or-infinity":342}],341:[function(e,t,n){"use strict";var i=e("../internals/indexed-object"),r=e("../internals/require-object-coercible");t.exports=function(o){return i(r(o))}},{"../internals/indexed-object":280,"../internals/require-object-coercible":329}],342:[function(e,t,n){"use strict";var i=e("../internals/math-trunc");t.exports=function(r){var o=+r;return o!=o||o===0?0:i(o)}},{"../internals/math-trunc":301}],343:[function(e,t,n){"use strict";var i=e("../internals/to-integer-or-infinity"),r=Math.min;t.exports=function(o){return o>0?r(i(o),9007199254740991):0}},{"../internals/to-integer-or-infinity":342}],344:[function(e,t,n){"use strict";var i=e("../internals/require-object-coercible"),r=Object;t.exports=function(o){return r(i(o))}},{"../internals/require-object-coercible":329}],345:[function(e,t,n){"use strict";var i=e("../internals/function-call"),r=e("../internals/is-object"),o=e("../internals/is-symbol"),a=e("../internals/get-method"),s=e("../internals/ordinary-to-primitive"),u=e("../internals/well-known-symbol"),f=TypeError,c=u("toPrimitive");t.exports=function(d,m){if(!r(d)||o(d))return d;var v,p=a(d,c);if(p){if(m===void 0&&(m="default"),v=i(p,d,m),!r(v)||o(v))return v;throw new f("Can't convert object to primitive value")}return m===void 0&&(m="number"),s(d,m)}},{"../internals/function-call":264,"../internals/get-method":273,"../internals/is-object":289,"../internals/is-symbol":292,"../internals/ordinary-to-primitive":320,"../internals/well-known-symbol":357}],346:[function(e,t,n){"use strict";var i=e("../internals/to-primitive"),r=e("../internals/is-symbol");t.exports=function(o){var a=i(o,"string");return r(a)?a:a+""}},{"../internals/is-symbol":292,"../internals/to-primitive":345}],347:[function(e,t,n){"use strict";var i={};i[e("../internals/well-known-symbol")("toStringTag")]="z",t.exports=String(i)==="[object z]"},{"../internals/well-known-symbol":357}],348:[function(e,t,n){"use strict";var i=e("../internals/classof"),r=String;t.exports=function(o){if(i(o)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return r(o)}},{"../internals/classof":236}],349:[function(e,t,n){"use strict";var i=String;t.exports=function(r){try{return i(r)}catch{return"Object"}}},{}],350:[function(e,t,n){"use strict";var i=e("../internals/function-uncurry-this"),r=0,o=Math.random(),a=i(1 .toString);t.exports=function(s){return"Symbol("+(s===void 0?"":s)+")_"+a(++r+o,36)}},{"../internals/function-uncurry-this":268}],351:[function(e,t,n){"use strict";var i=e("../internals/symbol-constructor-detection");t.exports=i&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/symbol-constructor-detection":336}],352:[function(e,t,n){"use strict";var i=e("../internals/descriptors"),r=e("../internals/fails");t.exports=i&&r(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})},{"../internals/descriptors":247,"../internals/fails":260}],353:[function(e,t,n){"use strict";var i=TypeError;t.exports=function(r,o){if(r<o)throw new i("Not enough arguments");return r}},{}],354:[function(e,t,n){"use strict";var i=e("../internals/global"),r=e("../internals/is-callable"),o=i.WeakMap;t.exports=r(o)&&/native code/.test(String(o))},{"../internals/global":274,"../internals/is-callable":285}],355:[function(e,t,n){"use strict";var i=e("../internals/path"),r=e("../internals/has-own-property"),o=e("../internals/well-known-symbol-wrapped"),a=e("../internals/object-define-property").f;t.exports=function(s){var u=i.Symbol||(i.Symbol={});r(u,s)||a(u,s,{value:o.f(s)})}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/path":322,"../internals/well-known-symbol-wrapped":356}],356:[function(e,t,n){"use strict";var i=e("../internals/well-known-symbol");n.f=i},{"../internals/well-known-symbol":357}],357:[function(e,t,n){"use strict";var i=e("../internals/global"),r=e("../internals/shared"),o=e("../internals/has-own-property"),a=e("../internals/uid"),s=e("../internals/symbol-constructor-detection"),u=e("../internals/use-symbol-as-uid"),f=i.Symbol,c=r("wks"),d=u?f.for||f:f&&f.withoutSetter||a;t.exports=function(m){return o(c,m)||(c[m]=s&&o(f,m)?f[m]:d("Symbol."+m)),c[m]}},{"../internals/global":274,"../internals/has-own-property":275,"../internals/shared":334,"../internals/symbol-constructor-detection":336,"../internals/uid":350,"../internals/use-symbol-as-uid":351}],358:[function(e,t,n){"use strict";var i=e("../internals/export"),r=e("../internals/array-iteration").findIndex,o=e("../internals/add-to-unscopables"),a=!0;"findIndex"in[]&&Array(1).findIndex(function(){a=!1}),i({target:"Array",proto:!0,forced:a},{findIndex:function(s){return r(this,s,arguments.length>1?arguments[1]:void 0)}}),o("findIndex")},{"../internals/add-to-unscopables":225,"../internals/array-iteration":229,"../internals/export":259}],359:[function(e,t,n){"use strict";var i=e("../internals/export"),r=e("../internals/array-iteration").find,o=e("../internals/add-to-unscopables"),a=!0;"find"in[]&&Array(1).find(function(){a=!1}),i({target:"Array",proto:!0,forced:a},{find:function(s){return r(this,s,arguments.length>1?arguments[1]:void 0)}}),o("find")},{"../internals/add-to-unscopables":225,"../internals/array-iteration":229,"../internals/export":259}],360:[function(e,t,n){"use strict";var i=e("../internals/export"),r=e("../internals/array-includes").includes,o=e("../internals/fails"),a=e("../internals/add-to-unscopables");i({target:"Array",proto:!0,forced:o(function(){return!Array(1).includes()})},{includes:function(s){return r(this,s,arguments.length>1?arguments[1]:void 0)}}),a("includes")},{"../internals/add-to-unscopables":225,"../internals/array-includes":228,"../internals/export":259,"../internals/fails":260}],361:[function(e,t,n){"use strict";var i=e("../internals/to-indexed-object"),r=e("../internals/add-to-unscopables"),o=e("../internals/iterators"),a=e("../internals/internal-state"),s=e("../internals/object-define-property").f,u=e("../internals/iterator-define"),f=e("../internals/create-iter-result-object"),c=e("../internals/is-pure"),d=e("../internals/descriptors"),m=a.set,v=a.getterFor("Array Iterator");t.exports=u(Array,"Array",function(_,y){m(this,{type:"Array Iterator",target:i(_),index:0,kind:y})},function(){var _=v(this),y=_.target,x=_.kind,S=_.index++;if(!y||S>=y.length)return _.target=void 0,f(void 0,!0);switch(x){case"keys":return f(S,!1);case"values":return f(y[S],!1)}return f([S,y[S]],!1)},"values");var p=o.Arguments=o.Array;if(r("keys"),r("values"),r("entries"),!c&&d&&p.name!=="values")try{s(p,"name",{value:"values"})}catch{}},{"../internals/add-to-unscopables":225,"../internals/create-iter-result-object":240,"../internals/descriptors":247,"../internals/internal-state":282,"../internals/is-pure":290,"../internals/iterator-define":296,"../internals/iterators":298,"../internals/object-define-property":308,"../internals/to-indexed-object":341}],362:[function(e,t,n){"use strict";var i=e("../internals/export"),r=e("../internals/get-built-in"),o=e("../internals/function-apply"),a=e("../internals/function-call"),s=e("../internals/function-uncurry-this"),u=e("../internals/fails"),f=e("../internals/is-callable"),c=e("../internals/is-symbol"),d=e("../internals/array-slice"),m=e("../internals/get-json-replacer-function"),v=e("../internals/symbol-constructor-detection"),p=String,_=r("JSON","stringify"),y=s(/./.exec),x=s("".charAt),S=s("".charCodeAt),O=s("".replace),B=s(1 .toString),U=/[\uD800-\uDFFF]/g,z=/^[\uD800-\uDBFF]$/,q=/^[\uDC00-\uDFFF]$/,G=!v||u(function(){var N=r("Symbol")("stringify detection");return _([N])!=="[null]"||_({a:N})!=="{}"||_(Object(N))!=="{}"}),tt=u(function(){return _("\uDF06\uD834")!=='"\\udf06\\ud834"'||_("\uDEAD")!=='"\\udead"'}),K=function(N,Z){var w=d(arguments),C=m(Z);if(f(C)||N!==void 0&&!c(N))return w[1]=function(k,T){if(f(C)&&(T=a(C,this,p(k),T)),!c(T))return T},o(_,null,w)},D=function(N,Z,w){var C=x(w,Z-1),k=x(w,Z+1);return y(z,N)&&!y(q,k)||y(q,N)&&!y(z,C)?"\\u"+B(S(N,0),16):N};_&&i({target:"JSON",stat:!0,arity:3,forced:G||tt},{stringify:function(N,Z,w){var C=d(arguments),k=o(G?K:_,null,C);return tt&&typeof k=="string"?O(k,U,D):k}})},{"../internals/array-slice":231,"../internals/export":259,"../internals/fails":260,"../internals/function-apply":261,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/get-json-replacer-function":272,"../internals/is-callable":285,"../internals/is-symbol":292,"../internals/symbol-constructor-detection":336}],363:[function(e,t,n){"use strict";e("../internals/export")({target:"Number",stat:!0},{isNaN:function(i){return i!=i}})},{"../internals/export":259}],364:[function(e,t,n){"use strict";var i=e("../internals/export"),r=e("../internals/object-assign");i({target:"Object",stat:!0,arity:2,forced:Object.assign!==r},{assign:r})},{"../internals/export":259,"../internals/object-assign":305}],365:[function(e,t,n){"use strict";var i=e("../internals/export"),r=e("../internals/symbol-constructor-detection"),o=e("../internals/fails"),a=e("../internals/object-get-own-property-symbols"),s=e("../internals/to-object");i({target:"Object",stat:!0,forced:!r||o(function(){a.f(1)})},{getOwnPropertySymbols:function(u){var f=a.f;return f?f(s(u)):[]}})},{"../internals/export":259,"../internals/fails":260,"../internals/object-get-own-property-symbols":312,"../internals/symbol-constructor-detection":336,"../internals/to-object":344}],366:[function(e,t,n){"use strict";var i=e("../internals/export"),r=e("../internals/to-object"),o=e("../internals/object-keys");i({target:"Object",stat:!0,forced:e("../internals/fails")(function(){o(1)})},{keys:function(a){return o(r(a))}})},{"../internals/export":259,"../internals/fails":260,"../internals/object-keys":316,"../internals/to-object":344}],367:[function(e,t,n){"use strict";var i=e("../internals/export"),r=e("../internals/object-to-array").values;i({target:"Object",stat:!0},{values:function(o){return r(o)}})},{"../internals/export":259,"../internals/object-to-array":319}],368:[function(e,t,n){"use strict";var i=e("../internals/export"),r=e("../internals/function-call"),o=e("../internals/a-callable"),a=e("../internals/new-promise-capability"),s=e("../internals/perform"),u=e("../internals/iterate");i({target:"Promise",stat:!0,forced:e("../internals/promise-statics-incorrect-iteration")},{all:function(f){var c=this,d=a.f(c),m=d.resolve,v=d.reject,p=s(function(){var _=o(c.resolve),y=[],x=0,S=1;u(f,function(O){var B=x++,U=!1;S++,r(_,c,O).then(function(z){U||(U=!0,y[B]=z,--S||m(y))},v)}),--S||m(y)});return p.error&&v(p.value),d.promise}})},{"../internals/a-callable":222,"../internals/export":259,"../internals/function-call":264,"../internals/iterate":293,"../internals/new-promise-capability":303,"../internals/perform":323,"../internals/promise-statics-incorrect-iteration":327}],369:[function(e,t,n){"use strict";var i=e("../internals/export"),r=e("../internals/is-pure"),o=e("../internals/promise-constructor-detection").CONSTRUCTOR,a=e("../internals/promise-native-constructor"),s=e("../internals/get-built-in"),u=e("../internals/is-callable"),f=e("../internals/define-built-in"),c=a&&a.prototype;if(i({target:"Promise",proto:!0,forced:o,real:!0},{catch:function(m){return this.then(void 0,m)}}),!r&&u(a)){var d=s("Promise").prototype.catch;c.catch!==d&&f(c,"catch",d,{unsafe:!0})}},{"../internals/define-built-in":245,"../internals/export":259,"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325}],370:[function(e,t,n){"use strict";var i,r,o,a=e("../internals/export"),s=e("../internals/is-pure"),u=e("../internals/engine-is-node"),f=e("../internals/global"),c=e("../internals/function-call"),d=e("../internals/define-built-in"),m=e("../internals/object-set-prototype-of"),v=e("../internals/set-to-string-tag"),p=e("../internals/set-species"),_=e("../internals/a-callable"),y=e("../internals/is-callable"),x=e("../internals/is-object"),S=e("../internals/an-instance"),O=e("../internals/species-constructor"),B=e("../internals/task").set,U=e("../internals/microtask"),z=e("../internals/host-report-errors"),q=e("../internals/perform"),G=e("../internals/queue"),tt=e("../internals/internal-state"),K=e("../internals/promise-native-constructor"),D=e("../internals/promise-constructor-detection"),N=e("../internals/new-promise-capability"),Z=D.CONSTRUCTOR,w=D.REJECTION_EVENT,C=D.SUBCLASSING,k=tt.getterFor("Promise"),T=tt.set,R=K&&K.prototype,F=K,H=R,it=f.TypeError,ot=f.document,dt=f.process,$=N.f,ct=$,W=!!(ot&&ot.createEvent&&f.dispatchEvent),V=function(gt){var ut;return!(!x(gt)||!y(ut=gt.then))&&ut},rt=function(gt,ut){var Q,Y,et,lt=ut.value,pt=ut.state===1,bt=pt?gt.ok:gt.fail,Et=gt.resolve,Ot=gt.reject,zt=gt.domain;try{bt?(pt||(ut.rejection===2&&Ft(ut),ut.rejection=1),bt===!0?Q=lt:(zt&&zt.enter(),Q=bt(lt),zt&&(zt.exit(),et=!0)),Q===gt.promise?Ot(new it("Promise-chain cycle")):(Y=V(Q))?c(Y,Q,Et,Ot):Et(Q)):Ot(lt)}catch(Gt){zt&&!et&&zt.exit(),Ot(Gt)}},mt=function(gt,ut){gt.notified||(gt.notified=!0,U(function(){for(var Q,Y=gt.reactions;Q=Y.get();)rt(Q,gt);gt.notified=!1,ut&&!gt.rejection&&_t(gt)}))},wt=function(gt,ut,Q){var Y,et;W?((Y=ot.createEvent("Event")).promise=ut,Y.reason=Q,Y.initEvent(gt,!1,!0),f.dispatchEvent(Y)):Y={promise:ut,reason:Q},!w&&(et=f["on"+gt])?et(Y):gt==="unhandledrejection"&&z("Unhandled promise rejection",Q)},_t=function(gt){c(B,f,function(){var ut,Q=gt.facade,Y=gt.value;if(Ct(gt)&&(ut=q(function(){u?dt.emit("unhandledRejection",Y,Q):wt("unhandledrejection",Q,Y)}),gt.rejection=u||Ct(gt)?2:1,ut.error))throw ut.value})},Ct=function(gt){return gt.rejection!==1&&!gt.parent},Ft=function(gt){c(B,f,function(){var ut=gt.facade;u?dt.emit("rejectionHandled",ut):wt("rejectionhandled",ut,gt.value)})},It=function(gt,ut,Q){return function(Y){gt(ut,Y,Q)}},vt=function(gt,ut,Q){gt.done||(gt.done=!0,Q&&(gt=Q),gt.value=ut,gt.state=2,mt(gt,!0))},kt=function(gt,ut,Q){if(!gt.done){gt.done=!0,Q&&(gt=Q);try{if(gt.facade===ut)throw new it("Promise can't be resolved itself");var Y=V(ut);Y?U(function(){var et={done:!1};try{c(Y,ut,It(kt,et,gt),It(vt,et,gt))}catch(lt){vt(et,lt,gt)}}):(gt.value=ut,gt.state=1,mt(gt,!1))}catch(et){vt({done:!1},et,gt)}}};if(Z&&(H=(F=function(gt){S(this,H),_(gt),c(i,this);var ut=k(this);try{gt(It(kt,ut),It(vt,ut))}catch(Q){vt(ut,Q)}}).prototype,(i=function(gt){T(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new G,rejection:!1,state:0,value:void 0})}).prototype=d(H,"then",function(gt,ut){var Q=k(this),Y=$(O(this,F));return Q.parent=!0,Y.ok=!y(gt)||gt,Y.fail=y(ut)&&ut,Y.domain=u?dt.domain:void 0,Q.state===0?Q.reactions.add(Y):U(function(){rt(Y,Q)}),Y.promise}),r=function(){var gt=new i,ut=k(gt);this.promise=gt,this.resolve=It(kt,ut),this.reject=It(vt,ut)},N.f=$=function(gt){return gt===F||gt===void 0?new r(gt):ct(gt)},!s&&y(K)&&R!==Object.prototype)){o=R.then,C||d(R,"then",function(gt,ut){var Q=this;return new F(function(Y,et){c(o,Q,Y,et)}).then(gt,ut)},{unsafe:!0});try{delete R.constructor}catch{}m&&m(R,H)}a({global:!0,constructor:!0,wrap:!0,forced:Z},{Promise:F}),v(F,"Promise",!1,!0),p("Promise")},{"../internals/a-callable":222,"../internals/an-instance":226,"../internals/define-built-in":245,"../internals/engine-is-node":254,"../internals/export":259,"../internals/function-call":264,"../internals/global":274,"../internals/host-report-errors":277,"../internals/internal-state":282,"../internals/is-callable":285,"../internals/is-object":289,"../internals/is-pure":290,"../internals/microtask":302,"../internals/new-promise-capability":303,"../internals/object-set-prototype-of":318,"../internals/perform":323,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325,"../internals/queue":328,"../internals/set-species":330,"../internals/set-to-string-tag":331,"../internals/species-constructor":335,"../internals/task":339}],371:[function(e,t,n){"use strict";var i=e("../internals/export"),r=e("../internals/is-pure"),o=e("../internals/promise-native-constructor"),a=e("../internals/fails"),s=e("../internals/get-built-in"),u=e("../internals/is-callable"),f=e("../internals/species-constructor"),c=e("../internals/promise-resolve"),d=e("../internals/define-built-in"),m=o&&o.prototype;if(i({target:"Promise",proto:!0,real:!0,forced:!!o&&a(function(){m.finally.call({then:function(){}},function(){})})},{finally:function(p){var _=f(this,s("Promise")),y=u(p);return this.then(y?function(x){return c(_,p()).then(function(){return x})}:p,y?function(x){return c(_,p()).then(function(){throw x})}:p)}}),!r&&u(o)){var v=s("Promise").prototype.finally;m.finally!==v&&d(m,"finally",v,{unsafe:!0})}},{"../internals/define-built-in":245,"../internals/export":259,"../internals/fails":260,"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/promise-native-constructor":325,"../internals/promise-resolve":326,"../internals/species-constructor":335}],372:[function(e,t,n){"use strict";e("../modules/es.promise.constructor"),e("../modules/es.promise.all"),e("../modules/es.promise.catch"),e("../modules/es.promise.race"),e("../modules/es.promise.reject"),e("../modules/es.promise.resolve")},{"../modules/es.promise.all":368,"../modules/es.promise.catch":369,"../modules/es.promise.constructor":370,"../modules/es.promise.race":373,"../modules/es.promise.reject":374,"../modules/es.promise.resolve":375}],373:[function(e,t,n){"use strict";var i=e("../internals/export"),r=e("../internals/function-call"),o=e("../internals/a-callable"),a=e("../internals/new-promise-capability"),s=e("../internals/perform"),u=e("../internals/iterate");i({target:"Promise",stat:!0,forced:e("../internals/promise-statics-incorrect-iteration")},{race:function(f){var c=this,d=a.f(c),m=d.reject,v=s(function(){var p=o(c.resolve);u(f,function(_){r(p,c,_).then(d.resolve,m)})});return v.error&&m(v.value),d.promise}})},{"../internals/a-callable":222,"../internals/export":259,"../internals/function-call":264,"../internals/iterate":293,"../internals/new-promise-capability":303,"../internals/perform":323,"../internals/promise-statics-incorrect-iteration":327}],374:[function(e,t,n){"use strict";var i=e("../internals/export"),r=e("../internals/function-call"),o=e("../internals/new-promise-capability");i({target:"Promise",stat:!0,forced:e("../internals/promise-constructor-detection").CONSTRUCTOR},{reject:function(a){var s=o.f(this);return r(s.reject,void 0,a),s.promise}})},{"../internals/export":259,"../internals/function-call":264,"../internals/new-promise-capability":303,"../internals/promise-constructor-detection":324}],375:[function(e,t,n){"use strict";var i=e("../internals/export"),r=e("../internals/get-built-in"),o=e("../internals/is-pure"),a=e("../internals/promise-native-constructor"),s=e("../internals/promise-constructor-detection").CONSTRUCTOR,u=e("../internals/promise-resolve"),f=r("Promise"),c=o&&!s;i({target:"Promise",stat:!0,forced:o||s},{resolve:function(d){return u(c&&this===f?a:this,d)}})},{"../internals/export":259,"../internals/get-built-in":269,"../internals/is-pure":290,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325,"../internals/promise-resolve":326}],376:[function(e,t,n){"use strict";var i=e("../internals/export"),r=e("../internals/function-uncurry-this"),o=e("../internals/to-absolute-index"),a=RangeError,s=String.fromCharCode,u=String.fromCodePoint,f=r([].join);i({target:"String",stat:!0,arity:1,forced:!!u&&u.length!==1},{fromCodePoint:function(c){for(var d,m=[],v=arguments.length,p=0;v>p;){if(d=+arguments[p++],o(d,1114111)!==d)throw new a(d+" is not a valid code point");m[p]=d<65536?s(d):s(55296+((d-=65536)>>10),d%1024+56320)}return f(m,"")}})},{"../internals/export":259,"../internals/function-uncurry-this":268,"../internals/to-absolute-index":340}],377:[function(e,t,n){"use strict";var i=e("../internals/export"),r=e("../internals/function-uncurry-this"),o=e("../internals/not-a-regexp"),a=e("../internals/require-object-coercible"),s=e("../internals/to-string"),u=e("../internals/correct-is-regexp-logic"),f=r("".indexOf);i({target:"String",proto:!0,forced:!u("includes")},{includes:function(c){return!!~f(s(a(this)),s(o(c)),arguments.length>1?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":238,"../internals/export":259,"../internals/function-uncurry-this":268,"../internals/not-a-regexp":304,"../internals/require-object-coercible":329,"../internals/to-string":348}],378:[function(e,t,n){"use strict";e("../internals/well-known-symbol-define")("asyncIterator")},{"../internals/well-known-symbol-define":355}],379:[function(e,t,n){"use strict";var i=e("../internals/export"),r=e("../internals/global"),o=e("../internals/function-call"),a=e("../internals/function-uncurry-this"),s=e("../internals/is-pure"),u=e("../internals/descriptors"),f=e("../internals/symbol-constructor-detection"),c=e("../internals/fails"),d=e("../internals/has-own-property"),m=e("../internals/object-is-prototype-of"),v=e("../internals/an-object"),p=e("../internals/to-indexed-object"),_=e("../internals/to-property-key"),y=e("../internals/to-string"),x=e("../internals/create-property-descriptor"),S=e("../internals/object-create"),O=e("../internals/object-keys"),B=e("../internals/object-get-own-property-names"),U=e("../internals/object-get-own-property-names-external"),z=e("../internals/object-get-own-property-symbols"),q=e("../internals/object-get-own-property-descriptor"),G=e("../internals/object-define-property"),tt=e("../internals/object-define-properties"),K=e("../internals/object-property-is-enumerable"),D=e("../internals/define-built-in"),N=e("../internals/define-built-in-accessor"),Z=e("../internals/shared"),w=e("../internals/shared-key"),C=e("../internals/hidden-keys"),k=e("../internals/uid"),T=e("../internals/well-known-symbol"),R=e("../internals/well-known-symbol-wrapped"),F=e("../internals/well-known-symbol-define"),H=e("../internals/symbol-define-to-primitive"),it=e("../internals/set-to-string-tag"),ot=e("../internals/internal-state"),dt=e("../internals/array-iteration").forEach,$=w("hidden"),ct=ot.set,W=ot.getterFor("Symbol"),V=Object.prototype,rt=r.Symbol,mt=rt&&rt.prototype,wt=r.RangeError,_t=r.TypeError,Ct=r.QObject,Ft=q.f,It=G.f,vt=U.f,kt=K.f,gt=a([].push),ut=Z("symbols"),Q=Z("op-symbols"),Y=Z("wks"),et=!Ct||!Ct.prototype||!Ct.prototype.findChild,lt=function(ie,Xt,Ut){var _e=Ft(V,Xt);_e&&delete V[Xt],It(ie,Xt,Ut),_e&&ie!==V&&It(V,Xt,_e)},pt=u&&c(function(){return S(It({},"a",{get:function(){return It(this,"a",{value:7}).a}})).a!==7})?lt:It,bt=function(ie,Xt){var Ut=ut[ie]=S(mt);return ct(Ut,{type:"Symbol",tag:ie,description:Xt}),u||(Ut.description=Xt),Ut},Et=function(ie,Xt,Ut){ie===V&&Et(Q,Xt,Ut),v(ie);var _e=_(Xt);return v(Ut),d(ut,_e)?(Ut.enumerable?(d(ie,$)&&ie[$][_e]&&(ie[$][_e]=!1),Ut=S(Ut,{enumerable:x(0,!1)})):(d(ie,$)||It(ie,$,x(1,{})),ie[$][_e]=!0),pt(ie,_e,Ut)):It(ie,_e,Ut)},Ot=function(ie,Xt){v(ie);var Ut=p(Xt),_e=O(Ut).concat(Kt(Ut));return dt(_e,function(le){u&&!o(zt,Ut,le)||Et(ie,le,Ut[le])}),ie},zt=function(ie){var Xt=_(ie),Ut=o(kt,this,Xt);return!(this===V&&d(ut,Xt)&&!d(Q,Xt))&&(!(Ut||!d(this,Xt)||!d(ut,Xt)||d(this,$)&&this[$][Xt])||Ut)},Gt=function(ie,Xt){var Ut=p(ie),_e=_(Xt);if(Ut!==V||!d(ut,_e)||d(Q,_e)){var le=Ft(Ut,_e);return!le||!d(ut,_e)||d(Ut,$)&&Ut[$][_e]||(le.enumerable=!0),le}},Jt=function(ie){var Xt=vt(p(ie)),Ut=[];return dt(Xt,function(_e){d(ut,_e)||d(C,_e)||gt(Ut,_e)}),Ut},Kt=function(ie){var Xt=ie===V,Ut=vt(Xt?Q:p(ie)),_e=[];return dt(Ut,function(le){!d(ut,le)||Xt&&!d(V,le)||gt(_e,ut[le])}),_e};f||(D(mt=(rt=function(){if(m(mt,this))throw new _t("Symbol is not a constructor");var ie=arguments.length&&arguments[0]!==void 0?y(arguments[0]):void 0,Xt=k(ie),Ut=function(_e){this===V&&o(Ut,Q,_e),d(this,$)&&d(this[$],Xt)&&(this[$][Xt]=!1);var le=x(1,_e);try{pt(this,Xt,le)}catch(ye){if(!(ye instanceof wt))throw ye;lt(this,Xt,le)}};return u&&et&&pt(V,Xt,{configurable:!0,set:Ut}),bt(Xt,ie)}).prototype,"toString",function(){return W(this).tag}),D(rt,"withoutSetter",function(ie){return bt(k(ie),ie)}),K.f=zt,G.f=Et,tt.f=Ot,q.f=Gt,B.f=U.f=Jt,z.f=Kt,R.f=function(ie){return bt(T(ie),ie)},u&&(N(mt,"description",{configurable:!0,get:function(){return W(this).description}}),s||D(V,"propertyIsEnumerable",zt,{unsafe:!0}))),i({global:!0,constructor:!0,wrap:!0,forced:!f,sham:!f},{Symbol:rt}),dt(O(Y),function(ie){F(ie)}),i({target:"Symbol",stat:!0,forced:!f},{useSetter:function(){et=!0},useSimple:function(){et=!1}}),i({target:"Object",stat:!0,forced:!f,sham:!u},{create:function(ie,Xt){return Xt===void 0?S(ie):Ot(S(ie),Xt)},defineProperty:Et,defineProperties:Ot,getOwnPropertyDescriptor:Gt}),i({target:"Object",stat:!0,forced:!f},{getOwnPropertyNames:Jt}),H(),it(rt,"Symbol"),C[$]=!0},{"../internals/an-object":227,"../internals/array-iteration":229,"../internals/create-property-descriptor":242,"../internals/define-built-in":245,"../internals/define-built-in-accessor":244,"../internals/descriptors":247,"../internals/export":259,"../internals/fails":260,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/global":274,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/internal-state":282,"../internals/is-pure":290,"../internals/object-create":306,"../internals/object-define-properties":307,"../internals/object-define-property":308,"../internals/object-get-own-property-descriptor":309,"../internals/object-get-own-property-names":311,"../internals/object-get-own-property-names-external":310,"../internals/object-get-own-property-symbols":312,"../internals/object-is-prototype-of":314,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/set-to-string-tag":331,"../internals/shared":334,"../internals/shared-key":332,"../internals/symbol-constructor-detection":336,"../internals/symbol-define-to-primitive":337,"../internals/to-indexed-object":341,"../internals/to-property-key":346,"../internals/to-string":348,"../internals/uid":350,"../internals/well-known-symbol":357,"../internals/well-known-symbol-define":355,"../internals/well-known-symbol-wrapped":356}],380:[function(e,t,n){"use strict";var i=e("../internals/export"),r=e("../internals/get-built-in"),o=e("../internals/has-own-property"),a=e("../internals/to-string"),s=e("../internals/shared"),u=e("../internals/symbol-registry-detection"),f=s("string-to-symbol-registry"),c=s("symbol-to-string-registry");i({target:"Symbol",stat:!0,forced:!u},{for:function(d){var m=a(d);if(o(f,m))return f[m];var v=r("Symbol")(m);return f[m]=v,c[v]=m,v}})},{"../internals/export":259,"../internals/get-built-in":269,"../internals/has-own-property":275,"../internals/shared":334,"../internals/symbol-registry-detection":338,"../internals/to-string":348}],381:[function(e,t,n){"use strict";e("../modules/es.symbol.constructor"),e("../modules/es.symbol.for"),e("../modules/es.symbol.key-for"),e("../modules/es.json.stringify"),e("../modules/es.object.get-own-property-symbols")},{"../modules/es.json.stringify":362,"../modules/es.object.get-own-property-symbols":365,"../modules/es.symbol.constructor":379,"../modules/es.symbol.for":380,"../modules/es.symbol.key-for":382}],382:[function(e,t,n){"use strict";var i=e("../internals/export"),r=e("../internals/has-own-property"),o=e("../internals/is-symbol"),a=e("../internals/try-to-string"),s=e("../internals/shared"),u=e("../internals/symbol-registry-detection"),f=s("symbol-to-string-registry");i({target:"Symbol",stat:!0,forced:!u},{keyFor:function(c){if(!o(c))throw new TypeError(a(c)+" is not a symbol");if(r(f,c))return f[c]}})},{"../internals/export":259,"../internals/has-own-property":275,"../internals/is-symbol":292,"../internals/shared":334,"../internals/symbol-registry-detection":338,"../internals/try-to-string":349}],383:[function(e,t,n){"use strict";function i(r){return Object.prototype.toString.call(r)}n.isArray=function(r){return Array.isArray?Array.isArray(r):i(r)==="[object Array]"},n.isBoolean=function(r){return typeof r=="boolean"},n.isNull=function(r){return r===null},n.isNullOrUndefined=function(r){return r==null},n.isNumber=function(r){return typeof r=="number"},n.isString=function(r){return typeof r=="string"},n.isSymbol=function(r){return typeof r=="symbol"},n.isUndefined=function(r){return r===void 0},n.isRegExp=function(r){return i(r)==="[object RegExp]"},n.isObject=function(r){return typeof r=="object"&&r!==null},n.isDate=function(r){return i(r)==="[object Date]"},n.isError=function(r){return i(r)==="[object Error]"||r instanceof Error},n.isFunction=function(r){return typeof r=="function"},n.isPrimitive=function(r){return r===null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="symbol"||r===void 0},n.isBuffer=e("buffer").Buffer.isBuffer},{buffer:220}],384:[function(e,t,n){(function(i){(function(){"use strict";var r=e("elliptic"),o=e("bn.js");t.exports=function(f){return new s(f)};var a={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function s(f){this.curveType=a[f],this.curveType||(this.curveType={name:f}),this.curve=new r.ec(this.curveType.name),this.keys=void 0}function u(f,c,d){Array.isArray(f)||(f=f.toArray());var m=new i(f);if(d&&m.length<d){var v=new i(d-m.length);v.fill(0),m=i.concat([v,m])}return c?m.toString(c):m}a.p224=a.secp224r1,a.p256=a.secp256r1=a.prime256v1,a.p192=a.secp192r1=a.prime192v1,a.p384=a.secp384r1,a.p521=a.secp521r1,s.prototype.generateKeys=function(f,c){return this.keys=this.curve.genKeyPair(),this.getPublicKey(f,c)},s.prototype.computeSecret=function(f,c,d){return c=c||"utf8",i.isBuffer(f)||(f=new i(f,c)),u(this.curve.keyFromPublic(f).getPublic().mul(this.keys.getPrivate()).getX(),d,this.curveType.byteLength)},s.prototype.getPublicKey=function(f,c){var d=this.keys.getPublic(c==="compressed",!0);return c==="hybrid"&&(d[d.length-1]%2?d[0]=7:d[0]=6),u(d,f)},s.prototype.getPrivateKey=function(f){return u(this.keys.getPrivate(),f)},s.prototype.setPublicKey=function(f,c){return c=c||"utf8",i.isBuffer(f)||(f=new i(f,c)),this.keys._importPublic(f),this},s.prototype.setPrivateKey=function(f,c){c=c||"utf8",i.isBuffer(f)||(f=new i(f,c));var d=new o(f);return d=d.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(d),this}}).call(this)}).call(this,e("buffer").Buffer)},{"bn.js":385,buffer:220,elliptic:405}],385:[function(e,t,n){arguments[4][184][0].apply(n,arguments)},{buffer:188,dup:184}],386:[function(e,t,n){"use strict";var i=e("inherits"),r=e("md5.js"),o=e("ripemd160"),a=e("sha.js"),s=e("cipher-base");function u(f){s.call(this,"digest"),this._hash=f}i(u,s),u.prototype._update=function(f){this._hash.update(f)},u.prototype._final=function(){return this._hash.digest()},t.exports=function(f){return(f=f.toLowerCase())==="md5"?new r:f==="rmd160"||f==="ripemd160"?new o:new u(a(f))}},{"cipher-base":221,inherits:440,"md5.js":450,ripemd160:493,"sha.js":498}],387:[function(e,t,n){"use strict";var i=e("md5.js");t.exports=function(r){return new i().update(r).digest()}},{"md5.js":450}],388:[function(e,t,n){"use strict";var i=e("inherits"),r=e("./legacy"),o=e("cipher-base"),a=e("safe-buffer").Buffer,s=e("create-hash/md5"),u=e("ripemd160"),f=e("sha.js"),c=a.alloc(128);function d(m,v){o.call(this,"digest"),typeof v=="string"&&(v=a.from(v));var p=m==="sha512"||m==="sha384"?128:64;this._alg=m,this._key=v,v.length>p?v=(m==="rmd160"?new u:f(m)).update(v).digest():v.length<p&&(v=a.concat([v,c],p));for(var _=this._ipad=a.allocUnsafe(p),y=this._opad=a.allocUnsafe(p),x=0;x<p;x++)_[x]=54^v[x],y[x]=92^v[x];this._hash=m==="rmd160"?new u:f(m),this._hash.update(_)}i(d,o),d.prototype._update=function(m){this._hash.update(m)},d.prototype._final=function(){var m=this._hash.digest();return(this._alg==="rmd160"?new u:f(this._alg)).update(this._opad).update(m).digest()},t.exports=function(m,v){return(m=m.toLowerCase())==="rmd160"||m==="ripemd160"?new d("rmd160",v):m==="md5"?new r(s,v):new d(m,v)}},{"./legacy":389,"cipher-base":221,"create-hash/md5":387,inherits:440,ripemd160:493,"safe-buffer":494,"sha.js":498}],389:[function(e,t,n){"use strict";var i=e("inherits"),r=e("safe-buffer").Buffer,o=e("cipher-base"),a=r.alloc(128);function s(u,f){o.call(this,"digest"),typeof f=="string"&&(f=r.from(f)),this._alg=u,this._key=f,f.length>64?f=u(f):f.length<64&&(f=r.concat([f,a],64));for(var c=this._ipad=r.allocUnsafe(64),d=this._opad=r.allocUnsafe(64),m=0;m<64;m++)c[m]=54^f[m],d[m]=92^f[m];this._hash=[c]}i(s,o),s.prototype._update=function(u){this._hash.push(u)},s.prototype._final=function(){var u=this._alg(r.concat(this._hash));return this._alg(r.concat([this._opad,u]))},t.exports=s},{"cipher-base":221,inherits:440,"safe-buffer":494}],390:[function(e,t,n){"use strict";n.randomBytes=n.rng=n.pseudoRandomBytes=n.prng=e("randombytes"),n.createHash=n.Hash=e("create-hash"),n.createHmac=n.Hmac=e("create-hmac");var i=e("browserify-sign/algos"),r=Object.keys(i),o=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(r);n.getHashes=function(){return o};var a=e("pbkdf2");n.pbkdf2=a.pbkdf2,n.pbkdf2Sync=a.pbkdf2Sync;var s=e("browserify-cipher");n.Cipher=s.Cipher,n.createCipher=s.createCipher,n.Cipheriv=s.Cipheriv,n.createCipheriv=s.createCipheriv,n.Decipher=s.Decipher,n.createDecipher=s.createDecipher,n.Decipheriv=s.Decipheriv,n.createDecipheriv=s.createDecipheriv,n.getCiphers=s.getCiphers,n.listCiphers=s.listCiphers;var u=e("diffie-hellman");n.DiffieHellmanGroup=u.DiffieHellmanGroup,n.createDiffieHellmanGroup=u.createDiffieHellmanGroup,n.getDiffieHellman=u.getDiffieHellman,n.createDiffieHellman=u.createDiffieHellman,n.DiffieHellman=u.DiffieHellman;var f=e("browserify-sign");n.createSign=f.createSign,n.Sign=f.Sign,n.createVerify=f.createVerify,n.Verify=f.Verify,n.createECDH=e("create-ecdh");var c=e("public-encrypt");n.publicEncrypt=c.publicEncrypt,n.privateEncrypt=c.privateEncrypt,n.publicDecrypt=c.publicDecrypt,n.privateDecrypt=c.privateDecrypt;var d=e("randomfill");n.randomFill=d.randomFill,n.randomFillSync=d.randomFillSync,n.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join(`
`))},n.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},{"browserify-cipher":206,"browserify-sign":213,"browserify-sign/algos":210,"create-ecdh":384,"create-hash":386,"create-hmac":388,"diffie-hellman":400,pbkdf2:460,"public-encrypt":468,randombytes:475,randomfill:476}],391:[function(e,t,n){"use strict";(function(i,r){typeof n=="object"&&t!==void 0?t.exports=r():(i=typeof globalThis<"u"?globalThis:i||self).dayjs=r()})(void 0,function(){var i=6e4,r=36e5,o="millisecond",a="second",s="minute",u="hour",f="day",c="week",d="month",m="quarter",v="year",p="date",_="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,x=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,S={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(w){var C=["th","st","nd","rd"],k=w%100;return"["+w+(C[(k-20)%10]||C[k]||C[0])+"]"}},O=function(w,C,k){var T=String(w);return!T||T.length>=C?w:""+Array(C+1-T.length).join(k)+w},B={s:O,z:function(w){var C=-w.utcOffset(),k=Math.abs(C),T=Math.floor(k/60),R=k%60;return(C<=0?"+":"-")+O(T,2,"0")+":"+O(R,2,"0")},m:function w(C,k){if(C.date()<k.date())return-w(k,C);var T=12*(k.year()-C.year())+(k.month()-C.month()),R=C.clone().add(T,d),F=k-R<0,H=C.clone().add(T+(F?-1:1),d);return+(-(T+(k-R)/(F?R-H:H-R))||0)},a:function(w){return w<0?Math.ceil(w)||0:Math.floor(w)},p:function(w){return{M:d,y:v,w:c,d:f,D:p,h:u,m:s,s:a,ms:o,Q:m}[w]||String(w||"").toLowerCase().replace(/s$/,"")},u:function(w){return w===void 0}},U="en",z={};z[U]=S;var q="$isDayjsObject",G=function(w){return w instanceof N||!(!w||!w[q])},tt=function w(C,k,T){var R;if(!C)return U;if(typeof C=="string"){var F=C.toLowerCase();z[F]&&(R=F),k&&(z[F]=k,R=F);var H=C.split("-");if(!R&&H.length>1)return w(H[0])}else{var it=C.name;z[it]=C,R=it}return!T&&R&&(U=R),R||!T&&U},K=function(w,C){if(G(w))return w.clone();var k=typeof C=="object"?C:{};return k.date=w,k.args=arguments,new N(k)},D=B;D.l=tt,D.i=G,D.w=function(w,C){return K(w,{locale:C.$L,utc:C.$u,x:C.$x,$offset:C.$offset})};var N=function(){function w(k){this.$L=tt(k.locale,null,!0),this.parse(k),this.$x=this.$x||k.x||{},this[q]=!0}var C=w.prototype;return C.parse=function(k){this.$d=function(T){var R=T.date,F=T.utc;if(R===null)return new Date(NaN);if(D.u(R))return new Date;if(R instanceof Date)return new Date(R);if(typeof R=="string"&&!/Z$/i.test(R)){var H=R.match(y);if(H){var it=H[2]-1||0,ot=(H[7]||"0").substring(0,3);return F?new Date(Date.UTC(H[1],it,H[3]||1,H[4]||0,H[5]||0,H[6]||0,ot)):new Date(H[1],it,H[3]||1,H[4]||0,H[5]||0,H[6]||0,ot)}}return new Date(R)}(k),this.init()},C.init=function(){var k=this.$d;this.$y=k.getFullYear(),this.$M=k.getMonth(),this.$D=k.getDate(),this.$W=k.getDay(),this.$H=k.getHours(),this.$m=k.getMinutes(),this.$s=k.getSeconds(),this.$ms=k.getMilliseconds()},C.$utils=function(){return D},C.isValid=function(){return this.$d.toString()!==_},C.isSame=function(k,T){var R=K(k);return this.startOf(T)<=R&&R<=this.endOf(T)},C.isAfter=function(k,T){return K(k)<this.startOf(T)},C.isBefore=function(k,T){return this.endOf(T)<K(k)},C.$g=function(k,T,R){return D.u(k)?this[T]:this.set(R,k)},C.unix=function(){return Math.floor(this.valueOf()/1e3)},C.valueOf=function(){return this.$d.getTime()},C.startOf=function(k,T){var R=this,F=!!D.u(T)||T,H=D.p(k),it=function(mt,wt){var _t=D.w(R.$u?Date.UTC(R.$y,wt,mt):new Date(R.$y,wt,mt),R);return F?_t:_t.endOf(f)},ot=function(mt,wt){return D.w(R.toDate()[mt].apply(R.toDate("s"),(F?[0,0,0,0]:[23,59,59,999]).slice(wt)),R)},dt=this.$W,$=this.$M,ct=this.$D,W="set"+(this.$u?"UTC":"");switch(H){case v:return F?it(1,0):it(31,11);case d:return F?it(1,$):it(0,$+1);case c:var V=this.$locale().weekStart||0,rt=(dt<V?dt+7:dt)-V;return it(F?ct-rt:ct+(6-rt),$);case f:case p:return ot(W+"Hours",0);case u:return ot(W+"Minutes",1);case s:return ot(W+"Seconds",2);case a:return ot(W+"Milliseconds",3);default:return this.clone()}},C.endOf=function(k){return this.startOf(k,!1)},C.$set=function(k,T){var R,F=D.p(k),H="set"+(this.$u?"UTC":""),it=(R={},R[f]=H+"Date",R[p]=H+"Date",R[d]=H+"Month",R[v]=H+"FullYear",R[u]=H+"Hours",R[s]=H+"Minutes",R[a]=H+"Seconds",R[o]=H+"Milliseconds",R)[F],ot=F===f?this.$D+(T-this.$W):T;if(F===d||F===v){var dt=this.clone().set(p,1);dt.$d[it](ot),dt.init(),this.$d=dt.set(p,Math.min(this.$D,dt.daysInMonth())).$d}else it&&this.$d[it](ot);return this.init(),this},C.set=function(k,T){return this.clone().$set(k,T)},C.get=function(k){return this[D.p(k)]()},C.add=function(k,T){var R,F=this;k=Number(k);var H=D.p(T),it=function($){var ct=K(F);return D.w(ct.date(ct.date()+Math.round($*k)),F)};if(H===d)return this.set(d,this.$M+k);if(H===v)return this.set(v,this.$y+k);if(H===f)return it(1);if(H===c)return it(7);var ot=(R={},R[s]=i,R[u]=r,R[a]=1e3,R)[H]||1,dt=this.$d.getTime()+k*ot;return D.w(dt,this)},C.subtract=function(k,T){return this.add(-1*k,T)},C.format=function(k){var T=this,R=this.$locale();if(!this.isValid())return R.invalidDate||_;var F=k||"YYYY-MM-DDTHH:mm:ssZ",H=D.z(this),it=this.$H,ot=this.$m,dt=this.$M,$=R.weekdays,ct=R.months,W=R.meridiem,V=function(wt,_t,Ct,Ft){return wt&&(wt[_t]||wt(T,F))||Ct[_t].slice(0,Ft)},rt=function(wt){return D.s(it%12||12,wt,"0")},mt=W||function(wt,_t,Ct){var Ft=wt<12?"AM":"PM";return Ct?Ft.toLowerCase():Ft};return F.replace(x,function(wt,_t){return _t||function(Ct){switch(Ct){case"YY":return String(T.$y).slice(-2);case"YYYY":return D.s(T.$y,4,"0");case"M":return dt+1;case"MM":return D.s(dt+1,2,"0");case"MMM":return V(R.monthsShort,dt,ct,3);case"MMMM":return V(ct,dt);case"D":return T.$D;case"DD":return D.s(T.$D,2,"0");case"d":return String(T.$W);case"dd":return V(R.weekdaysMin,T.$W,$,2);case"ddd":return V(R.weekdaysShort,T.$W,$,3);case"dddd":return $[T.$W];case"H":return String(it);case"HH":return D.s(it,2,"0");case"h":return rt(1);case"hh":return rt(2);case"a":return mt(it,ot,!0);case"A":return mt(it,ot,!1);case"m":return String(ot);case"mm":return D.s(ot,2,"0");case"s":return String(T.$s);case"ss":return D.s(T.$s,2,"0");case"SSS":return D.s(T.$ms,3,"0");case"Z":return H}return null}(wt)||H.replace(":","")})},C.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},C.diff=function(k,T,R){var F,H=this,it=D.p(T),ot=K(k),dt=(ot.utcOffset()-this.utcOffset())*i,$=this-ot,ct=function(){return D.m(H,ot)};switch(it){case v:F=ct()/12;break;case d:F=ct();break;case m:F=ct()/3;break;case c:F=($-dt)/6048e5;break;case f:F=($-dt)/864e5;break;case u:F=$/r;break;case s:F=$/i;break;case a:F=$/1e3;break;default:F=$}return R?F:D.a(F)},C.daysInMonth=function(){return this.endOf(d).$D},C.$locale=function(){return z[this.$L]},C.locale=function(k,T){if(!k)return this.$L;var R=this.clone(),F=tt(k,T,!0);return F&&(R.$L=F),R},C.clone=function(){return D.w(this.$d,this)},C.toDate=function(){return new Date(this.valueOf())},C.toJSON=function(){return this.isValid()?this.toISOString():null},C.toISOString=function(){return this.$d.toISOString()},C.toString=function(){return this.$d.toUTCString()},w}(),Z=N.prototype;return K.prototype=Z,[["$ms",o],["$s",a],["$m",s],["$H",u],["$W",f],["$M",d],["$y",v],["$D",p]].forEach(function(w){Z[w[1]]=function(C){return this.$g(C,w[0],w[1])}}),K.extend=function(w,C){return w.$i||(w(C,N,K),w.$i=!0),K},K.locale=tt,K.isDayjs=G,K.unix=function(w){return K(1e3*w)},K.en=z[U],K.Ls=z,K.p={},K})},{}],392:[function(e,t,n){"use strict";(function(i,r){typeof n=="object"&&t!==void 0?t.exports=r():(i=typeof globalThis<"u"?globalThis:i||self).dayjs_plugin_customParseFormat=r()})(void 0,function(){var i={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},r=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,o=/\d\d/,a=/\d\d?/,s=/\d*[^-_:/,()\s\d]+/,u={},f=function(y){return(y=+y)+(y>68?1900:2e3)},c=function(y){return function(x){this[y]=+x}},d=[/[+-]\d\d:?(\d\d)?|Z/,function(y){(this.zone||(this.zone={})).offset=function(x){if(!x||x==="Z")return 0;var S=x.match(/([+-]|\d\d)/g),O=60*S[1]+(+S[2]||0);return O===0?0:S[0]==="+"?-O:O}(y)}],m=function(y){var x=u[y];return x&&(x.indexOf?x:x.s.concat(x.f))},v=function(y,x){var S,O=u.meridiem;if(O){for(var B=1;B<=24;B+=1)if(y.indexOf(O(B,0,x))>-1){S=B>12;break}}else S=y===(x?"pm":"PM");return S},p={A:[s,function(y){this.afternoon=v(y,!1)}],a:[s,function(y){this.afternoon=v(y,!0)}],S:[/\d/,function(y){this.milliseconds=100*+y}],SS:[o,function(y){this.milliseconds=10*+y}],SSS:[/\d{3}/,function(y){this.milliseconds=+y}],s:[a,c("seconds")],ss:[a,c("seconds")],m:[a,c("minutes")],mm:[a,c("minutes")],H:[a,c("hours")],h:[a,c("hours")],HH:[a,c("hours")],hh:[a,c("hours")],D:[a,c("day")],DD:[o,c("day")],Do:[s,function(y){var x=u.ordinal,S=y.match(/\d+/);if(this.day=S[0],x)for(var O=1;O<=31;O+=1)x(O).replace(/\[|\]/g,"")===y&&(this.day=O)}],M:[a,c("month")],MM:[o,c("month")],MMM:[s,function(y){var x=m("months"),S=(m("monthsShort")||x.map(function(O){return O.slice(0,3)})).indexOf(y)+1;if(S<1)throw new Error;this.month=S%12||S}],MMMM:[s,function(y){var x=m("months").indexOf(y)+1;if(x<1)throw new Error;this.month=x%12||x}],Y:[/[+-]?\d+/,c("year")],YY:[o,function(y){this.year=f(y)}],YYYY:[/\d{4}/,c("year")],Z:d,ZZ:d};function _(y){var x,S;x=y,S=u&&u.formats;for(var O=(y=x.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(K,D,N){var Z=N&&N.toUpperCase();return D||S[N]||i[N]||S[Z].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(w,C,k){return C||k.slice(1)})})).match(r),B=O.length,U=0;U<B;U+=1){var z=O[U],q=p[z],G=q&&q[0],tt=q&&q[1];O[U]=tt?{regex:G,parser:tt}:z.replace(/^\[|\]$/g,"")}return function(K){for(var D={},N=0,Z=0;N<B;N+=1){var w=O[N];if(typeof w=="string")Z+=w.length;else{var C=w.regex,k=w.parser,T=K.slice(Z),R=C.exec(T)[0];k.call(D,R),K=K.replace(R,"")}}return function(F){var H=F.afternoon;if(H!==void 0){var it=F.hours;H?it<12&&(F.hours+=12):it===12&&(F.hours=0),delete F.afternoon}}(D),D}}return function(y,x,S){S.p.customParseFormat=!0,y&&y.parseTwoDigitYear&&(f=y.parseTwoDigitYear);var O=x.prototype,B=O.parse;O.parse=function(U){var z=U.date,q=U.utc,G=U.args;this.$u=q;var tt=G[1];if(typeof tt=="string"){var K=G[2]===!0,D=G[3]===!0,N=K||D,Z=G[2];D&&(Z=G[2]),u=this.$locale(),!K&&Z&&(u=S.Ls[Z]),this.$d=function(T,R,F){try{if(["x","X"].indexOf(R)>-1)return new Date((R==="X"?1e3:1)*T);var H=_(R)(T),it=H.year,ot=H.month,dt=H.day,$=H.hours,ct=H.minutes,W=H.seconds,V=H.milliseconds,rt=H.zone,mt=new Date,wt=dt||(it||ot?1:mt.getDate()),_t=it||mt.getFullYear(),Ct=0;it&&!ot||(Ct=ot>0?ot-1:mt.getMonth());var Ft=$||0,It=ct||0,vt=W||0,kt=V||0;return rt?new Date(Date.UTC(_t,Ct,wt,Ft,It,vt,kt+60*rt.offset*1e3)):F?new Date(Date.UTC(_t,Ct,wt,Ft,It,vt,kt)):new Date(_t,Ct,wt,Ft,It,vt,kt)}catch{return new Date("")}}(z,tt,q),this.init(),Z&&Z!==!0&&(this.$L=this.locale(Z).$L),N&&z!=this.format(tt)&&(this.$d=new Date("")),u={}}else if(tt instanceof Array)for(var w=tt.length,C=1;C<=w;C+=1){G[1]=tt[C-1];var k=S.apply(this,G);if(k.isValid()){this.$d=k.$d,this.$L=k.$L,this.init();break}C===w&&(this.$d=new Date(""))}else B.call(this,U)}}})},{}],393:[function(e,t,n){"use strict";(function(i,r){typeof n=="object"&&t!==void 0?t.exports=r():(i=typeof globalThis<"u"?globalThis:i||self).dayjs_plugin_utc=r()})(void 0,function(){var i="minute",r=/[+-]\d\d(?::?\d\d)?/g,o=/([+-]|\d\d)/g;return function(a,s,u){var f=s.prototype;u.utc=function(y){var x={date:y,utc:!0,args:arguments};return new s(x)},f.utc=function(y){var x=u(this.toDate(),{locale:this.$L,utc:!0});return y?x.add(this.utcOffset(),i):x},f.local=function(){return u(this.toDate(),{locale:this.$L,utc:!1})};var c=f.parse;f.parse=function(y){y.utc&&(this.$u=!0),this.$utils().u(y.$offset)||(this.$offset=y.$offset),c.call(this,y)};var d=f.init;f.init=function(){if(this.$u){var y=this.$d;this.$y=y.getUTCFullYear(),this.$M=y.getUTCMonth(),this.$D=y.getUTCDate(),this.$W=y.getUTCDay(),this.$H=y.getUTCHours(),this.$m=y.getUTCMinutes(),this.$s=y.getUTCSeconds(),this.$ms=y.getUTCMilliseconds()}else d.call(this)};var m=f.utcOffset;f.utcOffset=function(y,x){var S=this.$utils().u;if(S(y))return this.$u?0:S(this.$offset)?m.call(this):this.$offset;if(typeof y=="string"&&(y=function(z){z===void 0&&(z="");var q=z.match(r);if(!q)return null;var G=(""+q[0]).match(o)||["-",0,0],tt=G[0],K=60*+G[1]+ +G[2];return K===0?0:tt==="+"?K:-K}(y))===null)return this;var O=Math.abs(y)<=16?60*y:y,B=this;if(x)return B.$offset=O,B.$u=y===0,B;if(y!==0){var U=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(B=this.local().add(O+U,i)).$offset=O,B.$x.$localOffset=U}else B=this.utc();return B};var v=f.format;f.format=function(y){var x=y||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return v.call(this,x)},f.valueOf=function(){var y=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*y},f.isUTC=function(){return!!this.$u},f.toISOString=function(){return this.toDate().toISOString()},f.toString=function(){return this.toDate().toUTCString()};var p=f.toDate;f.toDate=function(y){return y==="s"&&this.$offset?u(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():p.call(this)};var _=f.diff;f.diff=function(y,x,S){if(y&&this.$u===y.$u)return _.call(this,y,x,S);var O=this.local(),B=u(y).local();return _.call(O,B,x,S)}}})},{}],394:[function(e,t,n){"use strict";n.utils=e("./des/utils"),n.Cipher=e("./des/cipher"),n.DES=e("./des/des"),n.CBC=e("./des/cbc"),n.EDE=e("./des/ede")},{"./des/cbc":395,"./des/cipher":396,"./des/des":397,"./des/ede":398,"./des/utils":399}],395:[function(e,t,n){"use strict";var i=e("minimalistic-assert"),r=e("inherits"),o={};function a(s){i.equal(s.length,8,"Invalid IV length"),this.iv=new Array(8);for(var u=0;u<this.iv.length;u++)this.iv[u]=s[u]}n.instantiate=function(s){function u(m){s.call(this,m),this._cbcInit()}r(u,s);for(var f=Object.keys(o),c=0;c<f.length;c++){var d=f[c];u.prototype[d]=o[d]}return u.create=function(m){return new u(m)},u},o._cbcInit=function(){var s=new a(this.options.iv);this._cbcState=s},o._update=function(s,u,f,c){var d=this._cbcState,m=this.constructor.super_.prototype,v=d.iv;if(this.type==="encrypt"){for(var p=0;p<this.blockSize;p++)v[p]^=s[u+p];for(m._update.call(this,v,0,f,c),p=0;p<this.blockSize;p++)v[p]=f[c+p]}else{for(m._update.call(this,s,u,f,c),p=0;p<this.blockSize;p++)f[c+p]^=v[p];for(p=0;p<this.blockSize;p++)v[p]=s[u+p]}}},{inherits:440,"minimalistic-assert":453}],396:[function(e,t,n){"use strict";var i=e("minimalistic-assert");function r(o){this.options=o,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=o.padding!==!1}t.exports=r,r.prototype._init=function(){},r.prototype.update=function(o){return o.length===0?[]:this.type==="decrypt"?this._updateDecrypt(o):this._updateEncrypt(o)},r.prototype._buffer=function(o,a){for(var s=Math.min(this.buffer.length-this.bufferOff,o.length-a),u=0;u<s;u++)this.buffer[this.bufferOff+u]=o[a+u];return this.bufferOff+=s,s},r.prototype._flushBuffer=function(o,a){return this._update(this.buffer,0,o,a),this.bufferOff=0,this.blockSize},r.prototype._updateEncrypt=function(o){var a=0,s=0,u=(this.bufferOff+o.length)/this.blockSize|0,f=new Array(u*this.blockSize);this.bufferOff!==0&&(a+=this._buffer(o,a),this.bufferOff===this.buffer.length&&(s+=this._flushBuffer(f,s)));for(var c=o.length-(o.length-a)%this.blockSize;a<c;a+=this.blockSize)this._update(o,a,f,s),s+=this.blockSize;for(;a<o.length;a++,this.bufferOff++)this.buffer[this.bufferOff]=o[a];return f},r.prototype._updateDecrypt=function(o){for(var a=0,s=0,u=Math.ceil((this.bufferOff+o.length)/this.blockSize)-1,f=new Array(u*this.blockSize);u>0;u--)a+=this._buffer(o,a),s+=this._flushBuffer(f,s);return a+=this._buffer(o,a),f},r.prototype.final=function(o){var a,s;return o&&(a=this.update(o)),s=this.type==="encrypt"?this._finalEncrypt():this._finalDecrypt(),a?a.concat(s):s},r.prototype._pad=function(o,a){if(a===0)return!1;for(;a<o.length;)o[a++]=0;return!0},r.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var o=new Array(this.blockSize);return this._update(this.buffer,0,o,0),o},r.prototype._unpad=function(o){return o},r.prototype._finalDecrypt=function(){i.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var o=new Array(this.blockSize);return this._flushBuffer(o,0),this._unpad(o)}},{"minimalistic-assert":453}],397:[function(e,t,n){"use strict";var i=e("minimalistic-assert"),r=e("inherits"),o=e("./utils"),a=e("./cipher");function s(){this.tmp=new Array(2),this.keys=null}function u(c){a.call(this,c);var d=new s;this._desState=d,this.deriveKeys(d,c.key)}r(u,a),t.exports=u,u.create=function(c){return new u(c)};var f=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];u.prototype.deriveKeys=function(c,d){c.keys=new Array(32),i.equal(d.length,this.blockSize,"Invalid key length");var m=o.readUInt32BE(d,0),v=o.readUInt32BE(d,4);o.pc1(m,v,c.tmp,0),m=c.tmp[0],v=c.tmp[1];for(var p=0;p<c.keys.length;p+=2){var _=f[p>>>1];m=o.r28shl(m,_),v=o.r28shl(v,_),o.pc2(m,v,c.keys,p)}},u.prototype._update=function(c,d,m,v){var p=this._desState,_=o.readUInt32BE(c,d),y=o.readUInt32BE(c,d+4);o.ip(_,y,p.tmp,0),_=p.tmp[0],y=p.tmp[1],this.type==="encrypt"?this._encrypt(p,_,y,p.tmp,0):this._decrypt(p,_,y,p.tmp,0),_=p.tmp[0],y=p.tmp[1],o.writeUInt32BE(m,_,v),o.writeUInt32BE(m,y,v+4)},u.prototype._pad=function(c,d){if(this.padding===!1)return!1;for(var m=c.length-d,v=d;v<c.length;v++)c[v]=m;return!0},u.prototype._unpad=function(c){if(this.padding===!1)return c;for(var d=c[c.length-1],m=c.length-d;m<c.length;m++)i.equal(c[m],d);return c.slice(0,c.length-d)},u.prototype._encrypt=function(c,d,m,v,p){for(var _=d,y=m,x=0;x<c.keys.length;x+=2){var S=c.keys[x],O=c.keys[x+1];o.expand(y,c.tmp,0),S^=c.tmp[0],O^=c.tmp[1];var B=o.substitute(S,O),U=y;y=(_^o.permute(B))>>>0,_=U}o.rip(y,_,v,p)},u.prototype._decrypt=function(c,d,m,v,p){for(var _=m,y=d,x=c.keys.length-2;x>=0;x-=2){var S=c.keys[x],O=c.keys[x+1];o.expand(_,c.tmp,0),S^=c.tmp[0],O^=c.tmp[1];var B=o.substitute(S,O),U=_;_=(y^o.permute(B))>>>0,y=U}o.rip(_,y,v,p)}},{"./cipher":396,"./utils":399,inherits:440,"minimalistic-assert":453}],398:[function(e,t,n){"use strict";var i=e("minimalistic-assert"),r=e("inherits"),o=e("./cipher"),a=e("./des");function s(f,c){i.equal(c.length,24,"Invalid key length");var d=c.slice(0,8),m=c.slice(8,16),v=c.slice(16,24);this.ciphers=f==="encrypt"?[a.create({type:"encrypt",key:d}),a.create({type:"decrypt",key:m}),a.create({type:"encrypt",key:v})]:[a.create({type:"decrypt",key:v}),a.create({type:"encrypt",key:m}),a.create({type:"decrypt",key:d})]}function u(f){o.call(this,f);var c=new s(this.type,this.options.key);this._edeState=c}r(u,o),t.exports=u,u.create=function(f){return new u(f)},u.prototype._update=function(f,c,d,m){var v=this._edeState;v.ciphers[0]._update(f,c,d,m),v.ciphers[1]._update(d,m,d,m),v.ciphers[2]._update(d,m,d,m)},u.prototype._pad=a.prototype._pad,u.prototype._unpad=a.prototype._unpad},{"./cipher":396,"./des":397,inherits:440,"minimalistic-assert":453}],399:[function(e,t,n){"use strict";n.readUInt32BE=function(a,s){return(a[0+s]<<24|a[1+s]<<16|a[2+s]<<8|a[3+s])>>>0},n.writeUInt32BE=function(a,s,u){a[0+u]=s>>>24,a[1+u]=s>>>16&255,a[2+u]=s>>>8&255,a[3+u]=255&s},n.ip=function(a,s,u,f){for(var c=0,d=0,m=6;m>=0;m-=2){for(var v=0;v<=24;v+=8)c<<=1,c|=s>>>v+m&1;for(v=0;v<=24;v+=8)c<<=1,c|=a>>>v+m&1}for(m=6;m>=0;m-=2){for(v=1;v<=25;v+=8)d<<=1,d|=s>>>v+m&1;for(v=1;v<=25;v+=8)d<<=1,d|=a>>>v+m&1}u[f+0]=c>>>0,u[f+1]=d>>>0},n.rip=function(a,s,u,f){for(var c=0,d=0,m=0;m<4;m++)for(var v=24;v>=0;v-=8)c<<=1,c|=s>>>v+m&1,c<<=1,c|=a>>>v+m&1;for(m=4;m<8;m++)for(v=24;v>=0;v-=8)d<<=1,d|=s>>>v+m&1,d<<=1,d|=a>>>v+m&1;u[f+0]=c>>>0,u[f+1]=d>>>0},n.pc1=function(a,s,u,f){for(var c=0,d=0,m=7;m>=5;m--){for(var v=0;v<=24;v+=8)c<<=1,c|=s>>v+m&1;for(v=0;v<=24;v+=8)c<<=1,c|=a>>v+m&1}for(v=0;v<=24;v+=8)c<<=1,c|=s>>v+m&1;for(m=1;m<=3;m++){for(v=0;v<=24;v+=8)d<<=1,d|=s>>v+m&1;for(v=0;v<=24;v+=8)d<<=1,d|=a>>v+m&1}for(v=0;v<=24;v+=8)d<<=1,d|=a>>v+m&1;u[f+0]=c>>>0,u[f+1]=d>>>0},n.r28shl=function(a,s){return a<<s&268435455|a>>>28-s};var i=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];n.pc2=function(a,s,u,f){for(var c=0,d=0,m=i.length>>>1,v=0;v<m;v++)c<<=1,c|=a>>>i[v]&1;for(v=m;v<i.length;v++)d<<=1,d|=s>>>i[v]&1;u[f+0]=c>>>0,u[f+1]=d>>>0},n.expand=function(a,s,u){var f=0,c=0;f=(1&a)<<5|a>>>27;for(var d=23;d>=15;d-=4)f<<=6,f|=a>>>d&63;for(d=11;d>=3;d-=4)c|=a>>>d&63,c<<=6;c|=(31&a)<<1|a>>>31,s[u+0]=f>>>0,s[u+1]=c>>>0};var r=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];n.substitute=function(a,s){for(var u=0,f=0;f<4;f++)u<<=4,u|=r[64*f+(a>>>18-6*f&63)];for(f=0;f<4;f++)u<<=4,u|=r[256+64*f+(s>>>18-6*f&63)];return u>>>0};var o=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];n.permute=function(a){for(var s=0,u=0;u<o.length;u++)s<<=1,s|=a>>>o[u]&1;return s>>>0},n.padSplit=function(a,s,u){for(var f=a.toString(2);f.length<s;)f="0"+f;for(var c=[],d=0;d<s;d+=u)c.push(f.slice(d,d+u));return c.join(" ")}},{}],400:[function(e,t,n){(function(i){(function(){"use strict";var r=e("./lib/generatePrime"),o=e("./lib/primes.json"),a=e("./lib/dh"),s={binary:!0,hex:!0,base64:!0};n.DiffieHellmanGroup=n.createDiffieHellmanGroup=n.getDiffieHellman=function(u){var f=new i(o[u].prime,"hex"),c=new i(o[u].gen,"hex");return new a(f,c)},n.createDiffieHellman=n.DiffieHellman=function u(f,c,d,m){return i.isBuffer(c)||s[c]===void 0?u(f,"binary",c,d):(c=c||"binary",m=m||"binary",d=d||new i([2]),i.isBuffer(d)||(d=new i(d,m)),typeof f=="number"?new a(r(f,d),d,!0):(i.isBuffer(f)||(f=new i(f,c)),new a(f,d,!0)))}}).call(this)}).call(this,e("buffer").Buffer)},{"./lib/dh":401,"./lib/generatePrime":402,"./lib/primes.json":403,buffer:220}],401:[function(e,t,n){(function(i){(function(){"use strict";var r=e("bn.js"),o=new(e("miller-rabin")),a=new r(24),s=new r(11),u=new r(10),f=new r(3),c=new r(7),d=e("./generatePrime"),m=e("randombytes");function v(S,O){return O=O||"utf8",i.isBuffer(S)||(S=new i(S,O)),this._pub=new r(S),this}function p(S,O){return O=O||"utf8",i.isBuffer(S)||(S=new i(S,O)),this._priv=new r(S),this}t.exports=y;var _={};function y(S,O,B){this.setGenerator(O),this.__prime=new r(S),this._prime=r.mont(this.__prime),this._primeLen=S.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,B?(this.setPublicKey=v,this.setPrivateKey=p):this._primeCode=8}function x(S,O){var B=new i(S.toArray());return O?B.toString(O):B}Object.defineProperty(y.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=function(S,O){var B=O.toString("hex"),U=[B,S.toString(16)].join("_");if(U in _)return _[U];var z,q=0;if(S.isEven()||!d.simpleSieve||!d.fermatTest(S)||!o.test(S))return q+=1,q+=B==="02"||B==="05"?8:4,_[U]=q,q;switch(o.test(S.shrn(1))||(q+=2),B){case"02":S.mod(a).cmp(s)&&(q+=8);break;case"05":(z=S.mod(u)).cmp(f)&&z.cmp(c)&&(q+=8);break;default:q+=4}return _[U]=q,q}(this.__prime,this.__gen)),this._primeCode}}),y.prototype.generateKeys=function(){return this._priv||(this._priv=new r(m(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},y.prototype.computeSecret=function(S){var O=(S=(S=new r(S)).toRed(this._prime)).redPow(this._priv).fromRed(),B=new i(O.toArray()),U=this.getPrime();if(B.length<U.length){var z=new i(U.length-B.length);z.fill(0),B=i.concat([z,B])}return B},y.prototype.getPublicKey=function(S){return x(this._pub,S)},y.prototype.getPrivateKey=function(S){return x(this._priv,S)},y.prototype.getPrime=function(S){return x(this.__prime,S)},y.prototype.getGenerator=function(S){return x(this._gen,S)},y.prototype.setGenerator=function(S,O){return O=O||"utf8",i.isBuffer(S)||(S=new i(S,O)),this.__gen=S,this._gen=new r(S),this}}).call(this)}).call(this,e("buffer").Buffer)},{"./generatePrime":402,"bn.js":404,buffer:220,"miller-rabin":451,randombytes:475}],402:[function(e,t,n){"use strict";var i=e("randombytes");t.exports=S,S.simpleSieve=y,S.fermatTest=x;var r=e("bn.js"),o=new r(24),a=new(e("miller-rabin")),s=new r(1),u=new r(2),f=new r(5),c=(new r(16),new r(8),new r(10)),d=new r(3),m=(new r(7),new r(11)),v=new r(4),p=(new r(12),null);function _(){if(p!==null)return p;var O=[];O[0]=2;for(var B=1,U=3;U<1048576;U+=2){for(var z=Math.ceil(Math.sqrt(U)),q=0;q<B&&O[q]<=z&&U%O[q]!=0;q++);B!==q&&O[q]<=z||(O[B++]=U)}return p=O,O}function y(O){for(var B=_(),U=0;U<B.length;U++)if(O.modn(B[U])===0)return O.cmpn(B[U])===0;return!0}function x(O){var B=r.mont(O);return u.toRed(B).redPow(O.subn(1)).fromRed().cmpn(1)===0}function S(O,B){if(O<16)return new r(B===2||B===5?[140,123]:[140,39]);var U,z;for(B=new r(B);;){for(U=new r(i(Math.ceil(O/8)));U.bitLength()>O;)U.ishrn(1);if(U.isEven()&&U.iadd(s),U.testn(1)||U.iadd(u),B.cmp(u)){if(!B.cmp(f))for(;U.mod(c).cmp(d);)U.iadd(v)}else for(;U.mod(o).cmp(m);)U.iadd(v);if(y(z=U.shrn(1))&&y(U)&&x(z)&&x(U)&&a.test(z)&&a.test(U))return U}}},{"bn.js":404,"miller-rabin":451,randombytes:475}],403:[function(e,t,n){t.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},{}],404:[function(e,t,n){arguments[4][184][0].apply(n,arguments)},{buffer:188,dup:184}],405:[function(e,t,n){"use strict";var i=n;i.version=e("../package.json").version,i.utils=e("./elliptic/utils"),i.rand=e("brorand"),i.curve=e("./elliptic/curve"),i.curves=e("./elliptic/curves"),i.ec=e("./elliptic/ec"),i.eddsa=e("./elliptic/eddsa")},{"../package.json":421,"./elliptic/curve":408,"./elliptic/curves":411,"./elliptic/ec":412,"./elliptic/eddsa":415,"./elliptic/utils":419,brorand:187}],406:[function(e,t,n){"use strict";var i=e("bn.js"),r=e("../utils"),o=r.getNAF,a=r.getJSF,s=r.assert;function u(c,d){this.type=c,this.p=new i(d.p,16),this.red=d.prime?i.red(d.prime):i.mont(this.p),this.zero=new i(0).toRed(this.red),this.one=new i(1).toRed(this.red),this.two=new i(2).toRed(this.red),this.n=d.n&&new i(d.n,16),this.g=d.g&&this.pointFromJSON(d.g,d.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var m=this.n&&this.p.div(this.n);!m||m.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function f(c,d){this.curve=c,this.type=d,this.precomputed=null}t.exports=u,u.prototype.point=function(){throw new Error("Not implemented")},u.prototype.validate=function(){throw new Error("Not implemented")},u.prototype._fixedNafMul=function(c,d){s(c.precomputed);var m=c._getDoubles(),v=o(d,1,this._bitLength),p=(1<<m.step+1)-(m.step%2==0?2:1);p/=3;var _,y,x=[];for(_=0;_<v.length;_+=m.step){y=0;for(var S=_+m.step-1;S>=_;S--)y=(y<<1)+v[S];x.push(y)}for(var O=this.jpoint(null,null,null),B=this.jpoint(null,null,null),U=p;U>0;U--){for(_=0;_<x.length;_++)(y=x[_])===U?B=B.mixedAdd(m.points[_]):y===-U&&(B=B.mixedAdd(m.points[_].neg()));O=O.add(B)}return O.toP()},u.prototype._wnafMul=function(c,d){var m=4,v=c._getNAFPoints(m);m=v.wnd;for(var p=v.points,_=o(d,m,this._bitLength),y=this.jpoint(null,null,null),x=_.length-1;x>=0;x--){for(var S=0;x>=0&&_[x]===0;x--)S++;if(x>=0&&S++,y=y.dblp(S),x<0)break;var O=_[x];s(O!==0),y=c.type==="affine"?O>0?y.mixedAdd(p[O-1>>1]):y.mixedAdd(p[-O-1>>1].neg()):O>0?y.add(p[O-1>>1]):y.add(p[-O-1>>1].neg())}return c.type==="affine"?y.toP():y},u.prototype._wnafMulAdd=function(c,d,m,v,p){var _,y,x,S=this._wnafT1,O=this._wnafT2,B=this._wnafT3,U=0;for(_=0;_<v;_++){var z=(x=d[_])._getNAFPoints(c);S[_]=z.wnd,O[_]=z.points}for(_=v-1;_>=1;_-=2){var q=_-1,G=_;if(S[q]===1&&S[G]===1){var tt=[d[q],null,null,d[G]];d[q].y.cmp(d[G].y)===0?(tt[1]=d[q].add(d[G]),tt[2]=d[q].toJ().mixedAdd(d[G].neg())):d[q].y.cmp(d[G].y.redNeg())===0?(tt[1]=d[q].toJ().mixedAdd(d[G]),tt[2]=d[q].add(d[G].neg())):(tt[1]=d[q].toJ().mixedAdd(d[G]),tt[2]=d[q].toJ().mixedAdd(d[G].neg()));var K=[-3,-1,-5,-7,0,7,5,1,3],D=a(m[q],m[G]);for(U=Math.max(D[0].length,U),B[q]=new Array(U),B[G]=new Array(U),y=0;y<U;y++){var N=0|D[0][y],Z=0|D[1][y];B[q][y]=K[3*(N+1)+(Z+1)],B[G][y]=0,O[q]=tt}}else B[q]=o(m[q],S[q],this._bitLength),B[G]=o(m[G],S[G],this._bitLength),U=Math.max(B[q].length,U),U=Math.max(B[G].length,U)}var w=this.jpoint(null,null,null),C=this._wnafT4;for(_=U;_>=0;_--){for(var k=0;_>=0;){var T=!0;for(y=0;y<v;y++)C[y]=0|B[y][_],C[y]!==0&&(T=!1);if(!T)break;k++,_--}if(_>=0&&k++,w=w.dblp(k),_<0)break;for(y=0;y<v;y++){var R=C[y];R!==0&&(R>0?x=O[y][R-1>>1]:R<0&&(x=O[y][-R-1>>1].neg()),w=x.type==="affine"?w.mixedAdd(x):w.add(x))}}for(_=0;_<v;_++)O[_]=null;return p?w:w.toP()},u.BasePoint=f,f.prototype.eq=function(){throw new Error("Not implemented")},f.prototype.validate=function(){return this.curve.validate(this)},u.prototype.decodePoint=function(c,d){c=r.toArray(c,d);var m=this.p.byteLength();if((c[0]===4||c[0]===6||c[0]===7)&&c.length-1==2*m)return c[0]===6?s(c[c.length-1]%2==0):c[0]===7&&s(c[c.length-1]%2==1),this.point(c.slice(1,1+m),c.slice(1+m,1+2*m));if((c[0]===2||c[0]===3)&&c.length-1===m)return this.pointFromX(c.slice(1,1+m),c[0]===3);throw new Error("Unknown point format")},f.prototype.encodeCompressed=function(c){return this.encode(c,!0)},f.prototype._encode=function(c){var d=this.curve.p.byteLength(),m=this.getX().toArray("be",d);return c?[this.getY().isEven()?2:3].concat(m):[4].concat(m,this.getY().toArray("be",d))},f.prototype.encode=function(c,d){return r.encode(this._encode(d),c)},f.prototype.precompute=function(c){if(this.precomputed)return this;var d={doubles:null,naf:null,beta:null};return d.naf=this._getNAFPoints(8),d.doubles=this._getDoubles(4,c),d.beta=this._getBeta(),this.precomputed=d,this},f.prototype._hasDoubles=function(c){if(!this.precomputed)return!1;var d=this.precomputed.doubles;return!!d&&d.points.length>=Math.ceil((c.bitLength()+1)/d.step)},f.prototype._getDoubles=function(c,d){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var m=[this],v=this,p=0;p<d;p+=c){for(var _=0;_<c;_++)v=v.dbl();m.push(v)}return{step:c,points:m}},f.prototype._getNAFPoints=function(c){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var d=[this],m=(1<<c)-1,v=m===1?null:this.dbl(),p=1;p<m;p++)d[p]=d[p-1].add(v);return{wnd:c,points:d}},f.prototype._getBeta=function(){return null},f.prototype.dblp=function(c){for(var d=this,m=0;m<c;m++)d=d.dbl();return d}},{"../utils":419,"bn.js":420}],407:[function(e,t,n){"use strict";var i=e("../utils"),r=e("bn.js"),o=e("inherits"),a=e("./base"),s=i.assert;function u(c){this.twisted=(0|c.a)!=1,this.mOneA=this.twisted&&(0|c.a)==-1,this.extended=this.mOneA,a.call(this,"edwards",c),this.a=new r(c.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new r(c.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new r(c.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),s(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(0|c.c)==1}function f(c,d,m,v,p){a.BasePoint.call(this,c,"projective"),d===null&&m===null&&v===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new r(d,16),this.y=new r(m,16),this.z=v?new r(v,16):this.curve.one,this.t=p&&new r(p,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}o(u,a),t.exports=u,u.prototype._mulA=function(c){return this.mOneA?c.redNeg():this.a.redMul(c)},u.prototype._mulC=function(c){return this.oneC?c:this.c.redMul(c)},u.prototype.jpoint=function(c,d,m,v){return this.point(c,d,m,v)},u.prototype.pointFromX=function(c,d){(c=new r(c,16)).red||(c=c.toRed(this.red));var m=c.redSqr(),v=this.c2.redSub(this.a.redMul(m)),p=this.one.redSub(this.c2.redMul(this.d).redMul(m)),_=v.redMul(p.redInvm()),y=_.redSqrt();if(y.redSqr().redSub(_).cmp(this.zero)!==0)throw new Error("invalid point");var x=y.fromRed().isOdd();return(d&&!x||!d&&x)&&(y=y.redNeg()),this.point(c,y)},u.prototype.pointFromY=function(c,d){(c=new r(c,16)).red||(c=c.toRed(this.red));var m=c.redSqr(),v=m.redSub(this.c2),p=m.redMul(this.d).redMul(this.c2).redSub(this.a),_=v.redMul(p.redInvm());if(_.cmp(this.zero)===0){if(d)throw new Error("invalid point");return this.point(this.zero,c)}var y=_.redSqrt();if(y.redSqr().redSub(_).cmp(this.zero)!==0)throw new Error("invalid point");return y.fromRed().isOdd()!==d&&(y=y.redNeg()),this.point(y,c)},u.prototype.validate=function(c){if(c.isInfinity())return!0;c.normalize();var d=c.x.redSqr(),m=c.y.redSqr(),v=d.redMul(this.a).redAdd(m),p=this.c2.redMul(this.one.redAdd(this.d.redMul(d).redMul(m)));return v.cmp(p)===0},o(f,a.BasePoint),u.prototype.pointFromJSON=function(c){return f.fromJSON(this,c)},u.prototype.point=function(c,d,m,v){return new f(this,c,d,m,v)},f.fromJSON=function(c,d){return new f(c,d[0],d[1],d[2])},f.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},f.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},f.prototype._extDbl=function(){var c=this.x.redSqr(),d=this.y.redSqr(),m=this.z.redSqr();m=m.redIAdd(m);var v=this.curve._mulA(c),p=this.x.redAdd(this.y).redSqr().redISub(c).redISub(d),_=v.redAdd(d),y=_.redSub(m),x=v.redSub(d),S=p.redMul(y),O=_.redMul(x),B=p.redMul(x),U=y.redMul(_);return this.curve.point(S,O,U,B)},f.prototype._projDbl=function(){var c,d,m,v,p,_,y=this.x.redAdd(this.y).redSqr(),x=this.x.redSqr(),S=this.y.redSqr();if(this.curve.twisted){var O=(v=this.curve._mulA(x)).redAdd(S);this.zOne?(c=y.redSub(x).redSub(S).redMul(O.redSub(this.curve.two)),d=O.redMul(v.redSub(S)),m=O.redSqr().redSub(O).redSub(O)):(p=this.z.redSqr(),_=O.redSub(p).redISub(p),c=y.redSub(x).redISub(S).redMul(_),d=O.redMul(v.redSub(S)),m=O.redMul(_))}else v=x.redAdd(S),p=this.curve._mulC(this.z).redSqr(),_=v.redSub(p).redSub(p),c=this.curve._mulC(y.redISub(v)).redMul(_),d=this.curve._mulC(v).redMul(x.redISub(S)),m=v.redMul(_);return this.curve.point(c,d,m)},f.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},f.prototype._extAdd=function(c){var d=this.y.redSub(this.x).redMul(c.y.redSub(c.x)),m=this.y.redAdd(this.x).redMul(c.y.redAdd(c.x)),v=this.t.redMul(this.curve.dd).redMul(c.t),p=this.z.redMul(c.z.redAdd(c.z)),_=m.redSub(d),y=p.redSub(v),x=p.redAdd(v),S=m.redAdd(d),O=_.redMul(y),B=x.redMul(S),U=_.redMul(S),z=y.redMul(x);return this.curve.point(O,B,z,U)},f.prototype._projAdd=function(c){var d,m,v=this.z.redMul(c.z),p=v.redSqr(),_=this.x.redMul(c.x),y=this.y.redMul(c.y),x=this.curve.d.redMul(_).redMul(y),S=p.redSub(x),O=p.redAdd(x),B=this.x.redAdd(this.y).redMul(c.x.redAdd(c.y)).redISub(_).redISub(y),U=v.redMul(S).redMul(B);return this.curve.twisted?(d=v.redMul(O).redMul(y.redSub(this.curve._mulA(_))),m=S.redMul(O)):(d=v.redMul(O).redMul(y.redSub(_)),m=this.curve._mulC(S).redMul(O)),this.curve.point(U,d,m)},f.prototype.add=function(c){return this.isInfinity()?c:c.isInfinity()?this:this.curve.extended?this._extAdd(c):this._projAdd(c)},f.prototype.mul=function(c){return this._hasDoubles(c)?this.curve._fixedNafMul(this,c):this.curve._wnafMul(this,c)},f.prototype.mulAdd=function(c,d,m){return this.curve._wnafMulAdd(1,[this,d],[c,m],2,!1)},f.prototype.jmulAdd=function(c,d,m){return this.curve._wnafMulAdd(1,[this,d],[c,m],2,!0)},f.prototype.normalize=function(){if(this.zOne)return this;var c=this.z.redInvm();return this.x=this.x.redMul(c),this.y=this.y.redMul(c),this.t&&(this.t=this.t.redMul(c)),this.z=this.curve.one,this.zOne=!0,this},f.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},f.prototype.getX=function(){return this.normalize(),this.x.fromRed()},f.prototype.getY=function(){return this.normalize(),this.y.fromRed()},f.prototype.eq=function(c){return this===c||this.getX().cmp(c.getX())===0&&this.getY().cmp(c.getY())===0},f.prototype.eqXToP=function(c){var d=c.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(d)===0)return!0;for(var m=c.clone(),v=this.curve.redN.redMul(this.z);;){if(m.iadd(this.curve.n),m.cmp(this.curve.p)>=0)return!1;if(d.redIAdd(v),this.x.cmp(d)===0)return!0}},f.prototype.toP=f.prototype.normalize,f.prototype.mixedAdd=f.prototype.add},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],408:[function(e,t,n){"use strict";var i=n;i.base=e("./base"),i.short=e("./short"),i.mont=e("./mont"),i.edwards=e("./edwards")},{"./base":406,"./edwards":407,"./mont":409,"./short":410}],409:[function(e,t,n){"use strict";var i=e("bn.js"),r=e("inherits"),o=e("./base"),a=e("../utils");function s(f){o.call(this,"mont",f),this.a=new i(f.a,16).toRed(this.red),this.b=new i(f.b,16).toRed(this.red),this.i4=new i(4).toRed(this.red).redInvm(),this.two=new i(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function u(f,c,d){o.BasePoint.call(this,f,"projective"),c===null&&d===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new i(c,16),this.z=new i(d,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}r(s,o),t.exports=s,s.prototype.validate=function(f){var c=f.normalize().x,d=c.redSqr(),m=d.redMul(c).redAdd(d.redMul(this.a)).redAdd(c);return m.redSqrt().redSqr().cmp(m)===0},r(u,o.BasePoint),s.prototype.decodePoint=function(f,c){return this.point(a.toArray(f,c),1)},s.prototype.point=function(f,c){return new u(this,f,c)},s.prototype.pointFromJSON=function(f){return u.fromJSON(this,f)},u.prototype.precompute=function(){},u.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},u.fromJSON=function(f,c){return new u(f,c[0],c[1]||f.one)},u.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},u.prototype.isInfinity=function(){return this.z.cmpn(0)===0},u.prototype.dbl=function(){var f=this.x.redAdd(this.z).redSqr(),c=this.x.redSub(this.z).redSqr(),d=f.redSub(c),m=f.redMul(c),v=d.redMul(c.redAdd(this.curve.a24.redMul(d)));return this.curve.point(m,v)},u.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.diffAdd=function(f,c){var d=this.x.redAdd(this.z),m=this.x.redSub(this.z),v=f.x.redAdd(f.z),p=f.x.redSub(f.z).redMul(d),_=v.redMul(m),y=c.z.redMul(p.redAdd(_).redSqr()),x=c.x.redMul(p.redISub(_).redSqr());return this.curve.point(y,x)},u.prototype.mul=function(f){for(var c=f.clone(),d=this,m=this.curve.point(null,null),v=[];c.cmpn(0)!==0;c.iushrn(1))v.push(c.andln(1));for(var p=v.length-1;p>=0;p--)v[p]===0?(d=d.diffAdd(m,this),m=m.dbl()):(m=d.diffAdd(m,this),d=d.dbl());return m},u.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.eq=function(f){return this.getX().cmp(f.getX())===0},u.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},u.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],410:[function(e,t,n){"use strict";var i=e("../utils"),r=e("bn.js"),o=e("inherits"),a=e("./base"),s=i.assert;function u(d){a.call(this,"short",d),this.a=new r(d.a,16).toRed(this.red),this.b=new r(d.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(d),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function f(d,m,v,p){a.BasePoint.call(this,d,"affine"),m===null&&v===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new r(m,16),this.y=new r(v,16),p&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function c(d,m,v,p){a.BasePoint.call(this,d,"jacobian"),m===null&&v===null&&p===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new r(0)):(this.x=new r(m,16),this.y=new r(v,16),this.z=new r(p,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}o(u,a),t.exports=u,u.prototype._getEndomorphism=function(d){if(this.zeroA&&this.g&&this.n&&this.p.modn(3)===1){var m,v;if(d.beta)m=new r(d.beta,16).toRed(this.red);else{var p=this._getEndoRoots(this.p);m=(m=p[0].cmp(p[1])<0?p[0]:p[1]).toRed(this.red)}if(d.lambda)v=new r(d.lambda,16);else{var _=this._getEndoRoots(this.n);this.g.mul(_[0]).x.cmp(this.g.x.redMul(m))===0?v=_[0]:(v=_[1],s(this.g.mul(v).x.cmp(this.g.x.redMul(m))===0))}return{beta:m,lambda:v,basis:d.basis?d.basis.map(function(y){return{a:new r(y.a,16),b:new r(y.b,16)}}):this._getEndoBasis(v)}}},u.prototype._getEndoRoots=function(d){var m=d===this.p?this.red:r.mont(d),v=new r(2).toRed(m).redInvm(),p=v.redNeg(),_=new r(3).toRed(m).redNeg().redSqrt().redMul(v);return[p.redAdd(_).fromRed(),p.redSub(_).fromRed()]},u.prototype._getEndoBasis=function(d){for(var m,v,p,_,y,x,S,O,B,U=this.n.ushrn(Math.floor(this.n.bitLength()/2)),z=d,q=this.n.clone(),G=new r(1),tt=new r(0),K=new r(0),D=new r(1),N=0;z.cmpn(0)!==0;){var Z=q.div(z);O=q.sub(Z.mul(z)),B=K.sub(Z.mul(G));var w=D.sub(Z.mul(tt));if(!p&&O.cmp(U)<0)m=S.neg(),v=G,p=O.neg(),_=B;else if(p&&++N==2)break;S=O,q=z,z=O,K=G,G=B,D=tt,tt=w}y=O.neg(),x=B;var C=p.sqr().add(_.sqr());return y.sqr().add(x.sqr()).cmp(C)>=0&&(y=m,x=v),p.negative&&(p=p.neg(),_=_.neg()),y.negative&&(y=y.neg(),x=x.neg()),[{a:p,b:_},{a:y,b:x}]},u.prototype._endoSplit=function(d){var m=this.endo.basis,v=m[0],p=m[1],_=p.b.mul(d).divRound(this.n),y=v.b.neg().mul(d).divRound(this.n),x=_.mul(v.a),S=y.mul(p.a),O=_.mul(v.b),B=y.mul(p.b);return{k1:d.sub(x).sub(S),k2:O.add(B).neg()}},u.prototype.pointFromX=function(d,m){(d=new r(d,16)).red||(d=d.toRed(this.red));var v=d.redSqr().redMul(d).redIAdd(d.redMul(this.a)).redIAdd(this.b),p=v.redSqrt();if(p.redSqr().redSub(v).cmp(this.zero)!==0)throw new Error("invalid point");var _=p.fromRed().isOdd();return(m&&!_||!m&&_)&&(p=p.redNeg()),this.point(d,p)},u.prototype.validate=function(d){if(d.inf)return!0;var m=d.x,v=d.y,p=this.a.redMul(m),_=m.redSqr().redMul(m).redIAdd(p).redIAdd(this.b);return v.redSqr().redISub(_).cmpn(0)===0},u.prototype._endoWnafMulAdd=function(d,m,v){for(var p=this._endoWnafT1,_=this._endoWnafT2,y=0;y<d.length;y++){var x=this._endoSplit(m[y]),S=d[y],O=S._getBeta();x.k1.negative&&(x.k1.ineg(),S=S.neg(!0)),x.k2.negative&&(x.k2.ineg(),O=O.neg(!0)),p[2*y]=S,p[2*y+1]=O,_[2*y]=x.k1,_[2*y+1]=x.k2}for(var B=this._wnafMulAdd(1,p,_,2*y,v),U=0;U<2*y;U++)p[U]=null,_[U]=null;return B},o(f,a.BasePoint),u.prototype.point=function(d,m,v){return new f(this,d,m,v)},u.prototype.pointFromJSON=function(d,m){return f.fromJSON(this,d,m)},f.prototype._getBeta=function(){if(this.curve.endo){var d=this.precomputed;if(d&&d.beta)return d.beta;var m=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(d){var v=this.curve,p=function(_){return v.point(_.x.redMul(v.endo.beta),_.y)};d.beta=m,m.precomputed={beta:null,naf:d.naf&&{wnd:d.naf.wnd,points:d.naf.points.map(p)},doubles:d.doubles&&{step:d.doubles.step,points:d.doubles.points.map(p)}}}return m}},f.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},f.fromJSON=function(d,m,v){typeof m=="string"&&(m=JSON.parse(m));var p=d.point(m[0],m[1],v);if(!m[2])return p;function _(x){return d.point(x[0],x[1],v)}var y=m[2];return p.precomputed={beta:null,doubles:y.doubles&&{step:y.doubles.step,points:[p].concat(y.doubles.points.map(_))},naf:y.naf&&{wnd:y.naf.wnd,points:[p].concat(y.naf.points.map(_))}},p},f.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},f.prototype.isInfinity=function(){return this.inf},f.prototype.add=function(d){if(this.inf)return d;if(d.inf)return this;if(this.eq(d))return this.dbl();if(this.neg().eq(d))return this.curve.point(null,null);if(this.x.cmp(d.x)===0)return this.curve.point(null,null);var m=this.y.redSub(d.y);m.cmpn(0)!==0&&(m=m.redMul(this.x.redSub(d.x).redInvm()));var v=m.redSqr().redISub(this.x).redISub(d.x),p=m.redMul(this.x.redSub(v)).redISub(this.y);return this.curve.point(v,p)},f.prototype.dbl=function(){if(this.inf)return this;var d=this.y.redAdd(this.y);if(d.cmpn(0)===0)return this.curve.point(null,null);var m=this.curve.a,v=this.x.redSqr(),p=d.redInvm(),_=v.redAdd(v).redIAdd(v).redIAdd(m).redMul(p),y=_.redSqr().redISub(this.x.redAdd(this.x)),x=_.redMul(this.x.redSub(y)).redISub(this.y);return this.curve.point(y,x)},f.prototype.getX=function(){return this.x.fromRed()},f.prototype.getY=function(){return this.y.fromRed()},f.prototype.mul=function(d){return d=new r(d,16),this.isInfinity()?this:this._hasDoubles(d)?this.curve._fixedNafMul(this,d):this.curve.endo?this.curve._endoWnafMulAdd([this],[d]):this.curve._wnafMul(this,d)},f.prototype.mulAdd=function(d,m,v){var p=[this,m],_=[d,v];return this.curve.endo?this.curve._endoWnafMulAdd(p,_):this.curve._wnafMulAdd(1,p,_,2)},f.prototype.jmulAdd=function(d,m,v){var p=[this,m],_=[d,v];return this.curve.endo?this.curve._endoWnafMulAdd(p,_,!0):this.curve._wnafMulAdd(1,p,_,2,!0)},f.prototype.eq=function(d){return this===d||this.inf===d.inf&&(this.inf||this.x.cmp(d.x)===0&&this.y.cmp(d.y)===0)},f.prototype.neg=function(d){if(this.inf)return this;var m=this.curve.point(this.x,this.y.redNeg());if(d&&this.precomputed){var v=this.precomputed,p=function(_){return _.neg()};m.precomputed={naf:v.naf&&{wnd:v.naf.wnd,points:v.naf.points.map(p)},doubles:v.doubles&&{step:v.doubles.step,points:v.doubles.points.map(p)}}}return m},f.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},o(c,a.BasePoint),u.prototype.jpoint=function(d,m,v){return new c(this,d,m,v)},c.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var d=this.z.redInvm(),m=d.redSqr(),v=this.x.redMul(m),p=this.y.redMul(m).redMul(d);return this.curve.point(v,p)},c.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},c.prototype.add=function(d){if(this.isInfinity())return d;if(d.isInfinity())return this;var m=d.z.redSqr(),v=this.z.redSqr(),p=this.x.redMul(m),_=d.x.redMul(v),y=this.y.redMul(m.redMul(d.z)),x=d.y.redMul(v.redMul(this.z)),S=p.redSub(_),O=y.redSub(x);if(S.cmpn(0)===0)return O.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var B=S.redSqr(),U=B.redMul(S),z=p.redMul(B),q=O.redSqr().redIAdd(U).redISub(z).redISub(z),G=O.redMul(z.redISub(q)).redISub(y.redMul(U)),tt=this.z.redMul(d.z).redMul(S);return this.curve.jpoint(q,G,tt)},c.prototype.mixedAdd=function(d){if(this.isInfinity())return d.toJ();if(d.isInfinity())return this;var m=this.z.redSqr(),v=this.x,p=d.x.redMul(m),_=this.y,y=d.y.redMul(m).redMul(this.z),x=v.redSub(p),S=_.redSub(y);if(x.cmpn(0)===0)return S.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var O=x.redSqr(),B=O.redMul(x),U=v.redMul(O),z=S.redSqr().redIAdd(B).redISub(U).redISub(U),q=S.redMul(U.redISub(z)).redISub(_.redMul(B)),G=this.z.redMul(x);return this.curve.jpoint(z,q,G)},c.prototype.dblp=function(d){if(d===0)return this;if(this.isInfinity())return this;if(!d)return this.dbl();var m;if(this.curve.zeroA||this.curve.threeA){var v=this;for(m=0;m<d;m++)v=v.dbl();return v}var p=this.curve.a,_=this.curve.tinv,y=this.x,x=this.y,S=this.z,O=S.redSqr().redSqr(),B=x.redAdd(x);for(m=0;m<d;m++){var U=y.redSqr(),z=B.redSqr(),q=z.redSqr(),G=U.redAdd(U).redIAdd(U).redIAdd(p.redMul(O)),tt=y.redMul(z),K=G.redSqr().redISub(tt.redAdd(tt)),D=tt.redISub(K),N=G.redMul(D);N=N.redIAdd(N).redISub(q);var Z=B.redMul(S);m+1<d&&(O=O.redMul(q)),y=K,S=Z,B=N}return this.curve.jpoint(y,B.redMul(_),S)},c.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},c.prototype._zeroDbl=function(){var d,m,v;if(this.zOne){var p=this.x.redSqr(),_=this.y.redSqr(),y=_.redSqr(),x=this.x.redAdd(_).redSqr().redISub(p).redISub(y);x=x.redIAdd(x);var S=p.redAdd(p).redIAdd(p),O=S.redSqr().redISub(x).redISub(x),B=y.redIAdd(y);B=(B=B.redIAdd(B)).redIAdd(B),d=O,m=S.redMul(x.redISub(O)).redISub(B),v=this.y.redAdd(this.y)}else{var U=this.x.redSqr(),z=this.y.redSqr(),q=z.redSqr(),G=this.x.redAdd(z).redSqr().redISub(U).redISub(q);G=G.redIAdd(G);var tt=U.redAdd(U).redIAdd(U),K=tt.redSqr(),D=q.redIAdd(q);D=(D=D.redIAdd(D)).redIAdd(D),d=K.redISub(G).redISub(G),m=tt.redMul(G.redISub(d)).redISub(D),v=(v=this.y.redMul(this.z)).redIAdd(v)}return this.curve.jpoint(d,m,v)},c.prototype._threeDbl=function(){var d,m,v;if(this.zOne){var p=this.x.redSqr(),_=this.y.redSqr(),y=_.redSqr(),x=this.x.redAdd(_).redSqr().redISub(p).redISub(y);x=x.redIAdd(x);var S=p.redAdd(p).redIAdd(p).redIAdd(this.curve.a),O=S.redSqr().redISub(x).redISub(x);d=O;var B=y.redIAdd(y);B=(B=B.redIAdd(B)).redIAdd(B),m=S.redMul(x.redISub(O)).redISub(B),v=this.y.redAdd(this.y)}else{var U=this.z.redSqr(),z=this.y.redSqr(),q=this.x.redMul(z),G=this.x.redSub(U).redMul(this.x.redAdd(U));G=G.redAdd(G).redIAdd(G);var tt=q.redIAdd(q),K=(tt=tt.redIAdd(tt)).redAdd(tt);d=G.redSqr().redISub(K),v=this.y.redAdd(this.z).redSqr().redISub(z).redISub(U);var D=z.redSqr();D=(D=(D=D.redIAdd(D)).redIAdd(D)).redIAdd(D),m=G.redMul(tt.redISub(d)).redISub(D)}return this.curve.jpoint(d,m,v)},c.prototype._dbl=function(){var d=this.curve.a,m=this.x,v=this.y,p=this.z,_=p.redSqr().redSqr(),y=m.redSqr(),x=v.redSqr(),S=y.redAdd(y).redIAdd(y).redIAdd(d.redMul(_)),O=m.redAdd(m),B=(O=O.redIAdd(O)).redMul(x),U=S.redSqr().redISub(B.redAdd(B)),z=B.redISub(U),q=x.redSqr();q=(q=(q=q.redIAdd(q)).redIAdd(q)).redIAdd(q);var G=S.redMul(z).redISub(q),tt=v.redAdd(v).redMul(p);return this.curve.jpoint(U,G,tt)},c.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var d=this.x.redSqr(),m=this.y.redSqr(),v=this.z.redSqr(),p=m.redSqr(),_=d.redAdd(d).redIAdd(d),y=_.redSqr(),x=this.x.redAdd(m).redSqr().redISub(d).redISub(p),S=(x=(x=(x=x.redIAdd(x)).redAdd(x).redIAdd(x)).redISub(y)).redSqr(),O=p.redIAdd(p);O=(O=(O=O.redIAdd(O)).redIAdd(O)).redIAdd(O);var B=_.redIAdd(x).redSqr().redISub(y).redISub(S).redISub(O),U=m.redMul(B);U=(U=U.redIAdd(U)).redIAdd(U);var z=this.x.redMul(S).redISub(U);z=(z=z.redIAdd(z)).redIAdd(z);var q=this.y.redMul(B.redMul(O.redISub(B)).redISub(x.redMul(S)));q=(q=(q=q.redIAdd(q)).redIAdd(q)).redIAdd(q);var G=this.z.redAdd(x).redSqr().redISub(v).redISub(S);return this.curve.jpoint(z,q,G)},c.prototype.mul=function(d,m){return d=new r(d,m),this.curve._wnafMul(this,d)},c.prototype.eq=function(d){if(d.type==="affine")return this.eq(d.toJ());if(this===d)return!0;var m=this.z.redSqr(),v=d.z.redSqr();if(this.x.redMul(v).redISub(d.x.redMul(m)).cmpn(0)!==0)return!1;var p=m.redMul(this.z),_=v.redMul(d.z);return this.y.redMul(_).redISub(d.y.redMul(p)).cmpn(0)===0},c.prototype.eqXToP=function(d){var m=this.z.redSqr(),v=d.toRed(this.curve.red).redMul(m);if(this.x.cmp(v)===0)return!0;for(var p=d.clone(),_=this.curve.redN.redMul(m);;){if(p.iadd(this.curve.n),p.cmp(this.curve.p)>=0)return!1;if(v.redIAdd(_),this.x.cmp(v)===0)return!0}},c.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},c.prototype.isInfinity=function(){return this.z.cmpn(0)===0}},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],411:[function(e,t,n){"use strict";var i,r=n,o=e("hash.js"),a=e("./curve"),s=e("./utils").assert;function u(c){c.type==="short"?this.curve=new a.short(c):c.type==="edwards"?this.curve=new a.edwards(c):this.curve=new a.mont(c),this.g=this.curve.g,this.n=this.curve.n,this.hash=c.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function f(c,d){Object.defineProperty(r,c,{configurable:!0,enumerable:!0,get:function(){var m=new u(d);return Object.defineProperty(r,c,{configurable:!0,enumerable:!0,value:m}),m}})}r.PresetCurve=u,f("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:o.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),f("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:o.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),f("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:o.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),f("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:o.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),f("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:o.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),f("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["9"]}),f("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{i=e("./precomputed/secp256k1")}catch{i=void 0}f("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:o.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",i]})},{"./curve":408,"./precomputed/secp256k1":418,"./utils":419,"hash.js":426}],412:[function(e,t,n){"use strict";var i=e("bn.js"),r=e("hmac-drbg"),o=e("../utils"),a=e("../curves"),s=e("brorand"),u=o.assert,f=e("./key"),c=e("./signature");function d(m){if(!(this instanceof d))return new d(m);typeof m=="string"&&(u(Object.prototype.hasOwnProperty.call(a,m),"Unknown curve "+m),m=a[m]),m instanceof a.PresetCurve&&(m={curve:m}),this.curve=m.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=m.curve.g,this.g.precompute(m.curve.n.bitLength()+1),this.hash=m.hash||m.curve.hash}t.exports=d,d.prototype.keyPair=function(m){return new f(this,m)},d.prototype.keyFromPrivate=function(m,v){return f.fromPrivate(this,m,v)},d.prototype.keyFromPublic=function(m,v){return f.fromPublic(this,m,v)},d.prototype.genKeyPair=function(m){m||(m={});for(var v=new r({hash:this.hash,pers:m.pers,persEnc:m.persEnc||"utf8",entropy:m.entropy||s(this.hash.hmacStrength),entropyEnc:m.entropy&&m.entropyEnc||"utf8",nonce:this.n.toArray()}),p=this.n.byteLength(),_=this.n.sub(new i(2));;){var y=new i(v.generate(p));if(!(y.cmp(_)>0))return y.iaddn(1),this.keyFromPrivate(y)}},d.prototype._truncateToN=function(m,v){var p=8*m.byteLength()-this.n.bitLength();return p>0&&(m=m.ushrn(p)),!v&&m.cmp(this.n)>=0?m.sub(this.n):m},d.prototype.sign=function(m,v,p,_){typeof p=="object"&&(_=p,p=null),_||(_={}),v=this.keyFromPrivate(v,p),m=this._truncateToN(new i(m,16));for(var y=this.n.byteLength(),x=v.getPrivate().toArray("be",y),S=m.toArray("be",y),O=new r({hash:this.hash,entropy:x,nonce:S,pers:_.pers,persEnc:_.persEnc||"utf8"}),B=this.n.sub(new i(1)),U=0;;U++){var z=_.k?_.k(U):new i(O.generate(this.n.byteLength()));if(!((z=this._truncateToN(z,!0)).cmpn(1)<=0||z.cmp(B)>=0)){var q=this.g.mul(z);if(!q.isInfinity()){var G=q.getX(),tt=G.umod(this.n);if(tt.cmpn(0)!==0){var K=z.invm(this.n).mul(tt.mul(v.getPrivate()).iadd(m));if((K=K.umod(this.n)).cmpn(0)!==0){var D=(q.getY().isOdd()?1:0)|(G.cmp(tt)!==0?2:0);return _.canonical&&K.cmp(this.nh)>0&&(K=this.n.sub(K),D^=1),new c({r:tt,s:K,recoveryParam:D})}}}}}},d.prototype.verify=function(m,v,p,_){m=this._truncateToN(new i(m,16)),p=this.keyFromPublic(p,_);var y=(v=new c(v,"hex")).r,x=v.s;if(y.cmpn(1)<0||y.cmp(this.n)>=0||x.cmpn(1)<0||x.cmp(this.n)>=0)return!1;var S,O=x.invm(this.n),B=O.mul(m).umod(this.n),U=O.mul(y).umod(this.n);return this.curve._maxwellTrick?!(S=this.g.jmulAdd(B,p.getPublic(),U)).isInfinity()&&S.eqXToP(y):!(S=this.g.mulAdd(B,p.getPublic(),U)).isInfinity()&&S.getX().umod(this.n).cmp(y)===0},d.prototype.recoverPubKey=function(m,v,p,_){u((3&p)===p,"The recovery param is more than two bits"),v=new c(v,_);var y=this.n,x=new i(m),S=v.r,O=v.s,B=1&p,U=p>>1;if(S.cmp(this.curve.p.umod(this.curve.n))>=0&&U)throw new Error("Unable to find sencond key candinate");S=U?this.curve.pointFromX(S.add(this.curve.n),B):this.curve.pointFromX(S,B);var z=v.r.invm(y),q=y.sub(x).mul(z).umod(y),G=O.mul(z).umod(y);return this.g.mulAdd(q,S,G)},d.prototype.getKeyRecoveryParam=function(m,v,p,_){if((v=new c(v,_)).recoveryParam!==null)return v.recoveryParam;for(var y=0;y<4;y++){var x;try{x=this.recoverPubKey(m,v,y)}catch{continue}if(x.eq(p))return y}throw new Error("Unable to find valid recovery factor")}},{"../curves":411,"../utils":419,"./key":413,"./signature":414,"bn.js":420,brorand:187,"hmac-drbg":438}],413:[function(e,t,n){"use strict";var i=e("bn.js"),r=e("../utils").assert;function o(a,s){this.ec=a,this.priv=null,this.pub=null,s.priv&&this._importPrivate(s.priv,s.privEnc),s.pub&&this._importPublic(s.pub,s.pubEnc)}t.exports=o,o.fromPublic=function(a,s,u){return s instanceof o?s:new o(a,{pub:s,pubEnc:u})},o.fromPrivate=function(a,s,u){return s instanceof o?s:new o(a,{priv:s,privEnc:u})},o.prototype.validate=function(){var a=this.getPublic();return a.isInfinity()?{result:!1,reason:"Invalid public key"}:a.validate()?a.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},o.prototype.getPublic=function(a,s){return typeof a=="string"&&(s=a,a=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),s?this.pub.encode(s,a):this.pub},o.prototype.getPrivate=function(a){return a==="hex"?this.priv.toString(16,2):this.priv},o.prototype._importPrivate=function(a,s){this.priv=new i(a,s||16),this.priv=this.priv.umod(this.ec.curve.n)},o.prototype._importPublic=function(a,s){if(a.x||a.y)return this.ec.curve.type==="mont"?r(a.x,"Need x coordinate"):this.ec.curve.type!=="short"&&this.ec.curve.type!=="edwards"||r(a.x&&a.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(a.x,a.y));this.pub=this.ec.curve.decodePoint(a,s)},o.prototype.derive=function(a){return a.validate()||r(a.validate(),"public point not validated"),a.mul(this.priv).getX()},o.prototype.sign=function(a,s,u){return this.ec.sign(a,this,s,u)},o.prototype.verify=function(a,s){return this.ec.verify(a,s,this)},o.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},{"../utils":419,"bn.js":420}],414:[function(e,t,n){"use strict";var i=e("bn.js"),r=e("../utils"),o=r.assert;function a(d,m){if(d instanceof a)return d;this._importDER(d,m)||(o(d.r&&d.s,"Signature without r or s"),this.r=new i(d.r,16),this.s=new i(d.s,16),d.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=d.recoveryParam)}function s(){this.place=0}function u(d,m){var v=d[m.place++];if(!(128&v))return v;var p=15&v;if(p===0||p>4)return!1;for(var _=0,y=0,x=m.place;y<p;y++,x++)_<<=8,_|=d[x],_>>>=0;return!(_<=127)&&(m.place=x,_)}function f(d){for(var m=0,v=d.length-1;!d[m]&&!(128&d[m+1])&&m<v;)m++;return m===0?d:d.slice(m)}function c(d,m){if(m<128)d.push(m);else{var v=1+(Math.log(m)/Math.LN2>>>3);for(d.push(128|v);--v;)d.push(m>>>(v<<3)&255);d.push(m)}}t.exports=a,a.prototype._importDER=function(d,m){d=r.toArray(d,m);var v=new s;if(d[v.place++]!==48)return!1;var p=u(d,v);if(p===!1||p+v.place!==d.length||d[v.place++]!==2)return!1;var _=u(d,v);if(_===!1)return!1;var y=d.slice(v.place,_+v.place);if(v.place+=_,d[v.place++]!==2)return!1;var x=u(d,v);if(x===!1||d.length!==x+v.place)return!1;var S=d.slice(v.place,x+v.place);if(y[0]===0){if(!(128&y[1]))return!1;y=y.slice(1)}if(S[0]===0){if(!(128&S[1]))return!1;S=S.slice(1)}return this.r=new i(y),this.s=new i(S),this.recoveryParam=null,!0},a.prototype.toDER=function(d){var m=this.r.toArray(),v=this.s.toArray();for(128&m[0]&&(m=[0].concat(m)),128&v[0]&&(v=[0].concat(v)),m=f(m),v=f(v);!(v[0]||128&v[1]);)v=v.slice(1);var p=[2];c(p,m.length),(p=p.concat(m)).push(2),c(p,v.length);var _=p.concat(v),y=[48];return c(y,_.length),y=y.concat(_),r.encode(y,d)}},{"../utils":419,"bn.js":420}],415:[function(e,t,n){"use strict";var i=e("hash.js"),r=e("../curves"),o=e("../utils"),a=o.assert,s=o.parseBytes,u=e("./key"),f=e("./signature");function c(d){if(a(d==="ed25519","only tested with ed25519 so far"),!(this instanceof c))return new c(d);d=r[d].curve,this.curve=d,this.g=d.g,this.g.precompute(d.n.bitLength()+1),this.pointClass=d.point().constructor,this.encodingLength=Math.ceil(d.n.bitLength()/8),this.hash=i.sha512}t.exports=c,c.prototype.sign=function(d,m){d=s(d);var v=this.keyFromSecret(m),p=this.hashInt(v.messagePrefix(),d),_=this.g.mul(p),y=this.encodePoint(_),x=this.hashInt(y,v.pubBytes(),d).mul(v.priv()),S=p.add(x).umod(this.curve.n);return this.makeSignature({R:_,S,Rencoded:y})},c.prototype.verify=function(d,m,v){d=s(d),m=this.makeSignature(m);var p=this.keyFromPublic(v),_=this.hashInt(m.Rencoded(),p.pubBytes(),d),y=this.g.mul(m.S());return m.R().add(p.pub().mul(_)).eq(y)},c.prototype.hashInt=function(){for(var d=this.hash(),m=0;m<arguments.length;m++)d.update(arguments[m]);return o.intFromLE(d.digest()).umod(this.curve.n)},c.prototype.keyFromPublic=function(d){return u.fromPublic(this,d)},c.prototype.keyFromSecret=function(d){return u.fromSecret(this,d)},c.prototype.makeSignature=function(d){return d instanceof f?d:new f(this,d)},c.prototype.encodePoint=function(d){var m=d.getY().toArray("le",this.encodingLength);return m[this.encodingLength-1]|=d.getX().isOdd()?128:0,m},c.prototype.decodePoint=function(d){var m=(d=o.parseBytes(d)).length-1,v=d.slice(0,m).concat(-129&d[m]),p=(128&d[m])!=0,_=o.intFromLE(v);return this.curve.pointFromY(_,p)},c.prototype.encodeInt=function(d){return d.toArray("le",this.encodingLength)},c.prototype.decodeInt=function(d){return o.intFromLE(d)},c.prototype.isPoint=function(d){return d instanceof this.pointClass}},{"../curves":411,"../utils":419,"./key":416,"./signature":417,"hash.js":426}],416:[function(e,t,n){"use strict";var i=e("../utils"),r=i.assert,o=i.parseBytes,a=i.cachedProperty;function s(u,f){this.eddsa=u,this._secret=o(f.secret),u.isPoint(f.pub)?this._pub=f.pub:this._pubBytes=o(f.pub)}s.fromPublic=function(u,f){return f instanceof s?f:new s(u,{pub:f})},s.fromSecret=function(u,f){return f instanceof s?f:new s(u,{secret:f})},s.prototype.secret=function(){return this._secret},a(s,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),a(s,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),a(s,"privBytes",function(){var u=this.eddsa,f=this.hash(),c=u.encodingLength-1,d=f.slice(0,u.encodingLength);return d[0]&=248,d[c]&=127,d[c]|=64,d}),a(s,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),a(s,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),a(s,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),s.prototype.sign=function(u){return r(this._secret,"KeyPair can only verify"),this.eddsa.sign(u,this)},s.prototype.verify=function(u,f){return this.eddsa.verify(u,f,this)},s.prototype.getSecret=function(u){return r(this._secret,"KeyPair is public only"),i.encode(this.secret(),u)},s.prototype.getPublic=function(u){return i.encode(this.pubBytes(),u)},t.exports=s},{"../utils":419}],417:[function(e,t,n){"use strict";var i=e("bn.js"),r=e("../utils"),o=r.assert,a=r.cachedProperty,s=r.parseBytes;function u(f,c){this.eddsa=f,typeof c!="object"&&(c=s(c)),Array.isArray(c)&&(c={R:c.slice(0,f.encodingLength),S:c.slice(f.encodingLength)}),o(c.R&&c.S,"Signature without R or S"),f.isPoint(c.R)&&(this._R=c.R),c.S instanceof i&&(this._S=c.S),this._Rencoded=Array.isArray(c.R)?c.R:c.Rencoded,this._Sencoded=Array.isArray(c.S)?c.S:c.Sencoded}a(u,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),a(u,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),a(u,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),a(u,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),u.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},u.prototype.toHex=function(){return r.encode(this.toBytes(),"hex").toUpperCase()},t.exports=u},{"../utils":419,"bn.js":420}],418:[function(e,t,n){"use strict";t.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},{}],419:[function(e,t,n){"use strict";var i=n,r=e("bn.js"),o=e("minimalistic-assert"),a=e("minimalistic-crypto-utils");i.assert=o,i.toArray=a.toArray,i.zero2=a.zero2,i.toHex=a.toHex,i.encode=a.encode,i.getNAF=function(s,u,f){var c=new Array(Math.max(s.bitLength(),f)+1);c.fill(0);for(var d=1<<u+1,m=s.clone(),v=0;v<c.length;v++){var p,_=m.andln(d-1);m.isOdd()?(p=_>(d>>1)-1?(d>>1)-_:_,m.isubn(p)):p=0,c[v]=p,m.iushrn(1)}return c},i.getJSF=function(s,u){var f=[[],[]];s=s.clone(),u=u.clone();for(var c,d=0,m=0;s.cmpn(-d)>0||u.cmpn(-m)>0;){var v,p,_=s.andln(3)+d&3,y=u.andln(3)+m&3;_===3&&(_=-1),y===3&&(y=-1),v=1&_?(c=s.andln(7)+d&7)!==3&&c!==5||y!==2?_:-_:0,f[0].push(v),p=1&y?(c=u.andln(7)+m&7)!==3&&c!==5||_!==2?y:-y:0,f[1].push(p),2*d===v+1&&(d=1-d),2*m===p+1&&(m=1-m),s.iushrn(1),u.iushrn(1)}return f},i.cachedProperty=function(s,u,f){var c="_"+u;s.prototype[u]=function(){return this[c]!==void 0?this[c]:this[c]=f.call(this)}},i.parseBytes=function(s){return typeof s=="string"?i.toArray(s,"hex"):s},i.intFromLE=function(s){return new r(s,"hex","le")}},{"bn.js":420,"minimalistic-assert":453,"minimalistic-crypto-utils":454}],420:[function(e,t,n){arguments[4][184][0].apply(n,arguments)},{buffer:188,dup:184}],421:[function(e,t,n){t.exports={name:"elliptic",version:"6.5.4",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}},{}],422:[function(e,t,n){"use strict";var i=Object.create||function(z){var q=function(){};return q.prototype=z,new q},r=Object.keys||function(z){var q=[];for(var G in z)Object.prototype.hasOwnProperty.call(z,G)&&q.push(G);return G},o=Function.prototype.bind||function(z){var q=this;return function(){return q.apply(z,arguments)}};function a(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=i(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}t.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._maxListeners=void 0;var s,u=10;try{var f={};Object.defineProperty&&Object.defineProperty(f,"x",{value:0}),s=f.x===0}catch{s=!1}function c(z){return z._maxListeners===void 0?a.defaultMaxListeners:z._maxListeners}function d(z,q,G){if(q)z.call(G);else for(var tt=z.length,K=U(z,tt),D=0;D<tt;++D)K[D].call(G)}function m(z,q,G,tt){if(q)z.call(G,tt);else for(var K=z.length,D=U(z,K),N=0;N<K;++N)D[N].call(G,tt)}function v(z,q,G,tt,K){if(q)z.call(G,tt,K);else for(var D=z.length,N=U(z,D),Z=0;Z<D;++Z)N[Z].call(G,tt,K)}function p(z,q,G,tt,K,D){if(q)z.call(G,tt,K,D);else for(var N=z.length,Z=U(z,N),w=0;w<N;++w)Z[w].call(G,tt,K,D)}function _(z,q,G,tt){if(q)z.apply(G,tt);else for(var K=z.length,D=U(z,K),N=0;N<K;++N)D[N].apply(G,tt)}function y(z,q,G,tt){var K,D,N;if(typeof G!="function")throw new TypeError('"listener" argument must be a function');if((D=z._events)?(D.newListener&&(z.emit("newListener",q,G.listener?G.listener:G),D=z._events),N=D[q]):(D=z._events=i(null),z._eventsCount=0),N){if(typeof N=="function"?N=D[q]=tt?[G,N]:[N,G]:tt?N.unshift(G):N.push(G),!N.warned&&(K=c(z))&&K>0&&N.length>K){N.warned=!0;var Z=new Error("Possible EventEmitter memory leak detected. "+N.length+' "'+String(q)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');Z.name="MaxListenersExceededWarning",Z.emitter=z,Z.type=q,Z.count=N.length,typeof console=="object"&&console.warn&&console.warn("%s: %s",Z.name,Z.message)}}else N=D[q]=G,++z._eventsCount;return z}function x(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var z=new Array(arguments.length),q=0;q<z.length;++q)z[q]=arguments[q];this.listener.apply(this.target,z)}}function S(z,q,G){var tt={fired:!1,wrapFn:void 0,target:z,type:q,listener:G},K=o.call(x,tt);return K.listener=G,tt.wrapFn=K,K}function O(z,q,G){var tt=z._events;if(!tt)return[];var K=tt[q];return K?typeof K=="function"?G?[K.listener||K]:[K]:G?function(D){for(var N=new Array(D.length),Z=0;Z<N.length;++Z)N[Z]=D[Z].listener||D[Z];return N}(K):U(K,K.length):[]}function B(z){var q=this._events;if(q){var G=q[z];if(typeof G=="function")return 1;if(G)return G.length}return 0}function U(z,q){for(var G=new Array(q),tt=0;tt<q;++tt)G[tt]=z[tt];return G}s?Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(z){if(typeof z!="number"||z<0||z!=z)throw new TypeError('"defaultMaxListeners" must be a positive number');u=z}}):a.defaultMaxListeners=u,a.prototype.setMaxListeners=function(z){if(typeof z!="number"||z<0||isNaN(z))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=z,this},a.prototype.getMaxListeners=function(){return c(this)},a.prototype.emit=function(z){var q,G,tt,K,D,N,Z=z==="error";if(N=this._events)Z=Z&&N.error==null;else if(!Z)return!1;if(Z){if(arguments.length>1&&(q=arguments[1]),q instanceof Error)throw q;var w=new Error('Unhandled "error" event. ('+q+")");throw w.context=q,w}if(!(G=N[z]))return!1;var C=typeof G=="function";switch(tt=arguments.length){case 1:d(G,C,this);break;case 2:m(G,C,this,arguments[1]);break;case 3:v(G,C,this,arguments[1],arguments[2]);break;case 4:p(G,C,this,arguments[1],arguments[2],arguments[3]);break;default:for(K=new Array(tt-1),D=1;D<tt;D++)K[D-1]=arguments[D];_(G,C,this,K)}return!0},a.prototype.addListener=function(z,q){return y(this,z,q,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(z,q){return y(this,z,q,!0)},a.prototype.once=function(z,q){if(typeof q!="function")throw new TypeError('"listener" argument must be a function');return this.on(z,S(this,z,q)),this},a.prototype.prependOnceListener=function(z,q){if(typeof q!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(z,S(this,z,q)),this},a.prototype.removeListener=function(z,q){var G,tt,K,D,N;if(typeof q!="function")throw new TypeError('"listener" argument must be a function');if(!(tt=this._events))return this;if(!(G=tt[z]))return this;if(G===q||G.listener===q)--this._eventsCount==0?this._events=i(null):(delete tt[z],tt.removeListener&&this.emit("removeListener",z,G.listener||q));else if(typeof G!="function"){for(K=-1,D=G.length-1;D>=0;D--)if(G[D]===q||G[D].listener===q){N=G[D].listener,K=D;break}if(K<0)return this;K===0?G.shift():function(Z,w){for(var C=w,k=C+1,T=Z.length;k<T;C+=1,k+=1)Z[C]=Z[k];Z.pop()}(G,K),G.length===1&&(tt[z]=G[0]),tt.removeListener&&this.emit("removeListener",z,N||q)}return this},a.prototype.removeAllListeners=function(z){var q,G,tt;if(!(G=this._events))return this;if(!G.removeListener)return arguments.length===0?(this._events=i(null),this._eventsCount=0):G[z]&&(--this._eventsCount==0?this._events=i(null):delete G[z]),this;if(arguments.length===0){var K,D=r(G);for(tt=0;tt<D.length;++tt)(K=D[tt])!=="removeListener"&&this.removeAllListeners(K);return this.removeAllListeners("removeListener"),this._events=i(null),this._eventsCount=0,this}if(typeof(q=G[z])=="function")this.removeListener(z,q);else if(q)for(tt=q.length-1;tt>=0;tt--)this.removeListener(z,q[tt]);return this},a.prototype.listeners=function(z){return O(this,z,!0)},a.prototype.rawListeners=function(z){return O(this,z,!1)},a.listenerCount=function(z,q){return typeof z.listenerCount=="function"?z.listenerCount(q):B.call(z,q)},a.prototype.listenerCount=B,a.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],423:[function(e,t,n){"use strict";var i=e("safe-buffer").Buffer,r=e("md5.js");t.exports=function(o,a,s,u){if(i.isBuffer(o)||(o=i.from(o,"binary")),a&&(i.isBuffer(a)||(a=i.from(a,"binary")),a.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var f=s/8,c=i.alloc(f),d=i.alloc(u||0),m=i.alloc(0);f>0||u>0;){var v=new r;v.update(m),v.update(o),a&&v.update(a),m=v.digest();var p=0;if(f>0){var _=c.length-f;p=Math.min(f,m.length),m.copy(c,_,0,p),f-=p}if(p<m.length&&u>0){var y=d.length-u,x=Math.min(u,m.length-p);m.copy(d,y,p,p+x),u-=x}}return m.fill(0),{key:c,iv:d}}},{"md5.js":450,"safe-buffer":494}],424:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.CsvParserStream=n.ParserOptions=n.parseFile=n.parseStream=n.parseString=n.parse=n.FormatterOptions=n.CsvFormatterStream=n.writeToPath=n.writeToString=n.writeToBuffer=n.writeToStream=n.write=n.format=void 0;var i=e("@fast-csv/format");Object.defineProperty(n,"format",{enumerable:!0,get:function(){return i.format}}),Object.defineProperty(n,"write",{enumerable:!0,get:function(){return i.write}}),Object.defineProperty(n,"writeToStream",{enumerable:!0,get:function(){return i.writeToStream}}),Object.defineProperty(n,"writeToBuffer",{enumerable:!0,get:function(){return i.writeToBuffer}}),Object.defineProperty(n,"writeToString",{enumerable:!0,get:function(){return i.writeToString}}),Object.defineProperty(n,"writeToPath",{enumerable:!0,get:function(){return i.writeToPath}}),Object.defineProperty(n,"CsvFormatterStream",{enumerable:!0,get:function(){return i.CsvFormatterStream}}),Object.defineProperty(n,"FormatterOptions",{enumerable:!0,get:function(){return i.FormatterOptions}});var r=e("@fast-csv/parse");Object.defineProperty(n,"parse",{enumerable:!0,get:function(){return r.parse}}),Object.defineProperty(n,"parseString",{enumerable:!0,get:function(){return r.parseString}}),Object.defineProperty(n,"parseStream",{enumerable:!0,get:function(){return r.parseStream}}),Object.defineProperty(n,"parseFile",{enumerable:!0,get:function(){return r.parseFile}}),Object.defineProperty(n,"ParserOptions",{enumerable:!0,get:function(){return r.ParserOptions}}),Object.defineProperty(n,"CsvParserStream",{enumerable:!0,get:function(){return r.CsvParserStream}})},{"@fast-csv/format":151,"@fast-csv/parse":155}],425:[function(e,t,n){"use strict";var i=e("safe-buffer").Buffer,r=e("readable-stream").Transform;function o(a){r.call(this),this._block=i.allocUnsafe(a),this._blockSize=a,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}e("inherits")(o,r),o.prototype._transform=function(a,s,u){var f=null;try{this.update(a,s)}catch(c){f=c}u(f)},o.prototype._flush=function(a){var s=null;try{this.push(this.digest())}catch(u){s=u}a(s)},o.prototype.update=function(a,s){if(function(v,p){if(!i.isBuffer(v)&&typeof v!="string")throw new TypeError(p+" must be a string or a buffer")}(a,"Data"),this._finalized)throw new Error("Digest already called");i.isBuffer(a)||(a=i.from(a,s));for(var u=this._block,f=0;this._blockOffset+a.length-f>=this._blockSize;){for(var c=this._blockOffset;c<this._blockSize;)u[c++]=a[f++];this._update(),this._blockOffset=0}for(;f<a.length;)u[this._blockOffset++]=a[f++];for(var d=0,m=8*a.length;m>0;++d)this._length[d]+=m,(m=this._length[d]/4294967296|0)>0&&(this._length[d]-=4294967296*m);return this},o.prototype._update=function(){throw new Error("_update is not implemented")},o.prototype.digest=function(a){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var s=this._digest();a!==void 0&&(s=s.toString(a)),this._block.fill(0),this._blockOffset=0;for(var u=0;u<4;++u)this._length[u]=0;return s},o.prototype._digest=function(){throw new Error("_digest is not implemented")},t.exports=o},{inherits:440,"readable-stream":491,"safe-buffer":494}],426:[function(e,t,n){"use strict";var i=n;i.utils=e("./hash/utils"),i.common=e("./hash/common"),i.sha=e("./hash/sha"),i.ripemd=e("./hash/ripemd"),i.hmac=e("./hash/hmac"),i.sha1=i.sha.sha1,i.sha256=i.sha.sha256,i.sha224=i.sha.sha224,i.sha384=i.sha.sha384,i.sha512=i.sha.sha512,i.ripemd160=i.ripemd.ripemd160},{"./hash/common":427,"./hash/hmac":428,"./hash/ripemd":429,"./hash/sha":430,"./hash/utils":437}],427:[function(e,t,n){"use strict";var i=e("./utils"),r=e("minimalistic-assert");function o(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}n.BlockHash=o,o.prototype.update=function(a,s){if(a=i.toArray(a,s),this.pending?this.pending=this.pending.concat(a):this.pending=a,this.pendingTotal+=a.length,this.pending.length>=this._delta8){var u=(a=this.pending).length%this._delta8;this.pending=a.slice(a.length-u,a.length),this.pending.length===0&&(this.pending=null),a=i.join32(a,0,a.length-u,this.endian);for(var f=0;f<a.length;f+=this._delta32)this._update(a,f,f+this._delta32)}return this},o.prototype.digest=function(a){return this.update(this._pad()),r(this.pending===null),this._digest(a)},o.prototype._pad=function(){var a=this.pendingTotal,s=this._delta8,u=s-(a+this.padLength)%s,f=new Array(u+this.padLength);f[0]=128;for(var c=1;c<u;c++)f[c]=0;if(a<<=3,this.endian==="big"){for(var d=8;d<this.padLength;d++)f[c++]=0;f[c++]=0,f[c++]=0,f[c++]=0,f[c++]=0,f[c++]=a>>>24&255,f[c++]=a>>>16&255,f[c++]=a>>>8&255,f[c++]=255&a}else for(f[c++]=255&a,f[c++]=a>>>8&255,f[c++]=a>>>16&255,f[c++]=a>>>24&255,f[c++]=0,f[c++]=0,f[c++]=0,f[c++]=0,d=8;d<this.padLength;d++)f[c++]=0;return f}},{"./utils":437,"minimalistic-assert":453}],428:[function(e,t,n){"use strict";var i=e("./utils"),r=e("minimalistic-assert");function o(a,s,u){if(!(this instanceof o))return new o(a,s,u);this.Hash=a,this.blockSize=a.blockSize/8,this.outSize=a.outSize/8,this.inner=null,this.outer=null,this._init(i.toArray(s,u))}t.exports=o,o.prototype._init=function(a){a.length>this.blockSize&&(a=new this.Hash().update(a).digest()),r(a.length<=this.blockSize);for(var s=a.length;s<this.blockSize;s++)a.push(0);for(s=0;s<a.length;s++)a[s]^=54;for(this.inner=new this.Hash().update(a),s=0;s<a.length;s++)a[s]^=106;this.outer=new this.Hash().update(a)},o.prototype.update=function(a,s){return this.inner.update(a,s),this},o.prototype.digest=function(a){return this.outer.update(this.inner.digest()),this.outer.digest(a)}},{"./utils":437,"minimalistic-assert":453}],429:[function(e,t,n){"use strict";var i=e("./utils"),r=e("./common"),o=i.rotl32,a=i.sum32,s=i.sum32_3,u=i.sum32_4,f=r.BlockHash;function c(){if(!(this instanceof c))return new c;f.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function d(S,O,B,U){return S<=15?O^B^U:S<=31?O&B|~O&U:S<=47?(O|~B)^U:S<=63?O&U|B&~U:O^(B|~U)}function m(S){return S<=15?0:S<=31?1518500249:S<=47?1859775393:S<=63?2400959708:2840853838}function v(S){return S<=15?1352829926:S<=31?1548603684:S<=47?1836072691:S<=63?2053994217:0}i.inherits(c,f),n.ripemd160=c,c.blockSize=512,c.outSize=160,c.hmacStrength=192,c.padLength=64,c.prototype._update=function(S,O){for(var B=this.h[0],U=this.h[1],z=this.h[2],q=this.h[3],G=this.h[4],tt=B,K=U,D=z,N=q,Z=G,w=0;w<80;w++){var C=a(o(u(B,d(w,U,z,q),S[p[w]+O],m(w)),y[w]),G);B=G,G=q,q=o(z,10),z=U,U=C,C=a(o(u(tt,d(79-w,K,D,N),S[_[w]+O],v(w)),x[w]),Z),tt=Z,Z=N,N=o(D,10),D=K,K=C}C=s(this.h[1],z,N),this.h[1]=s(this.h[2],q,Z),this.h[2]=s(this.h[3],G,tt),this.h[3]=s(this.h[4],B,K),this.h[4]=s(this.h[0],U,D),this.h[0]=C},c.prototype._digest=function(S){return S==="hex"?i.toHex32(this.h,"little"):i.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],_=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],y=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],x=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},{"./common":427,"./utils":437}],430:[function(e,t,n){"use strict";n.sha1=e("./sha/1"),n.sha224=e("./sha/224"),n.sha256=e("./sha/256"),n.sha384=e("./sha/384"),n.sha512=e("./sha/512")},{"./sha/1":431,"./sha/224":432,"./sha/256":433,"./sha/384":434,"./sha/512":435}],431:[function(e,t,n){"use strict";var i=e("../utils"),r=e("../common"),o=e("./common"),a=i.rotl32,s=i.sum32,u=i.sum32_5,f=o.ft_1,c=r.BlockHash,d=[1518500249,1859775393,2400959708,3395469782];function m(){if(!(this instanceof m))return new m;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}i.inherits(m,c),t.exports=m,m.blockSize=512,m.outSize=160,m.hmacStrength=80,m.padLength=64,m.prototype._update=function(v,p){for(var _=this.W,y=0;y<16;y++)_[y]=v[p+y];for(;y<_.length;y++)_[y]=a(_[y-3]^_[y-8]^_[y-14]^_[y-16],1);var x=this.h[0],S=this.h[1],O=this.h[2],B=this.h[3],U=this.h[4];for(y=0;y<_.length;y++){var z=~~(y/20),q=u(a(x,5),f(z,S,O,B),U,_[y],d[z]);U=B,B=O,O=a(S,30),S=x,x=q}this.h[0]=s(this.h[0],x),this.h[1]=s(this.h[1],S),this.h[2]=s(this.h[2],O),this.h[3]=s(this.h[3],B),this.h[4]=s(this.h[4],U)},m.prototype._digest=function(v){return v==="hex"?i.toHex32(this.h,"big"):i.split32(this.h,"big")}},{"../common":427,"../utils":437,"./common":436}],432:[function(e,t,n){"use strict";var i=e("../utils"),r=e("./256");function o(){if(!(this instanceof o))return new o;r.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}i.inherits(o,r),t.exports=o,o.blockSize=512,o.outSize=224,o.hmacStrength=192,o.padLength=64,o.prototype._digest=function(a){return a==="hex"?i.toHex32(this.h.slice(0,7),"big"):i.split32(this.h.slice(0,7),"big")}},{"../utils":437,"./256":433}],433:[function(e,t,n){"use strict";var i=e("../utils"),r=e("../common"),o=e("./common"),a=e("minimalistic-assert"),s=i.sum32,u=i.sum32_4,f=i.sum32_5,c=o.ch32,d=o.maj32,m=o.s0_256,v=o.s1_256,p=o.g0_256,_=o.g1_256,y=r.BlockHash,x=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function S(){if(!(this instanceof S))return new S;y.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=x,this.W=new Array(64)}i.inherits(S,y),t.exports=S,S.blockSize=512,S.outSize=256,S.hmacStrength=192,S.padLength=64,S.prototype._update=function(O,B){for(var U=this.W,z=0;z<16;z++)U[z]=O[B+z];for(;z<U.length;z++)U[z]=u(_(U[z-2]),U[z-7],p(U[z-15]),U[z-16]);var q=this.h[0],G=this.h[1],tt=this.h[2],K=this.h[3],D=this.h[4],N=this.h[5],Z=this.h[6],w=this.h[7];for(a(this.k.length===U.length),z=0;z<U.length;z++){var C=f(w,v(D),c(D,N,Z),this.k[z],U[z]),k=s(m(q),d(q,G,tt));w=Z,Z=N,N=D,D=s(K,C),K=tt,tt=G,G=q,q=s(C,k)}this.h[0]=s(this.h[0],q),this.h[1]=s(this.h[1],G),this.h[2]=s(this.h[2],tt),this.h[3]=s(this.h[3],K),this.h[4]=s(this.h[4],D),this.h[5]=s(this.h[5],N),this.h[6]=s(this.h[6],Z),this.h[7]=s(this.h[7],w)},S.prototype._digest=function(O){return O==="hex"?i.toHex32(this.h,"big"):i.split32(this.h,"big")}},{"../common":427,"../utils":437,"./common":436,"minimalistic-assert":453}],434:[function(e,t,n){"use strict";var i=e("../utils"),r=e("./512");function o(){if(!(this instanceof o))return new o;r.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}i.inherits(o,r),t.exports=o,o.blockSize=1024,o.outSize=384,o.hmacStrength=192,o.padLength=128,o.prototype._digest=function(a){return a==="hex"?i.toHex32(this.h.slice(0,12),"big"):i.split32(this.h.slice(0,12),"big")}},{"../utils":437,"./512":435}],435:[function(e,t,n){"use strict";var i=e("../utils"),r=e("../common"),o=e("minimalistic-assert"),a=i.rotr64_hi,s=i.rotr64_lo,u=i.shr64_hi,f=i.shr64_lo,c=i.sum64,d=i.sum64_hi,m=i.sum64_lo,v=i.sum64_4_hi,p=i.sum64_4_lo,_=i.sum64_5_hi,y=i.sum64_5_lo,x=r.BlockHash,S=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function O(){if(!(this instanceof O))return new O;x.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=S,this.W=new Array(160)}function B(k,T,R,F,H){var it=k&R^~k&H;return it<0&&(it+=4294967296),it}function U(k,T,R,F,H,it){var ot=T&F^~T&it;return ot<0&&(ot+=4294967296),ot}function z(k,T,R,F,H){var it=k&R^k&H^R&H;return it<0&&(it+=4294967296),it}function q(k,T,R,F,H,it){var ot=T&F^T&it^F&it;return ot<0&&(ot+=4294967296),ot}function G(k,T){var R=a(k,T,28)^a(T,k,2)^a(T,k,7);return R<0&&(R+=4294967296),R}function tt(k,T){var R=s(k,T,28)^s(T,k,2)^s(T,k,7);return R<0&&(R+=4294967296),R}function K(k,T){var R=a(k,T,14)^a(k,T,18)^a(T,k,9);return R<0&&(R+=4294967296),R}function D(k,T){var R=s(k,T,14)^s(k,T,18)^s(T,k,9);return R<0&&(R+=4294967296),R}function N(k,T){var R=a(k,T,1)^a(k,T,8)^u(k,T,7);return R<0&&(R+=4294967296),R}function Z(k,T){var R=s(k,T,1)^s(k,T,8)^f(k,T,7);return R<0&&(R+=4294967296),R}function w(k,T){var R=a(k,T,19)^a(T,k,29)^u(k,T,6);return R<0&&(R+=4294967296),R}function C(k,T){var R=s(k,T,19)^s(T,k,29)^f(k,T,6);return R<0&&(R+=4294967296),R}i.inherits(O,x),t.exports=O,O.blockSize=1024,O.outSize=512,O.hmacStrength=192,O.padLength=128,O.prototype._prepareBlock=function(k,T){for(var R=this.W,F=0;F<32;F++)R[F]=k[T+F];for(;F<R.length;F+=2){var H=w(R[F-4],R[F-3]),it=C(R[F-4],R[F-3]),ot=R[F-14],dt=R[F-13],$=N(R[F-30],R[F-29]),ct=Z(R[F-30],R[F-29]),W=R[F-32],V=R[F-31];R[F]=v(H,it,ot,dt,$,ct,W,V),R[F+1]=p(H,it,ot,dt,$,ct,W,V)}},O.prototype._update=function(k,T){this._prepareBlock(k,T);var R=this.W,F=this.h[0],H=this.h[1],it=this.h[2],ot=this.h[3],dt=this.h[4],$=this.h[5],ct=this.h[6],W=this.h[7],V=this.h[8],rt=this.h[9],mt=this.h[10],wt=this.h[11],_t=this.h[12],Ct=this.h[13],Ft=this.h[14],It=this.h[15];o(this.k.length===R.length);for(var vt=0;vt<R.length;vt+=2){var kt=Ft,gt=It,ut=K(V,rt),Q=D(V,rt),Y=B(V,rt,mt,wt,_t),et=U(V,rt,mt,wt,_t,Ct),lt=this.k[vt],pt=this.k[vt+1],bt=R[vt],Et=R[vt+1],Ot=_(kt,gt,ut,Q,Y,et,lt,pt,bt,Et),zt=y(kt,gt,ut,Q,Y,et,lt,pt,bt,Et);kt=G(F,H),gt=tt(F,H),ut=z(F,H,it,ot,dt),Q=q(F,H,it,ot,dt,$);var Gt=d(kt,gt,ut,Q),Jt=m(kt,gt,ut,Q);Ft=_t,It=Ct,_t=mt,Ct=wt,mt=V,wt=rt,V=d(ct,W,Ot,zt),rt=m(W,W,Ot,zt),ct=dt,W=$,dt=it,$=ot,it=F,ot=H,F=d(Ot,zt,Gt,Jt),H=m(Ot,zt,Gt,Jt)}c(this.h,0,F,H),c(this.h,2,it,ot),c(this.h,4,dt,$),c(this.h,6,ct,W),c(this.h,8,V,rt),c(this.h,10,mt,wt),c(this.h,12,_t,Ct),c(this.h,14,Ft,It)},O.prototype._digest=function(k){return k==="hex"?i.toHex32(this.h,"big"):i.split32(this.h,"big")}},{"../common":427,"../utils":437,"minimalistic-assert":453}],436:[function(e,t,n){"use strict";var i=e("../utils").rotr32;function r(s,u,f){return s&u^~s&f}function o(s,u,f){return s&u^s&f^u&f}function a(s,u,f){return s^u^f}n.ft_1=function(s,u,f,c){return s===0?r(u,f,c):s===1||s===3?a(u,f,c):s===2?o(u,f,c):void 0},n.ch32=r,n.maj32=o,n.p32=a,n.s0_256=function(s){return i(s,2)^i(s,13)^i(s,22)},n.s1_256=function(s){return i(s,6)^i(s,11)^i(s,25)},n.g0_256=function(s){return i(s,7)^i(s,18)^s>>>3},n.g1_256=function(s){return i(s,17)^i(s,19)^s>>>10}},{"../utils":437}],437:[function(e,t,n){"use strict";var i=e("minimalistic-assert"),r=e("inherits");function o(f,c){return(64512&f.charCodeAt(c))==55296&&!(c<0||c+1>=f.length)&&(64512&f.charCodeAt(c+1))==56320}function a(f){return(f>>>24|f>>>8&65280|f<<8&16711680|(255&f)<<24)>>>0}function s(f){return f.length===1?"0"+f:f}function u(f){return f.length===7?"0"+f:f.length===6?"00"+f:f.length===5?"000"+f:f.length===4?"0000"+f:f.length===3?"00000"+f:f.length===2?"000000"+f:f.length===1?"0000000"+f:f}n.inherits=r,n.toArray=function(f,c){if(Array.isArray(f))return f.slice();if(!f)return[];var d=[];if(typeof f=="string")if(c){if(c==="hex")for((f=f.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(f="0"+f),v=0;v<f.length;v+=2)d.push(parseInt(f[v]+f[v+1],16))}else for(var m=0,v=0;v<f.length;v++){var p=f.charCodeAt(v);p<128?d[m++]=p:p<2048?(d[m++]=p>>6|192,d[m++]=63&p|128):o(f,v)?(p=65536+((1023&p)<<10)+(1023&f.charCodeAt(++v)),d[m++]=p>>18|240,d[m++]=p>>12&63|128,d[m++]=p>>6&63|128,d[m++]=63&p|128):(d[m++]=p>>12|224,d[m++]=p>>6&63|128,d[m++]=63&p|128)}else for(v=0;v<f.length;v++)d[v]=0|f[v];return d},n.toHex=function(f){for(var c="",d=0;d<f.length;d++)c+=s(f[d].toString(16));return c},n.htonl=a,n.toHex32=function(f,c){for(var d="",m=0;m<f.length;m++){var v=f[m];c==="little"&&(v=a(v)),d+=u(v.toString(16))}return d},n.zero2=s,n.zero8=u,n.join32=function(f,c,d,m){var v=d-c;i(v%4==0);for(var p=new Array(v/4),_=0,y=c;_<p.length;_++,y+=4){var x;x=m==="big"?f[y]<<24|f[y+1]<<16|f[y+2]<<8|f[y+3]:f[y+3]<<24|f[y+2]<<16|f[y+1]<<8|f[y],p[_]=x>>>0}return p},n.split32=function(f,c){for(var d=new Array(4*f.length),m=0,v=0;m<f.length;m++,v+=4){var p=f[m];c==="big"?(d[v]=p>>>24,d[v+1]=p>>>16&255,d[v+2]=p>>>8&255,d[v+3]=255&p):(d[v+3]=p>>>24,d[v+2]=p>>>16&255,d[v+1]=p>>>8&255,d[v]=255&p)}return d},n.rotr32=function(f,c){return f>>>c|f<<32-c},n.rotl32=function(f,c){return f<<c|f>>>32-c},n.sum32=function(f,c){return f+c>>>0},n.sum32_3=function(f,c,d){return f+c+d>>>0},n.sum32_4=function(f,c,d,m){return f+c+d+m>>>0},n.sum32_5=function(f,c,d,m,v){return f+c+d+m+v>>>0},n.sum64=function(f,c,d,m){var v=f[c],p=m+f[c+1]>>>0,_=(p<m?1:0)+d+v;f[c]=_>>>0,f[c+1]=p},n.sum64_hi=function(f,c,d,m){return(c+m>>>0<c?1:0)+f+d>>>0},n.sum64_lo=function(f,c,d,m){return c+m>>>0},n.sum64_4_hi=function(f,c,d,m,v,p,_,y){var x=0,S=c;return x+=(S=S+m>>>0)<c?1:0,x+=(S=S+p>>>0)<p?1:0,f+d+v+_+(x+=(S=S+y>>>0)<y?1:0)>>>0},n.sum64_4_lo=function(f,c,d,m,v,p,_,y){return c+m+p+y>>>0},n.sum64_5_hi=function(f,c,d,m,v,p,_,y,x,S){var O=0,B=c;return O+=(B=B+m>>>0)<c?1:0,O+=(B=B+p>>>0)<p?1:0,O+=(B=B+y>>>0)<y?1:0,f+d+v+_+x+(O+=(B=B+S>>>0)<S?1:0)>>>0},n.sum64_5_lo=function(f,c,d,m,v,p,_,y,x,S){return c+m+p+y+S>>>0},n.rotr64_hi=function(f,c,d){return(c<<32-d|f>>>d)>>>0},n.rotr64_lo=function(f,c,d){return(f<<32-d|c>>>d)>>>0},n.shr64_hi=function(f,c,d){return f>>>d},n.shr64_lo=function(f,c,d){return(f<<32-d|c>>>d)>>>0}},{inherits:440,"minimalistic-assert":453}],438:[function(e,t,n){"use strict";var i=e("hash.js"),r=e("minimalistic-crypto-utils"),o=e("minimalistic-assert");function a(s){if(!(this instanceof a))return new a(s);this.hash=s.hash,this.predResist=!!s.predResist,this.outLen=this.hash.outSize,this.minEntropy=s.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var u=r.toArray(s.entropy,s.entropyEnc||"hex"),f=r.toArray(s.nonce,s.nonceEnc||"hex"),c=r.toArray(s.pers,s.persEnc||"hex");o(u.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(u,f,c)}t.exports=a,a.prototype._init=function(s,u,f){var c=s.concat(u).concat(f);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var d=0;d<this.V.length;d++)this.K[d]=0,this.V[d]=1;this._update(c),this._reseed=1,this.reseedInterval=281474976710656},a.prototype._hmac=function(){return new i.hmac(this.hash,this.K)},a.prototype._update=function(s){var u=this._hmac().update(this.V).update([0]);s&&(u=u.update(s)),this.K=u.digest(),this.V=this._hmac().update(this.V).digest(),s&&(this.K=this._hmac().update(this.V).update([1]).update(s).digest(),this.V=this._hmac().update(this.V).digest())},a.prototype.reseed=function(s,u,f,c){typeof u!="string"&&(c=f,f=u,u=null),s=r.toArray(s,u),f=r.toArray(f,c),o(s.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(s.concat(f||[])),this._reseed=1},a.prototype.generate=function(s,u,f,c){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof u!="string"&&(c=f,f=u,u=null),f&&(f=r.toArray(f,c||"hex"),this._update(f));for(var d=[];d.length<s;)this.V=this._hmac().update(this.V).digest(),d=d.concat(this.V);var m=d.slice(0,s);return this._update(f),this._reseed++,r.encode(m,u)}},{"hash.js":426,"minimalistic-assert":453,"minimalistic-crypto-utils":454}],439:[function(e,t,n){"use strict";n.read=function(i,r,o,a,s){var u,f,c=8*s-a-1,d=(1<<c)-1,m=d>>1,v=-7,p=o?s-1:0,_=o?-1:1,y=i[r+p];for(p+=_,u=y&(1<<-v)-1,y>>=-v,v+=c;v>0;u=256*u+i[r+p],p+=_,v-=8);for(f=u&(1<<-v)-1,u>>=-v,v+=a;v>0;f=256*f+i[r+p],p+=_,v-=8);if(u===0)u=1-m;else{if(u===d)return f?NaN:1/0*(y?-1:1);f+=Math.pow(2,a),u-=m}return(y?-1:1)*f*Math.pow(2,u-a)},n.write=function(i,r,o,a,s,u){var f,c,d,m=8*u-s-1,v=(1<<m)-1,p=v>>1,_=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=a?0:u-1,x=a?1:-1,S=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(c=isNaN(r)?1:0,f=v):(f=Math.floor(Math.log(r)/Math.LN2),r*(d=Math.pow(2,-f))<1&&(f--,d*=2),(r+=f+p>=1?_/d:_*Math.pow(2,1-p))*d>=2&&(f++,d/=2),f+p>=v?(c=0,f=v):f+p>=1?(c=(r*d-1)*Math.pow(2,s),f+=p):(c=r*Math.pow(2,p-1)*Math.pow(2,s),f=0));s>=8;i[o+y]=255&c,y+=x,c/=256,s-=8);for(f=f<<s|c,m+=s;m>0;i[o+y]=255&f,y+=x,f/=256,m-=8);i[o+y-x]|=128*S}},{}],440:[function(e,t,n){"use strict";typeof Object.create=="function"?t.exports=function(i,r){r&&(i.super_=r,i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(i,r){if(r){i.super_=r;var o=function(){};o.prototype=r.prototype,i.prototype=new o,i.prototype.constructor=i}}},{}],441:[function(e,t,n){(function(i,r,o,a,s,u,f,c){(function(){"use strict";(function(d){typeof n=="object"&&t!==void 0?t.exports=d():(typeof window<"u"?window:r!==void 0?r:typeof self<"u"?self:this).JSZip=d()})(function(){return function d(m,v,p){function _(S,O){if(!v[S]){if(!m[S]){var B=typeof e=="function"&&e;if(!O&&B)return B(S,!0);if(y)return y(S,!0);var U=new Error("Cannot find module '"+S+"'");throw U.code="MODULE_NOT_FOUND",U}var z=v[S]={exports:{}};m[S][0].call(z.exports,function(q){return _(m[S][1][q]||q)},z,z.exports,d,m,v,p)}return v[S].exports}for(var y=typeof e=="function"&&e,x=0;x<p.length;x++)_(p[x]);return _}({1:[function(d,m,v){var p=d("./utils"),_=d("./support"),y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";v.encode=function(x){for(var S,O,B,U,z,q,G,tt=[],K=0,D=x.length,N=D,Z=p.getTypeOf(x)!=="string";K<x.length;)N=D-K,B=Z?(S=x[K++],O=K<D?x[K++]:0,K<D?x[K++]:0):(S=x.charCodeAt(K++),O=K<D?x.charCodeAt(K++):0,K<D?x.charCodeAt(K++):0),U=S>>2,z=(3&S)<<4|O>>4,q=1<N?(15&O)<<2|B>>6:64,G=2<N?63&B:64,tt.push(y.charAt(U)+y.charAt(z)+y.charAt(q)+y.charAt(G));return tt.join("")},v.decode=function(x){var S,O,B,U,z,q,G=0,tt=0,K="data:";if(x.substr(0,K.length)===K)throw new Error("Invalid base64 input, it looks like a data url.");var D,N=3*(x=x.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(x.charAt(x.length-1)===y.charAt(64)&&N--,x.charAt(x.length-2)===y.charAt(64)&&N--,N%1!=0)throw new Error("Invalid base64 input, bad content length.");for(D=_.uint8array?new Uint8Array(0|N):new Array(0|N);G<x.length;)S=y.indexOf(x.charAt(G++))<<2|(U=y.indexOf(x.charAt(G++)))>>4,O=(15&U)<<4|(z=y.indexOf(x.charAt(G++)))>>2,B=(3&z)<<6|(q=y.indexOf(x.charAt(G++))),D[tt++]=S,z!==64&&(D[tt++]=O),q!==64&&(D[tt++]=B);return D}},{"./support":30,"./utils":32}],2:[function(d,m,v){var p=d("./external"),_=d("./stream/DataWorker"),y=d("./stream/Crc32Probe"),x=d("./stream/DataLengthProbe");function S(O,B,U,z,q){this.compressedSize=O,this.uncompressedSize=B,this.crc32=U,this.compression=z,this.compressedContent=q}S.prototype={getContentWorker:function(){var O=new _(p.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new x("data_length")),B=this;return O.on("end",function(){if(this.streamInfo.data_length!==B.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),O},getCompressedWorker:function(){return new _(p.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},S.createWorkerFrom=function(O,B,U){return O.pipe(new y).pipe(new x("uncompressedSize")).pipe(B.compressWorker(U)).pipe(new x("compressedSize")).withStreamInfo("compression",B)},m.exports=S},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(d,m,v){var p=d("./stream/GenericWorker");v.STORE={magic:"\0\0",compressWorker:function(){return new p("STORE compression")},uncompressWorker:function(){return new p("STORE decompression")}},v.DEFLATE=d("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(d,m,v){var p=d("./utils"),_=function(){for(var y,x=[],S=0;S<256;S++){y=S;for(var O=0;O<8;O++)y=1&y?3988292384^y>>>1:y>>>1;x[S]=y}return x}();m.exports=function(y,x){return y!==void 0&&y.length?p.getTypeOf(y)!=="string"?function(S,O,B,U){var z=_,q=0+B;S^=-1;for(var G=0;G<q;G++)S=S>>>8^z[255&(S^O[G])];return-1^S}(0|x,y,y.length):function(S,O,B,U){var z=_,q=0+B;S^=-1;for(var G=0;G<q;G++)S=S>>>8^z[255&(S^O.charCodeAt(G))];return-1^S}(0|x,y,y.length):0}},{"./utils":32}],5:[function(d,m,v){v.base64=!1,v.binary=!1,v.dir=!1,v.createFolders=!0,v.date=null,v.compression=null,v.compressionOptions=null,v.comment=null,v.unixPermissions=null,v.dosPermissions=null},{}],6:[function(d,m,v){var p;p=typeof Promise<"u"?Promise:d("lie"),m.exports={Promise:p}},{lie:37}],7:[function(d,m,v){var p=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",_=d("pako"),y=d("./utils"),x=d("./stream/GenericWorker"),S=p?"uint8array":"array";function O(B,U){x.call(this,"FlateWorker/"+B),this._pako=null,this._pakoAction=B,this._pakoOptions=U,this.meta={}}v.magic="\b\0",y.inherits(O,x),O.prototype.processChunk=function(B){this.meta=B.meta,this._pako===null&&this._createPako(),this._pako.push(y.transformTo(S,B.data),!1)},O.prototype.flush=function(){x.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},O.prototype.cleanUp=function(){x.prototype.cleanUp.call(this),this._pako=null},O.prototype._createPako=function(){this._pako=new _[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var B=this;this._pako.onData=function(U){B.push({data:U,meta:B.meta})}},v.compressWorker=function(B){return new O("Deflate",B)},v.uncompressWorker=function(){return new O("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(d,m,v){function p(z,q){var G,tt="";for(G=0;G<q;G++)tt+=String.fromCharCode(255&z),z>>>=8;return tt}function _(z,q,G,tt,K,D){var N,Z,w=z.file,C=z.compression,k=D!==S.utf8encode,T=y.transformTo("string",D(w.name)),R=y.transformTo("string",S.utf8encode(w.name)),F=w.comment,H=y.transformTo("string",D(F)),it=y.transformTo("string",S.utf8encode(F)),ot=R.length!==w.name.length,dt=it.length!==F.length,$="",ct="",W="",V=w.dir,rt=w.date,mt={crc32:0,compressedSize:0,uncompressedSize:0};q&&!G||(mt.crc32=z.crc32,mt.compressedSize=z.compressedSize,mt.uncompressedSize=z.uncompressedSize);var wt=0;q&&(wt|=8),k||!ot&&!dt||(wt|=2048);var _t=0,Ct=0;V&&(_t|=16),K==="UNIX"?(Ct=798,_t|=function(It,vt){var kt=It;return It||(kt=vt?16893:33204),(65535&kt)<<16}(w.unixPermissions,V)):(Ct=20,_t|=function(It){return 63&(It||0)}(w.dosPermissions)),N=rt.getUTCHours(),N<<=6,N|=rt.getUTCMinutes(),N<<=5,N|=rt.getUTCSeconds()/2,Z=rt.getUTCFullYear()-1980,Z<<=4,Z|=rt.getUTCMonth()+1,Z<<=5,Z|=rt.getUTCDate(),ot&&(ct=p(1,1)+p(O(T),4)+R,$+="up"+p(ct.length,2)+ct),dt&&(W=p(1,1)+p(O(H),4)+it,$+="uc"+p(W.length,2)+W);var Ft="";return Ft+=`
\0`,Ft+=p(wt,2),Ft+=C.magic,Ft+=p(N,2),Ft+=p(Z,2),Ft+=p(mt.crc32,4),Ft+=p(mt.compressedSize,4),Ft+=p(mt.uncompressedSize,4),Ft+=p(T.length,2),Ft+=p($.length,2),{fileRecord:B.LOCAL_FILE_HEADER+Ft+T+$,dirRecord:B.CENTRAL_FILE_HEADER+p(Ct,2)+Ft+p(H.length,2)+"\0\0\0\0"+p(_t,4)+p(tt,4)+T+$+H}}var y=d("../utils"),x=d("../stream/GenericWorker"),S=d("../utf8"),O=d("../crc32"),B=d("../signature");function U(z,q,G,tt){x.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=q,this.zipPlatform=G,this.encodeFileName=tt,this.streamFiles=z,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}y.inherits(U,x),U.prototype.push=function(z){var q=z.meta.percent||0,G=this.entriesCount,tt=this._sources.length;this.accumulate?this.contentBuffer.push(z):(this.bytesWritten+=z.data.length,x.prototype.push.call(this,{data:z.data,meta:{currentFile:this.currentFile,percent:G?(q+100*(G-tt-1))/G:100}}))},U.prototype.openedSource=function(z){this.currentSourceOffset=this.bytesWritten,this.currentFile=z.file.name;var q=this.streamFiles&&!z.file.dir;if(q){var G=_(z,q,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:G.fileRecord,meta:{percent:0}})}else this.accumulate=!0},U.prototype.closedSource=function(z){this.accumulate=!1;var q=this.streamFiles&&!z.file.dir,G=_(z,q,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(G.dirRecord),q)this.push({data:function(tt){return B.DATA_DESCRIPTOR+p(tt.crc32,4)+p(tt.compressedSize,4)+p(tt.uncompressedSize,4)}(z),meta:{percent:100}});else for(this.push({data:G.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},U.prototype.flush=function(){for(var z=this.bytesWritten,q=0;q<this.dirRecords.length;q++)this.push({data:this.dirRecords[q],meta:{percent:100}});var G=this.bytesWritten-z,tt=function(K,D,N,Z,w){var C=y.transformTo("string",w(Z));return B.CENTRAL_DIRECTORY_END+"\0\0\0\0"+p(K,2)+p(K,2)+p(D,4)+p(N,4)+p(C.length,2)+C}(this.dirRecords.length,G,z,this.zipComment,this.encodeFileName);this.push({data:tt,meta:{percent:100}})},U.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},U.prototype.registerPrevious=function(z){this._sources.push(z);var q=this;return z.on("data",function(G){q.processChunk(G)}),z.on("end",function(){q.closedSource(q.previous.streamInfo),q._sources.length?q.prepareNextSource():q.end()}),z.on("error",function(G){q.error(G)}),this},U.prototype.resume=function(){return!!x.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},U.prototype.error=function(z){var q=this._sources;if(!x.prototype.error.call(this,z))return!1;for(var G=0;G<q.length;G++)try{q[G].error(z)}catch{}return!0},U.prototype.lock=function(){x.prototype.lock.call(this);for(var z=this._sources,q=0;q<z.length;q++)z[q].lock()},m.exports=U},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(d,m,v){var p=d("../compressions"),_=d("./ZipFileWorker");v.generateWorker=function(y,x,S){var O=new _(x.streamFiles,S,x.platform,x.encodeFileName),B=0;try{y.forEach(function(U,z){B++;var q=function(D,N){var Z=D||N,w=p[Z];if(!w)throw new Error(Z+" is not a valid compression method !");return w}(z.options.compression,x.compression),G=z.options.compressionOptions||x.compressionOptions||{},tt=z.dir,K=z.date;z._compressWorker(q,G).withStreamInfo("file",{name:U,dir:tt,date:K,comment:z.comment||"",unixPermissions:z.unixPermissions,dosPermissions:z.dosPermissions}).pipe(O)}),O.entriesCount=B}catch(U){O.error(U)}return O}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(d,m,v){function p(){if(!(this instanceof p))return new p;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var _=new p;for(var y in this)typeof this[y]!="function"&&(_[y]=this[y]);return _}}(p.prototype=d("./object")).loadAsync=d("./load"),p.support=d("./support"),p.defaults=d("./defaults"),p.version="3.10.1",p.loadAsync=function(_,y){return new p().loadAsync(_,y)},p.external=d("./external"),m.exports=p},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(d,m,v){var p=d("./utils"),_=d("./external"),y=d("./utf8"),x=d("./zipEntries"),S=d("./stream/Crc32Probe"),O=d("./nodejsUtils");function B(U){return new _.Promise(function(z,q){var G=U.decompressed.getContentWorker().pipe(new S);G.on("error",function(tt){q(tt)}).on("end",function(){G.streamInfo.crc32!==U.decompressed.crc32?q(new Error("Corrupted zip : CRC32 mismatch")):z()}).resume()})}m.exports=function(U,z){var q=this;return z=p.extend(z||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:y.utf8decode}),O.isNode&&O.isStream(U)?_.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):p.prepareContent("the loaded zip file",U,!0,z.optimizedBinaryString,z.base64).then(function(G){var tt=new x(z);return tt.load(G),tt}).then(function(G){var tt=[_.Promise.resolve(G)],K=G.files;if(z.checkCRC32)for(var D=0;D<K.length;D++)tt.push(B(K[D]));return _.Promise.all(tt)}).then(function(G){for(var tt=G.shift(),K=tt.files,D=0;D<K.length;D++){var N=K[D],Z=N.fileNameStr,w=p.resolve(N.fileNameStr);q.file(w,N.decompressed,{binary:!0,optimizedBinaryString:!0,date:N.date,dir:N.dir,comment:N.fileCommentStr.length?N.fileCommentStr:null,unixPermissions:N.unixPermissions,dosPermissions:N.dosPermissions,createFolders:z.createFolders}),N.dir||(q.file(w).unsafeOriginalName=Z)}return tt.zipComment.length&&(q.comment=tt.zipComment),q})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(d,m,v){var p=d("../utils"),_=d("../stream/GenericWorker");function y(x,S){_.call(this,"Nodejs stream input adapter for "+x),this._upstreamEnded=!1,this._bindStream(S)}p.inherits(y,_),y.prototype._bindStream=function(x){var S=this;(this._stream=x).pause(),x.on("data",function(O){S.push({data:O,meta:{percent:0}})}).on("error",function(O){S.isPaused?this.generatedError=O:S.error(O)}).on("end",function(){S.isPaused?S._upstreamEnded=!0:S.end()})},y.prototype.pause=function(){return!!_.prototype.pause.call(this)&&(this._stream.pause(),!0)},y.prototype.resume=function(){return!!_.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},m.exports=y},{"../stream/GenericWorker":28,"../utils":32}],13:[function(d,m,v){var p=d("readable-stream").Readable;function _(y,x,S){p.call(this,x),this._helper=y;var O=this;y.on("data",function(B,U){O.push(B)||O._helper.pause(),S&&S(U)}).on("error",function(B){O.emit("error",B)}).on("end",function(){O.push(null)})}d("../utils").inherits(_,p),_.prototype._read=function(){this._helper.resume()},m.exports=_},{"../utils":32,"readable-stream":16}],14:[function(d,m,v){m.exports={isNode:o!==void 0,newBufferFrom:function(p,_){if(o.from&&o.from!==Uint8Array.from)return o.from(p,_);if(typeof p=="number")throw new Error('The "data" argument must not be a number');return new o(p,_)},allocBuffer:function(p){if(o.alloc)return o.alloc(p);var _=new o(p);return _.fill(0),_},isBuffer:function(p){return o.isBuffer(p)},isStream:function(p){return p&&typeof p.on=="function"&&typeof p.pause=="function"&&typeof p.resume=="function"}}},{}],15:[function(d,m,v){function p(w,C,k){var T,R=y.getTypeOf(C),F=y.extend(k||{},O);F.date=F.date||new Date,F.compression!==null&&(F.compression=F.compression.toUpperCase()),typeof F.unixPermissions=="string"&&(F.unixPermissions=parseInt(F.unixPermissions,8)),F.unixPermissions&&16384&F.unixPermissions&&(F.dir=!0),F.dosPermissions&&16&F.dosPermissions&&(F.dir=!0),F.dir&&(w=K(w)),F.createFolders&&(T=tt(w))&&D.call(this,T,!0);var H=R==="string"&&F.binary===!1&&F.base64===!1;k&&k.binary!==void 0||(F.binary=!H),(C instanceof B&&C.uncompressedSize===0||F.dir||!C||C.length===0)&&(F.base64=!1,F.binary=!0,C="",F.compression="STORE",R="string");var it;it=C instanceof B||C instanceof x?C:q.isNode&&q.isStream(C)?new G(w,C):y.prepareContent(w,C,F.binary,F.optimizedBinaryString,F.base64);var ot=new U(w,it,F);this.files[w]=ot}var _=d("./utf8"),y=d("./utils"),x=d("./stream/GenericWorker"),S=d("./stream/StreamHelper"),O=d("./defaults"),B=d("./compressedObject"),U=d("./zipObject"),z=d("./generate"),q=d("./nodejsUtils"),G=d("./nodejs/NodejsStreamInputAdapter"),tt=function(w){w.slice(-1)==="/"&&(w=w.substring(0,w.length-1));var C=w.lastIndexOf("/");return 0<C?w.substring(0,C):""},K=function(w){return w.slice(-1)!=="/"&&(w+="/"),w},D=function(w,C){return C=C!==void 0?C:O.createFolders,w=K(w),this.files[w]||p.call(this,w,null,{dir:!0,createFolders:C}),this.files[w]};function N(w){return Object.prototype.toString.call(w)==="[object RegExp]"}var Z={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(w){var C,k,T;for(C in this.files)T=this.files[C],(k=C.slice(this.root.length,C.length))&&C.slice(0,this.root.length)===this.root&&w(k,T)},filter:function(w){var C=[];return this.forEach(function(k,T){w(k,T)&&C.push(T)}),C},file:function(w,C,k){if(arguments.length!==1)return w=this.root+w,p.call(this,w,C,k),this;if(N(w)){var T=w;return this.filter(function(F,H){return!H.dir&&T.test(F)})}var R=this.files[this.root+w];return R&&!R.dir?R:null},folder:function(w){if(!w)return this;if(N(w))return this.filter(function(R,F){return F.dir&&w.test(R)});var C=this.root+w,k=D.call(this,C),T=this.clone();return T.root=k.name,T},remove:function(w){w=this.root+w;var C=this.files[w];if(C||(w.slice(-1)!=="/"&&(w+="/"),C=this.files[w]),C&&!C.dir)delete this.files[w];else for(var k=this.filter(function(R,F){return F.name.slice(0,w.length)===w}),T=0;T<k.length;T++)delete this.files[k[T].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(w){var C,k={};try{if((k=y.extend(w||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:_.utf8encode})).type=k.type.toLowerCase(),k.compression=k.compression.toUpperCase(),k.type==="binarystring"&&(k.type="string"),!k.type)throw new Error("No output type specified.");y.checkSupport(k.type),k.platform!=="darwin"&&k.platform!=="freebsd"&&k.platform!=="linux"&&k.platform!=="sunos"||(k.platform="UNIX"),k.platform==="win32"&&(k.platform="DOS");var T=k.comment||this.comment||"";C=z.generateWorker(this,k,T)}catch(R){(C=new x("error")).error(R)}return new S(C,k.type||"string",k.mimeType)},generateAsync:function(w,C){return this.generateInternalStream(w).accumulate(C)},generateNodeStream:function(w,C){return(w=w||{}).type||(w.type="nodebuffer"),this.generateInternalStream(w).toNodejsStream(C)}};m.exports=Z},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(d,m,v){m.exports=d("stream")},{stream:void 0}],17:[function(d,m,v){var p=d("./DataReader");function _(y){p.call(this,y);for(var x=0;x<this.data.length;x++)y[x]=255&y[x]}d("../utils").inherits(_,p),_.prototype.byteAt=function(y){return this.data[this.zero+y]},_.prototype.lastIndexOfSignature=function(y){for(var x=y.charCodeAt(0),S=y.charCodeAt(1),O=y.charCodeAt(2),B=y.charCodeAt(3),U=this.length-4;0<=U;--U)if(this.data[U]===x&&this.data[U+1]===S&&this.data[U+2]===O&&this.data[U+3]===B)return U-this.zero;return-1},_.prototype.readAndCheckSignature=function(y){var x=y.charCodeAt(0),S=y.charCodeAt(1),O=y.charCodeAt(2),B=y.charCodeAt(3),U=this.readData(4);return x===U[0]&&S===U[1]&&O===U[2]&&B===U[3]},_.prototype.readData=function(y){if(this.checkOffset(y),y===0)return[];var x=this.data.slice(this.zero+this.index,this.zero+this.index+y);return this.index+=y,x},m.exports=_},{"../utils":32,"./DataReader":18}],18:[function(d,m,v){var p=d("../utils");function _(y){this.data=y,this.length=y.length,this.index=0,this.zero=0}_.prototype={checkOffset:function(y){this.checkIndex(this.index+y)},checkIndex:function(y){if(this.length<this.zero+y||y<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+y+"). Corrupted zip ?")},setIndex:function(y){this.checkIndex(y),this.index=y},skip:function(y){this.setIndex(this.index+y)},byteAt:function(){},readInt:function(y){var x,S=0;for(this.checkOffset(y),x=this.index+y-1;x>=this.index;x--)S=(S<<8)+this.byteAt(x);return this.index+=y,S},readString:function(y){return p.transformTo("string",this.readData(y))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var y=this.readInt(4);return new Date(Date.UTC(1980+(y>>25&127),(y>>21&15)-1,y>>16&31,y>>11&31,y>>5&63,(31&y)<<1))}},m.exports=_},{"../utils":32}],19:[function(d,m,v){var p=d("./Uint8ArrayReader");function _(y){p.call(this,y)}d("../utils").inherits(_,p),_.prototype.readData=function(y){this.checkOffset(y);var x=this.data.slice(this.zero+this.index,this.zero+this.index+y);return this.index+=y,x},m.exports=_},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(d,m,v){var p=d("./DataReader");function _(y){p.call(this,y)}d("../utils").inherits(_,p),_.prototype.byteAt=function(y){return this.data.charCodeAt(this.zero+y)},_.prototype.lastIndexOfSignature=function(y){return this.data.lastIndexOf(y)-this.zero},_.prototype.readAndCheckSignature=function(y){return y===this.readData(4)},_.prototype.readData=function(y){this.checkOffset(y);var x=this.data.slice(this.zero+this.index,this.zero+this.index+y);return this.index+=y,x},m.exports=_},{"../utils":32,"./DataReader":18}],21:[function(d,m,v){var p=d("./ArrayReader");function _(y){p.call(this,y)}d("../utils").inherits(_,p),_.prototype.readData=function(y){if(this.checkOffset(y),y===0)return new Uint8Array(0);var x=this.data.subarray(this.zero+this.index,this.zero+this.index+y);return this.index+=y,x},m.exports=_},{"../utils":32,"./ArrayReader":17}],22:[function(d,m,v){var p=d("../utils"),_=d("../support"),y=d("./ArrayReader"),x=d("./StringReader"),S=d("./NodeBufferReader"),O=d("./Uint8ArrayReader");m.exports=function(B){var U=p.getTypeOf(B);return p.checkSupport(U),U!=="string"||_.uint8array?U==="nodebuffer"?new S(B):_.uint8array?new O(p.transformTo("uint8array",B)):new y(p.transformTo("array",B)):new x(B)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(d,m,v){v.LOCAL_FILE_HEADER="PK",v.CENTRAL_FILE_HEADER="PK",v.CENTRAL_DIRECTORY_END="PK",v.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",v.ZIP64_CENTRAL_DIRECTORY_END="PK",v.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(d,m,v){var p=d("./GenericWorker"),_=d("../utils");function y(x){p.call(this,"ConvertWorker to "+x),this.destType=x}_.inherits(y,p),y.prototype.processChunk=function(x){this.push({data:_.transformTo(this.destType,x.data),meta:x.meta})},m.exports=y},{"../utils":32,"./GenericWorker":28}],25:[function(d,m,v){var p=d("./GenericWorker"),_=d("../crc32");function y(){p.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}d("../utils").inherits(y,p),y.prototype.processChunk=function(x){this.streamInfo.crc32=_(x.data,this.streamInfo.crc32||0),this.push(x)},m.exports=y},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(d,m,v){var p=d("../utils"),_=d("./GenericWorker");function y(x){_.call(this,"DataLengthProbe for "+x),this.propName=x,this.withStreamInfo(x,0)}p.inherits(y,_),y.prototype.processChunk=function(x){if(x){var S=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=S+x.data.length}_.prototype.processChunk.call(this,x)},m.exports=y},{"../utils":32,"./GenericWorker":28}],27:[function(d,m,v){var p=d("../utils"),_=d("./GenericWorker");function y(x){_.call(this,"DataWorker");var S=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,x.then(function(O){S.dataIsReady=!0,S.data=O,S.max=O&&O.length||0,S.type=p.getTypeOf(O),S.isPaused||S._tickAndRepeat()},function(O){S.error(O)})}p.inherits(y,_),y.prototype.cleanUp=function(){_.prototype.cleanUp.call(this),this.data=null},y.prototype.resume=function(){return!!_.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,p.delay(this._tickAndRepeat,[],this)),!0)},y.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(p.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},y.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var x=null,S=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":x=this.data.substring(this.index,S);break;case"uint8array":x=this.data.subarray(this.index,S);break;case"array":case"nodebuffer":x=this.data.slice(this.index,S)}return this.index=S,this.push({data:x,meta:{percent:this.max?this.index/this.max*100:0}})},m.exports=y},{"../utils":32,"./GenericWorker":28}],28:[function(d,m,v){function p(_){this.name=_||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}p.prototype={push:function(_){this.emit("data",_)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(_){this.emit("error",_)}return!0},error:function(_){return!this.isFinished&&(this.isPaused?this.generatedError=_:(this.isFinished=!0,this.emit("error",_),this.previous&&this.previous.error(_),this.cleanUp()),!0)},on:function(_,y){return this._listeners[_].push(y),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(_,y){if(this._listeners[_])for(var x=0;x<this._listeners[_].length;x++)this._listeners[_][x].call(this,y)},pipe:function(_){return _.registerPrevious(this)},registerPrevious:function(_){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=_.streamInfo,this.mergeStreamInfo(),this.previous=_;var y=this;return _.on("data",function(x){y.processChunk(x)}),_.on("end",function(){y.end()}),_.on("error",function(x){y.error(x)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var _=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),_=!0),this.previous&&this.previous.resume(),!_},flush:function(){},processChunk:function(_){this.push(_)},withStreamInfo:function(_,y){return this.extraStreamInfo[_]=y,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var _ in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,_)&&(this.streamInfo[_]=this.extraStreamInfo[_])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var _="Worker "+this.name;return this.previous?this.previous+" -> "+_:_}},m.exports=p},{}],29:[function(d,m,v){var p=d("../utils"),_=d("./ConvertWorker"),y=d("./GenericWorker"),x=d("../base64"),S=d("../support"),O=d("../external"),B=null;if(S.nodestream)try{B=d("../nodejs/NodejsStreamOutputAdapter")}catch{}function U(z,q,G){var tt=q;switch(q){case"blob":case"arraybuffer":tt="uint8array";break;case"base64":tt="string"}try{this._internalType=tt,this._outputType=q,this._mimeType=G,p.checkSupport(tt),this._worker=z.pipe(new _(tt)),z.lock()}catch(K){this._worker=new y("error"),this._worker.error(K)}}U.prototype={accumulate:function(z){return function(q,G){return new O.Promise(function(tt,K){var D=[],N=q._internalType,Z=q._outputType,w=q._mimeType;q.on("data",function(C,k){D.push(C),G&&G(k)}).on("error",function(C){D=[],K(C)}).on("end",function(){try{var C=function(k,T,R){switch(k){case"blob":return p.newBlob(p.transformTo("arraybuffer",T),R);case"base64":return x.encode(T);default:return p.transformTo(k,T)}}(Z,function(k,T){var R,F=0,H=null,it=0;for(R=0;R<T.length;R++)it+=T[R].length;switch(k){case"string":return T.join("");case"array":return Array.prototype.concat.apply([],T);case"uint8array":for(H=new Uint8Array(it),R=0;R<T.length;R++)H.set(T[R],F),F+=T[R].length;return H;case"nodebuffer":return o.concat(T);default:throw new Error("concat : unsupported type '"+k+"'")}}(N,D),w);tt(C)}catch(k){K(k)}D=[]}).resume()})}(this,z)},on:function(z,q){var G=this;return z==="data"?this._worker.on(z,function(tt){q.call(G,tt.data,tt.meta)}):this._worker.on(z,function(){p.delay(q,arguments,G)}),this},resume:function(){return p.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(z){if(p.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new B(this,{objectMode:this._outputType!=="nodebuffer"},z)}},m.exports=U},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(d,m,v){if(v.base64=!0,v.array=!0,v.string=!0,v.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",v.nodebuffer=o!==void 0,v.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")v.blob=!1;else{var p=new ArrayBuffer(0);try{v.blob=new Blob([p],{type:"application/zip"}).size===0}catch{try{var _=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);_.append(p),v.blob=_.getBlob("application/zip").size===0}catch{v.blob=!1}}}try{v.nodestream=!!d("readable-stream").Readable}catch{v.nodestream=!1}},{"readable-stream":16}],31:[function(d,m,v){for(var p=d("./utils"),_=d("./support"),y=d("./nodejsUtils"),x=d("./stream/GenericWorker"),S=new Array(256),O=0;O<256;O++)S[O]=252<=O?6:248<=O?5:240<=O?4:224<=O?3:192<=O?2:1;function B(){x.call(this,"utf-8 decode"),this.leftOver=null}function U(){x.call(this,"utf-8 encode")}S[254]=S[254]=1,v.utf8encode=function(z){return _.nodebuffer?y.newBufferFrom(z,"utf-8"):function(q){var G,tt,K,D,N,Z=q.length,w=0;for(D=0;D<Z;D++)(64512&(tt=q.charCodeAt(D)))==55296&&D+1<Z&&(64512&(K=q.charCodeAt(D+1)))==56320&&(tt=65536+(tt-55296<<10)+(K-56320),D++),w+=tt<128?1:tt<2048?2:tt<65536?3:4;for(G=_.uint8array?new Uint8Array(w):new Array(w),D=N=0;N<w;D++)(64512&(tt=q.charCodeAt(D)))==55296&&D+1<Z&&(64512&(K=q.charCodeAt(D+1)))==56320&&(tt=65536+(tt-55296<<10)+(K-56320),D++),tt<128?G[N++]=tt:(tt<2048?G[N++]=192|tt>>>6:(tt<65536?G[N++]=224|tt>>>12:(G[N++]=240|tt>>>18,G[N++]=128|tt>>>12&63),G[N++]=128|tt>>>6&63),G[N++]=128|63&tt);return G}(z)},v.utf8decode=function(z){return _.nodebuffer?p.transformTo("nodebuffer",z).toString("utf-8"):function(q){var G,tt,K,D,N=q.length,Z=new Array(2*N);for(G=tt=0;G<N;)if((K=q[G++])<128)Z[tt++]=K;else if(4<(D=S[K]))Z[tt++]=65533,G+=D-1;else{for(K&=D===2?31:D===3?15:7;1<D&&G<N;)K=K<<6|63&q[G++],D--;1<D?Z[tt++]=65533:K<65536?Z[tt++]=K:(K-=65536,Z[tt++]=55296|K>>10&1023,Z[tt++]=56320|1023&K)}return Z.length!==tt&&(Z.subarray?Z=Z.subarray(0,tt):Z.length=tt),p.applyFromCharCode(Z)}(z=p.transformTo(_.uint8array?"uint8array":"array",z))},p.inherits(B,x),B.prototype.processChunk=function(z){var q=p.transformTo(_.uint8array?"uint8array":"array",z.data);if(this.leftOver&&this.leftOver.length){if(_.uint8array){var G=q;(q=new Uint8Array(G.length+this.leftOver.length)).set(this.leftOver,0),q.set(G,this.leftOver.length)}else q=this.leftOver.concat(q);this.leftOver=null}var tt=function(D,N){var Z;for((N=N||D.length)>D.length&&(N=D.length),Z=N-1;0<=Z&&(192&D[Z])==128;)Z--;return Z<0||Z===0?N:Z+S[D[Z]]>N?Z:N}(q),K=q;tt!==q.length&&(_.uint8array?(K=q.subarray(0,tt),this.leftOver=q.subarray(tt,q.length)):(K=q.slice(0,tt),this.leftOver=q.slice(tt,q.length))),this.push({data:v.utf8decode(K),meta:z.meta})},B.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:v.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},v.Utf8DecodeWorker=B,p.inherits(U,x),U.prototype.processChunk=function(z){this.push({data:v.utf8encode(z.data),meta:z.meta})},v.Utf8EncodeWorker=U},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(d,m,v){var p=d("./support"),_=d("./base64"),y=d("./nodejsUtils"),x=d("./external");function S(G){return G}function O(G,tt){for(var K=0;K<G.length;++K)tt[K]=255&G.charCodeAt(K);return tt}d("setimmediate"),v.newBlob=function(G,tt){v.checkSupport("blob");try{return new Blob([G],{type:tt})}catch{try{var K=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return K.append(G),K.getBlob(tt)}catch{throw new Error("Bug : can't construct the Blob.")}}};var B={stringifyByChunk:function(G,tt,K){var D=[],N=0,Z=G.length;if(Z<=K)return String.fromCharCode.apply(null,G);for(;N<Z;)tt==="array"||tt==="nodebuffer"?D.push(String.fromCharCode.apply(null,G.slice(N,Math.min(N+K,Z)))):D.push(String.fromCharCode.apply(null,G.subarray(N,Math.min(N+K,Z)))),N+=K;return D.join("")},stringifyByChar:function(G){for(var tt="",K=0;K<G.length;K++)tt+=String.fromCharCode(G[K]);return tt},applyCanBeUsed:{uint8array:function(){try{return p.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return p.nodebuffer&&String.fromCharCode.apply(null,y.allocBuffer(1)).length===1}catch{return!1}}()}};function U(G){var tt=65536,K=v.getTypeOf(G),D=!0;if(K==="uint8array"?D=B.applyCanBeUsed.uint8array:K==="nodebuffer"&&(D=B.applyCanBeUsed.nodebuffer),D)for(;1<tt;)try{return B.stringifyByChunk(G,K,tt)}catch{tt=Math.floor(tt/2)}return B.stringifyByChar(G)}function z(G,tt){for(var K=0;K<G.length;K++)tt[K]=G[K];return tt}v.applyFromCharCode=U;var q={};q.string={string:S,array:function(G){return O(G,new Array(G.length))},arraybuffer:function(G){return q.string.uint8array(G).buffer},uint8array:function(G){return O(G,new Uint8Array(G.length))},nodebuffer:function(G){return O(G,y.allocBuffer(G.length))}},q.array={string:U,array:S,arraybuffer:function(G){return new Uint8Array(G).buffer},uint8array:function(G){return new Uint8Array(G)},nodebuffer:function(G){return y.newBufferFrom(G)}},q.arraybuffer={string:function(G){return U(new Uint8Array(G))},array:function(G){return z(new Uint8Array(G),new Array(G.byteLength))},arraybuffer:S,uint8array:function(G){return new Uint8Array(G)},nodebuffer:function(G){return y.newBufferFrom(new Uint8Array(G))}},q.uint8array={string:U,array:function(G){return z(G,new Array(G.length))},arraybuffer:function(G){return G.buffer},uint8array:S,nodebuffer:function(G){return y.newBufferFrom(G)}},q.nodebuffer={string:U,array:function(G){return z(G,new Array(G.length))},arraybuffer:function(G){return q.nodebuffer.uint8array(G).buffer},uint8array:function(G){return z(G,new Uint8Array(G.length))},nodebuffer:S},v.transformTo=function(G,tt){if(tt=tt||"",!G)return tt;v.checkSupport(G);var K=v.getTypeOf(tt);return q[K][G](tt)},v.resolve=function(G){for(var tt=G.split("/"),K=[],D=0;D<tt.length;D++){var N=tt[D];N==="."||N===""&&D!==0&&D!==tt.length-1||(N===".."?K.pop():K.push(N))}return K.join("/")},v.getTypeOf=function(G){return typeof G=="string"?"string":Object.prototype.toString.call(G)==="[object Array]"?"array":p.nodebuffer&&y.isBuffer(G)?"nodebuffer":p.uint8array&&G instanceof Uint8Array?"uint8array":p.arraybuffer&&G instanceof ArrayBuffer?"arraybuffer":void 0},v.checkSupport=function(G){if(!p[G.toLowerCase()])throw new Error(G+" is not supported by this platform")},v.MAX_VALUE_16BITS=65535,v.MAX_VALUE_32BITS=-1,v.pretty=function(G){var tt,K,D="";for(K=0;K<(G||"").length;K++)D+="\\x"+((tt=G.charCodeAt(K))<16?"0":"")+tt.toString(16).toUpperCase();return D},v.delay=function(G,tt,K){c(function(){G.apply(K||null,tt||[])})},v.inherits=function(G,tt){function K(){}K.prototype=tt.prototype,G.prototype=new K},v.extend=function(){var G,tt,K={};for(G=0;G<arguments.length;G++)for(tt in arguments[G])Object.prototype.hasOwnProperty.call(arguments[G],tt)&&K[tt]===void 0&&(K[tt]=arguments[G][tt]);return K},v.prepareContent=function(G,tt,K,D,N){return x.Promise.resolve(tt).then(function(Z){return p.blob&&(Z instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(Z))!==-1)&&typeof FileReader<"u"?new x.Promise(function(w,C){var k=new FileReader;k.onload=function(T){w(T.target.result)},k.onerror=function(T){C(T.target.error)},k.readAsArrayBuffer(Z)}):Z}).then(function(Z){var w=v.getTypeOf(Z);return w?(w==="arraybuffer"?Z=v.transformTo("uint8array",Z):w==="string"&&(N?Z=_.decode(Z):K&&D!==!0&&(Z=function(C){return O(C,p.uint8array?new Uint8Array(C.length):new Array(C.length))}(Z))),Z):x.Promise.reject(new Error("Can't read the data of '"+G+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(d,m,v){var p=d("./reader/readerFor"),_=d("./utils"),y=d("./signature"),x=d("./zipEntry"),S=d("./support");function O(B){this.files=[],this.loadOptions=B}O.prototype={checkSignature:function(B){if(!this.reader.readAndCheckSignature(B)){this.reader.index-=4;var U=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+_.pretty(U)+", expected "+_.pretty(B)+")")}},isSignature:function(B,U){var z=this.reader.index;this.reader.setIndex(B);var q=this.reader.readString(4)===U;return this.reader.setIndex(z),q},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var B=this.reader.readData(this.zipCommentLength),U=S.uint8array?"uint8array":"array",z=_.transformTo(U,B);this.zipComment=this.loadOptions.decodeFileName(z)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var B,U,z,q=this.zip64EndOfCentralSize-44;0<q;)B=this.reader.readInt(2),U=this.reader.readInt(4),z=this.reader.readData(U),this.zip64ExtensibleData[B]={id:B,length:U,value:z}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var B,U;for(B=0;B<this.files.length;B++)U=this.files[B],this.reader.setIndex(U.localHeaderOffset),this.checkSignature(y.LOCAL_FILE_HEADER),U.readLocalPart(this.reader),U.handleUTF8(),U.processAttributes()},readCentralDir:function(){var B;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(y.CENTRAL_FILE_HEADER);)(B=new x({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(B);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var B=this.reader.lastIndexOfSignature(y.CENTRAL_DIRECTORY_END);if(B<0)throw this.isSignature(0,y.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(B);var U=B;if(this.checkSignature(y.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===_.MAX_VALUE_16BITS||this.diskWithCentralDirStart===_.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===_.MAX_VALUE_16BITS||this.centralDirRecords===_.MAX_VALUE_16BITS||this.centralDirSize===_.MAX_VALUE_32BITS||this.centralDirOffset===_.MAX_VALUE_32BITS){if(this.zip64=!0,(B=this.reader.lastIndexOfSignature(y.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(B),this.checkSignature(y.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,y.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(y.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(y.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var z=this.centralDirOffset+this.centralDirSize;this.zip64&&(z+=20,z+=12+this.zip64EndOfCentralSize);var q=U-z;if(0<q)this.isSignature(U,y.CENTRAL_FILE_HEADER)||(this.reader.zero=q);else if(q<0)throw new Error("Corrupted zip: missing "+Math.abs(q)+" bytes.")},prepareReader:function(B){this.reader=p(B)},load:function(B){this.prepareReader(B),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},m.exports=O},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(d,m,v){var p=d("./reader/readerFor"),_=d("./utils"),y=d("./compressedObject"),x=d("./crc32"),S=d("./utf8"),O=d("./compressions"),B=d("./support");function U(z,q){this.options=z,this.loadOptions=q}U.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(z){var q,G;if(z.skip(22),this.fileNameLength=z.readInt(2),G=z.readInt(2),this.fileName=z.readData(this.fileNameLength),z.skip(G),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((q=function(tt){for(var K in O)if(Object.prototype.hasOwnProperty.call(O,K)&&O[K].magic===tt)return O[K];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+_.pretty(this.compressionMethod)+" unknown (inner file : "+_.transformTo("string",this.fileName)+")");this.decompressed=new y(this.compressedSize,this.uncompressedSize,this.crc32,q,z.readData(this.compressedSize))},readCentralPart:function(z){this.versionMadeBy=z.readInt(2),z.skip(2),this.bitFlag=z.readInt(2),this.compressionMethod=z.readString(2),this.date=z.readDate(),this.crc32=z.readInt(4),this.compressedSize=z.readInt(4),this.uncompressedSize=z.readInt(4);var q=z.readInt(2);if(this.extraFieldsLength=z.readInt(2),this.fileCommentLength=z.readInt(2),this.diskNumberStart=z.readInt(2),this.internalFileAttributes=z.readInt(2),this.externalFileAttributes=z.readInt(4),this.localHeaderOffset=z.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");z.skip(q),this.readExtraFields(z),this.parseZIP64ExtraField(z),this.fileComment=z.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var z=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),z==0&&(this.dosPermissions=63&this.externalFileAttributes),z==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var z=p(this.extraFields[1].value);this.uncompressedSize===_.MAX_VALUE_32BITS&&(this.uncompressedSize=z.readInt(8)),this.compressedSize===_.MAX_VALUE_32BITS&&(this.compressedSize=z.readInt(8)),this.localHeaderOffset===_.MAX_VALUE_32BITS&&(this.localHeaderOffset=z.readInt(8)),this.diskNumberStart===_.MAX_VALUE_32BITS&&(this.diskNumberStart=z.readInt(4))}},readExtraFields:function(z){var q,G,tt,K=z.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});z.index+4<K;)q=z.readInt(2),G=z.readInt(2),tt=z.readData(G),this.extraFields[q]={id:q,length:G,value:tt};z.setIndex(K)},handleUTF8:function(){var z=B.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=S.utf8decode(this.fileName),this.fileCommentStr=S.utf8decode(this.fileComment);else{var q=this.findExtraFieldUnicodePath();if(q!==null)this.fileNameStr=q;else{var G=_.transformTo(z,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(G)}var tt=this.findExtraFieldUnicodeComment();if(tt!==null)this.fileCommentStr=tt;else{var K=_.transformTo(z,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(K)}}},findExtraFieldUnicodePath:function(){var z=this.extraFields[28789];if(z){var q=p(z.value);return q.readInt(1)!==1||x(this.fileName)!==q.readInt(4)?null:S.utf8decode(q.readData(z.length-5))}return null},findExtraFieldUnicodeComment:function(){var z=this.extraFields[25461];if(z){var q=p(z.value);return q.readInt(1)!==1||x(this.fileComment)!==q.readInt(4)?null:S.utf8decode(q.readData(z.length-5))}return null}},m.exports=U},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(d,m,v){function p(q,G,tt){this.name=q,this.dir=tt.dir,this.date=tt.date,this.comment=tt.comment,this.unixPermissions=tt.unixPermissions,this.dosPermissions=tt.dosPermissions,this._data=G,this._dataBinary=tt.binary,this.options={compression:tt.compression,compressionOptions:tt.compressionOptions}}var _=d("./stream/StreamHelper"),y=d("./stream/DataWorker"),x=d("./utf8"),S=d("./compressedObject"),O=d("./stream/GenericWorker");p.prototype={internalStream:function(q){var G=null,tt="string";try{if(!q)throw new Error("No output type specified.");var K=(tt=q.toLowerCase())==="string"||tt==="text";tt!=="binarystring"&&tt!=="text"||(tt="string"),G=this._decompressWorker();var D=!this._dataBinary;D&&!K&&(G=G.pipe(new x.Utf8EncodeWorker)),!D&&K&&(G=G.pipe(new x.Utf8DecodeWorker))}catch(N){(G=new O("error")).error(N)}return new _(G,tt,"")},async:function(q,G){return this.internalStream(q).accumulate(G)},nodeStream:function(q,G){return this.internalStream(q||"nodebuffer").toNodejsStream(G)},_compressWorker:function(q,G){if(this._data instanceof S&&this._data.compression.magic===q.magic)return this._data.getCompressedWorker();var tt=this._decompressWorker();return this._dataBinary||(tt=tt.pipe(new x.Utf8EncodeWorker)),S.createWorkerFrom(tt,q,G)},_decompressWorker:function(){return this._data instanceof S?this._data.getContentWorker():this._data instanceof O?this._data:new y(this._data)}};for(var B=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],U=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},z=0;z<B.length;z++)p.prototype[B[z]]=U;m.exports=p},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(d,m,v){(function(p){var _,y,x=p.MutationObserver||p.WebKitMutationObserver;if(x){var S=0,O=new x(q),B=p.document.createTextNode("");O.observe(B,{characterData:!0}),_=function(){B.data=S=++S%2}}else if(p.setImmediate||p.MessageChannel===void 0)_="document"in p&&"onreadystatechange"in p.document.createElement("script")?function(){var G=p.document.createElement("script");G.onreadystatechange=function(){q(),G.onreadystatechange=null,G.parentNode.removeChild(G),G=null},p.document.documentElement.appendChild(G)}:function(){setTimeout(q,0)};else{var U=new p.MessageChannel;U.port1.onmessage=q,_=function(){U.port2.postMessage(0)}}var z=[];function q(){var G,tt;y=!0;for(var K=z.length;K;){for(tt=z,z=[],G=-1;++G<K;)tt[G]();K=z.length}y=!1}m.exports=function(G){z.push(G)!==1||y||_()}}).call(this,r!==void 0?r:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(d,m,v){var p=d("immediate");function _(){}var y={},x=["REJECTED"],S=["FULFILLED"],O=["PENDING"];function B(K){if(typeof K!="function")throw new TypeError("resolver must be a function");this.state=O,this.queue=[],this.outcome=void 0,K!==_&&G(this,K)}function U(K,D,N){this.promise=K,typeof D=="function"&&(this.onFulfilled=D,this.callFulfilled=this.otherCallFulfilled),typeof N=="function"&&(this.onRejected=N,this.callRejected=this.otherCallRejected)}function z(K,D,N){p(function(){var Z;try{Z=D(N)}catch(w){return y.reject(K,w)}Z===K?y.reject(K,new TypeError("Cannot resolve promise with itself")):y.resolve(K,Z)})}function q(K){var D=K&&K.then;if(K&&(typeof K=="object"||typeof K=="function")&&typeof D=="function")return function(){D.apply(K,arguments)}}function G(K,D){var N=!1;function Z(k){N||(N=!0,y.reject(K,k))}function w(k){N||(N=!0,y.resolve(K,k))}var C=tt(function(){D(w,Z)});C.status==="error"&&Z(C.value)}function tt(K,D){var N={};try{N.value=K(D),N.status="success"}catch(Z){N.status="error",N.value=Z}return N}(m.exports=B).prototype.finally=function(K){if(typeof K!="function")return this;var D=this.constructor;return this.then(function(N){return D.resolve(K()).then(function(){return N})},function(N){return D.resolve(K()).then(function(){throw N})})},B.prototype.catch=function(K){return this.then(null,K)},B.prototype.then=function(K,D){if(typeof K!="function"&&this.state===S||typeof D!="function"&&this.state===x)return this;var N=new this.constructor(_);return this.state!==O?z(N,this.state===S?K:D,this.outcome):this.queue.push(new U(N,K,D)),N},U.prototype.callFulfilled=function(K){y.resolve(this.promise,K)},U.prototype.otherCallFulfilled=function(K){z(this.promise,this.onFulfilled,K)},U.prototype.callRejected=function(K){y.reject(this.promise,K)},U.prototype.otherCallRejected=function(K){z(this.promise,this.onRejected,K)},y.resolve=function(K,D){var N=tt(q,D);if(N.status==="error")return y.reject(K,N.value);var Z=N.value;if(Z)G(K,Z);else{K.state=S,K.outcome=D;for(var w=-1,C=K.queue.length;++w<C;)K.queue[w].callFulfilled(D)}return K},y.reject=function(K,D){K.state=x,K.outcome=D;for(var N=-1,Z=K.queue.length;++N<Z;)K.queue[N].callRejected(D);return K},B.resolve=function(K){return K instanceof this?K:y.resolve(new this(_),K)},B.reject=function(K){var D=new this(_);return y.reject(D,K)},B.all=function(K){var D=this;if(Object.prototype.toString.call(K)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=K.length,Z=!1;if(!N)return this.resolve([]);for(var w=new Array(N),C=0,k=-1,T=new this(_);++k<N;)R(K[k],k);return T;function R(F,H){D.resolve(F).then(function(it){w[H]=it,++C!==N||Z||(Z=!0,y.resolve(T,w))},function(it){Z||(Z=!0,y.reject(T,it))})}},B.race=function(K){if(Object.prototype.toString.call(K)!=="[object Array]")return this.reject(new TypeError("must be an array"));var D=K.length,N=!1;if(!D)return this.resolve([]);for(var Z,w=-1,C=new this(_);++w<D;)Z=K[w],this.resolve(Z).then(function(k){N||(N=!0,y.resolve(C,k))},function(k){N||(N=!0,y.reject(C,k))});return C}},{immediate:36}],38:[function(d,m,v){var p={};(0,d("./lib/utils/common").assign)(p,d("./lib/deflate"),d("./lib/inflate"),d("./lib/zlib/constants")),m.exports=p},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(d,m,v){var p=d("./zlib/deflate"),_=d("./utils/common"),y=d("./utils/strings"),x=d("./zlib/messages"),S=d("./zlib/zstream"),O=Object.prototype.toString;function B(z){if(!(this instanceof B))return new B(z);this.options=_.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},z||{});var q=this.options;q.raw&&0<q.windowBits?q.windowBits=-q.windowBits:q.gzip&&0<q.windowBits&&q.windowBits<16&&(q.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new S,this.strm.avail_out=0;var G=p.deflateInit2(this.strm,q.level,q.method,q.windowBits,q.memLevel,q.strategy);if(G!==0)throw new Error(x[G]);if(q.header&&p.deflateSetHeader(this.strm,q.header),q.dictionary){var tt;if(tt=typeof q.dictionary=="string"?y.string2buf(q.dictionary):O.call(q.dictionary)==="[object ArrayBuffer]"?new Uint8Array(q.dictionary):q.dictionary,(G=p.deflateSetDictionary(this.strm,tt))!==0)throw new Error(x[G]);this._dict_set=!0}}function U(z,q){var G=new B(q);if(G.push(z,!0),G.err)throw G.msg||x[G.err];return G.result}B.prototype.push=function(z,q){var G,tt,K=this.strm,D=this.options.chunkSize;if(this.ended)return!1;tt=q===~~q?q:q===!0?4:0,typeof z=="string"?K.input=y.string2buf(z):O.call(z)==="[object ArrayBuffer]"?K.input=new Uint8Array(z):K.input=z,K.next_in=0,K.avail_in=K.input.length;do{if(K.avail_out===0&&(K.output=new _.Buf8(D),K.next_out=0,K.avail_out=D),(G=p.deflate(K,tt))!==1&&G!==0)return this.onEnd(G),!(this.ended=!0);K.avail_out!==0&&(K.avail_in!==0||tt!==4&&tt!==2)||(this.options.to==="string"?this.onData(y.buf2binstring(_.shrinkBuf(K.output,K.next_out))):this.onData(_.shrinkBuf(K.output,K.next_out)))}while((0<K.avail_in||K.avail_out===0)&&G!==1);return tt===4?(G=p.deflateEnd(this.strm),this.onEnd(G),this.ended=!0,G===0):tt!==2||(this.onEnd(0),!(K.avail_out=0))},B.prototype.onData=function(z){this.chunks.push(z)},B.prototype.onEnd=function(z){z===0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=_.flattenChunks(this.chunks)),this.chunks=[],this.err=z,this.msg=this.strm.msg},v.Deflate=B,v.deflate=U,v.deflateRaw=function(z,q){return(q=q||{}).raw=!0,U(z,q)},v.gzip=function(z,q){return(q=q||{}).gzip=!0,U(z,q)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(d,m,v){var p=d("./zlib/inflate"),_=d("./utils/common"),y=d("./utils/strings"),x=d("./zlib/constants"),S=d("./zlib/messages"),O=d("./zlib/zstream"),B=d("./zlib/gzheader"),U=Object.prototype.toString;function z(G){if(!(this instanceof z))return new z(G);this.options=_.assign({chunkSize:16384,windowBits:0,to:""},G||{});var tt=this.options;tt.raw&&0<=tt.windowBits&&tt.windowBits<16&&(tt.windowBits=-tt.windowBits,tt.windowBits===0&&(tt.windowBits=-15)),!(0<=tt.windowBits&&tt.windowBits<16)||G&&G.windowBits||(tt.windowBits+=32),15<tt.windowBits&&tt.windowBits<48&&!(15&tt.windowBits)&&(tt.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new O,this.strm.avail_out=0;var K=p.inflateInit2(this.strm,tt.windowBits);if(K!==x.Z_OK)throw new Error(S[K]);this.header=new B,p.inflateGetHeader(this.strm,this.header)}function q(G,tt){var K=new z(tt);if(K.push(G,!0),K.err)throw K.msg||S[K.err];return K.result}z.prototype.push=function(G,tt){var K,D,N,Z,w,C,k=this.strm,T=this.options.chunkSize,R=this.options.dictionary,F=!1;if(this.ended)return!1;D=tt===~~tt?tt:tt===!0?x.Z_FINISH:x.Z_NO_FLUSH,typeof G=="string"?k.input=y.binstring2buf(G):U.call(G)==="[object ArrayBuffer]"?k.input=new Uint8Array(G):k.input=G,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new _.Buf8(T),k.next_out=0,k.avail_out=T),(K=p.inflate(k,x.Z_NO_FLUSH))===x.Z_NEED_DICT&&R&&(C=typeof R=="string"?y.string2buf(R):U.call(R)==="[object ArrayBuffer]"?new Uint8Array(R):R,K=p.inflateSetDictionary(this.strm,C)),K===x.Z_BUF_ERROR&&F===!0&&(K=x.Z_OK,F=!1),K!==x.Z_STREAM_END&&K!==x.Z_OK)return this.onEnd(K),!(this.ended=!0);k.next_out&&(k.avail_out!==0&&K!==x.Z_STREAM_END&&(k.avail_in!==0||D!==x.Z_FINISH&&D!==x.Z_SYNC_FLUSH)||(this.options.to==="string"?(N=y.utf8border(k.output,k.next_out),Z=k.next_out-N,w=y.buf2string(k.output,N),k.next_out=Z,k.avail_out=T-Z,Z&&_.arraySet(k.output,k.output,N,Z,0),this.onData(w)):this.onData(_.shrinkBuf(k.output,k.next_out)))),k.avail_in===0&&k.avail_out===0&&(F=!0)}while((0<k.avail_in||k.avail_out===0)&&K!==x.Z_STREAM_END);return K===x.Z_STREAM_END&&(D=x.Z_FINISH),D===x.Z_FINISH?(K=p.inflateEnd(this.strm),this.onEnd(K),this.ended=!0,K===x.Z_OK):D!==x.Z_SYNC_FLUSH||(this.onEnd(x.Z_OK),!(k.avail_out=0))},z.prototype.onData=function(G){this.chunks.push(G)},z.prototype.onEnd=function(G){G===x.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=_.flattenChunks(this.chunks)),this.chunks=[],this.err=G,this.msg=this.strm.msg},v.Inflate=z,v.inflate=q,v.inflateRaw=function(G,tt){return(tt=tt||{}).raw=!0,q(G,tt)},v.ungzip=q},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(d,m,v){var p=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";v.assign=function(x){for(var S=Array.prototype.slice.call(arguments,1);S.length;){var O=S.shift();if(O){if(typeof O!="object")throw new TypeError(O+"must be non-object");for(var B in O)O.hasOwnProperty(B)&&(x[B]=O[B])}}return x},v.shrinkBuf=function(x,S){return x.length===S?x:x.subarray?x.subarray(0,S):(x.length=S,x)};var _={arraySet:function(x,S,O,B,U){if(S.subarray&&x.subarray)x.set(S.subarray(O,O+B),U);else for(var z=0;z<B;z++)x[U+z]=S[O+z]},flattenChunks:function(x){var S,O,B,U,z,q;for(S=B=0,O=x.length;S<O;S++)B+=x[S].length;for(q=new Uint8Array(B),S=U=0,O=x.length;S<O;S++)z=x[S],q.set(z,U),U+=z.length;return q}},y={arraySet:function(x,S,O,B,U){for(var z=0;z<B;z++)x[U+z]=S[O+z]},flattenChunks:function(x){return[].concat.apply([],x)}};v.setTyped=function(x){x?(v.Buf8=Uint8Array,v.Buf16=Uint16Array,v.Buf32=Int32Array,v.assign(v,_)):(v.Buf8=Array,v.Buf16=Array,v.Buf32=Array,v.assign(v,y))},v.setTyped(p)},{}],42:[function(d,m,v){var p=d("./common"),_=!0,y=!0;try{String.fromCharCode.apply(null,[0])}catch{_=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{y=!1}for(var x=new p.Buf8(256),S=0;S<256;S++)x[S]=252<=S?6:248<=S?5:240<=S?4:224<=S?3:192<=S?2:1;function O(B,U){if(U<65537&&(B.subarray&&y||!B.subarray&&_))return String.fromCharCode.apply(null,p.shrinkBuf(B,U));for(var z="",q=0;q<U;q++)z+=String.fromCharCode(B[q]);return z}x[254]=x[254]=1,v.string2buf=function(B){var U,z,q,G,tt,K=B.length,D=0;for(G=0;G<K;G++)(64512&(z=B.charCodeAt(G)))==55296&&G+1<K&&(64512&(q=B.charCodeAt(G+1)))==56320&&(z=65536+(z-55296<<10)+(q-56320),G++),D+=z<128?1:z<2048?2:z<65536?3:4;for(U=new p.Buf8(D),G=tt=0;tt<D;G++)(64512&(z=B.charCodeAt(G)))==55296&&G+1<K&&(64512&(q=B.charCodeAt(G+1)))==56320&&(z=65536+(z-55296<<10)+(q-56320),G++),z<128?U[tt++]=z:(z<2048?U[tt++]=192|z>>>6:(z<65536?U[tt++]=224|z>>>12:(U[tt++]=240|z>>>18,U[tt++]=128|z>>>12&63),U[tt++]=128|z>>>6&63),U[tt++]=128|63&z);return U},v.buf2binstring=function(B){return O(B,B.length)},v.binstring2buf=function(B){for(var U=new p.Buf8(B.length),z=0,q=U.length;z<q;z++)U[z]=B.charCodeAt(z);return U},v.buf2string=function(B,U){var z,q,G,tt,K=U||B.length,D=new Array(2*K);for(z=q=0;z<K;)if((G=B[z++])<128)D[q++]=G;else if(4<(tt=x[G]))D[q++]=65533,z+=tt-1;else{for(G&=tt===2?31:tt===3?15:7;1<tt&&z<K;)G=G<<6|63&B[z++],tt--;1<tt?D[q++]=65533:G<65536?D[q++]=G:(G-=65536,D[q++]=55296|G>>10&1023,D[q++]=56320|1023&G)}return O(D,q)},v.utf8border=function(B,U){var z;for((U=U||B.length)>B.length&&(U=B.length),z=U-1;0<=z&&(192&B[z])==128;)z--;return z<0||z===0?U:z+x[B[z]]>U?z:U}},{"./common":41}],43:[function(d,m,v){m.exports=function(p,_,y,x){for(var S=65535&p|0,O=p>>>16&65535|0,B=0;y!==0;){for(y-=B=2e3<y?2e3:y;O=O+(S=S+_[x++]|0)|0,--B;);S%=65521,O%=65521}return S|O<<16|0}},{}],44:[function(d,m,v){m.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(d,m,v){var p=function(){for(var _,y=[],x=0;x<256;x++){_=x;for(var S=0;S<8;S++)_=1&_?3988292384^_>>>1:_>>>1;y[x]=_}return y}();m.exports=function(_,y,x,S){var O=p,B=S+x;_^=-1;for(var U=S;U<B;U++)_=_>>>8^O[255&(_^y[U])];return-1^_}},{}],46:[function(d,m,v){var p,_=d("../utils/common"),y=d("./trees"),x=d("./adler32"),S=d("./crc32"),O=d("./messages"),B=-2,U=258,z=262,q=113;function G($,ct){return $.msg=O[ct],ct}function tt($){return($<<1)-(4<$?9:0)}function K($){for(var ct=$.length;0<=--ct;)$[ct]=0}function D($){var ct=$.state,W=ct.pending;W>$.avail_out&&(W=$.avail_out),W!==0&&(_.arraySet($.output,ct.pending_buf,ct.pending_out,W,$.next_out),$.next_out+=W,ct.pending_out+=W,$.total_out+=W,$.avail_out-=W,ct.pending-=W,ct.pending===0&&(ct.pending_out=0))}function N($,ct){y._tr_flush_block($,0<=$.block_start?$.block_start:-1,$.strstart-$.block_start,ct),$.block_start=$.strstart,D($.strm)}function Z($,ct){$.pending_buf[$.pending++]=ct}function w($,ct){$.pending_buf[$.pending++]=ct>>>8&255,$.pending_buf[$.pending++]=255&ct}function C($,ct){var W,V,rt=$.max_chain_length,mt=$.strstart,wt=$.prev_length,_t=$.nice_match,Ct=$.strstart>$.w_size-z?$.strstart-($.w_size-z):0,Ft=$.window,It=$.w_mask,vt=$.prev,kt=$.strstart+U,gt=Ft[mt+wt-1],ut=Ft[mt+wt];$.prev_length>=$.good_match&&(rt>>=2),_t>$.lookahead&&(_t=$.lookahead);do if(Ft[(W=ct)+wt]===ut&&Ft[W+wt-1]===gt&&Ft[W]===Ft[mt]&&Ft[++W]===Ft[mt+1]){mt+=2,W++;do;while(Ft[++mt]===Ft[++W]&&Ft[++mt]===Ft[++W]&&Ft[++mt]===Ft[++W]&&Ft[++mt]===Ft[++W]&&Ft[++mt]===Ft[++W]&&Ft[++mt]===Ft[++W]&&Ft[++mt]===Ft[++W]&&Ft[++mt]===Ft[++W]&&mt<kt);if(V=U-(kt-mt),mt=kt-U,wt<V){if($.match_start=ct,_t<=(wt=V))break;gt=Ft[mt+wt-1],ut=Ft[mt+wt]}}while((ct=vt[ct&It])>Ct&&--rt!=0);return wt<=$.lookahead?wt:$.lookahead}function k($){var ct,W,V,rt,mt,wt,_t,Ct,Ft,It,vt=$.w_size;do{if(rt=$.window_size-$.lookahead-$.strstart,$.strstart>=vt+(vt-z)){for(_.arraySet($.window,$.window,vt,vt,0),$.match_start-=vt,$.strstart-=vt,$.block_start-=vt,ct=W=$.hash_size;V=$.head[--ct],$.head[ct]=vt<=V?V-vt:0,--W;);for(ct=W=vt;V=$.prev[--ct],$.prev[ct]=vt<=V?V-vt:0,--W;);rt+=vt}if($.strm.avail_in===0)break;if(wt=$.strm,_t=$.window,Ct=$.strstart+$.lookahead,It=void 0,(Ft=rt)<(It=wt.avail_in)&&(It=Ft),W=It===0?0:(wt.avail_in-=It,_.arraySet(_t,wt.input,wt.next_in,It,Ct),wt.state.wrap===1?wt.adler=x(wt.adler,_t,It,Ct):wt.state.wrap===2&&(wt.adler=S(wt.adler,_t,It,Ct)),wt.next_in+=It,wt.total_in+=It,It),$.lookahead+=W,$.lookahead+$.insert>=3)for(mt=$.strstart-$.insert,$.ins_h=$.window[mt],$.ins_h=($.ins_h<<$.hash_shift^$.window[mt+1])&$.hash_mask;$.insert&&($.ins_h=($.ins_h<<$.hash_shift^$.window[mt+3-1])&$.hash_mask,$.prev[mt&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=mt,mt++,$.insert--,!($.lookahead+$.insert<3)););}while($.lookahead<z&&$.strm.avail_in!==0)}function T($,ct){for(var W,V;;){if($.lookahead<z){if(k($),$.lookahead<z&&ct===0)return 1;if($.lookahead===0)break}if(W=0,$.lookahead>=3&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+3-1])&$.hash_mask,W=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),W!==0&&$.strstart-W<=$.w_size-z&&($.match_length=C($,W)),$.match_length>=3)if(V=y._tr_tally($,$.strstart-$.match_start,$.match_length-3),$.lookahead-=$.match_length,$.match_length<=$.max_lazy_match&&$.lookahead>=3){for($.match_length--;$.strstart++,$.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+3-1])&$.hash_mask,W=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart,--$.match_length!=0;);$.strstart++}else $.strstart+=$.match_length,$.match_length=0,$.ins_h=$.window[$.strstart],$.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+1])&$.hash_mask;else V=y._tr_tally($,0,$.window[$.strstart]),$.lookahead--,$.strstart++;if(V&&(N($,!1),$.strm.avail_out===0))return 1}return $.insert=$.strstart<2?$.strstart:2,ct===4?(N($,!0),$.strm.avail_out===0?3:4):$.last_lit&&(N($,!1),$.strm.avail_out===0)?1:2}function R($,ct){for(var W,V,rt;;){if($.lookahead<z){if(k($),$.lookahead<z&&ct===0)return 1;if($.lookahead===0)break}if(W=0,$.lookahead>=3&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+3-1])&$.hash_mask,W=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),$.prev_length=$.match_length,$.prev_match=$.match_start,$.match_length=2,W!==0&&$.prev_length<$.max_lazy_match&&$.strstart-W<=$.w_size-z&&($.match_length=C($,W),$.match_length<=5&&($.strategy===1||$.match_length===3&&4096<$.strstart-$.match_start)&&($.match_length=2)),$.prev_length>=3&&$.match_length<=$.prev_length){for(rt=$.strstart+$.lookahead-3,V=y._tr_tally($,$.strstart-1-$.prev_match,$.prev_length-3),$.lookahead-=$.prev_length-1,$.prev_length-=2;++$.strstart<=rt&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+3-1])&$.hash_mask,W=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),--$.prev_length!=0;);if($.match_available=0,$.match_length=2,$.strstart++,V&&(N($,!1),$.strm.avail_out===0))return 1}else if($.match_available){if((V=y._tr_tally($,0,$.window[$.strstart-1]))&&N($,!1),$.strstart++,$.lookahead--,$.strm.avail_out===0)return 1}else $.match_available=1,$.strstart++,$.lookahead--}return $.match_available&&(V=y._tr_tally($,0,$.window[$.strstart-1]),$.match_available=0),$.insert=$.strstart<2?$.strstart:2,ct===4?(N($,!0),$.strm.avail_out===0?3:4):$.last_lit&&(N($,!1),$.strm.avail_out===0)?1:2}function F($,ct,W,V,rt){this.good_length=$,this.max_lazy=ct,this.nice_length=W,this.max_chain=V,this.func=rt}function H(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new _.Buf16(1146),this.dyn_dtree=new _.Buf16(122),this.bl_tree=new _.Buf16(78),K(this.dyn_ltree),K(this.dyn_dtree),K(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new _.Buf16(16),this.heap=new _.Buf16(573),K(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new _.Buf16(573),K(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function it($){var ct;return $&&$.state?($.total_in=$.total_out=0,$.data_type=2,(ct=$.state).pending=0,ct.pending_out=0,ct.wrap<0&&(ct.wrap=-ct.wrap),ct.status=ct.wrap?42:q,$.adler=ct.wrap===2?0:1,ct.last_flush=0,y._tr_init(ct),0):G($,B)}function ot($){var ct=it($);return ct===0&&function(W){W.window_size=2*W.w_size,K(W.head),W.max_lazy_match=p[W.level].max_lazy,W.good_match=p[W.level].good_length,W.nice_match=p[W.level].nice_length,W.max_chain_length=p[W.level].max_chain,W.strstart=0,W.block_start=0,W.lookahead=0,W.insert=0,W.match_length=W.prev_length=2,W.match_available=0,W.ins_h=0}($.state),ct}function dt($,ct,W,V,rt,mt){if(!$)return B;var wt=1;if(ct===-1&&(ct=6),V<0?(wt=0,V=-V):15<V&&(wt=2,V-=16),rt<1||9<rt||W!==8||V<8||15<V||ct<0||9<ct||mt<0||4<mt)return G($,B);V===8&&(V=9);var _t=new H;return($.state=_t).strm=$,_t.wrap=wt,_t.gzhead=null,_t.w_bits=V,_t.w_size=1<<_t.w_bits,_t.w_mask=_t.w_size-1,_t.hash_bits=rt+7,_t.hash_size=1<<_t.hash_bits,_t.hash_mask=_t.hash_size-1,_t.hash_shift=~~((_t.hash_bits+3-1)/3),_t.window=new _.Buf8(2*_t.w_size),_t.head=new _.Buf16(_t.hash_size),_t.prev=new _.Buf16(_t.w_size),_t.lit_bufsize=1<<rt+6,_t.pending_buf_size=4*_t.lit_bufsize,_t.pending_buf=new _.Buf8(_t.pending_buf_size),_t.d_buf=1*_t.lit_bufsize,_t.l_buf=3*_t.lit_bufsize,_t.level=ct,_t.strategy=mt,_t.method=W,ot($)}p=[new F(0,0,0,0,function($,ct){var W=65535;for(W>$.pending_buf_size-5&&(W=$.pending_buf_size-5);;){if($.lookahead<=1){if(k($),$.lookahead===0&&ct===0)return 1;if($.lookahead===0)break}$.strstart+=$.lookahead,$.lookahead=0;var V=$.block_start+W;if(($.strstart===0||$.strstart>=V)&&($.lookahead=$.strstart-V,$.strstart=V,N($,!1),$.strm.avail_out===0)||$.strstart-$.block_start>=$.w_size-z&&(N($,!1),$.strm.avail_out===0))return 1}return $.insert=0,ct===4?(N($,!0),$.strm.avail_out===0?3:4):($.strstart>$.block_start&&(N($,!1),$.strm.avail_out),1)}),new F(4,4,8,4,T),new F(4,5,16,8,T),new F(4,6,32,32,T),new F(4,4,16,16,R),new F(8,16,32,32,R),new F(8,16,128,128,R),new F(8,32,128,256,R),new F(32,128,258,1024,R),new F(32,258,258,4096,R)],v.deflateInit=function($,ct){return dt($,ct,8,15,8,0)},v.deflateInit2=dt,v.deflateReset=ot,v.deflateResetKeep=it,v.deflateSetHeader=function($,ct){return $&&$.state?$.state.wrap!==2?B:($.state.gzhead=ct,0):B},v.deflate=function($,ct){var W,V,rt,mt;if(!$||!$.state||5<ct||ct<0)return $?G($,B):B;if(V=$.state,!$.output||!$.input&&$.avail_in!==0||V.status===666&&ct!==4)return G($,$.avail_out===0?-5:B);if(V.strm=$,W=V.last_flush,V.last_flush=ct,V.status===42)if(V.wrap===2)$.adler=0,Z(V,31),Z(V,139),Z(V,8),V.gzhead?(Z(V,(V.gzhead.text?1:0)+(V.gzhead.hcrc?2:0)+(V.gzhead.extra?4:0)+(V.gzhead.name?8:0)+(V.gzhead.comment?16:0)),Z(V,255&V.gzhead.time),Z(V,V.gzhead.time>>8&255),Z(V,V.gzhead.time>>16&255),Z(V,V.gzhead.time>>24&255),Z(V,V.level===9?2:2<=V.strategy||V.level<2?4:0),Z(V,255&V.gzhead.os),V.gzhead.extra&&V.gzhead.extra.length&&(Z(V,255&V.gzhead.extra.length),Z(V,V.gzhead.extra.length>>8&255)),V.gzhead.hcrc&&($.adler=S($.adler,V.pending_buf,V.pending,0)),V.gzindex=0,V.status=69):(Z(V,0),Z(V,0),Z(V,0),Z(V,0),Z(V,0),Z(V,V.level===9?2:2<=V.strategy||V.level<2?4:0),Z(V,3),V.status=q);else{var wt=8+(V.w_bits-8<<4)<<8;wt|=(2<=V.strategy||V.level<2?0:V.level<6?1:V.level===6?2:3)<<6,V.strstart!==0&&(wt|=32),wt+=31-wt%31,V.status=q,w(V,wt),V.strstart!==0&&(w(V,$.adler>>>16),w(V,65535&$.adler)),$.adler=1}if(V.status===69)if(V.gzhead.extra){for(rt=V.pending;V.gzindex<(65535&V.gzhead.extra.length)&&(V.pending!==V.pending_buf_size||(V.gzhead.hcrc&&V.pending>rt&&($.adler=S($.adler,V.pending_buf,V.pending-rt,rt)),D($),rt=V.pending,V.pending!==V.pending_buf_size));)Z(V,255&V.gzhead.extra[V.gzindex]),V.gzindex++;V.gzhead.hcrc&&V.pending>rt&&($.adler=S($.adler,V.pending_buf,V.pending-rt,rt)),V.gzindex===V.gzhead.extra.length&&(V.gzindex=0,V.status=73)}else V.status=73;if(V.status===73)if(V.gzhead.name){rt=V.pending;do{if(V.pending===V.pending_buf_size&&(V.gzhead.hcrc&&V.pending>rt&&($.adler=S($.adler,V.pending_buf,V.pending-rt,rt)),D($),rt=V.pending,V.pending===V.pending_buf_size)){mt=1;break}mt=V.gzindex<V.gzhead.name.length?255&V.gzhead.name.charCodeAt(V.gzindex++):0,Z(V,mt)}while(mt!==0);V.gzhead.hcrc&&V.pending>rt&&($.adler=S($.adler,V.pending_buf,V.pending-rt,rt)),mt===0&&(V.gzindex=0,V.status=91)}else V.status=91;if(V.status===91)if(V.gzhead.comment){rt=V.pending;do{if(V.pending===V.pending_buf_size&&(V.gzhead.hcrc&&V.pending>rt&&($.adler=S($.adler,V.pending_buf,V.pending-rt,rt)),D($),rt=V.pending,V.pending===V.pending_buf_size)){mt=1;break}mt=V.gzindex<V.gzhead.comment.length?255&V.gzhead.comment.charCodeAt(V.gzindex++):0,Z(V,mt)}while(mt!==0);V.gzhead.hcrc&&V.pending>rt&&($.adler=S($.adler,V.pending_buf,V.pending-rt,rt)),mt===0&&(V.status=103)}else V.status=103;if(V.status===103&&(V.gzhead.hcrc?(V.pending+2>V.pending_buf_size&&D($),V.pending+2<=V.pending_buf_size&&(Z(V,255&$.adler),Z(V,$.adler>>8&255),$.adler=0,V.status=q)):V.status=q),V.pending!==0){if(D($),$.avail_out===0)return V.last_flush=-1,0}else if($.avail_in===0&&tt(ct)<=tt(W)&&ct!==4)return G($,-5);if(V.status===666&&$.avail_in!==0)return G($,-5);if($.avail_in!==0||V.lookahead!==0||ct!==0&&V.status!==666){var _t=V.strategy===2?function(Ct,Ft){for(var It;;){if(Ct.lookahead===0&&(k(Ct),Ct.lookahead===0)){if(Ft===0)return 1;break}if(Ct.match_length=0,It=y._tr_tally(Ct,0,Ct.window[Ct.strstart]),Ct.lookahead--,Ct.strstart++,It&&(N(Ct,!1),Ct.strm.avail_out===0))return 1}return Ct.insert=0,Ft===4?(N(Ct,!0),Ct.strm.avail_out===0?3:4):Ct.last_lit&&(N(Ct,!1),Ct.strm.avail_out===0)?1:2}(V,ct):V.strategy===3?function(Ct,Ft){for(var It,vt,kt,gt,ut=Ct.window;;){if(Ct.lookahead<=U){if(k(Ct),Ct.lookahead<=U&&Ft===0)return 1;if(Ct.lookahead===0)break}if(Ct.match_length=0,Ct.lookahead>=3&&0<Ct.strstart&&(vt=ut[kt=Ct.strstart-1])===ut[++kt]&&vt===ut[++kt]&&vt===ut[++kt]){gt=Ct.strstart+U;do;while(vt===ut[++kt]&&vt===ut[++kt]&&vt===ut[++kt]&&vt===ut[++kt]&&vt===ut[++kt]&&vt===ut[++kt]&&vt===ut[++kt]&&vt===ut[++kt]&&kt<gt);Ct.match_length=U-(gt-kt),Ct.match_length>Ct.lookahead&&(Ct.match_length=Ct.lookahead)}if(Ct.match_length>=3?(It=y._tr_tally(Ct,1,Ct.match_length-3),Ct.lookahead-=Ct.match_length,Ct.strstart+=Ct.match_length,Ct.match_length=0):(It=y._tr_tally(Ct,0,Ct.window[Ct.strstart]),Ct.lookahead--,Ct.strstart++),It&&(N(Ct,!1),Ct.strm.avail_out===0))return 1}return Ct.insert=0,Ft===4?(N(Ct,!0),Ct.strm.avail_out===0?3:4):Ct.last_lit&&(N(Ct,!1),Ct.strm.avail_out===0)?1:2}(V,ct):p[V.level].func(V,ct);if(_t!==3&&_t!==4||(V.status=666),_t===1||_t===3)return $.avail_out===0&&(V.last_flush=-1),0;if(_t===2&&(ct===1?y._tr_align(V):ct!==5&&(y._tr_stored_block(V,0,0,!1),ct===3&&(K(V.head),V.lookahead===0&&(V.strstart=0,V.block_start=0,V.insert=0))),D($),$.avail_out===0))return V.last_flush=-1,0}return ct!==4?0:V.wrap<=0?1:(V.wrap===2?(Z(V,255&$.adler),Z(V,$.adler>>8&255),Z(V,$.adler>>16&255),Z(V,$.adler>>24&255),Z(V,255&$.total_in),Z(V,$.total_in>>8&255),Z(V,$.total_in>>16&255),Z(V,$.total_in>>24&255)):(w(V,$.adler>>>16),w(V,65535&$.adler)),D($),0<V.wrap&&(V.wrap=-V.wrap),V.pending!==0?0:1)},v.deflateEnd=function($){var ct;return $&&$.state?(ct=$.state.status)!==42&&ct!==69&&ct!==73&&ct!==91&&ct!==103&&ct!==q&&ct!==666?G($,B):($.state=null,ct===q?G($,-3):0):B},v.deflateSetDictionary=function($,ct){var W,V,rt,mt,wt,_t,Ct,Ft,It=ct.length;if(!$||!$.state||(mt=(W=$.state).wrap)===2||mt===1&&W.status!==42||W.lookahead)return B;for(mt===1&&($.adler=x($.adler,ct,It,0)),W.wrap=0,It>=W.w_size&&(mt===0&&(K(W.head),W.strstart=0,W.block_start=0,W.insert=0),Ft=new _.Buf8(W.w_size),_.arraySet(Ft,ct,It-W.w_size,W.w_size,0),ct=Ft,It=W.w_size),wt=$.avail_in,_t=$.next_in,Ct=$.input,$.avail_in=It,$.next_in=0,$.input=ct,k(W);W.lookahead>=3;){for(V=W.strstart,rt=W.lookahead-2;W.ins_h=(W.ins_h<<W.hash_shift^W.window[V+3-1])&W.hash_mask,W.prev[V&W.w_mask]=W.head[W.ins_h],W.head[W.ins_h]=V,V++,--rt;);W.strstart=V,W.lookahead=2,k(W)}return W.strstart+=W.lookahead,W.block_start=W.strstart,W.insert=W.lookahead,W.lookahead=0,W.match_length=W.prev_length=2,W.match_available=0,$.next_in=_t,$.input=Ct,$.avail_in=wt,W.wrap=mt,0},v.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(d,m,v){m.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(d,m,v){m.exports=function(p,_){var y,x,S,O,B,U,z,q,G,tt,K,D,N,Z,w,C,k,T,R,F,H,it,ot,dt,$;y=p.state,x=p.next_in,dt=p.input,S=x+(p.avail_in-5),O=p.next_out,$=p.output,B=O-(_-p.avail_out),U=O+(p.avail_out-257),z=y.dmax,q=y.wsize,G=y.whave,tt=y.wnext,K=y.window,D=y.hold,N=y.bits,Z=y.lencode,w=y.distcode,C=(1<<y.lenbits)-1,k=(1<<y.distbits)-1;t:do{N<15&&(D+=dt[x++]<<N,N+=8,D+=dt[x++]<<N,N+=8),T=Z[D&C];e:for(;;){if(D>>>=R=T>>>24,N-=R,(R=T>>>16&255)==0)$[O++]=65535&T;else{if(!(16&R)){if(!(64&R)){T=Z[(65535&T)+(D&(1<<R)-1)];continue e}if(32&R){y.mode=12;break t}p.msg="invalid literal/length code",y.mode=30;break t}F=65535&T,(R&=15)&&(N<R&&(D+=dt[x++]<<N,N+=8),F+=D&(1<<R)-1,D>>>=R,N-=R),N<15&&(D+=dt[x++]<<N,N+=8,D+=dt[x++]<<N,N+=8),T=w[D&k];i:for(;;){if(D>>>=R=T>>>24,N-=R,!(16&(R=T>>>16&255))){if(!(64&R)){T=w[(65535&T)+(D&(1<<R)-1)];continue i}p.msg="invalid distance code",y.mode=30;break t}if(H=65535&T,N<(R&=15)&&(D+=dt[x++]<<N,(N+=8)<R&&(D+=dt[x++]<<N,N+=8)),z<(H+=D&(1<<R)-1)){p.msg="invalid distance too far back",y.mode=30;break t}if(D>>>=R,N-=R,(R=O-B)<H){if(G<(R=H-R)&&y.sane){p.msg="invalid distance too far back",y.mode=30;break t}if(ot=K,(it=0)===tt){if(it+=q-R,R<F){for(F-=R;$[O++]=K[it++],--R;);it=O-H,ot=$}}else if(tt<R){if(it+=q+tt-R,(R-=tt)<F){for(F-=R;$[O++]=K[it++],--R;);if(it=0,tt<F){for(F-=R=tt;$[O++]=K[it++],--R;);it=O-H,ot=$}}}else if(it+=tt-R,R<F){for(F-=R;$[O++]=K[it++],--R;);it=O-H,ot=$}for(;2<F;)$[O++]=ot[it++],$[O++]=ot[it++],$[O++]=ot[it++],F-=3;F&&($[O++]=ot[it++],1<F&&($[O++]=ot[it++]))}else{for(it=O-H;$[O++]=$[it++],$[O++]=$[it++],$[O++]=$[it++],2<(F-=3););F&&($[O++]=$[it++],1<F&&($[O++]=$[it++]))}break}}break}}while(x<S&&O<U);x-=F=N>>3,D&=(1<<(N-=F<<3))-1,p.next_in=x,p.next_out=O,p.avail_in=x<S?S-x+5:5-(x-S),p.avail_out=O<U?U-O+257:257-(O-U),y.hold=D,y.bits=N}},{}],49:[function(d,m,v){var p=d("../utils/common"),_=d("./adler32"),y=d("./crc32"),x=d("./inffast"),S=d("./inftrees"),O=-2;function B(C){return(C>>>24&255)+(C>>>8&65280)+((65280&C)<<8)+((255&C)<<24)}function U(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new p.Buf16(320),this.work=new p.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function z(C){var k;return C&&C.state?(k=C.state,C.total_in=C.total_out=k.total=0,C.msg="",k.wrap&&(C.adler=1&k.wrap),k.mode=1,k.last=0,k.havedict=0,k.dmax=32768,k.head=null,k.hold=0,k.bits=0,k.lencode=k.lendyn=new p.Buf32(852),k.distcode=k.distdyn=new p.Buf32(592),k.sane=1,k.back=-1,0):O}function q(C){var k;return C&&C.state?((k=C.state).wsize=0,k.whave=0,k.wnext=0,z(C)):O}function G(C,k){var T,R;return C&&C.state?(R=C.state,k<0?(T=0,k=-k):(T=1+(k>>4),k<48&&(k&=15)),k&&(k<8||15<k)?O:(R.window!==null&&R.wbits!==k&&(R.window=null),R.wrap=T,R.wbits=k,q(C))):O}function tt(C,k){var T,R;return C?(R=new U,(C.state=R).window=null,(T=G(C,k))!==0&&(C.state=null),T):O}var K,D,N=!0;function Z(C){if(N){var k;for(K=new p.Buf32(512),D=new p.Buf32(32),k=0;k<144;)C.lens[k++]=8;for(;k<256;)C.lens[k++]=9;for(;k<280;)C.lens[k++]=7;for(;k<288;)C.lens[k++]=8;for(S(1,C.lens,0,288,K,0,C.work,{bits:9}),k=0;k<32;)C.lens[k++]=5;S(2,C.lens,0,32,D,0,C.work,{bits:5}),N=!1}C.lencode=K,C.lenbits=9,C.distcode=D,C.distbits=5}function w(C,k,T,R){var F,H=C.state;return H.window===null&&(H.wsize=1<<H.wbits,H.wnext=0,H.whave=0,H.window=new p.Buf8(H.wsize)),R>=H.wsize?(p.arraySet(H.window,k,T-H.wsize,H.wsize,0),H.wnext=0,H.whave=H.wsize):(R<(F=H.wsize-H.wnext)&&(F=R),p.arraySet(H.window,k,T-R,F,H.wnext),(R-=F)?(p.arraySet(H.window,k,T-R,R,0),H.wnext=R,H.whave=H.wsize):(H.wnext+=F,H.wnext===H.wsize&&(H.wnext=0),H.whave<H.wsize&&(H.whave+=F))),0}v.inflateReset=q,v.inflateReset2=G,v.inflateResetKeep=z,v.inflateInit=function(C){return tt(C,15)},v.inflateInit2=tt,v.inflate=function(C,k){var T,R,F,H,it,ot,dt,$,ct,W,V,rt,mt,wt,_t,Ct,Ft,It,vt,kt,gt,ut,Q,Y,et=0,lt=new p.Buf8(4),pt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!C||!C.state||!C.output||!C.input&&C.avail_in!==0)return O;(T=C.state).mode===12&&(T.mode=13),it=C.next_out,F=C.output,dt=C.avail_out,H=C.next_in,R=C.input,ot=C.avail_in,$=T.hold,ct=T.bits,W=ot,V=dt,ut=0;t:for(;;)switch(T.mode){case 1:if(T.wrap===0){T.mode=13;break}for(;ct<16;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}if(2&T.wrap&&$===35615){lt[T.check=0]=255&$,lt[1]=$>>>8&255,T.check=y(T.check,lt,2,0),ct=$=0,T.mode=2;break}if(T.flags=0,T.head&&(T.head.done=!1),!(1&T.wrap)||(((255&$)<<8)+($>>8))%31){C.msg="incorrect header check",T.mode=30;break}if((15&$)!=8){C.msg="unknown compression method",T.mode=30;break}if(ct-=4,gt=8+(15&($>>>=4)),T.wbits===0)T.wbits=gt;else if(gt>T.wbits){C.msg="invalid window size",T.mode=30;break}T.dmax=1<<gt,C.adler=T.check=1,T.mode=512&$?10:12,ct=$=0;break;case 2:for(;ct<16;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}if(T.flags=$,(255&T.flags)!=8){C.msg="unknown compression method",T.mode=30;break}if(57344&T.flags){C.msg="unknown header flags set",T.mode=30;break}T.head&&(T.head.text=$>>8&1),512&T.flags&&(lt[0]=255&$,lt[1]=$>>>8&255,T.check=y(T.check,lt,2,0)),ct=$=0,T.mode=3;case 3:for(;ct<32;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}T.head&&(T.head.time=$),512&T.flags&&(lt[0]=255&$,lt[1]=$>>>8&255,lt[2]=$>>>16&255,lt[3]=$>>>24&255,T.check=y(T.check,lt,4,0)),ct=$=0,T.mode=4;case 4:for(;ct<16;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}T.head&&(T.head.xflags=255&$,T.head.os=$>>8),512&T.flags&&(lt[0]=255&$,lt[1]=$>>>8&255,T.check=y(T.check,lt,2,0)),ct=$=0,T.mode=5;case 5:if(1024&T.flags){for(;ct<16;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}T.length=$,T.head&&(T.head.extra_len=$),512&T.flags&&(lt[0]=255&$,lt[1]=$>>>8&255,T.check=y(T.check,lt,2,0)),ct=$=0}else T.head&&(T.head.extra=null);T.mode=6;case 6:if(1024&T.flags&&(ot<(rt=T.length)&&(rt=ot),rt&&(T.head&&(gt=T.head.extra_len-T.length,T.head.extra||(T.head.extra=new Array(T.head.extra_len)),p.arraySet(T.head.extra,R,H,rt,gt)),512&T.flags&&(T.check=y(T.check,R,rt,H)),ot-=rt,H+=rt,T.length-=rt),T.length))break t;T.length=0,T.mode=7;case 7:if(2048&T.flags){if(ot===0)break t;for(rt=0;gt=R[H+rt++],T.head&&gt&&T.length<65536&&(T.head.name+=String.fromCharCode(gt)),gt&&rt<ot;);if(512&T.flags&&(T.check=y(T.check,R,rt,H)),ot-=rt,H+=rt,gt)break t}else T.head&&(T.head.name=null);T.length=0,T.mode=8;case 8:if(4096&T.flags){if(ot===0)break t;for(rt=0;gt=R[H+rt++],T.head&&gt&&T.length<65536&&(T.head.comment+=String.fromCharCode(gt)),gt&&rt<ot;);if(512&T.flags&&(T.check=y(T.check,R,rt,H)),ot-=rt,H+=rt,gt)break t}else T.head&&(T.head.comment=null);T.mode=9;case 9:if(512&T.flags){for(;ct<16;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}if($!==(65535&T.check)){C.msg="header crc mismatch",T.mode=30;break}ct=$=0}T.head&&(T.head.hcrc=T.flags>>9&1,T.head.done=!0),C.adler=T.check=0,T.mode=12;break;case 10:for(;ct<32;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}C.adler=T.check=B($),ct=$=0,T.mode=11;case 11:if(T.havedict===0)return C.next_out=it,C.avail_out=dt,C.next_in=H,C.avail_in=ot,T.hold=$,T.bits=ct,2;C.adler=T.check=1,T.mode=12;case 12:if(k===5||k===6)break t;case 13:if(T.last){$>>>=7&ct,ct-=7&ct,T.mode=27;break}for(;ct<3;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}switch(T.last=1&$,ct-=1,3&($>>>=1)){case 0:T.mode=14;break;case 1:if(Z(T),T.mode=20,k!==6)break;$>>>=2,ct-=2;break t;case 2:T.mode=17;break;case 3:C.msg="invalid block type",T.mode=30}$>>>=2,ct-=2;break;case 14:for($>>>=7&ct,ct-=7&ct;ct<32;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}if((65535&$)!=($>>>16^65535)){C.msg="invalid stored block lengths",T.mode=30;break}if(T.length=65535&$,ct=$=0,T.mode=15,k===6)break t;case 15:T.mode=16;case 16:if(rt=T.length){if(ot<rt&&(rt=ot),dt<rt&&(rt=dt),rt===0)break t;p.arraySet(F,R,H,rt,it),ot-=rt,H+=rt,dt-=rt,it+=rt,T.length-=rt;break}T.mode=12;break;case 17:for(;ct<14;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}if(T.nlen=257+(31&$),$>>>=5,ct-=5,T.ndist=1+(31&$),$>>>=5,ct-=5,T.ncode=4+(15&$),$>>>=4,ct-=4,286<T.nlen||30<T.ndist){C.msg="too many length or distance symbols",T.mode=30;break}T.have=0,T.mode=18;case 18:for(;T.have<T.ncode;){for(;ct<3;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}T.lens[pt[T.have++]]=7&$,$>>>=3,ct-=3}for(;T.have<19;)T.lens[pt[T.have++]]=0;if(T.lencode=T.lendyn,T.lenbits=7,Q={bits:T.lenbits},ut=S(0,T.lens,0,19,T.lencode,0,T.work,Q),T.lenbits=Q.bits,ut){C.msg="invalid code lengths set",T.mode=30;break}T.have=0,T.mode=19;case 19:for(;T.have<T.nlen+T.ndist;){for(;Ct=(et=T.lencode[$&(1<<T.lenbits)-1])>>>16&255,Ft=65535&et,!((_t=et>>>24)<=ct);){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}if(Ft<16)$>>>=_t,ct-=_t,T.lens[T.have++]=Ft;else{if(Ft===16){for(Y=_t+2;ct<Y;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}if($>>>=_t,ct-=_t,T.have===0){C.msg="invalid bit length repeat",T.mode=30;break}gt=T.lens[T.have-1],rt=3+(3&$),$>>>=2,ct-=2}else if(Ft===17){for(Y=_t+3;ct<Y;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}ct-=_t,gt=0,rt=3+(7&($>>>=_t)),$>>>=3,ct-=3}else{for(Y=_t+7;ct<Y;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}ct-=_t,gt=0,rt=11+(127&($>>>=_t)),$>>>=7,ct-=7}if(T.have+rt>T.nlen+T.ndist){C.msg="invalid bit length repeat",T.mode=30;break}for(;rt--;)T.lens[T.have++]=gt}}if(T.mode===30)break;if(T.lens[256]===0){C.msg="invalid code -- missing end-of-block",T.mode=30;break}if(T.lenbits=9,Q={bits:T.lenbits},ut=S(1,T.lens,0,T.nlen,T.lencode,0,T.work,Q),T.lenbits=Q.bits,ut){C.msg="invalid literal/lengths set",T.mode=30;break}if(T.distbits=6,T.distcode=T.distdyn,Q={bits:T.distbits},ut=S(2,T.lens,T.nlen,T.ndist,T.distcode,0,T.work,Q),T.distbits=Q.bits,ut){C.msg="invalid distances set",T.mode=30;break}if(T.mode=20,k===6)break t;case 20:T.mode=21;case 21:if(6<=ot&&258<=dt){C.next_out=it,C.avail_out=dt,C.next_in=H,C.avail_in=ot,T.hold=$,T.bits=ct,x(C,V),it=C.next_out,F=C.output,dt=C.avail_out,H=C.next_in,R=C.input,ot=C.avail_in,$=T.hold,ct=T.bits,T.mode===12&&(T.back=-1);break}for(T.back=0;Ct=(et=T.lencode[$&(1<<T.lenbits)-1])>>>16&255,Ft=65535&et,!((_t=et>>>24)<=ct);){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}if(Ct&&!(240&Ct)){for(It=_t,vt=Ct,kt=Ft;Ct=(et=T.lencode[kt+(($&(1<<It+vt)-1)>>It)])>>>16&255,Ft=65535&et,!(It+(_t=et>>>24)<=ct);){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}$>>>=It,ct-=It,T.back+=It}if($>>>=_t,ct-=_t,T.back+=_t,T.length=Ft,Ct===0){T.mode=26;break}if(32&Ct){T.back=-1,T.mode=12;break}if(64&Ct){C.msg="invalid literal/length code",T.mode=30;break}T.extra=15&Ct,T.mode=22;case 22:if(T.extra){for(Y=T.extra;ct<Y;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}T.length+=$&(1<<T.extra)-1,$>>>=T.extra,ct-=T.extra,T.back+=T.extra}T.was=T.length,T.mode=23;case 23:for(;Ct=(et=T.distcode[$&(1<<T.distbits)-1])>>>16&255,Ft=65535&et,!((_t=et>>>24)<=ct);){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}if(!(240&Ct)){for(It=_t,vt=Ct,kt=Ft;Ct=(et=T.distcode[kt+(($&(1<<It+vt)-1)>>It)])>>>16&255,Ft=65535&et,!(It+(_t=et>>>24)<=ct);){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}$>>>=It,ct-=It,T.back+=It}if($>>>=_t,ct-=_t,T.back+=_t,64&Ct){C.msg="invalid distance code",T.mode=30;break}T.offset=Ft,T.extra=15&Ct,T.mode=24;case 24:if(T.extra){for(Y=T.extra;ct<Y;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}T.offset+=$&(1<<T.extra)-1,$>>>=T.extra,ct-=T.extra,T.back+=T.extra}if(T.offset>T.dmax){C.msg="invalid distance too far back",T.mode=30;break}T.mode=25;case 25:if(dt===0)break t;if(rt=V-dt,T.offset>rt){if((rt=T.offset-rt)>T.whave&&T.sane){C.msg="invalid distance too far back",T.mode=30;break}mt=rt>T.wnext?(rt-=T.wnext,T.wsize-rt):T.wnext-rt,rt>T.length&&(rt=T.length),wt=T.window}else wt=F,mt=it-T.offset,rt=T.length;for(dt<rt&&(rt=dt),dt-=rt,T.length-=rt;F[it++]=wt[mt++],--rt;);T.length===0&&(T.mode=21);break;case 26:if(dt===0)break t;F[it++]=T.length,dt--,T.mode=21;break;case 27:if(T.wrap){for(;ct<32;){if(ot===0)break t;ot--,$|=R[H++]<<ct,ct+=8}if(V-=dt,C.total_out+=V,T.total+=V,V&&(C.adler=T.check=T.flags?y(T.check,F,V,it-V):_(T.check,F,V,it-V)),V=dt,(T.flags?$:B($))!==T.check){C.msg="incorrect data check",T.mode=30;break}ct=$=0}T.mode=28;case 28:if(T.wrap&&T.flags){for(;ct<32;){if(ot===0)break t;ot--,$+=R[H++]<<ct,ct+=8}if($!==(4294967295&T.total)){C.msg="incorrect length check",T.mode=30;break}ct=$=0}T.mode=29;case 29:ut=1;break t;case 30:ut=-3;break t;case 31:return-4;case 32:default:return O}return C.next_out=it,C.avail_out=dt,C.next_in=H,C.avail_in=ot,T.hold=$,T.bits=ct,(T.wsize||V!==C.avail_out&&T.mode<30&&(T.mode<27||k!==4))&&w(C,C.output,C.next_out,V-C.avail_out)?(T.mode=31,-4):(W-=C.avail_in,V-=C.avail_out,C.total_in+=W,C.total_out+=V,T.total+=V,T.wrap&&V&&(C.adler=T.check=T.flags?y(T.check,F,V,C.next_out-V):_(T.check,F,V,C.next_out-V)),C.data_type=T.bits+(T.last?64:0)+(T.mode===12?128:0)+(T.mode===20||T.mode===15?256:0),(W==0&&V===0||k===4)&&ut===0&&(ut=-5),ut)},v.inflateEnd=function(C){if(!C||!C.state)return O;var k=C.state;return k.window&&(k.window=null),C.state=null,0},v.inflateGetHeader=function(C,k){var T;return C&&C.state&&2&(T=C.state).wrap?((T.head=k).done=!1,0):O},v.inflateSetDictionary=function(C,k){var T,R=k.length;return C&&C.state?(T=C.state).wrap!==0&&T.mode!==11?O:T.mode===11&&_(1,k,R,0)!==T.check?-3:w(C,k,R,R)?(T.mode=31,-4):(T.havedict=1,0):O},v.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(d,m,v){var p=d("../utils/common"),_=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],y=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],x=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],S=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];m.exports=function(O,B,U,z,q,G,tt,K){var D,N,Z,w,C,k,T,R,F,H=K.bits,it=0,ot=0,dt=0,$=0,ct=0,W=0,V=0,rt=0,mt=0,wt=0,_t=null,Ct=0,Ft=new p.Buf16(16),It=new p.Buf16(16),vt=null,kt=0;for(it=0;it<=15;it++)Ft[it]=0;for(ot=0;ot<z;ot++)Ft[B[U+ot]]++;for(ct=H,$=15;1<=$&&Ft[$]===0;$--);if($<ct&&(ct=$),$===0)return q[G++]=20971520,q[G++]=20971520,K.bits=1,0;for(dt=1;dt<$&&Ft[dt]===0;dt++);for(ct<dt&&(ct=dt),it=rt=1;it<=15;it++)if(rt<<=1,(rt-=Ft[it])<0)return-1;if(0<rt&&(O===0||$!==1))return-1;for(It[1]=0,it=1;it<15;it++)It[it+1]=It[it]+Ft[it];for(ot=0;ot<z;ot++)B[U+ot]!==0&&(tt[It[B[U+ot]]++]=ot);if(k=O===0?(_t=vt=tt,19):O===1?(_t=_,Ct-=257,vt=y,kt-=257,256):(_t=x,vt=S,-1),it=dt,C=G,V=ot=wt=0,Z=-1,w=(mt=1<<(W=ct))-1,O===1&&852<mt||O===2&&592<mt)return 1;for(;;){for(T=it-V,F=tt[ot]<k?(R=0,tt[ot]):tt[ot]>k?(R=vt[kt+tt[ot]],_t[Ct+tt[ot]]):(R=96,0),D=1<<it-V,dt=N=1<<W;q[C+(wt>>V)+(N-=D)]=T<<24|R<<16|F|0,N!==0;);for(D=1<<it-1;wt&D;)D>>=1;if(D!==0?(wt&=D-1,wt+=D):wt=0,ot++,--Ft[it]==0){if(it===$)break;it=B[U+tt[ot]]}if(ct<it&&(wt&w)!==Z){for(V===0&&(V=ct),C+=dt,rt=1<<(W=it-V);W+V<$&&!((rt-=Ft[W+V])<=0);)W++,rt<<=1;if(mt+=1<<W,O===1&&852<mt||O===2&&592<mt)return 1;q[Z=wt&w]=ct<<24|W<<16|C-G|0}}return wt!==0&&(q[C+wt]=it-V<<24|64<<16|0),K.bits=ct,0}},{"../utils/common":41}],51:[function(d,m,v){m.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(d,m,v){var p=d("../utils/common");function _(vt){for(var kt=vt.length;0<=--kt;)vt[kt]=0}var y=256,x=286,S=30,O=15,B=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],U=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],G=new Array(576);_(G);var tt=new Array(60);_(tt);var K=new Array(512);_(K);var D=new Array(256);_(D);var N=new Array(29);_(N);var Z,w,C,k=new Array(S);function T(vt,kt,gt,ut,Q){this.static_tree=vt,this.extra_bits=kt,this.extra_base=gt,this.elems=ut,this.max_length=Q,this.has_stree=vt&&vt.length}function R(vt,kt){this.dyn_tree=vt,this.max_code=0,this.stat_desc=kt}function F(vt){return vt<256?K[vt]:K[256+(vt>>>7)]}function H(vt,kt){vt.pending_buf[vt.pending++]=255&kt,vt.pending_buf[vt.pending++]=kt>>>8&255}function it(vt,kt,gt){vt.bi_valid>16-gt?(vt.bi_buf|=kt<<vt.bi_valid&65535,H(vt,vt.bi_buf),vt.bi_buf=kt>>16-vt.bi_valid,vt.bi_valid+=gt-16):(vt.bi_buf|=kt<<vt.bi_valid&65535,vt.bi_valid+=gt)}function ot(vt,kt,gt){it(vt,gt[2*kt],gt[2*kt+1])}function dt(vt,kt){for(var gt=0;gt|=1&vt,vt>>>=1,gt<<=1,0<--kt;);return gt>>>1}function $(vt,kt,gt){var ut,Q,Y=new Array(16),et=0;for(ut=1;ut<=O;ut++)Y[ut]=et=et+gt[ut-1]<<1;for(Q=0;Q<=kt;Q++){var lt=vt[2*Q+1];lt!==0&&(vt[2*Q]=dt(Y[lt]++,lt))}}function ct(vt){var kt;for(kt=0;kt<x;kt++)vt.dyn_ltree[2*kt]=0;for(kt=0;kt<S;kt++)vt.dyn_dtree[2*kt]=0;for(kt=0;kt<19;kt++)vt.bl_tree[2*kt]=0;vt.dyn_ltree[512]=1,vt.opt_len=vt.static_len=0,vt.last_lit=vt.matches=0}function W(vt){8<vt.bi_valid?H(vt,vt.bi_buf):0<vt.bi_valid&&(vt.pending_buf[vt.pending++]=vt.bi_buf),vt.bi_buf=0,vt.bi_valid=0}function V(vt,kt,gt,ut){var Q=2*kt,Y=2*gt;return vt[Q]<vt[Y]||vt[Q]===vt[Y]&&ut[kt]<=ut[gt]}function rt(vt,kt,gt){for(var ut=vt.heap[gt],Q=gt<<1;Q<=vt.heap_len&&(Q<vt.heap_len&&V(kt,vt.heap[Q+1],vt.heap[Q],vt.depth)&&Q++,!V(kt,ut,vt.heap[Q],vt.depth));)vt.heap[gt]=vt.heap[Q],gt=Q,Q<<=1;vt.heap[gt]=ut}function mt(vt,kt,gt){var ut,Q,Y,et,lt=0;if(vt.last_lit!==0)for(;ut=vt.pending_buf[vt.d_buf+2*lt]<<8|vt.pending_buf[vt.d_buf+2*lt+1],Q=vt.pending_buf[vt.l_buf+lt],lt++,ut===0?ot(vt,Q,kt):(ot(vt,(Y=D[Q])+y+1,kt),(et=B[Y])!==0&&it(vt,Q-=N[Y],et),ot(vt,Y=F(--ut),gt),(et=U[Y])!==0&&it(vt,ut-=k[Y],et)),lt<vt.last_lit;);ot(vt,256,kt)}function wt(vt,kt){var gt,ut,Q,Y=kt.dyn_tree,et=kt.stat_desc.static_tree,lt=kt.stat_desc.has_stree,pt=kt.stat_desc.elems,bt=-1;for(vt.heap_len=0,vt.heap_max=573,gt=0;gt<pt;gt++)Y[2*gt]!==0?(vt.heap[++vt.heap_len]=bt=gt,vt.depth[gt]=0):Y[2*gt+1]=0;for(;vt.heap_len<2;)Y[2*(Q=vt.heap[++vt.heap_len]=bt<2?++bt:0)]=1,vt.depth[Q]=0,vt.opt_len--,lt&&(vt.static_len-=et[2*Q+1]);for(kt.max_code=bt,gt=vt.heap_len>>1;1<=gt;gt--)rt(vt,Y,gt);for(Q=pt;gt=vt.heap[1],vt.heap[1]=vt.heap[vt.heap_len--],rt(vt,Y,1),ut=vt.heap[1],vt.heap[--vt.heap_max]=gt,vt.heap[--vt.heap_max]=ut,Y[2*Q]=Y[2*gt]+Y[2*ut],vt.depth[Q]=(vt.depth[gt]>=vt.depth[ut]?vt.depth[gt]:vt.depth[ut])+1,Y[2*gt+1]=Y[2*ut+1]=Q,vt.heap[1]=Q++,rt(vt,Y,1),2<=vt.heap_len;);vt.heap[--vt.heap_max]=vt.heap[1],function(Et,Ot){var zt,Gt,Jt,Kt,ie,Xt,Ut=Ot.dyn_tree,_e=Ot.max_code,le=Ot.stat_desc.static_tree,ye=Ot.stat_desc.has_stree,Ze=Ot.stat_desc.extra_bits,ce=Ot.stat_desc.extra_base,ke=Ot.stat_desc.max_length,He=0;for(Kt=0;Kt<=O;Kt++)Et.bl_count[Kt]=0;for(Ut[2*Et.heap[Et.heap_max]+1]=0,zt=Et.heap_max+1;zt<573;zt++)ke<(Kt=Ut[2*Ut[2*(Gt=Et.heap[zt])+1]+1]+1)&&(Kt=ke,He++),Ut[2*Gt+1]=Kt,_e<Gt||(Et.bl_count[Kt]++,ie=0,ce<=Gt&&(ie=Ze[Gt-ce]),Xt=Ut[2*Gt],Et.opt_len+=Xt*(Kt+ie),ye&&(Et.static_len+=Xt*(le[2*Gt+1]+ie)));if(He!==0){do{for(Kt=ke-1;Et.bl_count[Kt]===0;)Kt--;Et.bl_count[Kt]--,Et.bl_count[Kt+1]+=2,Et.bl_count[ke]--,He-=2}while(0<He);for(Kt=ke;Kt!==0;Kt--)for(Gt=Et.bl_count[Kt];Gt!==0;)_e<(Jt=Et.heap[--zt])||(Ut[2*Jt+1]!==Kt&&(Et.opt_len+=(Kt-Ut[2*Jt+1])*Ut[2*Jt],Ut[2*Jt+1]=Kt),Gt--)}}(vt,kt),$(Y,bt,vt.bl_count)}function _t(vt,kt,gt){var ut,Q,Y=-1,et=kt[1],lt=0,pt=7,bt=4;for(et===0&&(pt=138,bt=3),kt[2*(gt+1)+1]=65535,ut=0;ut<=gt;ut++)Q=et,et=kt[2*(ut+1)+1],++lt<pt&&Q===et||(lt<bt?vt.bl_tree[2*Q]+=lt:Q!==0?(Q!==Y&&vt.bl_tree[2*Q]++,vt.bl_tree[32]++):lt<=10?vt.bl_tree[34]++:vt.bl_tree[36]++,Y=Q,bt=(lt=0)===et?(pt=138,3):Q===et?(pt=6,3):(pt=7,4))}function Ct(vt,kt,gt){var ut,Q,Y=-1,et=kt[1],lt=0,pt=7,bt=4;for(et===0&&(pt=138,bt=3),ut=0;ut<=gt;ut++)if(Q=et,et=kt[2*(ut+1)+1],!(++lt<pt&&Q===et)){if(lt<bt)for(;ot(vt,Q,vt.bl_tree),--lt!=0;);else Q!==0?(Q!==Y&&(ot(vt,Q,vt.bl_tree),lt--),ot(vt,16,vt.bl_tree),it(vt,lt-3,2)):lt<=10?(ot(vt,17,vt.bl_tree),it(vt,lt-3,3)):(ot(vt,18,vt.bl_tree),it(vt,lt-11,7));Y=Q,bt=(lt=0)===et?(pt=138,3):Q===et?(pt=6,3):(pt=7,4)}}_(k);var Ft=!1;function It(vt,kt,gt,ut){it(vt,0+(ut?1:0),3),function(Q,Y,et,lt){W(Q),H(Q,et),H(Q,~et),p.arraySet(Q.pending_buf,Q.window,Y,et,Q.pending),Q.pending+=et}(vt,kt,gt)}v._tr_init=function(vt){Ft||(function(){var kt,gt,ut,Q,Y,et=new Array(16);for(Q=ut=0;Q<28;Q++)for(N[Q]=ut,kt=0;kt<1<<B[Q];kt++)D[ut++]=Q;for(D[ut-1]=Q,Q=Y=0;Q<16;Q++)for(k[Q]=Y,kt=0;kt<1<<U[Q];kt++)K[Y++]=Q;for(Y>>=7;Q<S;Q++)for(k[Q]=Y<<7,kt=0;kt<1<<U[Q]-7;kt++)K[256+Y++]=Q;for(gt=0;gt<=O;gt++)et[gt]=0;for(kt=0;kt<=143;)G[2*kt+1]=8,kt++,et[8]++;for(;kt<=255;)G[2*kt+1]=9,kt++,et[9]++;for(;kt<=279;)G[2*kt+1]=7,kt++,et[7]++;for(;kt<=287;)G[2*kt+1]=8,kt++,et[8]++;for($(G,287,et),kt=0;kt<S;kt++)tt[2*kt+1]=5,tt[2*kt]=dt(kt,5);Z=new T(G,B,257,x,O),w=new T(tt,U,0,S,O),C=new T(new Array(0),z,0,19,7)}(),Ft=!0),vt.l_desc=new R(vt.dyn_ltree,Z),vt.d_desc=new R(vt.dyn_dtree,w),vt.bl_desc=new R(vt.bl_tree,C),vt.bi_buf=0,vt.bi_valid=0,ct(vt)},v._tr_stored_block=It,v._tr_flush_block=function(vt,kt,gt,ut){var Q,Y,et=0;0<vt.level?(vt.strm.data_type===2&&(vt.strm.data_type=function(lt){var pt,bt=4093624447;for(pt=0;pt<=31;pt++,bt>>>=1)if(1&bt&&lt.dyn_ltree[2*pt]!==0)return 0;if(lt.dyn_ltree[18]!==0||lt.dyn_ltree[20]!==0||lt.dyn_ltree[26]!==0)return 1;for(pt=32;pt<y;pt++)if(lt.dyn_ltree[2*pt]!==0)return 1;return 0}(vt)),wt(vt,vt.l_desc),wt(vt,vt.d_desc),et=function(lt){var pt;for(_t(lt,lt.dyn_ltree,lt.l_desc.max_code),_t(lt,lt.dyn_dtree,lt.d_desc.max_code),wt(lt,lt.bl_desc),pt=18;3<=pt&&lt.bl_tree[2*q[pt]+1]===0;pt--);return lt.opt_len+=3*(pt+1)+5+5+4,pt}(vt),Q=vt.opt_len+3+7>>>3,(Y=vt.static_len+3+7>>>3)<=Q&&(Q=Y)):Q=Y=gt+5,gt+4<=Q&&kt!==-1?It(vt,kt,gt,ut):vt.strategy===4||Y===Q?(it(vt,2+(ut?1:0),3),mt(vt,G,tt)):(it(vt,4+(ut?1:0),3),function(lt,pt,bt,Et){var Ot;for(it(lt,pt-257,5),it(lt,bt-1,5),it(lt,Et-4,4),Ot=0;Ot<Et;Ot++)it(lt,lt.bl_tree[2*q[Ot]+1],3);Ct(lt,lt.dyn_ltree,pt-1),Ct(lt,lt.dyn_dtree,bt-1)}(vt,vt.l_desc.max_code+1,vt.d_desc.max_code+1,et+1),mt(vt,vt.dyn_ltree,vt.dyn_dtree)),ct(vt),ut&&W(vt)},v._tr_tally=function(vt,kt,gt){return vt.pending_buf[vt.d_buf+2*vt.last_lit]=kt>>>8&255,vt.pending_buf[vt.d_buf+2*vt.last_lit+1]=255&kt,vt.pending_buf[vt.l_buf+vt.last_lit]=255&gt,vt.last_lit++,kt===0?vt.dyn_ltree[2*gt]++:(vt.matches++,kt--,vt.dyn_ltree[2*(D[gt]+y+1)]++,vt.dyn_dtree[2*F(kt)]++),vt.last_lit===vt.lit_bufsize-1},v._tr_align=function(vt){it(vt,2,3),ot(vt,256,G),function(kt){kt.bi_valid===16?(H(kt,kt.bi_buf),kt.bi_buf=0,kt.bi_valid=0):8<=kt.bi_valid&&(kt.pending_buf[kt.pending++]=255&kt.bi_buf,kt.bi_buf>>=8,kt.bi_valid-=8)}(vt)}},{"../utils/common":41}],53:[function(d,m,v){m.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(d,m,v){(function(p){(function(_,y){if(!_.setImmediate){var x,S,O,B,U=1,z={},q=!1,G=_.document,tt=Object.getPrototypeOf&&Object.getPrototypeOf(_);tt=tt&&tt.setTimeout?tt:_,x={}.toString.call(_.process)==="[object process]"?function(Z){i.nextTick(function(){D(Z)})}:function(){if(_.postMessage&&!_.importScripts){var Z=!0,w=_.onmessage;return _.onmessage=function(){Z=!1},_.postMessage("","*"),_.onmessage=w,Z}}()?(B="setImmediate$"+Math.random()+"$",_.addEventListener?_.addEventListener("message",N,!1):_.attachEvent("onmessage",N),function(Z){_.postMessage(B+Z,"*")}):_.MessageChannel?((O=new MessageChannel).port1.onmessage=function(Z){D(Z.data)},function(Z){O.port2.postMessage(Z)}):G&&"onreadystatechange"in G.createElement("script")?(S=G.documentElement,function(Z){var w=G.createElement("script");w.onreadystatechange=function(){D(Z),w.onreadystatechange=null,S.removeChild(w),w=null},S.appendChild(w)}):function(Z){setTimeout(D,0,Z)},tt.setImmediate=function(Z){typeof Z!="function"&&(Z=new Function(""+Z));for(var w=new Array(arguments.length-1),C=0;C<w.length;C++)w[C]=arguments[C+1];var k={callback:Z,args:w};return z[U]=k,x(U),U++},tt.clearImmediate=K}function K(Z){delete z[Z]}function D(Z){if(q)setTimeout(D,0,Z);else{var w=z[Z];if(w){q=!0;try{(function(C){var k=C.callback,T=C.args;switch(T.length){case 0:k();break;case 1:k(T[0]);break;case 2:k(T[0],T[1]);break;case 3:k(T[0],T[1],T[2]);break;default:k.apply(void 0,T)}})(w)}finally{K(Z),q=!1}}}}function N(Z){Z.source===_&&typeof Z.data=="string"&&Z.data.indexOf(B)===0&&D(+Z.data.slice(B.length))}})(typeof self>"u"?p===void 0?this:p:self)}).call(this,r!==void 0?r:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}).call(this)}).call(this,e("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate)},{_process:467,buffer:220,timers:523}],442:[function(e,t,n){(function(i){(function(){"use strict";var r=/[\\^$.*+?()[\]{}|]/g,o=RegExp(r.source),a=typeof i=="object"&&i&&i.Object===Object&&i,s=typeof self=="object"&&self&&self.Object===Object&&self,u=a||s||Function("return this")(),f=Object.prototype.toString,c=u.Symbol,d=c?c.prototype:void 0,m=d?d.toString:void 0;function v(p){if(typeof p=="string")return p;if(function(y){return typeof y=="symbol"||function(x){return!!x&&typeof x=="object"}(y)&&f.call(y)=="[object Symbol]"}(p))return m?m.call(p):"";var _=p+"";return _=="0"&&1/p==-1/0?"-0":_}t.exports=function(p){var _;return(p=(_=p)==null?"":v(_))&&o.test(p)?p.replace(r,"\\$&"):p}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],443:[function(e,t,n){(function(i){(function(){"use strict";var r="[object Arguments]",o="[object Map]",a="[object Object]",s="[object Set]",u=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,f=/^\w*$/,c=/^\./,d=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,m=/\\(\\)?/g,v=/^\[object .+?Constructor\]$/,p=/^(?:0|[1-9]\d*)$/,_={};_["[object Float32Array]"]=_["[object Float64Array]"]=_["[object Int8Array]"]=_["[object Int16Array]"]=_["[object Int32Array]"]=_["[object Uint8Array]"]=_["[object Uint8ClampedArray]"]=_["[object Uint16Array]"]=_["[object Uint32Array]"]=!0,_[r]=_["[object Array]"]=_["[object ArrayBuffer]"]=_["[object Boolean]"]=_["[object DataView]"]=_["[object Date]"]=_["[object Error]"]=_["[object Function]"]=_[o]=_["[object Number]"]=_[a]=_["[object RegExp]"]=_[s]=_["[object String]"]=_["[object WeakMap]"]=!1;var y=typeof i=="object"&&i&&i.Object===Object&&i,x=typeof self=="object"&&self&&self.Object===Object&&self,S=y||x||Function("return this")(),O=typeof n=="object"&&n&&!n.nodeType&&n,B=O&&typeof t=="object"&&t&&!t.nodeType&&t,U=B&&B.exports===O&&y.process,z=function(){try{return U&&U.binding("util")}catch{}}(),q=z&&z.isTypedArray;function G(Tt,Ht,re,Qt){for(var he=-1,Ee=Tt?Tt.length:0;++he<Ee;){var Ie=Tt[he];Ht(Qt,Ie,re(Ie),Tt)}return Qt}function tt(Tt,Ht){for(var re=-1,Qt=Tt?Tt.length:0;++re<Qt;)if(Ht(Tt[re],re,Tt))return!0;return!1}function K(Tt){var Ht=!1;if(Tt!=null&&typeof Tt.toString!="function")try{Ht=!!(Tt+"")}catch{}return Ht}function D(Tt){var Ht=-1,re=Array(Tt.size);return Tt.forEach(function(Qt,he){re[++Ht]=[he,Qt]}),re}function N(Tt){var Ht=-1,re=Array(Tt.size);return Tt.forEach(function(Qt){re[++Ht]=Qt}),re}var Z,w,C,k=Array.prototype,T=Function.prototype,R=Object.prototype,F=S["__core-js_shared__"],H=(Z=/[^.]+$/.exec(F&&F.keys&&F.keys.IE_PROTO||""))?"Symbol(src)_1."+Z:"",it=T.toString,ot=R.hasOwnProperty,dt=R.toString,$=RegExp("^"+it.call(ot).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ct=S.Symbol,W=S.Uint8Array,V=R.propertyIsEnumerable,rt=k.splice,mt=(w=Object.keys,C=Object,function(Tt){return w(C(Tt))}),wt=Fe(S,"DataView"),_t=Fe(S,"Map"),Ct=Fe(S,"Promise"),Ft=Fe(S,"Set"),It=Fe(S,"WeakMap"),vt=Fe(Object,"create"),kt=jt(wt),gt=jt(_t),ut=jt(Ct),Q=jt(Ft),Y=jt(It),et=ct?ct.prototype:void 0,lt=et?et.valueOf:void 0,pt=et?et.toString:void 0;function bt(Tt){var Ht=-1,re=Tt?Tt.length:0;for(this.clear();++Ht<re;){var Qt=Tt[Ht];this.set(Qt[0],Qt[1])}}function Et(Tt){var Ht=-1,re=Tt?Tt.length:0;for(this.clear();++Ht<re;){var Qt=Tt[Ht];this.set(Qt[0],Qt[1])}}function Ot(Tt){var Ht=-1,re=Tt?Tt.length:0;for(this.clear();++Ht<re;){var Qt=Tt[Ht];this.set(Qt[0],Qt[1])}}function zt(Tt){var Ht=-1,re=Tt?Tt.length:0;for(this.__data__=new Ot;++Ht<re;)this.add(Tt[Ht])}function Gt(Tt){this.__data__=new Et(Tt)}function Jt(Tt,Ht){var re=fe(Tt)||Ae(Tt)?function(Ie,ti){for(var Ge=-1,we=Array(Ie);++Ge<Ie;)we[Ge]=ti(Ge);return we}(Tt.length,String):[],Qt=re.length,he=!!Qt;for(var Ee in Tt)!Ht&&!ot.call(Tt,Ee)||he&&(Ee=="length"||Le(Ee,Qt))||re.push(Ee);return re}function Kt(Tt,Ht){for(var re=Tt.length;re--;)if($e(Tt[re][0],Ht))return re;return-1}function ie(Tt,Ht,re,Qt){return _e(Tt,function(he,Ee,Ie){Ht(Qt,he,re(he),Ie)}),Qt}bt.prototype.clear=function(){this.__data__=vt?vt(null):{}},bt.prototype.delete=function(Tt){return this.has(Tt)&&delete this.__data__[Tt]},bt.prototype.get=function(Tt){var Ht=this.__data__;if(vt){var re=Ht[Tt];return re==="__lodash_hash_undefined__"?void 0:re}return ot.call(Ht,Tt)?Ht[Tt]:void 0},bt.prototype.has=function(Tt){var Ht=this.__data__;return vt?Ht[Tt]!==void 0:ot.call(Ht,Tt)},bt.prototype.set=function(Tt,Ht){return this.__data__[Tt]=vt&&Ht===void 0?"__lodash_hash_undefined__":Ht,this},Et.prototype.clear=function(){this.__data__=[]},Et.prototype.delete=function(Tt){var Ht=this.__data__,re=Kt(Ht,Tt);return!(re<0)&&(re==Ht.length-1?Ht.pop():rt.call(Ht,re,1),!0)},Et.prototype.get=function(Tt){var Ht=this.__data__,re=Kt(Ht,Tt);return re<0?void 0:Ht[re][1]},Et.prototype.has=function(Tt){return Kt(this.__data__,Tt)>-1},Et.prototype.set=function(Tt,Ht){var re=this.__data__,Qt=Kt(re,Tt);return Qt<0?re.push([Tt,Ht]):re[Qt][1]=Ht,this},Ot.prototype.clear=function(){this.__data__={hash:new bt,map:new(_t||Et),string:new bt}},Ot.prototype.delete=function(Tt){return ue(this,Tt).delete(Tt)},Ot.prototype.get=function(Tt){return ue(this,Tt).get(Tt)},Ot.prototype.has=function(Tt){return ue(this,Tt).has(Tt)},Ot.prototype.set=function(Tt,Ht){return ue(this,Tt).set(Tt,Ht),this},zt.prototype.add=zt.prototype.push=function(Tt){return this.__data__.set(Tt,"__lodash_hash_undefined__"),this},zt.prototype.has=function(Tt){return this.__data__.has(Tt)},Gt.prototype.clear=function(){this.__data__=new Et},Gt.prototype.delete=function(Tt){return this.__data__.delete(Tt)},Gt.prototype.get=function(Tt){return this.__data__.get(Tt)},Gt.prototype.has=function(Tt){return this.__data__.has(Tt)},Gt.prototype.set=function(Tt,Ht){var re=this.__data__;if(re instanceof Et){var Qt=re.__data__;if(!_t||Qt.length<199)return Qt.push([Tt,Ht]),this;re=this.__data__=new Ot(Qt)}return re.set(Tt,Ht),this};var Xt,Ut,_e=(Xt=function(Tt,Ht){return Tt&&le(Tt,Ht,lr)},function(Tt,Ht){if(Tt==null)return Tt;if(!Ye(Tt))return Xt(Tt,Ht);for(var re=Tt.length,Qt=Ut?re:-1,he=Object(Tt);(Ut?Qt--:++Qt<re)&&Ht(he[Qt],Qt,he)!==!1;);return Tt}),le=function(Tt){return function(Ht,re,Qt){for(var he=-1,Ee=Object(Ht),Ie=Qt(Ht),ti=Ie.length;ti--;){var Ge=Ie[Tt?ti:++he];if(re(Ee[Ge],Ge,Ee)===!1)break}return Ht}}();function ye(Tt,Ht){for(var re=0,Qt=(Ht=Oe(Ht,Tt)?[Ht]:Te(Ht)).length;Tt!=null&&re<Qt;)Tt=Tt[qt(Ht[re++])];return re&&re==Qt?Tt:void 0}function Ze(Tt,Ht){return Tt!=null&&Ht in Object(Tt)}function ce(Tt,Ht,re,Qt,he){return Tt===Ht||(Tt==null||Ht==null||!Ke(Tt)&&!fr(Ht)?Tt!=Tt&&Ht!=Ht:function(Ee,Ie,ti,Ge,we,pe){var yi=fe(Ee),ri=fe(Ie),li="[object Array]",wi="[object Array]";yi||(li=(li=ai(Ee))==r?a:li),ri||(wi=(wi=ai(Ie))==r?a:wi);var me=li==a&&!K(Ee),ui=wi==a&&!K(Ie),yr=li==wi;if(yr&&!me)return pe||(pe=new Gt),yi||oi(Ee)?bi(Ee,Ie,ti,Ge,we,pe):function(ni,ze,kr,Tr,gn,oe,Rr){switch(kr){case"[object DataView]":if(ni.byteLength!=ze.byteLength||ni.byteOffset!=ze.byteOffset)return!1;ni=ni.buffer,ze=ze.buffer;case"[object ArrayBuffer]":return!(ni.byteLength!=ze.byteLength||!Tr(new W(ni),new W(ze)));case"[object Boolean]":case"[object Date]":case"[object Number]":return $e(+ni,+ze);case"[object Error]":return ni.name==ze.name&&ni.message==ze.message;case"[object RegExp]":case"[object String]":return ni==ze+"";case o:var gi=D;case s:var vr=2&oe;if(gi||(gi=N),ni.size!=ze.size&&!vr)return!1;var rn=Rr.get(ni);if(rn)return rn==ze;oe|=1,Rr.set(ni,ze);var mr=bi(gi(ni),gi(ze),Tr,gn,oe,Rr);return Rr.delete(ni),mr;case"[object Symbol]":if(lt)return lt.call(ni)==lt.call(ze)}return!1}(Ee,Ie,li,ti,Ge,we,pe);if(!(2&we)){var Ur=me&&ot.call(Ee,"__wrapped__"),Se=ui&&ot.call(Ie,"__wrapped__");if(Ur||Se){var Mn=Ur?Ee.value():Ee,jn=Se?Ie.value():Ie;return pe||(pe=new Gt),ti(Mn,jn,Ge,we,pe)}}return yr?(pe||(pe=new Gt),function(ni,ze,kr,Tr,gn,oe){var Rr=2&gn,gi=lr(ni),vr=gi.length,rn=lr(ze).length;if(vr!=rn&&!Rr)return!1;for(var mr=vr;mr--;){var hi=gi[mr];if(!(Rr?hi in ze:ot.call(ze,hi)))return!1}var fi=oe.get(ni);if(fi&&oe.get(ze))return fi==ze;var Si=!0;oe.set(ni,ze),oe.set(ze,ni);for(var Vr=Rr;++mr<vr;){hi=gi[mr];var ns=ni[hi],je=ze[hi];if(Tr)var qr=Rr?Tr(je,ns,hi,ze,ni,oe):Tr(ns,je,hi,ni,ze,oe);if(!(qr===void 0?ns===je||kr(ns,je,Tr,gn,oe):qr)){Si=!1;break}Vr||(Vr=hi=="constructor")}if(Si&&!Vr){var ci=ni.constructor,M=ze.constructor;ci==M||!("constructor"in ni)||!("constructor"in ze)||typeof ci=="function"&&ci instanceof ci&&typeof M=="function"&&M instanceof M||(Si=!1)}return oe.delete(ni),oe.delete(ze),Si}(Ee,Ie,ti,Ge,we,pe)):!1}(Tt,Ht,ce,re,Qt,he))}function ke(Tt){return!(!Ke(Tt)||function(Ht){return!!H&&H in Ht}(Tt))&&(Ue(Tt)||K(Tt)?$:v).test(jt(Tt))}function He(Tt){return typeof Tt=="function"?Tt:Tt==null?Mi:typeof Tt=="object"?fe(Tt)?function(Qt,he){return Oe(Qt)&&Qi(he)?We(qt(Qt),he):function(Ee){var Ie=function(ti,Ge,we){var pe=ti==null?void 0:ye(ti,Ge);return pe===void 0?we:pe}(Ee,Qt);return Ie===void 0&&Ie===he?function(ti,Ge){return ti!=null&&function(we,pe,yi){pe=Oe(pe,we)?[pe]:Te(pe);for(var ri,li=-1,wi=pe.length;++li<wi;){var me=qt(pe[li]);if(!(ri=we!=null&&yi(we,me)))break;we=we[me]}return ri||!!(wi=we?we.length:0)&&ii(wi)&&Le(me,wi)&&(fe(we)||Ae(we))}(ti,Ge,Ze)}(Ee,Qt):ce(he,Ie,void 0,3)}}(Tt[0],Tt[1]):function(Qt){var he=function(Ee){for(var Ie=lr(Ee),ti=Ie.length;ti--;){var Ge=Ie[ti],we=Ee[Ge];Ie[ti]=[Ge,we,Qi(we)]}return Ie}(Qt);return he.length==1&&he[0][2]?We(he[0][0],he[0][1]):function(Ee){return Ee===Qt||function(Ie,ti,Ge,we){var pe=Ge.length,yi=pe,ri=!we;if(Ie==null)return!yi;for(Ie=Object(Ie);pe--;){var li=Ge[pe];if(ri&&li[2]?li[1]!==Ie[li[0]]:!(li[0]in Ie))return!1}for(;++pe<yi;){var wi=(li=Ge[pe])[0],me=Ie[wi],ui=li[1];if(ri&&li[2]){if(me===void 0&&!(wi in Ie))return!1}else{var yr=new Gt;if(we)var Ur=we(me,ui,wi,Ie,ti,yr);if(!(Ur===void 0?ce(ui,me,we,3,yr):Ur))return!1}}return!0}(Ee,Qt,he)}}(Tt):Oe(Ht=Tt)?(re=qt(Ht),function(Qt){return Qt?.[re]}):function(Qt){return function(he){return ye(he,Qt)}}(Ht);var Ht,re}function $t(Tt){if(re=(Ht=Tt)&&Ht.constructor,Qt=typeof re=="function"&&re.prototype||R,Ht!==Qt)return mt(Tt);var Ht,re,Qt,he=[];for(var Ee in Object(Tt))ot.call(Tt,Ee)&&Ee!="constructor"&&he.push(Ee);return he}function Te(Tt){return fe(Tt)?Tt:At(Tt)}function bi(Tt,Ht,re,Qt,he,Ee){var Ie=2&he,ti=Tt.length,Ge=Ht.length;if(ti!=Ge&&!(Ie&&Ge>ti))return!1;var we=Ee.get(Tt);if(we&&Ee.get(Ht))return we==Ht;var pe=-1,yi=!0,ri=1&he?new zt:void 0;for(Ee.set(Tt,Ht),Ee.set(Ht,Tt);++pe<ti;){var li=Tt[pe],wi=Ht[pe];if(Qt)var me=Ie?Qt(wi,li,pe,Ht,Tt,Ee):Qt(li,wi,pe,Tt,Ht,Ee);if(me!==void 0){if(me)continue;yi=!1;break}if(ri){if(!tt(Ht,function(ui,yr){if(!ri.has(yr)&&(li===ui||re(li,ui,Qt,he,Ee)))return ri.add(yr)})){yi=!1;break}}else if(li!==wi&&!re(li,wi,Qt,he,Ee)){yi=!1;break}}return Ee.delete(Tt),Ee.delete(Ht),yi}function ue(Tt,Ht){var re,Qt,he=Tt.__data__;return((Qt=typeof(re=Ht))=="string"||Qt=="number"||Qt=="symbol"||Qt=="boolean"?re!=="__proto__":re===null)?he[typeof Ht=="string"?"string":"hash"]:he.map}function Fe(Tt,Ht){var re=function(Qt,he){return Qt?.[he]}(Tt,Ht);return ke(re)?re:void 0}var ai=function(Tt){return dt.call(Tt)};function Le(Tt,Ht){return!!(Ht=Ht??9007199254740991)&&(typeof Tt=="number"||p.test(Tt))&&Tt>-1&&Tt%1==0&&Tt<Ht}function Oe(Tt,Ht){if(fe(Tt))return!1;var re=typeof Tt;return!(re!="number"&&re!="symbol"&&re!="boolean"&&Tt!=null&&!Je(Tt))||f.test(Tt)||!u.test(Tt)||Ht!=null&&Tt in Object(Ht)}function Qi(Tt){return Tt==Tt&&!Ke(Tt)}function We(Tt,Ht){return function(re){return re!=null&&re[Tt]===Ht&&(Ht!==void 0||Tt in Object(re))}}(wt&&ai(new wt(new ArrayBuffer(1)))!="[object DataView]"||_t&&ai(new _t)!=o||Ct&&ai(Ct.resolve())!="[object Promise]"||Ft&&ai(new Ft)!=s||It&&ai(new It)!="[object WeakMap]")&&(ai=function(Tt){var Ht=dt.call(Tt),re=Ht==a?Tt.constructor:void 0,Qt=re?jt(re):void 0;if(Qt)switch(Qt){case kt:return"[object DataView]";case gt:return o;case ut:return"[object Promise]";case Q:return s;case Y:return"[object WeakMap]"}return Ht});var At=ve(function(Tt){var Ht;Tt=(Ht=Tt)==null?"":function(Qt){if(typeof Qt=="string")return Qt;if(Je(Qt))return pt?pt.call(Qt):"";var he=Qt+"";return he=="0"&&1/Qt==-1/0?"-0":he}(Ht);var re=[];return c.test(Tt)&&re.push(""),Tt.replace(d,function(Qt,he,Ee,Ie){re.push(Ee?Ie.replace(m,"$1"):he||Qt)}),re});function qt(Tt){if(typeof Tt=="string"||Je(Tt))return Tt;var Ht=Tt+"";return Ht=="0"&&1/Tt==-1/0?"-0":Ht}function jt(Tt){if(Tt!=null){try{return it.call(Tt)}catch{}try{return Tt+""}catch{}}return""}var ae,Qe,se=(ae=function(Tt,Ht,re){ot.call(Tt,re)?Tt[re].push(Ht):Tt[re]=[Ht]},function(Tt,Ht){var re=fe(Tt)?G:ie,Qt=Qe?Qe():{};return re(Tt,ae,He(Ht),Qt)});function ve(Tt,Ht){if(typeof Tt!="function"||Ht&&typeof Ht!="function")throw new TypeError("Expected a function");var re=function(){var Qt=arguments,he=Ht?Ht.apply(this,Qt):Qt[0],Ee=re.cache;if(Ee.has(he))return Ee.get(he);var Ie=Tt.apply(this,Qt);return re.cache=Ee.set(he,Ie),Ie};return re.cache=new(ve.Cache||Ot),re}function $e(Tt,Ht){return Tt===Ht||Tt!=Tt&&Ht!=Ht}function Ae(Tt){return function(Ht){return fr(Ht)&&Ye(Ht)}(Tt)&&ot.call(Tt,"callee")&&(!V.call(Tt,"callee")||dt.call(Tt)==r)}ve.Cache=Ot;var fe=Array.isArray;function Ye(Tt){return Tt!=null&&ii(Tt.length)&&!Ue(Tt)}function Ue(Tt){var Ht=Ke(Tt)?dt.call(Tt):"";return Ht=="[object Function]"||Ht=="[object GeneratorFunction]"}function ii(Tt){return typeof Tt=="number"&&Tt>-1&&Tt%1==0&&Tt<=9007199254740991}function Ke(Tt){var Ht=typeof Tt;return!!Tt&&(Ht=="object"||Ht=="function")}function fr(Tt){return!!Tt&&typeof Tt=="object"}function Je(Tt){return typeof Tt=="symbol"||fr(Tt)&&dt.call(Tt)=="[object Symbol]"}var oi=q?function(Tt){return function(Ht){return Tt(Ht)}}(q):function(Tt){return fr(Tt)&&ii(Tt.length)&&!!_[dt.call(Tt)]};function lr(Tt){return Ye(Tt)?Jt(Tt):$t(Tt)}function Mi(Tt){return Tt}t.exports=se}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],444:[function(e,t,n){"use strict";var i=Object.prototype.toString;t.exports=function(r){return r===!0||r===!1||function(o){return!!o&&typeof o=="object"}(r)&&i.call(r)=="[object Boolean]"}},{}],445:[function(e,t,n){(function(i){(function(){"use strict";var r="[object Arguments]",o="[object Map]",a="[object Object]",s="[object Set]",u=/^\[object .+?Constructor\]$/,f=/^(?:0|[1-9]\d*)$/,c={};c["[object Float32Array]"]=c["[object Float64Array]"]=c["[object Int8Array]"]=c["[object Int16Array]"]=c["[object Int32Array]"]=c["[object Uint8Array]"]=c["[object Uint8ClampedArray]"]=c["[object Uint16Array]"]=c["[object Uint32Array]"]=!0,c[r]=c["[object Array]"]=c["[object ArrayBuffer]"]=c["[object Boolean]"]=c["[object DataView]"]=c["[object Date]"]=c["[object Error]"]=c["[object Function]"]=c[o]=c["[object Number]"]=c[a]=c["[object RegExp]"]=c[s]=c["[object String]"]=c["[object WeakMap]"]=!1;var d=typeof i=="object"&&i&&i.Object===Object&&i,m=typeof self=="object"&&self&&self.Object===Object&&self,v=d||m||Function("return this")(),p=typeof n=="object"&&n&&!n.nodeType&&n,_=p&&typeof t=="object"&&t&&!t.nodeType&&t,y=_&&_.exports===p,x=y&&d.process,S=function(){try{return x&&x.binding&&x.binding("util")}catch{}}(),O=S&&S.isTypedArray;function B(At,qt){for(var jt=-1,ae=At==null?0:At.length;++jt<ae;)if(qt(At[jt],jt,At))return!0;return!1}function U(At){var qt=-1,jt=Array(At.size);return At.forEach(function(ae,Qe){jt[++qt]=[Qe,ae]}),jt}function z(At){var qt=-1,jt=Array(At.size);return At.forEach(function(ae){jt[++qt]=ae}),jt}var q,G,tt,K=Array.prototype,D=Function.prototype,N=Object.prototype,Z=v["__core-js_shared__"],w=D.toString,C=N.hasOwnProperty,k=(q=/[^.]+$/.exec(Z&&Z.keys&&Z.keys.IE_PROTO||""))?"Symbol(src)_1."+q:"",T=N.toString,R=RegExp("^"+w.call(C).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),F=y?v.Buffer:void 0,H=v.Symbol,it=v.Uint8Array,ot=N.propertyIsEnumerable,dt=K.splice,$=H?H.toStringTag:void 0,ct=Object.getOwnPropertySymbols,W=F?F.isBuffer:void 0,V=(G=Object.keys,tt=Object,function(At){return G(tt(At))}),rt=ye(v,"DataView"),mt=ye(v,"Map"),wt=ye(v,"Promise"),_t=ye(v,"Set"),Ct=ye(v,"WeakMap"),Ft=ye(Object,"create"),It=He(rt),vt=He(mt),kt=He(wt),gt=He(_t),ut=He(Ct),Q=H?H.prototype:void 0,Y=Q?Q.valueOf:void 0;function et(At){var qt=-1,jt=At==null?0:At.length;for(this.clear();++qt<jt;){var ae=At[qt];this.set(ae[0],ae[1])}}function lt(At){var qt=-1,jt=At==null?0:At.length;for(this.clear();++qt<jt;){var ae=At[qt];this.set(ae[0],ae[1])}}function pt(At){var qt=-1,jt=At==null?0:At.length;for(this.clear();++qt<jt;){var ae=At[qt];this.set(ae[0],ae[1])}}function bt(At){var qt=-1,jt=At==null?0:At.length;for(this.__data__=new pt;++qt<jt;)this.add(At[qt])}function Et(At){var qt=this.__data__=new lt(At);this.size=qt.size}function Ot(At,qt){var jt=bi(At),ae=!jt&&Te(At),Qe=!jt&&!ae&&ue(At),se=!jt&&!ae&&!Qe&&Qi(At),ve=jt||ae||Qe||se,$e=ve?function(Ye,Ue){for(var ii=-1,Ke=Array(Ye);++ii<Ye;)Ke[ii]=Ue(ii);return Ke}(At.length,String):[],Ae=$e.length;for(var fe in At)!qt&&!C.call(At,fe)||ve&&(fe=="length"||Qe&&(fe=="offset"||fe=="parent")||se&&(fe=="buffer"||fe=="byteLength"||fe=="byteOffset")||ke(fe,Ae))||$e.push(fe);return $e}function zt(At,qt){for(var jt=At.length;jt--;)if($t(At[jt][0],qt))return jt;return-1}function Gt(At){return At==null?At===void 0?"[object Undefined]":"[object Null]":$&&$ in Object(At)?function(qt){var jt=C.call(qt,$),ae=qt[$];try{qt[$]=void 0;var Qe=!0}catch{}var se=T.call(qt);return Qe&&(jt?qt[$]=ae:delete qt[$]),se}(At):function(qt){return T.call(qt)}(At)}function Jt(At){return Oe(At)&&Gt(At)==r}function Kt(At,qt,jt,ae,Qe){return At===qt||(At==null||qt==null||!Oe(At)&&!Oe(qt)?At!=At&&qt!=qt:function(se,ve,$e,Ae,fe,Ye){var Ue=bi(se),ii=bi(ve),Ke=Ue?"[object Array]":ce(se),fr=ii?"[object Array]":ce(ve),Je=(Ke=Ke==r?a:Ke)==a,oi=(fr=fr==r?a:fr)==a,lr=Ke==fr;if(lr&&ue(se)){if(!ue(ve))return!1;Ue=!0,Je=!1}if(lr&&!Je)return Ye||(Ye=new Et),Ue||Qi(se)?Ut(se,ve,$e,Ae,fe,Ye):function(Qt,he,Ee,Ie,ti,Ge,we){switch(Ee){case"[object DataView]":if(Qt.byteLength!=he.byteLength||Qt.byteOffset!=he.byteOffset)return!1;Qt=Qt.buffer,he=he.buffer;case"[object ArrayBuffer]":return!(Qt.byteLength!=he.byteLength||!Ge(new it(Qt),new it(he)));case"[object Boolean]":case"[object Date]":case"[object Number]":return $t(+Qt,+he);case"[object Error]":return Qt.name==he.name&&Qt.message==he.message;case"[object RegExp]":case"[object String]":return Qt==he+"";case o:var pe=U;case s:var yi=1&Ie;if(pe||(pe=z),Qt.size!=he.size&&!yi)return!1;var ri=we.get(Qt);if(ri)return ri==he;Ie|=2,we.set(Qt,he);var li=Ut(pe(Qt),pe(he),Ie,ti,Ge,we);return we.delete(Qt),li;case"[object Symbol]":if(Y)return Y.call(Qt)==Y.call(he)}return!1}(se,ve,Ke,$e,Ae,fe,Ye);if(!(1&$e)){var Mi=Je&&C.call(se,"__wrapped__"),Tt=oi&&C.call(ve,"__wrapped__");if(Mi||Tt){var Ht=Mi?se.value():se,re=Tt?ve.value():ve;return Ye||(Ye=new Et),fe(Ht,re,$e,Ae,Ye)}}return lr?(Ye||(Ye=new Et),function(Qt,he,Ee,Ie,ti,Ge){var we=1&Ee,pe=_e(Qt),yi=pe.length,ri=_e(he).length;if(yi!=ri&&!we)return!1;for(var li=yi;li--;){var wi=pe[li];if(!(we?wi in he:C.call(he,wi)))return!1}var me=Ge.get(Qt);if(me&&Ge.get(he))return me==he;var ui=!0;Ge.set(Qt,he),Ge.set(he,Qt);for(var yr=we;++li<yi;){wi=pe[li];var Ur=Qt[wi],Se=he[wi];if(Ie)var Mn=we?Ie(Se,Ur,wi,he,Qt,Ge):Ie(Ur,Se,wi,Qt,he,Ge);if(!(Mn===void 0?Ur===Se||ti(Ur,Se,Ee,Ie,Ge):Mn)){ui=!1;break}yr||(yr=wi=="constructor")}if(ui&&!yr){var jn=Qt.constructor,ni=he.constructor;jn==ni||!("constructor"in Qt)||!("constructor"in he)||typeof jn=="function"&&jn instanceof jn&&typeof ni=="function"&&ni instanceof ni||(ui=!1)}return Ge.delete(Qt),Ge.delete(he),ui}(se,ve,$e,Ae,fe,Ye)):!1}(At,qt,jt,ae,Kt,Qe))}function ie(At){return!(!Le(At)||function(qt){return!!k&&k in qt}(At))&&(Fe(At)?R:u).test(He(At))}function Xt(At){if(jt=(qt=At)&&qt.constructor,ae=typeof jt=="function"&&jt.prototype||N,qt!==ae)return V(At);var qt,jt,ae,Qe=[];for(var se in Object(At))C.call(At,se)&&se!="constructor"&&Qe.push(se);return Qe}function Ut(At,qt,jt,ae,Qe,se){var ve=1&jt,$e=At.length,Ae=qt.length;if($e!=Ae&&!(ve&&Ae>$e))return!1;var fe=se.get(At);if(fe&&se.get(qt))return fe==qt;var Ye=-1,Ue=!0,ii=2&jt?new bt:void 0;for(se.set(At,qt),se.set(qt,At);++Ye<$e;){var Ke=At[Ye],fr=qt[Ye];if(ae)var Je=ve?ae(fr,Ke,Ye,qt,At,se):ae(Ke,fr,Ye,At,qt,se);if(Je!==void 0){if(Je)continue;Ue=!1;break}if(ii){if(!B(qt,function(oi,lr){if(Mi=lr,!ii.has(Mi)&&(Ke===oi||Qe(Ke,oi,jt,ae,se)))return ii.push(lr);var Mi})){Ue=!1;break}}else if(Ke!==fr&&!Qe(Ke,fr,jt,ae,se)){Ue=!1;break}}return se.delete(At),se.delete(qt),Ue}function _e(At){return function(qt,jt,ae){var Qe=jt(qt);return bi(qt)?Qe:function(se,ve){for(var $e=-1,Ae=ve.length,fe=se.length;++$e<Ae;)se[fe+$e]=ve[$e];return se}(Qe,ae(qt))}(At,We,Ze)}function le(At,qt){var jt,ae,Qe=At.__data__;return((ae=typeof(jt=qt))=="string"||ae=="number"||ae=="symbol"||ae=="boolean"?jt!=="__proto__":jt===null)?Qe[typeof qt=="string"?"string":"hash"]:Qe.map}function ye(At,qt){var jt=function(ae,Qe){return ae?.[Qe]}(At,qt);return ie(jt)?jt:void 0}et.prototype.clear=function(){this.__data__=Ft?Ft(null):{},this.size=0},et.prototype.delete=function(At){var qt=this.has(At)&&delete this.__data__[At];return this.size-=qt?1:0,qt},et.prototype.get=function(At){var qt=this.__data__;if(Ft){var jt=qt[At];return jt==="__lodash_hash_undefined__"?void 0:jt}return C.call(qt,At)?qt[At]:void 0},et.prototype.has=function(At){var qt=this.__data__;return Ft?qt[At]!==void 0:C.call(qt,At)},et.prototype.set=function(At,qt){var jt=this.__data__;return this.size+=this.has(At)?0:1,jt[At]=Ft&&qt===void 0?"__lodash_hash_undefined__":qt,this},lt.prototype.clear=function(){this.__data__=[],this.size=0},lt.prototype.delete=function(At){var qt=this.__data__,jt=zt(qt,At);return!(jt<0)&&(jt==qt.length-1?qt.pop():dt.call(qt,jt,1),--this.size,!0)},lt.prototype.get=function(At){var qt=this.__data__,jt=zt(qt,At);return jt<0?void 0:qt[jt][1]},lt.prototype.has=function(At){return zt(this.__data__,At)>-1},lt.prototype.set=function(At,qt){var jt=this.__data__,ae=zt(jt,At);return ae<0?(++this.size,jt.push([At,qt])):jt[ae][1]=qt,this},pt.prototype.clear=function(){this.size=0,this.__data__={hash:new et,map:new(mt||lt),string:new et}},pt.prototype.delete=function(At){var qt=le(this,At).delete(At);return this.size-=qt?1:0,qt},pt.prototype.get=function(At){return le(this,At).get(At)},pt.prototype.has=function(At){return le(this,At).has(At)},pt.prototype.set=function(At,qt){var jt=le(this,At),ae=jt.size;return jt.set(At,qt),this.size+=jt.size==ae?0:1,this},bt.prototype.add=bt.prototype.push=function(At){return this.__data__.set(At,"__lodash_hash_undefined__"),this},bt.prototype.has=function(At){return this.__data__.has(At)},Et.prototype.clear=function(){this.__data__=new lt,this.size=0},Et.prototype.delete=function(At){var qt=this.__data__,jt=qt.delete(At);return this.size=qt.size,jt},Et.prototype.get=function(At){return this.__data__.get(At)},Et.prototype.has=function(At){return this.__data__.has(At)},Et.prototype.set=function(At,qt){var jt=this.__data__;if(jt instanceof lt){var ae=jt.__data__;if(!mt||ae.length<199)return ae.push([At,qt]),this.size=++jt.size,this;jt=this.__data__=new pt(ae)}return jt.set(At,qt),this.size=jt.size,this};var Ze=ct?function(At){return At==null?[]:(At=Object(At),function(qt,jt){for(var ae=-1,Qe=qt==null?0:qt.length,se=0,ve=[];++ae<Qe;){var $e=qt[ae];jt($e,ae,qt)&&(ve[se++]=$e)}return ve}(ct(At),function(qt){return ot.call(At,qt)}))}:function(){return[]},ce=Gt;function ke(At,qt){return!!(qt=qt??9007199254740991)&&(typeof At=="number"||f.test(At))&&At>-1&&At%1==0&&At<qt}function He(At){if(At!=null){try{return w.call(At)}catch{}try{return At+""}catch{}}return""}function $t(At,qt){return At===qt||At!=At&&qt!=qt}(rt&&ce(new rt(new ArrayBuffer(1)))!="[object DataView]"||mt&&ce(new mt)!=o||wt&&ce(wt.resolve())!="[object Promise]"||_t&&ce(new _t)!=s||Ct&&ce(new Ct)!="[object WeakMap]")&&(ce=function(At){var qt=Gt(At),jt=qt==a?At.constructor:void 0,ae=jt?He(jt):"";if(ae)switch(ae){case It:return"[object DataView]";case vt:return o;case kt:return"[object Promise]";case gt:return s;case ut:return"[object WeakMap]"}return qt});var Te=Jt(function(){return arguments}())?Jt:function(At){return Oe(At)&&C.call(At,"callee")&&!ot.call(At,"callee")},bi=Array.isArray,ue=W||function(){return!1};function Fe(At){if(!Le(At))return!1;var qt=Gt(At);return qt=="[object Function]"||qt=="[object GeneratorFunction]"||qt=="[object AsyncFunction]"||qt=="[object Proxy]"}function ai(At){return typeof At=="number"&&At>-1&&At%1==0&&At<=9007199254740991}function Le(At){var qt=typeof At;return At!=null&&(qt=="object"||qt=="function")}function Oe(At){return At!=null&&typeof At=="object"}var Qi=O?function(At){return function(qt){return At(qt)}}(O):function(At){return Oe(At)&&ai(At.length)&&!!c[Gt(At)]};function We(At){return(qt=At)!=null&&ai(qt.length)&&!Fe(qt)?Ot(At):Xt(At);var qt}t.exports=function(At,qt){return Kt(At,qt)}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],446:[function(e,t,n){(function(i){(function(){"use strict";var r=typeof i=="object"&&i&&i.Object===Object&&i,o=typeof self=="object"&&self&&self.Object===Object&&self,a=r||o||Function("return this")(),s=Object.prototype,u=s.hasOwnProperty,f=s.toString,c=a.Symbol,d=c?c.toStringTag:void 0;function m(v){return v==null?v===void 0?"[object Undefined]":"[object Null]":d&&d in Object(v)?function(p){var _=u.call(p,d),y=p[d];try{p[d]=void 0;var x=!0}catch{}var S=f.call(p);return x&&(_?p[d]=y:delete p[d]),S}(v):function(p){return f.call(p)}(v)}t.exports=function(v){if(!function(_){var y=typeof _;return _!=null&&(y=="object"||y=="function")}(v))return!1;var p=m(v);return p=="[object Function]"||p=="[object GeneratorFunction]"||p=="[object AsyncFunction]"||p=="[object Proxy]"}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],447:[function(e,t,n){"use strict";t.exports=function(i){return i==null}},{}],448:[function(e,t,n){"use strict";t.exports=function(i){return i===void 0}},{}],449:[function(e,t,n){(function(i){(function(){"use strict";var r=/^\[object .+?Constructor\]$/,o=typeof i=="object"&&i&&i.Object===Object&&i,a=typeof self=="object"&&self&&self.Object===Object&&self,s=o||a||Function("return this")();function u(it,ot){return!!(it&&it.length)&&function(dt,$,ct){if($!=$)return function(rt,mt,wt,_t){for(var Ct=rt.length,Ft=wt+(_t?1:-1);_t?Ft--:++Ft<Ct;)if(mt(rt[Ft],Ft,rt))return Ft;return-1}(dt,c,ct);for(var W=ct-1,V=dt.length;++W<V;)if(dt[W]===$)return W;return-1}(it,ot,0)>-1}function f(it,ot,dt){for(var $=-1,ct=it?it.length:0;++$<ct;)if(dt(ot,it[$]))return!0;return!1}function c(it){return it!=it}function d(it,ot){return it.has(ot)}function m(it){var ot=-1,dt=Array(it.size);return it.forEach(function($){dt[++ot]=$}),dt}var v,p=Array.prototype,_=Function.prototype,y=Object.prototype,x=s["__core-js_shared__"],S=(v=/[^.]+$/.exec(x&&x.keys&&x.keys.IE_PROTO||""))?"Symbol(src)_1."+v:"",O=_.toString,B=y.hasOwnProperty,U=y.toString,z=RegExp("^"+O.call(B).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),q=p.splice,G=F(s,"Map"),tt=F(s,"Set"),K=F(Object,"create");function D(it){var ot=-1,dt=it?it.length:0;for(this.clear();++ot<dt;){var $=it[ot];this.set($[0],$[1])}}function N(it){var ot=-1,dt=it?it.length:0;for(this.clear();++ot<dt;){var $=it[ot];this.set($[0],$[1])}}function Z(it){var ot=-1,dt=it?it.length:0;for(this.clear();++ot<dt;){var $=it[ot];this.set($[0],$[1])}}function w(it){var ot=-1,dt=it?it.length:0;for(this.__data__=new Z;++ot<dt;)this.add(it[ot])}function C(it,ot){for(var dt,$,ct=it.length;ct--;)if((dt=it[ct][0])===($=ot)||dt!=dt&&$!=$)return ct;return-1}function k(it){return!(!H(it)||(ot=it,S&&S in ot))&&(function(dt){var $=H(dt)?U.call(dt):"";return $=="[object Function]"||$=="[object GeneratorFunction]"}(it)||function(dt){var $=!1;if(dt!=null&&typeof dt.toString!="function")try{$=!!(dt+"")}catch{}return $}(it)?z:r).test(function(dt){if(dt!=null){try{return O.call(dt)}catch{}try{return dt+""}catch{}}return""}(it));var ot}D.prototype.clear=function(){this.__data__=K?K(null):{}},D.prototype.delete=function(it){return this.has(it)&&delete this.__data__[it]},D.prototype.get=function(it){var ot=this.__data__;if(K){var dt=ot[it];return dt==="__lodash_hash_undefined__"?void 0:dt}return B.call(ot,it)?ot[it]:void 0},D.prototype.has=function(it){var ot=this.__data__;return K?ot[it]!==void 0:B.call(ot,it)},D.prototype.set=function(it,ot){return this.__data__[it]=K&&ot===void 0?"__lodash_hash_undefined__":ot,this},N.prototype.clear=function(){this.__data__=[]},N.prototype.delete=function(it){var ot=this.__data__,dt=C(ot,it);return!(dt<0)&&(dt==ot.length-1?ot.pop():q.call(ot,dt,1),!0)},N.prototype.get=function(it){var ot=this.__data__,dt=C(ot,it);return dt<0?void 0:ot[dt][1]},N.prototype.has=function(it){return C(this.__data__,it)>-1},N.prototype.set=function(it,ot){var dt=this.__data__,$=C(dt,it);return $<0?dt.push([it,ot]):dt[$][1]=ot,this},Z.prototype.clear=function(){this.__data__={hash:new D,map:new(G||N),string:new D}},Z.prototype.delete=function(it){return R(this,it).delete(it)},Z.prototype.get=function(it){return R(this,it).get(it)},Z.prototype.has=function(it){return R(this,it).has(it)},Z.prototype.set=function(it,ot){return R(this,it).set(it,ot),this},w.prototype.add=w.prototype.push=function(it){return this.__data__.set(it,"__lodash_hash_undefined__"),this},w.prototype.has=function(it){return this.__data__.has(it)};var T=tt&&1/m(new tt([,-0]))[1]==1/0?function(it){return new tt(it)}:function(){};function R(it,ot){var dt,$,ct=it.__data__;return(($=typeof(dt=ot))=="string"||$=="number"||$=="symbol"||$=="boolean"?dt!=="__proto__":dt===null)?ct[typeof ot=="string"?"string":"hash"]:ct.map}function F(it,ot){var dt=function($,ct){return $?.[ct]}(it,ot);return k(dt)?dt:void 0}function H(it){var ot=typeof it;return!!it&&(ot=="object"||ot=="function")}t.exports=function(it){return it&&it.length?function(ot,dt,$){var ct=-1,W=u,V=ot.length,rt=!0,mt=[],wt=mt;if($)rt=!1,W=f;else if(V>=200){var _t=dt?null:T(ot);if(_t)return m(_t);rt=!1,W=d,wt=new w}else wt=dt?[]:mt;t:for(;++ct<V;){var Ct=ot[ct],Ft=dt?dt(Ct):Ct;if(Ct=$||Ct!==0?Ct:0,rt&&Ft==Ft){for(var It=wt.length;It--;)if(wt[It]===Ft)continue t;dt&&wt.push(Ft),mt.push(Ct)}else W(wt,Ft,$)||(wt!==mt&&wt.push(Ft),mt.push(Ct))}return mt}(it):[]}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],450:[function(e,t,n){"use strict";var i=e("inherits"),r=e("hash-base"),o=e("safe-buffer").Buffer,a=new Array(16);function s(){r.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function u(v,p){return v<<p|v>>>32-p}function f(v,p,_,y,x,S,O){return u(v+(p&_|~p&y)+x+S|0,O)+p|0}function c(v,p,_,y,x,S,O){return u(v+(p&y|_&~y)+x+S|0,O)+p|0}function d(v,p,_,y,x,S,O){return u(v+(p^_^y)+x+S|0,O)+p|0}function m(v,p,_,y,x,S,O){return u(v+(_^(p|~y))+x+S|0,O)+p|0}i(s,r),s.prototype._update=function(){for(var v=a,p=0;p<16;++p)v[p]=this._block.readInt32LE(4*p);var _=this._a,y=this._b,x=this._c,S=this._d;_=f(_,y,x,S,v[0],3614090360,7),S=f(S,_,y,x,v[1],3905402710,12),x=f(x,S,_,y,v[2],606105819,17),y=f(y,x,S,_,v[3],3250441966,22),_=f(_,y,x,S,v[4],4118548399,7),S=f(S,_,y,x,v[5],1200080426,12),x=f(x,S,_,y,v[6],2821735955,17),y=f(y,x,S,_,v[7],4249261313,22),_=f(_,y,x,S,v[8],1770035416,7),S=f(S,_,y,x,v[9],2336552879,12),x=f(x,S,_,y,v[10],4294925233,17),y=f(y,x,S,_,v[11],2304563134,22),_=f(_,y,x,S,v[12],1804603682,7),S=f(S,_,y,x,v[13],4254626195,12),x=f(x,S,_,y,v[14],2792965006,17),_=c(_,y=f(y,x,S,_,v[15],1236535329,22),x,S,v[1],4129170786,5),S=c(S,_,y,x,v[6],3225465664,9),x=c(x,S,_,y,v[11],643717713,14),y=c(y,x,S,_,v[0],3921069994,20),_=c(_,y,x,S,v[5],3593408605,5),S=c(S,_,y,x,v[10],38016083,9),x=c(x,S,_,y,v[15],3634488961,14),y=c(y,x,S,_,v[4],3889429448,20),_=c(_,y,x,S,v[9],568446438,5),S=c(S,_,y,x,v[14],3275163606,9),x=c(x,S,_,y,v[3],4107603335,14),y=c(y,x,S,_,v[8],1163531501,20),_=c(_,y,x,S,v[13],2850285829,5),S=c(S,_,y,x,v[2],4243563512,9),x=c(x,S,_,y,v[7],1735328473,14),_=d(_,y=c(y,x,S,_,v[12],2368359562,20),x,S,v[5],4294588738,4),S=d(S,_,y,x,v[8],2272392833,11),x=d(x,S,_,y,v[11],1839030562,16),y=d(y,x,S,_,v[14],4259657740,23),_=d(_,y,x,S,v[1],2763975236,4),S=d(S,_,y,x,v[4],1272893353,11),x=d(x,S,_,y,v[7],4139469664,16),y=d(y,x,S,_,v[10],3200236656,23),_=d(_,y,x,S,v[13],681279174,4),S=d(S,_,y,x,v[0],3936430074,11),x=d(x,S,_,y,v[3],3572445317,16),y=d(y,x,S,_,v[6],76029189,23),_=d(_,y,x,S,v[9],3654602809,4),S=d(S,_,y,x,v[12],3873151461,11),x=d(x,S,_,y,v[15],530742520,16),_=m(_,y=d(y,x,S,_,v[2],3299628645,23),x,S,v[0],4096336452,6),S=m(S,_,y,x,v[7],1126891415,10),x=m(x,S,_,y,v[14],2878612391,15),y=m(y,x,S,_,v[5],4237533241,21),_=m(_,y,x,S,v[12],1700485571,6),S=m(S,_,y,x,v[3],2399980690,10),x=m(x,S,_,y,v[10],4293915773,15),y=m(y,x,S,_,v[1],2240044497,21),_=m(_,y,x,S,v[8],1873313359,6),S=m(S,_,y,x,v[15],4264355552,10),x=m(x,S,_,y,v[6],2734768916,15),y=m(y,x,S,_,v[13],1309151649,21),_=m(_,y,x,S,v[4],4149444226,6),S=m(S,_,y,x,v[11],3174756917,10),x=m(x,S,_,y,v[2],718787259,15),y=m(y,x,S,_,v[9],3951481745,21),this._a=this._a+_|0,this._b=this._b+y|0,this._c=this._c+x|0,this._d=this._d+S|0},s.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var v=o.allocUnsafe(16);return v.writeInt32LE(this._a,0),v.writeInt32LE(this._b,4),v.writeInt32LE(this._c,8),v.writeInt32LE(this._d,12),v},t.exports=s},{"hash-base":425,inherits:440,"safe-buffer":494}],451:[function(e,t,n){"use strict";var i=e("bn.js"),r=e("brorand");function o(a){this.rand=a||new r.Rand}t.exports=o,o.create=function(a){return new o(a)},o.prototype._randbelow=function(a){var s=a.bitLength(),u=Math.ceil(s/8);do var f=new i(this.rand.generate(u));while(f.cmp(a)>=0);return f},o.prototype._randrange=function(a,s){var u=s.sub(a);return a.add(this._randbelow(u))},o.prototype.test=function(a,s,u){var f=a.bitLength(),c=i.mont(a),d=new i(1).toRed(c);s||(s=Math.max(1,f/48|0));for(var m=a.subn(1),v=0;!m.testn(v);v++);for(var p=a.shrn(v),_=m.toRed(c);s>0;s--){var y=this._randrange(new i(2),m);u&&u(y);var x=y.toRed(c).redPow(p);if(x.cmp(d)!==0&&x.cmp(_)!==0){for(var S=1;S<v;S++){if((x=x.redSqr()).cmp(d)===0)return!1;if(x.cmp(_)===0)break}if(S===v)return!1}}return!0},o.prototype.getDivisor=function(a,s){var u=a.bitLength(),f=i.mont(a),c=new i(1).toRed(f);s||(s=Math.max(1,u/48|0));for(var d=a.subn(1),m=0;!d.testn(m);m++);for(var v=a.shrn(m),p=d.toRed(f);s>0;s--){var _=this._randrange(new i(2),d),y=a.gcd(_);if(y.cmpn(1)!==0)return y;var x=_.toRed(f).redPow(v);if(x.cmp(c)!==0&&x.cmp(p)!==0){for(var S=1;S<m;S++){if((x=x.redSqr()).cmp(c)===0)return x.fromRed().subn(1).gcd(a);if(x.cmp(p)===0)break}if(S===m)return(x=x.redSqr()).fromRed().subn(1).gcd(a)}}return!1}},{"bn.js":452,brorand:187}],452:[function(e,t,n){arguments[4][184][0].apply(n,arguments)},{buffer:188,dup:184}],453:[function(e,t,n){"use strict";function i(r,o){if(!r)throw new Error(o||"Assertion failed")}t.exports=i,i.equal=function(r,o,a){if(r!=o)throw new Error(a||"Assertion failed: "+r+" != "+o)}},{}],454:[function(e,t,n){"use strict";var i=n;function r(a){return a.length===1?"0"+a:a}function o(a){for(var s="",u=0;u<a.length;u++)s+=r(a[u].toString(16));return s}i.toArray=function(a,s){if(Array.isArray(a))return a.slice();if(!a)return[];var u=[];if(typeof a!="string"){for(var f=0;f<a.length;f++)u[f]=0|a[f];return u}if(s==="hex")for((a=a.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(a="0"+a),f=0;f<a.length;f+=2)u.push(parseInt(a[f]+a[f+1],16));else for(f=0;f<a.length;f++){var c=a.charCodeAt(f),d=c>>8,m=255&c;d?u.push(d,m):u.push(m)}return u},i.zero2=r,i.toHex=o,i.encode=function(a,s){return s==="hex"?o(a):a}},{}],455:[function(e,t,n){t.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},{}],456:[function(e,t,n){"use strict";var i=e("asn1.js");n.certificate=e("./certificate");var r=i.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});n.RSAPrivateKey=r;var o=i.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});n.RSAPublicKey=o;var a=i.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(s),this.key("subjectPublicKey").bitstr())});n.PublicKey=a;var s=i.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),u=i.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(s),this.key("subjectPrivateKey").octstr())});n.PrivateKey=u;var f=i.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});n.EncryptedPrivateKey=f;var c=i.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});n.DSAPrivateKey=c,n.DSAparam=i.define("DSAparam",function(){this.int()});var d=i.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(m),this.key("publicKey").optional().explicit(1).bitstr())});n.ECPrivateKey=d;var m=i.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});n.signature=i.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})},{"./certificate":457,"asn1.js":170}],457:[function(e,t,n){"use strict";var i=e("asn1.js"),r=i.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),o=i.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),a=i.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),s=i.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(a),this.key("subjectPublicKey").bitstr())}),u=i.define("RelativeDistinguishedName",function(){this.setof(o)}),f=i.define("RDNSequence",function(){this.seqof(u)}),c=i.define("Name",function(){this.choice({rdnSequence:this.use(f)})}),d=i.define("Validity",function(){this.seq().obj(this.key("notBefore").use(r),this.key("notAfter").use(r))}),m=i.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),v=i.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(a),this.key("issuer").use(c),this.key("validity").use(d),this.key("subject").use(c),this.key("subjectPublicKeyInfo").use(s),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(m).optional())}),p=i.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(v),this.key("signatureAlgorithm").use(a),this.key("signatureValue").bitstr())});t.exports=p},{"asn1.js":170}],458:[function(e,t,n){"use strict";var i=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,r=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,o=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,a=e("evp_bytestokey"),s=e("browserify-aes"),u=e("safe-buffer").Buffer;t.exports=function(f,c){var d,m=f.toString(),v=m.match(i);if(v){var p="aes"+v[1],_=u.from(v[2],"hex"),y=u.from(v[3].replace(/[\r\n]/g,""),"base64"),x=a(c,_.slice(0,8),parseInt(v[1],10)).key,S=[],O=s.createDecipheriv(p,x,_);S.push(O.update(y)),S.push(O.final()),d=u.concat(S)}else{var B=m.match(o);d=u.from(B[2].replace(/[\r\n]/g,""),"base64")}return{tag:m.match(r)[1],data:d}}},{"browserify-aes":191,evp_bytestokey:423,"safe-buffer":494}],459:[function(e,t,n){"use strict";var i=e("./asn1"),r=e("./aesid.json"),o=e("./fixProc"),a=e("browserify-aes"),s=e("pbkdf2"),u=e("safe-buffer").Buffer;function f(c){var d;typeof c!="object"||u.isBuffer(c)||(d=c.passphrase,c=c.key),typeof c=="string"&&(c=u.from(c));var m,v,p=o(c,d),_=p.tag,y=p.data;switch(_){case"CERTIFICATE":v=i.certificate.decode(y,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(v||(v=i.PublicKey.decode(y,"der")),m=v.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return i.RSAPublicKey.decode(v.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return v.subjectPrivateKey=v.subjectPublicKey,{type:"ec",data:v};case"1.2.840.10040.4.1":return v.algorithm.params.pub_key=i.DSAparam.decode(v.subjectPublicKey.data,"der"),{type:"dsa",data:v.algorithm.params};default:throw new Error("unknown key id "+m)}case"ENCRYPTED PRIVATE KEY":y=function(x,S){var O=x.algorithm.decrypt.kde.kdeparams.salt,B=parseInt(x.algorithm.decrypt.kde.kdeparams.iters.toString(),10),U=r[x.algorithm.decrypt.cipher.algo.join(".")],z=x.algorithm.decrypt.cipher.iv,q=x.subjectPrivateKey,G=parseInt(U.split("-")[1],10)/8,tt=s.pbkdf2Sync(S,O,B,G,"sha1"),K=a.createDecipheriv(U,tt,z),D=[];return D.push(K.update(q)),D.push(K.final()),u.concat(D)}(y=i.EncryptedPrivateKey.decode(y,"der"),d);case"PRIVATE KEY":switch(m=(v=i.PrivateKey.decode(y,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return i.RSAPrivateKey.decode(v.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:v.algorithm.curve,privateKey:i.ECPrivateKey.decode(v.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return v.algorithm.params.priv_key=i.DSAparam.decode(v.subjectPrivateKey,"der"),{type:"dsa",params:v.algorithm.params};default:throw new Error("unknown key id "+m)}case"RSA PUBLIC KEY":return i.RSAPublicKey.decode(y,"der");case"RSA PRIVATE KEY":return i.RSAPrivateKey.decode(y,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:i.DSAPrivateKey.decode(y,"der")};case"EC PRIVATE KEY":return{curve:(y=i.ECPrivateKey.decode(y,"der")).parameters.value,privateKey:y.privateKey};default:throw new Error("unknown key type "+_)}}t.exports=f,f.signature=i.signature},{"./aesid.json":455,"./asn1":456,"./fixProc":458,"browserify-aes":191,pbkdf2:460,"safe-buffer":494}],460:[function(e,t,n){"use strict";n.pbkdf2=e("./lib/async"),n.pbkdf2Sync=e("./lib/sync")},{"./lib/async":461,"./lib/sync":464}],461:[function(e,t,n){(function(i){(function(){"use strict";var r,o,a=e("safe-buffer").Buffer,s=e("./precondition"),u=e("./default-encoding"),f=e("./sync"),c=e("./to-buffer"),d=i.crypto&&i.crypto.subtle,m={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},v=[];function p(){return o||(o=i.process&&i.process.nextTick?i.process.nextTick:i.queueMicrotask?i.queueMicrotask:i.setImmediate?i.setImmediate:i.setTimeout)}function _(y,x,S,O,B){return d.importKey("raw",y,{name:"PBKDF2"},!1,["deriveBits"]).then(function(U){return d.deriveBits({name:"PBKDF2",salt:x,iterations:S,hash:{name:B}},U,O<<3)}).then(function(U){return a.from(U)})}t.exports=function(y,x,S,O,B,U){typeof B=="function"&&(U=B,B=void 0);var z=m[(B=B||"sha1").toLowerCase()];if(z&&typeof i.Promise=="function"){if(s(S,O),y=c(y,u,"Password"),x=c(x,u,"Salt"),typeof U!="function")throw new Error("No callback provided to pbkdf2");(function(q,G){q.then(function(tt){p()(function(){G(null,tt)})},function(tt){p()(function(){G(tt)})})})(function(q){if(i.process&&!i.process.browser||!d||!d.importKey||!d.deriveBits)return Promise.resolve(!1);if(v[q]!==void 0)return v[q];var G=_(r=r||a.alloc(8),r,10,128,q).then(function(){return!0}).catch(function(){return!1});return v[q]=G,G}(z).then(function(q){return q?_(y,x,S,O,z):f(y,x,S,O,B)}),U)}else p()(function(){var q;try{q=f(y,x,S,O,B)}catch(G){return U(G)}U(null,q)})}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./default-encoding":462,"./precondition":463,"./sync":464,"./to-buffer":465,"safe-buffer":494}],462:[function(e,t,n){(function(i,r){(function(){"use strict";var o;r.process&&r.process.browser?o="utf-8":r.process&&r.process.version?o=parseInt(i.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary":o="utf-8",t.exports=o}).call(this)}).call(this,e("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467}],463:[function(e,t,n){"use strict";var i=Math.pow(2,30)-1;t.exports=function(r,o){if(typeof r!="number")throw new TypeError("Iterations not a number");if(r<0)throw new TypeError("Bad iterations");if(typeof o!="number")throw new TypeError("Key length not a number");if(o<0||o>i||o!=o)throw new TypeError("Bad key length")}},{}],464:[function(e,t,n){"use strict";var i=e("create-hash/md5"),r=e("ripemd160"),o=e("sha.js"),a=e("safe-buffer").Buffer,s=e("./precondition"),u=e("./default-encoding"),f=e("./to-buffer"),c=a.alloc(128),d={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function m(v,p,_){var y=function(z){function q(G){return o(z).update(G).digest()}return z==="rmd160"||z==="ripemd160"?function(G){return new r().update(G).digest()}:z==="md5"?i:q}(v),x=v==="sha512"||v==="sha384"?128:64;p.length>x?p=y(p):p.length<x&&(p=a.concat([p,c],x));for(var S=a.allocUnsafe(x+d[v]),O=a.allocUnsafe(x+d[v]),B=0;B<x;B++)S[B]=54^p[B],O[B]=92^p[B];var U=a.allocUnsafe(x+_+4);S.copy(U,0,0,x),this.ipad1=U,this.ipad2=S,this.opad=O,this.alg=v,this.blocksize=x,this.hash=y,this.size=d[v]}m.prototype.run=function(v,p){return v.copy(p,this.blocksize),this.hash(p).copy(this.opad,this.blocksize),this.hash(this.opad)},t.exports=function(v,p,_,y,x){s(_,y);var S=new m(x=x||"sha1",v=f(v,u,"Password"),(p=f(p,u,"Salt")).length),O=a.allocUnsafe(y),B=a.allocUnsafe(p.length+4);p.copy(B,0,0,p.length);for(var U=0,z=d[x],q=Math.ceil(y/z),G=1;G<=q;G++){B.writeUInt32BE(G,p.length);for(var tt=S.run(B,S.ipad1),K=tt,D=1;D<_;D++){K=S.run(K,S.ipad2);for(var N=0;N<z;N++)tt[N]^=K[N]}tt.copy(O,U),U+=z}return O}},{"./default-encoding":462,"./precondition":463,"./to-buffer":465,"create-hash/md5":387,ripemd160:493,"safe-buffer":494,"sha.js":498}],465:[function(e,t,n){"use strict";var i=e("safe-buffer").Buffer;t.exports=function(r,o,a){if(i.isBuffer(r))return r;if(typeof r=="string")return i.from(r,o);if(ArrayBuffer.isView(r))return i.from(r.buffer);throw new TypeError(a+" must be a string, a Buffer, a typed array or a DataView")}},{"safe-buffer":494}],466:[function(e,t,n){(function(i){(function(){"use strict";i===void 0||!i.version||i.version.indexOf("v0.")===0||i.version.indexOf("v1.")===0&&i.version.indexOf("v1.8.")!==0?t.exports={nextTick:function(r,o,a,s){if(typeof r!="function")throw new TypeError('"callback" argument must be a function');var u,f,c=arguments.length;switch(c){case 0:case 1:return i.nextTick(r);case 2:return i.nextTick(function(){r.call(null,o)});case 3:return i.nextTick(function(){r.call(null,o,a)});case 4:return i.nextTick(function(){r.call(null,o,a,s)});default:for(u=new Array(c-1),f=0;f<u.length;)u[f++]=arguments[f];return i.nextTick(function(){r.apply(null,u)})}}}:t.exports=i}).call(this)}).call(this,e("_process"))},{_process:467}],467:[function(e,t,n){"use strict";var i,r,o=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function u(x){if(i===setTimeout)return setTimeout(x,0);if((i===a||!i)&&setTimeout)return i=setTimeout,setTimeout(x,0);try{return i(x,0)}catch{try{return i.call(null,x,0)}catch{return i.call(this,x,0)}}}(function(){try{i=typeof setTimeout=="function"?setTimeout:a}catch{i=a}try{r=typeof clearTimeout=="function"?clearTimeout:s}catch{r=s}})();var f,c=[],d=!1,m=-1;function v(){d&&f&&(d=!1,f.length?c=f.concat(c):m=-1,c.length&&p())}function p(){if(!d){var x=u(v);d=!0;for(var S=c.length;S;){for(f=c,c=[];++m<S;)f&&f[m].run();m=-1,S=c.length}f=null,d=!1,function(O){if(r===clearTimeout)return clearTimeout(O);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(O);try{r(O)}catch{try{return r.call(null,O)}catch{return r.call(this,O)}}}(x)}}function _(x,S){this.fun=x,this.array=S}function y(){}o.nextTick=function(x){var S=new Array(arguments.length-1);if(arguments.length>1)for(var O=1;O<arguments.length;O++)S[O-1]=arguments[O];c.push(new _(x,S)),c.length!==1||d||u(p)},_.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(x){return[]},o.binding=function(x){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(x){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],468:[function(e,t,n){"use strict";n.publicEncrypt=e("./publicEncrypt"),n.privateDecrypt=e("./privateDecrypt"),n.privateEncrypt=function(i,r){return n.publicEncrypt(i,r,!0)},n.publicDecrypt=function(i,r){return n.privateDecrypt(i,r,!0)}},{"./privateDecrypt":471,"./publicEncrypt":472}],469:[function(e,t,n){"use strict";var i=e("create-hash"),r=e("safe-buffer").Buffer;function o(a){var s=r.allocUnsafe(4);return s.writeUInt32BE(a,0),s}t.exports=function(a,s){for(var u,f=r.alloc(0),c=0;f.length<s;)u=o(c++),f=r.concat([f,i("sha1").update(a).update(u).digest()]);return f.slice(0,s)}},{"create-hash":386,"safe-buffer":494}],470:[function(e,t,n){arguments[4][184][0].apply(n,arguments)},{buffer:188,dup:184}],471:[function(e,t,n){"use strict";var i=e("parse-asn1"),r=e("./mgf"),o=e("./xor"),a=e("bn.js"),s=e("browserify-rsa"),u=e("create-hash"),f=e("./withPublic"),c=e("safe-buffer").Buffer;t.exports=function(d,m,v){var p;p=d.padding?d.padding:v?1:4;var _,y=i(d),x=y.modulus.byteLength();if(m.length>x||new a(m).cmp(y.modulus)>=0)throw new Error("decryption error");_=v?f(new a(m),y):s(m,y);var S=c.alloc(x-_.length);if(_=c.concat([S,_],x),p===4)return function(O,B){var U=O.modulus.byteLength(),z=u("sha1").update(c.alloc(0)).digest(),q=z.length;if(B[0]!==0)throw new Error("decryption error");var G=B.slice(1,q+1),tt=B.slice(q+1),K=o(G,r(tt,q)),D=o(tt,r(K,U-q-1));if(function(Z,w){Z=c.from(Z),w=c.from(w);var C=0,k=Z.length;Z.length!==w.length&&(C++,k=Math.min(Z.length,w.length));for(var T=-1;++T<k;)C+=Z[T]^w[T];return C}(z,D.slice(0,q)))throw new Error("decryption error");for(var N=q;D[N]===0;)N++;if(D[N++]!==1)throw new Error("decryption error");return D.slice(N)}(y,_);if(p===1)return function(O,B,U){for(var z=B.slice(0,2),q=2,G=0;B[q++]!==0;)if(q>=B.length){G++;break}var tt=B.slice(2,q-1);if((z.toString("hex")!=="0002"&&!U||z.toString("hex")!=="0001"&&U)&&G++,tt.length<8&&G++,G)throw new Error("decryption error");return B.slice(q)}(0,_,v);if(p===3)return _;throw new Error("unknown padding")}},{"./mgf":469,"./withPublic":473,"./xor":474,"bn.js":470,"browserify-rsa":209,"create-hash":386,"parse-asn1":459,"safe-buffer":494}],472:[function(e,t,n){"use strict";var i=e("parse-asn1"),r=e("randombytes"),o=e("create-hash"),a=e("./mgf"),s=e("./xor"),u=e("bn.js"),f=e("./withPublic"),c=e("browserify-rsa"),d=e("safe-buffer").Buffer;t.exports=function(m,v,p){var _;_=m.padding?m.padding:p?1:4;var y,x=i(m);if(_===4)y=function(S,O){var B=S.modulus.byteLength(),U=O.length,z=o("sha1").update(d.alloc(0)).digest(),q=z.length,G=2*q;if(U>B-G-2)throw new Error("message too long");var tt=d.alloc(B-U-G-2),K=B-q-1,D=r(q),N=s(d.concat([z,tt,d.alloc(1,1),O],K),a(D,K)),Z=s(D,a(N,q));return new u(d.concat([d.alloc(1),Z,N],B))}(x,v);else if(_===1)y=function(S,O,B){var U,z=O.length,q=S.modulus.byteLength();if(z>q-11)throw new Error("message too long");return U=B?d.alloc(q-z-3,255):function(G){for(var tt,K=d.allocUnsafe(G),D=0,N=r(2*G),Z=0;D<G;)Z===N.length&&(N=r(2*G),Z=0),(tt=N[Z++])&&(K[D++]=tt);return K}(q-z-3),new u(d.concat([d.from([0,B?1:2]),U,d.alloc(1),O],q))}(x,v,p);else{if(_!==3)throw new Error("unknown padding");if((y=new u(v)).cmp(x.modulus)>=0)throw new Error("data too long for modulus")}return p?c(y,x):f(y,x)}},{"./mgf":469,"./withPublic":473,"./xor":474,"bn.js":470,"browserify-rsa":209,"create-hash":386,"parse-asn1":459,randombytes:475,"safe-buffer":494}],473:[function(e,t,n){"use strict";var i=e("bn.js"),r=e("safe-buffer").Buffer;t.exports=function(o,a){return r.from(o.toRed(i.mont(a.modulus)).redPow(new i(a.publicExponent)).fromRed().toArray())}},{"bn.js":470,"safe-buffer":494}],474:[function(e,t,n){"use strict";t.exports=function(i,r){for(var o=i.length,a=-1;++a<o;)i[a]^=r[a];return i}},{}],475:[function(e,t,n){(function(i,r){(function(){"use strict";var o=e("safe-buffer").Buffer,a=r.crypto||r.msCrypto;a&&a.getRandomValues?t.exports=function(s,u){if(s>4294967295)throw new RangeError("requested too many random bytes");var f=o.allocUnsafe(s);if(s>0)if(s>65536)for(var c=0;c<s;c+=65536)a.getRandomValues(f.slice(c,c+65536));else a.getRandomValues(f);return typeof u=="function"?i.nextTick(function(){u(null,f)}):f}:t.exports=function(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}}).call(this)}).call(this,e("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467,"safe-buffer":494}],476:[function(e,t,n){(function(i,r){(function(){"use strict";function o(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var a=e("safe-buffer"),s=e("randombytes"),u=a.Buffer,f=a.kMaxLength,c=r.crypto||r.msCrypto,d=Math.pow(2,32)-1;function m(_,y){if(typeof _!="number"||_!=_)throw new TypeError("offset must be a number");if(_>d||_<0)throw new TypeError("offset must be a uint32");if(_>f||_>y)throw new RangeError("offset out of range")}function v(_,y,x){if(typeof _!="number"||_!=_)throw new TypeError("size must be a number");if(_>d||_<0)throw new TypeError("size must be a uint32");if(_+y>x||_>f)throw new RangeError("buffer too small")}function p(_,y,x,S){if(i.browser){var O=_.buffer,B=new Uint8Array(O,y,x);return c.getRandomValues(B),S?void i.nextTick(function(){S(null,_)}):_}if(!S)return s(x).copy(_,y),_;s(x,function(U,z){if(U)return S(U);z.copy(_,y),S(null,_)})}c&&c.getRandomValues||!i.browser?(n.randomFill=function(_,y,x,S){if(!(u.isBuffer(_)||_ instanceof r.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof y=="function")S=y,y=0,x=_.length;else if(typeof x=="function")S=x,x=_.length-y;else if(typeof S!="function")throw new TypeError('"cb" argument must be a function');return m(y,_.length),v(x,y,_.length),p(_,y,x,S)},n.randomFillSync=function(_,y,x){if(y===void 0&&(y=0),!(u.isBuffer(_)||_ instanceof r.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return m(y,_.length),x===void 0&&(x=_.length-y),v(x,y,_.length),p(_,y,x)}):(n.randomFill=o,n.randomFillSync=o)}).call(this)}).call(this,e("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467,randombytes:475,"safe-buffer":494}],477:[function(e,t,n){"use strict";var i={};function r(a,s,u){u||(u=Error);var f=function(c){var d,m;function v(p,_,y){return c.call(this,function(x,S,O){return typeof s=="string"?s:s(x,S,O)}(p,_,y))||this}return m=c,(d=v).prototype=Object.create(m.prototype),d.prototype.constructor=d,d.__proto__=m,v}(u);f.prototype.name=u.name,f.prototype.code=a,i[a]=f}function o(a,s){if(Array.isArray(a)){var u=a.length;return a=a.map(function(f){return String(f)}),u>2?"one of ".concat(s," ").concat(a.slice(0,u-1).join(", "),", or ")+a[u-1]:u===2?"one of ".concat(s," ").concat(a[0]," or ").concat(a[1]):"of ".concat(s," ").concat(a[0])}return"of ".concat(s," ").concat(String(a))}r("ERR_INVALID_OPT_VALUE",function(a,s){return'The value "'+s+'" is invalid for option "'+a+'"'},TypeError),r("ERR_INVALID_ARG_TYPE",function(a,s,u){var f,c,d,m;if(typeof s=="string"&&(c="not ",s.substr(!d||d<0?0:+d,c.length)===c)?(f="must not be",s=s.replace(/^not /,"")):f="must be",function(p,_,y){return(y===void 0||y>p.length)&&(y=p.length),p.substring(y-_.length,y)===_}(a," argument"))m="The ".concat(a," ").concat(f," ").concat(o(s,"type"));else{var v=function(p,_,y){return typeof y!="number"&&(y=0),!(y+_.length>p.length)&&p.indexOf(_,y)!==-1}(a,".")?"property":"argument";m='The "'.concat(a,'" ').concat(v," ").concat(f," ").concat(o(s,"type"))}return m+=". Received type ".concat(typeof u)},TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",function(a){return"The "+a+" method is not implemented"}),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",function(a){return"Cannot call "+a+" after a stream was destroyed"}),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",function(a){return"Unknown encoding: "+a},TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=i},{}],478:[function(e,t,n){(function(i){(function(){"use strict";var r=Object.keys||function(v){var p=[];for(var _ in v)p.push(_);return p};t.exports=c;var o=e("./_stream_readable"),a=e("./_stream_writable");e("inherits")(c,o);for(var s=r(a.prototype),u=0;u<s.length;u++){var f=s[u];c.prototype[f]||(c.prototype[f]=a.prototype[f])}function c(v){if(!(this instanceof c))return new c(v);o.call(this,v),a.call(this,v),this.allowHalfOpen=!0,v&&(v.readable===!1&&(this.readable=!1),v.writable===!1&&(this.writable=!1),v.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",d)))}function d(){this._writableState.ended||i.nextTick(m,this)}function m(v){v.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(v){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=v,this._writableState.destroyed=v)}})}).call(this)}).call(this,e("_process"))},{"./_stream_readable":480,"./_stream_writable":482,_process:467,inherits:440}],479:[function(e,t,n){"use strict";t.exports=r;var i=e("./_stream_transform");function r(o){if(!(this instanceof r))return new r(o);i.call(this,o)}e("inherits")(r,i),r.prototype._transform=function(o,a,s){s(null,o)}},{"./_stream_transform":481,inherits:440}],480:[function(e,t,n){(function(i,r){(function(){"use strict";var o;t.exports=K,K.ReadableState=tt,e("events").EventEmitter;var a=function(W,V){return W.listeners(V).length},s=e("./internal/streams/stream"),u=e("buffer").Buffer,f=(r!==void 0?r:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},c,d=e("util");c=d&&d.debuglog?d.debuglog("stream"):function(){};var m,v,p,_=e("./internal/streams/buffer_list"),y=e("./internal/streams/destroy"),x=e("./internal/streams/state").getHighWaterMark,S=e("../errors").codes,O=S.ERR_INVALID_ARG_TYPE,B=S.ERR_STREAM_PUSH_AFTER_EOF,U=S.ERR_METHOD_NOT_IMPLEMENTED,z=S.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")(K,s);var q=y.errorOrDestroy,G=["error","close","destroy","pause","resume"];function tt(W,V,rt){o=o||e("./_stream_duplex"),W=W||{},typeof rt!="boolean"&&(rt=V instanceof o),this.objectMode=!!W.objectMode,rt&&(this.objectMode=this.objectMode||!!W.readableObjectMode),this.highWaterMark=x(this,W,"readableHighWaterMark",rt),this.buffer=new _,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=W.emitClose!==!1,this.autoDestroy=!!W.autoDestroy,this.destroyed=!1,this.defaultEncoding=W.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,W.encoding&&(m||(m=e("string_decoder/").StringDecoder),this.decoder=new m(W.encoding),this.encoding=W.encoding)}function K(W){if(o=o||e("./_stream_duplex"),!(this instanceof K))return new K(W);var V=this instanceof o;this._readableState=new tt(W,this,V),this.readable=!0,W&&(typeof W.read=="function"&&(this._read=W.read),typeof W.destroy=="function"&&(this._destroy=W.destroy)),s.call(this)}function D(W,V,rt,mt,wt){c("readableAddChunk",V);var _t,Ct=W._readableState;if(V===null)Ct.reading=!1,function(Ft,It){if(c("onEofChunk"),!It.ended){if(It.decoder){var vt=It.decoder.end();vt&&vt.length&&(It.buffer.push(vt),It.length+=It.objectMode?1:vt.length)}It.ended=!0,It.sync?w(Ft):(It.needReadable=!1,It.emittedReadable||(It.emittedReadable=!0,C(Ft)))}}(W,Ct);else if(wt||(_t=function(Ft,It){var vt;kt=It,u.isBuffer(kt)||kt instanceof f||typeof It=="string"||It===void 0||Ft.objectMode||(vt=new O("chunk",["string","Buffer","Uint8Array"],It));var kt;return vt}(Ct,V)),_t)q(W,_t);else if(Ct.objectMode||V&&V.length>0)if(typeof V=="string"||Ct.objectMode||Object.getPrototypeOf(V)===u.prototype||(V=function(Ft){return u.from(Ft)}(V)),mt)Ct.endEmitted?q(W,new z):N(W,Ct,V,!0);else if(Ct.ended)q(W,new B);else{if(Ct.destroyed)return!1;Ct.reading=!1,Ct.decoder&&!rt?(V=Ct.decoder.write(V),Ct.objectMode||V.length!==0?N(W,Ct,V,!1):k(W,Ct)):N(W,Ct,V,!1)}else mt||(Ct.reading=!1,k(W,Ct));return!Ct.ended&&(Ct.length<Ct.highWaterMark||Ct.length===0)}function N(W,V,rt,mt){V.flowing&&V.length===0&&!V.sync?(V.awaitDrain=0,W.emit("data",rt)):(V.length+=V.objectMode?1:rt.length,mt?V.buffer.unshift(rt):V.buffer.push(rt),V.needReadable&&w(W)),k(W,V)}Object.defineProperty(K.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(W){this._readableState&&(this._readableState.destroyed=W)}}),K.prototype.destroy=y.destroy,K.prototype._undestroy=y.undestroy,K.prototype._destroy=function(W,V){V(W)},K.prototype.push=function(W,V){var rt,mt=this._readableState;return mt.objectMode?rt=!0:typeof W=="string"&&((V=V||mt.defaultEncoding)!==mt.encoding&&(W=u.from(W,V),V=""),rt=!0),D(this,W,V,!1,rt)},K.prototype.unshift=function(W){return D(this,W,null,!0,!1)},K.prototype.isPaused=function(){return this._readableState.flowing===!1},K.prototype.setEncoding=function(W){m||(m=e("string_decoder/").StringDecoder);var V=new m(W);this._readableState.decoder=V,this._readableState.encoding=this._readableState.decoder.encoding;for(var rt=this._readableState.buffer.head,mt="";rt!==null;)mt+=V.write(rt.data),rt=rt.next;return this._readableState.buffer.clear(),mt!==""&&this._readableState.buffer.push(mt),this._readableState.length=mt.length,this};function Z(W,V){return W<=0||V.length===0&&V.ended?0:V.objectMode?1:W!=W?V.flowing&&V.length?V.buffer.head.data.length:V.length:(W>V.highWaterMark&&(V.highWaterMark=function(rt){return rt>=1073741824?rt=1073741824:(rt--,rt|=rt>>>1,rt|=rt>>>2,rt|=rt>>>4,rt|=rt>>>8,rt|=rt>>>16,rt++),rt}(W)),W<=V.length?W:V.ended?V.length:(V.needReadable=!0,0))}function w(W){var V=W._readableState;c("emitReadable",V.needReadable,V.emittedReadable),V.needReadable=!1,V.emittedReadable||(c("emitReadable",V.flowing),V.emittedReadable=!0,i.nextTick(C,W))}function C(W){var V=W._readableState;c("emitReadable_",V.destroyed,V.length,V.ended),V.destroyed||!V.length&&!V.ended||(W.emit("readable"),V.emittedReadable=!1),V.needReadable=!V.flowing&&!V.ended&&V.length<=V.highWaterMark,it(W)}function k(W,V){V.readingMore||(V.readingMore=!0,i.nextTick(T,W,V))}function T(W,V){for(;!V.reading&&!V.ended&&(V.length<V.highWaterMark||V.flowing&&V.length===0);){var rt=V.length;if(c("maybeReadMore read 0"),W.read(0),rt===V.length)break}V.readingMore=!1}function R(W){var V=W._readableState;V.readableListening=W.listenerCount("readable")>0,V.resumeScheduled&&!V.paused?V.flowing=!0:W.listenerCount("data")>0&&W.resume()}function F(W){c("readable nexttick read 0"),W.read(0)}function H(W,V){c("resume",V.reading),V.reading||W.read(0),V.resumeScheduled=!1,W.emit("resume"),it(W),V.flowing&&!V.reading&&W.read(0)}function it(W){var V=W._readableState;for(c("flow",V.flowing);V.flowing&&W.read()!==null;);}function ot(W,V){return V.length===0?null:(V.objectMode?rt=V.buffer.shift():!W||W>=V.length?(rt=V.decoder?V.buffer.join(""):V.buffer.length===1?V.buffer.first():V.buffer.concat(V.length),V.buffer.clear()):rt=V.buffer.consume(W,V.decoder),rt);var rt}function dt(W){var V=W._readableState;c("endReadable",V.endEmitted),V.endEmitted||(V.ended=!0,i.nextTick($,V,W))}function $(W,V){if(c("endReadableNT",W.endEmitted,W.length),!W.endEmitted&&W.length===0&&(W.endEmitted=!0,V.readable=!1,V.emit("end"),W.autoDestroy)){var rt=V._writableState;(!rt||rt.autoDestroy&&rt.finished)&&V.destroy()}}function ct(W,V){for(var rt=0,mt=W.length;rt<mt;rt++)if(W[rt]===V)return rt;return-1}K.prototype.read=function(W){c("read",W),W=parseInt(W,10);var V=this._readableState,rt=W;if(W!==0&&(V.emittedReadable=!1),W===0&&V.needReadable&&((V.highWaterMark!==0?V.length>=V.highWaterMark:V.length>0)||V.ended))return c("read: emitReadable",V.length,V.ended),V.length===0&&V.ended?dt(this):w(this),null;if((W=Z(W,V))===0&&V.ended)return V.length===0&&dt(this),null;var mt,wt=V.needReadable;return c("need readable",wt),(V.length===0||V.length-W<V.highWaterMark)&&c("length less than watermark",wt=!0),V.ended||V.reading?c("reading or ended",wt=!1):wt&&(c("do read"),V.reading=!0,V.sync=!0,V.length===0&&(V.needReadable=!0),this._read(V.highWaterMark),V.sync=!1,V.reading||(W=Z(rt,V))),(mt=W>0?ot(W,V):null)===null?(V.needReadable=V.length<=V.highWaterMark,W=0):(V.length-=W,V.awaitDrain=0),V.length===0&&(V.ended||(V.needReadable=!0),rt!==W&&V.ended&&dt(this)),mt!==null&&this.emit("data",mt),mt},K.prototype._read=function(W){q(this,new U("_read()"))},K.prototype.pipe=function(W,V){var rt=this,mt=this._readableState;switch(mt.pipesCount){case 0:mt.pipes=W;break;case 1:mt.pipes=[mt.pipes,W];break;default:mt.pipes.push(W)}mt.pipesCount+=1,c("pipe count=%d opts=%j",mt.pipesCount,V);var wt=(!V||V.end!==!1)&&W!==i.stdout&&W!==i.stderr?Ct:Q;function _t(Y,et){c("onunpipe"),Y===rt&&et&&et.hasUnpiped===!1&&(et.hasUnpiped=!0,c("cleanup"),W.removeListener("close",gt),W.removeListener("finish",ut),W.removeListener("drain",Ft),W.removeListener("error",kt),W.removeListener("unpipe",_t),rt.removeListener("end",Ct),rt.removeListener("end",Q),rt.removeListener("data",vt),It=!0,!mt.awaitDrain||W._writableState&&!W._writableState.needDrain||Ft())}function Ct(){c("onend"),W.end()}mt.endEmitted?i.nextTick(wt):rt.once("end",wt),W.on("unpipe",_t);var Ft=function(Y){return function(){var et=Y._readableState;c("pipeOnDrain",et.awaitDrain),et.awaitDrain&&et.awaitDrain--,et.awaitDrain===0&&a(Y,"data")&&(et.flowing=!0,it(Y))}}(rt);W.on("drain",Ft);var It=!1;function vt(Y){c("ondata");var et=W.write(Y);c("dest.write",et),et===!1&&((mt.pipesCount===1&&mt.pipes===W||mt.pipesCount>1&&ct(mt.pipes,W)!==-1)&&!It&&(c("false write response, pause",mt.awaitDrain),mt.awaitDrain++),rt.pause())}function kt(Y){c("onerror",Y),Q(),W.removeListener("error",kt),a(W,"error")===0&&q(W,Y)}function gt(){W.removeListener("finish",ut),Q()}function ut(){c("onfinish"),W.removeListener("close",gt),Q()}function Q(){c("unpipe"),rt.unpipe(W)}return rt.on("data",vt),function(Y,et,lt){if(typeof Y.prependListener=="function")return Y.prependListener(et,lt);Y._events&&Y._events[et]?Array.isArray(Y._events[et])?Y._events[et].unshift(lt):Y._events[et]=[lt,Y._events[et]]:Y.on(et,lt)}(W,"error",kt),W.once("close",gt),W.once("finish",ut),W.emit("pipe",rt),mt.flowing||(c("pipe resume"),rt.resume()),W},K.prototype.unpipe=function(W){var V=this._readableState,rt={hasUnpiped:!1};if(V.pipesCount===0)return this;if(V.pipesCount===1)return W&&W!==V.pipes||(W||(W=V.pipes),V.pipes=null,V.pipesCount=0,V.flowing=!1,W&&W.emit("unpipe",this,rt)),this;if(!W){var mt=V.pipes,wt=V.pipesCount;V.pipes=null,V.pipesCount=0,V.flowing=!1;for(var _t=0;_t<wt;_t++)mt[_t].emit("unpipe",this,{hasUnpiped:!1});return this}var Ct=ct(V.pipes,W);return Ct===-1||(V.pipes.splice(Ct,1),V.pipesCount-=1,V.pipesCount===1&&(V.pipes=V.pipes[0]),W.emit("unpipe",this,rt)),this},K.prototype.on=function(W,V){var rt=s.prototype.on.call(this,W,V),mt=this._readableState;return W==="data"?(mt.readableListening=this.listenerCount("readable")>0,mt.flowing!==!1&&this.resume()):W==="readable"&&(mt.endEmitted||mt.readableListening||(mt.readableListening=mt.needReadable=!0,mt.flowing=!1,mt.emittedReadable=!1,c("on readable",mt.length,mt.reading),mt.length?w(this):mt.reading||i.nextTick(F,this))),rt},K.prototype.addListener=K.prototype.on,K.prototype.removeListener=function(W,V){var rt=s.prototype.removeListener.call(this,W,V);return W==="readable"&&i.nextTick(R,this),rt},K.prototype.removeAllListeners=function(W){var V=s.prototype.removeAllListeners.apply(this,arguments);return W!=="readable"&&W!==void 0||i.nextTick(R,this),V},K.prototype.resume=function(){var W=this._readableState;return W.flowing||(c("resume"),W.flowing=!W.readableListening,function(V,rt){rt.resumeScheduled||(rt.resumeScheduled=!0,i.nextTick(H,V,rt))}(this,W)),W.paused=!1,this},K.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},K.prototype.wrap=function(W){var V=this,rt=this._readableState,mt=!1;for(var wt in W.on("end",function(){if(c("wrapped end"),rt.decoder&&!rt.ended){var Ct=rt.decoder.end();Ct&&Ct.length&&V.push(Ct)}V.push(null)}),W.on("data",function(Ct){c("wrapped data"),rt.decoder&&(Ct=rt.decoder.write(Ct)),rt.objectMode&&Ct==null||(rt.objectMode||Ct&&Ct.length)&&(V.push(Ct)||(mt=!0,W.pause()))}),W)this[wt]===void 0&&typeof W[wt]=="function"&&(this[wt]=function(Ct){return function(){return W[Ct].apply(W,arguments)}}(wt));for(var _t=0;_t<G.length;_t++)W.on(G[_t],this.emit.bind(this,G[_t]));return this._read=function(Ct){c("wrapped _read",Ct),mt&&(mt=!1,W.resume())},this},typeof Symbol=="function"&&(K.prototype[Symbol.asyncIterator]=function(){return v===void 0&&(v=e("./internal/streams/async_iterator")),v(this)}),Object.defineProperty(K.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(K.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(K.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(W){this._readableState&&(this._readableState.flowing=W)}}),K._fromList=ot,Object.defineProperty(K.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(K.from=function(W,V){return p===void 0&&(p=e("./internal/streams/from")),p(K,W,V)})}).call(this)}).call(this,e("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":477,"./_stream_duplex":478,"./internal/streams/async_iterator":483,"./internal/streams/buffer_list":484,"./internal/streams/destroy":485,"./internal/streams/from":487,"./internal/streams/state":489,"./internal/streams/stream":490,_process:467,buffer:220,events:422,inherits:440,"string_decoder/":522,util:188}],481:[function(e,t,n){"use strict";t.exports=c;var i=e("../errors").codes,r=i.ERR_METHOD_NOT_IMPLEMENTED,o=i.ERR_MULTIPLE_CALLBACK,a=i.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=i.ERR_TRANSFORM_WITH_LENGTH_0,u=e("./_stream_duplex");function f(v,p){var _=this._transformState;_.transforming=!1;var y=_.writecb;if(y===null)return this.emit("error",new o);_.writechunk=null,_.writecb=null,p!=null&&this.push(p),y(v);var x=this._readableState;x.reading=!1,(x.needReadable||x.length<x.highWaterMark)&&this._read(x.highWaterMark)}function c(v){if(!(this instanceof c))return new c(v);u.call(this,v),this._transformState={afterTransform:f.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,v&&(typeof v.transform=="function"&&(this._transform=v.transform),typeof v.flush=="function"&&(this._flush=v.flush)),this.on("prefinish",d)}function d(){var v=this;typeof this._flush!="function"||this._readableState.destroyed?m(this,null,null):this._flush(function(p,_){m(v,p,_)})}function m(v,p,_){if(p)return v.emit("error",p);if(_!=null&&v.push(_),v._writableState.length)throw new s;if(v._transformState.transforming)throw new a;return v.push(null)}e("inherits")(c,u),c.prototype.push=function(v,p){return this._transformState.needTransform=!1,u.prototype.push.call(this,v,p)},c.prototype._transform=function(v,p,_){_(new r("_transform()"))},c.prototype._write=function(v,p,_){var y=this._transformState;if(y.writecb=_,y.writechunk=v,y.writeencoding=p,!y.transforming){var x=this._readableState;(y.needTransform||x.needReadable||x.length<x.highWaterMark)&&this._read(x.highWaterMark)}},c.prototype._read=function(v){var p=this._transformState;p.writechunk===null||p.transforming?p.needTransform=!0:(p.transforming=!0,this._transform(p.writechunk,p.writeencoding,p.afterTransform))},c.prototype._destroy=function(v,p){u.prototype._destroy.call(this,v,function(_){p(_)})}},{"../errors":477,"./_stream_duplex":478,inherits:440}],482:[function(e,t,n){(function(i,r){(function(){"use strict";function o(T){var R=this;this.next=null,this.entry=null,this.finish=function(){(function(F,H,it){var ot=F.entry;for(F.entry=null;ot;){var dt=ot.callback;H.pendingcb--,dt(it),ot=ot.next}H.corkedRequestsFree.next=F})(R,T)}}var a;t.exports=K,K.WritableState=tt;var s={deprecate:e("util-deprecate")},u=e("./internal/streams/stream"),f=e("buffer").Buffer,c=(r!==void 0?r:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},d,m=e("./internal/streams/destroy"),v=e("./internal/streams/state").getHighWaterMark,p=e("../errors").codes,_=p.ERR_INVALID_ARG_TYPE,y=p.ERR_METHOD_NOT_IMPLEMENTED,x=p.ERR_MULTIPLE_CALLBACK,S=p.ERR_STREAM_CANNOT_PIPE,O=p.ERR_STREAM_DESTROYED,B=p.ERR_STREAM_NULL_VALUES,U=p.ERR_STREAM_WRITE_AFTER_END,z=p.ERR_UNKNOWN_ENCODING,q=m.errorOrDestroy;function G(){}function tt(T,R,F){a=a||e("./_stream_duplex"),T=T||{},typeof F!="boolean"&&(F=R instanceof a),this.objectMode=!!T.objectMode,F&&(this.objectMode=this.objectMode||!!T.writableObjectMode),this.highWaterMark=v(this,T,"writableHighWaterMark",F),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var H=T.decodeStrings===!1;this.decodeStrings=!H,this.defaultEncoding=T.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(it){(function(ot,dt){var $=ot._writableState,ct=$.sync,W=$.writecb;if(typeof W!="function")throw new x;if(function(rt){rt.writing=!1,rt.writecb=null,rt.length-=rt.writelen,rt.writelen=0}($),dt)(function(rt,mt,wt,_t,Ct){--mt.pendingcb,wt?(i.nextTick(Ct,_t),i.nextTick(k,rt,mt),rt._writableState.errorEmitted=!0,q(rt,_t)):(Ct(_t),rt._writableState.errorEmitted=!0,q(rt,_t),k(rt,mt))})(ot,$,ct,dt,W);else{var V=w($)||ot.destroyed;V||$.corked||$.bufferProcessing||!$.bufferedRequest||Z(ot,$),ct?i.nextTick(N,ot,$,V,W):N(ot,$,V,W)}})(R,it)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=T.emitClose!==!1,this.autoDestroy=!!T.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function K(T){var R=this instanceof(a=a||e("./_stream_duplex"));if(!R&&!d.call(K,this))return new K(T);this._writableState=new tt(T,this,R),this.writable=!0,T&&(typeof T.write=="function"&&(this._write=T.write),typeof T.writev=="function"&&(this._writev=T.writev),typeof T.destroy=="function"&&(this._destroy=T.destroy),typeof T.final=="function"&&(this._final=T.final)),u.call(this)}function D(T,R,F,H,it,ot,dt){R.writelen=H,R.writecb=dt,R.writing=!0,R.sync=!0,R.destroyed?R.onwrite(new O("write")):F?T._writev(it,R.onwrite):T._write(it,ot,R.onwrite),R.sync=!1}function N(T,R,F,H){F||function(it,ot){ot.length===0&&ot.needDrain&&(ot.needDrain=!1,it.emit("drain"))}(T,R),R.pendingcb--,H(),k(T,R)}function Z(T,R){R.bufferProcessing=!0;var F=R.bufferedRequest;if(T._writev&&F&&F.next){var H=R.bufferedRequestCount,it=new Array(H),ot=R.corkedRequestsFree;ot.entry=F;for(var dt=0,$=!0;F;)it[dt]=F,F.isBuf||($=!1),F=F.next,dt+=1;it.allBuffers=$,D(T,R,!0,R.length,it,"",ot.finish),R.pendingcb++,R.lastBufferedRequest=null,ot.next?(R.corkedRequestsFree=ot.next,ot.next=null):R.corkedRequestsFree=new o(R),R.bufferedRequestCount=0}else{for(;F;){var ct=F.chunk,W=F.encoding,V=F.callback;if(D(T,R,!1,R.objectMode?1:ct.length,ct,W,V),F=F.next,R.bufferedRequestCount--,R.writing)break}F===null&&(R.lastBufferedRequest=null)}R.bufferedRequest=F,R.bufferProcessing=!1}function w(T){return T.ending&&T.length===0&&T.bufferedRequest===null&&!T.finished&&!T.writing}function C(T,R){T._final(function(F){R.pendingcb--,F&&q(T,F),R.prefinished=!0,T.emit("prefinish"),k(T,R)})}function k(T,R){var F=w(R);if(F&&(function(it,ot){ot.prefinished||ot.finalCalled||(typeof it._final!="function"||ot.destroyed?(ot.prefinished=!0,it.emit("prefinish")):(ot.pendingcb++,ot.finalCalled=!0,i.nextTick(C,it,ot)))}(T,R),R.pendingcb===0&&(R.finished=!0,T.emit("finish"),R.autoDestroy))){var H=T._readableState;(!H||H.autoDestroy&&H.endEmitted)&&T.destroy()}return F}e("inherits")(K,u),tt.prototype.getBuffer=function(){for(var T=this.bufferedRequest,R=[];T;)R.push(T),T=T.next;return R},function(){try{Object.defineProperty(tt.prototype,"buffer",{get:s.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(K,Symbol.hasInstance,{value:function(T){return!!d.call(this,T)||this===K&&T&&T._writableState instanceof tt}})):d=function(T){return T instanceof this},K.prototype.pipe=function(){q(this,new S)},K.prototype.write=function(T,R,F){var H,it=this._writableState,ot=!1,dt=!it.objectMode&&(H=T,f.isBuffer(H)||H instanceof c);return dt&&!f.isBuffer(T)&&(T=function($){return f.from($)}(T)),typeof R=="function"&&(F=R,R=null),dt?R="buffer":R||(R=it.defaultEncoding),typeof F!="function"&&(F=G),it.ending?function($,ct){var W=new U;q($,W),i.nextTick(ct,W)}(this,F):(dt||function($,ct,W,V){var rt;return W===null?rt=new B:typeof W=="string"||ct.objectMode||(rt=new _("chunk",["string","Buffer"],W)),!rt||(q($,rt),i.nextTick(V,rt),!1)}(this,it,T,F))&&(it.pendingcb++,ot=function($,ct,W,V,rt,mt){if(!W){var wt=function(It,vt,kt){return It.objectMode||It.decodeStrings===!1||typeof vt!="string"||(vt=f.from(vt,kt)),vt}(ct,V,rt);V!==wt&&(W=!0,rt="buffer",V=wt)}var _t=ct.objectMode?1:V.length;ct.length+=_t;var Ct=ct.length<ct.highWaterMark;if(Ct||(ct.needDrain=!0),ct.writing||ct.corked){var Ft=ct.lastBufferedRequest;ct.lastBufferedRequest={chunk:V,encoding:rt,isBuf:W,callback:mt,next:null},Ft?Ft.next=ct.lastBufferedRequest:ct.bufferedRequest=ct.lastBufferedRequest,ct.bufferedRequestCount+=1}else D($,ct,!1,_t,V,rt,mt);return Ct}(this,it,dt,T,R,F)),ot},K.prototype.cork=function(){this._writableState.corked++},K.prototype.uncork=function(){var T=this._writableState;T.corked&&(T.corked--,T.writing||T.corked||T.bufferProcessing||!T.bufferedRequest||Z(this,T))},K.prototype.setDefaultEncoding=function(T){if(typeof T=="string"&&(T=T.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((T+"").toLowerCase())>-1))throw new z(T);return this._writableState.defaultEncoding=T,this},Object.defineProperty(K.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(K.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),K.prototype._write=function(T,R,F){F(new y("_write()"))},K.prototype._writev=null,K.prototype.end=function(T,R,F){var H=this._writableState;return typeof T=="function"?(F=T,T=null,R=null):typeof R=="function"&&(F=R,R=null),T!=null&&this.write(T,R),H.corked&&(H.corked=1,this.uncork()),H.ending||function(it,ot,dt){ot.ending=!0,k(it,ot),dt&&(ot.finished?i.nextTick(dt):it.once("finish",dt)),ot.ended=!0,it.writable=!1}(this,H,F),this},Object.defineProperty(K.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(K.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(T){this._writableState&&(this._writableState.destroyed=T)}}),K.prototype.destroy=m.destroy,K.prototype._undestroy=m.undestroy,K.prototype._destroy=function(T,R){R(T)}}).call(this)}).call(this,e("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":477,"./_stream_duplex":478,"./internal/streams/destroy":485,"./internal/streams/state":489,"./internal/streams/stream":490,_process:467,buffer:220,inherits:440,"util-deprecate":524}],483:[function(e,t,n){(function(i){(function(){"use strict";var r;function o(O,B,U){return(B=function(z){var q=function(G,tt){if(typeof G!="object"||G===null)return G;var K=G[Symbol.toPrimitive];if(K!==void 0){var D=K.call(G,tt||"default");if(typeof D!="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return(tt==="string"?String:Number)(G)}(z,"string");return typeof q=="symbol"?q:String(q)}(B))in O?Object.defineProperty(O,B,{value:U,enumerable:!0,configurable:!0,writable:!0}):O[B]=U,O}var a=e("./end-of-stream"),s=Symbol("lastResolve"),u=Symbol("lastReject"),f=Symbol("error"),c=Symbol("ended"),d=Symbol("lastPromise"),m=Symbol("handlePromise"),v=Symbol("stream");function p(O,B){return{value:O,done:B}}function _(O){var B=O[s];if(B!==null){var U=O[v].read();U!==null&&(O[d]=null,O[s]=null,O[u]=null,B(p(U,!1)))}}function y(O){i.nextTick(_,O)}var x=Object.getPrototypeOf(function(){}),S=Object.setPrototypeOf((o(r={get stream(){return this[v]},next:function(){var O=this,B=this[f];if(B!==null)return Promise.reject(B);if(this[c])return Promise.resolve(p(void 0,!0));if(this[v].destroyed)return new Promise(function(G,tt){i.nextTick(function(){O[f]?tt(O[f]):G(p(void 0,!0))})});var U,z=this[d];if(z)U=new Promise(function(G,tt){return function(K,D){G.then(function(){tt[c]?K(p(void 0,!0)):tt[m](K,D)},D)}}(z,this));else{var q=this[v].read();if(q!==null)return Promise.resolve(p(q,!1));U=new Promise(this[m])}return this[d]=U,U}},Symbol.asyncIterator,function(){return this}),o(r,"return",function(){var O=this;return new Promise(function(B,U){O[v].destroy(null,function(z){z?U(z):B(p(void 0,!0))})})}),r),x);t.exports=function(O){var B,U=Object.create(S,(o(B={},v,{value:O,writable:!0}),o(B,s,{value:null,writable:!0}),o(B,u,{value:null,writable:!0}),o(B,f,{value:null,writable:!0}),o(B,c,{value:O._readableState.endEmitted,writable:!0}),o(B,m,{value:function(z,q){var G=U[v].read();G?(U[d]=null,U[s]=null,U[u]=null,z(p(G,!1))):(U[s]=z,U[u]=q)},writable:!0}),B));return U[d]=null,a(O,function(z){if(z&&z.code!=="ERR_STREAM_PREMATURE_CLOSE"){var q=U[u];return q!==null&&(U[d]=null,U[s]=null,U[u]=null,q(z)),void(U[f]=z)}var G=U[s];G!==null&&(U[d]=null,U[s]=null,U[u]=null,G(p(void 0,!0))),U[c]=!0}),O.on("readable",y.bind(null,U)),U}}).call(this)}).call(this,e("_process"))},{"./end-of-stream":486,_process:467}],484:[function(e,t,n){"use strict";function i(d,m){var v=Object.keys(d);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(d);m&&(p=p.filter(function(_){return Object.getOwnPropertyDescriptor(d,_).enumerable})),v.push.apply(v,p)}return v}function r(d){for(var m=1;m<arguments.length;m++){var v=arguments[m]!=null?arguments[m]:{};m%2?i(Object(v),!0).forEach(function(p){o(d,p,v[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(v)):i(Object(v)).forEach(function(p){Object.defineProperty(d,p,Object.getOwnPropertyDescriptor(v,p))})}return d}function o(d,m,v){return(m=s(m))in d?Object.defineProperty(d,m,{value:v,enumerable:!0,configurable:!0,writable:!0}):d[m]=v,d}function a(d,m){for(var v=0;v<m.length;v++){var p=m[v];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,s(p.key),p)}}function s(d){var m=function(v,p){if(typeof v!="object"||v===null)return v;var _=v[Symbol.toPrimitive];if(_!==void 0){var y=_.call(v,p||"default");if(typeof y!="object")return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(p==="string"?String:Number)(v)}(d,"string");return typeof m=="symbol"?m:String(m)}var u=e("buffer").Buffer,f=e("util").inspect,c=f&&f.custom||"inspect";t.exports=function(){function d(){(function(_,y){if(!(_ instanceof y))throw new TypeError("Cannot call a class as a function")})(this,d),this.head=null,this.tail=null,this.length=0}var m,v,p;return m=d,(v=[{key:"push",value:function(_){var y={data:_,next:null};this.length>0?this.tail.next=y:this.head=y,this.tail=y,++this.length}},{key:"unshift",value:function(_){var y={data:_,next:this.head};this.length===0&&(this.tail=y),this.head=y,++this.length}},{key:"shift",value:function(){if(this.length!==0){var _=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,_}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(_){if(this.length===0)return"";for(var y=this.head,x=""+y.data;y=y.next;)x+=_+y.data;return x}},{key:"concat",value:function(_){if(this.length===0)return u.alloc(0);for(var y,x,S,O=u.allocUnsafe(_>>>0),B=this.head,U=0;B;)y=B.data,x=O,S=U,u.prototype.copy.call(y,x,S),U+=B.data.length,B=B.next;return O}},{key:"consume",value:function(_,y){var x;return _<this.head.data.length?(x=this.head.data.slice(0,_),this.head.data=this.head.data.slice(_)):x=_===this.head.data.length?this.shift():y?this._getString(_):this._getBuffer(_),x}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(_){var y=this.head,x=1,S=y.data;for(_-=S.length;y=y.next;){var O=y.data,B=_>O.length?O.length:_;if(B===O.length?S+=O:S+=O.slice(0,_),(_-=B)==0){B===O.length?(++x,y.next?this.head=y.next:this.head=this.tail=null):(this.head=y,y.data=O.slice(B));break}++x}return this.length-=x,S}},{key:"_getBuffer",value:function(_){var y=u.allocUnsafe(_),x=this.head,S=1;for(x.data.copy(y),_-=x.data.length;x=x.next;){var O=x.data,B=_>O.length?O.length:_;if(O.copy(y,y.length-_,0,B),(_-=B)==0){B===O.length?(++S,x.next?this.head=x.next:this.head=this.tail=null):(this.head=x,x.data=O.slice(B));break}++S}return this.length-=S,y}},{key:c,value:function(_,y){return f(this,r(r({},y),{},{depth:0,customInspect:!1}))}}])&&a(m.prototype,v),p&&a(m,p),Object.defineProperty(m,"prototype",{writable:!1}),d}()},{buffer:220,util:188}],485:[function(e,t,n){(function(i){(function(){"use strict";function r(s,u){a(s,u),o(s)}function o(s){s._writableState&&!s._writableState.emitClose||s._readableState&&!s._readableState.emitClose||s.emit("close")}function a(s,u){s.emit("error",u)}t.exports={destroy:function(s,u){var f=this,c=this._readableState&&this._readableState.destroyed,d=this._writableState&&this._writableState.destroyed;return c||d?(u?u(s):s&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,i.nextTick(a,this,s)):i.nextTick(a,this,s)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(s||null,function(m){!u&&m?f._writableState?f._writableState.errorEmitted?i.nextTick(o,f):(f._writableState.errorEmitted=!0,i.nextTick(r,f,m)):i.nextTick(r,f,m):u?(i.nextTick(o,f),u(m)):i.nextTick(o,f)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(s,u){var f=s._readableState,c=s._writableState;f&&f.autoDestroy||c&&c.autoDestroy?s.destroy(u):s.emit("error",u)}}}).call(this)}).call(this,e("_process"))},{_process:467}],486:[function(e,t,n){"use strict";var i=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function r(){}t.exports=function o(a,s,u){if(typeof s=="function")return o(a,null,s);s||(s={}),u=function(O){var B=!1;return function(){if(!B){B=!0;for(var U=arguments.length,z=new Array(U),q=0;q<U;q++)z[q]=arguments[q];O.apply(this,z)}}}(u||r);var f=s.readable||s.readable!==!1&&a.readable,c=s.writable||s.writable!==!1&&a.writable,d=function(){a.writable||v()},m=a._writableState&&a._writableState.finished,v=function(){c=!1,m=!0,f||u.call(a)},p=a._readableState&&a._readableState.endEmitted,_=function(){f=!1,p=!0,c||u.call(a)},y=function(O){u.call(a,O)},x=function(){var O;return f&&!p?(a._readableState&&a._readableState.ended||(O=new i),u.call(a,O)):c&&!m?(a._writableState&&a._writableState.ended||(O=new i),u.call(a,O)):void 0},S=function(){a.req.on("finish",v)};return function(O){return O.setHeader&&typeof O.abort=="function"}(a)?(a.on("complete",v),a.on("abort",x),a.req?S():a.on("request",S)):c&&!a._writableState&&(a.on("end",d),a.on("close",d)),a.on("end",_),a.on("finish",v),s.error!==!1&&a.on("error",y),a.on("close",x),function(){a.removeListener("complete",v),a.removeListener("abort",x),a.removeListener("request",S),a.req&&a.req.removeListener("finish",v),a.removeListener("end",d),a.removeListener("close",d),a.removeListener("finish",v),a.removeListener("end",_),a.removeListener("error",y),a.removeListener("close",x)}}},{"../../../errors":477}],487:[function(e,t,n){"use strict";t.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],488:[function(e,t,n){"use strict";var i,r=e("../../../errors").codes,o=r.ERR_MISSING_ARGS,a=r.ERR_STREAM_DESTROYED;function s(m){if(m)throw m}function u(m,v,p,_){_=function(S){var O=!1;return function(){O||(O=!0,S.apply(void 0,arguments))}}(_);var y=!1;m.on("close",function(){y=!0}),i===void 0&&(i=e("./end-of-stream")),i(m,{readable:v,writable:p},function(S){if(S)return _(S);y=!0,_()});var x=!1;return function(S){if(!y&&!x)return x=!0,function(O){return O.setHeader&&typeof O.abort=="function"}(m)?m.abort():typeof m.destroy=="function"?m.destroy():void _(S||new a("pipe"))}}function f(m){m()}function c(m,v){return m.pipe(v)}function d(m){return m.length?typeof m[m.length-1]!="function"?s:m.pop():s}t.exports=function(){for(var m=arguments.length,v=new Array(m),p=0;p<m;p++)v[p]=arguments[p];var _,y=d(v);if(Array.isArray(v[0])&&(v=v[0]),v.length<2)throw new o("streams");var x=v.map(function(S,O){var B=O<v.length-1;return u(S,B,O>0,function(U){_||(_=U),U&&x.forEach(f),B||(x.forEach(f),y(_))})});return v.reduce(c)}},{"../../../errors":477,"./end-of-stream":486}],489:[function(e,t,n){"use strict";var i=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(r,o,a,s){var u=function(f,c,d){return f.highWaterMark!=null?f.highWaterMark:c?f[d]:null}(o,s,a);if(u!=null){if(!isFinite(u)||Math.floor(u)!==u||u<0)throw new i(s?a:"highWaterMark",u);return Math.floor(u)}return r.objectMode?16:16384}}},{"../../../errors":477}],490:[function(e,t,n){"use strict";t.exports=e("events").EventEmitter},{events:422}],491:[function(e,t,n){"use strict";(n=t.exports=e("./lib/_stream_readable.js")).Stream=n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js"),n.finished=e("./lib/internal/streams/end-of-stream.js"),n.pipeline=e("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":478,"./lib/_stream_passthrough.js":479,"./lib/_stream_readable.js":480,"./lib/_stream_transform.js":481,"./lib/_stream_writable.js":482,"./lib/internal/streams/end-of-stream.js":486,"./lib/internal/streams/pipeline.js":488}],492:[function(e,t,n){"use strict";var i=function(r){var o=Object.prototype,a=o.hasOwnProperty,s=Object.defineProperty||function(k,T,R){k[T]=R.value},u=typeof Symbol=="function"?Symbol:{},f=u.iterator||"@@iterator",c=u.asyncIterator||"@@asyncIterator",d=u.toStringTag||"@@toStringTag";function m(k,T,R){return Object.defineProperty(k,T,{value:R,enumerable:!0,configurable:!0,writable:!0}),k[T]}try{m({},"")}catch{m=function(T,R,F){return T[R]=F}}function v(k,T,R,F){var H=T&&T.prototype instanceof y?T:y,it=Object.create(H.prototype),ot=new Z(F||[]);return s(it,"_invoke",{value:tt(k,R,ot)}),it}function p(k,T,R){try{return{type:"normal",arg:k.call(T,R)}}catch(F){return{type:"throw",arg:F}}}r.wrap=v;var _={};function y(){}function x(){}function S(){}var O={};m(O,f,function(){return this});var B=Object.getPrototypeOf,U=B&&B(B(w([])));U&&U!==o&&a.call(U,f)&&(O=U);var z=S.prototype=y.prototype=Object.create(O);function q(k){["next","throw","return"].forEach(function(T){m(k,T,function(R){return this._invoke(T,R)})})}function G(k,T){var R;s(this,"_invoke",{value:function(F,H){function it(){return new T(function(ot,dt){(function $(ct,W,V,rt){var mt=p(k[ct],k,W);if(mt.type!=="throw"){var wt=mt.arg,_t=wt.value;return _t&&typeof _t=="object"&&a.call(_t,"__await")?T.resolve(_t.__await).then(function(Ct){$("next",Ct,V,rt)},function(Ct){$("throw",Ct,V,rt)}):T.resolve(_t).then(function(Ct){wt.value=Ct,V(wt)},function(Ct){return $("throw",Ct,V,rt)})}rt(mt.arg)})(F,H,ot,dt)})}return R=R?R.then(it,it):it()}})}function tt(k,T,R){var F="suspendedStart";return function(H,it){if(F==="executing")throw new Error("Generator is already running");if(F==="completed"){if(H==="throw")throw it;return C()}for(R.method=H,R.arg=it;;){var ot=R.delegate;if(ot){var dt=K(ot,R);if(dt){if(dt===_)continue;return dt}}if(R.method==="next")R.sent=R._sent=R.arg;else if(R.method==="throw"){if(F==="suspendedStart")throw F="completed",R.arg;R.dispatchException(R.arg)}else R.method==="return"&&R.abrupt("return",R.arg);F="executing";var $=p(k,T,R);if($.type==="normal"){if(F=R.done?"completed":"suspendedYield",$.arg===_)continue;return{value:$.arg,done:R.done}}$.type==="throw"&&(F="completed",R.method="throw",R.arg=$.arg)}}}function K(k,T){var R=T.method,F=k.iterator[R];if(F===void 0)return T.delegate=null,R==="throw"&&k.iterator.return&&(T.method="return",T.arg=void 0,K(k,T),T.method==="throw")||R!=="return"&&(T.method="throw",T.arg=new TypeError("The iterator does not provide a '"+R+"' method")),_;var H=p(F,k.iterator,T.arg);if(H.type==="throw")return T.method="throw",T.arg=H.arg,T.delegate=null,_;var it=H.arg;return it?it.done?(T[k.resultName]=it.value,T.next=k.nextLoc,T.method!=="return"&&(T.method="next",T.arg=void 0),T.delegate=null,_):it:(T.method="throw",T.arg=new TypeError("iterator result is not an object"),T.delegate=null,_)}function D(k){var T={tryLoc:k[0]};1 in k&&(T.catchLoc=k[1]),2 in k&&(T.finallyLoc=k[2],T.afterLoc=k[3]),this.tryEntries.push(T)}function N(k){var T=k.completion||{};T.type="normal",delete T.arg,k.completion=T}function Z(k){this.tryEntries=[{tryLoc:"root"}],k.forEach(D,this),this.reset(!0)}function w(k){if(k){var T=k[f];if(T)return T.call(k);if(typeof k.next=="function")return k;if(!isNaN(k.length)){var R=-1,F=function H(){for(;++R<k.length;)if(a.call(k,R))return H.value=k[R],H.done=!1,H;return H.value=void 0,H.done=!0,H};return F.next=F}}return{next:C}}function C(){return{value:void 0,done:!0}}return x.prototype=S,s(z,"constructor",{value:S,configurable:!0}),s(S,"constructor",{value:x,configurable:!0}),x.displayName=m(S,d,"GeneratorFunction"),r.isGeneratorFunction=function(k){var T=typeof k=="function"&&k.constructor;return!!T&&(T===x||(T.displayName||T.name)==="GeneratorFunction")},r.mark=function(k){return Object.setPrototypeOf?Object.setPrototypeOf(k,S):(k.__proto__=S,m(k,d,"GeneratorFunction")),k.prototype=Object.create(z),k},r.awrap=function(k){return{__await:k}},q(G.prototype),m(G.prototype,c,function(){return this}),r.AsyncIterator=G,r.async=function(k,T,R,F,H){H===void 0&&(H=Promise);var it=new G(v(k,T,R,F),H);return r.isGeneratorFunction(T)?it:it.next().then(function(ot){return ot.done?ot.value:it.next()})},q(z),m(z,d,"Generator"),m(z,f,function(){return this}),m(z,"toString",function(){return"[object Generator]"}),r.keys=function(k){var T=Object(k),R=[];for(var F in T)R.push(F);return R.reverse(),function H(){for(;R.length;){var it=R.pop();if(it in T)return H.value=it,H.done=!1,H}return H.done=!0,H}},r.values=w,Z.prototype={constructor:Z,reset:function(k){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(N),!k)for(var T in this)T.charAt(0)==="t"&&a.call(this,T)&&!isNaN(+T.slice(1))&&(this[T]=void 0)},stop:function(){this.done=!0;var k=this.tryEntries[0].completion;if(k.type==="throw")throw k.arg;return this.rval},dispatchException:function(k){if(this.done)throw k;var T=this;function R($,ct){return it.type="throw",it.arg=k,T.next=$,ct&&(T.method="next",T.arg=void 0),!!ct}for(var F=this.tryEntries.length-1;F>=0;--F){var H=this.tryEntries[F],it=H.completion;if(H.tryLoc==="root")return R("end");if(H.tryLoc<=this.prev){var ot=a.call(H,"catchLoc"),dt=a.call(H,"finallyLoc");if(ot&&dt){if(this.prev<H.catchLoc)return R(H.catchLoc,!0);if(this.prev<H.finallyLoc)return R(H.finallyLoc)}else if(ot){if(this.prev<H.catchLoc)return R(H.catchLoc,!0)}else{if(!dt)throw new Error("try statement without catch or finally");if(this.prev<H.finallyLoc)return R(H.finallyLoc)}}}},abrupt:function(k,T){for(var R=this.tryEntries.length-1;R>=0;--R){var F=this.tryEntries[R];if(F.tryLoc<=this.prev&&a.call(F,"finallyLoc")&&this.prev<F.finallyLoc){var H=F;break}}H&&(k==="break"||k==="continue")&&H.tryLoc<=T&&T<=H.finallyLoc&&(H=null);var it=H?H.completion:{};return it.type=k,it.arg=T,H?(this.method="next",this.next=H.finallyLoc,_):this.complete(it)},complete:function(k,T){if(k.type==="throw")throw k.arg;return k.type==="break"||k.type==="continue"?this.next=k.arg:k.type==="return"?(this.rval=this.arg=k.arg,this.method="return",this.next="end"):k.type==="normal"&&T&&(this.next=T),_},finish:function(k){for(var T=this.tryEntries.length-1;T>=0;--T){var R=this.tryEntries[T];if(R.finallyLoc===k)return this.complete(R.completion,R.afterLoc),N(R),_}},catch:function(k){for(var T=this.tryEntries.length-1;T>=0;--T){var R=this.tryEntries[T];if(R.tryLoc===k){var F=R.completion;if(F.type==="throw"){var H=F.arg;N(R)}return H}}throw new Error("illegal catch attempt")},delegateYield:function(k,T,R){return this.delegate={iterator:w(k),resultName:T,nextLoc:R},this.method==="next"&&(this.arg=void 0),_}},r}(typeof t=="object"?t.exports:{});try{regeneratorRuntime=i}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}},{}],493:[function(e,t,n){"use strict";var i=e("buffer").Buffer,r=e("inherits"),o=e("hash-base"),a=new Array(16),s=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],u=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],f=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],c=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],d=[0,1518500249,1859775393,2400959708,2840853838],m=[1352829926,1548603684,1836072691,2053994217,0];function v(){o.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function p(B,U){return B<<U|B>>>32-U}function _(B,U,z,q,G,tt,K,D){return p(B+(U^z^q)+tt+K|0,D)+G|0}function y(B,U,z,q,G,tt,K,D){return p(B+(U&z|~U&q)+tt+K|0,D)+G|0}function x(B,U,z,q,G,tt,K,D){return p(B+((U|~z)^q)+tt+K|0,D)+G|0}function S(B,U,z,q,G,tt,K,D){return p(B+(U&q|z&~q)+tt+K|0,D)+G|0}function O(B,U,z,q,G,tt,K,D){return p(B+(U^(z|~q))+tt+K|0,D)+G|0}r(v,o),v.prototype._update=function(){for(var B=a,U=0;U<16;++U)B[U]=this._block.readInt32LE(4*U);for(var z=0|this._a,q=0|this._b,G=0|this._c,tt=0|this._d,K=0|this._e,D=0|this._a,N=0|this._b,Z=0|this._c,w=0|this._d,C=0|this._e,k=0;k<80;k+=1){var T,R;k<16?(T=_(z,q,G,tt,K,B[s[k]],d[0],f[k]),R=O(D,N,Z,w,C,B[u[k]],m[0],c[k])):k<32?(T=y(z,q,G,tt,K,B[s[k]],d[1],f[k]),R=S(D,N,Z,w,C,B[u[k]],m[1],c[k])):k<48?(T=x(z,q,G,tt,K,B[s[k]],d[2],f[k]),R=x(D,N,Z,w,C,B[u[k]],m[2],c[k])):k<64?(T=S(z,q,G,tt,K,B[s[k]],d[3],f[k]),R=y(D,N,Z,w,C,B[u[k]],m[3],c[k])):(T=O(z,q,G,tt,K,B[s[k]],d[4],f[k]),R=_(D,N,Z,w,C,B[u[k]],m[4],c[k])),z=K,K=tt,tt=p(G,10),G=q,q=T,D=C,C=w,w=p(Z,10),Z=N,N=R}var F=this._b+G+w|0;this._b=this._c+tt+C|0,this._c=this._d+K+D|0,this._d=this._e+z+N|0,this._e=this._a+q+Z|0,this._a=F},v.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var B=i.alloc?i.alloc(20):new i(20);return B.writeInt32LE(this._a,0),B.writeInt32LE(this._b,4),B.writeInt32LE(this._c,8),B.writeInt32LE(this._d,12),B.writeInt32LE(this._e,16),B},t.exports=v},{buffer:220,"hash-base":425,inherits:440}],494:[function(e,t,n){"use strict";var i=e("buffer"),r=i.Buffer;function o(s,u){for(var f in s)u[f]=s[f]}function a(s,u,f){return r(s,u,f)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=i:(o(i,n),n.Buffer=a),a.prototype=Object.create(r.prototype),o(r,a),a.from=function(s,u,f){if(typeof s=="number")throw new TypeError("Argument must not be a number");return r(s,u,f)},a.alloc=function(s,u,f){if(typeof s!="number")throw new TypeError("Argument must be a number");var c=r(s);return u!==void 0?typeof f=="string"?c.fill(u,f):c.fill(u):c.fill(0),c},a.allocUnsafe=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return r(s)},a.allocUnsafeSlow=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return i.SlowBuffer(s)}},{buffer:220}],495:[function(e,t,n){(function(i){(function(){"use strict";var r,o=e("buffer"),a=o.Buffer,s={};for(r in o)o.hasOwnProperty(r)&&r!=="SlowBuffer"&&r!=="Buffer"&&(s[r]=o[r]);var u=s.Buffer={};for(r in a)a.hasOwnProperty(r)&&r!=="allocUnsafe"&&r!=="allocUnsafeSlow"&&(u[r]=a[r]);if(s.Buffer.prototype=a.prototype,u.from&&u.from!==Uint8Array.from||(u.from=function(f,c,d){if(typeof f=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof f);if(f&&f.length===void 0)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f);return a(f,c,d)}),u.alloc||(u.alloc=function(f,c,d){if(typeof f!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof f);if(f<0||f>=2*(1<<30))throw new RangeError('The value "'+f+'" is invalid for option "size"');var m=a(f);return c&&c.length!==0?typeof d=="string"?m.fill(c,d):m.fill(c):m.fill(0),m}),!s.kStringMaxLength)try{s.kStringMaxLength=i.binding("buffer").kStringMaxLength}catch{}s.constants||(s.constants={MAX_LENGTH:s.kMaxLength},s.kStringMaxLength&&(s.constants.MAX_STRING_LENGTH=s.kStringMaxLength)),t.exports=s}).call(this)}).call(this,e("_process"))},{_process:467,buffer:220}],496:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});let i=e("xmlchars/xml/1.0/ed5"),r=e("xmlchars/xml/1.1/ed2"),o=e("xmlchars/xmlns/1.0/ed3");var a=i.isS,s=i.isChar,u=i.isNameStartChar,f=i.isNameChar,c=i.S_LIST,d=i.NAME_RE,m=r.isChar,v=o.isNCNameStartChar,p=o.isNCNameChar,_=o.NC_NAME_RE;let y="http://www.w3.org/XML/1998/namespace",x="http://www.w3.org/2000/xmlns/",S={__proto__:null,xml:y,xmlns:x},O={__proto__:null,amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},B=w=>w===34||w===39,U=[34,39],z=[...U,91,62],q=[...U,60,93],G=[61,63,...c],tt=[...c,62,38,60];function K(w,C,k){switch(C){case"xml":k!==y&&w.fail(`xml prefix must be bound to ${y}.`);break;case"xmlns":k!==x&&w.fail(`xmlns prefix must be bound to ${x}.`)}switch(k){case x:w.fail(C===""?`the default namespace may not be set to ${k}.`:`may not assign a prefix (even "xmlns") to the URI ${x}.`);break;case y:switch(C){case"xml":break;case"":w.fail(`the default namespace may not be set to ${k}.`);break;default:w.fail("may not assign the xml namespace to another prefix.")}}}let D=w=>_.test(w),N=w=>d.test(w);n.EVENTS=["xmldecl","text","processinginstruction","doctype","comment","opentagstart","attribute","opentag","closetag","cdata","error","end","ready"];let Z={xmldecl:"xmldeclHandler",text:"textHandler",processinginstruction:"piHandler",doctype:"doctypeHandler",comment:"commentHandler",opentagstart:"openTagStartHandler",attribute:"attributeHandler",opentag:"openTagHandler",closetag:"closeTagHandler",cdata:"cdataHandler",error:"errorHandler",end:"endHandler",ready:"readyHandler"};n.SaxesParser=class{constructor(w){this.opt=w??{},this.fragmentOpt=!!this.opt.fragment;let C=this.xmlnsOpt=!!this.opt.xmlns;if(this.trackPosition=this.opt.position!==!1,this.fileName=this.opt.fileName,C){this.nameStartCheck=v,this.nameCheck=p,this.isName=D,this.processAttribs=this.processAttribsNS,this.pushAttrib=this.pushAttribNS,this.ns=Object.assign({__proto__:null},S);let k=this.opt.additionalNamespaces;k!=null&&(function(T,R){for(let F of Object.keys(R))K(T,F,R[F])}(this,k),Object.assign(this.ns,k))}else this.nameStartCheck=u,this.nameCheck=f,this.isName=N,this.processAttribs=this.processAttribsPlain,this.pushAttrib=this.pushAttribPlain;this.stateTable=[this.sBegin,this.sBeginWhitespace,this.sDoctype,this.sDoctypeQuote,this.sDTD,this.sDTDQuoted,this.sDTDOpenWaka,this.sDTDOpenWakaBang,this.sDTDComment,this.sDTDCommentEnding,this.sDTDCommentEnded,this.sDTDPI,this.sDTDPIEnding,this.sText,this.sEntity,this.sOpenWaka,this.sOpenWakaBang,this.sComment,this.sCommentEnding,this.sCommentEnded,this.sCData,this.sCDataEnding,this.sCDataEnding2,this.sPIFirstChar,this.sPIRest,this.sPIBody,this.sPIEnding,this.sXMLDeclNameStart,this.sXMLDeclName,this.sXMLDeclEq,this.sXMLDeclValueStart,this.sXMLDeclValue,this.sXMLDeclSeparator,this.sXMLDeclEnding,this.sOpenTag,this.sOpenTagSlash,this.sAttrib,this.sAttribName,this.sAttribNameSawWhite,this.sAttribValue,this.sAttribValueQuoted,this.sAttribValueClosed,this.sAttribValueUnquoted,this.sCloseTag,this.sCloseTagSawWhite],this._init()}get closed(){return this._closed}_init(){var w;this.openWakaBang="",this.text="",this.name="",this.piTarget="",this.entity="",this.q=null,this.tags=[],this.tag=null,this.topNS=null,this.chunk="",this.chunkPosition=0,this.i=0,this.prevI=0,this.carriedFromPrevious=void 0,this.forbiddenState=0,this.attribList=[];let{fragmentOpt:C}=this;this.state=C?13:0,this.reportedTextBeforeRoot=this.reportedTextAfterRoot=this.closedRoot=this.sawRoot=C,this.xmlDeclPossible=!C,this.xmlDeclExpects=["version"],this.entityReturnState=void 0;let{defaultXMLVersion:k}=this.opt;if(k===void 0){if(this.opt.forceXMLVersion===!0)throw new Error("forceXMLVersion set but defaultXMLVersion is not set");k="1.0"}this.setXMLVersion(k),this.positionAtNewLine=0,this.doctype=!1,this._closed=!1,this.xmlDecl={version:void 0,encoding:void 0,standalone:void 0},this.line=1,this.column=0,this.ENTITIES=Object.create(O),(w=this.readyHandler)===null||w===void 0||w.call(this)}get position(){return this.chunkPosition+this.i}get columnIndex(){return this.position-this.positionAtNewLine}on(w,C){this[Z[w]]=C}off(w){this[Z[w]]=void 0}makeError(w){var C;let k=(C=this.fileName)!==null&&C!==void 0?C:"";return this.trackPosition&&(k.length>0&&(k+=":"),k+=`${this.line}:${this.column}`),k.length>0&&(k+=": "),new Error(k+w)}fail(w){let C=this.makeError(w),k=this.errorHandler;if(k===void 0)throw C;return k(C),this}write(w){if(this.closed)return this.fail("cannot write after close; assign an onready handler.");let C=!1;w===null?(C=!0,w=""):typeof w=="object"&&(w=w.toString()),this.carriedFromPrevious!==void 0&&(w=`${this.carriedFromPrevious}${w}`,this.carriedFromPrevious=void 0);let k=w.length,T=w.charCodeAt(k-1);!C&&(T===13||T>=55296&&T<=56319)&&(this.carriedFromPrevious=w[k-1],k--,w=w.slice(0,k));let{stateTable:R}=this;for(this.chunk=w,this.i=0;this.i<k;)R[this.state].call(this);return this.chunkPosition+=k,C?this.end():this}close(){return this.write(null)}getCode10(){let{chunk:w,i:C}=this;if(this.prevI=C,this.i=C+1,C>=w.length)return-1;let k=w.charCodeAt(C);if(this.column++,k<55296){if(k>=32||k===9)return k;switch(k){case 10:return this.line++,this.column=0,this.positionAtNewLine=this.position,10;case 13:return w.charCodeAt(C+1)===10&&(this.i=C+2),this.line++,this.column=0,this.positionAtNewLine=this.position,-2;default:return this.fail("disallowed character."),k}}if(k>56319)return k>=57344&&k<=65533||this.fail("disallowed character."),k;let T=65536+1024*(k-55296)+(w.charCodeAt(C+1)-56320);return this.i=C+2,T>1114111&&this.fail("disallowed character."),T}getCode11(){let{chunk:w,i:C}=this;if(this.prevI=C,this.i=C+1,C>=w.length)return-1;let k=w.charCodeAt(C);if(this.column++,k<55296){if(k>31&&k<127||k>159&&k!==8232||k===9)return k;switch(k){case 10:return this.line++,this.column=0,this.positionAtNewLine=this.position,10;case 13:{let R=w.charCodeAt(C+1);R!==10&&R!==133||(this.i=C+2)}case 133:case 8232:return this.line++,this.column=0,this.positionAtNewLine=this.position,-2;default:return this.fail("disallowed character."),k}}if(k>56319)return k>=57344&&k<=65533||this.fail("disallowed character."),k;let T=65536+1024*(k-55296)+(w.charCodeAt(C+1)-56320);return this.i=C+2,T>1114111&&this.fail("disallowed character."),T}getCodeNorm(){let w=this.getCode();return w===-2?10:w}unget(){this.i=this.prevI,this.column--}captureTo(w){let{i:C}=this,{chunk:k}=this;for(;;){let T=this.getCode(),R=T===-2,F=R?10:T;if(F===-1||w.includes(F))return this.text+=k.slice(C,this.prevI),F;R&&(this.text+=k.slice(C,this.prevI)+`
`,C=this.i)}}captureToChar(w){let{i:C}=this,{chunk:k}=this;for(;;){let T=this.getCode();switch(T){case-2:this.text+=k.slice(C,this.prevI)+`
`,C=this.i,T=10;break;case-1:return this.text+=k.slice(C),!1}if(T===w)return this.text+=k.slice(C,this.prevI),!0}}captureNameChars(){let{chunk:w,i:C}=this;for(;;){let k=this.getCode();if(k===-1)return this.name+=w.slice(C),-1;if(!f(k))return this.name+=w.slice(C,this.prevI),k===-2?10:k}}skipSpaces(){for(;;){let w=this.getCodeNorm();if(w===-1||!a(w))return w}}setXMLVersion(w){this.currentXMLVersion=w,w==="1.0"?(this.isChar=s,this.getCode=this.getCode10):(this.isChar=m,this.getCode=this.getCode11)}sBegin(){this.chunk.charCodeAt(0)===65279&&(this.i++,this.column++),this.state=1}sBeginWhitespace(){let w=this.i,C=this.skipSpaces();switch(this.prevI!==w&&(this.xmlDeclPossible=!1),C){case 60:if(this.state=15,this.text.length!==0)throw new Error("no-empty text at start");break;case-1:break;default:this.unget(),this.state=13,this.xmlDeclPossible=!1}}sDoctype(){var w;let C=this.captureTo(z);switch(C){case 62:(w=this.doctypeHandler)===null||w===void 0||w.call(this,this.text),this.text="",this.state=13,this.doctype=!0;break;case-1:break;default:this.text+=String.fromCodePoint(C),C===91?this.state=4:B(C)&&(this.state=3,this.q=C)}}sDoctypeQuote(){let w=this.q;this.captureToChar(w)&&(this.text+=String.fromCodePoint(w),this.q=null,this.state=2)}sDTD(){let w=this.captureTo(q);w!==-1&&(this.text+=String.fromCodePoint(w),w===93?this.state=2:w===60?this.state=6:B(w)&&(this.state=5,this.q=w))}sDTDQuoted(){let w=this.q;this.captureToChar(w)&&(this.text+=String.fromCodePoint(w),this.state=4,this.q=null)}sDTDOpenWaka(){let w=this.getCodeNorm();switch(this.text+=String.fromCodePoint(w),w){case 33:this.state=7,this.openWakaBang="";break;case 63:this.state=11;break;default:this.state=4}}sDTDOpenWakaBang(){let w=String.fromCodePoint(this.getCodeNorm()),C=this.openWakaBang+=w;this.text+=w,C!=="-"&&(this.state=C==="--"?8:4,this.openWakaBang="")}sDTDComment(){this.captureToChar(45)&&(this.text+="-",this.state=9)}sDTDCommentEnding(){let w=this.getCodeNorm();this.text+=String.fromCodePoint(w),this.state=w===45?10:8}sDTDCommentEnded(){let w=this.getCodeNorm();this.text+=String.fromCodePoint(w),w===62?this.state=4:(this.fail("malformed comment."),this.state=8)}sDTDPI(){this.captureToChar(63)&&(this.text+="?",this.state=12)}sDTDPIEnding(){let w=this.getCodeNorm();this.text+=String.fromCodePoint(w),w===62&&(this.state=4)}sText(){this.tags.length!==0?this.handleTextInRoot():this.handleTextOutsideRoot()}sEntity(){let{i:w}=this,{chunk:C}=this;t:for(;;)switch(this.getCode()){case-2:this.entity+=C.slice(w,this.prevI)+`
`,w=this.i;break;case 59:{let{entityReturnState:k}=this,T=this.entity+C.slice(w,this.prevI),R;this.state=k,T===""?(this.fail("empty entity name."),R="&;"):(R=this.parseEntity(T),this.entity=""),k===13&&this.textHandler===void 0||(this.text+=R);break t}case-1:this.entity+=C.slice(w);break t}}sOpenWaka(){let w=this.getCode();if(u(w))this.state=34,this.unget(),this.xmlDeclPossible=!1;else switch(w){case 47:this.state=43,this.xmlDeclPossible=!1;break;case 33:this.state=16,this.openWakaBang="",this.xmlDeclPossible=!1;break;case 63:this.state=23;break;default:this.fail("disallowed character in tag name"),this.state=13,this.xmlDeclPossible=!1}}sOpenWakaBang(){switch(this.openWakaBang+=String.fromCodePoint(this.getCodeNorm()),this.openWakaBang){case"[CDATA[":this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0),this.state=20,this.openWakaBang="";break;case"--":this.state=17,this.openWakaBang="";break;case"DOCTYPE":this.state=2,(this.doctype||this.sawRoot)&&this.fail("inappropriately located doctype declaration."),this.openWakaBang="";break;default:this.openWakaBang.length>=7&&this.fail("incorrect syntax.")}}sComment(){this.captureToChar(45)&&(this.state=18)}sCommentEnding(){var w;let C=this.getCodeNorm();C===45?(this.state=19,(w=this.commentHandler)===null||w===void 0||w.call(this,this.text),this.text=""):(this.text+="-"+String.fromCodePoint(C),this.state=17)}sCommentEnded(){let w=this.getCodeNorm();w!==62?(this.fail("malformed comment."),this.text+="--"+String.fromCodePoint(w),this.state=17):this.state=13}sCData(){this.captureToChar(93)&&(this.state=21)}sCDataEnding(){let w=this.getCodeNorm();w===93?this.state=22:(this.text+="]"+String.fromCodePoint(w),this.state=20)}sCDataEnding2(){var w;let C=this.getCodeNorm();switch(C){case 62:(w=this.cdataHandler)===null||w===void 0||w.call(this,this.text),this.text="",this.state=13;break;case 93:this.text+="]";break;default:this.text+="]]"+String.fromCodePoint(C),this.state=20}}sPIFirstChar(){let w=this.getCodeNorm();this.nameStartCheck(w)?(this.piTarget+=String.fromCodePoint(w),this.state=24):w===63||a(w)?(this.fail("processing instruction without a target."),this.state=w===63?26:25):(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(w),this.state=24)}sPIRest(){let{chunk:w,i:C}=this;for(;;){let k=this.getCodeNorm();if(k===-1)return void(this.piTarget+=w.slice(C));if(!this.nameCheck(k)){this.piTarget+=w.slice(C,this.prevI);let T=k===63;T||a(k)?this.piTarget==="xml"?(this.xmlDeclPossible||this.fail("an XML declaration must be at the start of the document."),this.state=T?33:27):this.state=T?26:25:(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(k));break}}}sPIBody(){if(this.text.length===0){let w=this.getCodeNorm();w===63?this.state=26:a(w)||(this.text=String.fromCodePoint(w))}else this.captureToChar(63)&&(this.state=26)}sPIEnding(){var w;let C=this.getCodeNorm();if(C===62){let{piTarget:k}=this;k.toLowerCase()==="xml"&&this.fail("the XML declaration must appear at the start of the document."),(w=this.piHandler)===null||w===void 0||w.call(this,{target:k,body:this.text}),this.piTarget=this.text="",this.state=13}else C===63?this.text+="?":(this.text+="?"+String.fromCodePoint(C),this.state=25);this.xmlDeclPossible=!1}sXMLDeclNameStart(){let w=this.skipSpaces();w!==63?w!==-1&&(this.state=28,this.name=String.fromCodePoint(w)):this.state=33}sXMLDeclName(){let w=this.captureTo(G);if(w===63)return this.state=33,this.name+=this.text,this.text="",void this.fail("XML declaration is incomplete.");if(a(w)||w===61){if(this.name+=this.text,this.text="",!this.xmlDeclExpects.includes(this.name))switch(this.name.length){case 0:this.fail("did not expect any more name/value pairs.");break;case 1:this.fail(`expected the name ${this.xmlDeclExpects[0]}.`);break;default:this.fail("expected one of "+this.xmlDeclExpects.join(", "))}this.state=w===61?30:29}}sXMLDeclEq(){let w=this.getCodeNorm();if(w===63)return this.state=33,void this.fail("XML declaration is incomplete.");a(w)||(w!==61&&this.fail("value required."),this.state=30)}sXMLDeclValueStart(){let w=this.getCodeNorm();if(w===63)return this.state=33,void this.fail("XML declaration is incomplete.");a(w)||(B(w)?this.q=w:(this.fail("value must be quoted."),this.q=32),this.state=31)}sXMLDeclValue(){let w=this.captureTo([this.q,63]);if(w===63)return this.state=33,this.text="",void this.fail("XML declaration is incomplete.");if(w===-1)return;let C=this.text;switch(this.text="",this.name){case"version":{this.xmlDeclExpects=["encoding","standalone"];let k=C;this.xmlDecl.version=k,/^1\.[0-9]+$/.test(k)?this.opt.forceXMLVersion||this.setXMLVersion(k):this.fail("version number must match /^1\\.[0-9]+$/.");break}case"encoding":/^[A-Za-z][A-Za-z0-9._-]*$/.test(C)||this.fail("encoding value must match /^[A-Za-z0-9][A-Za-z0-9._-]*$/."),this.xmlDeclExpects=["standalone"],this.xmlDecl.encoding=C;break;case"standalone":C!=="yes"&&C!=="no"&&this.fail('standalone value must match "yes" or "no".'),this.xmlDeclExpects=[],this.xmlDecl.standalone=C}this.name="",this.state=32}sXMLDeclSeparator(){let w=this.getCodeNorm();w!==63?(a(w)||(this.fail("whitespace required."),this.unget()),this.state=27):this.state=33}sXMLDeclEnding(){var w;this.getCodeNorm()===62?(this.piTarget!=="xml"?this.fail("processing instructions are not allowed before root."):this.name!=="version"&&this.xmlDeclExpects.includes("version")&&this.fail("XML declaration must contain a version."),(w=this.xmldeclHandler)===null||w===void 0||w.call(this,this.xmlDecl),this.name="",this.piTarget=this.text="",this.state=13):this.fail("The character ? is disallowed anywhere in XML declarations."),this.xmlDeclPossible=!1}sOpenTag(){var w;let C=this.captureNameChars();if(C===-1)return;let k=this.tag={name:this.name,attributes:Object.create(null)};switch(this.name="",this.xmlnsOpt&&(this.topNS=k.ns=Object.create(null)),(w=this.openTagStartHandler)===null||w===void 0||w.call(this,k),this.sawRoot=!0,!this.fragmentOpt&&this.closedRoot&&this.fail("documents may contain only one root."),C){case 62:this.openTag();break;case 47:this.state=35;break;default:a(C)||this.fail("disallowed character in tag name."),this.state=36}}sOpenTagSlash(){this.getCode()===62?this.openSelfClosingTag():(this.fail("forward-slash in opening tag not followed by >."),this.state=36)}sAttrib(){let w=this.skipSpaces();w!==-1&&(u(w)?(this.unget(),this.state=37):w===62?this.openTag():w===47?this.state=35:this.fail("disallowed character in attribute name."))}sAttribName(){let w=this.captureNameChars();w===61?this.state=39:a(w)?this.state=38:w===62?(this.fail("attribute without value."),this.pushAttrib(this.name,this.name),this.name=this.text="",this.openTag()):w!==-1&&this.fail("disallowed character in attribute name.")}sAttribNameSawWhite(){let w=this.skipSpaces();switch(w){case-1:return;case 61:this.state=39;break;default:this.fail("attribute without value."),this.text="",this.name="",w===62?this.openTag():u(w)?(this.unget(),this.state=37):(this.fail("disallowed character in attribute name."),this.state=36)}}sAttribValue(){let w=this.getCodeNorm();B(w)?(this.q=w,this.state=40):a(w)||(this.fail("unquoted attribute value."),this.state=42,this.unget())}sAttribValueQuoted(){let{q:w,chunk:C}=this,{i:k}=this;for(;;)switch(this.getCode()){case w:return this.pushAttrib(this.name,this.text+C.slice(k,this.prevI)),this.name=this.text="",this.q=null,void(this.state=41);case 38:return this.text+=C.slice(k,this.prevI),this.state=14,void(this.entityReturnState=40);case 10:case-2:case 9:this.text+=C.slice(k,this.prevI)+" ",k=this.i;break;case 60:return this.text+=C.slice(k,this.prevI),void this.fail("disallowed character.");case-1:return void(this.text+=C.slice(k))}}sAttribValueClosed(){let w=this.getCodeNorm();a(w)?this.state=36:w===62?this.openTag():w===47?this.state=35:u(w)?(this.fail("no whitespace between attributes."),this.unget(),this.state=37):this.fail("disallowed character in attribute name.")}sAttribValueUnquoted(){let w=this.captureTo(tt);switch(w){case 38:this.state=14,this.entityReturnState=42;break;case 60:this.fail("disallowed character.");break;case-1:break;default:this.text.includes("]]>")&&this.fail('the string "]]>" is disallowed in char data.'),this.pushAttrib(this.name,this.text),this.name=this.text="",w===62?this.openTag():this.state=36}}sCloseTag(){let w=this.captureNameChars();w===62?this.closeTag():a(w)?this.state=44:w!==-1&&this.fail("disallowed character in closing tag.")}sCloseTagSawWhite(){switch(this.skipSpaces()){case 62:this.closeTag();break;case-1:break;default:this.fail("disallowed character in closing tag.")}}handleTextInRoot(){let{i:w,forbiddenState:C}=this,{chunk:k,textHandler:T}=this;t:for(;;)switch(this.getCode()){case 60:if(this.state=15,T!==void 0){let{text:R}=this,F=k.slice(w,this.prevI);R.length!==0?(T(R+F),this.text=""):F.length!==0&&T(F)}C=0;break t;case 38:this.state=14,this.entityReturnState=13,T!==void 0&&(this.text+=k.slice(w,this.prevI)),C=0;break t;case 93:switch(C){case 0:C=1;break;case 1:C=2;break;case 2:break;default:throw new Error("impossible state")}break;case 62:C===2&&this.fail('the string "]]>" is disallowed in char data.'),C=0;break;case-2:T!==void 0&&(this.text+=k.slice(w,this.prevI)+`
`),w=this.i,C=0;break;case-1:T!==void 0&&(this.text+=k.slice(w));break t;default:C=0}this.forbiddenState=C}handleTextOutsideRoot(){let{i:w}=this,{chunk:C,textHandler:k}=this,T=!1;t:for(;;){let R=this.getCode();switch(R){case 60:if(this.state=15,k!==void 0){let{text:F}=this,H=C.slice(w,this.prevI);F.length!==0?(k(F+H),this.text=""):H.length!==0&&k(H)}break t;case 38:this.state=14,this.entityReturnState=13,k!==void 0&&(this.text+=C.slice(w,this.prevI)),T=!0;break t;case-2:k!==void 0&&(this.text+=C.slice(w,this.prevI)+`
`),w=this.i;break;case-1:k!==void 0&&(this.text+=C.slice(w));break t;default:a(R)||(T=!0)}}T&&(this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0))}pushAttribNS(w,C){var k;let{prefix:T,local:R}=this.qname(w),F={name:w,prefix:T,local:R,value:C};if(this.attribList.push(F),(k=this.attributeHandler)===null||k===void 0||k.call(this,F),T==="xmlns"){let H=C.trim();this.currentXMLVersion==="1.0"&&H===""&&this.fail("invalid attempt to undefine prefix in XML 1.0"),this.topNS[R]=H,K(this,R,H)}else if(w==="xmlns"){let H=C.trim();this.topNS[""]=H,K(this,"",H)}}pushAttribPlain(w,C){var k;let T={name:w,value:C};this.attribList.push(T),(k=this.attributeHandler)===null||k===void 0||k.call(this,T)}end(){var w,C;this.sawRoot||this.fail("document must contain a root element.");let{tags:k}=this;for(;k.length>0;){let R=k.pop();this.fail("unclosed tag: "+R.name)}this.state!==0&&this.state!==13&&this.fail("unexpected end.");let{text:T}=this;return T.length!==0&&((w=this.textHandler)===null||w===void 0||w.call(this,T),this.text=""),this._closed=!0,(C=this.endHandler)===null||C===void 0||C.call(this),this._init(),this}resolve(w){var C,k;let T=this.topNS[w];if(T!==void 0)return T;let{tags:R}=this;for(let F=R.length-1;F>=0;F--)if(T=R[F].ns[w],T!==void 0)return T;return T=this.ns[w],T!==void 0?T:(k=(C=this.opt).resolvePrefix)===null||k===void 0?void 0:k.call(C,w)}qname(w){let C=w.indexOf(":");if(C===-1)return{prefix:"",local:w};let k=w.slice(C+1),T=w.slice(0,C);return(T===""||k===""||k.includes(":"))&&this.fail(`malformed name: ${w}.`),{prefix:T,local:k}}processAttribsNS(){var w;let{attribList:C}=this,k=this.tag;{let{prefix:F,local:H}=this.qname(k.name);k.prefix=F,k.local=H;let it=k.uri=(w=this.resolve(F))!==null&&w!==void 0?w:"";F!==""&&(F==="xmlns"&&this.fail('tags may not have "xmlns" as prefix.'),it===""&&(this.fail(`unbound namespace prefix: ${JSON.stringify(F)}.`),k.uri=F))}if(C.length===0)return;let{attributes:T}=k,R=new Set;for(let F of C){let{name:H,prefix:it,local:ot}=F,dt,$;it===""?(dt=H==="xmlns"?x:"",$=H):(dt=this.resolve(it),dt===void 0&&(this.fail(`unbound namespace prefix: ${JSON.stringify(it)}.`),dt=it),$=`{${dt}}${ot}`),R.has($)&&this.fail(`duplicate attribute: ${$}.`),R.add($),F.uri=dt,T[H]=F}this.attribList=[]}processAttribsPlain(){let{attribList:w}=this,C=this.tag.attributes;for(let{name:k,value:T}of w)C[k]!==void 0&&this.fail(`duplicate attribute: ${k}.`),C[k]=T;this.attribList=[]}openTag(){var w;this.processAttribs();let{tags:C}=this,k=this.tag;k.isSelfClosing=!1,(w=this.openTagHandler)===null||w===void 0||w.call(this,k),C.push(k),this.state=13,this.name=""}openSelfClosingTag(){var w,C,k;this.processAttribs();let{tags:T}=this,R=this.tag;R.isSelfClosing=!0,(w=this.openTagHandler)===null||w===void 0||w.call(this,R),(C=this.closeTagHandler)===null||C===void 0||C.call(this,R),(this.tag=(k=T[T.length-1])!==null&&k!==void 0?k:null)===null&&(this.closedRoot=!0),this.state=13,this.name=""}closeTag(){let{tags:w,name:C}=this;if(this.state=13,this.name="",C==="")return this.fail("weird empty close tag."),void(this.text+="</>");let k=this.closeTagHandler,T=w.length;for(;T-- >0;){let R=this.tag=w.pop();if(this.topNS=R.ns,k?.(R),R.name===C)break;this.fail("unexpected close tag.")}T===0?this.closedRoot=!0:T<0&&(this.fail(`unmatched closing tag: ${C}.`),this.text+=`</${C}>`)}parseEntity(w){if(w[0]!=="#"){let k=this.ENTITIES[w];return k!==void 0?k:(this.fail(this.isName(w)?"undefined entity.":"disallowed character in entity name."),`&${w};`)}let C=NaN;return w[1]==="x"&&/^#x[0-9a-f]+$/i.test(w)?C=parseInt(w.slice(2),16):/^#[0-9]+$/.test(w)&&(C=parseInt(w.slice(1),10)),this.isChar(C)?String.fromCodePoint(C):(this.fail("malformed character entity."),`&${w};`)}}},{"xmlchars/xml/1.0/ed5":543,"xmlchars/xml/1.1/ed2":544,"xmlchars/xmlns/1.0/ed3":545}],497:[function(e,t,n){"use strict";var i=e("safe-buffer").Buffer;function r(o,a){this._block=i.alloc(o),this._finalSize=a,this._blockSize=o,this._len=0}r.prototype.update=function(o,a){typeof o=="string"&&(a=a||"utf8",o=i.from(o,a));for(var s=this._block,u=this._blockSize,f=o.length,c=this._len,d=0;d<f;){for(var m=c%u,v=Math.min(f-d,u-m),p=0;p<v;p++)s[m+p]=o[d+p];d+=v,(c+=v)%u==0&&this._update(s)}return this._len+=f,this},r.prototype.digest=function(o){var a=this._len%this._blockSize;this._block[a]=128,this._block.fill(0,a+1),a>=this._finalSize&&(this._update(this._block),this._block.fill(0));var s=8*this._len;if(s<=4294967295)this._block.writeUInt32BE(s,this._blockSize-4);else{var u=(4294967295&s)>>>0,f=(s-u)/4294967296;this._block.writeUInt32BE(f,this._blockSize-8),this._block.writeUInt32BE(u,this._blockSize-4)}this._update(this._block);var c=this._hash();return o?c.toString(o):c},r.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t.exports=r},{"safe-buffer":494}],498:[function(e,t,n){"use strict";var i=t.exports=function(r){r=r.toLowerCase();var o=i[r];if(!o)throw new Error(r+" is not supported (we accept pull requests)");return new o};i.sha=e("./sha"),i.sha1=e("./sha1"),i.sha224=e("./sha224"),i.sha256=e("./sha256"),i.sha384=e("./sha384"),i.sha512=e("./sha512")},{"./sha":499,"./sha1":500,"./sha224":501,"./sha256":502,"./sha384":503,"./sha512":504}],499:[function(e,t,n){"use strict";var i=e("inherits"),r=e("./hash"),o=e("safe-buffer").Buffer,a=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function u(){this.init(),this._w=s,r.call(this,64,56)}function f(d){return d<<30|d>>>2}function c(d,m,v,p){return d===0?m&v|~m&p:d===2?m&v|m&p|v&p:m^v^p}i(u,r),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(d){for(var m,v=this._w,p=0|this._a,_=0|this._b,y=0|this._c,x=0|this._d,S=0|this._e,O=0;O<16;++O)v[O]=d.readInt32BE(4*O);for(;O<80;++O)v[O]=v[O-3]^v[O-8]^v[O-14]^v[O-16];for(var B=0;B<80;++B){var U=~~(B/20),z=0|((m=p)<<5|m>>>27)+c(U,_,y,x)+S+v[B]+a[U];S=x,x=y,y=f(_),_=p,p=z}this._a=p+this._a|0,this._b=_+this._b|0,this._c=y+this._c|0,this._d=x+this._d|0,this._e=S+this._e|0},u.prototype._hash=function(){var d=o.allocUnsafe(20);return d.writeInt32BE(0|this._a,0),d.writeInt32BE(0|this._b,4),d.writeInt32BE(0|this._c,8),d.writeInt32BE(0|this._d,12),d.writeInt32BE(0|this._e,16),d},t.exports=u},{"./hash":497,inherits:440,"safe-buffer":494}],500:[function(e,t,n){"use strict";var i=e("inherits"),r=e("./hash"),o=e("safe-buffer").Buffer,a=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function u(){this.init(),this._w=s,r.call(this,64,56)}function f(m){return m<<5|m>>>27}function c(m){return m<<30|m>>>2}function d(m,v,p,_){return m===0?v&p|~v&_:m===2?v&p|v&_|p&_:v^p^_}i(u,r),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(m){for(var v,p=this._w,_=0|this._a,y=0|this._b,x=0|this._c,S=0|this._d,O=0|this._e,B=0;B<16;++B)p[B]=m.readInt32BE(4*B);for(;B<80;++B)p[B]=(v=p[B-3]^p[B-8]^p[B-14]^p[B-16])<<1|v>>>31;for(var U=0;U<80;++U){var z=~~(U/20),q=f(_)+d(z,y,x,S)+O+p[U]+a[z]|0;O=S,S=x,x=c(y),y=_,_=q}this._a=_+this._a|0,this._b=y+this._b|0,this._c=x+this._c|0,this._d=S+this._d|0,this._e=O+this._e|0},u.prototype._hash=function(){var m=o.allocUnsafe(20);return m.writeInt32BE(0|this._a,0),m.writeInt32BE(0|this._b,4),m.writeInt32BE(0|this._c,8),m.writeInt32BE(0|this._d,12),m.writeInt32BE(0|this._e,16),m},t.exports=u},{"./hash":497,inherits:440,"safe-buffer":494}],501:[function(e,t,n){"use strict";var i=e("inherits"),r=e("./sha256"),o=e("./hash"),a=e("safe-buffer").Buffer,s=new Array(64);function u(){this.init(),this._w=s,o.call(this,64,56)}i(u,r),u.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},u.prototype._hash=function(){var f=a.allocUnsafe(28);return f.writeInt32BE(this._a,0),f.writeInt32BE(this._b,4),f.writeInt32BE(this._c,8),f.writeInt32BE(this._d,12),f.writeInt32BE(this._e,16),f.writeInt32BE(this._f,20),f.writeInt32BE(this._g,24),f},t.exports=u},{"./hash":497,"./sha256":502,inherits:440,"safe-buffer":494}],502:[function(e,t,n){"use strict";var i=e("inherits"),r=e("./hash"),o=e("safe-buffer").Buffer,a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],s=new Array(64);function u(){this.init(),this._w=s,r.call(this,64,56)}function f(p,_,y){return y^p&(_^y)}function c(p,_,y){return p&_|y&(p|_)}function d(p){return(p>>>2|p<<30)^(p>>>13|p<<19)^(p>>>22|p<<10)}function m(p){return(p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7)}function v(p){return(p>>>7|p<<25)^(p>>>18|p<<14)^p>>>3}i(u,r),u.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},u.prototype._update=function(p){for(var _,y=this._w,x=0|this._a,S=0|this._b,O=0|this._c,B=0|this._d,U=0|this._e,z=0|this._f,q=0|this._g,G=0|this._h,tt=0;tt<16;++tt)y[tt]=p.readInt32BE(4*tt);for(;tt<64;++tt)y[tt]=0|(((_=y[tt-2])>>>17|_<<15)^(_>>>19|_<<13)^_>>>10)+y[tt-7]+v(y[tt-15])+y[tt-16];for(var K=0;K<64;++K){var D=G+m(U)+f(U,z,q)+a[K]+y[K]|0,N=d(x)+c(x,S,O)|0;G=q,q=z,z=U,U=B+D|0,B=O,O=S,S=x,x=D+N|0}this._a=x+this._a|0,this._b=S+this._b|0,this._c=O+this._c|0,this._d=B+this._d|0,this._e=U+this._e|0,this._f=z+this._f|0,this._g=q+this._g|0,this._h=G+this._h|0},u.prototype._hash=function(){var p=o.allocUnsafe(32);return p.writeInt32BE(this._a,0),p.writeInt32BE(this._b,4),p.writeInt32BE(this._c,8),p.writeInt32BE(this._d,12),p.writeInt32BE(this._e,16),p.writeInt32BE(this._f,20),p.writeInt32BE(this._g,24),p.writeInt32BE(this._h,28),p},t.exports=u},{"./hash":497,inherits:440,"safe-buffer":494}],503:[function(e,t,n){"use strict";var i=e("inherits"),r=e("./sha512"),o=e("./hash"),a=e("safe-buffer").Buffer,s=new Array(160);function u(){this.init(),this._w=s,o.call(this,128,112)}i(u,r),u.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},u.prototype._hash=function(){var f=a.allocUnsafe(48);function c(d,m,v){f.writeInt32BE(d,v),f.writeInt32BE(m,v+4)}return c(this._ah,this._al,0),c(this._bh,this._bl,8),c(this._ch,this._cl,16),c(this._dh,this._dl,24),c(this._eh,this._el,32),c(this._fh,this._fl,40),f},t.exports=u},{"./hash":497,"./sha512":504,inherits:440,"safe-buffer":494}],504:[function(e,t,n){"use strict";var i=e("inherits"),r=e("./hash"),o=e("safe-buffer").Buffer,a=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],s=new Array(160);function u(){this.init(),this._w=s,r.call(this,128,112)}function f(S,O,B){return B^S&(O^B)}function c(S,O,B){return S&O|B&(S|O)}function d(S,O){return(S>>>28|O<<4)^(O>>>2|S<<30)^(O>>>7|S<<25)}function m(S,O){return(S>>>14|O<<18)^(S>>>18|O<<14)^(O>>>9|S<<23)}function v(S,O){return(S>>>1|O<<31)^(S>>>8|O<<24)^S>>>7}function p(S,O){return(S>>>1|O<<31)^(S>>>8|O<<24)^(S>>>7|O<<25)}function _(S,O){return(S>>>19|O<<13)^(O>>>29|S<<3)^S>>>6}function y(S,O){return(S>>>19|O<<13)^(O>>>29|S<<3)^(S>>>6|O<<26)}function x(S,O){return S>>>0<O>>>0?1:0}i(u,r),u.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},u.prototype._update=function(S){for(var O=this._w,B=0|this._ah,U=0|this._bh,z=0|this._ch,q=0|this._dh,G=0|this._eh,tt=0|this._fh,K=0|this._gh,D=0|this._hh,N=0|this._al,Z=0|this._bl,w=0|this._cl,C=0|this._dl,k=0|this._el,T=0|this._fl,R=0|this._gl,F=0|this._hl,H=0;H<32;H+=2)O[H]=S.readInt32BE(4*H),O[H+1]=S.readInt32BE(4*H+4);for(;H<160;H+=2){var it=O[H-30],ot=O[H-30+1],dt=v(it,ot),$=p(ot,it),ct=_(it=O[H-4],ot=O[H-4+1]),W=y(ot,it),V=O[H-14],rt=O[H-14+1],mt=O[H-32],wt=O[H-32+1],_t=$+rt|0,Ct=dt+V+x(_t,$)|0;Ct=(Ct=Ct+ct+x(_t=_t+W|0,W)|0)+mt+x(_t=_t+wt|0,wt)|0,O[H]=Ct,O[H+1]=_t}for(var Ft=0;Ft<160;Ft+=2){Ct=O[Ft],_t=O[Ft+1];var It=c(B,U,z),vt=c(N,Z,w),kt=d(B,N),gt=d(N,B),ut=m(G,k),Q=m(k,G),Y=a[Ft],et=a[Ft+1],lt=f(G,tt,K),pt=f(k,T,R),bt=F+Q|0,Et=D+ut+x(bt,F)|0;Et=(Et=(Et=Et+lt+x(bt=bt+pt|0,pt)|0)+Y+x(bt=bt+et|0,et)|0)+Ct+x(bt=bt+_t|0,_t)|0;var Ot=gt+vt|0,zt=kt+It+x(Ot,gt)|0;D=K,F=R,K=tt,R=T,tt=G,T=k,G=q+Et+x(k=C+bt|0,C)|0,q=z,C=w,z=U,w=Z,U=B,Z=N,B=Et+zt+x(N=bt+Ot|0,bt)|0}this._al=this._al+N|0,this._bl=this._bl+Z|0,this._cl=this._cl+w|0,this._dl=this._dl+C|0,this._el=this._el+k|0,this._fl=this._fl+T|0,this._gl=this._gl+R|0,this._hl=this._hl+F|0,this._ah=this._ah+B+x(this._al,N)|0,this._bh=this._bh+U+x(this._bl,Z)|0,this._ch=this._ch+z+x(this._cl,w)|0,this._dh=this._dh+q+x(this._dl,C)|0,this._eh=this._eh+G+x(this._el,k)|0,this._fh=this._fh+tt+x(this._fl,T)|0,this._gh=this._gh+K+x(this._gl,R)|0,this._hh=this._hh+D+x(this._hl,F)|0},u.prototype._hash=function(){var S=o.allocUnsafe(64);function O(B,U,z){S.writeInt32BE(B,z),S.writeInt32BE(U,z+4)}return O(this._ah,this._al,0),O(this._bh,this._bl,8),O(this._ch,this._cl,16),O(this._dh,this._dl,24),O(this._eh,this._el,32),O(this._fh,this._fl,40),O(this._gh,this._gl,48),O(this._hh,this._hl,56),S},t.exports=u},{"./hash":497,inherits:440,"safe-buffer":494}],505:[function(e,t,n){"use strict";t.exports=r;var i=e("events").EventEmitter;function r(){i.call(this)}e("inherits")(r,i),r.Readable=e("readable-stream/readable.js"),r.Writable=e("readable-stream/writable.js"),r.Duplex=e("readable-stream/duplex.js"),r.Transform=e("readable-stream/transform.js"),r.PassThrough=e("readable-stream/passthrough.js"),r.Stream=r,r.prototype.pipe=function(o,a){var s=this;function u(_){o.writable&&o.write(_)===!1&&s.pause&&s.pause()}function f(){s.readable&&s.resume&&s.resume()}s.on("data",u),o.on("drain",f),o._isStdio||a&&a.end===!1||(s.on("end",d),s.on("close",m));var c=!1;function d(){c||(c=!0,o.end())}function m(){c||(c=!0,typeof o.destroy=="function"&&o.destroy())}function v(_){if(p(),i.listenerCount(this,"error")===0)throw _}function p(){s.removeListener("data",u),o.removeListener("drain",f),s.removeListener("end",d),s.removeListener("close",m),s.removeListener("error",v),o.removeListener("error",v),s.removeListener("end",p),s.removeListener("close",p),o.removeListener("close",p)}return s.on("error",v),o.on("error",v),s.on("end",p),s.on("close",p),o.on("close",p),o.emit("pipe",s),o}},{events:422,inherits:440,"readable-stream/duplex.js":507,"readable-stream/passthrough.js":516,"readable-stream/readable.js":517,"readable-stream/transform.js":518,"readable-stream/writable.js":519}],506:[function(e,t,n){"use strict";var i={}.toString;t.exports=Array.isArray||function(r){return i.call(r)=="[object Array]"}},{}],507:[function(e,t,n){"use strict";t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":508}],508:[function(e,t,n){"use strict";var i=e("process-nextick-args"),r=Object.keys||function(p){var _=[];for(var y in p)_.push(y);return _};t.exports=d;var o=Object.create(e("core-util-is"));o.inherits=e("inherits");var a=e("./_stream_readable"),s=e("./_stream_writable");o.inherits(d,a);for(var u=r(s.prototype),f=0;f<u.length;f++){var c=u[f];d.prototype[c]||(d.prototype[c]=s.prototype[c])}function d(p){if(!(this instanceof d))return new d(p);a.call(this,p),s.call(this,p),p&&p.readable===!1&&(this.readable=!1),p&&p.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,p&&p.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",m)}function m(){this.allowHalfOpen||this._writableState.ended||i.nextTick(v,this)}function v(p){p.end()}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(p){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=p,this._writableState.destroyed=p)}}),d.prototype._destroy=function(p,_){this.push(null),this.end(),i.nextTick(_,p)}},{"./_stream_readable":510,"./_stream_writable":512,"core-util-is":383,inherits:440,"process-nextick-args":466}],509:[function(e,t,n){"use strict";t.exports=o;var i=e("./_stream_transform"),r=Object.create(e("core-util-is"));function o(a){if(!(this instanceof o))return new o(a);i.call(this,a)}r.inherits=e("inherits"),r.inherits(o,i),o.prototype._transform=function(a,s,u){u(null,a)}},{"./_stream_transform":511,"core-util-is":383,inherits:440}],510:[function(e,t,n){(function(i,r){(function(){"use strict";var o=e("process-nextick-args");t.exports=B;var a,s=e("isarray");B.ReadableState=O,e("events").EventEmitter;var u=function(F,H){return F.listeners(H).length},f=e("./internal/streams/stream"),c=e("safe-buffer").Buffer,d=(r!==void 0?r:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},m=Object.create(e("core-util-is"));m.inherits=e("inherits");var v=e("util"),p=void 0;p=v&&v.debuglog?v.debuglog("stream"):function(){};var _,y=e("./internal/streams/BufferList"),x=e("./internal/streams/destroy");m.inherits(B,f);var S=["error","close","destroy","pause","resume"];function O(F,H){F=F||{};var it=H instanceof(a=a||e("./_stream_duplex"));this.objectMode=!!F.objectMode,it&&(this.objectMode=this.objectMode||!!F.readableObjectMode);var ot=F.highWaterMark,dt=F.readableHighWaterMark,$=this.objectMode?16:16384;this.highWaterMark=ot||ot===0?ot:it&&(dt||dt===0)?dt:$,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new y,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=F.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,F.encoding&&(_||(_=e("string_decoder/").StringDecoder),this.decoder=new _(F.encoding),this.encoding=F.encoding)}function B(F){if(a=a||e("./_stream_duplex"),!(this instanceof B))return new B(F);this._readableState=new O(F,this),this.readable=!0,F&&(typeof F.read=="function"&&(this._read=F.read),typeof F.destroy=="function"&&(this._destroy=F.destroy)),f.call(this)}function U(F,H,it,ot,dt){var $,ct=F._readableState;return H===null?(ct.reading=!1,function(W,V){if(!V.ended){if(V.decoder){var rt=V.decoder.end();rt&&rt.length&&(V.buffer.push(rt),V.length+=V.objectMode?1:rt.length)}V.ended=!0,G(W)}}(F,ct)):(dt||($=function(W,V){var rt;mt=V,c.isBuffer(mt)||mt instanceof d||typeof V=="string"||V===void 0||W.objectMode||(rt=new TypeError("Invalid non-string/buffer chunk"));var mt;return rt}(ct,H)),$?F.emit("error",$):ct.objectMode||H&&H.length>0?(typeof H=="string"||ct.objectMode||Object.getPrototypeOf(H)===c.prototype||(H=function(W){return c.from(W)}(H)),ot?ct.endEmitted?F.emit("error",new Error("stream.unshift() after end event")):z(F,ct,H,!0):ct.ended?F.emit("error",new Error("stream.push() after EOF")):(ct.reading=!1,ct.decoder&&!it?(H=ct.decoder.write(H),ct.objectMode||H.length!==0?z(F,ct,H,!1):K(F,ct)):z(F,ct,H,!1))):ot||(ct.reading=!1)),function(W){return!W.ended&&(W.needReadable||W.length<W.highWaterMark||W.length===0)}(ct)}function z(F,H,it,ot){H.flowing&&H.length===0&&!H.sync?(F.emit("data",it),F.read(0)):(H.length+=H.objectMode?1:it.length,ot?H.buffer.unshift(it):H.buffer.push(it),H.needReadable&&G(F)),K(F,H)}Object.defineProperty(B.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(F){this._readableState&&(this._readableState.destroyed=F)}}),B.prototype.destroy=x.destroy,B.prototype._undestroy=x.undestroy,B.prototype._destroy=function(F,H){this.push(null),H(F)},B.prototype.push=function(F,H){var it,ot=this._readableState;return ot.objectMode?it=!0:typeof F=="string"&&((H=H||ot.defaultEncoding)!==ot.encoding&&(F=c.from(F,H),H=""),it=!0),U(this,F,H,!1,it)},B.prototype.unshift=function(F){return U(this,F,null,!0,!1)},B.prototype.isPaused=function(){return this._readableState.flowing===!1},B.prototype.setEncoding=function(F){return _||(_=e("string_decoder/").StringDecoder),this._readableState.decoder=new _(F),this._readableState.encoding=F,this};function q(F,H){return F<=0||H.length===0&&H.ended?0:H.objectMode?1:F!=F?H.flowing&&H.length?H.buffer.head.data.length:H.length:(F>H.highWaterMark&&(H.highWaterMark=function(it){return it>=8388608?it=8388608:(it--,it|=it>>>1,it|=it>>>2,it|=it>>>4,it|=it>>>8,it|=it>>>16,it++),it}(F)),F<=H.length?F:H.ended?H.length:(H.needReadable=!0,0))}function G(F){var H=F._readableState;H.needReadable=!1,H.emittedReadable||(p("emitReadable",H.flowing),H.emittedReadable=!0,H.sync?o.nextTick(tt,F):tt(F))}function tt(F){p("emit readable"),F.emit("readable"),w(F)}function K(F,H){H.readingMore||(H.readingMore=!0,o.nextTick(D,F,H))}function D(F,H){for(var it=H.length;!H.reading&&!H.flowing&&!H.ended&&H.length<H.highWaterMark&&(p("maybeReadMore read 0"),F.read(0),it!==H.length);)it=H.length;H.readingMore=!1}function N(F){p("readable nexttick read 0"),F.read(0)}function Z(F,H){H.reading||(p("resume read 0"),F.read(0)),H.resumeScheduled=!1,H.awaitDrain=0,F.emit("resume"),w(F),H.flowing&&!H.reading&&F.read(0)}function w(F){var H=F._readableState;for(p("flow",H.flowing);H.flowing&&F.read()!==null;);}function C(F,H){return H.length===0?null:(H.objectMode?it=H.buffer.shift():!F||F>=H.length?(it=H.decoder?H.buffer.join(""):H.buffer.length===1?H.buffer.head.data:H.buffer.concat(H.length),H.buffer.clear()):it=function(ot,dt,$){var ct;return ot<dt.head.data.length?(ct=dt.head.data.slice(0,ot),dt.head.data=dt.head.data.slice(ot)):ct=ot===dt.head.data.length?dt.shift():$?function(W,V){var rt=V.head,mt=1,wt=rt.data;for(W-=wt.length;rt=rt.next;){var _t=rt.data,Ct=W>_t.length?_t.length:W;if(Ct===_t.length?wt+=_t:wt+=_t.slice(0,W),(W-=Ct)===0){Ct===_t.length?(++mt,rt.next?V.head=rt.next:V.head=V.tail=null):(V.head=rt,rt.data=_t.slice(Ct));break}++mt}return V.length-=mt,wt}(ot,dt):function(W,V){var rt=c.allocUnsafe(W),mt=V.head,wt=1;for(mt.data.copy(rt),W-=mt.data.length;mt=mt.next;){var _t=mt.data,Ct=W>_t.length?_t.length:W;if(_t.copy(rt,rt.length-W,0,Ct),(W-=Ct)===0){Ct===_t.length?(++wt,mt.next?V.head=mt.next:V.head=V.tail=null):(V.head=mt,mt.data=_t.slice(Ct));break}++wt}return V.length-=wt,rt}(ot,dt),ct}(F,H.buffer,H.decoder),it);var it}function k(F){var H=F._readableState;if(H.length>0)throw new Error('"endReadable()" called on non-empty stream');H.endEmitted||(H.ended=!0,o.nextTick(T,H,F))}function T(F,H){F.endEmitted||F.length!==0||(F.endEmitted=!0,H.readable=!1,H.emit("end"))}function R(F,H){for(var it=0,ot=F.length;it<ot;it++)if(F[it]===H)return it;return-1}B.prototype.read=function(F){p("read",F),F=parseInt(F,10);var H=this._readableState,it=F;if(F!==0&&(H.emittedReadable=!1),F===0&&H.needReadable&&(H.length>=H.highWaterMark||H.ended))return p("read: emitReadable",H.length,H.ended),H.length===0&&H.ended?k(this):G(this),null;if((F=q(F,H))===0&&H.ended)return H.length===0&&k(this),null;var ot,dt=H.needReadable;return p("need readable",dt),(H.length===0||H.length-F<H.highWaterMark)&&p("length less than watermark",dt=!0),H.ended||H.reading?p("reading or ended",dt=!1):dt&&(p("do read"),H.reading=!0,H.sync=!0,H.length===0&&(H.needReadable=!0),this._read(H.highWaterMark),H.sync=!1,H.reading||(F=q(it,H))),(ot=F>0?C(F,H):null)===null?(H.needReadable=!0,F=0):H.length-=F,H.length===0&&(H.ended||(H.needReadable=!0),it!==F&&H.ended&&k(this)),ot!==null&&this.emit("data",ot),ot},B.prototype._read=function(F){this.emit("error",new Error("_read() is not implemented"))},B.prototype.pipe=function(F,H){var it=this,ot=this._readableState;switch(ot.pipesCount){case 0:ot.pipes=F;break;case 1:ot.pipes=[ot.pipes,F];break;default:ot.pipes.push(F)}ot.pipesCount+=1,p("pipe count=%d opts=%j",ot.pipesCount,H);var dt=(!H||H.end!==!1)&&F!==i.stdout&&F!==i.stderr?ct:Ft;function $(It,vt){p("onunpipe"),It===it&&vt&&vt.hasUnpiped===!1&&(vt.hasUnpiped=!0,p("cleanup"),F.removeListener("close",_t),F.removeListener("finish",Ct),F.removeListener("drain",W),F.removeListener("error",wt),F.removeListener("unpipe",$),it.removeListener("end",ct),it.removeListener("end",Ft),it.removeListener("data",mt),V=!0,!ot.awaitDrain||F._writableState&&!F._writableState.needDrain||W())}function ct(){p("onend"),F.end()}ot.endEmitted?o.nextTick(dt):it.once("end",dt),F.on("unpipe",$);var W=function(It){return function(){var vt=It._readableState;p("pipeOnDrain",vt.awaitDrain),vt.awaitDrain&&vt.awaitDrain--,vt.awaitDrain===0&&u(It,"data")&&(vt.flowing=!0,w(It))}}(it);F.on("drain",W);var V=!1,rt=!1;function mt(It){p("ondata"),rt=!1,F.write(It)!==!1||rt||((ot.pipesCount===1&&ot.pipes===F||ot.pipesCount>1&&R(ot.pipes,F)!==-1)&&!V&&(p("false write response, pause",ot.awaitDrain),ot.awaitDrain++,rt=!0),it.pause())}function wt(It){p("onerror",It),Ft(),F.removeListener("error",wt),u(F,"error")===0&&F.emit("error",It)}function _t(){F.removeListener("finish",Ct),Ft()}function Ct(){p("onfinish"),F.removeListener("close",_t),Ft()}function Ft(){p("unpipe"),it.unpipe(F)}return it.on("data",mt),function(It,vt,kt){if(typeof It.prependListener=="function")return It.prependListener(vt,kt);It._events&&It._events[vt]?s(It._events[vt])?It._events[vt].unshift(kt):It._events[vt]=[kt,It._events[vt]]:It.on(vt,kt)}(F,"error",wt),F.once("close",_t),F.once("finish",Ct),F.emit("pipe",it),ot.flowing||(p("pipe resume"),it.resume()),F},B.prototype.unpipe=function(F){var H=this._readableState,it={hasUnpiped:!1};if(H.pipesCount===0)return this;if(H.pipesCount===1)return F&&F!==H.pipes||(F||(F=H.pipes),H.pipes=null,H.pipesCount=0,H.flowing=!1,F&&F.emit("unpipe",this,it)),this;if(!F){var ot=H.pipes,dt=H.pipesCount;H.pipes=null,H.pipesCount=0,H.flowing=!1;for(var $=0;$<dt;$++)ot[$].emit("unpipe",this,{hasUnpiped:!1});return this}var ct=R(H.pipes,F);return ct===-1||(H.pipes.splice(ct,1),H.pipesCount-=1,H.pipesCount===1&&(H.pipes=H.pipes[0]),F.emit("unpipe",this,it)),this},B.prototype.on=function(F,H){var it=f.prototype.on.call(this,F,H);if(F==="data")this._readableState.flowing!==!1&&this.resume();else if(F==="readable"){var ot=this._readableState;ot.endEmitted||ot.readableListening||(ot.readableListening=ot.needReadable=!0,ot.emittedReadable=!1,ot.reading?ot.length&&G(this):o.nextTick(N,this))}return it},B.prototype.addListener=B.prototype.on,B.prototype.resume=function(){var F=this._readableState;return F.flowing||(p("resume"),F.flowing=!0,function(H,it){it.resumeScheduled||(it.resumeScheduled=!0,o.nextTick(Z,H,it))}(this,F)),this},B.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this},B.prototype.wrap=function(F){var H=this,it=this._readableState,ot=!1;for(var dt in F.on("end",function(){if(p("wrapped end"),it.decoder&&!it.ended){var ct=it.decoder.end();ct&&ct.length&&H.push(ct)}H.push(null)}),F.on("data",function(ct){p("wrapped data"),it.decoder&&(ct=it.decoder.write(ct)),it.objectMode&&ct==null||(it.objectMode||ct&&ct.length)&&(H.push(ct)||(ot=!0,F.pause()))}),F)this[dt]===void 0&&typeof F[dt]=="function"&&(this[dt]=function(ct){return function(){return F[ct].apply(F,arguments)}}(dt));for(var $=0;$<S.length;$++)F.on(S[$],this.emit.bind(this,S[$]));return this._read=function(ct){p("wrapped _read",ct),ot&&(ot=!1,F.resume())},this},Object.defineProperty(B.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),B._fromList=C}).call(this)}).call(this,e("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./_stream_duplex":508,"./internal/streams/BufferList":513,"./internal/streams/destroy":514,"./internal/streams/stream":515,_process:467,"core-util-is":383,events:422,inherits:440,isarray:506,"process-nextick-args":466,"safe-buffer":520,"string_decoder/":521,util:188}],511:[function(e,t,n){"use strict";t.exports=a;var i=e("./_stream_duplex"),r=Object.create(e("core-util-is"));function o(f,c){var d=this._transformState;d.transforming=!1;var m=d.writecb;if(!m)return this.emit("error",new Error("write callback called multiple times"));d.writechunk=null,d.writecb=null,c!=null&&this.push(c),m(f);var v=this._readableState;v.reading=!1,(v.needReadable||v.length<v.highWaterMark)&&this._read(v.highWaterMark)}function a(f){if(!(this instanceof a))return new a(f);i.call(this,f),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,f&&(typeof f.transform=="function"&&(this._transform=f.transform),typeof f.flush=="function"&&(this._flush=f.flush)),this.on("prefinish",s)}function s(){var f=this;typeof this._flush=="function"?this._flush(function(c,d){u(f,c,d)}):u(this,null,null)}function u(f,c,d){if(c)return f.emit("error",c);if(d!=null&&f.push(d),f._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(f._transformState.transforming)throw new Error("Calling transform done when still transforming");return f.push(null)}r.inherits=e("inherits"),r.inherits(a,i),a.prototype.push=function(f,c){return this._transformState.needTransform=!1,i.prototype.push.call(this,f,c)},a.prototype._transform=function(f,c,d){throw new Error("_transform() is not implemented")},a.prototype._write=function(f,c,d){var m=this._transformState;if(m.writecb=d,m.writechunk=f,m.writeencoding=c,!m.transforming){var v=this._readableState;(m.needTransform||v.needReadable||v.length<v.highWaterMark)&&this._read(v.highWaterMark)}},a.prototype._read=function(f){var c=this._transformState;c.writechunk!==null&&c.writecb&&!c.transforming?(c.transforming=!0,this._transform(c.writechunk,c.writeencoding,c.afterTransform)):c.needTransform=!0},a.prototype._destroy=function(f,c){var d=this;i.prototype._destroy.call(this,f,function(m){c(m),d.emit("close")})}},{"./_stream_duplex":508,"core-util-is":383,inherits:440}],512:[function(e,t,n){(function(i,r,o){(function(){"use strict";var a=e("process-nextick-args");function s(K){var D=this;this.next=null,this.entry=null,this.finish=function(){(function(N,Z,w){var C=N.entry;for(N.entry=null;C;){var k=C.callback;Z.pendingcb--,k(w),C=C.next}Z.corkedRequestsFree.next=N})(D,K)}}t.exports=O;var u,f=!i.browser&&["v0.10","v0.9."].indexOf(i.version.slice(0,5))>-1?o:a.nextTick;O.WritableState=S;var c=Object.create(e("core-util-is"));c.inherits=e("inherits");var d={deprecate:e("util-deprecate")},m=e("./internal/streams/stream"),v=e("safe-buffer").Buffer,p=(r!==void 0?r:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},_,y=e("./internal/streams/destroy");function x(){}function S(K,D){u=u||e("./_stream_duplex"),K=K||{};var N=D instanceof u;this.objectMode=!!K.objectMode,N&&(this.objectMode=this.objectMode||!!K.writableObjectMode);var Z=K.highWaterMark,w=K.writableHighWaterMark,C=this.objectMode?16:16384;this.highWaterMark=Z||Z===0?Z:N&&(w||w===0)?w:C,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var k=K.decodeStrings===!1;this.decodeStrings=!k,this.defaultEncoding=K.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(T){(function(R,F){var H=R._writableState,it=H.sync,ot=H.writecb;if(function($){$.writing=!1,$.writecb=null,$.length-=$.writelen,$.writelen=0}(H),F)(function($,ct,W,V,rt){--ct.pendingcb,W?(a.nextTick(rt,V),a.nextTick(tt,$,ct),$._writableState.errorEmitted=!0,$.emit("error",V)):(rt(V),$._writableState.errorEmitted=!0,$.emit("error",V),tt($,ct))})(R,H,it,F,ot);else{var dt=q(H);dt||H.corked||H.bufferProcessing||!H.bufferedRequest||z(R,H),it?f(U,R,H,dt,ot):U(R,H,dt,ot)}})(D,T)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function O(K){if(u=u||e("./_stream_duplex"),!(_.call(O,this)||this instanceof u))return new O(K);this._writableState=new S(K,this),this.writable=!0,K&&(typeof K.write=="function"&&(this._write=K.write),typeof K.writev=="function"&&(this._writev=K.writev),typeof K.destroy=="function"&&(this._destroy=K.destroy),typeof K.final=="function"&&(this._final=K.final)),m.call(this)}function B(K,D,N,Z,w,C,k){D.writelen=Z,D.writecb=k,D.writing=!0,D.sync=!0,N?K._writev(w,D.onwrite):K._write(w,C,D.onwrite),D.sync=!1}function U(K,D,N,Z){N||function(w,C){C.length===0&&C.needDrain&&(C.needDrain=!1,w.emit("drain"))}(K,D),D.pendingcb--,Z(),tt(K,D)}function z(K,D){D.bufferProcessing=!0;var N=D.bufferedRequest;if(K._writev&&N&&N.next){var Z=D.bufferedRequestCount,w=new Array(Z),C=D.corkedRequestsFree;C.entry=N;for(var k=0,T=!0;N;)w[k]=N,N.isBuf||(T=!1),N=N.next,k+=1;w.allBuffers=T,B(K,D,!0,D.length,w,"",C.finish),D.pendingcb++,D.lastBufferedRequest=null,C.next?(D.corkedRequestsFree=C.next,C.next=null):D.corkedRequestsFree=new s(D),D.bufferedRequestCount=0}else{for(;N;){var R=N.chunk,F=N.encoding,H=N.callback;if(B(K,D,!1,D.objectMode?1:R.length,R,F,H),N=N.next,D.bufferedRequestCount--,D.writing)break}N===null&&(D.lastBufferedRequest=null)}D.bufferedRequest=N,D.bufferProcessing=!1}function q(K){return K.ending&&K.length===0&&K.bufferedRequest===null&&!K.finished&&!K.writing}function G(K,D){K._final(function(N){D.pendingcb--,N&&K.emit("error",N),D.prefinished=!0,K.emit("prefinish"),tt(K,D)})}function tt(K,D){var N=q(D);return N&&(function(Z,w){w.prefinished||w.finalCalled||(typeof Z._final=="function"?(w.pendingcb++,w.finalCalled=!0,a.nextTick(G,Z,w)):(w.prefinished=!0,Z.emit("prefinish")))}(K,D),D.pendingcb===0&&(D.finished=!0,K.emit("finish"))),N}c.inherits(O,m),S.prototype.getBuffer=function(){for(var K=this.bufferedRequest,D=[];K;)D.push(K),K=K.next;return D},function(){try{Object.defineProperty(S.prototype,"buffer",{get:d.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(_=Function.prototype[Symbol.hasInstance],Object.defineProperty(O,Symbol.hasInstance,{value:function(K){return!!_.call(this,K)||this===O&&K&&K._writableState instanceof S}})):_=function(K){return K instanceof this},O.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},O.prototype.write=function(K,D,N){var Z,w=this._writableState,C=!1,k=!w.objectMode&&(Z=K,v.isBuffer(Z)||Z instanceof p);return k&&!v.isBuffer(K)&&(K=function(T){return v.from(T)}(K)),typeof D=="function"&&(N=D,D=null),k?D="buffer":D||(D=w.defaultEncoding),typeof N!="function"&&(N=x),w.ended?function(T,R){var F=new Error("write after end");T.emit("error",F),a.nextTick(R,F)}(this,N):(k||function(T,R,F,H){var it=!0,ot=!1;return F===null?ot=new TypeError("May not write null values to stream"):typeof F=="string"||F===void 0||R.objectMode||(ot=new TypeError("Invalid non-string/buffer chunk")),ot&&(T.emit("error",ot),a.nextTick(H,ot),it=!1),it}(this,w,K,N))&&(w.pendingcb++,C=function(T,R,F,H,it,ot){if(!F){var dt=function(V,rt,mt){return V.objectMode||V.decodeStrings===!1||typeof rt!="string"||(rt=v.from(rt,mt)),rt}(R,H,it);H!==dt&&(F=!0,it="buffer",H=dt)}var $=R.objectMode?1:H.length;R.length+=$;var ct=R.length<R.highWaterMark;if(ct||(R.needDrain=!0),R.writing||R.corked){var W=R.lastBufferedRequest;R.lastBufferedRequest={chunk:H,encoding:it,isBuf:F,callback:ot,next:null},W?W.next=R.lastBufferedRequest:R.bufferedRequest=R.lastBufferedRequest,R.bufferedRequestCount+=1}else B(T,R,!1,$,H,it,ot);return ct}(this,w,k,K,D,N)),C},O.prototype.cork=function(){this._writableState.corked++},O.prototype.uncork=function(){var K=this._writableState;K.corked&&(K.corked--,K.writing||K.corked||K.bufferProcessing||!K.bufferedRequest||z(this,K))},O.prototype.setDefaultEncoding=function(K){if(typeof K=="string"&&(K=K.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((K+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+K);return this._writableState.defaultEncoding=K,this},Object.defineProperty(O.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),O.prototype._write=function(K,D,N){N(new Error("_write() is not implemented"))},O.prototype._writev=null,O.prototype.end=function(K,D,N){var Z=this._writableState;typeof K=="function"?(N=K,K=null,D=null):typeof D=="function"&&(N=D,D=null),K!=null&&this.write(K,D),Z.corked&&(Z.corked=1,this.uncork()),Z.ending||function(w,C,k){C.ending=!0,tt(w,C),k&&(C.finished?a.nextTick(k):w.once("finish",k)),C.ended=!0,w.writable=!1}(this,Z,N)},Object.defineProperty(O.prototype,"destroyed",{get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(K){this._writableState&&(this._writableState.destroyed=K)}}),O.prototype.destroy=y.destroy,O.prototype._undestroy=y.undestroy,O.prototype._destroy=function(K,D){this.end(),D(K)}}).call(this)}).call(this,e("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},e("timers").setImmediate)},{"./_stream_duplex":508,"./internal/streams/destroy":514,"./internal/streams/stream":515,_process:467,"core-util-is":383,inherits:440,"process-nextick-args":466,"safe-buffer":520,timers:523,"util-deprecate":524}],513:[function(e,t,n){"use strict";var i=e("safe-buffer").Buffer,r=e("util");t.exports=function(){function o(){(function(a,s){if(!(a instanceof s))throw new TypeError("Cannot call a class as a function")})(this,o),this.head=null,this.tail=null,this.length=0}return o.prototype.push=function(a){var s={data:a,next:null};this.length>0?this.tail.next=s:this.head=s,this.tail=s,++this.length},o.prototype.unshift=function(a){var s={data:a,next:this.head};this.length===0&&(this.tail=s),this.head=s,++this.length},o.prototype.shift=function(){if(this.length!==0){var a=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,a}},o.prototype.clear=function(){this.head=this.tail=null,this.length=0},o.prototype.join=function(a){if(this.length===0)return"";for(var s=this.head,u=""+s.data;s=s.next;)u+=a+s.data;return u},o.prototype.concat=function(a){if(this.length===0)return i.alloc(0);for(var s,u,f,c=i.allocUnsafe(a>>>0),d=this.head,m=0;d;)s=d.data,u=c,f=m,s.copy(u,f),m+=d.data.length,d=d.next;return c},o}(),r&&r.inspect&&r.inspect.custom&&(t.exports.prototype[r.inspect.custom]=function(){var o=r.inspect({length:this.length});return this.constructor.name+" "+o})},{"safe-buffer":520,util:188}],514:[function(e,t,n){"use strict";var i=e("process-nextick-args");function r(o,a){o.emit("error",a)}t.exports={destroy:function(o,a){var s=this,u=this._readableState&&this._readableState.destroyed,f=this._writableState&&this._writableState.destroyed;return u||f?(a?a(o):o&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,i.nextTick(r,this,o)):i.nextTick(r,this,o)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(o||null,function(c){!a&&c?s._writableState?s._writableState.errorEmitted||(s._writableState.errorEmitted=!0,i.nextTick(r,s,c)):i.nextTick(r,s,c):a&&a(c)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":466}],515:[function(e,t,n){arguments[4][490][0].apply(n,arguments)},{dup:490,events:422}],516:[function(e,t,n){"use strict";t.exports=e("./readable").PassThrough},{"./readable":517}],517:[function(e,t,n){"use strict";(n=t.exports=e("./lib/_stream_readable.js")).Stream=n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":508,"./lib/_stream_passthrough.js":509,"./lib/_stream_readable.js":510,"./lib/_stream_transform.js":511,"./lib/_stream_writable.js":512}],518:[function(e,t,n){"use strict";t.exports=e("./readable").Transform},{"./readable":517}],519:[function(e,t,n){"use strict";t.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":512}],520:[function(e,t,n){arguments[4][217][0].apply(n,arguments)},{buffer:220,dup:217}],521:[function(e,t,n){arguments[4][218][0].apply(n,arguments)},{dup:218,"safe-buffer":520}],522:[function(e,t,n){arguments[4][218][0].apply(n,arguments)},{dup:218,"safe-buffer":494}],523:[function(e,t,n){(function(i,r){(function(){"use strict";var o=e("process/browser.js").nextTick,a=Function.prototype.apply,s=Array.prototype.slice,u={},f=0;function c(d,m){this._id=d,this._clearFn=m}n.setTimeout=function(){return new c(a.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new c(a.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(d){d.close()},c.prototype.unref=c.prototype.ref=function(){},c.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(d,m){clearTimeout(d._idleTimeoutId),d._idleTimeout=m},n.unenroll=function(d){clearTimeout(d._idleTimeoutId),d._idleTimeout=-1},n._unrefActive=n.active=function(d){clearTimeout(d._idleTimeoutId);var m=d._idleTimeout;m>=0&&(d._idleTimeoutId=setTimeout(function(){d._onTimeout&&d._onTimeout()},m))},n.setImmediate=typeof i=="function"?i:function(d){var m=f++,v=!(arguments.length<2)&&s.call(arguments,1);return u[m]=!0,o(function(){u[m]&&(v?d.apply(null,v):d.call(null),n.clearImmediate(m))}),m},n.clearImmediate=typeof r=="function"?r:function(d){delete u[d]}}).call(this)}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":467,timers:523}],524:[function(e,t,n){(function(i){(function(){"use strict";function r(o){try{if(!i.localStorage)return!1}catch{return!1}var a=i.localStorage[o];return a!=null&&String(a).toLowerCase()==="true"}t.exports=function(o,a){if(r("noDeprecation"))return o;var s=!1;return function(){if(!s){if(r("throwDeprecation"))throw new Error(a);r("traceDeprecation")?console.trace(a):console.warn(a),s=!0}return o.apply(this,arguments)}}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],525:[function(e,t,n){"use strict";typeof Object.create=="function"?t.exports=function(i,r){i.super_=r,i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(i,r){i.super_=r;var o=function(){};o.prototype=r.prototype,i.prototype=new o,i.prototype.constructor=i}},{}],526:[function(e,t,n){"use strict";t.exports=function(i){return i&&typeof i=="object"&&typeof i.copy=="function"&&typeof i.fill=="function"&&typeof i.readUInt8=="function"}},{}],527:[function(e,t,n){(function(i,r){(function(){"use strict";var o=/%[sdj%]/g;n.format=function(w){if(!S(w)){for(var C=[],k=0;k<arguments.length;k++)C.push(u(arguments[k]));return C.join(" ")}k=1;for(var T=arguments,R=T.length,F=String(w).replace(o,function(it){if(it==="%%")return"%";if(k>=R)return it;switch(it){case"%s":return String(T[k++]);case"%d":return Number(T[k++]);case"%j":try{return JSON.stringify(T[k++])}catch{return"[Circular]"}default:return it}}),H=T[k];k<R;H=T[++k])y(H)||!U(H)?F+=" "+H:F+=" "+u(H);return F},n.deprecate=function(w,C){if(O(r.process))return function(){return n.deprecate(w,C).apply(this,arguments)};if(i.noDeprecation===!0)return w;var k=!1;return function(){if(!k){if(i.throwDeprecation)throw new Error(C);i.traceDeprecation?console.trace(C):console.error(C),k=!0}return w.apply(this,arguments)}};var a,s={};function u(w,C){var k={seen:[],stylize:c};return arguments.length>=3&&(k.depth=arguments[2]),arguments.length>=4&&(k.colors=arguments[3]),_(C)?k.showHidden=C:C&&n._extend(k,C),O(k.showHidden)&&(k.showHidden=!1),O(k.depth)&&(k.depth=2),O(k.colors)&&(k.colors=!1),O(k.customInspect)&&(k.customInspect=!0),k.colors&&(k.stylize=f),d(k,w,k.depth)}function f(w,C){var k=u.styles[C];return k?"\x1B["+u.colors[k][0]+"m"+w+"\x1B["+u.colors[k][1]+"m":w}function c(w,C){return w}function d(w,C,k){if(w.customInspect&&C&&G(C.inspect)&&C.inspect!==n.inspect&&(!C.constructor||C.constructor.prototype!==C)){var T=C.inspect(k,w);return S(T)||(T=d(w,T,k)),T}var R=function(W,V){if(O(V))return W.stylize("undefined","undefined");if(S(V)){var rt="'"+JSON.stringify(V).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return W.stylize(rt,"string")}if(x(V))return W.stylize(""+V,"number");if(_(V))return W.stylize(""+V,"boolean");if(y(V))return W.stylize("null","null")}(w,C);if(R)return R;var F=Object.keys(C),H=function(W){var V={};return W.forEach(function(rt,mt){V[rt]=!0}),V}(F);if(w.showHidden&&(F=Object.getOwnPropertyNames(C)),q(C)&&(F.indexOf("message")>=0||F.indexOf("description")>=0))return m(C);if(F.length===0){if(G(C)){var it=C.name?": "+C.name:"";return w.stylize("[Function"+it+"]","special")}if(B(C))return w.stylize(RegExp.prototype.toString.call(C),"regexp");if(z(C))return w.stylize(Date.prototype.toString.call(C),"date");if(q(C))return m(C)}var ot,dt="",$=!1,ct=["{","}"];return p(C)&&($=!0,ct=["[","]"]),G(C)&&(dt=" [Function"+(C.name?": "+C.name:"")+"]"),B(C)&&(dt=" "+RegExp.prototype.toString.call(C)),z(C)&&(dt=" "+Date.prototype.toUTCString.call(C)),q(C)&&(dt=" "+m(C)),F.length!==0||$&&C.length!=0?k<0?B(C)?w.stylize(RegExp.prototype.toString.call(C),"regexp"):w.stylize("[Object]","special"):(w.seen.push(C),ot=$?function(W,V,rt,mt,wt){for(var _t=[],Ct=0,Ft=V.length;Ct<Ft;++Ct)Z(V,String(Ct))?_t.push(v(W,V,rt,mt,String(Ct),!0)):_t.push("");return wt.forEach(function(It){It.match(/^\d+$/)||_t.push(v(W,V,rt,mt,It,!0))}),_t}(w,C,k,H,F):F.map(function(W){return v(w,C,k,H,W,$)}),w.seen.pop(),function(W,V,rt){return W.reduce(function(mt,wt){return wt.indexOf(`
`)>=0,mt+wt.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?rt[0]+(V===""?"":V+`
 `)+" "+W.join(`,
  `)+" "+rt[1]:rt[0]+V+" "+W.join(", ")+" "+rt[1]}(ot,dt,ct)):ct[0]+dt+ct[1]}function m(w){return"["+Error.prototype.toString.call(w)+"]"}function v(w,C,k,T,R,F){var H,it,ot;if((ot=Object.getOwnPropertyDescriptor(C,R)||{value:C[R]}).get?it=ot.set?w.stylize("[Getter/Setter]","special"):w.stylize("[Getter]","special"):ot.set&&(it=w.stylize("[Setter]","special")),Z(T,R)||(H="["+R+"]"),it||(w.seen.indexOf(ot.value)<0?(it=y(k)?d(w,ot.value,null):d(w,ot.value,k-1)).indexOf(`
`)>-1&&(it=F?it.split(`
`).map(function(dt){return"  "+dt}).join(`
`).substr(2):`
`+it.split(`
`).map(function(dt){return"   "+dt}).join(`
`)):it=w.stylize("[Circular]","special")),O(H)){if(F&&R.match(/^\d+$/))return it;(H=JSON.stringify(""+R)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(H=H.substr(1,H.length-2),H=w.stylize(H,"name")):(H=H.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),H=w.stylize(H,"string"))}return H+": "+it}function p(w){return Array.isArray(w)}function _(w){return typeof w=="boolean"}function y(w){return w===null}function x(w){return typeof w=="number"}function S(w){return typeof w=="string"}function O(w){return w===void 0}function B(w){return U(w)&&tt(w)==="[object RegExp]"}function U(w){return typeof w=="object"&&w!==null}function z(w){return U(w)&&tt(w)==="[object Date]"}function q(w){return U(w)&&(tt(w)==="[object Error]"||w instanceof Error)}function G(w){return typeof w=="function"}function tt(w){return Object.prototype.toString.call(w)}function K(w){return w<10?"0"+w.toString(10):w.toString(10)}n.debuglog=function(w){if(O(a)&&(a=i.env.NODE_DEBUG||""),w=w.toUpperCase(),!s[w])if(new RegExp("\\b"+w+"\\b","i").test(a)){var C=i.pid;s[w]=function(){var k=n.format.apply(n,arguments);console.error("%s %d: %s",w,C,k)}}else s[w]=function(){};return s[w]},n.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=p,n.isBoolean=_,n.isNull=y,n.isNullOrUndefined=function(w){return w==null},n.isNumber=x,n.isString=S,n.isSymbol=function(w){return typeof w=="symbol"},n.isUndefined=O,n.isRegExp=B,n.isObject=U,n.isDate=z,n.isError=q,n.isFunction=G,n.isPrimitive=function(w){return w===null||typeof w=="boolean"||typeof w=="number"||typeof w=="string"||typeof w=="symbol"||w===void 0},n.isBuffer=e("./support/isBuffer");var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function N(){var w=new Date,C=[K(w.getHours()),K(w.getMinutes()),K(w.getSeconds())].join(":");return[w.getDate(),D[w.getMonth()],C].join(" ")}function Z(w,C){return Object.prototype.hasOwnProperty.call(w,C)}n.log=function(){console.log("%s - %s",N(),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(w,C){if(!C||!U(C))return w;for(var k=Object.keys(C),T=k.length;T--;)w[k[T]]=C[k[T]];return w}}).call(this)}).call(this,e("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./support/isBuffer":526,_process:467,inherits:525}],528:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"v1",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"v3",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"v4",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(n,"v5",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(n,"NIL",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(n,"version",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(n,"validate",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(n,"stringify",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(n,"parse",{enumerable:!0,get:function(){return d.default}});var i=m(e("./v1.js")),r=m(e("./v3.js")),o=m(e("./v4.js")),a=m(e("./v5.js")),s=m(e("./nil.js")),u=m(e("./version.js")),f=m(e("./validate.js")),c=m(e("./stringify.js")),d=m(e("./parse.js"));function m(v){return v&&v.__esModule?v:{default:v}}},{"./nil.js":530,"./parse.js":531,"./stringify.js":535,"./v1.js":536,"./v3.js":537,"./v4.js":539,"./v5.js":540,"./validate.js":541,"./version.js":542}],529:[function(e,t,n){"use strict";function i(d){return 14+(d+64>>>9<<4)+1}function r(d,m){let v=(65535&d)+(65535&m);return(d>>16)+(m>>16)+(v>>16)<<16|65535&v}function o(d,m,v,p,_,y){return r((x=r(r(m,d),r(p,y)))<<(S=_)|x>>>32-S,v);var x,S}function a(d,m,v,p,_,y,x){return o(m&v|~m&p,d,m,_,y,x)}function s(d,m,v,p,_,y,x){return o(m&p|v&~p,d,m,_,y,x)}function u(d,m,v,p,_,y,x){return o(m^v^p,d,m,_,y,x)}function f(d,m,v,p,_,y,x){return o(v^(m|~p),d,m,_,y,x)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var c=function(d){if(typeof d=="string"){let m=unescape(encodeURIComponent(d));d=new Uint8Array(m.length);for(let v=0;v<m.length;++v)d[v]=m.charCodeAt(v)}return function(m){let v=[],p=32*m.length;for(let _=0;_<p;_+=8){let y=m[_>>5]>>>_%32&255,x=parseInt("0123456789abcdef".charAt(y>>>4&15)+"0123456789abcdef".charAt(15&y),16);v.push(x)}return v}(function(m,v){m[v>>5]|=128<<v%32,m[i(v)-1]=v;let p=1732584193,_=-271733879,y=-1732584194,x=271733878;for(let S=0;S<m.length;S+=16){let O=p,B=_,U=y,z=x;p=a(p,_,y,x,m[S],7,-680876936),x=a(x,p,_,y,m[S+1],12,-389564586),y=a(y,x,p,_,m[S+2],17,606105819),_=a(_,y,x,p,m[S+3],22,-1044525330),p=a(p,_,y,x,m[S+4],7,-176418897),x=a(x,p,_,y,m[S+5],12,1200080426),y=a(y,x,p,_,m[S+6],17,-1473231341),_=a(_,y,x,p,m[S+7],22,-45705983),p=a(p,_,y,x,m[S+8],7,1770035416),x=a(x,p,_,y,m[S+9],12,-1958414417),y=a(y,x,p,_,m[S+10],17,-42063),_=a(_,y,x,p,m[S+11],22,-1990404162),p=a(p,_,y,x,m[S+12],7,1804603682),x=a(x,p,_,y,m[S+13],12,-40341101),y=a(y,x,p,_,m[S+14],17,-1502002290),_=a(_,y,x,p,m[S+15],22,1236535329),p=s(p,_,y,x,m[S+1],5,-165796510),x=s(x,p,_,y,m[S+6],9,-1069501632),y=s(y,x,p,_,m[S+11],14,643717713),_=s(_,y,x,p,m[S],20,-373897302),p=s(p,_,y,x,m[S+5],5,-701558691),x=s(x,p,_,y,m[S+10],9,38016083),y=s(y,x,p,_,m[S+15],14,-660478335),_=s(_,y,x,p,m[S+4],20,-405537848),p=s(p,_,y,x,m[S+9],5,568446438),x=s(x,p,_,y,m[S+14],9,-1019803690),y=s(y,x,p,_,m[S+3],14,-187363961),_=s(_,y,x,p,m[S+8],20,1163531501),p=s(p,_,y,x,m[S+13],5,-1444681467),x=s(x,p,_,y,m[S+2],9,-51403784),y=s(y,x,p,_,m[S+7],14,1735328473),_=s(_,y,x,p,m[S+12],20,-1926607734),p=u(p,_,y,x,m[S+5],4,-378558),x=u(x,p,_,y,m[S+8],11,-2022574463),y=u(y,x,p,_,m[S+11],16,1839030562),_=u(_,y,x,p,m[S+14],23,-35309556),p=u(p,_,y,x,m[S+1],4,-1530992060),x=u(x,p,_,y,m[S+4],11,1272893353),y=u(y,x,p,_,m[S+7],16,-155497632),_=u(_,y,x,p,m[S+10],23,-1094730640),p=u(p,_,y,x,m[S+13],4,681279174),x=u(x,p,_,y,m[S],11,-358537222),y=u(y,x,p,_,m[S+3],16,-722521979),_=u(_,y,x,p,m[S+6],23,76029189),p=u(p,_,y,x,m[S+9],4,-640364487),x=u(x,p,_,y,m[S+12],11,-421815835),y=u(y,x,p,_,m[S+15],16,530742520),_=u(_,y,x,p,m[S+2],23,-995338651),p=f(p,_,y,x,m[S],6,-198630844),x=f(x,p,_,y,m[S+7],10,1126891415),y=f(y,x,p,_,m[S+14],15,-1416354905),_=f(_,y,x,p,m[S+5],21,-57434055),p=f(p,_,y,x,m[S+12],6,1700485571),x=f(x,p,_,y,m[S+3],10,-1894986606),y=f(y,x,p,_,m[S+10],15,-1051523),_=f(_,y,x,p,m[S+1],21,-2054922799),p=f(p,_,y,x,m[S+8],6,1873313359),x=f(x,p,_,y,m[S+15],10,-30611744),y=f(y,x,p,_,m[S+6],15,-1560198380),_=f(_,y,x,p,m[S+13],21,1309151649),p=f(p,_,y,x,m[S+4],6,-145523070),x=f(x,p,_,y,m[S+11],10,-1120210379),y=f(y,x,p,_,m[S+2],15,718787259),_=f(_,y,x,p,m[S+9],21,-343485551),p=r(p,O),_=r(_,B),y=r(y,U),x=r(x,z)}return[p,_,y,x]}(function(m){if(m.length===0)return[];let v=8*m.length,p=new Uint32Array(i(v));for(let _=0;_<v;_+=8)p[_>>5]|=(255&m[_/8])<<_%32;return p}(d),8*d.length))};n.default=c},{}],530:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,n.default="00000000-0000-0000-0000-000000000000"},{}],531:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,r=(i=e("./validate.js"))&&i.__esModule?i:{default:i},o=function(a){if(!(0,r.default)(a))throw TypeError("Invalid UUID");let s,u=new Uint8Array(16);return u[0]=(s=parseInt(a.slice(0,8),16))>>>24,u[1]=s>>>16&255,u[2]=s>>>8&255,u[3]=255&s,u[4]=(s=parseInt(a.slice(9,13),16))>>>8,u[5]=255&s,u[6]=(s=parseInt(a.slice(14,18),16))>>>8,u[7]=255&s,u[8]=(s=parseInt(a.slice(19,23),16))>>>8,u[9]=255&s,u[10]=(s=parseInt(a.slice(24,36),16))/1099511627776&255,u[11]=s/4294967296&255,u[12]=s>>>24&255,u[13]=s>>>16&255,u[14]=s>>>8&255,u[15]=255&s,u};n.default=o},{"./validate.js":541}],532:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,n.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},{}],533:[function(e,t,n){"use strict";let i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){if(!i&&(i=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!i))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(r)};let r=new Uint8Array(16)},{}],534:[function(e,t,n){"use strict";function i(a,s,u,f){switch(a){case 0:return s&u^~s&f;case 1:return s^u^f;case 2:return s&u^s&f^u&f;case 3:return s^u^f}}function r(a,s){return a<<s|a>>>32-s}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(a){let s=[1518500249,1859775393,2400959708,3395469782],u=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof a=="string"){let m=unescape(encodeURIComponent(a));a=[];for(let v=0;v<m.length;++v)a.push(m.charCodeAt(v))}else Array.isArray(a)||(a=Array.prototype.slice.call(a));a.push(128);let f=a.length/4+2,c=Math.ceil(f/16),d=new Array(c);for(let m=0;m<c;++m){let v=new Uint32Array(16);for(let p=0;p<16;++p)v[p]=a[64*m+4*p]<<24|a[64*m+4*p+1]<<16|a[64*m+4*p+2]<<8|a[64*m+4*p+3];d[m]=v}d[c-1][14]=8*(a.length-1)/Math.pow(2,32),d[c-1][14]=Math.floor(d[c-1][14]),d[c-1][15]=8*(a.length-1)&4294967295;for(let m=0;m<c;++m){let v=new Uint32Array(80);for(let O=0;O<16;++O)v[O]=d[m][O];for(let O=16;O<80;++O)v[O]=r(v[O-3]^v[O-8]^v[O-14]^v[O-16],1);let p=u[0],_=u[1],y=u[2],x=u[3],S=u[4];for(let O=0;O<80;++O){let B=Math.floor(O/20),U=r(p,5)+i(B,_,y,x)+S+s[B]+v[O]>>>0;S=x,x=y,y=r(_,30)>>>0,_=p,p=U}u[0]=u[0]+p>>>0,u[1]=u[1]+_>>>0,u[2]=u[2]+y>>>0,u[3]=u[3]+x>>>0,u[4]=u[4]+S>>>0}return[u[0]>>24&255,u[0]>>16&255,u[0]>>8&255,255&u[0],u[1]>>24&255,u[1]>>16&255,u[1]>>8&255,255&u[1],u[2]>>24&255,u[2]>>16&255,u[2]>>8&255,255&u[2],u[3]>>24&255,u[3]>>16&255,u[3]>>8&255,255&u[3],u[4]>>24&255,u[4]>>16&255,u[4]>>8&255,255&u[4]]};n.default=o},{}],535:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,r=(i=e("./validate.js"))&&i.__esModule?i:{default:i};let o=[];for(let s=0;s<256;++s)o.push((s+256).toString(16).substr(1));var a=function(s){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,f=(o[s[u+0]]+o[s[u+1]]+o[s[u+2]]+o[s[u+3]]+"-"+o[s[u+4]]+o[s[u+5]]+"-"+o[s[u+6]]+o[s[u+7]]+"-"+o[s[u+8]]+o[s[u+9]]+"-"+o[s[u+10]]+o[s[u+11]]+o[s[u+12]]+o[s[u+13]]+o[s[u+14]]+o[s[u+15]]).toLowerCase();if(!(0,r.default)(f))throw TypeError("Stringified UUID is invalid");return f};n.default=a},{"./validate.js":541}],536:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=o(e("./rng.js")),r=o(e("./stringify.js"));function o(d){return d&&d.__esModule?d:{default:d}}let a,s,u=0,f=0;var c=function(d,m,v){let p=m&&v||0,_=m||new Array(16),y=(d=d||{}).node||a,x=d.clockseq!==void 0?d.clockseq:s;if(y==null||x==null){let q=d.random||(d.rng||i.default)();y==null&&(y=a=[1|q[0],q[1],q[2],q[3],q[4],q[5]]),x==null&&(x=s=16383&(q[6]<<8|q[7]))}let S=d.msecs!==void 0?d.msecs:Date.now(),O=d.nsecs!==void 0?d.nsecs:f+1,B=S-u+(O-f)/1e4;if(B<0&&d.clockseq===void 0&&(x=x+1&16383),(B<0||S>u)&&d.nsecs===void 0&&(O=0),O>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=S,f=O,s=x,S+=122192928e5;let U=(1e4*(268435455&S)+O)%4294967296;_[p++]=U>>>24&255,_[p++]=U>>>16&255,_[p++]=U>>>8&255,_[p++]=255&U;let z=S/4294967296*1e4&268435455;_[p++]=z>>>8&255,_[p++]=255&z,_[p++]=z>>>24&15|16,_[p++]=z>>>16&255,_[p++]=x>>>8|128,_[p++]=255&x;for(let q=0;q<6;++q)_[p+q]=y[q];return m||(0,r.default)(_)};n.default=c},{"./rng.js":533,"./stringify.js":535}],537:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=o(e("./v35.js")),r=o(e("./md5.js"));function o(s){return s&&s.__esModule?s:{default:s}}var a=(0,i.default)("v3",48,r.default);n.default=a},{"./md5.js":529,"./v35.js":538}],538:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(u,f,c){function d(m,v,p,_){if(typeof m=="string"&&(m=function(x){x=unescape(encodeURIComponent(x));let S=[];for(let O=0;O<x.length;++O)S.push(x.charCodeAt(O));return S}(m)),typeof v=="string"&&(v=(0,r.default)(v)),v.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let y=new Uint8Array(16+m.length);if(y.set(v),y.set(m,v.length),y=c(y),y[6]=15&y[6]|f,y[8]=63&y[8]|128,p){_=_||0;for(let x=0;x<16;++x)p[_+x]=y[x];return p}return(0,i.default)(y)}try{d.name=u}catch{}return d.DNS=a,d.URL=s,d},n.URL=n.DNS=void 0;var i=o(e("./stringify.js")),r=o(e("./parse.js"));function o(u){return u&&u.__esModule?u:{default:u}}let a="6ba7b810-9dad-11d1-80b4-00c04fd430c8";n.DNS=a;let s="6ba7b811-9dad-11d1-80b4-00c04fd430c8";n.URL=s},{"./parse.js":531,"./stringify.js":535}],539:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=o(e("./rng.js")),r=o(e("./stringify.js"));function o(s){return s&&s.__esModule?s:{default:s}}var a=function(s,u,f){let c=(s=s||{}).random||(s.rng||i.default)();if(c[6]=15&c[6]|64,c[8]=63&c[8]|128,u){f=f||0;for(let d=0;d<16;++d)u[f+d]=c[d];return u}return(0,r.default)(c)};n.default=a},{"./rng.js":533,"./stringify.js":535}],540:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=o(e("./v35.js")),r=o(e("./sha1.js"));function o(s){return s&&s.__esModule?s:{default:s}}var a=(0,i.default)("v5",80,r.default);n.default=a},{"./sha1.js":534,"./v35.js":538}],541:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,r=(i=e("./regex.js"))&&i.__esModule?i:{default:i},o=function(a){return typeof a=="string"&&r.default.test(a)};n.default=o},{"./regex.js":532}],542:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,r=(i=e("./validate.js"))&&i.__esModule?i:{default:i},o=function(a){if(!(0,r.default)(a))throw TypeError("Invalid UUID");return parseInt(a.substr(14,1),16)};n.default=o},{"./validate.js":541}],543:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.CHAR=`	
\r -\uD7FF\uE000-\uFFFD\u{10000}-\u{10FFFF}`,n.S=` 	\r
`,n.NAME_START_CHAR=":A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u{10000}-\u{EFFFF}",n.NAME_CHAR="-"+n.NAME_START_CHAR+".0-9\xB7\u0300-\u036F\u203F-\u2040",n.CHAR_RE=new RegExp("^["+n.CHAR+"]$","u"),n.S_RE=new RegExp("^["+n.S+"]+$","u"),n.NAME_START_CHAR_RE=new RegExp("^["+n.NAME_START_CHAR+"]$","u"),n.NAME_CHAR_RE=new RegExp("^["+n.NAME_CHAR+"]$","u"),n.NAME_RE=new RegExp("^["+n.NAME_START_CHAR+"]["+n.NAME_CHAR+"]*$","u"),n.NMTOKEN_RE=new RegExp("^["+n.NAME_CHAR+"]+$","u");function i(r){return r>=65&&r<=90||r>=97&&r<=122||r===58||r===95||r===8204||r===8205||r>=192&&r<=214||r>=216&&r<=246||r>=248&&r<=767||r>=880&&r<=893||r>=895&&r<=8191||r>=8304&&r<=8591||r>=11264&&r<=12271||r>=12289&&r<=55295||r>=63744&&r<=64975||r>=65008&&r<=65533||r>=65536&&r<=983039}n.S_LIST=[32,10,13,9],n.isChar=function(r){return r>=32&&r<=55295||r===10||r===13||r===9||r>=57344&&r<=65533||r>=65536&&r<=1114111},n.isS=function(r){return r===32||r===10||r===13||r===9},n.isNameStartChar=i,n.isNameChar=function(r){return i(r)||r>=48&&r<=57||r===45||r===46||r===183||r>=768&&r<=879||r>=8255&&r<=8256}},{}],544:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.CHAR="-\uD7FF\uE000-\uFFFD\u{10000}-\u{10FFFF}",n.RESTRICTED_CHAR="-\b\v\f-\x7F-\x84\x86-\x9F",n.S=` 	\r
`,n.NAME_START_CHAR=":A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u{10000}-\u{EFFFF}",n.NAME_CHAR="-"+n.NAME_START_CHAR+".0-9\xB7\u0300-\u036F\u203F-\u2040",n.CHAR_RE=new RegExp("^["+n.CHAR+"]$","u"),n.RESTRICTED_CHAR_RE=new RegExp("^["+n.RESTRICTED_CHAR+"]$","u"),n.S_RE=new RegExp("^["+n.S+"]+$","u"),n.NAME_START_CHAR_RE=new RegExp("^["+n.NAME_START_CHAR+"]$","u"),n.NAME_CHAR_RE=new RegExp("^["+n.NAME_CHAR+"]$","u"),n.NAME_RE=new RegExp("^["+n.NAME_START_CHAR+"]["+n.NAME_CHAR+"]*$","u"),n.NMTOKEN_RE=new RegExp("^["+n.NAME_CHAR+"]+$","u");function i(r){return r>=65&&r<=90||r>=97&&r<=122||r===58||r===95||r===8204||r===8205||r>=192&&r<=214||r>=216&&r<=246||r>=248&&r<=767||r>=880&&r<=893||r>=895&&r<=8191||r>=8304&&r<=8591||r>=11264&&r<=12271||r>=12289&&r<=55295||r>=63744&&r<=64975||r>=65008&&r<=65533||r>=65536&&r<=983039}n.S_LIST=[32,10,13,9],n.isChar=function(r){return r>=1&&r<=55295||r>=57344&&r<=65533||r>=65536&&r<=1114111},n.isRestrictedChar=function(r){return r>=1&&r<=8||r===11||r===12||r>=14&&r<=31||r>=127&&r<=132||r>=134&&r<=159},n.isCharAndNotRestricted=function(r){return r===9||r===10||r===13||r>31&&r<127||r===133||r>159&&r<=55295||r>=57344&&r<=65533||r>=65536&&r<=1114111},n.isS=function(r){return r===32||r===10||r===13||r===9},n.isNameStartChar=i,n.isNameChar=function(r){return i(r)||r>=48&&r<=57||r===45||r===46||r===183||r>=768&&r<=879||r>=8255&&r<=8256}},{}],545:[function(e,t,n){"use strict";function i(r){return r>=65&&r<=90||r===95||r>=97&&r<=122||r>=192&&r<=214||r>=216&&r<=246||r>=248&&r<=767||r>=880&&r<=893||r>=895&&r<=8191||r>=8204&&r<=8205||r>=8304&&r<=8591||r>=11264&&r<=12271||r>=12289&&r<=55295||r>=63744&&r<=64975||r>=65008&&r<=65533||r>=65536&&r<=983039}Object.defineProperty(n,"__esModule",{value:!0}),n.NC_NAME_START_CHAR="A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u{10000}-\u{EFFFF}",n.NC_NAME_CHAR="-"+n.NC_NAME_START_CHAR+".0-9\xB7\u0300-\u036F\u203F-\u2040",n.NC_NAME_START_CHAR_RE=new RegExp("^["+n.NC_NAME_START_CHAR+"]$","u"),n.NC_NAME_CHAR_RE=new RegExp("^["+n.NC_NAME_CHAR+"]$","u"),n.NC_NAME_RE=new RegExp("^["+n.NC_NAME_START_CHAR+"]["+n.NC_NAME_CHAR+"]*$","u"),n.isNCNameStartChar=i,n.isNCNameChar=function(r){return i(r)||r===45||r===46||r>=48&&r<=57||r===183||r>=768&&r<=879||r>=8255&&r<=8256}},{}]},{},[15])(15)})});var fn=hr(ks()),TD=hr(sd()),PD=hr(od());var bs=ks();bs.Control.Coordinates=bs.Control.extend({options:{position:"bottomleft",latitudeText:"lat.",longitudeText:"lon.",promptText:"Press Ctrl+C to copy coordinates",precision:4},initialize:function(e){bs.Control.prototype.initialize.call(this,e)},onAdd:function(e){var t="leaflet-control-coordinates",n=this,i=this._container=bs.DomUtil.create("div",t);return this.visible=!1,bs.DomUtil.addClass(i,"hidden"),bs.DomEvent.disableClickPropagation(i),this._addText(i,e),bs.DomEvent.addListener(i,"click",function(){var r=bs.DomUtil.get(n._lat),o=bs.DomUtil.get(n._lng),a=this.options.latitudeText.length+1,s=this.options.longitudeText.length+1,u=r.textContent.indexOf(this.options.latitudeText)+a,f=o.textContent.indexOf(this.options.longitudeText)+s,c=r.textContent.substr(u),d=o.textContent.substr(f);window.prompt(this.options.promptText,c+" "+d)},this),i},_addText:function(e,t){return this._lat=bs.DomUtil.create("span","leaflet-control-coordinates-lat",e),this._lng=bs.DomUtil.create("span","leaflet-control-coordinates-lng",e),e},setCoordinates:function(e){this.visible||bs.DomUtil.removeClass(this._container,"hidden"),e.latlng&&(bs.DomUtil.get(this._lat).innerHTML="<strong>"+this.options.latitudeText+":</strong> "+e.latlng.lat.toFixed(this.options.precision).toString(),bs.DomUtil.get(this._lng).innerHTML="<strong>"+this.options.longitudeText+":</strong> "+e.latlng.lng.toFixed(this.options.precision).toString())}});(()=>{var e={9705:(i,r,o)=>{"use strict";var a=o(1540);function s(u){var f=[1/0,1/0,-1/0,-1/0];return a.coordEach(u,function(c){f[0]>c[0]&&(f[0]=c[0]),f[1]>c[1]&&(f[1]=c[1]),f[2]<c[0]&&(f[2]=c[0]),f[3]<c[1]&&(f[3]=c[1])}),f}s.default=s,r.Z=s},4102:(i,r)=>{"use strict";function o(x,S,O){O===void 0&&(O={});var B={type:"Feature"};return(O.id===0||O.id)&&(B.id=O.id),O.bbox&&(B.bbox=O.bbox),B.properties=S||{},B.geometry=x,B}function a(x,S,O){if(O===void 0&&(O={}),!x)throw new Error("coordinates is required");if(!Array.isArray(x))throw new Error("coordinates must be an Array");if(x.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!y(x[0])||!y(x[1]))throw new Error("coordinates must contain numbers");return o({type:"Point",coordinates:x},S,O)}function s(x,S,O){O===void 0&&(O={});for(var B=0,U=x;B<U.length;B++){var z=U[B];if(z.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var q=0;q<z[z.length-1].length;q++)if(z[z.length-1][q]!==z[0][q])throw new Error("First and last Position are not equivalent.")}return o({type:"Polygon",coordinates:x},S,O)}function u(x,S,O){if(O===void 0&&(O={}),x.length<2)throw new Error("coordinates must be an array of two or more positions");return o({type:"LineString",coordinates:x},S,O)}function f(x,S){S===void 0&&(S={});var O={type:"FeatureCollection"};return S.id&&(O.id=S.id),S.bbox&&(O.bbox=S.bbox),O.features=x,O}function c(x,S,O){return O===void 0&&(O={}),o({type:"MultiLineString",coordinates:x},S,O)}function d(x,S,O){return O===void 0&&(O={}),o({type:"MultiPoint",coordinates:x},S,O)}function m(x,S,O){return O===void 0&&(O={}),o({type:"MultiPolygon",coordinates:x},S,O)}function v(x,S){S===void 0&&(S="kilometers");var O=r.factors[S];if(!O)throw new Error(S+" units is invalid");return x*O}function p(x,S){S===void 0&&(S="kilometers");var O=r.factors[S];if(!O)throw new Error(S+" units is invalid");return x/O}function _(x){return 180*(x%(2*Math.PI))/Math.PI}function y(x){return!isNaN(x)&&x!==null&&!Array.isArray(x)}Object.defineProperty(r,"__esModule",{value:!0}),r.earthRadius=63710088e-1,r.factors={centimeters:100*r.earthRadius,centimetres:100*r.earthRadius,degrees:r.earthRadius/111325,feet:3.28084*r.earthRadius,inches:39.37*r.earthRadius,kilometers:r.earthRadius/1e3,kilometres:r.earthRadius/1e3,meters:r.earthRadius,metres:r.earthRadius,miles:r.earthRadius/1609.344,millimeters:1e3*r.earthRadius,millimetres:1e3*r.earthRadius,nauticalmiles:r.earthRadius/1852,radians:1,yards:1.0936*r.earthRadius},r.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/r.earthRadius,yards:1.0936133},r.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},r.feature=o,r.geometry=function(x,S,O){switch(O===void 0&&(O={}),x){case"Point":return a(S).geometry;case"LineString":return u(S).geometry;case"Polygon":return s(S).geometry;case"MultiPoint":return d(S).geometry;case"MultiLineString":return c(S).geometry;case"MultiPolygon":return m(S).geometry;default:throw new Error(x+" is invalid")}},r.point=a,r.points=function(x,S,O){return O===void 0&&(O={}),f(x.map(function(B){return a(B,S)}),O)},r.polygon=s,r.polygons=function(x,S,O){return O===void 0&&(O={}),f(x.map(function(B){return s(B,S)}),O)},r.lineString=u,r.lineStrings=function(x,S,O){return O===void 0&&(O={}),f(x.map(function(B){return u(B,S)}),O)},r.featureCollection=f,r.multiLineString=c,r.multiPoint=d,r.multiPolygon=m,r.geometryCollection=function(x,S,O){return O===void 0&&(O={}),o({type:"GeometryCollection",geometries:x},S,O)},r.round=function(x,S){if(S===void 0&&(S=0),S&&!(S>=0))throw new Error("precision must be a positive number");var O=Math.pow(10,S||0);return Math.round(x*O)/O},r.radiansToLength=v,r.lengthToRadians=p,r.lengthToDegrees=function(x,S){return _(p(x,S))},r.bearingToAzimuth=function(x){var S=x%360;return S<0&&(S+=360),S},r.radiansToDegrees=_,r.degreesToRadians=function(x){return x%360*Math.PI/180},r.convertLength=function(x,S,O){if(S===void 0&&(S="kilometers"),O===void 0&&(O="kilometers"),!(x>=0))throw new Error("length must be a positive number");return v(p(x,S),O)},r.convertArea=function(x,S,O){if(S===void 0&&(S="meters"),O===void 0&&(O="kilometers"),!(x>=0))throw new Error("area must be a positive number");var B=r.areaFactors[S];if(!B)throw new Error("invalid original units");var U=r.areaFactors[O];if(!U)throw new Error("invalid final units");return x/B*U},r.isNumber=y,r.isObject=function(x){return!!x&&x.constructor===Object},r.validateBBox=function(x){if(!x)throw new Error("bbox is required");if(!Array.isArray(x))throw new Error("bbox must be an Array");if(x.length!==4&&x.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");x.forEach(function(S){if(!y(S))throw new Error("bbox must only contain numbers")})},r.validateId=function(x){if(!x)throw new Error("id is required");if(["string","number"].indexOf(typeof x)===-1)throw new Error("id must be a number or a string")}},1540:(i,r,o)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=o(4102);function s(p,_,y){if(p!==null)for(var x,S,O,B,U,z,q,G,tt=0,K=0,D=p.type,N=D==="FeatureCollection",Z=D==="Feature",w=N?p.features.length:1,C=0;C<w;C++){U=(G=!!(q=N?p.features[C].geometry:Z?p.geometry:p)&&q.type==="GeometryCollection")?q.geometries.length:1;for(var k=0;k<U;k++){var T=0,R=0;if((B=G?q.geometries[k]:q)!==null){z=B.coordinates;var F=B.type;switch(tt=!y||F!=="Polygon"&&F!=="MultiPolygon"?0:1,F){case null:break;case"Point":if(_(z,K,C,T,R)===!1)return!1;K++,T++;break;case"LineString":case"MultiPoint":for(x=0;x<z.length;x++){if(_(z[x],K,C,T,R)===!1)return!1;K++,F==="MultiPoint"&&T++}F==="LineString"&&T++;break;case"Polygon":case"MultiLineString":for(x=0;x<z.length;x++){for(S=0;S<z[x].length-tt;S++){if(_(z[x][S],K,C,T,R)===!1)return!1;K++}F==="MultiLineString"&&T++,F==="Polygon"&&R++}F==="Polygon"&&T++;break;case"MultiPolygon":for(x=0;x<z.length;x++){for(R=0,S=0;S<z[x].length;S++){for(O=0;O<z[x][S].length-tt;O++){if(_(z[x][S][O],K,C,T,R)===!1)return!1;K++}R++}T++}break;case"GeometryCollection":for(x=0;x<B.geometries.length;x++)if(s(B.geometries[x],_,y)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function u(p,_){var y;switch(p.type){case"FeatureCollection":for(y=0;y<p.features.length&&_(p.features[y].properties,y)!==!1;y++);break;case"Feature":_(p.properties,0)}}function f(p,_){if(p.type==="Feature")_(p,0);else if(p.type==="FeatureCollection")for(var y=0;y<p.features.length&&_(p.features[y],y)!==!1;y++);}function c(p,_){var y,x,S,O,B,U,z,q,G,tt,K=0,D=p.type==="FeatureCollection",N=p.type==="Feature",Z=D?p.features.length:1;for(y=0;y<Z;y++){for(U=D?p.features[y].geometry:N?p.geometry:p,q=D?p.features[y].properties:N?p.properties:{},G=D?p.features[y].bbox:N?p.bbox:void 0,tt=D?p.features[y].id:N?p.id:void 0,B=(z=!!U&&U.type==="GeometryCollection")?U.geometries.length:1,S=0;S<B;S++)if((O=z?U.geometries[S]:U)!==null)switch(O.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(_(O,K,q,G,tt)===!1)return!1;break;case"GeometryCollection":for(x=0;x<O.geometries.length;x++)if(_(O.geometries[x],K,q,G,tt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(_(null,K,q,G,tt)===!1)return!1;K++}}function d(p,_){c(p,function(y,x,S,O,B){var U,z=y===null?null:y.type;switch(z){case null:case"Point":case"LineString":case"Polygon":return _(a.feature(y,S,{bbox:O,id:B}),x,0)!==!1&&void 0}switch(z){case"MultiPoint":U="Point";break;case"MultiLineString":U="LineString";break;case"MultiPolygon":U="Polygon"}for(var q=0;q<y.coordinates.length;q++){var G={type:U,coordinates:y.coordinates[q]};if(_(a.feature(G,S),x,q)===!1)return!1}})}function m(p,_){d(p,function(y,x,S){var O=0;if(y.geometry){var B=y.geometry.type;if(B!=="Point"&&B!=="MultiPoint"){var U,z=0,q=0,G=0;return s(y,function(tt,K,D,N,Z){if(U===void 0||x>z||N>q||Z>G)return U=tt,z=x,q=N,G=Z,void(O=0);var w=a.lineString([U,tt],y.properties);if(_(w,x,S,Z,O)===!1)return!1;O++,U=tt})!==!1&&void 0}}})}function v(p,_){if(!p)throw new Error("geojson is required");d(p,function(y,x,S){if(y.geometry!==null){var O=y.geometry.type,B=y.geometry.coordinates;switch(O){case"LineString":if(_(y,x,S,0,0)===!1)return!1;break;case"Polygon":for(var U=0;U<B.length;U++)if(_(a.lineString(B[U],y.properties),x,S,U)===!1)return!1}}})}r.coordAll=function(p){var _=[];return s(p,function(y){_.push(y)}),_},r.coordEach=s,r.coordReduce=function(p,_,y,x){var S=y;return s(p,function(O,B,U,z,q){S=B===0&&y===void 0?O:_(S,O,B,U,z,q)},x),S},r.featureEach=f,r.featureReduce=function(p,_,y){var x=y;return f(p,function(S,O){x=O===0&&y===void 0?S:_(x,S,O)}),x},r.findPoint=function(p,_){if(_=_||{},!a.isObject(_))throw new Error("options is invalid");var y,x=_.featureIndex||0,S=_.multiFeatureIndex||0,O=_.geometryIndex||0,B=_.coordIndex||0,U=_.properties;switch(p.type){case"FeatureCollection":x<0&&(x=p.features.length+x),U=U||p.features[x].properties,y=p.features[x].geometry;break;case"Feature":U=U||p.properties,y=p.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":y=p;break;default:throw new Error("geojson is invalid")}if(y===null)return null;var z=y.coordinates;switch(y.type){case"Point":return a.point(z,U,_);case"MultiPoint":return S<0&&(S=z.length+S),a.point(z[S],U,_);case"LineString":return B<0&&(B=z.length+B),a.point(z[B],U,_);case"Polygon":return O<0&&(O=z.length+O),B<0&&(B=z[O].length+B),a.point(z[O][B],U,_);case"MultiLineString":return S<0&&(S=z.length+S),B<0&&(B=z[S].length+B),a.point(z[S][B],U,_);case"MultiPolygon":return S<0&&(S=z.length+S),O<0&&(O=z[S].length+O),B<0&&(B=z[S][O].length-B),a.point(z[S][O][B],U,_)}throw new Error("geojson is invalid")},r.findSegment=function(p,_){if(_=_||{},!a.isObject(_))throw new Error("options is invalid");var y,x=_.featureIndex||0,S=_.multiFeatureIndex||0,O=_.geometryIndex||0,B=_.segmentIndex||0,U=_.properties;switch(p.type){case"FeatureCollection":x<0&&(x=p.features.length+x),U=U||p.features[x].properties,y=p.features[x].geometry;break;case"Feature":U=U||p.properties,y=p.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":y=p;break;default:throw new Error("geojson is invalid")}if(y===null)return null;var z=y.coordinates;switch(y.type){case"Point":case"MultiPoint":return null;case"LineString":return B<0&&(B=z.length+B-1),a.lineString([z[B],z[B+1]],U,_);case"Polygon":return O<0&&(O=z.length+O),B<0&&(B=z[O].length+B-1),a.lineString([z[O][B],z[O][B+1]],U,_);case"MultiLineString":return S<0&&(S=z.length+S),B<0&&(B=z[S].length+B-1),a.lineString([z[S][B],z[S][B+1]],U,_);case"MultiPolygon":return S<0&&(S=z.length+S),O<0&&(O=z[S].length+O),B<0&&(B=z[S][O].length-B-1),a.lineString([z[S][O][B],z[S][O][B+1]],U,_)}throw new Error("geojson is invalid")},r.flattenEach=d,r.flattenReduce=function(p,_,y){var x=y;return d(p,function(S,O,B){x=O===0&&B===0&&y===void 0?S:_(x,S,O,B)}),x},r.geomEach=c,r.geomReduce=function(p,_,y){var x=y;return c(p,function(S,O,B,U,z){x=O===0&&y===void 0?S:_(x,S,O,B,U,z)}),x},r.lineEach=v,r.lineReduce=function(p,_,y){var x=y;return v(p,function(S,O,B,U){x=O===0&&y===void 0?S:_(x,S,O,B,U)}),x},r.propEach=u,r.propReduce=function(p,_,y){var x=y;return u(p,function(S,O){x=O===0&&y===void 0?S:_(x,S,O)}),x},r.segmentEach=m,r.segmentReduce=function(p,_,y){var x=y,S=!1;return m(p,function(O,B,U,z,q){x=S===!1&&y===void 0?O:_(x,O,B,U,z,q),S=!0}),x}},5975:(i,r,o)=>{"use strict";o(7107);var a=o(2492),s=o.n(a);let u=JSON.parse('{"tooltips":{"placeMarker":"Click to place marker","firstVertex":"Click to place first vertex","continueLine":"Click to continue drawing","finishLine":"Click any existing marker to finish","finishPoly":"Click first marker to finish","finishRect":"Click to finish","startCircle":"Click to place circle center","finishCircle":"Click to finish circle","placeCircleMarker":"Click to place circle marker","placeText":"Click to place text"},"actions":{"finish":"Finish","cancel":"Cancel","removeLastVertex":"Remove Last Vertex"},"buttonTitles":{"drawMarkerButton":"Draw Marker","drawPolyButton":"Draw Polygons","drawLineButton":"Draw Polyline","drawCircleButton":"Draw Circle","drawRectButton":"Draw Rectangle","editButton":"Edit Layers","dragButton":"Drag Layers","cutButton":"Cut Layers","deleteButton":"Remove Layers","drawCircleMarkerButton":"Draw Circle Marker","snappingButton":"Snap dragged marker to other layers and vertices","pinningButton":"Pin shared vertices together","rotateButton":"Rotate Layers","drawTextButton":"Draw Text","scaleButton":"Scale Layers","autoTracingButton":"Auto trace Line"},"measurements":{"totalLength":"Length","segmentLength":"Segment length","area":"Area","radius":"Radius","perimeter":"Perimeter","height":"Height","width":"Width","coordinates":"Position","coordinatesMarker":"Position Marker"}}'),f=JSON.parse('{"tooltips":{"placeMarker":"Platziere den Marker mit Klick","firstVertex":"Platziere den ersten Marker mit Klick","continueLine":"Klicke, um weiter zu zeichnen","finishLine":"Beende mit Klick auf existierenden Marker","finishPoly":"Beende mit Klick auf ersten Marker","finishRect":"Beende mit Klick","startCircle":"Platziere das Kreiszentrum mit Klick","finishCircle":"Beende den Kreis mit Klick","placeCircleMarker":"Platziere den Kreismarker mit Klick","placeText":"Platziere den Text mit Klick"},"actions":{"finish":"Beenden","cancel":"Abbrechen","removeLastVertex":"Letzten Vertex l\xF6schen"},"buttonTitles":{"drawMarkerButton":"Marker zeichnen","drawPolyButton":"Polygon zeichnen","drawLineButton":"Polyline zeichnen","drawCircleButton":"Kreis zeichnen","drawRectButton":"Rechteck zeichnen","editButton":"Layer editieren","dragButton":"Layer bewegen","cutButton":"Layer schneiden","deleteButton":"Layer l\xF6schen","drawCircleMarkerButton":"Kreismarker zeichnen","snappingButton":"Bewegter Layer an andere Layer oder Vertexe einhacken","pinningButton":"Vertexe an der gleichen Position verkn\xFCpfen","rotateButton":"Layer drehen","drawTextButton":"Text zeichnen","scaleButton":"Layer skalieren","autoTracingButton":"Linie automatisch nachzeichen"},"measurements":{"totalLength":"L\xE4nge","segmentLength":"Segment L\xE4nge","area":"Fl\xE4che","radius":"Radius","perimeter":"Umfang","height":"H\xF6he","width":"Breite","coordinates":"Position","coordinatesMarker":"Position Marker"}}'),c=JSON.parse(`{"tooltips":{"placeMarker":"Clicca per posizionare un Marker","firstVertex":"Clicca per posizionare il primo vertice","continueLine":"Clicca per continuare a disegnare","finishLine":"Clicca qualsiasi marker esistente per terminare","finishPoly":"Clicca il primo marker per terminare","finishRect":"Clicca per terminare","startCircle":"Clicca per posizionare il punto centrale del cerchio","finishCircle":"Clicca per terminare il cerchio","placeCircleMarker":"Clicca per posizionare un Marker del cherchio"},"actions":{"finish":"Termina","cancel":"Annulla","removeLastVertex":"Rimuovi l'ultimo vertice"},"buttonTitles":{"drawMarkerButton":"Disegna Marker","drawPolyButton":"Disegna Poligoni","drawLineButton":"Disegna Polilinea","drawCircleButton":"Disegna Cerchio","drawRectButton":"Disegna Rettangolo","editButton":"Modifica Livelli","dragButton":"Sposta Livelli","cutButton":"Ritaglia Livelli","deleteButton":"Elimina Livelli","drawCircleMarkerButton":"Disegna Marker del Cerchio","snappingButton":"Snap ha trascinato il pennarello su altri strati e vertici","pinningButton":"Pin condiviso vertici insieme"}}`),d=JSON.parse('{"tooltips":{"placeMarker":"Klik untuk menempatkan marker","firstVertex":"Klik untuk menempatkan vertex pertama","continueLine":"Klik untuk meneruskan digitasi","finishLine":"Klik pada sembarang marker yang ada untuk mengakhiri","finishPoly":"Klik marker pertama untuk mengakhiri","finishRect":"Klik untuk mengakhiri","startCircle":"Klik untuk menempatkan titik pusat lingkaran","finishCircle":"Klik untuk mengakhiri lingkaran","placeCircleMarker":"Klik untuk menempatkan penanda lingkarann"},"actions":{"finish":"Selesai","cancel":"Batal","removeLastVertex":"Hilangkan Vertex Terakhir"},"buttonTitles":{"drawMarkerButton":"Digitasi Marker","drawPolyButton":"Digitasi Polygon","drawLineButton":"Digitasi Polyline","drawCircleButton":"Digitasi Lingkaran","drawRectButton":"Digitasi Segi Empat","editButton":"Edit Layer","dragButton":"Geser Layer","cutButton":"Potong Layer","deleteButton":"Hilangkan Layer","drawCircleMarkerButton":"Digitasi Penanda Lingkaran","snappingButton":"Jepretkan penanda yang ditarik ke lapisan dan simpul lain","pinningButton":"Sematkan simpul bersama bersama"}}'),m=JSON.parse('{"tooltips":{"placeMarker":"Adaug\u0103 un punct","firstVertex":"Apas\u0103 aici pentru a ad\u0103uga primul Vertex","continueLine":"Apas\u0103 aici pentru a continua desenul","finishLine":"Apas\u0103 pe orice obiect pentru a finisa desenul","finishPoly":"Apas\u0103 pe primul obiect pentru a finisa","finishRect":"Apas\u0103 pentru a finisa","startCircle":"Apas\u0103 pentru a desena un cerc","finishCircle":"Apas\u0103 pentru a finisa un cerc","placeCircleMarker":"Adaug\u0103 un punct"},"actions":{"finish":"Termin\u0103","cancel":"Anuleaz\u0103","removeLastVertex":"\u0218terge ultimul Vertex"},"buttonTitles":{"drawMarkerButton":"Adaug\u0103 o bulin\u0103","drawPolyButton":"Deseneaz\u0103 un poligon","drawLineButton":"Deseneaz\u0103 o linie","drawCircleButton":"Deseneaz\u0103 un cerc","drawRectButton":"Deseneaz\u0103 un dreptunghi","editButton":"Editeaz\u0103 straturile","dragButton":"Mut\u0103 straturile","cutButton":"Taie straturile","deleteButton":"\u0218terge straturile","drawCircleMarkerButton":"Deseneaz\u0103 marcatorul cercului","snappingButton":"Fixa\u021Bi marcatorul glisat pe alte straturi \u0219i v\xE2rfuri","pinningButton":"Fixa\u021Bi v\xE2rfurile partajate \xEEmpreun\u0103"}}'),v=JSON.parse('{"tooltips":{"placeMarker":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043C\u0430\u0440\u043A\u0435\u0440","firstVertex":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043F\u0435\u0440\u0432\u044B\u0439 \u043E\u0431\u044A\u0435\u043A\u0442","continueLine":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u043F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C \u0440\u0438\u0441\u043E\u0432\u0430\u043D\u0438\u0435","finishLine":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435 \u043B\u044E\u0431\u043E\u0439 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044E\u0449\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440 \u0434\u043B\u044F \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0438\u044F","finishPoly":"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043F\u0435\u0440\u0432\u0443\u044E \u0442\u043E\u0447\u043A\u0443, \u0447\u0442\u043E\u0431\u044B \u0437\u0430\u043A\u043E\u043D\u0447\u0438\u0442\u044C","finishRect":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0437\u0430\u043A\u043E\u043D\u0447\u0438\u0442\u044C","startCircle":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0434\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0446\u0435\u043D\u0442\u0440 \u043A\u0440\u0443\u0433\u0430","finishCircle":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0437\u0430\u0434\u0430\u0442\u044C \u0440\u0430\u0434\u0438\u0443\u0441","placeCircleMarker":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043A\u0440\u0443\u0433\u043E\u0432\u043E\u0439 \u043C\u0430\u0440\u043A\u0435\u0440"},"actions":{"finish":"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044C","cancel":"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C","removeLastVertex":"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C \u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0435\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435"},"buttonTitles":{"drawMarkerButton":"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043C\u0430\u0440\u043A\u0435\u0440","drawPolyButton":"\u0420\u0438\u0441\u043E\u0432\u0430\u0442\u044C \u043F\u043E\u043B\u0438\u0433\u043E\u043D","drawLineButton":"\u0420\u0438\u0441\u043E\u0432\u0430\u0442\u044C \u043A\u0440\u0438\u0432\u0443\u044E","drawCircleButton":"\u0420\u0438\u0441\u043E\u0432\u0430\u0442\u044C \u043A\u0440\u0443\u0433","drawRectButton":"\u0420\u0438\u0441\u043E\u0432\u0430\u0442\u044C \u043F\u0440\u044F\u043C\u043E\u0443\u0433\u043E\u043B\u044C\u043D\u0438\u043A","editButton":"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0441\u043B\u043E\u0439","dragButton":"\u041F\u0435\u0440\u0435\u043D\u0435\u0441\u0442\u0438 \u0441\u043B\u043E\u0439","cutButton":"\u0412\u044B\u0440\u0435\u0437\u0430\u0442\u044C \u0441\u043B\u043E\u0439","deleteButton":"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0441\u043B\u043E\u0439","drawCircleMarkerButton":"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043A\u0440\u0443\u0433\u043E\u0432\u043E\u0439 \u043C\u0430\u0440\u043A\u0435\u0440","snappingButton":"\u041F\u0440\u0438\u0432\u044F\u0437\u0430\u0442\u044C \u043F\u0435\u0440\u0435\u0442\u0430\u0441\u043A\u0438\u0432\u0430\u0435\u043C\u044B\u0439 \u043C\u0430\u0440\u043A\u0435\u0440 \u043A \u0434\u0440\u0443\u0433\u0438\u043C \u0441\u043B\u043E\u044F\u043C \u0438 \u0432\u0435\u0440\u0448\u0438\u043D\u0430\u043C","pinningButton":"\u0421\u0432\u044F\u0437\u0430\u0442\u044C \u043E\u0431\u0449\u0438\u0435 \u0442\u043E\u0447\u043A\u0438 \u0432\u043C\u0435\u0441\u0442\u0435"}}'),p=JSON.parse('{"tooltips":{"placeMarker":"Presiona para colocar un marcador","firstVertex":"Presiona para colocar el primer v\xE9rtice","continueLine":"Presiona para continuar dibujando","finishLine":"Presiona cualquier marcador existente para finalizar","finishPoly":"Presiona el primer marcador para finalizar","finishRect":"Presiona para finalizar","startCircle":"Presiona para colocar el centro del c\xEDrculo","finishCircle":"Presiona para finalizar el c\xEDrculo","placeCircleMarker":"Presiona para colocar un marcador de c\xEDrculo"},"actions":{"finish":"Finalizar","cancel":"Cancelar","removeLastVertex":"Eliminar \xFAltimo v\xE9rtice"},"buttonTitles":{"drawMarkerButton":"Dibujar Marcador","drawPolyButton":"Dibujar Pol\xEDgono","drawLineButton":"Dibujar L\xEDnea","drawCircleButton":"Dibujar C\xEDrculo","drawRectButton":"Dibujar Rect\xE1ngulo","editButton":"Editar Capas","dragButton":"Arrastrar Capas","cutButton":"Cortar Capas","deleteButton":"Eliminar Capas","drawCircleMarkerButton":"Dibujar Marcador de C\xEDrculo","snappingButton":"El marcador de Snap arrastrado a otras capas y v\xE9rtices","pinningButton":"Fijar juntos los v\xE9rtices compartidos"}}'),_=JSON.parse('{"tooltips":{"placeMarker":"Klik om een marker te plaatsen","firstVertex":"Klik om het eerste punt te plaatsen","continueLine":"Klik om te blijven tekenen","finishLine":"Klik op een bestaand punt om te be\xEBindigen","finishPoly":"Klik op het eerst punt om te be\xEBindigen","finishRect":"Klik om te be\xEBindigen","startCircle":"Klik om het middelpunt te plaatsen","finishCircle":"Klik om de cirkel te be\xEBindigen","placeCircleMarker":"Klik om een marker te plaatsen"},"actions":{"finish":"Bewaar","cancel":"Annuleer","removeLastVertex":"Verwijder laatste punt"},"buttonTitles":{"drawMarkerButton":"Plaats Marker","drawPolyButton":"Teken een vlak","drawLineButton":"Teken een lijn","drawCircleButton":"Teken een cirkel","drawRectButton":"Teken een vierkant","editButton":"Bewerk","dragButton":"Verplaats","cutButton":"Knip","deleteButton":"Verwijder","drawCircleMarkerButton":"Plaats Marker","snappingButton":"Snap gesleepte marker naar andere lagen en hoekpunten","pinningButton":"Speld gedeelde hoekpunten samen"}}'),y=JSON.parse(`{"tooltips":{"placeMarker":"Cliquez pour placer un marqueur","firstVertex":"Cliquez pour placer le premier sommet","continueLine":"Cliquez pour continuer \xE0 dessiner","finishLine":"Cliquez sur n'importe quel marqueur pour terminer","finishPoly":"Cliquez sur le premier marqueur pour terminer","finishRect":"Cliquez pour terminer","startCircle":"Cliquez pour placer le centre du cercle","finishCircle":"Cliquez pour finir le cercle","placeCircleMarker":"Cliquez pour placer le marqueur circulaire"},"actions":{"finish":"Terminer","cancel":"Annuler","removeLastVertex":"Retirer le dernier sommet"},"buttonTitles":{"drawMarkerButton":"Placer des marqueurs","drawPolyButton":"Dessiner des polygones","drawLineButton":"Dessiner des polylignes","drawCircleButton":"Dessiner un cercle","drawRectButton":"Dessiner un rectangle","editButton":"\xC9diter des calques","dragButton":"D\xE9placer des calques","cutButton":"Couper des calques","deleteButton":"Supprimer des calques","drawCircleMarkerButton":"Dessiner un marqueur circulaire","snappingButton":"Glisser le marqueur vers d'autres couches et sommets","pinningButton":"\xC9pingler ensemble les sommets partag\xE9s","rotateButton":"Tourner des calques"}}`),x=JSON.parse('{"tooltips":{"placeMarker":"\u5355\u51FB\u653E\u7F6E\u6807\u8BB0","firstVertex":"\u5355\u51FB\u653E\u7F6E\u9996\u4E2A\u9876\u70B9","continueLine":"\u5355\u51FB\u7EE7\u7EED\u7ED8\u5236","finishLine":"\u5355\u51FB\u4EFB\u4F55\u5B58\u5728\u7684\u6807\u8BB0\u4EE5\u5B8C\u6210","finishPoly":"\u5355\u51FB\u7B2C\u4E00\u4E2A\u6807\u8BB0\u4EE5\u5B8C\u6210","finishRect":"\u5355\u51FB\u5B8C\u6210","startCircle":"\u5355\u51FB\u653E\u7F6E\u5706\u5FC3","finishCircle":"\u5355\u51FB\u5B8C\u6210\u5706\u5F62","placeCircleMarker":"\u70B9\u51FB\u653E\u7F6E\u5706\u5F62\u6807\u8BB0"},"actions":{"finish":"\u5B8C\u6210","cancel":"\u53D6\u6D88","removeLastVertex":"\u79FB\u9664\u6700\u540E\u7684\u9876\u70B9"},"buttonTitles":{"drawMarkerButton":"\u7ED8\u5236\u6807\u8BB0","drawPolyButton":"\u7ED8\u5236\u591A\u8FB9\u5F62","drawLineButton":"\u7ED8\u5236\u7EBF\u6BB5","drawCircleButton":"\u7ED8\u5236\u5706\u5F62","drawRectButton":"\u7ED8\u5236\u957F\u65B9\u5F62","editButton":"\u7F16\u8F91\u56FE\u5C42","dragButton":"\u62D6\u62FD\u56FE\u5C42","cutButton":"\u526A\u5207\u56FE\u5C42","deleteButton":"\u5220\u9664\u56FE\u5C42","drawCircleMarkerButton":"\u753B\u5706\u5708\u6807\u8BB0","snappingButton":"\u5C06\u62D6\u52A8\u7684\u6807\u8BB0\u6355\u6349\u5230\u5176\u4ED6\u56FE\u5C42\u548C\u9876\u70B9","pinningButton":"\u5C06\u5171\u4EAB\u9876\u70B9\u56FA\u5B9A\u5728\u4E00\u8D77"}}'),S=JSON.parse('{"tooltips":{"placeMarker":"\u55AE\u64CA\u653E\u7F6E\u6A19\u8A18","firstVertex":"\u55AE\u64CA\u653E\u7F6E\u7B2C\u4E00\u500B\u9802\u9EDE","continueLine":"\u55AE\u64CA\u7E7C\u7E8C\u7E6A\u88FD","finishLine":"\u55AE\u64CA\u4EFB\u4F55\u5B58\u5728\u7684\u6A19\u8A18\u4EE5\u5B8C\u6210","finishPoly":"\u55AE\u64CA\u7B2C\u4E00\u500B\u6A19\u8A18\u4EE5\u5B8C\u6210","finishRect":"\u55AE\u64CA\u5B8C\u6210","startCircle":"\u55AE\u64CA\u653E\u7F6E\u5713\u5FC3","finishCircle":"\u55AE\u64CA\u5B8C\u6210\u5713\u5F62","placeCircleMarker":"\u9EDE\u64CA\u653E\u7F6E\u5713\u5F62\u6A19\u8A18"},"actions":{"finish":"\u5B8C\u6210","cancel":"\u53D6\u6D88","removeLastVertex":"\u79FB\u9664\u6700\u5F8C\u4E00\u500B\u9802\u9EDE"},"buttonTitles":{"drawMarkerButton":"\u653E\u7F6E\u6A19\u8A18","drawPolyButton":"\u7E6A\u88FD\u591A\u908A\u5F62","drawLineButton":"\u7E6A\u88FD\u7DDA\u6BB5","drawCircleButton":"\u7E6A\u88FD\u5713\u5F62","drawRectButton":"\u7E6A\u88FD\u65B9\u5F62","editButton":"\u7DE8\u8F2F\u5716\u5F62","dragButton":"\u79FB\u52D5\u5716\u5F62","cutButton":"\u88C1\u5207\u5716\u5F62","deleteButton":"\u522A\u9664\u5716\u5F62","drawCircleMarkerButton":"\u756B\u5713\u5708\u6A19\u8A18","snappingButton":"\u5C07\u62D6\u52D5\u7684\u6A19\u8A18\u5C0D\u9F4A\u5230\u5176\u4ED6\u5716\u5C64\u548C\u9802\u9EDE","pinningButton":"\u5C07\u5171\u4EAB\u9802\u9EDE\u56FA\u5B9A\u5728\u4E00\u8D77"}}'),O={en:u,de:f,it:c,id:d,ro:m,ru:v,es:p,nl:_,fr:y,pt_br:JSON.parse('{"tooltips":{"placeMarker":"Clique para posicionar o marcador","firstVertex":"Clique para posicionar o primeiro v\xE9rtice","continueLine":"Clique para continuar desenhando","finishLine":"Clique em qualquer marcador existente para finalizar","finishPoly":"Clique no primeiro ponto para fechar o pol\xEDgono","finishRect":"Clique para finalizar","startCircle":"Clique para posicionar o centro do c\xEDrculo","finishCircle":"Clique para fechar o c\xEDrculo","placeCircleMarker":"Clique para posicionar o marcador circular"},"actions":{"finish":"Finalizar","cancel":"Cancelar","removeLastVertex":"Remover \xFAltimo v\xE9rtice"},"buttonTitles":{"drawMarkerButton":"Desenhar um marcador","drawPolyButton":"Desenhar um pol\xEDgono","drawLineButton":"Desenhar uma polilinha","drawCircleButton":"Desenhar um c\xEDrculo","drawRectButton":"Desenhar um ret\xE2ngulo","editButton":"Editar camada(s)","dragButton":"Mover camada(s)","cutButton":"Recortar camada(s)","deleteButton":"Remover camada(s)","drawCircleMarkerButton":"Marcador de c\xEDrculos de desenho","snappingButton":"Marcador arrastado para outras camadas e v\xE9rtices","pinningButton":"V\xE9rtices compartilhados de pinos juntos"}}'),zh:x,zh_tw:S,pl:JSON.parse('{"tooltips":{"placeMarker":"Kliknij, aby ustawi\u0107 znacznik","firstVertex":"Kliknij, aby ustawi\u0107 pierwszy punkt","continueLine":"Kliknij, aby kontynuowa\u0107 rysowanie","finishLine":"Kliknij dowolny punkt, aby zako\u0144czy\u0107","finishPoly":"Kliknij pierwszy punkt, aby zako\u0144czy\u0107","finishRect":"Kliknij, aby zako\u0144czy\u0107","startCircle":"Kliknij, aby ustawi\u0107 \u015Brodek ko\u0142a","finishCircle":"Kliknij, aby zako\u0144czy\u0107 rysowanie ko\u0142a","placeCircleMarker":"Kliknij, aby ustawi\u0107 okr\u0105g\u0142y znacznik"},"actions":{"finish":"Zako\u0144cz","cancel":"Anuluj","removeLastVertex":"Usu\u0144 ostatni punkt"},"buttonTitles":{"drawMarkerButton":"Narysuj znacznik","drawPolyButton":"Narysuj wielok\u0105t","drawLineButton":"Narysuj \u015Bcie\u017Ck\u0119","drawCircleButton":"Narysuj ko\u0142o","drawRectButton":"Narysuj prostok\u0105t","editButton":"Edytuj","dragButton":"Przesu\u0144","cutButton":"Wytnij","deleteButton":"Usu\u0144","drawCircleMarkerButton":"Narysuj okr\u0105g\u0142y znacznik","snappingButton":"Snap przeci\u0105gni\u0119ty marker na inne warstwy i wierzcho\u0142ki","pinningButton":"Sworze\u0144 wsp\xF3lne wierzcho\u0142ki razem"}}'),sv:JSON.parse('{"tooltips":{"placeMarker":"Klicka f\xF6r att placera mark\xF6r","firstVertex":"Klicka f\xF6r att placera f\xF6rsta h\xF6rnet","continueLine":"Klicka f\xF6r att forts\xE4tta rita","finishLine":"Klicka p\xE5 en existerande punkt f\xF6r att slutf\xF6ra","finishPoly":"Klicka p\xE5 den f\xF6rsta punkten f\xF6r att slutf\xF6ra","finishRect":"Klicka f\xF6r att slutf\xF6ra","startCircle":"Klicka f\xF6r att placera cirkelns centrum","finishCircle":"Klicka f\xF6r att slutf\xF6ra cirkeln","placeCircleMarker":"Klicka f\xF6r att placera cirkelmark\xF6r"},"actions":{"finish":"Slutf\xF6r","cancel":"Avbryt","removeLastVertex":"Ta bort sista h\xF6rnet"},"buttonTitles":{"drawMarkerButton":"Rita Mark\xF6r","drawPolyButton":"Rita Polygoner","drawLineButton":"Rita Linje","drawCircleButton":"Rita Cirkel","drawRectButton":"Rita Rektangel","editButton":"Redigera Lager","dragButton":"Dra Lager","cutButton":"Klipp i Lager","deleteButton":"Ta bort Lager","drawCircleMarkerButton":"Rita Cirkelmark\xF6r","snappingButton":"Sn\xE4pp dra mark\xF6ren till andra lager och h\xF6rn","pinningButton":"F\xE4st delade h\xF6rn tillsammans"}}'),el:JSON.parse('{"tooltips":{"placeMarker":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03BF\u03C0\u03BF\u03B8\u03B5\u03C4\u03AE\u03C3\u03B5\u03C4\u03B5 \u0394\u03B5\u03AF\u03BA\u03C4\u03B7","firstVertex":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03BF\u03C0\u03BF\u03B8\u03B5\u03C4\u03AE\u03C3\u03B5\u03C4\u03B5 \u03C4\u03BF \u03C0\u03C1\u03CE\u03C4\u03BF \u03C3\u03B7\u03BC\u03B5\u03AF\u03BF","continueLine":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C3\u03C5\u03BD\u03B5\u03C7\u03AF\u03C3\u03B5\u03C4\u03B5 \u03BD\u03B1 \u03C3\u03C7\u03B5\u03B4\u03B9\u03AC\u03B6\u03B5\u03C4\u03B5","finishLine":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03C3\u03B5 \u03BF\u03C0\u03BF\u03B9\u03BF\u03BD\u03B4\u03AE\u03C0\u03BF\u03C4\u03B5 \u03C5\u03C0\u03AC\u03C1\u03C7\u03BF\u03BD \u03C3\u03B7\u03BC\u03B5\u03AF\u03BF \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03BF\u03BB\u03BF\u03BA\u03BB\u03B7\u03C1\u03C9\u03B8\u03B5\u03AF","finishPoly":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03C3\u03C4\u03BF \u03C0\u03C1\u03CE\u03C4\u03BF \u03C3\u03B7\u03BC\u03B5\u03AF\u03BF \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03B5\u03BB\u03B5\u03B9\u03CE\u03C3\u03B5\u03C4\u03B5","finishRect":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03B5\u03BB\u03B5\u03B9\u03CE\u03C3\u03B5\u03C4\u03B5","startCircle":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03BF\u03C0\u03BF\u03B8\u03B5\u03C4\u03AE\u03C3\u03B5\u03C4\u03B5 \u03BA\u03AD\u03BD\u03C4\u03C1\u03BF \u039A\u03CD\u03BA\u03BB\u03BF\u03C5","finishCircle":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03BF\u03BB\u03BF\u03BA\u03BB\u03B7\u03C1\u03CE\u03C3\u03B5\u03C4\u03B5 \u03C4\u03BF\u03BD \u039A\u03CD\u03BA\u03BB\u03BF","placeCircleMarker":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03BF\u03C0\u03BF\u03B8\u03B5\u03C4\u03AE\u03C3\u03B5\u03C4\u03B5 \u039A\u03C5\u03BA\u03BB\u03B9\u03BA\u03CC \u0394\u03B5\u03AF\u03BA\u03C4\u03B7"},"actions":{"finish":"\u03A4\u03AD\u03BB\u03BF\u03C2","cancel":"\u0391\u03BA\u03CD\u03C1\u03C9\u03C3\u03B7","removeLastVertex":"\u039A\u03B1\u03C4\u03AC\u03C1\u03B3\u03B7\u03C3\u03B7 \u03C4\u03B5\u03BB\u03B5\u03C5\u03C4\u03B1\u03AF\u03BF\u03C5 \u03C3\u03B7\u03BC\u03B5\u03AF\u03BF\u03C5"},"buttonTitles":{"drawMarkerButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u0394\u03B5\u03AF\u03BA\u03C4\u03B7","drawPolyButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u03A0\u03BF\u03BB\u03C5\u03B3\u03CE\u03BD\u03BF\u03C5","drawLineButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u0393\u03C1\u03B1\u03BC\u03BC\u03AE\u03C2","drawCircleButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u039A\u03CD\u03BA\u03BB\u03BF\u03C5","drawRectButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u039F\u03C1\u03B8\u03BF\u03B3\u03C9\u03BD\u03AF\u03BF\u03C5","editButton":"\u0395\u03C0\u03B5\u03BE\u03B5\u03C1\u03B3\u03B1\u03C3\u03AF\u03B1 \u0395\u03C0\u03B9\u03C0\u03AD\u03B4\u03C9\u03BD","dragButton":"\u039C\u03B5\u03C4\u03B1\u03C6\u03BF\u03C1\u03AC \u0395\u03C0\u03B9\u03C0\u03AD\u03B4\u03C9\u03BD","cutButton":"\u0391\u03C0\u03BF\u03BA\u03BF\u03C0\u03AE \u0395\u03C0\u03B9\u03C0\u03AD\u03B4\u03C9\u03BD","deleteButton":"\u039A\u03B1\u03C4\u03AC\u03C1\u03B3\u03B7\u03C3\u03B7 \u0395\u03C0\u03B9\u03C0\u03AD\u03B4\u03C9\u03BD","drawCircleMarkerButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u039A\u03C5\u03BA\u03BB\u03B9\u03BA\u03BF\u03CD \u0394\u03B5\u03AF\u03BA\u03C4\u03B7","snappingButton":"\u03A0\u03C1\u03BF\u03C3\u03BA\u03CC\u03BB\u03BB\u03B7\u03C3\u03B7 \u03C4\u03BF\u03C5 \u0394\u03B5\u03AF\u03BA\u03C4\u03B7 \u03BC\u03B5\u03C4\u03B1\u03C6\u03BF\u03C1\u03AC\u03C2 \u03C3\u03B5 \u03AC\u03BB\u03BB\u03B1 \u0395\u03C0\u03AF\u03C0\u03B5\u03B4\u03B1 \u03BA\u03B1\u03B9 \u039A\u03BF\u03C1\u03C5\u03C6\u03AD\u03C2","pinningButton":"\u03A0\u03B5\u03C1\u03B9\u03BA\u03BF\u03C0\u03AE \u03BA\u03BF\u03B9\u03BD\u03CE\u03BD \u03BA\u03BF\u03C1\u03C5\u03C6\u03CE\u03BD \u03BC\u03B1\u03B6\u03AF"}}'),hu:JSON.parse('{"tooltips":{"placeMarker":"Kattintson a jel\xF6l\u0151 elhelyez\xE9s\xE9hez","firstVertex":"Kattintson az els\u0151 pont elhelyez\xE9s\xE9hez","continueLine":"Kattintson a k\xF6vetkez\u0151 pont elhelyez\xE9s\xE9hez","finishLine":"A befejez\xE9shez kattintson egy megl\xE9v\u0151 pontra","finishPoly":"A befejez\xE9shez kattintson az els\u0151 pontra","finishRect":"Kattintson a befejez\xE9shez","startCircle":"Kattintson a k\xF6r k\xF6z\xE9ppontj\xE1nak elhelyez\xE9s\xE9hez","finishCircle":"Kattintson a k\xF6r befejez\xE9s\xE9hez","placeCircleMarker":"Kattintson a k\xF6rjel\xF6l\u0151 elhelyez\xE9s\xE9hez"},"actions":{"finish":"Befejez\xE9s","cancel":"M\xE9gse","removeLastVertex":"Utols\xF3 pont elt\xE1vol\xEDt\xE1sa"},"buttonTitles":{"drawMarkerButton":"Jel\xF6l\u0151 rajzol\xE1sa","drawPolyButton":"Poligon rajzol\xE1sa","drawLineButton":"Vonal rajzol\xE1sa","drawCircleButton":"K\xF6r rajzol\xE1sa","drawRectButton":"N\xE9gyzet rajzol\xE1sa","editButton":"Elemek szerkeszt\xE9se","dragButton":"Elemek mozgat\xE1sa","cutButton":"Elemek v\xE1g\xE1sa","deleteButton":"Elemek t\xF6rl\xE9se","drawCircleMarkerButton":"K\xF6r jel\xF6l\u0151 rajzol\xE1sa","snappingButton":"Kapcsolja a jel\xF6lt\u0151t m\xE1sik elemhez vagy ponthoz","pinningButton":"K\xF6z\xF6s pontok \xF6sszek\xF6t\xE9se"}}'),da:JSON.parse('{"tooltips":{"placeMarker":"Tryk for at placere en mark\xF8r","firstVertex":"Tryk for at placere det f\xF8rste punkt","continueLine":"Tryk for at forts\xE6tte linjen","finishLine":"Tryk p\xE5 et eksisterende punkt for at afslutte","finishPoly":"Tryk p\xE5 det f\xF8rste punkt for at afslutte","finishRect":"Tryk for at afslutte","startCircle":"Tryk for at placere cirklens center","finishCircle":"Tryk for at afslutte cirklen","placeCircleMarker":"Tryk for at placere en cirkelmark\xF8r"},"actions":{"finish":"Afslut","cancel":"Afbryd","removeLastVertex":"Fjern sidste punkt"},"buttonTitles":{"drawMarkerButton":"Placer mark\xF8r","drawPolyButton":"Tegn polygon","drawLineButton":"Tegn linje","drawCircleButton":"Tegn cirkel","drawRectButton":"Tegn firkant","editButton":"Rediger","dragButton":"Tr\xE6k","cutButton":"Klip","deleteButton":"Fjern","drawCircleMarkerButton":"Tegn cirkelmark\xF8r","snappingButton":"Fastg\xF8r trukket mark\xF8r til andre elementer","pinningButton":"Sammenl\xE6g delte elementer"}}'),no:JSON.parse('{"tooltips":{"placeMarker":"Klikk for \xE5 plassere punkt","firstVertex":"Klikk for \xE5 plassere f\xF8rste punkt","continueLine":"Klikk for \xE5 tegne videre","finishLine":"Klikk p\xE5 et eksisterende punkt for \xE5 fullf\xF8re","finishPoly":"Klikk f\xF8rste punkt for \xE5 fullf\xF8re","finishRect":"Klikk for \xE5 fullf\xF8re","startCircle":"Klikk for \xE5 sette sirkel midtpunkt","finishCircle":"Klikk for \xE5 fullf\xF8re sirkel","placeCircleMarker":"Klikk for \xE5 plassere sirkel"},"actions":{"finish":"Fullf\xF8r","cancel":"Kanseller","removeLastVertex":"Fjern forrige punkt"},"buttonTitles":{"drawMarkerButton":"Tegn Punkt","drawPolyButton":"Tegn Flate","drawLineButton":"Tegn Linje","drawCircleButton":"Tegn Sirkel","drawRectButton":"Tegn rektangel","editButton":"Rediger Objekter","dragButton":"Dra Objekter","cutButton":"Kutt Objekter","deleteButton":"Fjern Objekter","drawCircleMarkerButton":"Tegn sirkel-punkt","snappingButton":"Fest dratt punkt til andre objekter og punkt","pinningButton":"Pin delte punkt sammen"}}'),fa:JSON.parse('{"tooltips":{"placeMarker":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u062C\u0627\u0646\u0645\u0627\u06CC\u06CC \u0646\u0634\u0627\u0646","firstVertex":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0631\u0633\u0645 \u0627\u0648\u0644\u06CC\u0646 \u0631\u0623\u0633","continueLine":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0627\u062F\u0627\u0645\u0647 \u0631\u0633\u0645","finishLine":"\u06A9\u0644\u06CC\u06A9 \u0631\u0648\u06CC \u0647\u0631 \u0646\u0634\u0627\u0646 \u0645\u0648\u062C\u0648\u062F \u0628\u0631\u0627\u06CC \u067E\u0627\u06CC\u0627\u0646","finishPoly":"\u06A9\u0644\u06CC\u06A9 \u0631\u0648\u06CC \u0627\u0648\u0644\u06CC\u0646 \u0646\u0634\u0627\u0646 \u0628\u0631\u0627\u06CC \u067E\u0627\u06CC\u0627\u0646","finishRect":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u067E\u0627\u06CC\u0627\u0646","startCircle":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0631\u0633\u0645 \u0645\u0631\u06A9\u0632 \u062F\u0627\u06CC\u0631\u0647","finishCircle":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u067E\u0627\u06CC\u0627\u0646 \u0631\u0633\u0645 \u062F\u0627\u06CC\u0631\u0647","placeCircleMarker":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0631\u0633\u0645 \u0646\u0634\u0627\u0646 \u062F\u0627\u06CC\u0631\u0647","placeText":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0646\u0648\u0634\u062A\u0646 \u0645\u062A\u0646"},"actions":{"finish":"\u067E\u0627\u06CC\u0627\u0646","cancel":"\u0644\u0641\u0648","removeLastVertex":"\u062D\u0630\u0641 \u0622\u062E\u0631\u06CC\u0646 \u0631\u0623\u0633"},"buttonTitles":{"drawMarkerButton":"\u062F\u0631\u062C \u0646\u0634\u0627\u0646","drawPolyButton":"\u0631\u0633\u0645 \u0686\u0646\u062F\u0636\u0644\u0639\u06CC","drawLineButton":"\u0631\u0633\u0645 \u062E\u0637","drawCircleButton":"\u0631\u0633\u0645 \u062F\u0627\u06CC\u0631\u0647","drawRectButton":"\u0631\u0633\u0645 \u0686\u0647\u0627\u0631\u0636\u0644\u0639\u06CC","editButton":"\u0648\u06CC\u0631\u0627\u06CC\u0634 \u0644\u0627\u06CC\u0647\u200C\u0647\u0627","dragButton":"\u062C\u0627\u0628\u062C\u0627\u06CC\u06CC \u0644\u0627\u06CC\u0647\u200C\u0647\u0627","cutButton":"\u0628\u0631\u0634 \u0644\u0627\u06CC\u0647\u200C\u0647\u0627","deleteButton":"\u062D\u0630\u0641 \u0644\u0627\u06CC\u0647\u200C\u0647\u0627","drawCircleMarkerButton":"\u0631\u0633\u0645 \u0646\u0634\u0627\u0646 \u062F\u0627\u06CC\u0631\u0647","snappingButton":"\u0646\u0634\u0627\u0646\u06AF\u0631 \u0631\u0627 \u0628\u0647 \u0644\u0627\u06CC\u0647\u200C\u0647\u0627 \u0648 \u0631\u0626\u0648\u0633 \u062F\u06CC\u06AF\u0631 \u0628\u06A9\u0634\u06CC\u062F","pinningButton":"\u0631\u0626\u0648\u0633 \u0645\u0634\u062A\u0631\u06A9 \u0631\u0627 \u0628\u0627 \u0647\u0645 \u067E\u06CC\u0646 \u06A9\u0646\u06CC\u062F","rotateButton":"\u0686\u0631\u062E\u0634 \u0644\u0627\u06CC\u0647","drawTextButton":"\u0631\u0633\u0645 \u0645\u062A\u0646"}}'),ua:JSON.parse(`{"tooltips":{"placeMarker":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043C\u0430\u0440\u043A\u0435\u0440","firstVertex":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043F\u0435\u0440\u0448\u0443 \u0432\u0435\u0440\u0448\u0438\u043D\u0443","continueLine":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u043F\u0440\u043E\u0434\u043E\u0432\u0436\u0438\u0442\u0438 \u043C\u0430\u043B\u044E\u0432\u0430\u0442\u0438","finishLine":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C \u0431\u0443\u0434\u044C-\u044F\u043A\u0438\u0439 \u0456\u0441\u043D\u0443\u044E\u0447\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440 \u0434\u043B\u044F \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u043D\u044F","finishPoly":"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044C \u043F\u0435\u0440\u0448\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440, \u0449\u043E\u0431 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438","finishRect":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438","startCircle":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u0434\u043E\u0434\u0430\u0442\u0438 \u0446\u0435\u043D\u0442\u0440 \u043A\u043E\u043B\u0430","finishCircle":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438 \u043A\u043E\u043B\u043E","placeCircleMarker":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043A\u0440\u0443\u0433\u043E\u0432\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440"},"actions":{"finish":"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438","cancel":"\u0412\u0456\u0434\u043C\u0456\u043D\u0438\u0442\u0438","removeLastVertex":"\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438 \u043F\u043E\u043F\u0435\u0440\u0435\u0434\u043D\u044E \u0432\u0435\u0440\u0448\u0438\u043D\u0443"},"buttonTitles":{"drawMarkerButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043C\u0430\u0440\u043A\u0435\u0440","drawPolyButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043F\u043E\u043B\u0456\u0433\u043E\u043D","drawLineButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043A\u0440\u0438\u0432\u0443","drawCircleButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043A\u043E\u043B\u043E","drawRectButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043F\u0440\u044F\u043C\u043E\u043A\u0443\u0442\u043D\u0438\u043A","editButton":"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u0448\u0430\u0440\u0438","dragButton":"\u041F\u0435\u0440\u0435\u043D\u0435\u0441\u0442\u0438 \u0448\u0430\u0440\u0438","cutButton":"\u0412\u0438\u0440\u0456\u0437\u0430\u0442\u0438 \u0448\u0430\u0440\u0438","deleteButton":"\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438 \u0448\u0430\u0440\u0438","drawCircleMarkerButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043A\u0440\u0443\u0433\u043E\u0432\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440","snappingButton":"\u041F\u0440\u0438\u0432\u2019\u044F\u0437\u0430\u0442\u0438 \u043F\u0435\u0440\u0435\u0442\u044F\u0433\u043D\u0443\u0442\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440 \u0434\u043E \u0456\u043D\u0448\u0438\u0445 \u0448\u0430\u0440\u0456\u0432 \u0442\u0430 \u0432\u0435\u0440\u0448\u0438\u043D","pinningButton":"\u0417\u0432'\u044F\u0437\u0430\u0442\u0438 \u0441\u043F\u0456\u043B\u044C\u043D\u0456 \u0432\u0435\u0440\u0448\u0438\u043D\u0438 \u0440\u0430\u0437\u043E\u043C"}}`),tr:JSON.parse('{"tooltips":{"placeMarker":"\u0130\u015Faret\xE7i yerle\u015Ftirmek i\xE7in t\u0131klay\u0131n","firstVertex":"\u0130lk tepe noktas\u0131n\u0131 yerle\u015Ftirmek i\xE7in t\u0131klay\u0131n","continueLine":"\xC7izime devam etmek i\xE7in t\u0131klay\u0131n","finishLine":"Bitirmek i\xE7in mevcut herhangi bir i\u015Faret\xE7iyi t\u0131klay\u0131n","finishPoly":"Bitirmek i\xE7in ilk i\u015Faret\xE7iyi t\u0131klay\u0131n","finishRect":"Bitirmek i\xE7in t\u0131klay\u0131n","startCircle":"Daire merkezine yerle\u015Ftirmek i\xE7in t\u0131klay\u0131n","finishCircle":"Daireyi bitirmek i\xE7in t\u0131klay\u0131n","placeCircleMarker":"Daire i\u015Faret\xE7isi yerle\u015Ftirmek i\xE7in t\u0131klay\u0131n"},"actions":{"finish":"Bitir","cancel":"\u0130ptal","removeLastVertex":"Son k\xF6\u015Feyi kald\u0131r"},"buttonTitles":{"drawMarkerButton":"\xC7izim \u0130\u015Faret\xE7isi","drawPolyButton":"\xC7okgenler \xE7iz","drawLineButton":"\xC7oklu \xE7izgi \xE7iz","drawCircleButton":"\xC7ember \xE7iz","drawRectButton":"Dikd\xF6rtgen \xE7iz","editButton":"Katmanlar\u0131 d\xFCzenle","dragButton":"Katmanlar\u0131 s\xFCr\xFCkle","cutButton":"Katmanlar\u0131 kes","deleteButton":"Katmanlar\u0131 kald\u0131r","drawCircleMarkerButton":"Daire i\u015Faret\xE7isi \xE7iz","snappingButton":"S\xFCr\xFCklenen i\u015Faret\xE7iyi di\u011Fer katmanlara ve k\xF6\u015Felere yap\u0131\u015Ft\u0131r","pinningButton":"Payla\u015F\u0131lan k\xF6\u015Feleri birbirine sabitle"}}'),cz:JSON.parse('{"tooltips":{"placeMarker":"Kliknut\xEDm vytvo\u0159\xEDte zna\u010Dku","firstVertex":"Kliknut\xEDm vytvo\u0159\xEDte prvn\xED objekt","continueLine":"Kliknut\xEDm pokra\u010Dujte v kreslen\xED","finishLine":"Kliknut\xED na libovolnou existuj\xEDc\xED zna\u010Dku pro dokon\u010Den\xED","finishPoly":"Vyberte prvn\xED bod pro dokon\u010Den\xED","finishRect":"Klikn\u011Bte pro dokon\u010Den\xED","startCircle":"Kliknut\xEDm p\u0159idejte st\u0159ed kruhu","finishCircle":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0437\u0430\u0434\u0430\u0442\u044C \u0440\u0430\u0434\u0438\u0443\u0441","placeCircleMarker":"Kliknut\xEDm nastavte polom\u011Br"},"actions":{"finish":"Dokon\u010Dit","cancel":"Zru\u0161it","removeLastVertex":"Zru\u0161it posledn\xED akci"},"buttonTitles":{"drawMarkerButton":"P\u0159idat zna\u010Dku","drawPolyButton":"Nakreslit polygon","drawLineButton":"Nakreslit k\u0159ivku","drawCircleButton":"Nakreslit kruh","drawRectButton":"Nakreslit obd\xE9ln\xEDk","editButton":"Upravit vrstvu","dragButton":"P\u0159eneste vrstvu","cutButton":"Vyjmout vrstvu","deleteButton":"Smazat vrstvu","drawCircleMarkerButton":"P\u0159idat kruhovou zna\u010Dku","snappingButton":"Nav\xE1zat ta\u017Enou zna\u010Dku k dal\u0161\xEDm vrstv\xE1m a vrchol\u016Fm","pinningButton":"Spojit spole\u010Dn\xE9 body dohromady"}}'),ja:JSON.parse('{"tooltips":{"placeMarker":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u30DE\u30FC\u30AB\u30FC\u3092\u914D\u7F6E","firstVertex":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u6700\u521D\u306E\u9802\u70B9\u3092\u914D\u7F6E","continueLine":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u63CF\u753B\u3092\u7D9A\u3051\u308B","finishLine":"\u4EFB\u610F\u306E\u30DE\u30FC\u30AB\u30FC\u3092\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u7D42\u4E86","finishPoly":"\u6700\u521D\u306E\u30DE\u30FC\u30AB\u30FC\u3092\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u7D42\u4E86","finishRect":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u7D42\u4E86","startCircle":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u5186\u306E\u4E2D\u5FC3\u3092\u914D\u7F6E","finishCircle":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u5186\u306E\u63CF\u753B\u3092\u7D42\u4E86","placeCircleMarker":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u5186\u30DE\u30FC\u30AB\u30FC\u3092\u914D\u7F6E","placeText":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u30C6\u30AD\u30B9\u30C8\u3092\u914D\u7F6E"},"actions":{"finish":"\u7D42\u4E86","cancel":"\u30AD\u30E3\u30F3\u30BB\u30EB","removeLastVertex":"\u6700\u5F8C\u306E\u9802\u70B9\u3092\u524A\u9664"},"buttonTitles":{"drawMarkerButton":"\u30DE\u30FC\u30AB\u30FC\u3092\u63CF\u753B","drawPolyButton":"\u30DD\u30EA\u30B4\u30F3\u3092\u63CF\u753B","drawLineButton":"\u6298\u308C\u7DDA\u3092\u63CF\u753B","drawCircleButton":"\u5186\u3092\u63CF\u753B","drawRectButton":"\u77E9\u5F62\u3092\u63CF\u753B","editButton":"\u30EC\u30A4\u30E4\u30FC\u3092\u7DE8\u96C6","dragButton":"\u30EC\u30A4\u30E4\u30FC\u3092\u30C9\u30E9\u30C3\u30B0","cutButton":"\u30EC\u30A4\u30E4\u30FC\u3092\u5207\u308A\u53D6\u308A","deleteButton":"\u30EC\u30A4\u30E4\u30FC\u3092\u524A\u9664","drawCircleMarkerButton":"\u5186\u30DE\u30FC\u30AB\u30FC\u3092\u63CF\u753B","snappingButton":"\u30C9\u30E9\u30C3\u30B0\u3057\u305F\u30DE\u30FC\u30AB\u30FC\u3092\u4ED6\u306E\u30EC\u30A4\u30E4\u30FC\u3084\u9802\u70B9\u306B\u30B9\u30CA\u30C3\u30D7\u3059\u308B","pinningButton":"\u5171\u6709\u3059\u308B\u9802\u70B9\u3092\u540C\u6642\u306B\u52D5\u304B\u3059","rotateButton":"\u30EC\u30A4\u30E4\u30FC\u3092\u56DE\u8EE2","drawTextButton":"\u30C6\u30AD\u30B9\u30C8\u3092\u63CF\u753B"}}'),fi:JSON.parse('{"tooltips":{"placeMarker":"Klikkaa asettaaksesi merkin","firstVertex":"Klikkaa asettaakseni ensimm\xE4isen osuuden","continueLine":"Klikkaa jatkaaksesi piirt\xE4mist\xE4","finishLine":"Klikkaa olemassa olevaa merkki\xE4 lopettaaksesi","finishPoly":"Klikkaa ensimm\xE4ist\xE4 merkki\xE4 lopettaaksesi","finishRect":"Klikkaa lopettaaksesi","startCircle":"Klikkaa asettaaksesi ympyr\xE4n keskipisteen","finishCircle":"Klikkaa lopettaaksesi ympyr\xE4n","placeCircleMarker":"Klikkaa asettaaksesi ympyr\xE4merkin","placeText":"Klikkaa asettaaksesi tekstin"},"actions":{"finish":"Valmis","cancel":"Peruuta","removeLastVertex":"Poista viimeinen osuus"},"buttonTitles":{"drawMarkerButton":"Piirr\xE4 merkkej\xE4","drawPolyButton":"Piirr\xE4 monikulmioita","drawLineButton":"Piirr\xE4 viivoja","drawCircleButton":"Piirr\xE4 ympyr\xE4","drawRectButton":"Piirr\xE4 neliskulmioita","editButton":"Muokkaa","dragButton":"Siirr\xE4","cutButton":"Leikkaa","deleteButton":"Poista","drawCircleMarkerButton":"Piirr\xE4 ympyr\xE4merkki","snappingButton":"Kiinnit\xE4 siirrett\xE4v\xE4 merkki toisiin muotoihin","pinningButton":"Kiinnit\xE4 jaetut muodot yhteen","rotateButton":"K\xE4\xE4nn\xE4","drawTextButton":"Piirr\xE4 teksti\xE4"}}'),ko:JSON.parse('{"tooltips":{"placeMarker":"\uB9C8\uCEE4 \uC704\uCE58\uB97C \uD074\uB9AD\uD558\uC138\uC694","firstVertex":"\uCCAB\uBC88\uC9F8 \uAF2D\uC9C0\uC810 \uC704\uCE58\uC744 \uD074\uB9AD\uD558\uC138\uC694","continueLine":"\uACC4\uC18D \uADF8\uB9AC\uB824\uBA74 \uD074\uB9AD\uD558\uC138\uC694","finishLine":"\uB05D\uB0B4\uB824\uBA74 \uAE30\uC874 \uB9C8\uCEE4\uB97C \uD074\uB9AD\uD558\uC138\uC694","finishPoly":"\uB05D\uB0B4\uB824\uBA74 \uCC98\uC74C \uB9C8\uCEE4\uB97C \uD074\uB9AD\uD558\uC138\uC694","finishRect":"\uB05D\uB0B4\uB824\uBA74 \uD074\uB9AD\uD558\uC138\uC694","startCircle":"\uC6D0\uC758 \uC911\uC2EC\uC774 \uB420 \uC704\uCE58\uB97C \uD074\uB9AD\uD558\uC138\uC694","finishCircle":"\uC6D0\uC744 \uB05D\uB0B4\uB824\uBA74 \uD074\uB9AD\uD558\uC138\uC694","placeCircleMarker":"\uC6D0 \uB9C8\uCEE4 \uC704\uCE58\uB97C \uD074\uB9AD\uD558\uC138\uC694","placeText":"\uD14D\uC2A4\uD2B8 \uC704\uCE58\uB97C \uD074\uB9AD\uD558\uC138\uC694"},"actions":{"finish":"\uB05D\uB0B4\uAE30","cancel":"\uCDE8\uC18C","removeLastVertex":"\uB9C8\uC9C0\uB9C9 \uAF2D\uC9C0\uC810 \uC81C\uAC70"},"buttonTitles":{"drawMarkerButton":"\uB9C8\uCEE4 \uADF8\uB9AC\uAE30","drawPolyButton":"\uB2E4\uAC01\uD615 \uADF8\uB9AC\uAE30","drawLineButton":"\uB2E4\uAC01\uC120 \uADF8\uB9AC\uAE30","drawCircleButton":"\uC6D0 \uADF8\uB9AC\uAE30","drawRectButton":"\uC9C1\uC0AC\uAC01\uD615 \uADF8\uB9AC\uAE30","editButton":"\uB808\uC774\uC5B4 \uD3B8\uC9D1\uD558\uAE30","dragButton":"\uB808\uC774\uC5B4 \uB04C\uAE30","cutButton":"\uB808\uC774\uC5B4 \uC790\uB974\uAE30","deleteButton":"\uB808\uC774\uC5B4 \uC81C\uAC70\uD558\uAE30","drawCircleMarkerButton":"\uC6D0 \uB9C8\uCEE4 \uADF8\uB9AC\uAE30","snappingButton":"\uC7A1\uC544\uB048 \uB9C8\uCEE4\uB97C \uB2E4\uB978 \uB808\uC774\uC5B4 \uBC0F \uAF2D\uC9C0\uC810\uC5D0 \uB4E4\uB7EC\uBD99\uAC8C \uD558\uAE30","pinningButton":"\uACF5\uC720 \uAF2D\uC9C0\uC810\uC744 \uD568\uAED8 \uCC0D\uAE30","rotateButton":"\uB808\uC774\uC5B4 \uD68C\uC804\uD558\uAE30","drawTextButton":"\uD14D\uC2A4\uD2B8 \uADF8\uB9AC\uAE30"}}')};function B(M,A){var j=Object.keys(M);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(M);A&&(nt=nt.filter(function(ht){return Object.getOwnPropertyDescriptor(M,ht).enumerable})),j.push.apply(j,nt)}return j}function U(M){for(var A=1;A<arguments.length;A++){var j=arguments[A]!=null?arguments[A]:{};A%2?B(Object(j),!0).forEach(function(nt){z(M,nt,j[nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(j)):B(Object(j)).forEach(function(nt){Object.defineProperty(M,nt,Object.getOwnPropertyDescriptor(j,nt))})}return M}function z(M,A,j){return A in M?Object.defineProperty(M,A,{value:j,enumerable:!0,configurable:!0,writable:!0}):M[A]=j,M}let q={_globalEditModeEnabled:!1,enableGlobalEditMode:function(M){var A=U({},M);this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(function(j){j.pm.enable(A)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayers={},this.map.on("layeradd",this._layerAdded,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode:function(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(function(M){M.pm.disable()}),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled:function(){return this.globalEditModeEnabled()},globalEditModeEnabled:function(){return this._globalEditModeEnabled},toggleGlobalEditMode:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.globalOptions;this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(M)},handleLayerAdditionInGlobalEditMode:function(){var M=this._addedLayers;for(var A in this._addedLayers={},M){var j=M[A];this._isRelevantForEdit(j)&&this.globalEditModeEnabled()&&j.pm.enable(U({},this.globalOptions))}},_layerAdded:function(M){var A=M.layer;this._addedLayers[L.stamp(A)]=A},_isRelevantForEdit:function(M){return M.pm&&!(M instanceof L.LayerGroup)&&(!L.PM.optIn&&!M.options.pmIgnore||L.PM.optIn&&M.options.pmIgnore===!1)&&!M._pmTempLayer&&M.pm.options.allowEditing}},G={_globalDragModeEnabled:!1,enableGlobalDragMode:function(){var M=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},M.forEach(function(A){A.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode:function(){var M=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,M.forEach(function(A){A.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled:function(){return!!this._globalDragModeEnabled},toggleGlobalDragMode:function(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode:function(){var M=this._addedLayersDrag;for(var A in this._addedLayersDrag={},M){var j=M[A];this._isRelevantForDrag(j)&&this.globalDragModeEnabled()&&j.pm.enableLayerDrag()}},_layerAddedDrag:function(M){var A=M.layer;this._addedLayersDrag[L.stamp(A)]=A},_isRelevantForDrag:function(M){return M.pm&&!(M instanceof L.LayerGroup)&&(!L.PM.optIn&&!M.options.pmIgnore||L.PM.optIn&&M.options.pmIgnore===!1)&&!M._pmTempLayer&&M.pm.options.draggable}},tt={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode:function(){var M=this;this._globalRemovalModeEnabled=!0,this.map.eachLayer(function(A){M._isRelevantForRemoval(A)&&(A.pm.disable(),A.on("click",M.removeLayer,M))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.reinitGlobalRemovalMode,100,this)),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode:function(){var M=this;this._globalRemovalModeEnabled=!1,this.map.eachLayer(function(A){A.off("click",M.removeLayer,M)}),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled:function(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled:function(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode:function(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},reinitGlobalRemovalMode:function(M){var A=M.layer;this._isRelevantForRemoval(A)&&this.globalRemovalModeEnabled()&&(this.disableGlobalRemovalMode(),this.enableGlobalRemovalMode())},removeLayer:function(M){var A=M.target;this._isRelevantForRemoval(A)&&!A.pm.dragging()&&(A.removeFrom(this.map.pm._getContainingLayer()),A.remove(),A instanceof L.LayerGroup?(this._fireRemoveLayerGroup(A),this._fireRemoveLayerGroup(this.map,A)):(A.pm._fireRemove(A),A.pm._fireRemove(this.map,A)))},_isRelevantForRemoval:function(M){return M.pm&&!(M instanceof L.LayerGroup)&&(!L.PM.optIn&&!M.options.pmIgnore||L.PM.optIn&&M.options.pmIgnore===!1)&&!M._pmTempLayer&&M.pm.options.allowRemoval}},K={_globalRotateModeEnabled:!1,enableGlobalRotateMode:function(){var M=this;this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(function(A){return A instanceof L.Polyline}).forEach(function(A){M._isRelevantForRotate(A)&&A.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this._reinitGlobalRotateMode,100,this)),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode:function(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(function(M){return M instanceof L.Polyline}).forEach(function(M){M.pm.disableRotate()}),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled:function(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode:function(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_reinitGlobalRotateMode:function(M){var A=M.layer;this._isRelevantForRotate(A)&&this.globalRotateModeEnabled()&&(this.disableGlobalRotateMode(),this.enableGlobalRotateMode())},_isRelevantForRotate:function(M){return M.pm&&!(M instanceof L.LayerGroup)&&(!L.PM.optIn&&!M.options.pmIgnore||L.PM.optIn&&M.options.pmIgnore===!1)&&!M._pmTempLayer&&M.pm.options.allowRotation}};function D(M,A){var j=Object.keys(M);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(M);A&&(nt=nt.filter(function(ht){return Object.getOwnPropertyDescriptor(M,ht).enumerable})),j.push.apply(j,nt)}return j}function N(M){for(var A=1;A<arguments.length;A++){var j=arguments[A]!=null?arguments[A]:{};A%2?D(Object(j),!0).forEach(function(nt){Z(M,nt,j[nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(j)):D(Object(j)).forEach(function(nt){Object.defineProperty(M,nt,Object.getOwnPropertyDescriptor(j,nt))})}return M}function Z(M,A,j){return A in M?Object.defineProperty(M,A,{value:j,enumerable:!0,configurable:!0,writable:!0}):M[A]=j,M}var w={_fireDrawStart:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Draw",A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},M,A)},_fireDrawEnd:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Draw",A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._map,"pm:drawend",{shape:this._shape},M,A)},_fireCreate:function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Draw",j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._map,"pm:create",{shape:this._shape,marker:M,layer:M},A,j)},_fireCenterPlaced:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Draw",A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},j=M==="Draw"?this._layer:void 0,nt=M!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:j,layer:nt,latlng:this._layer.getLatLng()},M,A)},_fireCut:function(M,A,j){var nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Draw",ht=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(M,"pm:cut",{shape:this._shape,layer:A,originalLayer:j},nt,ht)},_fireEdit:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._layer,A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(M,"pm:edit",{layer:this._layer,shape:this.getShape()},A,j)},_fireEnable:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},M,A)},_fireDisable:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},M,A)},_fireUpdate:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},M,A)},_fireMarkerDragStart:function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:M,shape:this.getShape(),indexPath:A},j,nt)},_fireMarkerDrag:function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:M,shape:this.getShape(),indexPath:A},j,nt)},_fireMarkerDragEnd:function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Edit",ht=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:M,shape:this.getShape(),indexPath:A,intersectionReset:j},nt,ht)},_fireDragStart:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},M,A)},_fireDrag:function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._layer,"pm:drag",N(N({},M),{},{shape:this.getShape()}),A,j)},_fireDragEnd:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},M,A)},_fireDragEnable:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},M,A)},_fireDragDisable:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},M,A)},_fireRemove:function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:M,j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(M,"pm:remove",{layer:A,shape:this.getShape()},j,nt)},_fireVertexAdded:function(M,A,j){var nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Edit",ht=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:M,indexPath:A,latlng:j,shape:this.getShape()},nt,ht)},_fireVertexRemoved:function(M,A){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:M,indexPath:A,shape:this.getShape()},j,nt)},_fireVertexClick:function(M,A){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:M,indexPath:A,shape:this.getShape()},j,nt)},_fireIntersect:function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._layer,"pm:intersect",{layer:this._layer,intersection:M,shape:this.getShape()},A,j)},_fireLayerReset:function(M,A){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:M,indexPath:A,shape:this.getShape()},j,nt)},_fireChange:function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:M,shape:this.getShape()},A,j)},_fireTextChange:function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:M,shape:this.getShape()},A,j)},_fireTextFocus:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},M,A)},_fireTextBlur:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},M,A)},_fireSnapDrag:function(M,A){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Snapping",nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(M,"pm:snapdrag",A,j,nt)},_fireSnap:function(M,A){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Snapping",nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(M,"pm:snap",A,j,nt)},_fireUnsnap:function(M,A){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Snapping",nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(M,"pm:unsnap",A,j,nt)},_fireRotationEnable:function(M,A){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Rotation",nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(M,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},j,nt)},_fireRotationDisable:function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Rotation",j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(M,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},A,j)},_fireRotationStart:function(M,A){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Rotation",nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(M,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:A},j,nt)},_fireRotation:function(M,A,j){var nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:this._rotationLayer,ht=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"Rotation",xt=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};this.__fire(M,"pm:rotate",{layer:nt,helpLayer:this._layer,startAngle:this._startAngle,angle:nt.pm.getAngle(),angleDiff:A,oldLatLngs:j,newLatLngs:nt.getLatLngs()},ht,xt)},_fireRotationEnd:function(M,A,j){var nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Rotation",ht=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(M,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:A,angle:this._rotationLayer.pm.getAngle(),originLatLngs:j,newLatLngs:this._rotationLayer.getLatLngs()},nt,ht)},_fireActionClick:function(M,A,j){var nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Toolbar",ht=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(this._map,"pm:actionclick",{text:M.text,action:M,btnName:A,button:j},nt,ht)},_fireButtonClick:function(M,A){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Toolbar",nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._map,"pm:buttonclick",{btnName:M,button:A},j,nt)},_fireLangChange:function(M,A,j,nt){var ht=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"Global",xt=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};this.__fire(this.map,"pm:langchange",{oldLang:M,activeLang:A,fallback:j,translations:nt},ht,xt)},_fireGlobalDragModeToggled:function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Global",j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:M,map:this.map},A,j)},_fireGlobalEditModeToggled:function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Global",j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:M,map:this.map},A,j)},_fireGlobalRemovalModeToggled:function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Global",j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:M,map:this.map},A,j)},_fireGlobalCutModeToggled:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Global",A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},M,A)},_fireGlobalDrawModeToggled:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Global",A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},M,A)},_fireGlobalRotateModeToggled:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Global",A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},M,A)},_fireRemoveLayerGroup:function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:M,j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(M,"pm:remove",{layer:A,shape:void 0},j,nt)},_fireKeyeventEvent:function(M,A,j){var nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Global",ht=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(this.map,"pm:keyevent",{event:M,eventType:A,focusOn:j},nt,ht)},__fire:function(M,A,j,nt){var ht=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};j=s()(j,ht,{source:nt}),L.PM.Utils._fireEvent(M,A,j)}};let C=w,k={_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener:function(M){this.map=M,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this)},_onKeyListener:function(M){var A="document";this.map.getContainer().contains(M.target)&&(A="map");var j={event:M,eventType:M.type,focusOn:A};this._lastEvents[M.type]=j,this._lastEvents.current=j,this.map.pm._fireKeyeventEvent(M,M.type,A)},_onBlur:function(M){M.altKey=!1;var A={event:M,eventType:M.type,focusOn:"document"};this._lastEvents[M.type]=A,this._lastEvents.current=A},getLastKeyEvent:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"current";return this._lastEvents[M]},isShiftKeyPressed:function(){var M;return(M=this._lastEvents.current)===null||M===void 0?void 0:M.event.shiftKey},isAltKeyPressed:function(){var M;return(M=this._lastEvents.current)===null||M===void 0?void 0:M.event.altKey},isCtrlKeyPressed:function(){var M;return(M=this._lastEvents.current)===null||M===void 0?void 0:M.event.ctrlKey},isMetaKeyPressed:function(){var M;return(M=this._lastEvents.current)===null||M===void 0?void 0:M.event.metaKey},getPressedKey:function(){var M;return(M=this._lastEvents.current)===null||M===void 0?void 0:M.event.key}};var T=o(7361),R=o.n(T),F=o(8721),H=o.n(F);function it(M){var A=L.PM.activeLang;return H()(O,A)||(A="en"),R()(O[A],M)}function ot(M){for(var A=0;A<M.length;A+=1){var j=M[A];if(Array.isArray(j)){if(ot(j))return!0}else if(j!=null&&j!=="")return!0}return!1}function dt(M){return M.reduce(function(A,j){if(j.length!==0){var nt=Array.isArray(j)?dt(j):j;Array.isArray(nt)?nt.length!==0&&A.push(nt):A.push(nt)}return A},[])}function $(M,A,j){for(var nt,ht,xt,Lt=6378137,Rt=63567523142e-4,Pt=.0033528106647474805,Nt=M.lng,Vt=M.lat,ne=j,Zt=Math.PI,ge=A*Zt/180,Ce=Math.sin(ge),Ne=Math.cos(ge),be=(1-Pt)*Math.tan(Vt*Zt/180),gr=1/Math.sqrt(1+be*be),dr=be*gr,xi=Math.atan2(be,Ne),nn=gr*Ce,Hn=1-nn*nn,Er=Hn*(Lt*Lt-Rt*Rt)/(Rt*Rt),fs=1+Er/16384*(4096+Er*(Er*(320-175*Er)-768)),Ar=Er/1024*(256+Er*(Er*(74-47*Er)-128)),Gn=ne/(Rt*fs),Zn=2*Math.PI;Math.abs(Gn-Zn)>1e-12;)nt=Math.cos(2*xi+Gn),Zn=Gn,Gn=ne/(Rt*fs)+Ar*(ht=Math.sin(Gn))*(nt+Ar/4*((xt=Math.cos(Gn))*(2*nt*nt-1)-Ar/6*nt*(4*ht*ht-3)*(4*nt*nt-3)));var Ts=dr*ht-gr*xt*Ne,Cr=Math.atan2(dr*xt+gr*ht*Ne,(1-Pt)*Math.sqrt(nn*nn+Ts*Ts)),Pe=Pt/16*Hn*(4+Pt*(4-3*Hn)),ca=Nt+180*(Math.atan2(ht*Ce,gr*xt-dr*ht*Ne)-(1-Pe)*Pt*nn*(Gn+Pe*ht*(nt+Pe*xt*(2*nt*nt-1))))/Zt,eo=180*Cr/Zt;return L.latLng(ca,eo)}function ct(M,A,j,nt){for(var ht,xt,Lt=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],Rt=[],Pt=0;Pt<j;Pt+=1){if(Lt)ht=$(M,360*Pt/j+nt,A),xt=L.latLng(ht.lng,ht.lat);else{var Nt=M.lat+Math.cos(2*Pt*Math.PI/j)*A,Vt=M.lng+Math.sin(2*Pt*Math.PI/j)*A;xt=L.latLng(Nt,Vt)}Rt.push(xt)}return Rt}function W(M,A,j,nt){var ht=function(xt,Lt,Rt){var Pt=xt.latLngToContainerPoint(Lt),Nt=xt.latLngToContainerPoint(Rt),Vt=180*Math.atan2(Nt.y-Pt.y,Nt.x-Pt.x)/Math.PI+90;return Vt+(Vt<0?360:0)}(M,A,j);return function(xt,Lt,Rt){Lt=(Lt+360)%360;var Pt=Math.PI/180,Nt=180/Math.PI,Vt=6378137,ne=xt.lng*Pt,Zt=xt.lat*Pt,ge=Lt*Pt,Ce=Math.sin(Zt),Ne=Math.cos(Zt),be=Math.cos(Rt/Vt),gr=Math.sin(Rt/Vt),dr=Math.asin(Ce*be+Ne*gr*Math.cos(ge)),xi=ne+Math.atan2(Math.sin(ge)*gr*Ne,be-Ce*Math.sin(dr));return xi=(xi*=Nt)>180?xi-360:xi<-180?xi+360:xi,L.latLng([dr*Nt,xi])}(A,ht,nt)}function V(M,A){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"asc";if(!A||Object.keys(A).length===0)return function(Pt,Nt){return Pt-Nt};for(var nt,ht=Object.keys(A),xt=ht.length-1,Lt={};xt>=0;)nt=ht[xt],Lt[nt.toLowerCase()]=A[nt],xt-=1;function Rt(Pt){return Pt instanceof L.Marker?"Marker":Pt instanceof L.Circle?"Circle":Pt instanceof L.CircleMarker?"CircleMarker":Pt instanceof L.Rectangle?"Rectangle":Pt instanceof L.Polygon?"Polygon":Pt instanceof L.Polyline?"Line":void 0}return function(Pt,Nt){var Vt,ne;if(M==="instanceofShape"){if(Vt=Rt(Pt.layer).toLowerCase(),ne=Rt(Nt.layer).toLowerCase(),!Vt||!ne)return 0}else{if(!Pt.hasOwnProperty(M)||!Nt.hasOwnProperty(M))return 0;Vt=Pt[M].toLowerCase(),ne=Nt[M].toLowerCase()}var Zt=Vt in Lt?Lt[Vt]:Number.MAX_SAFE_INTEGER,ge=ne in Lt?Lt[ne]:Number.MAX_SAFE_INTEGER,Ce=0;return Zt<ge?Ce=-1:Zt>ge&&(Ce=1),j==="desc"?-1*Ce:Ce}}function rt(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:M.getLatLngs();return M instanceof L.Polygon?L.polygon(A).getLatLngs():L.polyline(A).getLatLngs()}function mt(M,A){var j,nt;if((j=A.options.crs)!==null&&j!==void 0&&(nt=j.projection)!==null&&nt!==void 0&&nt.MAX_LATITUDE){var ht,xt,Lt=(ht=A.options.crs)===null||ht===void 0||(xt=ht.projection)===null||xt===void 0?void 0:xt.MAX_LATITUDE;M.lat=Math.max(Math.min(Lt,M.lat),-Lt)}return M}function wt(M){return M.options.renderer||M._map&&(M._map._getPaneRenderer(M.options.pane)||M._map.options.renderer||M._map._renderer)||M._renderer}let _t=L.Class.extend({includes:[q,G,tt,K,C],initialize:function(M){this.map=M,this.Draw=new L.PM.Draw(M),this.Toolbar=new L.PM.Toolbar(M),this.Keyboard=k,this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(M)},setLang:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"en",A=arguments.length>1?arguments[1]:void 0,j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"en",nt=L.PM.activeLang;A&&(O[M]=s()(O[j],A)),L.PM.activeLang=M,this.map.pm.Toolbar.reinit(),this._fireLangChange(nt,M,j,O[M])},addControls:function(M){this.Toolbar.addControls(M)},removeControls:function(){this.Toolbar.removeControls()},toggleControls:function(){this.Toolbar.toggleControls()},controlsVisible:function(){return this.Toolbar.isVisible},enableDraw:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Polygon",A=arguments.length>1?arguments[1]:void 0;M==="Poly"&&(M="Polygon"),this.Draw.enable(M,A)},disableDraw:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Polygon";M==="Poly"&&(M="Polygon"),this.Draw.disable(M)},setPathOptions:function(M){var A=this,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},nt=j.ignoreShapes||[],ht=j.merge||!1;this.map.pm.Draw.shapes.forEach(function(xt){nt.indexOf(xt)===-1&&A.map.pm.Draw[xt].setPathOptions(M,ht)})},getGlobalOptions:function(){return this.globalOptions},setGlobalOptions:function(M){var A=this,j=s()(this.globalOptions,M),nt=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.editable!=!!j.editable&&(this.map.pm.Draw.CircleMarker.disable(),nt=!0),this.map.pm.Draw.shapes.forEach(function(ht){A.map.pm.Draw[ht].setOptions(j)}),nt&&this.map.pm.Draw.CircleMarker.enable(),L.PM.Utils.findLayers(this.map).forEach(function(ht){ht.pm.setOptions(j)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=j,this.applyGlobalOptions()},applyGlobalOptions:function(){L.PM.Utils.findLayers(this.map).forEach(function(M){M.pm.enabled()&&M.pm.applyOptions()})},globalDrawModeEnabled:function(){return!!this.Draw.getActiveShape()},globalCutModeEnabled:function(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode:function(M){return this.Draw.Cut.enable(M)},toggleGlobalCutMode:function(M){return this.Draw.Cut.toggle(M)},disableGlobalCutMode:function(){return this.Draw.Cut.disable()},getGeomanLayers:function(){var M=arguments.length>0&&arguments[0]!==void 0&&arguments[0],A=L.PM.Utils.findLayers(this.map);if(!M)return A;var j=L.featureGroup();return j._pmTempLayer=!0,A.forEach(function(nt){j.addLayer(nt)}),j},getGeomanDrawLayers:function(){var M=arguments.length>0&&arguments[0]!==void 0&&arguments[0],A=L.PM.Utils.findLayers(this.map).filter(function(nt){return nt._drawnByGeoman===!0});if(!M)return A;var j=L.featureGroup();return j._pmTempLayer=!0,A.forEach(function(nt){j.addLayer(nt)}),j},_getContainingLayer:function(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple:function(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents:function(M){this._touchEventCounter===0&&(L.DomEvent.on(M,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(M,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents:function(M){this._touchEventCounter===1&&(L.DomEvent.off(M,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(M,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove:function(M){wt(this.map)._onMouseMove(this._createMouseEvent("mousemove",M))},_canvasTouchClick:function(M){var A="";M.type==="touchstart"||M.type==="pointerdown"?A="mousedown":M.type==="touchend"||M.type==="pointerup"?A="mouseup":M.type!=="touchcancel"&&M.type!=="pointercancel"||(A="mouseup"),A&&wt(this.map)._onClick(this._createMouseEvent(A,M))},_createMouseEvent:function(M,A){var j,nt=A.touches[0]||A.changedTouches[0];try{j=new MouseEvent(M,{bubbles:A.bubbles,cancelable:A.cancelable,view:A.view,detail:nt.detail,screenX:nt.screenX,screenY:nt.screenY,clientX:nt.clientX,clientY:nt.clientY,ctrlKey:A.ctrlKey,altKey:A.altKey,shiftKey:A.shiftKey,metaKey:A.metaKey,button:A.button,relatedTarget:A.relatedTarget})}catch{(j=document.createEvent("MouseEvents")).initMouseEvent(M,A.bubbles,A.cancelable,A.view,nt.detail,nt.screenX,nt.screenY,nt.clientX,nt.clientY,A.ctrlKey,A.altKey,A.shiftKey,A.metaKey,A.button,A.relatedTarget)}return j}}),Ct=L.Control.extend({includes:[C],options:{position:"topleft",disableByOtherButtons:!0},initialize:function(M){this._button=L.Util.extend({},this.options,M)},onAdd:function(M){return this._map=M,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this.buttonsDomNode=this._makeButton(this._button),this._container.appendChild(this.buttonsDomNode),this._container},onRemove:function(){return this.buttonsDomNode.remove(),this._container},getText:function(){return this._button.text},getIconUrl:function(){return this._button.iconUrl},destroy:function(){this._button={},this._update()},toggle:function(M){return this._button.toggleStatus=typeof M=="boolean"?M:!this._button.toggleStatus,this._applyStyleClasses(),this._button.toggleStatus},toggled:function(){return this._button.toggleStatus},onCreate:function(){this.toggle(!1)},disable:function(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable:function(){this._button.disabled=!1,this._updateDisabled()},_triggerClick:function(M){M&&M.preventDefault(),this._button.disabled||(this._button.onClick(M,{button:this,event:M}),this._clicked(M),this._button.afterClick(M,{button:this,event:M}))},_makeButton:function(M){var A=this,j=this.options.position.indexOf("right")>-1?"pos-right":"",nt=L.DomUtil.create("div","button-container  ".concat(j),this._container);M.title&&nt.setAttribute("title",M.title);var ht=L.DomUtil.create("a","leaflet-buttons-control-button",nt);ht.setAttribute("role","button"),ht.setAttribute("tabindex","0"),ht.href="#";var xt=L.DomUtil.create("div","leaflet-pm-actions-container ".concat(j),nt),Lt=M.actions,Rt={cancel:{text:it("actions.cancel"),onClick:function(){this._triggerClick()}},finishMode:{text:it("actions.finish"),onClick:function(){this._triggerClick()}},removeLastVertex:{text:it("actions.removeLastVertex"),onClick:function(){this._map.pm.Draw[M.jsClass]._removeLastVertex()}},finish:{text:it("actions.finish"),onClick:function(Nt){this._map.pm.Draw[M.jsClass]._finishShape(Nt)}}};Lt.forEach(function(Nt){var Vt,ne=typeof Nt=="string"?Nt:Nt.name;if(Rt[ne])Vt=Rt[ne];else{if(!Nt.text)return;Vt=Nt}var Zt=L.DomUtil.create("a","leaflet-pm-action ".concat(j," action-").concat(ne),xt);Zt.setAttribute("role","button"),Zt.setAttribute("tabindex","0"),Zt.href="#",Zt.innerHTML=Vt.text,L.DomEvent.disableClickPropagation(Zt),L.DomEvent.on(Zt,"click",L.DomEvent.stop),!M.disabled&&Vt.onClick&&(L.DomEvent.addListener(Zt,"click",function(ge){ge.preventDefault();var Ce="",Ne=A._map.pm.Toolbar.buttons;for(var be in Ne)if(Ne[be]._button===M){Ce=be;break}A._fireActionClick(Vt,Ce,M)},A),L.DomEvent.addListener(Zt,"click",Vt.onClick,A))}),M.toggleStatus&&L.DomUtil.addClass(nt,"active");var Pt=L.DomUtil.create("div","control-icon",ht);return M.iconUrl&&Pt.setAttribute("src",M.iconUrl),M.className&&L.DomUtil.addClass(Pt,M.className),L.DomEvent.disableClickPropagation(ht),L.DomEvent.on(ht,"click",L.DomEvent.stop),M.disabled||(L.DomEvent.addListener(ht,"click",this._onBtnClick,this),L.DomEvent.addListener(ht,"click",this._triggerClick,this)),M.disabled&&(L.DomUtil.addClass(ht,"pm-disabled"),ht.setAttribute("aria-disabled","true")),nt},_applyStyleClasses:function(){this._container&&(this._button.toggleStatus&&this._button.cssToggle!==!1?(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")):(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")))},_onBtnClick:function(){this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);var M="",A=this._map.pm.Toolbar.buttons;for(var j in A)if(A[j]._button===this._button){M=j;break}this._fireButtonClick(M,this._button)},_clicked:function(){this._button.doToggle&&this.toggle()},_updateDisabled:function(){if(this._container){var M="pm-disabled",A=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(A,M),A.setAttribute("aria-disabled","true"),L.DomEvent.off(A,"click",this._triggerClick,this),L.DomEvent.off(A,"click",this._onBtnClick,this)):(L.DomUtil.removeClass(A,M),A.setAttribute("aria-disabled","false"),L.DomEvent.on(A,"click",this._triggerClick,this),L.DomEvent.on(A,"click",this._onBtnClick,this))}}});function Ft(M,A){var j=Object.keys(M);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(M);A&&(nt=nt.filter(function(ht){return Object.getOwnPropertyDescriptor(M,ht).enumerable})),j.push.apply(j,nt)}return j}function It(M){for(var A=1;A<arguments.length;A++){var j=arguments[A]!=null?arguments[A]:{};A%2?Ft(Object(j),!0).forEach(function(nt){vt(M,nt,j[nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(j)):Ft(Object(j)).forEach(function(nt){Object.defineProperty(M,nt,Object.getOwnPropertyDescriptor(j,nt))})}return M}function vt(M,A,j){return A in M?Object.defineProperty(M,A,{value:j,enumerable:!0,configurable:!0,writable:!0}):M[A]=j,M}function kt(M){return kt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},kt(M)}L.Control.PMButton=Ct;let gt=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize:function(M){this.init(M)},reinit:function(){var M=this.isVisible;this.removeControls(),this._defineButtons(),M&&this.addControls()},init:function(M){this.map=M,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer:function(M){var A="".concat(M,"Container");return this[A]||(this[A]=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-".concat(M," leaflet-bar leaflet-control"))),this[A]},getButtons:function(){return this.buttons},addControls:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options;typeof M.editPolygon<"u"&&(M.editMode=M.editPolygon),typeof M.deleteLayer<"u"&&(M.removalMode=M.deleteLayer),L.Util.setOptions(this,M),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle:function(){var M=this.getButtons(),A={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(var j in M){var nt=M[j];L.Util.setOptions(nt,{className:A.geomanIcons[j]})}},removeControls:function(){var M=this.getButtons();for(var A in M)M[A].remove();this.isVisible=!1},toggleControls:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options;this.isVisible?this.removeControls():this.addControls(M)},_addButton:function(M,A){return this.buttons[M]=A,this.options[M]=this.options[M]||!1,this.buttons[M]},triggerClickOnToggledButtons:function(M){for(var A in this.buttons){var j=this.buttons[A];j._button.disableByOtherButtons&&j!==M&&j.toggled()&&j._triggerClick()}},toggleButton:function(M,A){var j=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];return M==="editPolygon"&&(M="editMode"),M==="deleteLayer"&&(M="removalMode"),j&&this.triggerClickOnToggledButtons(this.buttons[M]),!!this.buttons[M]&&this.buttons[M].toggle(A)},_defineButtons:function(){var M=this,A={className:"control-icon leaflet-pm-icon-marker",title:it("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:function(){},afterClick:function(ge,Ce){M.map.pm.Draw[Ce.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},j={title:it("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:function(){},afterClick:function(ge,Ce){M.map.pm.Draw[Ce.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},nt={className:"control-icon leaflet-pm-icon-polyline",title:it("buttonTitles.drawLineButton"),jsClass:"Line",onClick:function(){},afterClick:function(ge,Ce){M.map.pm.Draw[Ce.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},ht={title:it("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:function(){},afterClick:function(ge,Ce){M.map.pm.Draw[Ce.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},xt={title:it("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:function(){},afterClick:function(ge,Ce){M.map.pm.Draw[Ce.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},Lt={title:it("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:function(){},afterClick:function(ge,Ce){M.map.pm.Draw[Ce.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},Rt={title:it("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:function(){},afterClick:function(){M.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},Pt={title:it("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:function(){},afterClick:function(){M.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},Nt={title:it("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:function(){},afterClick:function(ge,Ce){M.map.pm.Draw[Ce.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},Vt={title:it("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:function(){},afterClick:function(){M.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},ne={title:it("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:function(){},afterClick:function(){M.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},Zt={className:"control-icon leaflet-pm-icon-text",title:it("buttonTitles.drawTextButton"),jsClass:"Text",onClick:function(){},afterClick:function(ge,Ce){M.map.pm.Draw[Ce.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(A)),this._addButton("drawPolyline",new L.Control.PMButton(nt)),this._addButton("drawRectangle",new L.Control.PMButton(Lt)),this._addButton("drawPolygon",new L.Control.PMButton(j)),this._addButton("drawCircle",new L.Control.PMButton(ht)),this._addButton("drawCircleMarker",new L.Control.PMButton(xt)),this._addButton("drawText",new L.Control.PMButton(Zt)),this._addButton("editMode",new L.Control.PMButton(Rt)),this._addButton("dragMode",new L.Control.PMButton(Pt)),this._addButton("cutPolygon",new L.Control.PMButton(Nt)),this._addButton("removalMode",new L.Control.PMButton(Vt)),this._addButton("rotateMode",new L.Control.PMButton(ne))},_showHideButtons:function(){if(this.isVisible){this.removeControls(),this.isVisible=!0;var M=this.getButtons(),A=[];for(var j in this.options.drawControls===!1&&(A=A.concat(Object.keys(M).filter(function(ht){return!M[ht]._button.tool}))),this.options.editControls===!1&&(A=A.concat(Object.keys(M).filter(function(ht){return M[ht]._button.tool==="edit"}))),this.options.optionsControls===!1&&(A=A.concat(Object.keys(M).filter(function(ht){return M[ht]._button.tool==="options"}))),this.options.customControls===!1&&(A=A.concat(Object.keys(M).filter(function(ht){return M[ht]._button.tool==="custom"}))),M)if(this.options[j]&&A.indexOf(j)===-1){var nt=M[j]._button.tool;nt||(nt="draw"),M[j].setPosition(this._getBtnPosition(nt)),M[j].addTo(this.map)}}},_getBtnPosition:function(M){return this.options.positions&&this.options.positions[M]?this.options.positions[M]:this.options.position},setBlockPosition:function(M,A){this.options.positions[M]=A,this._showHideButtons(),this.changeControlOrder()},getBlockPositions:function(){return this.options.positions},copyDrawControl:function(M,A){if(!A)throw new TypeError("Button has no name");kt(A)!=="object"&&(A={name:A});var j=this._btnNameMapping(M);if(!A.name)throw new TypeError("Button has no name");if(this.buttons[A.name])throw new TypeError("Button with this name already exists");var nt=this.map.pm.Draw.createNewDrawInstance(A.name,j);return A=It(It({},this.buttons[j]._button),A),{drawInstance:nt,control:this.createCustomControl(A)}},createCustomControl:function(M){var A,j;if(!M.name)throw new TypeError("Button has no name");if(this.buttons[M.name])throw new TypeError("Button with this name already exists");M.onClick||(M.onClick=function(){}),M.afterClick||(M.afterClick=function(){}),M.toggle!==!1&&(M.toggle=!0),M.block&&(M.block=M.block.toLowerCase()),M.block&&M.block!=="draw"||(M.block=""),M.className?M.className.indexOf("control-icon")===-1&&(M.className="control-icon ".concat(M.className)):M.className="control-icon";var nt={tool:M.block,className:M.className,title:M.title||"",jsClass:M.name,onClick:M.onClick,afterClick:M.afterClick,doToggle:M.toggle,toggleStatus:!1,disableOtherButtons:(A=M.disableOtherButtons)===null||A===void 0||A,disableByOtherButtons:(j=M.disableByOtherButtons)===null||j===void 0||j,cssToggle:M.toggle,position:this.options.position,actions:M.actions||[],disabled:!!M.disabled};this.options[M.name]!==!1&&(this.options[M.name]=!0);var ht=this._addButton(M.name,new L.Control.PMButton(nt));return this.changeControlOrder(),ht},changeControlOrder:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],A=this._shapeMapping(),j=[];M.forEach(function(Nt){A[Nt]?j.push(A[Nt]):j.push(Nt)});var nt=this.getButtons(),ht={};j.forEach(function(Nt){nt[Nt]&&(ht[Nt]=nt[Nt])});var xt=Object.keys(nt).filter(function(Nt){return!nt[Nt]._button.tool});xt.forEach(function(Nt){j.indexOf(Nt)===-1&&(ht[Nt]=nt[Nt])});var Lt=Object.keys(nt).filter(function(Nt){return nt[Nt]._button.tool==="edit"});Lt.forEach(function(Nt){j.indexOf(Nt)===-1&&(ht[Nt]=nt[Nt])});var Rt=Object.keys(nt).filter(function(Nt){return nt[Nt]._button.tool==="options"});Rt.forEach(function(Nt){j.indexOf(Nt)===-1&&(ht[Nt]=nt[Nt])});var Pt=Object.keys(nt).filter(function(Nt){return nt[Nt]._button.tool==="custom"});Pt.forEach(function(Nt){j.indexOf(Nt)===-1&&(ht[Nt]=nt[Nt])}),Object.keys(nt).forEach(function(Nt){j.indexOf(Nt)===-1&&(ht[Nt]=nt[Nt])}),this.map.pm.Toolbar.buttons=ht,this._showHideButtons()},getControlOrder:function(){var M=this.getButtons(),A=[];for(var j in M)A.push(j);return A},changeActionsOfControl:function(M,A){var j=this._btnNameMapping(M);if(!j)throw new TypeError("No name passed");if(!A)throw new TypeError("No actions passed");if(!this.buttons[j])throw new TypeError("Button with this name not exists");this.buttons[j]._button.actions=A,this.changeControlOrder()},setButtonDisabled:function(M,A){var j=this._btnNameMapping(M);A?this.buttons[j].disable():this.buttons[j].enable()},_shapeMapping:function(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping:function(M){var A=this._shapeMapping();return A[M]?A[M]:M}});function ut(M,A){var j=Object.keys(M);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(M);A&&(nt=nt.filter(function(ht){return Object.getOwnPropertyDescriptor(M,ht).enumerable})),j.push.apply(j,nt)}return j}function Q(M){for(var A=1;A<arguments.length;A++){var j=arguments[A]!=null?arguments[A]:{};A%2?ut(Object(j),!0).forEach(function(nt){Y(M,nt,j[nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(j)):ut(Object(j)).forEach(function(nt){Object.defineProperty(M,nt,Object.getOwnPropertyDescriptor(j,nt))})}return M}function Y(M,A,j){return A in M?Object.defineProperty(M,A,{value:j,enumerable:!0,configurable:!0,writable:!0}):M[A]=j,M}var et={_initSnappableMarkers:function(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0||this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping:function(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents:function(M){var A=this;M.forEach(function(j){Array.isArray(j)?A._assignEvents(j):(j.off("drag",A._handleSnapping,A),j.on("drag",A._handleSnapping,A),j.off("dragend",A._cleanupSnapping,A),j.on("dragend",A._cleanupSnapping,A))})},_cleanupSnapping:function(M){M&&(M.target._snapped=!1),delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("pm:remove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(function(A){A.remove()})},_handleThrottleSnapping:function(){this.throttledList&&this._createSnapList()},_handleSnapping:function(M){var A=this,j=M.target;if(j._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),this._map.pm.Keyboard.isAltKeyPressed()||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;var nt=this._calcClosestLayer(j.getLatLng(),this._snapList);if(Object.keys(nt).length===0)return!1;var ht,xt=nt.layer instanceof L.Marker||nt.layer instanceof L.CircleMarker||!this.options.snapSegment;ht=xt?nt.latlng:this._checkPrioritiySnapping(nt);var Lt=this.options.snapDistance,Rt={marker:j,shape:this._shape,snapLatLng:ht,segment:nt.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:nt.layer,distance:nt.distance};if(this._fireSnapDrag(Rt.marker,Rt),this._fireSnapDrag(this._layer,Rt),nt.distance<Lt){j._orgLatLng=j.getLatLng(),j.setLatLng(ht),j._snapped=!0,j._snapInfo=Rt;var Pt=this._snapLatLng||{},Nt=ht||{};Pt.lat===Nt.lat&&Pt.lng===Nt.lng||(A._snapLatLng=ht,A._fireSnap(j,Rt),A._fireSnap(A._layer,Rt))}else this._snapLatLng&&(this._unsnap(Rt),j._snapped=!1,j._snapInfo=void 0,this._fireUnsnap(Rt.marker,Rt),this._fireUnsnap(this._layer,Rt));return!0},_createSnapList:function(){var M=this,A=[],j=[],nt=this._map;nt.off("pm:remove",this._handleSnapLayerRemoval,this),nt.on("pm:remove",this._handleSnapLayerRemoval,this),nt.eachLayer(function(ht){if((ht instanceof L.Polyline||ht instanceof L.Marker||ht instanceof L.CircleMarker||ht instanceof L.ImageOverlay)&&ht.options.snapIgnore!==!0){if(ht.options.snapIgnore===void 0&&(!L.PM.optIn&&ht.options.pmIgnore===!0||L.PM.optIn&&ht.options.pmIgnore!==!1))return;(ht instanceof L.Circle||ht instanceof L.CircleMarker)&&ht.pm&&ht.pm._hiddenPolyCircle?A.push(ht.pm._hiddenPolyCircle):ht instanceof L.ImageOverlay&&(ht=L.rectangle(ht.getBounds())),A.push(ht);var xt=L.polyline([],{color:"red",pmIgnore:!0});xt._pmTempLayer=!0,j.push(xt),(ht instanceof L.Circle||ht instanceof L.CircleMarker)&&j.push(xt)}}),A=(A=(A=A.filter(function(ht){return M._layer!==ht})).filter(function(ht){return ht._latlng||ht._latlngs&&ot(ht._latlngs)})).filter(function(ht){return!ht._pmTempLayer}),this._otherSnapLayers?(this._otherSnapLayers.forEach(function(){var ht=L.polyline([],{color:"red",pmIgnore:!0});ht._pmTempLayer=!0,j.push(ht)}),this._snapList=A.concat(this._otherSnapLayers)):this._snapList=A,this.debugIndicatorLines=j},_handleSnapLayerRemoval:function(M){var A=M.layer,j=this._snapList.findIndex(function(nt){return nt._leaflet_id===A._leaflet_id});this._snapList.splice(j,1)},_calcClosestLayer:function(M,A){return this._calcClosestLayers(M,A,1)[0]},_calcClosestLayers:function(M,A){var j=this,nt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,ht=[],xt={};A.forEach(function(Rt,Pt){if(!Rt._parentCopy||Rt._parentCopy!==j._layer){var Nt=j._calcLayerDistances(M,Rt);if(Nt.distance=Math.floor(Nt.distance),j.debugIndicatorLines){if(!j.debugIndicatorLines[Pt]){var Vt=L.polyline([],{color:"red",pmIgnore:!0});Vt._pmTempLayer=!0,j.debugIndicatorLines[Pt]=Vt}j.debugIndicatorLines[Pt].setLatLngs([M,Nt.latlng])}nt===1&&(xt.distance===void 0||Nt.distance<=xt.distance)?(Nt.distance<xt.distance&&(ht=[]),(xt=Nt).layer=Rt,ht.push(xt)):nt!==1&&(xt={},(xt=Nt).layer=Rt,ht.push(xt))}}),nt!==1&&(ht=ht.sort(function(Rt,Pt){return Rt.distance-Pt.distance})),nt===-1&&(nt=ht.length);var Lt=this._getClosestLayerByPriority(ht,nt);return L.Util.isArray(Lt)?Lt:[Lt]},_calcLayerDistances:function(M,A){var j=this._map,nt=A instanceof L.Marker||A instanceof L.CircleMarker,ht=A instanceof L.Polygon,xt=M;if(nt){var Lt=A.getLatLng();return{latlng:Q({},Lt),distance:this._getDistance(j,Lt,xt)}}return this._calcLatLngDistances(xt,A.getLatLngs(),j,ht)},_calcLatLngDistances:function(M,A,j){var nt,ht,xt,Lt=this,Rt=arguments.length>3&&arguments[3]!==void 0&&arguments[3],Pt=function Vt(ne){ne.forEach(function(Zt,ge){if(Array.isArray(Zt))Vt(Zt);else if(Lt.options.snapSegment){var Ce,Ne=Zt;Ce=Rt?ge+1===ne.length?0:ge+1:ge+1===ne.length?void 0:ge+1;var be=ne[Ce];if(be){var gr=Lt._getDistanceToSegment(j,M,Ne,be);(ht===void 0||gr<ht)&&(ht=gr,xt=[Ne,be])}}else{var dr=Lt._getDistance(j,M,Zt);(ht===void 0||dr<ht)&&(ht=dr,nt=Zt)}})};if(Pt(A),this.options.snapSegment){var Nt=this._getClosestPointOnSegment(j,M,xt[0],xt[1]);return{latlng:Q({},Nt),segment:xt,distance:ht}}return{latlng:nt,distance:ht}},_getClosestLayerByPriority:function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;M=M.sort(function(Lt,Rt){return Lt._leaflet_id-Rt._leaflet_id});var j=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],nt=this._map.pm.globalOptions.snappingOrder||[],ht=0,xt={};return nt.concat(j).forEach(function(Lt){xt[Lt]||(ht+=1,xt[Lt]=ht)}),M.sort(V("instanceofShape",xt)),A===1?M[0]||{}:M.slice(0,A)},_checkPrioritiySnapping:function(M){var A=this._map,j=M.segment[0],nt=M.segment[1],ht=M.latlng,xt=this._getDistance(A,j,ht),Lt=this._getDistance(A,nt,ht),Rt=xt<Lt?j:nt,Pt=xt<Lt?xt:Lt;if(this.options.snapMiddle){var Nt=L.PM.Utils.calcMiddleLatLng(A,j,nt),Vt=this._getDistance(A,Nt,ht);Vt<xt&&Vt<Lt&&(Rt=Nt,Pt=Vt)}return Q({},Pt<this.options.snapDistance?Rt:ht)},_unsnap:function(){delete this._snapLatLng},_getClosestPointOnSegment:function(M,A,j,nt){var ht=M.getMaxZoom();ht===1/0&&(ht=M.getZoom());var xt=M.project(A,ht),Lt=M.project(j,ht),Rt=M.project(nt,ht),Pt=L.LineUtil.closestPointOnSegment(xt,Lt,Rt);return M.unproject(Pt,ht)},_getDistanceToSegment:function(M,A,j,nt){var ht=M.latLngToLayerPoint(A),xt=M.latLngToLayerPoint(j),Lt=M.latLngToLayerPoint(nt);return L.LineUtil.pointToSegmentDistance(ht,xt,Lt)},_getDistance:function(M,A,j){return M.latLngToLayerPoint(A).distanceTo(M.latLngToLayerPoint(j))}};let lt=et,pt=L.Class.extend({includes:[lt,C],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,editable:!1,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1},setOptions:function(M){L.Util.setOptions(this,M),this.setStyle(this.options)},setStyle:function(){},getOptions:function(){return this.options},initialize:function(M){var A=this,j=new L.Icon.Default;j.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=j,this._map=M,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(function(nt){A[nt]=new L.PM.Draw[nt](A._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions:function(M){var A=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.options.pathOptions=A?s()(this.options.pathOptions,M):M},getShapes:function(){return this.shapes},getShape:function(){return this._shape},enable:function(M,A){if(!M)throw new Error("Error: Please pass a shape as a parameter. Possible shapes are: ".concat(this.getShapes().join(",")));this.disable(),this[M].enable(A)},disable:function(){var M=this;this.shapes.forEach(function(A){M[A].disable()})},addControls:function(){var M=this;this.shapes.forEach(function(A){M[A].addButton()})},getActiveShape:function(){var M,A=this;return this.shapes.forEach(function(j){A[j]._enabled&&(M=j)}),M},_setGlobalDrawMode:function(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();var M=L.PM.Utils.findLayers(this._map);this._enabled?M.forEach(function(A){L.PM.Utils.disablePopup(A)}):M.forEach(function(A){L.PM.Utils.enablePopup(A)})},createNewDrawInstance:function(M,A){var j=this._getShapeFromBtnName(A);if(this[M])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[j])throw new TypeError("There is no class L.PM.Draw.".concat(j));return this[M]=new L.PM.Draw[j](this._map),this[M].toolbarButtonName=M,this[M]._shape=M,this.shapes.push(M),this[A]&&this[M].setOptions(this[A].options),this[M].setOptions(this[M].options),this[M]},_getShapeFromBtnName:function(M){var A={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return A[M]?A[M]:this[M]?this[M]._shape:M},_finishLayer:function(M){M.pm&&(M.pm.setOptions(this.options),M.pm._shape=this._shape,M.pm._map=this._map),this._addDrawnLayerProp(M)},_addDrawnLayerProp:function(M){M._drawnByGeoman=!0},_setPane:function(M,A){A==="layerPane"?M.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":A==="vertexPane"?M.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":A==="markerPane"&&(M.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer:function(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}});pt.Marker=pt.extend({initialize:function(M){this._map=M,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable:function(M){var A=this;L.Util.setOptions(this,M),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(it("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(function(j){A.isRelevantMarker(j)&&j.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){var M=this;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(function(A){M.isRelevantMarker(A)&&A.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(M){this.enabled()?this.disable():this.enable(M)},isRelevantMarker:function(M){return M instanceof L.Marker&&M.pm&&!M._pmTempLayer&&!M.pm._initTextMarker},_syncHintMarker:function(M){if(this._hintMarker.setLatLng(M.latlng),this.options.snappable){var A=M;A.target=this._hintMarker,this._handleSnapping(A)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker:function(M){if(M.latlng&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){this._hintMarker._snapped||this._hintMarker.setLatLng(M.latlng);var A=this._hintMarker.getLatLng(),j=new L.Marker(A,this.options.markerStyle);this._setPane(j,"markerPane"),this._finishLayer(j),j.pm||(j.options.draggable=!1),j.addTo(this._map.pm._getContainingLayer()),j.pm&&this.options.markerEditable?j.pm.enable():j.dragging&&j.dragging.disable(),this._fireCreate(j),this._cleanupSnapping(),this.options.continueDrawing||this.disable()}},setStyle:function(){var M,A;(M=this.options.markerStyle)!==null&&M!==void 0&&M.icon&&((A=this._hintMarker)===null||A===void 0||A.setIcon(this.options.markerStyle.icon))}});var bt=63710088e-1,Et={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260511392e-6,inches:39.37*bt,kilometers:6371.0088,kilometres:6371.0088,meters:bt,metres:bt,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:bt/1852,radians:1,yards:6967335223679999e-9};function Ot(M,A,j){j===void 0&&(j={});var nt={type:"Feature"};return(j.id===0||j.id)&&(nt.id=j.id),j.bbox&&(nt.bbox=j.bbox),nt.properties=A||{},nt.geometry=M,nt}function zt(M,A,j){if(j===void 0&&(j={}),!M)throw new Error("coordinates is required");if(!Array.isArray(M))throw new Error("coordinates must be an Array");if(M.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!_e(M[0])||!_e(M[1]))throw new Error("coordinates must contain numbers");return Ot({type:"Point",coordinates:M},A,j)}function Gt(M,A,j){if(j===void 0&&(j={}),M.length<2)throw new Error("coordinates must be an array of two or more positions");return Ot({type:"LineString",coordinates:M},A,j)}function Jt(M,A){A===void 0&&(A={});var j={type:"FeatureCollection"};return A.id&&(j.id=A.id),A.bbox&&(j.bbox=A.bbox),j.features=M,j}function Kt(M,A){A===void 0&&(A="kilometers");var j=Et[A];if(!j)throw new Error(A+" units is invalid");return M*j}function ie(M,A){A===void 0&&(A="kilometers");var j=Et[A];if(!j)throw new Error(A+" units is invalid");return M/j}function Xt(M){return 180*(M%(2*Math.PI))/Math.PI}function Ut(M){return M%360*Math.PI/180}function _e(M){return!isNaN(M)&&M!==null&&!Array.isArray(M)}function le(M){var A,j,nt={type:"FeatureCollection",features:[]};if((j=M.type==="Feature"?M.geometry:M).type==="LineString")A=[j.coordinates];else if(j.type==="MultiLineString")A=j.coordinates;else if(j.type==="MultiPolygon")A=[].concat.apply([],j.coordinates);else{if(j.type!=="Polygon")throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");A=j.coordinates}return A.forEach(function(ht){A.forEach(function(xt){for(var Lt=0;Lt<ht.length-1;Lt++)for(var Rt=Lt;Rt<xt.length-1;Rt++)if(!(ht===xt&&(Math.abs(Lt-Rt)===1||Lt===0&&Rt===ht.length-2&&ht[Lt][0]===ht[ht.length-1][0]&&ht[Lt][1]===ht[ht.length-1][1]))){var Pt=ye(ht[Lt][0],ht[Lt][1],ht[Lt+1][0],ht[Lt+1][1],xt[Rt][0],xt[Rt][1],xt[Rt+1][0],xt[Rt+1][1]);Pt&&nt.features.push(zt([Pt[0],Pt[1]]))}})}),nt}function ye(M,A,j,nt,ht,xt,Lt,Rt){var Pt,Nt,Vt,ne,Zt={x:null,y:null,onLine1:!1,onLine2:!1};return(Pt=(Rt-xt)*(j-M)-(Lt-ht)*(nt-A))===0?Zt.x!==null&&Zt.y!==null&&Zt:(ne=(j-M)*(Nt=A-xt)-(nt-A)*(Vt=M-ht),Nt=((Lt-ht)*Nt-(Rt-xt)*Vt)/Pt,Vt=ne/Pt,Zt.x=M+Nt*(j-M),Zt.y=A+Nt*(nt-A),Nt>=0&&Nt<=1&&(Zt.onLine1=!0),Vt>=0&&Vt<=1&&(Zt.onLine2=!0),!(!Zt.onLine1||!Zt.onLine2)&&[Zt.x,Zt.y])}function Ze(M,A){var j=Object.keys(M);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(M);A&&(nt=nt.filter(function(ht){return Object.getOwnPropertyDescriptor(M,ht).enumerable})),j.push.apply(j,nt)}return j}function ce(M){for(var A=1;A<arguments.length;A++){var j=arguments[A]!=null?arguments[A]:{};A%2?Ze(Object(j),!0).forEach(function(nt){ke(M,nt,j[nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(j)):Ze(Object(j)).forEach(function(nt){Object.defineProperty(M,nt,Object.getOwnPropertyDescriptor(j,nt))})}return M}function ke(M,A,j){return A in M?Object.defineProperty(M,A,{value:j,enumerable:!0,configurable:!0,writable:!0}):M[A]=j,M}function He(M,A){var j=Object.keys(M);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(M);A&&(nt=nt.filter(function(ht){return Object.getOwnPropertyDescriptor(M,ht).enumerable})),j.push.apply(j,nt)}return j}function $t(M){for(var A=1;A<arguments.length;A++){var j=arguments[A]!=null?arguments[A]:{};A%2?He(Object(j),!0).forEach(function(nt){Te(M,nt,j[nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(j)):He(Object(j)).forEach(function(nt){Object.defineProperty(M,nt,Object.getOwnPropertyDescriptor(j,nt))})}return M}function Te(M,A,j){return A in M?Object.defineProperty(M,A,{value:j,enumerable:!0,configurable:!0,writable:!0}):M[A]=j,M}function bi(M,A){var j=Object.keys(M);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(M);A&&(nt=nt.filter(function(ht){return Object.getOwnPropertyDescriptor(M,ht).enumerable})),j.push.apply(j,nt)}return j}function ue(M){for(var A=1;A<arguments.length;A++){var j=arguments[A]!=null?arguments[A]:{};A%2?bi(Object(j),!0).forEach(function(nt){Fe(M,nt,j[nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(j)):bi(Object(j)).forEach(function(nt){Object.defineProperty(M,nt,Object.getOwnPropertyDescriptor(j,nt))})}return M}function Fe(M,A,j){return A in M?Object.defineProperty(M,A,{value:j,enumerable:!0,configurable:!0,writable:!0}):M[A]=j,M}function ai(M){if(!M)throw new Error("coord is required");if(!Array.isArray(M)){if(M.type==="Feature"&&M.geometry!==null&&M.geometry.type==="Point")return M.geometry.coordinates;if(M.type==="Point")return M.coordinates}if(Array.isArray(M)&&M.length>=2&&!Array.isArray(M[0])&&!Array.isArray(M[1]))return M;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Le(M){if(Array.isArray(M))return M;if(M.type==="Feature"){if(M.geometry!==null)return M.geometry.coordinates}else if(M.coordinates)return M.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Oe(M){return M.type==="Feature"?M.geometry:M}function Qi(M,A){return M.type==="FeatureCollection"?"FeatureCollection":M.type==="GeometryCollection"?"GeometryCollection":M.type==="Feature"&&M.geometry!==null?M.geometry.type:M.type}function We(M,A,j){if(M!==null)for(var nt,ht,xt,Lt,Rt,Pt,Nt,Vt,ne=0,Zt=0,ge=M.type,Ce=ge==="FeatureCollection",Ne=ge==="Feature",be=Ce?M.features.length:1,gr=0;gr<be;gr++){Rt=(Vt=!!(Nt=Ce?M.features[gr].geometry:Ne?M.geometry:M)&&Nt.type==="GeometryCollection")?Nt.geometries.length:1;for(var dr=0;dr<Rt;dr++){var xi=0,nn=0;if((Lt=Vt?Nt.geometries[dr]:Nt)!==null){Pt=Lt.coordinates;var Hn=Lt.type;switch(ne=!j||Hn!=="Polygon"&&Hn!=="MultiPolygon"?0:1,Hn){case null:break;case"Point":if(A(Pt,Zt,gr,xi,nn)===!1)return!1;Zt++,xi++;break;case"LineString":case"MultiPoint":for(nt=0;nt<Pt.length;nt++){if(A(Pt[nt],Zt,gr,xi,nn)===!1)return!1;Zt++,Hn==="MultiPoint"&&xi++}Hn==="LineString"&&xi++;break;case"Polygon":case"MultiLineString":for(nt=0;nt<Pt.length;nt++){for(ht=0;ht<Pt[nt].length-ne;ht++){if(A(Pt[nt][ht],Zt,gr,xi,nn)===!1)return!1;Zt++}Hn==="MultiLineString"&&xi++,Hn==="Polygon"&&nn++}Hn==="Polygon"&&xi++;break;case"MultiPolygon":for(nt=0;nt<Pt.length;nt++){for(nn=0,ht=0;ht<Pt[nt].length;ht++){for(xt=0;xt<Pt[nt][ht].length-ne;xt++){if(A(Pt[nt][ht][xt],Zt,gr,xi,nn)===!1)return!1;Zt++}nn++}xi++}break;case"GeometryCollection":for(nt=0;nt<Lt.geometries.length;nt++)if(We(Lt.geometries[nt],A,j)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function At(M,A){if(M.type==="Feature")A(M,0);else if(M.type==="FeatureCollection")for(var j=0;j<M.features.length&&A(M.features[j],j)!==!1;j++);}function qt(M,A){var j,nt,ht,xt,Lt,Rt,Pt,Nt,Vt,ne,Zt=0,ge=M.type==="FeatureCollection",Ce=M.type==="Feature",Ne=ge?M.features.length:1;for(j=0;j<Ne;j++){for(Rt=ge?M.features[j].geometry:Ce?M.geometry:M,Nt=ge?M.features[j].properties:Ce?M.properties:{},Vt=ge?M.features[j].bbox:Ce?M.bbox:void 0,ne=ge?M.features[j].id:Ce?M.id:void 0,Lt=(Pt=!!Rt&&Rt.type==="GeometryCollection")?Rt.geometries.length:1,ht=0;ht<Lt;ht++)if((xt=Pt?Rt.geometries[ht]:Rt)!==null)switch(xt.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(A(xt,Zt,Nt,Vt,ne)===!1)return!1;break;case"GeometryCollection":for(nt=0;nt<xt.geometries.length;nt++)if(A(xt.geometries[nt],Zt,Nt,Vt,ne)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(A(null,Zt,Nt,Vt,ne)===!1)return!1;Zt++}}function jt(M,A){qt(M,function(j,nt,ht,xt,Lt){var Rt,Pt=j===null?null:j.type;switch(Pt){case null:case"Point":case"LineString":case"Polygon":return A(Ot(j,ht,{bbox:xt,id:Lt}),nt,0)!==!1&&void 0}switch(Pt){case"MultiPoint":Rt="Point";break;case"MultiLineString":Rt="LineString";break;case"MultiPolygon":Rt="Polygon"}for(var Nt=0;Nt<j.coordinates.length;Nt++){var Vt=j.coordinates[Nt];if(A(Ot({type:Rt,coordinates:Vt},ht),nt,Nt)===!1)return!1}})}pt.Line=pt.extend({initialize:function(M){this._map=M,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable:function(M){L.Util.setOptions(this,M),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],ce(ce({},this.options.templineStyle),{},{pmIgnore:!1})),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(it("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map._container.style.cursor="crosshair",this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(M){this.enabled()?this.disable():this.enable(M)},_syncHintLine:function(){var M=this._layer.getLatLngs();if(M.length>0){var A=M[M.length-1];this._hintline.setLatLngs([A,this._hintMarker.getLatLng()])}},_syncHintMarker:function(M){if(this._hintMarker.setLatLng(M.latlng),this.options.snappable){var A=M;A.target=this._hintMarker,this._handleSnapping(A)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());var j=this._layer._defaultShape().slice();j.push(this._hintMarker.getLatLng()),this._change(j)},hasSelfIntersection:function(){return le(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection:function(M,A){var j=L.polyline(this._layer.getLatLngs());M&&(A||(A=this._hintMarker.getLatLng()),j.addLatLng(A));var nt=le(j.toGeoJSON(15));this._doesSelfIntersect=nt.features.length>0,this._doesSelfIntersect?this._hintline.setStyle({color:"#f00000ff"}):this._hintline.isEmpty()||this._hintline.setStyle(this.options.hintlineStyle)},_createVertex:function(M){if(this.options.allowSelfIntersection||(this._handleSelfIntersection(!0,M.latlng),!this._doesSelfIntersect)){this._hintMarker._snapped||this._hintMarker.setLatLng(M.latlng);var A=this._hintMarker.getLatLng(),j=this._layer.getLatLngs(),nt=j[j.length-1];if(A.equals(j[0])||j.length>0&&A.equals(nt))this._finishShape();else{this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:A,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(A);var ht=this._createMarker(A);this._setTooltipText(),this._setHintLineAfterNewVertex(A),this._fireVertexAdded(ht,void 0,A,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(M)}}},_setHintLineAfterNewVertex:function(M){this._hintline.setLatLngs([M,M])},_removeLastVertex:function(){var M=this._markers;if(M.length<=1)this.disable();else{var A=this._layer.getLatLngs(),j=M[M.length-1],nt=L.PM.Utils.findDeepMarkerIndex(M,j).indexPath;M.pop(),this._layerGroup.removeLayer(j);var ht=M[M.length-1],xt=A.indexOf(ht.getLatLng());A=A.slice(0,xt+1),this._layer.setLatLngs(A),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(j,nt,"Draw"),this._change(this._layer.getLatLngs())}},_finishShape:function(){if((this.options.allowSelfIntersection||(this._handleSelfIntersection(!1),!this._doesSelfIntersect))&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){var M=this._layer.getLatLngs();if(!(M.length<=1)){var A=L.polyline(M,this.options.pathOptions);this._setPane(A,"layerPane"),this._finishLayer(A),A.addTo(this._map.pm._getContainingLayer()),this._fireCreate(A),this.options.snappable&&this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this.enable()}}},_createMarker:function(M){var A=new L.Marker(M,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(A,"vertexPane"),A._pmTempLayer=!0,this._layerGroup.addLayer(A),this._markers.push(A),A.on("click",this._finishShape,this),A},_setTooltipText:function(){var M="";M=it(this._layer.getLatLngs().flat().length<=1?"tooltips.continueLine":"tooltips.finishLine"),this._hintMarker.setTooltipContent(M)},_change:function(M){this._fireChange(M,"Draw")},setStyle:function(){var M,A;(M=this._layer)===null||M===void 0||M.setStyle(this.options.templineStyle),(A=this._hintline)===null||A===void 0||A.setStyle(this.options.hintlineStyle)}}),pt.Polygon=pt.Line.extend({initialize:function(M){this._map=M,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable:function(M){L.PM.Draw.Line.prototype.enable.call(this,M),this._layer.pm._shape="Polygon"},_createMarker:function(M){var A=new L.Marker(M,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(A,"vertexPane"),A._pmTempLayer=!0,this._layerGroup.addLayer(A),this._markers.push(A),this._layer.getLatLngs().flat().length===1?(A.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(A)-1,this.options.snappable&&this._cleanupSnapping()):A.on("click",function(){return 1}),A},_setTooltipText:function(){var M="";M=it(this._layer.getLatLngs().flat().length<=2?"tooltips.continueLine":"tooltips.finishPoly"),this._hintMarker.setTooltipContent(M)},_finishShape:function(){if((this.options.allowSelfIntersection||(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),!this._doesSelfIntersect))&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){var M=this._layer.getLatLngs();if(!(M.length<=2)){var A=L.polygon(M,this.options.pathOptions);this._setPane(A,"layerPane"),this._finishLayer(A),A.addTo(this._map.pm._getContainingLayer()),this._fireCreate(A),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this.disable(),this.options.continueDrawing&&this.enable()}}}}),pt.Rectangle=pt.extend({initialize:function(M){this._map=M,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable:function(M){if(L.Util.setOptions(this,M),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(it("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(var A=0;A<2;A+=1){var j=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(j,"vertexPane"),j._pmTempLayer=!0,this._layerGroup.addLayer(j),this._styleMarkers.push(j)}}this._map._container.style.cursor="crosshair",this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(M){this.enabled()?this.disable():this.enable(M)},_placeStartingMarkers:function(M){this._hintMarker._snapped||this._hintMarker.setLatLng(M.latlng);var A=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(A),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(function(j){L.DomUtil.addClass(j._icon,"visible"),j.setLatLng(A)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(it("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin:function(){var M=this._startMarker.getLatLng();M&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([M,M]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker:function(M){if(this._hintMarker.setLatLng(M.latlng),this.options.snappable){var A=M;A.target=this._hintMarker,this._handleSnapping(A)}var j=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(j,"Draw")},_syncRectangleSize:function(){var M=this,A=mt(this._startMarker.getLatLng(),this._map),j=mt(this._hintMarker.getLatLng(),this._map),nt=L.PM.Utils._getRotatedRectangle(A,j,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(nt),this.options.cursorMarker&&this._styleMarkers){var ht=[];nt.forEach(function(xt){xt.equals(A,1e-8)||xt.equals(j,1e-8)||ht.push(xt)}),ht.forEach(function(xt,Lt){try{M._styleMarkers[Lt].setLatLng(xt)}catch{}})}},_findCorners:function(){var M=this._layer.getBounds();return[M.getNorthWest(),M.getNorthEast(),M.getSouthEast(),M.getSouthWest()]},_finishShape:function(M){this._hintMarker._snapped||this._hintMarker.setLatLng(M.latlng);var A=this._hintMarker.getLatLng(),j=this._startMarker.getLatLng();if(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer()){var nt=L.rectangle([j,A],this.options.pathOptions);if(this.options.rectangleAngle){var ht=L.PM.Utils._getRotatedRectangle(j,A,this.options.rectangleAngle||0,this._map);nt.setLatLngs(ht),nt.pm&&nt.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(nt,"layerPane"),this._finishLayer(nt),nt.addTo(this._map.pm._getContainingLayer()),this._fireCreate(nt),this.disable(),this.options.continueDrawing&&this.enable()}},setStyle:function(){var M;(M=this._layer)===null||M===void 0||M.setStyle(this.options.pathOptions)}}),pt.Circle=pt.extend({initialize:function(M){this._map=M,this._shape="Circle",this.toolbarButtonName="drawCircle"},enable:function(M){L.Util.setOptions(this,M),this.options.radius=0,this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.circle(this._map.getCenter(),$t($t({},this.options.templineStyle),{},{radius:0})),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(it("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map._container.style.cursor="crosshair",this._map.on("click",this._placeCenterMarker,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(M){this.enabled()?this.disable():this.enable(M)},_syncHintLine:function(){var M=this._centerMarker.getLatLng(),A=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([M,A])},_syncCircleRadius:function(){var M,A=this._centerMarker.getLatLng(),j=this._hintMarker.getLatLng();M=this._map.options.crs===L.CRS.Simple?this._map.distance(A,j):A.distanceTo(j),this.options.minRadiusCircle&&M<this.options.minRadiusCircle?this._layer.setRadius(this.options.minRadiusCircle):this.options.maxRadiusCircle&&M>this.options.maxRadiusCircle?this._layer.setRadius(this.options.maxRadiusCircle):this._layer.setRadius(M)},_syncHintMarker:function(M){if(this._hintMarker.setLatLng(M.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){var A=M;A.target=this._hintMarker,this._handleSnapping(A)}this._handleHintMarkerSnapping();var j=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(j,"Draw")},_placeCenterMarker:function(M){this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker),this._hintMarker._snapped||this._hintMarker.setLatLng(M.latlng);var A=this._hintMarker.getLatLng();this._layerGroup.addLayer(this._layer),this._centerMarker.setLatLng(A),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter:function(){var M=this._centerMarker.getLatLng();M&&(this._layer.setLatLng(M),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(it("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_finishShape:function(M){if(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer()){this._hintMarker._snapped||this._hintMarker.setLatLng(M.latlng);var A,j=this._centerMarker.getLatLng(),nt=this._hintMarker.getLatLng();A=this._map.options.crs===L.CRS.Simple?this._map.distance(j,nt):j.distanceTo(nt),this.options.minRadiusCircle&&A<this.options.minRadiusCircle?A=this.options.minRadiusCircle:this.options.maxRadiusCircle&&A>this.options.maxRadiusCircle&&(A=this.options.maxRadiusCircle);var ht=$t($t({},this.options.pathOptions),{},{radius:A}),xt=L.circle(j,ht);this._setPane(xt,"layerPane"),this._finishLayer(xt),xt.addTo(this._map.pm._getContainingLayer()),xt.pm&&xt.pm._updateHiddenPolyCircle(),this._fireCreate(xt),this.disable(),this.options.continueDrawing&&this.enable()}},_getNewDestinationOfHintMarker:function(){var M=this._hintMarker.getLatLng();if(!this._layerGroup.hasLayer(this._centerMarker))return M;var A=this._centerMarker.getLatLng(),j=A.distanceTo(M);return this.options.minRadiusCircle&&j<this.options.minRadiusCircle?M=W(this._map,A,M,this.options.minRadiusCircle):this.options.maxRadiusCircle&&j>this.options.maxRadiusCircle&&(M=W(this._map,A,M,this.options.maxRadiusCircle)),M},_handleHintMarkerSnapping:function(){if(this._hintMarker._snapped){var M=this._centerMarker.getLatLng(),A=this._hintMarker.getLatLng(),j=M.distanceTo(A);this._layerGroup.hasLayer(this._centerMarker)&&(this.options.minRadiusCircle&&j<this.options.minRadiusCircle||this.options.maxRadiusCircle&&j>this.options.maxRadiusCircle)&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng)}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())},setStyle:function(){var M,A;(M=this._layer)===null||M===void 0||M.setStyle(this.options.templineStyle),(A=this._hintline)===null||A===void 0||A.setStyle(this.options.hintlineStyle)}}),pt.CircleMarker=pt.Marker.extend({initialize:function(M){this._map=M,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1},enable:function(M){var A=this;if(L.Util.setOptions(this,M),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this.options.editable){var j={};L.extend(j,this.options.templineStyle),j.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.circleMarker(this._map.getCenter(),j),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(it("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this),this._map._container.style.cursor="crosshair"}else this._map.on("click",this._createMarker,this),this._hintMarker=L.circleMarker(this._map.getCenter(),this.options.templineStyle),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(it("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),!this.options.editable&&this.options.markerEditable&&this._map.eachLayer(function(nt){A.isRelevantMarker(nt)&&nt.pm.enable()}),this._layer.bringToBack(),this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){var M=this;this._enabled&&(this._enabled=!1,this.options.editable?(this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._map.eachLayer(function(A){M.isRelevantMarker(A)&&A.pm.disable()}),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_placeCenterMarker:function(M){this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker),this._hintMarker._snapped||this._hintMarker.setLatLng(M.latlng);var A=this._hintMarker.getLatLng();this._layerGroup.addLayer(this._layer),this._centerMarker.setLatLng(A),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter:function(){var M=this._centerMarker.getLatLng();M&&(this._layer.setLatLng(M),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(it("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine:function(){var M=this._centerMarker.getLatLng(),A=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([M,A])},_syncCircleRadius:function(){var M=this._centerMarker.getLatLng(),A=this._hintMarker.getLatLng(),j=this._map.project(M).distanceTo(this._map.project(A));this.options.minRadiusCircleMarker&&j<this.options.minRadiusCircleMarker?this._layer.setRadius(this.options.minRadiusCircleMarker):this.options.maxRadiusCircleMarker&&j>this.options.maxRadiusCircleMarker?this._layer.setRadius(this.options.maxRadiusCircleMarker):this._layer.setRadius(j)},_syncHintMarker:function(M){if(this._hintMarker.setLatLng(M.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){var A=M;A.target=this._hintMarker,this._handleSnapping(A)}this._handleHintMarkerSnapping();var j=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(j,"Draw")},isRelevantMarker:function(M){return M instanceof L.CircleMarker&&!(M instanceof L.Circle)&&M.pm&&!M._pmTempLayer},_createMarker:function(M){if((!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())&&M.latlng&&!this._layerIsDragging){this._hintMarker._snapped||this._hintMarker.setLatLng(M.latlng);var A=this._hintMarker.getLatLng(),j=L.circleMarker(A,this.options.pathOptions);this._setPane(j,"layerPane"),this._finishLayer(j),j.addTo(this._map.pm._getContainingLayer()),j.pm&&this.options.markerEditable&&j.pm.enable(),this._fireCreate(j),this._cleanupSnapping(),this.options.continueDrawing||this.disable()}},_finishShape:function(M){if(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer()){this._hintMarker._snapped||this._hintMarker.setLatLng(M.latlng);var A=this._centerMarker.getLatLng(),j=this._hintMarker.getLatLng(),nt=this._map.project(A).distanceTo(this._map.project(j));this.options.editable&&(this.options.minRadiusCircleMarker&&nt<this.options.minRadiusCircleMarker?nt=this.options.minRadiusCircleMarker:this.options.maxRadiusCircleMarker&&nt>this.options.maxRadiusCircleMarker&&(nt=this.options.maxRadiusCircleMarker));var ht=ue(ue({},this.options.pathOptions),{},{radius:nt}),xt=L.circleMarker(A,ht);this._setPane(xt,"layerPane"),this._finishLayer(xt),xt.addTo(this._map.pm._getContainingLayer()),xt.pm&&xt.pm._updateHiddenPolyCircle(),this._fireCreate(xt),this.disable(),this.options.continueDrawing&&this.enable()}},_getNewDestinationOfHintMarker:function(){var M=this._hintMarker.getLatLng();if(this.options.editable){if(!this._layerGroup.hasLayer(this._centerMarker))return M;var A=this._centerMarker.getLatLng(),j=this._map.project(A).distanceTo(this._map.project(M));this.options.minRadiusCircleMarker&&j<this.options.minRadiusCircleMarker?M=W(this._map,A,M,this._pxRadiusToMeter(this.options.minRadiusCircleMarker)):this.options.maxRadiusCircleMarker&&j>this.options.maxRadiusCircleMarker&&(M=W(this._map,A,M,this._pxRadiusToMeter(this.options.maxRadiusCircleMarker)))}return M},_handleHintMarkerSnapping:function(){if(this.options.editable){if(this._hintMarker._snapped){var M=this._centerMarker.getLatLng(),A=this._hintMarker.getLatLng(),j=this._map.project(M).distanceTo(this._map.project(A));this._layerGroup.hasLayer(this._centerMarker)&&(this.options.minRadiusCircleMarker&&j<this.options.minRadiusCircleMarker||this.options.maxRadiusCircleMarker&&j>this.options.maxRadiusCircleMarker)&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng)}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},_pxRadiusToMeter:function(M){var A=this._centerMarker.getLatLng(),j=this._map.project(A),nt=L.point(j.x+M,j.y);return this._map.unproject(nt).distanceTo(A)},setStyle:function(){var M,A,j={};L.extend(j,this.options.templineStyle),this.options.editable&&(j.radius=0),(M=this._layer)===null||M===void 0||M.setStyle(j),(A=this._hintline)===null||A===void 0||A.setStyle(this.options.hintlineStyle)}});let ae=function(M){if(!M)throw new Error("geojson is required");var A=[];return jt(M,function(j){(function(nt,ht){var xt=[],Lt=nt.geometry;if(Lt!==null){switch(Lt.type){case"Polygon":xt=Le(Lt);break;case"LineString":xt=[Le(Lt)]}xt.forEach(function(Rt){var Pt=function(Nt,Vt){var ne=[];return Nt.reduce(function(Zt,ge){var Ce,Ne,be,gr,dr,xi,nn=Gt([Zt,ge],Vt);return nn.bbox=(Ne=ge,be=(Ce=Zt)[0],gr=Ce[1],dr=Ne[0],xi=Ne[1],[be<dr?be:dr,gr<xi?gr:xi,be>dr?be:dr,gr>xi?gr:xi]),ne.push(nn),ge}),ne}(Rt,nt.properties);Pt.forEach(function(Nt){Nt.id=ht.length,ht.push(Nt)})})}})(j,A)}),Jt(A)};var Qe=o(1787);function se(M,A){var j=Le(M),nt=Le(A);if(j.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(nt.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var ht=j[0][0],xt=j[0][1],Lt=j[1][0],Rt=j[1][1],Pt=nt[0][0],Nt=nt[0][1],Vt=nt[1][0],ne=nt[1][1],Zt=(ne-Nt)*(Lt-ht)-(Vt-Pt)*(Rt-xt),ge=(Vt-Pt)*(xt-Nt)-(ne-Nt)*(ht-Pt),Ce=(Lt-ht)*(xt-Nt)-(Rt-xt)*(ht-Pt);if(Zt===0)return null;var Ne=ge/Zt,be=Ce/Zt;return Ne>=0&&Ne<=1&&be>=0&&be<=1?zt([ht+Ne*(Lt-ht),xt+Ne*(Rt-xt)]):null}let ve=function(M,A){var j={},nt=[];if(M.type==="LineString"&&(M=Ot(M)),A.type==="LineString"&&(A=Ot(A)),M.type==="Feature"&&A.type==="Feature"&&M.geometry!==null&&A.geometry!==null&&M.geometry.type==="LineString"&&A.geometry.type==="LineString"&&M.geometry.coordinates.length===2&&A.geometry.coordinates.length===2){var ht=se(M,A);return ht&&nt.push(ht),Jt(nt)}var xt=Qe();return xt.load(ae(A)),At(ae(M),function(Lt){At(xt.search(Lt),function(Rt){var Pt=se(Lt,Rt);if(Pt){var Nt=Le(Pt).join(",");j[Nt]||(j[Nt]=!0,nt.push(Pt))}})}),Jt(nt)},$e=function(M,A,j){j===void 0&&(j={});var nt=ai(M),ht=ai(A),xt=Ut(ht[1]-nt[1]),Lt=Ut(ht[0]-nt[0]),Rt=Ut(nt[1]),Pt=Ut(ht[1]),Nt=Math.pow(Math.sin(xt/2),2)+Math.pow(Math.sin(Lt/2),2)*Math.cos(Rt)*Math.cos(Pt);return Kt(2*Math.atan2(Math.sqrt(Nt),Math.sqrt(1-Nt)),j.units)},Ae=function(M){var A=M[0],j=M[1],nt=M[2],ht=M[3];if($e(M.slice(0,2),[nt,j])>=$e(M.slice(0,2),[A,ht])){var xt=(j+ht)/2;return[A,xt-(nt-A)/2,nt,xt+(nt-A)/2]}var Lt=(A+nt)/2;return[Lt-(ht-j)/2,j,Lt+(ht-j)/2,ht]};function fe(M){var A=[1/0,1/0,-1/0,-1/0];return We(M,function(j){A[0]>j[0]&&(A[0]=j[0]),A[1]>j[1]&&(A[1]=j[1]),A[2]<j[0]&&(A[2]=j[0]),A[3]<j[1]&&(A[3]=j[1])}),A}fe.default=fe;let Ye=fe,Ue=function(M,A){A===void 0&&(A={});var j=A.precision,nt=A.coordinates,ht=A.mutate;if(j=j==null||isNaN(j)?6:j,nt=nt==null||isNaN(nt)?3:nt,!M)throw new Error("<geojson> is required");if(typeof j!="number")throw new Error("<precision> must be a number");if(typeof nt!="number")throw new Error("<coordinates> must be a number");ht!==!1&&ht!==void 0||(M=JSON.parse(JSON.stringify(M)));var xt=Math.pow(10,j);return We(M,function(Lt){(function(Rt,Pt,Nt){Rt.length>Nt&&Rt.splice(Nt,Rt.length);for(var Vt=0;Vt<Rt.length;Vt++)Rt[Vt]=Math.round(Rt[Vt]*Pt)/Pt})(Lt,xt,nt)}),M};function ii(M,A,j){if(j===void 0&&(j={}),j.final===!0)return function(ne,Zt){var ge=ii(Zt,ne);return ge=(ge+180)%360}(M,A);var nt=ai(M),ht=ai(A),xt=Ut(nt[0]),Lt=Ut(ht[0]),Rt=Ut(nt[1]),Pt=Ut(ht[1]),Nt=Math.sin(Lt-xt)*Math.cos(Pt),Vt=Math.cos(Rt)*Math.sin(Pt)-Math.sin(Rt)*Math.cos(Pt)*Math.cos(Lt-xt);return Xt(Math.atan2(Nt,Vt))}function Ke(M,A,j,nt){nt===void 0&&(nt={});var ht=ai(M),xt=Ut(ht[0]),Lt=Ut(ht[1]),Rt=Ut(j),Pt=ie(A,nt.units),Nt=Math.asin(Math.sin(Lt)*Math.cos(Pt)+Math.cos(Lt)*Math.sin(Pt)*Math.cos(Rt));return zt([Xt(xt+Math.atan2(Math.sin(Rt)*Math.sin(Pt)*Math.cos(Lt),Math.cos(Pt)-Math.sin(Lt)*Math.sin(Nt))),Xt(Nt)],nt.properties)}let fr=function(M,A,j){j===void 0&&(j={});var nt=zt([1/0,1/0],{dist:1/0}),ht=0;return jt(M,function(xt){for(var Lt=Le(xt),Rt=0;Rt<Lt.length-1;Rt++){var Pt=zt(Lt[Rt]);Pt.properties.dist=$e(A,Pt,j);var Nt=zt(Lt[Rt+1]);Nt.properties.dist=$e(A,Nt,j);var Vt=$e(Pt,Nt,j),ne=Math.max(Pt.properties.dist,Nt.properties.dist),Zt=ii(Pt,Nt),ge=Ke(A,ne,Zt+90,j),Ce=Ke(A,ne,Zt-90,j),Ne=ve(Gt([ge.geometry.coordinates,Ce.geometry.coordinates]),Gt([Pt.geometry.coordinates,Nt.geometry.coordinates])),be=null;Ne.features.length>0&&((be=Ne.features[0]).properties.dist=$e(A,be,j),be.properties.location=ht+$e(Pt,be,j)),Pt.properties.dist<nt.properties.dist&&((nt=Pt).properties.index=Rt,nt.properties.location=ht),Nt.properties.dist<nt.properties.dist&&((nt=Nt).properties.index=Rt+1,nt.properties.location=ht+Vt),be&&be.properties.dist<nt.properties.dist&&((nt=be).properties.index=Rt),ht+=Vt}}),nt};function Je(M,A){var j=[],nt=Qe();return jt(A,function(ht){if(j.forEach(function(Rt,Pt){Rt.id=Pt}),j.length){var xt=nt.search(ht);if(xt.features.length){var Lt=lr(ht,xt);j=j.filter(function(Rt){return Rt.id!==Lt.id}),nt.remove(Lt),At(oi(Lt,ht),function(Rt){j.push(Rt),nt.insert(Rt)})}}else(j=oi(M,ht).features).forEach(function(Rt){Rt.bbox||(Rt.bbox=Ae(Ye(Rt)))}),nt.load(Jt(j))}),Jt(j)}function oi(M,A){var j=[],nt=Le(M)[0],ht=Le(M)[M.geometry.coordinates.length-1];if(Mi(nt,ai(A))||Mi(ht,ai(A)))return Jt([M]);var xt=Qe(),Lt=ae(M);xt.load(Lt);var Rt=xt.search(A);if(!Rt.features.length)return Jt([M]);var Pt=lr(A,Rt),Nt=function(Vt,ne,Zt){var ge=Zt;return At(Vt,function(Ce,Ne){ge=Ne===0&&Zt===void 0?Ce:ne(ge,Ce,Ne)}),ge}(Lt,function(Vt,ne,Zt){var ge=Le(ne)[1],Ce=ai(A);return Zt===Pt.id?(Vt.push(Ce),j.push(Gt(Vt)),Mi(Ce,ge)?[Ce]:[Ce,ge]):(Vt.push(ge),Vt)},[nt]);return Nt.length>1&&j.push(Gt(Nt)),Jt(j)}function lr(M,A){if(!A.features.length)throw new Error("lines must contain features");if(A.features.length===1)return A.features[0];var j,nt=1/0;return At(A,function(ht){var xt=fr(ht,M).properties.dist;xt<nt&&(j=ht,nt=xt)}),j}function Mi(M,A){return M[0]===A[0]&&M[1]===A[1]}let Tt=function(M,A){if(!M)throw new Error("line is required");if(!A)throw new Error("splitter is required");var j=Qi(M),nt=Qi(A);if(j!=="LineString")throw new Error("line must be LineString");if(nt==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(nt==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var ht=Ue(A,{precision:7});switch(nt){case"Point":return oi(M,ht);case"MultiPoint":return Je(M,ht);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Je(M,ve(M,ht))}};function Ht(M,A,j){if(j===void 0&&(j={}),!M)throw new Error("point is required");if(!A)throw new Error("polygon is required");var nt=ai(M),ht=Oe(A),xt=ht.type,Lt=A.bbox,Rt=ht.coordinates;if(Lt&&function(Zt,ge){return ge[0]<=Zt[0]&&ge[1]<=Zt[1]&&ge[2]>=Zt[0]&&ge[3]>=Zt[1]}(nt,Lt)===!1)return!1;xt==="Polygon"&&(Rt=[Rt]);for(var Pt=!1,Nt=0;Nt<Rt.length&&!Pt;Nt++)if(re(nt,Rt[Nt][0],j.ignoreBoundary)){for(var Vt=!1,ne=1;ne<Rt[Nt].length&&!Vt;)re(nt,Rt[Nt][ne],!j.ignoreBoundary)&&(Vt=!0),ne++;Vt||(Pt=!0)}return Pt}function re(M,A,j){var nt=!1;A[0][0]===A[A.length-1][0]&&A[0][1]===A[A.length-1][1]&&(A=A.slice(0,A.length-1));for(var ht=0,xt=A.length-1;ht<A.length;xt=ht++){var Lt=A[ht][0],Rt=A[ht][1],Pt=A[xt][0],Nt=A[xt][1];if(M[1]*(Lt-Pt)+Rt*(Pt-M[0])+Nt*(M[0]-Lt)==0&&(Lt-M[0])*(Pt-M[0])<=0&&(Rt-M[1])*(Nt-M[1])<=0)return!j;Rt>M[1]!=Nt>M[1]&&M[0]<(Pt-Lt)*(M[1]-Rt)/(Nt-Rt)+Lt&&(nt=!nt)}return nt}function Qt(M,A,j,nt,ht){var xt=j[0],Lt=j[1],Rt=M[0],Pt=M[1],Nt=A[0],Vt=A[1],ne=Nt-Rt,Zt=Vt-Pt,ge=(j[0]-Rt)*Zt-(j[1]-Pt)*ne;if(ht!==null){if(Math.abs(ge)>ht)return!1}else if(ge!==0)return!1;return nt?nt==="start"?Math.abs(ne)>=Math.abs(Zt)?ne>0?Rt<xt&&xt<=Nt:Nt<=xt&&xt<Rt:Zt>0?Pt<Lt&&Lt<=Vt:Vt<=Lt&&Lt<Pt:nt==="end"?Math.abs(ne)>=Math.abs(Zt)?ne>0?Rt<=xt&&xt<Nt:Nt<xt&&xt<=Rt:Zt>0?Pt<=Lt&&Lt<Vt:Vt<Lt&&Lt<=Pt:nt==="both"&&(Math.abs(ne)>=Math.abs(Zt)?ne>0?Rt<xt&&xt<Nt:Nt<xt&&xt<Rt:Zt>0?Pt<Lt&&Lt<Vt:Vt<Lt&&Lt<Pt):Math.abs(ne)>=Math.abs(Zt)?ne>0?Rt<=xt&&xt<=Nt:Nt<=xt&&xt<=Rt:Zt>0?Pt<=Lt&&Lt<=Vt:Vt<=Lt&&Lt<=Pt}let he=function(M,A,j){j===void 0&&(j={});for(var nt=ai(M),ht=Le(A),xt=0;xt<ht.length-1;xt++){var Lt=!1;if(j.ignoreEndVertices&&(xt===0&&(Lt="start"),xt===ht.length-2&&(Lt="end"),xt===0&&xt+1===ht.length-1&&(Lt="both")),Qt(ht[xt],ht[xt+1],nt,Lt,typeof j.epsilon>"u"?null:j.epsilon))return!0}return!1};function Ee(M,A){var j=Oe(M),nt=Oe(A),ht=j.type,xt=nt.type,Lt=j.coordinates,Rt=nt.coordinates;switch(ht){case"Point":if(xt==="Point")return ti(Lt,Rt);throw new Error("feature2 "+xt+" geometry not supported");case"MultiPoint":switch(xt){case"Point":return function(Pt,Nt){var Vt,ne=!1;for(Vt=0;Vt<Pt.coordinates.length;Vt++)if(ti(Pt.coordinates[Vt],Nt.coordinates)){ne=!0;break}return ne}(j,nt);case"MultiPoint":return function(Pt,Nt){for(var Vt=0,ne=Nt.coordinates;Vt<ne.length;Vt++){for(var Zt=ne[Vt],ge=!1,Ce=0,Ne=Pt.coordinates;Ce<Ne.length;Ce++)if(ti(Zt,Ne[Ce])){ge=!0;break}if(!ge)return!1}return!0}(j,nt);default:throw new Error("feature2 "+xt+" geometry not supported")}case"LineString":switch(xt){case"Point":return he(nt,j,{ignoreEndVertices:!0});case"LineString":return function(Pt,Nt){for(var Vt=!1,ne=0,Zt=Nt.coordinates;ne<Zt.length;ne++){var ge=Zt[ne];if(he({type:"Point",coordinates:ge},Pt,{ignoreEndVertices:!0})&&(Vt=!0),!he({type:"Point",coordinates:ge},Pt,{ignoreEndVertices:!1}))return!1}return Vt}(j,nt);case"MultiPoint":return function(Pt,Nt){for(var Vt=!1,ne=0,Zt=Nt.coordinates;ne<Zt.length;ne++){var ge=Zt[ne];if(he(ge,Pt,{ignoreEndVertices:!0})&&(Vt=!0),!he(ge,Pt))return!1}return!!Vt}(j,nt);default:throw new Error("feature2 "+xt+" geometry not supported")}case"Polygon":switch(xt){case"Point":return Ht(nt,j,{ignoreBoundary:!0});case"LineString":return function(Pt,Nt){var Vt=!1,ne=0,Zt=Ye(Pt),ge=Ye(Nt);if(!Ie(Zt,ge))return!1;for(;ne<Nt.coordinates.length-1;ne++)if(Ht({type:"Point",coordinates:Ge(Nt.coordinates[ne],Nt.coordinates[ne+1])},Pt,{ignoreBoundary:!0})){Vt=!0;break}return Vt}(j,nt);case"Polygon":return function(Pt,Nt){if(Pt.type==="Feature"&&Pt.geometry===null||Nt.type==="Feature"&&Nt.geometry===null)return!1;var Vt=Ye(Pt),ne=Ye(Nt);if(!Ie(Vt,ne))return!1;for(var Zt=Oe(Nt).coordinates,ge=0,Ce=Zt;ge<Ce.length;ge++)for(var Ne=0,be=Ce[ge];Ne<be.length;Ne++)if(!Ht(be[Ne],Pt))return!1;return!0}(j,nt);case"MultiPoint":return function(Pt,Nt){for(var Vt=0,ne=Nt.coordinates;Vt<ne.length;Vt++)if(!Ht(ne[Vt],Pt,{ignoreBoundary:!0}))return!1;return!0}(j,nt);default:throw new Error("feature2 "+xt+" geometry not supported")}default:throw new Error("feature1 "+ht+" geometry not supported")}}function Ie(M,A){return!(M[0]>A[0])&&!(M[2]<A[2])&&!(M[1]>A[1])&&!(M[3]<A[3])}function ti(M,A){return M[0]===A[0]&&M[1]===A[1]}function Ge(M,A){return[(M[0]+A[0])/2,(M[1]+A[1])/2]}var we=o(2676),pe=o.n(we);function yi(M){var A={type:"Feature"};return A.geometry=M,A}function ri(M){return M.type==="Feature"?M.geometry:M}function li(M){return M&&M.geometry&&M.geometry.coordinates?M.geometry.coordinates:M}function wi(M){return yi({type:"Polygon",coordinates:M})}function me(M){return yi({type:"MultiPolygon",coordinates:M})}function ui(M){return Array.isArray(M)?1+ui(M[0]):-1}function yr(M){M instanceof L.Polyline&&(M=M.toGeoJSON(15));var A=li(M),j=ui(A),nt=[];return j>1?A.forEach(function(ht){nt.push(function(xt){return yi({type:"LineString",coordinates:xt})}(ht))}):nt.push(M),nt}function Ur(M){var A=[];return M.eachLayer(function(j){A.push(li(j.toGeoJSON(15)))}),function(j){return yi({type:"MultiLineString",coordinates:j})}(A)}function Se(M,A){return function(j){if(Array.isArray(j))return j}(M)||function(j,nt){var ht=j==null?null:typeof Symbol<"u"&&j[Symbol.iterator]||j["@@iterator"];if(ht!=null){var xt,Lt,Rt=[],Pt=!0,Nt=!1;try{for(ht=ht.call(j);!(Pt=(xt=ht.next()).done)&&(Rt.push(xt.value),!nt||Rt.length!==nt);Pt=!0);}catch(Vt){Nt=!0,Lt=Vt}finally{try{Pt||ht.return==null||ht.return()}finally{if(Nt)throw Lt}}return Rt}}(M,A)||function(j,nt){if(j){if(typeof j=="string")return Mn(j,nt);var ht=Object.prototype.toString.call(j).slice(8,-1);if(ht==="Object"&&j.constructor&&(ht=j.constructor.name),ht==="Map"||ht==="Set")return Array.from(j);if(ht==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ht))return Mn(j,nt)}}(M,A)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Mn(M,A){(A==null||A>M.length)&&(A=M.length);for(var j=0,nt=new Array(A);j<A;j++)nt[j]=M[j];return nt}function jn(M){return function(A){if(Array.isArray(A))return ni(A)}(M)||function(A){if(typeof Symbol<"u"&&A[Symbol.iterator]!=null||A["@@iterator"]!=null)return Array.from(A)}(M)||function(A,j){if(A){if(typeof A=="string")return ni(A,j);var nt=Object.prototype.toString.call(A).slice(8,-1);if(nt==="Object"&&A.constructor&&(nt=A.constructor.name),nt==="Map"||nt==="Set")return Array.from(A);if(nt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(nt))return ni(A,j)}}(M)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ni(M,A){(A==null||A>M.length)&&(A=M.length);for(var j=0,nt=new Array(A);j<A;j++)nt[j]=M[j];return nt}pt.Cut=pt.Polygon.extend({initialize:function(M){this._map=M,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape:function(){var M=this;if(this._editedLayers=[],(this.options.allowSelfIntersection||(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),!this._doesSelfIntersect))&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){var A=this._layer.getLatLngs();if(!(A.length<=2)){var j=L.polygon(A,this.options.pathOptions);j._latlngInfos=this._layer._latlngInfo,this.cut(j),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(function(nt){var ht=nt.layer,xt=nt.originalLayer;M._fireCut(xt,ht,xt),M._fireCut(M._map,ht,xt),xt.pm._fireEdit()}),this._editedLayers=[],this.disable(),this.options.continueDrawing&&this.enable()}}},cut:function(M){var A=this,j=this._map._layers,nt=M._latlngInfos||[];Object.keys(j).map(function(ht){return j[ht]}).filter(function(ht){return ht.pm}).filter(function(ht){return!ht._pmTempLayer}).filter(function(ht){return!L.PM.optIn&&!ht.options.pmIgnore||L.PM.optIn&&ht.options.pmIgnore===!1}).filter(function(ht){return ht instanceof L.Polyline}).filter(function(ht){return ht!==M}).filter(function(ht){return ht.pm.options.allowCutting}).filter(function(ht){return!(A.options.layersToCut&&L.Util.isArray(A.options.layersToCut)&&A.options.layersToCut.length>0)||A.options.layersToCut.indexOf(ht)>-1}).filter(function(ht){return!A._layerGroup.hasLayer(ht)}).filter(function(ht){try{var xt=!!ve(M.toGeoJSON(15),ht.toGeoJSON(15)).features.length>0;return xt||ht instanceof L.Polyline&&!(ht instanceof L.Polygon)?xt:(Lt=M.toGeoJSON(15),Rt=ht.toGeoJSON(15),Pt=ri(Lt),Nt=ri(Rt),!((Vt=pe().intersection(Pt.coordinates,Nt.coordinates)).length===0||!(Vt.length===1?wi(Vt[0]):me(Vt))))}catch{return ht instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}var Lt,Rt,Pt,Nt,Vt}).forEach(function(ht){var xt;if(ht instanceof L.Polygon){var Lt=(xt=L.polygon(ht.getLatLngs())).getLatLngs();nt.forEach(function(Zt){if(Zt&&Zt.snapInfo){var ge=Zt.latlng,Ce=A._calcClosestLayer(ge,[xt]);if(Ce&&Ce.segment&&Ce.distance<A.options.snapDistance){var Ne=Ce.segment;if(Ne&&Ne.length===2){var be=L.PM.Utils._getIndexFromSegment(Lt,Ne),gr=be.indexPath,dr=be.parentPath,xi=be.newIndex;(gr.length>1?R()(Lt,dr):Lt).splice(xi,0,ge)}}}})}else xt=ht;var Rt=A._cutLayer(M,xt),Pt=L.geoJSON(Rt,ht.options);if(Pt.getLayers().length===1){var Nt=Pt.getLayers();Pt=Se(Nt,1)[0]}A._setPane(Pt,"layerPane");var Vt=Pt.addTo(A._map.pm._getContainingLayer());if(Vt.pm.enable(ht.pm.options),Vt.pm.disable(),ht._pmTempLayer=!0,M._pmTempLayer=!0,ht.remove(),ht.removeFrom(A._map.pm._getContainingLayer()),M.remove(),M.removeFrom(A._map.pm._getContainingLayer()),Vt.getLayers&&Vt.getLayers().length===0&&A._map.pm.removeLayer({target:Vt}),Vt instanceof L.LayerGroup&&Vt.eachLayer(function(Zt){A._addDrawnLayerProp(Zt)}),A._addDrawnLayerProp(Vt),A.options.layersToCut&&L.Util.isArray(A.options.layersToCut)&&A.options.layersToCut.length>0){var ne=A.options.layersToCut.indexOf(ht);ne>-1&&A.options.layersToCut.splice(ne,1)}A._editedLayers.push({layer:Vt,originalLayer:ht})})},_cutLayer:function(M,A){var j,nt,ht,xt,Lt,Rt,Pt=L.geoJSON();if(A instanceof L.Polygon)nt=A.toGeoJSON(15),ht=M.toGeoJSON(15),xt=ri(nt),Lt=ri(ht),j=(Rt=pe().difference(xt.coordinates,Lt.coordinates)).length===0?null:Rt.length===1?wi(Rt[0]):me(Rt);else{var Nt=yr(A);Nt.forEach(function(Vt){var ne=Tt(Vt,M.toGeoJSON(15));(ne&&ne.features.length>0?L.geoJSON(ne):L.geoJSON(Vt)).getLayers().forEach(function(Zt){Ee(M.toGeoJSON(15),Zt.toGeoJSON(15))||Zt.addTo(Pt)})}),j=Nt.length>1?Ur(Pt):Pt.toGeoJSON(15)}return j},_change:L.Util.falseFn}),pt.Text=pt.extend({initialize:function(M){this._map=M,this._shape="Text",this.toolbarButtonName="drawText"},enable:function(M){L.Util.setOptions(this,M),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(it("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(M){this.enabled()?this.disable():this.enable(M)},_syncHintMarker:function(M){if(this._hintMarker.setLatLng(M.latlng),this.options.snappable){var A=M;A.target=this._hintMarker,this._handleSnapping(A)}},_createMarker:function(M){var A;if(M.latlng&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){this._hintMarker._snapped||this._hintMarker.setLatLng(M.latlng);var j=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(A=this.options.textOptions)!==null&&A!==void 0&&A.className){var nt,ht=this.options.textOptions.className.split(" ");(nt=this.textArea.classList).add.apply(nt,jn(ht))}var xt=this._createTextIcon(this.textArea),Lt=new L.Marker(j,{textMarker:!0,_textMarkerOverPM:!0,icon:xt});if(this._setPane(Lt,"markerPane"),this._finishLayer(Lt),Lt.pm||(Lt.options.draggable=!1),Lt.addTo(this._map.pm._getContainingLayer()),Lt.pm){var Rt,Pt,Nt,Vt,ne;Lt.pm.textArea=this.textArea,L.setOptions(Lt.pm,{removeIfEmpty:(Rt=(Pt=this.options.textOptions)===null||Pt===void 0?void 0:Pt.removeIfEmpty)===null||Rt===void 0||Rt});var Zt=(Nt=(Vt=this.options.textOptions)===null||Vt===void 0?void 0:Vt.focusAfterDraw)===null||Nt===void 0||Nt;Lt.pm._createTextMarker(Zt),(ne=this.options.textOptions)!==null&&ne!==void 0&&ne.text&&Lt.pm.setText(this.options.textOptions.text)}this._fireCreate(Lt),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this.enable()}},_createTextArea:function(){var M=document.createElement("textarea");return M.autofocus=!0,M.readOnly=!0,M.classList.add("pm-textarea","pm-disabled"),M},_createTextIcon:function(M){return L.divIcon({className:"pm-text-marker",html:M})}});let ze={enableLayerDrag:function(){if(this.options.draggable&&this._layer._map){this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,wt(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;var M=this._getDOMElem();M&&(wt(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(M)):L.DomEvent.on(M,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()}},disableLayerDrag:function(){this._layerDragEnabled=!1,wt(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();var M=this._getDOMElem();M&&(wt(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(M)):L.DomEvent.off(M,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging:function(){return this._dragging},layerDragEnabled:function(){return!!this._layerDragEnabled},_simulateMouseDownEvent:function(M){var A=M.touches?M.touches[0]:M,j={originalEvent:A,target:this._layer};return j.containerPoint=this._map.mouseEventToContainerPoint(A),j.latlng=this._map.containerPointToLatLng(j.containerPoint),this._dragMixinOnMouseDown(j),!1},_simulateMouseMoveEvent:function(M){var A=M.touches?M.touches[0]:M,j={originalEvent:A,target:this._layer};return j.containerPoint=this._map.mouseEventToContainerPoint(A),j.latlng=this._map.containerPointToLatLng(j.containerPoint),this._dragMixinOnMouseMove(j),!1},_simulateMouseUpEvent:function(M){var A={originalEvent:M.touches?M.touches[0]:M,target:this._layer};return M.type.indexOf("touch")===-1&&(A.containerPoint=this._map.mouseEventToContainerPoint(M),A.latlng=this._map.containerPointToLatLng(A.containerPoint)),this._dragMixinOnMouseUp(A),!1},_dragMixinOnMouseDown:function(M){if(!(M.originalEvent.button>0)){this._overwriteEventIfItComesFromMarker(M);var A=M._fromLayerSync,j=this._syncLayers("_dragMixinOnMouseDown",M);this._layer instanceof L.Marker&&(!this.options.snappable||A||j?this._disableSnapping():this._initSnappableMarkers()),this._layer instanceof L.CircleMarker&&!(this._layer instanceof L.Circle)&&(!this.options.snappable||A||j?this._layer.pm.options.editable?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag():this._layer.pm.options.editable||this._initSnappableMarkersDrag()),this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=M.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)}},_dragMixinOnMouseMove:function(M){this._overwriteEventIfItComesFromMarker(M);var A=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",M),this._dragging||(this._dragging=!0,L.DomUtil.addClass(A,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=M.latlng),this._onLayerDrag(M),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp:function(M){var A=this,j=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",M),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),!!this._dragging&&(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(function(){A._dragging=!1,j&&L.DomUtil.removeClass(j,"leaflet-pm-dragging"),A._fireDragEnd(),A._fireEdit(),A._layerEdited=!0},10),!0)},_onLayerDrag:function(M){var A=M.latlng,j=A.lat-this._tempDragCoord.lat,nt=A.lng-this._tempDragCoord.lng,ht=function Vt(ne){return ne.map(function(Zt){if(Array.isArray(Zt))return Vt(Zt);var ge={lat:Zt.lat+j,lng:Zt.lng+nt};return(Zt.alt||Zt.alt===0)&&(ge.alt=Zt.alt),ge})};if(this._layer instanceof L.Circle||this._layer instanceof L.CircleMarker&&this._layer.options.editable){var xt=ht([this._layer.getLatLng()]);this._layer.setLatLng(xt[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){var Lt=this._layer.getLatLng();this._layer._snapped&&(Lt=this._layer._orgLatLng);var Rt=ht([Lt]);this._layer.setLatLng(Rt[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){var Pt=ht([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(Pt),this._fireChange(this._layer.getBounds(),"Edit")}else{var Nt=ht(this._layer.getLatLngs());this._layer.setLatLngs(Nt),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=A,M.layer=this._layer,this._fireDrag(M)},addDraggingClass:function(){var M=this._getDOMElem();M&&L.DomUtil.addClass(M,"leaflet-pm-draggable")},removeDraggingClass:function(){var M=this._getDOMElem();M&&L.DomUtil.removeClass(M,"leaflet-pm-draggable")},_getDOMElem:function(){var M=null;return this._layer._path?M=this._layer._path:this._layer._renderer&&this._layer._renderer._container?M=this._layer._renderer._container:this._layer._image?M=this._layer._image:this._layer._icon&&(M=this._layer._icon),M},_overwriteEventIfItComesFromMarker:function(M){M.target.getLatLng&&(!M.target._radius||M.target._radius<=10)&&(M.containerPoint=this._map.mouseEventToContainerPoint(M.originalEvent),M.latlng=this._map.containerPointToLatLng(M.containerPoint))},_syncLayers:function(M,A){var j=this;if(this.enabled())return!1;if(!A._fromLayerSync&&this._layer===A.target&&this.options.syncLayersOnDrag){A._fromLayerSync=!0;var nt=[];if(L.Util.isArray(this.options.syncLayersOnDrag))nt=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(function(Lt){Lt instanceof L.LayerGroup&&(nt=nt.concat(Lt.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(var ht in this._parentLayerGroup){var xt=this._parentLayerGroup[ht];xt.pm&&(nt=xt.pm.getLayers(!0))}return L.Util.isArray(nt)&&nt.length>0&&(nt=nt.filter(function(Lt){return!!Lt.pm}).filter(function(Lt){return!!Lt.pm.options.draggable})).forEach(function(Lt){Lt!==j._layer&&Lt.pm[M]&&(Lt._snapped=!1,Lt.pm[M](A))}),nt.length>0}return!1},_stopDOMImageDrag:function(M){return M.preventDefault(),!1}};function kr(M,A,j){var nt=j.getMaxZoom();if(nt===1/0&&(nt=j.getZoom()),L.Util.isArray(M)){var ht=[];return M.forEach(function(xt){ht.push(kr(xt,A,j))}),ht}return M instanceof L.LatLng?function(xt,Lt,Rt,Pt){return Rt.unproject(Lt.transform(Rt.project(xt,Pt)),Pt)}(M,A,j,nt):null}function Tr(M,A){A instanceof L.Layer&&(A=A.getLatLng());var j=M.getMaxZoom();return j===1/0&&(j=M.getZoom()),M.project(A,j)}function gn(M,A){var j=M.getMaxZoom();return j===1/0&&(j=M.getZoom()),M.unproject(A,j)}var oe={_onRotateStart:function(M){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=Tr(this._map,this._rotationOriginLatLng),this._rotationStartPoint=Tr(this._map,M.target.getLatLng()),this._initialRotateLatLng=rt(this._layer),this._startAngle=this.getAngle();var A=rt(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,A),this._fireRotationStart(this._map,A)},_onRotate:function(M){var A=Tr(this._map,M.target.getLatLng()),j=this._rotationStartPoint,nt=this._rotationOriginPoint,ht=Math.atan2(A.y-nt.y,A.x-nt.x)-Math.atan2(j.y-nt.y,j.x-nt.x);this._layer.setLatLngs(this._rotateLayer(ht,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));var xt=this;(function Nt(Vt){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],Zt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;if(Zt>-1&&ne.push(Zt),L.Util.isArray(Vt[0]))Vt.forEach(function(Ce,Ne){return Nt(Ce,ne.slice(),Ne)});else{var ge=R()(xt._markers,ne);Vt.forEach(function(Ce,Ne){ge[Ne].setLatLng(Ce)})}})(this._layer.getLatLngs());var Lt=rt(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(ht,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));var Rt=180*ht/Math.PI,Pt=(Rt=Rt<0?Rt+360:Rt)+this._startAngle;this._setAngle(Pt),this._rotationLayer.pm._setAngle(Pt),this._fireRotation(this._rotationLayer,Rt,Lt),this._fireRotation(this._map,Rt,Lt),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd:function(){var M=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;var A=rt(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=rt(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,M,A),this._fireRotationEnd(this._map,M,A),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer:function(M,A,j,nt,ht){var xt=Tr(ht,j);return this._matrix=nt.clone().rotate(M,xt).flip(),kr(A,this._matrix,ht)},_setAngle:function(M){M=M<0?M+360:M,this._angle=M%360},_getRotationCenter:function(){var M=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),A=M.getCenter();return M.removeFrom(this._layer._map),A},enableRotate:function(){this.options.allowRotation?(this.rotateEnabled()&&this.disableRotate(),this._rotatePoly=L.polygon(this._layer.getLatLngs(),{fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0}),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=rt(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)):this.disableRotate()},disableRotate:function(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled:function(){return this._rotateEnabled},rotateLayer:function(M){var A=this.getAngle(),j=this._layer.getLatLngs(),nt=M*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(nt,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+M),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(nt,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());var ht=this.getAngle()-A;ht=ht<0?ht+360:ht,this._startAngle=A,this._fireRotation(this._layer,ht,j,this._layer),this._fireRotation(this._map||this._layer._map,ht,j,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle:function(M){var A=M-this.getAngle();this.rotateLayer(A)},getAngle:function(){return this._angle||0},setInitAngle:function(M){this._setAngle(M)}};let Rr=oe,gi=L.Class.extend({includes:[ze,lt,Rr,C],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0},setOptions:function(M){L.Util.setOptions(this,M)},getOptions:function(){return this.options},applyOptions:function(){},isPolygon:function(){return this._layer instanceof L.Polygon},getShape:function(){return this._shape},_setPane:function(M,A){A==="layerPane"?M.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":A==="vertexPane"?M.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":A==="markerPane"&&(M.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove:function(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation:function(M,A){var j=A.target,nt={layer:this._layer,marker:j,event:A},ht="";return M==="move"?ht="moveVertexValidation":M==="add"?ht="addVertexValidation":M==="remove"&&(ht="removeVertexValidation"),this.options[ht]&&typeof this.options[ht]=="function"&&!this.options[ht](nt)?(M==="move"&&(j._cancelDragEventChain=j.getLatLng()),!1):(j._cancelDragEventChain=null,!0)},_vertexValidationDrag:function(M){return!M._cancelDragEventChain||(M._latlng=M._cancelDragEventChain,M.update(),!1)},_vertexValidationDragEnd:function(M){return!M._cancelDragEventChain||(M._cancelDragEventChain=null,!1)}});function vr(M){return function(A){if(Array.isArray(A))return rn(A)}(M)||function(A){if(typeof Symbol<"u"&&A[Symbol.iterator]!=null||A["@@iterator"]!=null)return Array.from(A)}(M)||function(A,j){if(A){if(typeof A=="string")return rn(A,j);var nt=Object.prototype.toString.call(A).slice(8,-1);if(nt==="Object"&&A.constructor&&(nt=A.constructor.name),nt==="Map"||nt==="Set")return Array.from(A);if(nt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(nt))return rn(A,j)}}(M)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function rn(M,A){(A==null||A>M.length)&&(A=M.length);for(var j=0,nt=new Array(A);j<A;j++)nt[j]=M[j];return nt}gi.LayerGroup=L.Class.extend({initialize:function(M){var A=this;this._layerGroup=M,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(function(j){return A._initLayer(j)}),this._layerGroup.on("layeradd",L.Util.throttle(function(j){if(!j.layer._pmTempLayer){A._layers=A.getLayers();var nt=A._layers.filter(function(ht){return!ht.pm._parentLayerGroup||!(A._layerGroup._leaflet_id in ht.pm._parentLayerGroup)});nt.forEach(function(ht){A._initLayer(ht)}),nt.length>0&&A._getMap()&&A._getMap().pm.globalEditModeEnabled()&&A.enabled()&&A.enable(A.getOptions())}},100,this),this),this._layerGroup.on("layerremove",function(j){A._removeLayerFromGroup(j.target)},this),this._layerGroup.on("layerremove",L.Util.throttle(function(j){j.target._pmTempLayer||(A._layers=A.getLayers())},100,this),this)},enable:function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];A.length===0&&(this._layers=this.getLayers()),this._options=M,this._layers.forEach(function(j){j instanceof L.LayerGroup?A.indexOf(j._leaflet_id)===-1&&(A.push(j._leaflet_id),j.pm.enable(M,A)):j.pm.enable(M)})},disable:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];M.length===0&&(this._layers=this.getLayers()),this._layers.forEach(function(A){A instanceof L.LayerGroup?M.indexOf(A._leaflet_id)===-1&&(M.push(A._leaflet_id),A.pm.disable(M)):A.pm.disable()})},enabled:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];M.length===0&&(this._layers=this.getLayers());var A=this._layers.find(function(j){return j instanceof L.LayerGroup?M.indexOf(j._leaflet_id)===-1&&(M.push(j._leaflet_id),j.pm.enabled(M)):j.pm.enabled()});return!!A},toggleEdit:function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];A.length===0&&(this._layers=this.getLayers()),this._options=M,this._layers.forEach(function(j){j instanceof L.LayerGroup?A.indexOf(j._leaflet_id)===-1&&(A.push(j._leaflet_id),j.pm.toggleEdit(M,A)):j.pm.toggleEdit(M)})},_initLayer:function(M){var A=L.Util.stamp(this._layerGroup);M.pm._parentLayerGroup||(M.pm._parentLayerGroup={}),M.pm._parentLayerGroup[A]=this._layerGroup},_removeLayerFromGroup:function(M){if(M.pm&&M.pm._layerGroup){var A=L.Util.stamp(this._layerGroup);delete M.pm._layerGroup[A]}},dragging:function(){if(this._layers=this.getLayers(),this._layers){var M=this._layers.find(function(A){return A.pm.dragging()});return!!M}return!1},getOptions:function(){return this.options},_getMap:function(){var M;return this._map||((M=this._layers.find(function(A){return!!A._map}))===null||M===void 0?void 0:M._map)||null},getLayers:function(){var M=arguments.length>0&&arguments[0]!==void 0&&arguments[0],A=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],j=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],ht=[];return M?this._layerGroup.getLayers().forEach(function(xt){ht.push(xt),xt instanceof L.LayerGroup&&nt.indexOf(xt._leaflet_id)===-1&&(nt.push(xt._leaflet_id),ht=ht.concat(xt.pm.getLayers(!0,!0,!0,nt)))}):ht=this._layerGroup.getLayers(),j&&(ht=ht.filter(function(xt){return!(xt instanceof L.LayerGroup)})),A&&(ht=(ht=(ht=ht.filter(function(xt){return!!xt.pm})).filter(function(xt){return!xt._pmTempLayer})).filter(function(xt){return!L.PM.optIn&&!xt.options.pmIgnore||L.PM.optIn&&xt.options.pmIgnore===!1})),ht},setOptions:function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];A.length===0&&(this._layers=this.getLayers()),this.options=M,this._layers.forEach(function(j){j.pm&&(j instanceof L.LayerGroup?A.indexOf(j._leaflet_id)===-1&&(A.push(j._leaflet_id),j.pm.setOptions(M,A)):j.pm.setOptions(M))})}}),gi.Marker=gi.extend({_shape:"Marker",initialize:function(M){this._layer=M,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{draggable:!0};L.Util.setOptions(this,M),this.options.allowEditing&&this._layer._map?(this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()):this.disable()},disable:function(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled:function(){return this._enabled},toggleEdit:function(M){this.enabled()?this.disable():this.enable(M)},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker:function(M){var A=M.target;A.remove(),this._fireRemove(A),this._fireRemove(this._map,A)},_onDragEnd:function(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers:function(){var M=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0||this.options.snapSegment,M.off("pm:drag",this._handleSnapping,this),M.on("pm:drag",this._handleSnapping,this),M.off("pm:dragend",this._cleanupSnapping,this),M.on("pm:dragend",this._cleanupSnapping,this),M.off("pm:dragstart",this._unsnap,this),M.on("pm:dragstart",this._unsnap,this)},_disableSnapping:function(){var M=this._layer;M.off("pm:drag",this._handleSnapping,this),M.off("pm:dragend",this._cleanupSnapping,this),M.off("pm:dragstart",this._unsnap,this)}});let mr={filterMarkerGroup:function(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents:function(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache:function(){var M=[].concat(vr(this._markerGroup.getLayers()),vr(this.markerCache));this.markerCache=M.filter(function(A,j,nt){return nt.indexOf(A)===j})},renderLimits:function(M){var A=this;this.markerCache.forEach(function(j){M.includes(j)?A._markerGroup.addLayer(j):A._markerGroup.removeLayer(j)})},applyLimitFilters:function(M){var A=M.latlng,j=A===void 0?{lat:0,lng:0}:A;if(!this._preventRenderMarkers){var nt=vr(this._filterClosestMarkers(j));this.renderLimits(nt)}},_filterClosestMarkers:function(M){var A=vr(this.markerCache),j=this.options.limitMarkersToCount;return j===-1?A:(A.sort(function(nt,ht){return nt._latlng.distanceTo(M)-ht._latlng.distanceTo(M)}),A.filter(function(nt,ht){return!(j>-1)||ht<j}))},_preventRenderMarkers:!1,_preventRenderingMarkers:function(M){this._preventRenderMarkers=!!M}};function hi(M,A){return function(j){if(Array.isArray(j))return j}(M)||function(j,nt){var ht=j==null?null:typeof Symbol<"u"&&j[Symbol.iterator]||j["@@iterator"];if(ht!=null){var xt,Lt,Rt=[],Pt=!0,Nt=!1;try{for(ht=ht.call(j);!(Pt=(xt=ht.next()).done)&&(Rt.push(xt.value),!nt||Rt.length!==nt);Pt=!0);}catch(Vt){Nt=!0,Lt=Vt}finally{try{Pt||ht.return==null||ht.return()}finally{if(Nt)throw Lt}}return Rt}}(M,A)||function(j,nt){if(j){if(typeof j=="string")return fi(j,nt);var ht=Object.prototype.toString.call(j).slice(8,-1);if(ht==="Object"&&j.constructor&&(ht=j.constructor.name),ht==="Map"||ht==="Set")return Array.from(j);if(ht==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ht))return fi(j,nt)}}(M,A)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function fi(M,A){(A==null||A>M.length)&&(A=M.length);for(var j=0,nt=new Array(A);j<A;j++)nt[j]=M[j];return nt}function Si(M){return function(A){if(Array.isArray(A))return Vr(A)}(M)||function(A){if(typeof Symbol<"u"&&A[Symbol.iterator]!=null||A["@@iterator"]!=null)return Array.from(A)}(M)||function(A,j){if(A){if(typeof A=="string")return Vr(A,j);var nt=Object.prototype.toString.call(A).slice(8,-1);if(nt==="Object"&&A.constructor&&(nt=A.constructor.name),nt==="Map"||nt==="Set")return Array.from(A);if(nt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(nt))return Vr(A,j)}}(M)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Vr(M,A){(A==null||A>M.length)&&(A=M.length);for(var j=0,nt=new Array(A);j<A;j++)nt[j]=M[j];return nt}gi.Line=gi.extend({includes:[mr],_shape:"Line",initialize:function(M){this._layer=M,this._enabled=!1},enable:function(M){L.Util.setOptions(this,M),this._map=this._layer._map,this._map&&(this.options.allowEditing?(this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()):this.disable())},disable:function(){if(this.enabled()&&!this._dragging){this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);var M=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(M,"leaflet-pm-draggable"),this._map.hasLayer(this._layer)&&!this.hasSelfIntersection()||L.DomUtil.removeClass(M,"leaflet-pm-invalid"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()}},enabled:function(){return this._enabled},toggleEdit:function(M){return this.enabled()?this.disable():this.enable(M),this.enabled()},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers:function(){var M=this,A=this._map,j=this._layer.getLatLngs();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,this._markers=function nt(ht){if(Array.isArray(ht[0]))return ht.map(nt,M);var xt=ht.map(M._createMarker,M);return M.options.hideMiddleMarkers!==!0&&ht.map(function(Lt,Rt){var Pt=M.isPolygon()?(Rt+1)%ht.length:Rt+1;return M._createMiddleMarker(xt[Rt],xt[Pt])}),xt}(j),this.filterMarkerGroup(),A.addLayer(this._markerGroup)},_createMarker:function(M){var A=new L.Marker(M,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(A,"vertexPane"),A._pmTempLayer=!0,this.options.rotate?(A.on("dragstart",this._onRotateStart,this),A.on("drag",this._onRotate,this),A.on("dragend",this._onRotateEnd,this)):(A.on("click",this._onVertexClick,this),A.on("dragstart",this._onMarkerDragStart,this),A.on("move",this._onMarkerDrag,this),A.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||A.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(A),A},_createMiddleMarker:function(M,A){if(!M||!A)return!1;var j=L.PM.Utils.calcMiddleLatLng(this._map,M.getLatLng(),A.getLatLng()),nt=this._createMarker(j),ht=L.divIcon({className:"marker-icon marker-icon-middle"});return nt.setIcon(ht),nt.leftM=M,nt.rightM=A,M._middleMarkerNext=nt,A._middleMarkerPrev=nt,nt.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),nt.on("movestart",this._onMiddleMarkerMoveStart,this),nt},_onMiddleMarkerClick:function(M){var A=M.target;if(this._vertexValidation("add",M)){var j=L.divIcon({className:"marker-icon"});A.setIcon(j),this._addMarker(A,A.leftM,A.rightM)}},_onMiddleMarkerMoveStart:function(M){var A=M.target;A.on("moveend",this._onMiddleMarkerMoveEnd,this),this._vertexValidation("add",M)?(A._dragging=!0,this._addMarker(A,A.leftM,A.rightM)):A.on("move",this._onMiddleMarkerMovePrevent,this)},_onMiddleMarkerMovePrevent:function(M){var A=M.target;this._vertexValidationDrag(A)},_onMiddleMarkerMoveEnd:function(M){var A=M.target;if(A.off("move",this._onMiddleMarkerMovePrevent,this),A.off("moveend",this._onMiddleMarkerMoveEnd,this),this._vertexValidationDragEnd(A)){var j=L.divIcon({className:"marker-icon"});A.setIcon(j),setTimeout(function(){delete A._dragging},100)}},_addMarker:function(M,A,j){M.off("movestart",this._onMiddleMarkerMoveStart,this),M.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);var nt=M.getLatLng(),ht=this._layer._latlngs;delete M.leftM,delete M.rightM;var xt=L.PM.Utils.findDeepMarkerIndex(this._markers,A),Lt=xt.indexPath,Rt=xt.index,Pt=xt.parentPath,Nt=Lt.length>1?R()(ht,Pt):ht,Vt=Lt.length>1?R()(this._markers,Pt):this._markers;Nt.splice(Rt+1,0,nt),Vt.splice(Rt+1,0,M),this._layer.setLatLngs(ht),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(A,M),this._createMiddleMarker(M,j)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(M,L.PM.Utils.findDeepMarkerIndex(this._markers,M).indexPath,nt),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection:function(){return le(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval:function(){this._handleLayerStyle(!0),this.hasSelfIntersection()&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle:function(M){var A=this._layer;if(this.hasSelfIntersection()){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return;M?this._flashLayer():(A.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(le(this._layer.toGeoJSON(15)))}else A.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1)},_flashLayer:function(){var M=this;this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(function(){M._layer.setStyle({color:M.cachedColor}),M.isRed=!1},200)},_updateDisabledMarkerStyle:function(M,A){var j=this;M.forEach(function(nt){Array.isArray(nt)?j._updateDisabledMarkerStyle(nt,A):nt._icon&&(A&&!j._checkMarkerAllowedToDrag(nt)?L.DomUtil.addClass(nt._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(nt._icon,"vertexmarker-disabled"))})},_removeMarker:function(M){var A=M.target;if(this._vertexValidation("remove",M)){this.options.allowSelfIntersection||(this._coordsBeforeEdit=rt(this._layer,this._layer.getLatLngs()));var j=this._layer.getLatLngs(),nt=L.PM.Utils.findDeepMarkerIndex(this._markers,A),ht=nt.indexPath,xt=nt.index,Lt=nt.parentPath;if(ht){var Rt=ht.length>1?R()(j,Lt):j,Pt=ht.length>1?R()(this._markers,Lt):this._markers;if(this.options.removeLayerBelowMinVertexCount||!(Rt.length<=2||this.isPolygon()&&Rt.length<=3)){Rt.splice(xt,1),this._layer.setLatLngs(j),this.isPolygon()&&Rt.length<=2&&Rt.splice(0,Rt.length);var Nt=!1;if(Rt.length<=1&&(Rt.splice(0,Rt.length),Lt.length>1&&ht.length>1&&(j=dt(j)),this._layer.setLatLngs(j),this._initMarkers(),Nt=!0),ot(j)||this._layer.remove(),j=dt(j),this._layer.setLatLngs(j),this._markers=dt(this._markers),!Nt&&(Pt=ht.length>1?R()(this._markers,Lt):this._markers,A._middleMarkerPrev&&this._markerGroup.removeLayer(A._middleMarkerPrev),A._middleMarkerNext&&this._markerGroup.removeLayer(A._middleMarkerNext),this._markerGroup.removeLayer(A),Pt)){var Vt,ne;if(this.isPolygon()?(Vt=(xt+1)%Pt.length,ne=(xt+(Pt.length-1))%Pt.length):(ne=xt-1<0?void 0:xt-1,Vt=xt+1>=Pt.length?void 0:xt+1),Vt!==ne){var Zt=Pt[ne],ge=Pt[Vt];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(Zt,ge)}Pt.splice(xt,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(A,ht),this._fireChange(this._layer.getLatLngs(),"Edit")}else this._flashLayer()}}},updatePolygonCoordsFromMarkerDrag:function(M){var A=this._layer.getLatLngs(),j=M.getLatLng(),nt=L.PM.Utils.findDeepMarkerIndex(this._markers,M),ht=nt.indexPath,xt=nt.index,Lt=nt.parentPath;(ht.length>1?R()(A,Lt):A).splice(xt,1,j),this._layer.setLatLngs(A)},_getNeighborMarkers:function(M){var A=L.PM.Utils.findDeepMarkerIndex(this._markers,M),j=A.indexPath,nt=A.index,ht=A.parentPath,xt=j.length>1?R()(this._markers,ht):this._markers,Lt=(nt+1)%xt.length;return{prevMarker:xt[(nt+(xt.length-1))%xt.length],nextMarker:xt[Lt]}},_checkMarkerAllowedToDrag:function(M){var A=this._getNeighborMarkers(M),j=A.prevMarker,nt=A.nextMarker,ht=L.polyline([j.getLatLng(),M.getLatLng()]),xt=L.polyline([M.getLatLng(),nt.getLatLng()]),Lt=ve(this._layer.toGeoJSON(15),ht.toGeoJSON(15)).features.length,Rt=ve(this._layer.toGeoJSON(15),xt.toGeoJSON(15)).features.length;return M.getLatLng()===this._markers[0][0].getLatLng()?Rt+=1:M.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(Lt+=1),!(Lt<=2&&Rt<=2)},_onMarkerDragStart:function(M){var A=M.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),this._vertexValidation("move",M)){var j=L.PM.Utils.findDeepMarkerIndex(this._markers,A).indexPath;this._fireMarkerDragStart(M,j),this.options.allowSelfIntersection||(this._coordsBeforeEdit=rt(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(A):this._markerAllowedToDrag=null}},_onMarkerDrag:function(M){var A=M.target;if(this._vertexValidationDrag(A)){var j=L.PM.Utils.findDeepMarkerIndex(this._markers,A),nt=j.indexPath,ht=j.index,xt=j.parentPath;if(nt){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1)return this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),void this._handleLayerStyle();this.updatePolygonCoordsFromMarkerDrag(A);var Lt=nt.length>1?R()(this._markers,xt):this._markers,Rt=(ht+1)%Lt.length,Pt=(ht+(Lt.length-1))%Lt.length,Nt=A.getLatLng(),Vt=Lt[Pt].getLatLng(),ne=Lt[Rt].getLatLng();if(A._middleMarkerNext){var Zt=L.PM.Utils.calcMiddleLatLng(this._map,Nt,ne);A._middleMarkerNext.setLatLng(Zt)}if(A._middleMarkerPrev){var ge=L.PM.Utils.calcMiddleLatLng(this._map,Nt,Vt);A._middleMarkerPrev.setLatLng(ge)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(M,nt),this._fireChange(this._layer.getLatLngs(),"Edit")}}},_onMarkerDragEnd:function(M){var A=M.target;if(this._vertexValidationDragEnd(A)){var j=L.PM.Utils.findDeepMarkerIndex(this._markers,A).indexPath,nt=this.hasSelfIntersection();nt&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(nt=!1);var ht=!this.options.allowSelfIntersection&&nt;if(this._fireMarkerDragEnd(M,j,ht),ht)return this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),void this._fireLayerReset(M,j);!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")}},_onVertexClick:function(M){var A=M.target;if(!A._dragging){var j=L.PM.Utils.findDeepMarkerIndex(this._markers,A).indexPath;this._fireVertexClick(M,j)}}}),gi.Polygon=gi.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag:function(M){var A=this._getNeighborMarkers(M),j=A.prevMarker,nt=A.nextMarker,ht=L.polyline([j.getLatLng(),M.getLatLng()]),xt=L.polyline([M.getLatLng(),nt.getLatLng()]),Lt=ve(this._layer.toGeoJSON(15),ht.toGeoJSON(15)).features.length,Rt=ve(this._layer.toGeoJSON(15),xt.toGeoJSON(15)).features.length;return!(Lt<=2&&Rt<=2)}}),gi.Rectangle=gi.Polygon.extend({_shape:"Rectangle",_initMarkers:function(){var M=this,A=this._map,j=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,A.addLayer(this._markerGroup),this._markers=[],this._markers[0]=j.map(this._createMarker,this);var nt=hi(this._markers,1);this._cornerMarkers=nt[0],this._layer.getLatLngs()[0].forEach(function(ht,xt){var Lt=M._cornerMarkers.find(function(Rt){return Rt._index===xt});Lt&&Lt.setLatLng(ht)})},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker:function(M,A){var j=new L.Marker(M,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(j,"vertexPane"),j._origLatLng=M,j._index=A,j._pmTempLayer=!0,this._markerGroup.addLayer(j),j},_addMarkerEvents:function(){var M=this;this._markers[0].forEach(function(A){A.on("dragstart",M._onMarkerDragStart,M),A.on("drag",M._onMarkerDrag,M),A.on("dragend",M._onMarkerDragEnd,M),M.options.preventMarkerRemoval||A.on("contextmenu",M._removeMarker,M)})},_removeMarker:function(){return null},_onMarkerDragStart:function(M){if(this._vertexValidation("move",M)){var A=M.target,j=this._cornerMarkers;A._oppositeCornerLatLng=j.find(function(nt){return nt._index===(A._index+2)%4}).getLatLng(),A._snapped=!1,this._fireMarkerDragStart(M)}},_onMarkerDrag:function(M){var A=M.target;this._vertexValidationDrag(A)&&A._index!==void 0&&(this._adjustRectangleForMarkerMove(A),this._fireMarkerDrag(M),this._fireChange(this._layer.getLatLngs(),"Edit"))},_onMarkerDragEnd:function(M){var A=M.target;this._vertexValidationDragEnd(A)&&(this._cornerMarkers.forEach(function(j){delete j._oppositeCornerLatLng}),this._fireMarkerDragEnd(M),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"))},_adjustRectangleForMarkerMove:function(M){L.extend(M._origLatLng,M._latlng);var A=L.PM.Utils._getRotatedRectangle(M.getLatLng(),M._oppositeCornerLatLng,this._angle||0,this._map);this._layer.setLatLngs(A),this._adjustAllMarkers(),this._layer.redraw()},_adjustAllMarkers:function(){var M=this,A=this._layer.getLatLngs()[0];A&&A.length!==4&&A.length>0?(A.forEach(function(j,nt){M._cornerMarkers[nt].setLatLng(j)}),this._cornerMarkers.slice(A.length).forEach(function(j){j.setLatLng(A[0])})):A&&A.length?this._cornerMarkers.forEach(function(j){j.setLatLng(A[j._index])}):console.error("The layer has no LatLngs")},_findCorners:function(){var M=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(M[0],M[2],this._angle||0,this._map)}}),gi.Circle=gi.extend({_shape:"Circle",initialize:function(M){this._layer=M,this._enabled=!1,this._updateHiddenPolyCircle()},enable:function(M){L.Util.setOptions(this,M),this._map=this._layer._map,this.options.allowEditing?(this.enabled()||this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._updateHiddenPolyCircle(),this._fireEnable()):this.disable()},disable:function(){if(this.enabled()&&!this._dragging){this._centerMarker.off("dragstart",this._onCircleDragStart,this),this._centerMarker.off("drag",this._onCircleDrag,this),this._centerMarker.off("dragend",this._onCircleDragEnd,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this),this._layer.off("remove",this.disable,this),this._enabled=!1,this._helperLayers.clearLayers();var M=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(M,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()}},enabled:function(){return this._enabled},toggleEdit:function(M){this.enabled()?this.disable():this.enable(M)},_initMarkers:function(){var M=this._map;this._helperLayers&&this._helperLayers.clearLayers(),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(M);var A=this._layer.getLatLng(),j=this._layer._radius,nt=this._getLatLngOnCircle(A,j);this._centerMarker=this._createCenterMarker(A),this._outerMarker=this._createOuterMarker(nt),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},applyOptions:function(){this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this),this._centerMarker.on("move",this._moveCircle,this)):this._disableSnapping()},_createHintLine:function(M,A){var j=M.getLatLng(),nt=A.getLatLng();this._hintline=L.polyline([j,nt],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker:function(M){var A=this._createMarker(M);return L.DomUtil.addClass(A._icon,"leaflet-pm-draggable"),A.on("drag",this._moveCircle,this),A.on("dragstart",this._onCircleDragStart,this),A.on("drag",this._onCircleDrag,this),A.on("dragend",this._onCircleDragEnd,this),A},_createOuterMarker:function(M){var A=this._createMarker(M);return A.on("drag",this._resizeCircle,this),A},_createMarker:function(M){var A=new L.Marker(M,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(A,"vertexPane"),A._origLatLng=M,A._pmTempLayer=!0,A.on("dragstart",this._onMarkerDragStart,this),A.on("drag",this._onMarkerDrag,this),A.on("dragend",this._onMarkerDragEnd,this),this._helperLayers.addLayer(A),A},_resizeCircle:function(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_moveCircle:function(M){if(!M.target._cancelDragEventChain){var A=M.latlng;this._layer.setLatLng(A);var j=this._layer._radius,nt=this._getLatLngOnCircle(A,j);this._outerMarker._latlng=nt,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")}},_syncCircleRadius:function(){var M=this._centerMarker.getLatLng(),A=this._outerMarker.getLatLng(),j=this._map.distance(M,A);this.options.minRadiusCircle&&j<this.options.minRadiusCircle?this._layer.setRadius(this.options.minRadiusCircle):this.options.maxRadiusCircle&&j>this.options.maxRadiusCircle?this._layer.setRadius(this.options.maxRadiusCircle):this._layer.setRadius(j),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine:function(){var M=this._centerMarker.getLatLng(),A=this._outerMarker.getLatLng();this._hintline.setLatLngs([M,A])},_disableSnapping:function(){var M=this;this._markers.forEach(function(A){A.off("move",M._syncHintLine,M),A.off("move",M._syncCircleRadius,M),A.off("drag",M._handleSnapping,M),A.off("dragend",M._cleanupSnapping,M)}),this._layer.off("pm:dragstart",this._unsnap,this)},_onMarkerDragStart:function(M){this._vertexValidation("move",M)&&this._fireMarkerDragStart(M)},_onMarkerDrag:function(M){var A=M.target;this._vertexValidationDrag(A)&&this._fireMarkerDrag(M)},_onMarkerDragEnd:function(M){var A=M.target;this._vertexValidationDragEnd(A)&&(this._fireEdit(),this._layerEdited=!0,this._fireMarkerDragEnd(M))},_onCircleDragStart:function(M){this._vertexValidationDrag(M.target)?(delete this._vertexValidationReset,this._fireDragStart()):this._vertexValidationReset=!0},_onCircleDrag:function(M){this._vertexValidationReset||this._fireDrag(M)},_onCircleDragEnd:function(){this._vertexValidationReset?delete this._vertexValidationReset:this._fireDragEnd()},_updateHiddenPolyCircle:function(){var M=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!M).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!M),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_getLatLngOnCircle:function(M,A){var j=this._map.project(M),nt=L.point(j.x+A,j.y);return this._map.unproject(nt)},_getNewDestinationOfOuterMarker:function(){var M=this._centerMarker.getLatLng(),A=this._outerMarker.getLatLng(),j=this._map.distance(M,A);return this.options.minRadiusCircle&&j<this.options.minRadiusCircle?A=W(this._map,M,A,this.options.minRadiusCircle):this.options.maxRadiusCircle&&j>this.options.maxRadiusCircle&&(A=W(this._map,M,A,this.options.maxRadiusCircle)),A},_handleOuterMarkerSnapping:function(){if(this._outerMarker._snapped){var M=this._centerMarker.getLatLng(),A=this._outerMarker.getLatLng(),j=this._map.distance(M,A);(this.options.minRadiusCircle&&j<this.options.minRadiusCircle||this.options.maxRadiusCircle&&j>this.options.maxRadiusCircle)&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())}}),gi.CircleMarker=gi.extend({_shape:"CircleMarker",initialize:function(M){this._layer=M,this._enabled=!1,this._updateHiddenPolyCircle()},enable:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{draggable:!0,snappable:!0};L.Util.setOptions(this,M),this.options.allowEditing&&this._layer._map?(this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this),this._updateHiddenPolyCircle(),this._fireEnable()):this.disable()},disable:function(){this._dragging||(this._helperLayers&&this._helperLayers.clearLayers(),this._map||(this._map=this._layer._map),this._map||(this.options.editable?(this._map.off("move",this._syncMarkers,this),this._outerMarker&&this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this)),this.disableLayerDrag(),this._layer.off("contextmenu",this._removeMarker,this),this._layer.off("remove",this.disable,this),this.enabled()&&(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},enabled:function(){return this._enabled},toggleEdit:function(M){this.enabled()?this.disable():this.enable(M)},applyOptions:function(){!this.options.editable&&this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.editable?(this._initMarkers(),this._map.on("move",this._syncMarkers,this)):this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this.options.editable?(this._initSnappableMarkers(),this._centerMarker.on("drag",this._moveCircle,this),this.options.editable&&this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._initSnappableMarkersDrag():this.options.editable?this._disableSnapping():this._disableSnappingDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers:function(){var M=this._map;this._helperLayers&&this._helperLayers.clearLayers(),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(M);var A=this._layer.getLatLng(),j=this._layer._radius,nt=this._getLatLngOnCircle(A,j);this._centerMarker=this._createCenterMarker(A),this._outerMarker=this._createOuterMarker(nt),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle:function(M,A){var j=this._map.project(M),nt=L.point(j.x+A,j.y);return this._map.unproject(nt)},_createHintLine:function(M,A){var j=M.getLatLng(),nt=A.getLatLng();this._hintline=L.polyline([j,nt],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker:function(M){var A=this._createMarker(M);return this.options.draggable?L.DomUtil.addClass(A._icon,"leaflet-pm-draggable"):A.dragging.disable(),A},_createOuterMarker:function(M){var A=this._createMarker(M);return A.on("drag",this._resizeCircle,this),A},_createMarker:function(M){var A=new L.Marker(M,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(A,"vertexPane"),A._origLatLng=M,A._pmTempLayer=!0,A.on("dragstart",this._onMarkerDragStart,this),A.on("drag",this._onMarkerDrag,this),A.on("dragend",this._onMarkerDragEnd,this),this._helperLayers.addLayer(A),A},_moveCircle:function(){var M=this._centerMarker.getLatLng();this._layer.setLatLng(M);var A=this._layer._radius,j=this._getLatLngOnCircle(M,A);this._outerMarker._latlng=j,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers:function(){var M=this._layer.getLatLng(),A=this._layer._radius,j=this._getLatLngOnCircle(M,A);this._outerMarker.setLatLng(j),this._centerMarker.setLatLng(M),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle:function(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius:function(){var M=this._centerMarker.getLatLng(),A=this._outerMarker.getLatLng(),j=this._map.project(M).distanceTo(this._map.project(A));this.options.minRadiusCircleMarker&&j<this.options.minRadiusCircleMarker?this._layer.setRadius(this.options.minRadiusCircleMarker):this.options.maxRadiusCircleMarker&&j>this.options.maxRadiusCircleMarker?this._layer.setRadius(this.options.maxRadiusCircleMarker):this._layer.setRadius(j),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine:function(){var M=this._centerMarker.getLatLng(),A=this._outerMarker.getLatLng();this._hintline.setLatLngs([M,A])},_removeMarker:function(){this.options.editable&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart:function(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart:function(M){this._vertexValidation("move",M)&&this._fireMarkerDragStart(M)},_onMarkerDrag:function(M){var A=M.target;A instanceof L.Marker&&!this._vertexValidationDrag(A)||this._fireMarkerDrag(M)},_onMarkerDragEnd:function(M){this._map.pm.Draw.CircleMarker._layerIsDragging=!1;var A=M.target;this._vertexValidationDragEnd(A)&&(this.options.editable&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(M))},_initSnappableMarkersDrag:function(){var M=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0||this.options.snapSegment,M.off("pm:drag",this._handleSnapping,this),M.on("pm:drag",this._handleSnapping,this),M.off("pm:dragend",this._cleanupSnapping,this),M.on("pm:dragend",this._cleanupSnapping,this),M.off("pm:dragstart",this._unsnap,this),M.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag:function(){var M=this._layer;M.off("pm:drag",this._handleSnapping,this),M.off("pm:dragend",this._cleanupSnapping,this),M.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle:function(){var M=this._layer._map||this._map;if(M){var A=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),M,this._layer.getLatLng()),j=L.circle(this._layer.getLatLng(),this._layer.options);j.setRadius(A);var nt=M&&M.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(j,200,!nt).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(j,200,!nt),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker:function(){var M=this._centerMarker.getLatLng(),A=this._outerMarker.getLatLng(),j=this._map.project(M).distanceTo(this._map.project(A));return this.options.minRadiusCircleMarker&&j<this.options.minRadiusCircleMarker?A=W(this._map,M,A,L.PM.Utils.pxRadiusToMeterRadius(this.options.minRadiusCircleMarker,this._map,M)):this.options.maxRadiusCircleMarker&&j>this.options.maxRadiusCircleMarker&&(A=W(this._map,M,A,L.PM.Utils.pxRadiusToMeterRadius(this.options.maxRadiusCircleMarker,this._map,M))),A},_handleOuterMarkerSnapping:function(){if(this._outerMarker._snapped){var M=this._centerMarker.getLatLng(),A=this._outerMarker.getLatLng(),j=this._map.project(M).distanceTo(this._map.project(A));(this.options.minRadiusCircleMarker&&j<this.options.minRadiusCircleMarker||this.options.maxRadiusCircleMarker&&j>this.options.maxRadiusCircleMarker)&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())}}),gi.ImageOverlay=gi.extend({_shape:"ImageOverlay",initialize:function(M){this._layer=M,this._enabled=!1},toggleEdit:function(M){this.enabled()?this.disable():this.enable(M)},enabled:function(){return this._enabled},enable:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{draggable:!0,snappable:!0};L.Util.setOptions(this,M),this._map=this._layer._map,this._map&&(this.options.allowEditing?(this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()):this.disable())},disable:function(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners:function(){var M=this._layer.getBounds();return[M.getNorthWest(),M.getNorthEast(),M.getSouthEast(),M.getSouthWest()]}}),gi.Text=gi.extend({_shape:"Text",initialize:function(M){this._layer=M,this._enabled=!1},enable:function(M){L.Util.setOptions(this,M),this.textArea&&(this.options.allowEditing&&this._layer._map?(this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()):this.disable())},disable:function(){if(this.enabled()){this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");var M=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),M.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1}},enabled:function(){return this._enabled},toggleEdit:function(M){this.enabled()?this.disable():this.enable(M)},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers:function(){var M=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0||this.options.snapSegment,M.off("pm:drag",this._handleSnapping,this),M.on("pm:drag",this._handleSnapping,this),M.off("pm:dragend",this._cleanupSnapping,this),M.on("pm:dragend",this._cleanupSnapping,this),M.off("pm:dragstart",this._unsnap,this),M.on("pm:dragstart",this._unsnap,this)},_disableSnapping:function(){var M=this._layer;M.off("pm:drag",this._handleSnapping,this),M.off("pm:dragend",this._cleanupSnapping,this),M.off("pm:dragstart",this._unsnap,this)},_autoResize:function(){this.textArea.style.height="1px",this.textArea.style.width="1px";var M=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,A=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height="".concat(M,"px"),this.textArea.style.width="".concat(A,"px"),this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur:function(){var M=this;this._disableOnBlurActive=!0,setTimeout(function(){M.enabled()&&L.DomEvent.on(document,"click",M._documentClick,M)},100)},_documentClick:function(M){M.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},A=this._hasFocus;this._hasFocus=M.type==="focus",!A!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus:function(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus:function(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus:function(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur:function(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus:function(){return this._hasFocus},getElement:function(){return this.textArea},setText:function(M){this.textArea.value=M,this._autoResize()},getText:function(){return this.textArea.value},_initTextMarker:function(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){var M,A=this.options.className.split(" ");(M=this.textArea.classList).add.apply(M,Si(A))}var j=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(j),this._layer.once("add",this._createTextMarker,this)},_createTextMarker:function(){var M=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),M===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection:function(M){M.preventDefault()}});var ns=function(M,A,j,nt,ht,xt){this._matrix=[M,A,j,nt,ht,xt]};ns.init=function(){return new L.PM.Matrix(1,0,0,1,0,0)},ns.prototype={transform:function(M){return this._transform(M.clone())},_transform:function(M){var A=this._matrix,j=M.x,nt=M.y;return M.x=A[0]*j+A[1]*nt+A[4],M.y=A[2]*j+A[3]*nt+A[5],M},untransform:function(M){var A=this._matrix;return new L.Point((M.x/A[0]-A[4])/A[0],(M.y/A[2]-A[5])/A[2])},clone:function(){var M=this._matrix;return new L.PM.Matrix(M[0],M[1],M[2],M[3],M[4],M[5])},translate:function(M){return M===void 0?new L.Point(this._matrix[4],this._matrix[5]):(typeof M=="number"?(A=M,j=M):(A=M.x,j=M.y),this._add(1,0,0,1,A,j));var A,j},scale:function(M,A){return M===void 0?new L.Point(this._matrix[0],this._matrix[3]):(A=A||L.point(0,0),typeof M=="number"?(j=M,nt=M):(j=M.x,nt=M.y),this._add(j,0,0,nt,A.x,A.y)._add(1,0,0,1,-A.x,-A.y));var j,nt},rotate:function(M,A){var j=Math.cos(M),nt=Math.sin(M);return A=A||new L.Point(0,0),this._add(j,nt,-nt,j,A.x,A.y)._add(1,0,0,1,-A.x,-A.y)},flip:function(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add:function(M,A,j,nt,ht,xt){var Lt,Rt=[[],[],[]],Pt=this._matrix,Nt=[[Pt[0],Pt[2],Pt[4]],[Pt[1],Pt[3],Pt[5]],[0,0,1]],Vt=[[M,j,ht],[A,nt,xt],[0,0,1]];M&&M instanceof L.PM.Matrix&&(Vt=[[(Pt=M._matrix)[0],Pt[2],Pt[4]],[Pt[1],Pt[3],Pt[5]],[0,0,1]]);for(var ne=0;ne<3;ne+=1)for(var Zt=0;Zt<3;Zt+=1){Lt=0;for(var ge=0;ge<3;ge+=1)Lt+=Nt[ne][ge]*Vt[ge][Zt];Rt[ne][Zt]=Lt}return this._matrix=[Rt[0][0],Rt[1][0],Rt[0][1],Rt[1][1],Rt[0][2],Rt[1][2]],this}};let je=ns;var qr={calcMiddleLatLng:function(M,A,j){var nt=M.project(A),ht=M.project(j);return M.unproject(nt._add(ht)._divideBy(2))},findLayers:function(M){var A=[];return M.eachLayer(function(j){(j instanceof L.Polyline||j instanceof L.Marker||j instanceof L.Circle||j instanceof L.CircleMarker||j instanceof L.ImageOverlay)&&A.push(j)}),A=(A=(A=A.filter(function(j){return!!j.pm})).filter(function(j){return!j._pmTempLayer})).filter(function(j){return!L.PM.optIn&&!j.options.pmIgnore||L.PM.optIn&&j.options.pmIgnore===!1})},circleToPolygon:function(M){for(var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,j=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],nt=M.getLatLng(),ht=M.getRadius(),xt=ct(nt,ht,A,0,j),Lt=[],Rt=0;Rt<xt.length;Rt+=1){var Pt=[xt[Rt].lat,xt[Rt].lng];Lt.push(Pt)}return L.polygon(Lt,M.options)},disablePopup:function(M){M.getPopup()&&(M._tempPopupCopy=M.getPopup(),M.unbindPopup())},enablePopup:function(M){M._tempPopupCopy&&(M.bindPopup(M._tempPopupCopy),delete M._tempPopupCopy)},_fireEvent:function(M,A,j){var nt=arguments.length>3&&arguments[3]!==void 0&&arguments[3];M.fire(A,j,nt);var ht=this.getAllParentGroups(M),xt=ht.groups;xt.forEach(function(Lt){Lt.fire(A,j,nt)})},getAllParentGroups:function(M){var A=[],j=[];return!M._pmLastGroupFetch||!M._pmLastGroupFetch.time||new Date().getTime()-M._pmLastGroupFetch.time>1e3?(function nt(ht){for(var xt in ht._eventParents)if(A.indexOf(xt)===-1){A.push(xt);var Lt=ht._eventParents[xt];j.push(Lt),nt(Lt)}}(M),M._pmLastGroupFetch={time:new Date().getTime(),groups:j,groupIds:A},{groupIds:A,groups:j}):{groups:M._pmLastGroupFetch.groups,groupIds:M._pmLastGroupFetch.groupIds}},createGeodesicPolygon:ct,getTranslation:it,findDeepCoordIndex:function(M,A){var j,nt=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],ht=function Lt(Rt){return function(Pt,Nt){var Vt=Rt.concat(Nt);if(nt){if(Pt.lat&&Pt.lat===A.lat&&Pt.lng===A.lng)return j=Vt,!0}else if(Pt.lat&&L.latLng(Pt).equals(A))return j=Vt,!0;return Array.isArray(Pt)&&Pt.some(Lt(Vt))}};M.some(ht([]));var xt={};return j&&(xt={indexPath:j,index:j[j.length-1],parentPath:j.slice(0,j.length-1)}),xt},findDeepMarkerIndex:function(M,A){var j;M.some(function ht(xt){return function(Lt,Rt){var Pt=xt.concat(Rt);return Lt._leaflet_id===A._leaflet_id?(j=Pt,!0):Array.isArray(Lt)&&Lt.some(ht(Pt))}}([]));var nt={};return j&&(nt={indexPath:j,index:j[j.length-1],parentPath:j.slice(0,j.length-1)}),nt},_getIndexFromSegment:function(M,A){if(A&&A.length===2){var j=this.findDeepCoordIndex(M,A[0]),nt=this.findDeepCoordIndex(M,A[1]),ht=Math.max(j.index,nt.index);return j.index!==0&&nt.index!==0||ht===1||(ht+=1),{indexA:j,indexB:nt,newIndex:ht,indexPath:j.indexPath,parentPath:j.parentPath}}return null},_getRotatedRectangle:function(M,A,j,nt){var ht=Tr(nt,M),xt=Tr(nt,A),Lt=j*Math.PI/180,Rt=Math.cos(Lt),Pt=Math.sin(Lt),Nt=(xt.x-ht.x)*Rt+(xt.y-ht.y)*Pt,Vt=(xt.y-ht.y)*Rt-(xt.x-ht.x)*Pt,ne=Nt*Rt+ht.x,Zt=Nt*Pt+ht.y,ge=-Vt*Pt+ht.x,Ce=Vt*Rt+ht.y;return[gn(nt,ht),gn(nt,{x:ne,y:Zt}),gn(nt,xt),gn(nt,{x:ge,y:Ce})]},pxRadiusToMeterRadius:function(M,A,j){var nt=A.project(j),ht=L.point(nt.x+M,nt.y);return A.distance(A.unproject(ht),j)}};let ci=qr;L.PM=L.PM||{version:"2.14.2",Map:_t,Toolbar:gt,Draw:pt,Edit:gi,Utils:ci,Matrix:je,activeLang:"en",optIn:!1,initialize:function(M){this.addInitHooks(M)},setOptIn:function(M){this.optIn=!!M},addInitHooks:function(){L.Map.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}),L.LayerGroup.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}),L.Marker.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}),L.CircleMarker.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}),L.Polyline.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}),L.Polygon.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}),L.Rectangle.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}),L.Circle.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}),L.ImageOverlay.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))})},reInitLayer:function(M){var A=this;M instanceof L.LayerGroup&&M.eachLayer(function(j){A.reInitLayer(j)}),M.pm||L.PM.optIn&&M.options.pmIgnore!==!1||M.options.pmIgnore||(M instanceof L.Map?M.pm=new L.PM.Map(M):M instanceof L.Marker?M.options.textMarker?(M.pm=new L.PM.Edit.Text(M),M.pm._initTextMarker(),M.pm._createTextMarker(!1)):M.pm=new L.PM.Edit.Marker(M):M instanceof L.Circle?M.pm=new L.PM.Edit.Circle(M):M instanceof L.CircleMarker?M.pm=new L.PM.Edit.CircleMarker(M):M instanceof L.Rectangle?M.pm=new L.PM.Edit.Rectangle(M):M instanceof L.Polygon?M.pm=new L.PM.Edit.Polygon(M):M instanceof L.Polyline?M.pm=new L.PM.Edit.Line(M):M instanceof L.LayerGroup?M.pm=new L.PM.Edit.LayerGroup(M):M instanceof L.ImageOverlay&&(M.pm=new L.PM.Edit.ImageOverlay(M)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick:function(M){for(var A,j,nt=this._map.mouseEventToLayerPoint(M),ht=this._drawFirst;ht;ht=ht.next)(A=ht.layer).options.interactive&&A._containsPoint(nt)&&(M.type!=="click"&&M.type!=="preclick"||!this._map._draggableMoved(A))&&(j=A);j&&(L.DomEvent.fakeStop(M),this._fireEvent([j],M))}}),L.PM.initialize()},7107:()=>{Array.prototype.findIndex=Array.prototype.findIndex||function(i){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof i!="function")throw new TypeError("callback must be a function");for(var r=Object(this),o=r.length>>>0,a=arguments[1],s=0;s<o;s++)if(i.call(a,r[s],s,r))return s;return-1},Array.prototype.find=Array.prototype.find||function(i){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof i!="function")throw new TypeError("callback must be a function");for(var r=Object(this),o=r.length>>>0,a=arguments[1],s=0;s<o;s++){var u=r[s];if(i.call(a,u,s,r))return u}},typeof Object.assign!="function"&&(Object.assign=function(i){"use strict";if(i==null)throw new TypeError("Cannot convert undefined or null to object");i=Object(i);for(var r=1;r<arguments.length;r++){var o=arguments[r];if(o!=null)for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(i[a]=o[a])}return i}),[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(i){i.hasOwnProperty("remove")||Object.defineProperty(i,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(i,r){if(this==null)throw new TypeError('"this" is null or not defined');var o=Object(this),a=o.length>>>0;if(a===0)return!1;for(var s,u,f=0|r,c=Math.max(f>=0?f:a-Math.abs(f),0);c<a;){if((s=o[c])===(u=i)||typeof s=="number"&&typeof u=="number"&&isNaN(s)&&isNaN(u))return!0;c++}return!1}})},1787:(i,r,o)=>{var a=o(2582),s=o(4102),u=o(1540),f=o(9705).Z,c=u.featureEach,d=(u.coordEach,s.polygon,s.featureCollection);function m(v){var p=new a(v);return p.insert=function(_){if(_.type!=="Feature")throw new Error("invalid feature");return _.bbox=_.bbox?_.bbox:f(_),a.prototype.insert.call(this,_)},p.load=function(_){var y=[];return Array.isArray(_)?_.forEach(function(x){if(x.type!=="Feature")throw new Error("invalid features");x.bbox=x.bbox?x.bbox:f(x),y.push(x)}):c(_,function(x){if(x.type!=="Feature")throw new Error("invalid features");x.bbox=x.bbox?x.bbox:f(x),y.push(x)}),a.prototype.load.call(this,y)},p.remove=function(_,y){if(_.type!=="Feature")throw new Error("invalid feature");return _.bbox=_.bbox?_.bbox:f(_),a.prototype.remove.call(this,_,y)},p.clear=function(){return a.prototype.clear.call(this)},p.search=function(_){var y=a.prototype.search.call(this,this.toBBox(_));return d(y)},p.collides=function(_){return a.prototype.collides.call(this,this.toBBox(_))},p.all=function(){var _=a.prototype.all.call(this);return d(_)},p.toJSON=function(){return a.prototype.toJSON.call(this)},p.fromJSON=function(_){return a.prototype.fromJSON.call(this,_)},p.toBBox=function(_){var y;if(_.bbox)y=_.bbox;else if(Array.isArray(_)&&_.length===4)y=_;else if(Array.isArray(_)&&_.length===6)y=[_[0],_[1],_[3],_[4]];else if(_.type==="Feature")y=f(_);else{if(_.type!=="FeatureCollection")throw new Error("invalid geojson");y=f(_)}return{minX:y[0],minY:y[1],maxX:y[2],maxY:y[3]}},p}i.exports=m,i.exports.default=m},1989:(i,r,o)=>{var a=o(1789),s=o(401),u=o(7667),f=o(1327),c=o(1866);function d(m){var v=-1,p=m==null?0:m.length;for(this.clear();++v<p;){var _=m[v];this.set(_[0],_[1])}}d.prototype.clear=a,d.prototype.delete=s,d.prototype.get=u,d.prototype.has=f,d.prototype.set=c,i.exports=d},8407:(i,r,o)=>{var a=o(7040),s=o(4125),u=o(2117),f=o(7518),c=o(4705);function d(m){var v=-1,p=m==null?0:m.length;for(this.clear();++v<p;){var _=m[v];this.set(_[0],_[1])}}d.prototype.clear=a,d.prototype.delete=s,d.prototype.get=u,d.prototype.has=f,d.prototype.set=c,i.exports=d},7071:(i,r,o)=>{var a=o(852)(o(5639),"Map");i.exports=a},3369:(i,r,o)=>{var a=o(4785),s=o(1285),u=o(6e3),f=o(9916),c=o(5265);function d(m){var v=-1,p=m==null?0:m.length;for(this.clear();++v<p;){var _=m[v];this.set(_[0],_[1])}}d.prototype.clear=a,d.prototype.delete=s,d.prototype.get=u,d.prototype.has=f,d.prototype.set=c,i.exports=d},6384:(i,r,o)=>{var a=o(8407),s=o(7465),u=o(3779),f=o(7599),c=o(4758),d=o(4309);function m(v){var p=this.__data__=new a(v);this.size=p.size}m.prototype.clear=s,m.prototype.delete=u,m.prototype.get=f,m.prototype.has=c,m.prototype.set=d,i.exports=m},2705:(i,r,o)=>{var a=o(5639).Symbol;i.exports=a},1149:(i,r,o)=>{var a=o(5639).Uint8Array;i.exports=a},6874:i=>{i.exports=function(r,o,a){switch(a.length){case 0:return r.call(o);case 1:return r.call(o,a[0]);case 2:return r.call(o,a[0],a[1]);case 3:return r.call(o,a[0],a[1],a[2])}return r.apply(o,a)}},4636:(i,r,o)=>{var a=o(2545),s=o(5694),u=o(1469),f=o(4144),c=o(5776),d=o(6719),m=Object.prototype.hasOwnProperty;i.exports=function(v,p){var _=u(v),y=!_&&s(v),x=!_&&!y&&f(v),S=!_&&!y&&!x&&d(v),O=_||y||x||S,B=O?a(v.length,String):[],U=B.length;for(var z in v)!p&&!m.call(v,z)||O&&(z=="length"||x&&(z=="offset"||z=="parent")||S&&(z=="buffer"||z=="byteLength"||z=="byteOffset")||c(z,U))||B.push(z);return B}},9932:i=>{i.exports=function(r,o){for(var a=-1,s=r==null?0:r.length,u=Array(s);++a<s;)u[a]=o(r[a],a,r);return u}},6556:(i,r,o)=>{var a=o(9465),s=o(7813);i.exports=function(u,f,c){(c!==void 0&&!s(u[f],c)||c===void 0&&!(f in u))&&a(u,f,c)}},4865:(i,r,o)=>{var a=o(9465),s=o(7813),u=Object.prototype.hasOwnProperty;i.exports=function(f,c,d){var m=f[c];u.call(f,c)&&s(m,d)&&(d!==void 0||c in f)||a(f,c,d)}},8470:(i,r,o)=>{var a=o(7813);i.exports=function(s,u){for(var f=s.length;f--;)if(a(s[f][0],u))return f;return-1}},9465:(i,r,o)=>{var a=o(8777);i.exports=function(s,u,f){u=="__proto__"&&a?a(s,u,{configurable:!0,enumerable:!0,value:f,writable:!0}):s[u]=f}},3118:(i,r,o)=>{var a=o(3218),s=Object.create,u=function(){function f(){}return function(c){if(!a(c))return{};if(s)return s(c);f.prototype=c;var d=new f;return f.prototype=void 0,d}}();i.exports=u},8483:(i,r,o)=>{var a=o(5063)();i.exports=a},7786:(i,r,o)=>{var a=o(1811),s=o(327);i.exports=function(u,f){for(var c=0,d=(f=a(f,u)).length;u!=null&&c<d;)u=u[s(f[c++])];return c&&c==d?u:void 0}},4239:(i,r,o)=>{var a=o(2705),s=o(9607),u=o(2333),f=a?a.toStringTag:void 0;i.exports=function(c){return c==null?c===void 0?"[object Undefined]":"[object Null]":f&&f in Object(c)?s(c):u(c)}},8565:i=>{var r=Object.prototype.hasOwnProperty;i.exports=function(o,a){return o!=null&&r.call(o,a)}},9454:(i,r,o)=>{var a=o(4239),s=o(7005);i.exports=function(u){return s(u)&&a(u)=="[object Arguments]"}},8458:(i,r,o)=>{var a=o(3560),s=o(5346),u=o(3218),f=o(346),c=/^\[object .+?Constructor\]$/,d=Function.prototype,m=Object.prototype,v=d.toString,p=m.hasOwnProperty,_=RegExp("^"+v.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");i.exports=function(y){return!(!u(y)||s(y))&&(a(y)?_:c).test(f(y))}},8749:(i,r,o)=>{var a=o(4239),s=o(1780),u=o(7005),f={};f["[object Float32Array]"]=f["[object Float64Array]"]=f["[object Int8Array]"]=f["[object Int16Array]"]=f["[object Int32Array]"]=f["[object Uint8Array]"]=f["[object Uint8ClampedArray]"]=f["[object Uint16Array]"]=f["[object Uint32Array]"]=!0,f["[object Arguments]"]=f["[object Array]"]=f["[object ArrayBuffer]"]=f["[object Boolean]"]=f["[object DataView]"]=f["[object Date]"]=f["[object Error]"]=f["[object Function]"]=f["[object Map]"]=f["[object Number]"]=f["[object Object]"]=f["[object RegExp]"]=f["[object Set]"]=f["[object String]"]=f["[object WeakMap]"]=!1,i.exports=function(c){return u(c)&&s(c.length)&&!!f[a(c)]}},313:(i,r,o)=>{var a=o(3218),s=o(5726),u=o(3498),f=Object.prototype.hasOwnProperty;i.exports=function(c){if(!a(c))return u(c);var d=s(c),m=[];for(var v in c)(v!="constructor"||!d&&f.call(c,v))&&m.push(v);return m}},2980:(i,r,o)=>{var a=o(6384),s=o(6556),u=o(8483),f=o(9783),c=o(3218),d=o(1704),m=o(6390);i.exports=function v(p,_,y,x,S){p!==_&&u(_,function(O,B){if(S||(S=new a),c(O))f(p,_,B,y,v,x,S);else{var U=x?x(m(p,B),O,B+"",p,_,S):void 0;U===void 0&&(U=O),s(p,B,U)}},d)}},9783:(i,r,o)=>{var a=o(6556),s=o(4626),u=o(7133),f=o(278),c=o(8517),d=o(5694),m=o(1469),v=o(9246),p=o(4144),_=o(3560),y=o(3218),x=o(8630),S=o(6719),O=o(6390),B=o(9881);i.exports=function(U,z,q,G,tt,K,D){var N=O(U,q),Z=O(z,q),w=D.get(Z);if(w)a(U,q,w);else{var C=K?K(N,Z,q+"",U,z,D):void 0,k=C===void 0;if(k){var T=m(Z),R=!T&&p(Z),F=!T&&!R&&S(Z);C=Z,T||R||F?m(N)?C=N:v(N)?C=f(N):R?(k=!1,C=s(Z,!0)):F?(k=!1,C=u(Z,!0)):C=[]:x(Z)||d(Z)?(C=N,d(N)?C=B(N):y(N)&&!_(N)||(C=c(Z))):k=!1}k&&(D.set(Z,C),tt(C,Z,G,K,D),D.delete(Z)),a(U,q,C)}}},5976:(i,r,o)=>{var a=o(6557),s=o(5357),u=o(61);i.exports=function(f,c){return u(s(f,c,a),f+"")}},6560:(i,r,o)=>{var a=o(5703),s=o(8777),u=o(6557),f=s?function(c,d){return s(c,"toString",{configurable:!0,enumerable:!1,value:a(d),writable:!0})}:u;i.exports=f},2545:i=>{i.exports=function(r,o){for(var a=-1,s=Array(r);++a<r;)s[a]=o(a);return s}},531:(i,r,o)=>{var a=o(2705),s=o(9932),u=o(1469),f=o(3448),c=a?a.prototype:void 0,d=c?c.toString:void 0;i.exports=function m(v){if(typeof v=="string")return v;if(u(v))return s(v,m)+"";if(f(v))return d?d.call(v):"";var p=v+"";return p=="0"&&1/v==-1/0?"-0":p}},1717:i=>{i.exports=function(r){return function(o){return r(o)}}},1811:(i,r,o)=>{var a=o(1469),s=o(5403),u=o(5514),f=o(9833);i.exports=function(c,d){return a(c)?c:s(c,d)?[c]:u(f(c))}},4318:(i,r,o)=>{var a=o(1149);i.exports=function(s){var u=new s.constructor(s.byteLength);return new a(u).set(new a(s)),u}},4626:(i,r,o)=>{i=o.nmd(i);var a=o(5639),s=r&&!r.nodeType&&r,u=s&&i&&!i.nodeType&&i,f=u&&u.exports===s?a.Buffer:void 0,c=f?f.allocUnsafe:void 0;i.exports=function(d,m){if(m)return d.slice();var v=d.length,p=c?c(v):new d.constructor(v);return d.copy(p),p}},7133:(i,r,o)=>{var a=o(4318);i.exports=function(s,u){var f=u?a(s.buffer):s.buffer;return new s.constructor(f,s.byteOffset,s.length)}},278:i=>{i.exports=function(r,o){var a=-1,s=r.length;for(o||(o=Array(s));++a<s;)o[a]=r[a];return o}},8363:(i,r,o)=>{var a=o(4865),s=o(9465);i.exports=function(u,f,c,d){var m=!c;c||(c={});for(var v=-1,p=f.length;++v<p;){var _=f[v],y=d?d(c[_],u[_],_,c,u):void 0;y===void 0&&(y=u[_]),m?s(c,_,y):a(c,_,y)}return c}},4429:(i,r,o)=>{var a=o(5639)["__core-js_shared__"];i.exports=a},1463:(i,r,o)=>{var a=o(5976),s=o(6612);i.exports=function(u){return a(function(f,c){var d=-1,m=c.length,v=m>1?c[m-1]:void 0,p=m>2?c[2]:void 0;for(v=u.length>3&&typeof v=="function"?(m--,v):void 0,p&&s(c[0],c[1],p)&&(v=m<3?void 0:v,m=1),f=Object(f);++d<m;){var _=c[d];_&&u(f,_,d,v)}return f})}},5063:i=>{i.exports=function(r){return function(o,a,s){for(var u=-1,f=Object(o),c=s(o),d=c.length;d--;){var m=c[r?d:++u];if(a(f[m],m,f)===!1)break}return o}}},8777:(i,r,o)=>{var a=o(852),s=function(){try{var u=a(Object,"defineProperty");return u({},"",{}),u}catch{}}();i.exports=s},1957:(i,r,o)=>{var a=typeof o.g=="object"&&o.g&&o.g.Object===Object&&o.g;i.exports=a},5050:(i,r,o)=>{var a=o(7019);i.exports=function(s,u){var f=s.__data__;return a(u)?f[typeof u=="string"?"string":"hash"]:f.map}},852:(i,r,o)=>{var a=o(8458),s=o(7801);i.exports=function(u,f){var c=s(u,f);return a(c)?c:void 0}},5924:(i,r,o)=>{var a=o(5569)(Object.getPrototypeOf,Object);i.exports=a},9607:(i,r,o)=>{var a=o(2705),s=Object.prototype,u=s.hasOwnProperty,f=s.toString,c=a?a.toStringTag:void 0;i.exports=function(d){var m=u.call(d,c),v=d[c];try{d[c]=void 0;var p=!0}catch{}var _=f.call(d);return p&&(m?d[c]=v:delete d[c]),_}},7801:i=>{i.exports=function(r,o){return r?.[o]}},222:(i,r,o)=>{var a=o(1811),s=o(5694),u=o(1469),f=o(5776),c=o(1780),d=o(327);i.exports=function(m,v,p){for(var _=-1,y=(v=a(v,m)).length,x=!1;++_<y;){var S=d(v[_]);if(!(x=m!=null&&p(m,S)))break;m=m[S]}return x||++_!=y?x:!!(y=m==null?0:m.length)&&c(y)&&f(S,y)&&(u(m)||s(m))}},1789:(i,r,o)=>{var a=o(4536);i.exports=function(){this.__data__=a?a(null):{},this.size=0}},401:i=>{i.exports=function(r){var o=this.has(r)&&delete this.__data__[r];return this.size-=o?1:0,o}},7667:(i,r,o)=>{var a=o(4536),s=Object.prototype.hasOwnProperty;i.exports=function(u){var f=this.__data__;if(a){var c=f[u];return c==="__lodash_hash_undefined__"?void 0:c}return s.call(f,u)?f[u]:void 0}},1327:(i,r,o)=>{var a=o(4536),s=Object.prototype.hasOwnProperty;i.exports=function(u){var f=this.__data__;return a?f[u]!==void 0:s.call(f,u)}},1866:(i,r,o)=>{var a=o(4536);i.exports=function(s,u){var f=this.__data__;return this.size+=this.has(s)?0:1,f[s]=a&&u===void 0?"__lodash_hash_undefined__":u,this}},8517:(i,r,o)=>{var a=o(3118),s=o(5924),u=o(5726);i.exports=function(f){return typeof f.constructor!="function"||u(f)?{}:a(s(f))}},5776:i=>{var r=/^(?:0|[1-9]\d*)$/;i.exports=function(o,a){var s=typeof o;return!!(a=a??9007199254740991)&&(s=="number"||s!="symbol"&&r.test(o))&&o>-1&&o%1==0&&o<a}},6612:(i,r,o)=>{var a=o(7813),s=o(8612),u=o(5776),f=o(3218);i.exports=function(c,d,m){if(!f(m))return!1;var v=typeof d;return!!(v=="number"?s(m)&&u(d,m.length):v=="string"&&d in m)&&a(m[d],c)}},5403:(i,r,o)=>{var a=o(1469),s=o(3448),u=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,f=/^\w*$/;i.exports=function(c,d){if(a(c))return!1;var m=typeof c;return!(m!="number"&&m!="symbol"&&m!="boolean"&&c!=null&&!s(c))||f.test(c)||!u.test(c)||d!=null&&c in Object(d)}},7019:i=>{i.exports=function(r){var o=typeof r;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?r!=="__proto__":r===null}},5346:(i,r,o)=>{var a,s=o(4429),u=(a=/[^.]+$/.exec(s&&s.keys&&s.keys.IE_PROTO||""))?"Symbol(src)_1."+a:"";i.exports=function(f){return!!u&&u in f}},5726:i=>{var r=Object.prototype;i.exports=function(o){var a=o&&o.constructor;return o===(typeof a=="function"&&a.prototype||r)}},7040:i=>{i.exports=function(){this.__data__=[],this.size=0}},4125:(i,r,o)=>{var a=o(8470),s=Array.prototype.splice;i.exports=function(u){var f=this.__data__,c=a(f,u);return!(c<0)&&(c==f.length-1?f.pop():s.call(f,c,1),--this.size,!0)}},2117:(i,r,o)=>{var a=o(8470);i.exports=function(s){var u=this.__data__,f=a(u,s);return f<0?void 0:u[f][1]}},7518:(i,r,o)=>{var a=o(8470);i.exports=function(s){return a(this.__data__,s)>-1}},4705:(i,r,o)=>{var a=o(8470);i.exports=function(s,u){var f=this.__data__,c=a(f,s);return c<0?(++this.size,f.push([s,u])):f[c][1]=u,this}},4785:(i,r,o)=>{var a=o(1989),s=o(8407),u=o(7071);i.exports=function(){this.size=0,this.__data__={hash:new a,map:new(u||s),string:new a}}},1285:(i,r,o)=>{var a=o(5050);i.exports=function(s){var u=a(this,s).delete(s);return this.size-=u?1:0,u}},6e3:(i,r,o)=>{var a=o(5050);i.exports=function(s){return a(this,s).get(s)}},9916:(i,r,o)=>{var a=o(5050);i.exports=function(s){return a(this,s).has(s)}},5265:(i,r,o)=>{var a=o(5050);i.exports=function(s,u){var f=a(this,s),c=f.size;return f.set(s,u),this.size+=f.size==c?0:1,this}},4523:(i,r,o)=>{var a=o(8306);i.exports=function(s){var u=a(s,function(c){return f.size===500&&f.clear(),c}),f=u.cache;return u}},4536:(i,r,o)=>{var a=o(852)(Object,"create");i.exports=a},3498:i=>{i.exports=function(r){var o=[];if(r!=null)for(var a in Object(r))o.push(a);return o}},1167:(i,r,o)=>{i=o.nmd(i);var a=o(1957),s=r&&!r.nodeType&&r,u=s&&i&&!i.nodeType&&i,f=u&&u.exports===s&&a.process,c=function(){try{var d=u&&u.require&&u.require("util").types;return d||f&&f.binding&&f.binding("util")}catch{}}();i.exports=c},2333:i=>{var r=Object.prototype.toString;i.exports=function(o){return r.call(o)}},5569:i=>{i.exports=function(r,o){return function(a){return r(o(a))}}},5357:(i,r,o)=>{var a=o(6874),s=Math.max;i.exports=function(u,f,c){return f=s(f===void 0?u.length-1:f,0),function(){for(var d=arguments,m=-1,v=s(d.length-f,0),p=Array(v);++m<v;)p[m]=d[f+m];m=-1;for(var _=Array(f+1);++m<f;)_[m]=d[m];return _[f]=c(p),a(u,this,_)}}},5639:(i,r,o)=>{var a=o(1957),s=typeof self=="object"&&self&&self.Object===Object&&self,u=a||s||Function("return this")();i.exports=u},6390:i=>{i.exports=function(r,o){if((o!=="constructor"||typeof r[o]!="function")&&o!="__proto__")return r[o]}},61:(i,r,o)=>{var a=o(6560),s=o(1275)(a);i.exports=s},1275:i=>{var r=Date.now;i.exports=function(o){var a=0,s=0;return function(){var u=r(),f=16-(u-s);if(s=u,f>0){if(++a>=800)return arguments[0]}else a=0;return o.apply(void 0,arguments)}}},7465:(i,r,o)=>{var a=o(8407);i.exports=function(){this.__data__=new a,this.size=0}},3779:i=>{i.exports=function(r){var o=this.__data__,a=o.delete(r);return this.size=o.size,a}},7599:i=>{i.exports=function(r){return this.__data__.get(r)}},4758:i=>{i.exports=function(r){return this.__data__.has(r)}},4309:(i,r,o)=>{var a=o(8407),s=o(7071),u=o(3369);i.exports=function(f,c){var d=this.__data__;if(d instanceof a){var m=d.__data__;if(!s||m.length<199)return m.push([f,c]),this.size=++d.size,this;d=this.__data__=new u(m)}return d.set(f,c),this.size=d.size,this}},5514:(i,r,o)=>{var a=o(4523),s=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,u=/\\(\\)?/g,f=a(function(c){var d=[];return c.charCodeAt(0)===46&&d.push(""),c.replace(s,function(m,v,p,_){d.push(p?_.replace(u,"$1"):v||m)}),d});i.exports=f},327:(i,r,o)=>{var a=o(3448);i.exports=function(s){if(typeof s=="string"||a(s))return s;var u=s+"";return u=="0"&&1/s==-1/0?"-0":u}},346:i=>{var r=Function.prototype.toString;i.exports=function(o){if(o!=null){try{return r.call(o)}catch{}try{return o+""}catch{}}return""}},5703:i=>{i.exports=function(r){return function(){return r}}},7813:i=>{i.exports=function(r,o){return r===o||r!=r&&o!=o}},7361:(i,r,o)=>{var a=o(7786);i.exports=function(s,u,f){var c=s==null?void 0:a(s,u);return c===void 0?f:c}},8721:(i,r,o)=>{var a=o(8565),s=o(222);i.exports=function(u,f){return u!=null&&s(u,f,a)}},6557:i=>{i.exports=function(r){return r}},5694:(i,r,o)=>{var a=o(9454),s=o(7005),u=Object.prototype,f=u.hasOwnProperty,c=u.propertyIsEnumerable,d=a(function(){return arguments}())?a:function(m){return s(m)&&f.call(m,"callee")&&!c.call(m,"callee")};i.exports=d},1469:i=>{var r=Array.isArray;i.exports=r},8612:(i,r,o)=>{var a=o(3560),s=o(1780);i.exports=function(u){return u!=null&&s(u.length)&&!a(u)}},9246:(i,r,o)=>{var a=o(8612),s=o(7005);i.exports=function(u){return s(u)&&a(u)}},4144:(i,r,o)=>{i=o.nmd(i);var a=o(5639),s=o(5062),u=r&&!r.nodeType&&r,f=u&&i&&!i.nodeType&&i,c=f&&f.exports===u?a.Buffer:void 0,d=(c?c.isBuffer:void 0)||s;i.exports=d},3560:(i,r,o)=>{var a=o(4239),s=o(3218);i.exports=function(u){if(!s(u))return!1;var f=a(u);return f=="[object Function]"||f=="[object GeneratorFunction]"||f=="[object AsyncFunction]"||f=="[object Proxy]"}},1780:i=>{i.exports=function(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=9007199254740991}},3218:i=>{i.exports=function(r){var o=typeof r;return r!=null&&(o=="object"||o=="function")}},7005:i=>{i.exports=function(r){return r!=null&&typeof r=="object"}},8630:(i,r,o)=>{var a=o(4239),s=o(5924),u=o(7005),f=Function.prototype,c=Object.prototype,d=f.toString,m=c.hasOwnProperty,v=d.call(Object);i.exports=function(p){if(!u(p)||a(p)!="[object Object]")return!1;var _=s(p);if(_===null)return!0;var y=m.call(_,"constructor")&&_.constructor;return typeof y=="function"&&y instanceof y&&d.call(y)==v}},3448:(i,r,o)=>{var a=o(4239),s=o(7005);i.exports=function(u){return typeof u=="symbol"||s(u)&&a(u)=="[object Symbol]"}},6719:(i,r,o)=>{var a=o(8749),s=o(1717),u=o(1167),f=u&&u.isTypedArray,c=f?s(f):a;i.exports=c},1704:(i,r,o)=>{var a=o(4636),s=o(313),u=o(8612);i.exports=function(f){return u(f)?a(f,!0):s(f)}},8306:(i,r,o)=>{var a=o(3369);function s(u,f){if(typeof u!="function"||f!=null&&typeof f!="function")throw new TypeError("Expected a function");var c=function(){var d=arguments,m=f?f.apply(this,d):d[0],v=c.cache;if(v.has(m))return v.get(m);var p=u.apply(this,d);return c.cache=v.set(m,p)||v,p};return c.cache=new(s.Cache||a),c}s.Cache=a,i.exports=s},2492:(i,r,o)=>{var a=o(2980),s=o(1463)(function(u,f,c){a(u,f,c)});i.exports=s},5062:i=>{i.exports=function(){return!1}},9881:(i,r,o)=>{var a=o(8363),s=o(1704);i.exports=function(u){return a(u,s(u))}},9833:(i,r,o)=>{var a=o(531);i.exports=function(s){return s==null?"":a(s)}},2676:function(i){i.exports=function(){"use strict";function r(Q,Y){if(!(Q instanceof Y))throw new TypeError("Cannot call a class as a function")}function o(Q,Y){for(var et=0;et<Y.length;et++){var lt=Y[et];lt.enumerable=lt.enumerable||!1,lt.configurable=!0,"value"in lt&&(lt.writable=!0),Object.defineProperty(Q,lt.key,lt)}}function a(Q,Y,et){return Y&&o(Q.prototype,Y),et&&o(Q,et),Q}var s=function(){function Q(Y,et){this.next=null,this.key=Y,this.data=et,this.left=null,this.right=null}return Q}();function u(Q,Y){return Q>Y?1:Q<Y?-1:0}function f(Q,Y,et){for(var lt=new s(null,null),pt=lt,bt=lt;;){var Et=et(Q,Y.key);if(Et<0){if(Y.left===null)break;if(et(Q,Y.left.key)<0){var Ot=Y.left;if(Y.left=Ot.right,Ot.right=Y,(Y=Ot).left===null)break}bt.left=Y,bt=Y,Y=Y.left}else{if(!(Et>0)||Y.right===null||et(Q,Y.right.key)>0&&(Ot=Y.right,Y.right=Ot.left,Ot.left=Y,(Y=Ot).right===null))break;pt.right=Y,pt=Y,Y=Y.right}}return pt.right=Y.left,bt.left=Y.right,Y.left=lt.right,Y.right=lt.left,Y}function c(Q,Y,et,lt){var pt=new s(Q,Y);if(et===null)return pt.left=pt.right=null,pt;var bt=lt(Q,(et=f(Q,et,lt)).key);return bt<0?(pt.left=et.left,pt.right=et,et.left=null):bt>=0&&(pt.right=et.right,pt.left=et,et.right=null),pt}function d(Q,Y,et){var lt=null,pt=null;if(Y){var bt=et((Y=f(Q,Y,et)).key,Q);bt===0?(lt=Y.left,pt=Y.right):bt<0?(pt=Y.right,Y.right=null,lt=Y):(lt=Y.left,Y.left=null,pt=Y)}return{left:lt,right:pt}}function m(Q,Y,et){return Y===null?Q:(Q===null||((Y=f(Q.key,Y,et)).left=Q),Y)}function v(Q,Y,et,lt,pt){if(Q){lt(Y+(et?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ")+pt(Q)+`
`);var bt=Y+(et?"    ":"\u2502   ");Q.left&&v(Q.left,bt,!1,lt,pt),Q.right&&v(Q.right,bt,!0,lt,pt)}}var p=function(){function Q(Y){Y===void 0&&(Y=u),this._root=null,this._size=0,this._comparator=Y}return Q.prototype.insert=function(Y,et){return this._size++,this._root=c(Y,et,this._root,this._comparator)},Q.prototype.add=function(Y,et){var lt=new s(Y,et);this._root===null&&(lt.left=lt.right=null,this._size++,this._root=lt);var pt=this._comparator,bt=f(Y,this._root,pt),Et=pt(Y,bt.key);return Et===0?this._root=bt:(Et<0?(lt.left=bt.left,lt.right=bt,bt.left=null):Et>0&&(lt.right=bt.right,lt.left=bt,bt.right=null),this._size++,this._root=lt),this._root},Q.prototype.remove=function(Y){this._root=this._remove(Y,this._root,this._comparator)},Q.prototype._remove=function(Y,et,lt){var pt;return et===null?null:lt(Y,(et=f(Y,et,lt)).key)===0?(et.left===null?pt=et.right:(pt=f(Y,et.left,lt)).right=et.right,this._size--,pt):et},Q.prototype.pop=function(){var Y=this._root;if(Y){for(;Y.left;)Y=Y.left;return this._root=f(Y.key,this._root,this._comparator),this._root=this._remove(Y.key,this._root,this._comparator),{key:Y.key,data:Y.data}}return null},Q.prototype.findStatic=function(Y){for(var et=this._root,lt=this._comparator;et;){var pt=lt(Y,et.key);if(pt===0)return et;et=pt<0?et.left:et.right}return null},Q.prototype.find=function(Y){return this._root&&(this._root=f(Y,this._root,this._comparator),this._comparator(Y,this._root.key)!==0)?null:this._root},Q.prototype.contains=function(Y){for(var et=this._root,lt=this._comparator;et;){var pt=lt(Y,et.key);if(pt===0)return!0;et=pt<0?et.left:et.right}return!1},Q.prototype.forEach=function(Y,et){for(var lt=this._root,pt=[],bt=!1;!bt;)lt!==null?(pt.push(lt),lt=lt.left):pt.length!==0?(lt=pt.pop(),Y.call(et,lt),lt=lt.right):bt=!0;return this},Q.prototype.range=function(Y,et,lt,pt){for(var bt=[],Et=this._comparator,Ot=this._root;bt.length!==0||Ot;)if(Ot)bt.push(Ot),Ot=Ot.left;else{if(Et((Ot=bt.pop()).key,et)>0)break;if(Et(Ot.key,Y)>=0&&lt.call(pt,Ot))return this;Ot=Ot.right}return this},Q.prototype.keys=function(){var Y=[];return this.forEach(function(et){var lt=et.key;return Y.push(lt)}),Y},Q.prototype.values=function(){var Y=[];return this.forEach(function(et){var lt=et.data;return Y.push(lt)}),Y},Q.prototype.min=function(){return this._root?this.minNode(this._root).key:null},Q.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},Q.prototype.minNode=function(Y){if(Y===void 0&&(Y=this._root),Y)for(;Y.left;)Y=Y.left;return Y},Q.prototype.maxNode=function(Y){if(Y===void 0&&(Y=this._root),Y)for(;Y.right;)Y=Y.right;return Y},Q.prototype.at=function(Y){for(var et=this._root,lt=!1,pt=0,bt=[];!lt;)if(et)bt.push(et),et=et.left;else if(bt.length>0){if(et=bt.pop(),pt===Y)return et;pt++,et=et.right}else lt=!0;return null},Q.prototype.next=function(Y){var et=this._root,lt=null;if(Y.right){for(lt=Y.right;lt.left;)lt=lt.left;return lt}for(var pt=this._comparator;et;){var bt=pt(Y.key,et.key);if(bt===0)break;bt<0?(lt=et,et=et.left):et=et.right}return lt},Q.prototype.prev=function(Y){var et=this._root,lt=null;if(Y.left!==null){for(lt=Y.left;lt.right;)lt=lt.right;return lt}for(var pt=this._comparator;et;){var bt=pt(Y.key,et.key);if(bt===0)break;bt<0?et=et.left:(lt=et,et=et.right)}return lt},Q.prototype.clear=function(){return this._root=null,this._size=0,this},Q.prototype.toList=function(){return x(this._root)},Q.prototype.load=function(Y,et,lt){et===void 0&&(et=[]),lt===void 0&&(lt=!1);var pt=Y.length,bt=this._comparator;if(lt&&B(Y,et,0,pt-1,bt),this._root===null)this._root=_(Y,et,0,pt),this._size=pt;else{var Et=O(this.toList(),y(Y,et),bt);pt=this._size+pt,this._root=S({head:Et},0,pt)}return this},Q.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(Q.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(Q.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),Q.prototype.toString=function(Y){Y===void 0&&(Y=function(lt){return String(lt.key)});var et=[];return v(this._root,"",!0,function(lt){return et.push(lt)},Y),et.join("")},Q.prototype.update=function(Y,et,lt){var pt=this._comparator,bt=d(Y,this._root,pt),Et=bt.left,Ot=bt.right;pt(Y,et)<0?Ot=c(et,lt,Ot,pt):Et=c(et,lt,Et,pt),this._root=m(Et,Ot,pt)},Q.prototype.split=function(Y){return d(Y,this._root,this._comparator)},Q}();function _(Q,Y,et,lt){var pt=lt-et;if(pt>0){var bt=et+Math.floor(pt/2),Et=Q[bt],Ot=Y[bt],zt=new s(Et,Ot);return zt.left=_(Q,Y,et,bt),zt.right=_(Q,Y,bt+1,lt),zt}return null}function y(Q,Y){for(var et=new s(null,null),lt=et,pt=0;pt<Q.length;pt++)lt=lt.next=new s(Q[pt],Y[pt]);return lt.next=null,et.next}function x(Q){for(var Y=Q,et=[],lt=!1,pt=new s(null,null),bt=pt;!lt;)Y?(et.push(Y),Y=Y.left):et.length>0?Y=(Y=bt=bt.next=et.pop()).right:lt=!0;return bt.next=null,pt.next}function S(Q,Y,et){var lt=et-Y;if(lt>0){var pt=Y+Math.floor(lt/2),bt=S(Q,Y,pt),Et=Q.head;return Et.left=bt,Q.head=Q.head.next,Et.right=S(Q,pt+1,et),Et}return null}function O(Q,Y,et){for(var lt=new s(null,null),pt=lt,bt=Q,Et=Y;bt!==null&&Et!==null;)et(bt.key,Et.key)<0?(pt.next=bt,bt=bt.next):(pt.next=Et,Et=Et.next),pt=pt.next;return bt!==null?pt.next=bt:Et!==null&&(pt.next=Et),lt.next}function B(Q,Y,et,lt,pt){if(!(et>=lt)){for(var bt=Q[et+lt>>1],Et=et-1,Ot=lt+1;;){do Et++;while(pt(Q[Et],bt)<0);do Ot--;while(pt(Q[Ot],bt)>0);if(Et>=Ot)break;var zt=Q[Et];Q[Et]=Q[Ot],Q[Ot]=zt,zt=Y[Et],Y[Et]=Y[Ot],Y[Ot]=zt}B(Q,Y,et,Ot,pt),B(Q,Y,Ot+1,lt,pt)}}var U=function(Q,Y){return Q.ll.x<=Y.x&&Y.x<=Q.ur.x&&Q.ll.y<=Y.y&&Y.y<=Q.ur.y},z=function(Q,Y){if(Y.ur.x<Q.ll.x||Q.ur.x<Y.ll.x||Y.ur.y<Q.ll.y||Q.ur.y<Y.ll.y)return null;var et=Q.ll.x<Y.ll.x?Y.ll.x:Q.ll.x,lt=Q.ur.x<Y.ur.x?Q.ur.x:Y.ur.x;return{ll:{x:et,y:Q.ll.y<Y.ll.y?Y.ll.y:Q.ll.y},ur:{x:lt,y:Q.ur.y<Y.ur.y?Q.ur.y:Y.ur.y}}},q=Number.EPSILON;q===void 0&&(q=Math.pow(2,-52));var G=q*q,tt=function(Q,Y){if(-q<Q&&Q<q&&-q<Y&&Y<q)return 0;var et=Q-Y;return et*et<G*Q*Y?0:Q<Y?-1:1},K=function(){function Q(){r(this,Q),this.reset()}return a(Q,[{key:"reset",value:function(){this.xRounder=new D,this.yRounder=new D}},{key:"round",value:function(Y,et){return{x:this.xRounder.round(Y),y:this.yRounder.round(et)}}}]),Q}(),D=function(){function Q(){r(this,Q),this.tree=new p,this.round(0)}return a(Q,[{key:"round",value:function(Y){var et=this.tree.add(Y),lt=this.tree.prev(et);if(lt!==null&&tt(et.key,lt.key)===0)return this.tree.remove(Y),lt.key;var pt=this.tree.next(et);return pt!==null&&tt(et.key,pt.key)===0?(this.tree.remove(Y),pt.key):Y}}]),Q}(),N=new K,Z=function(Q,Y){return Q.x*Y.y-Q.y*Y.x},w=function(Q,Y){return Q.x*Y.x+Q.y*Y.y},C=function(Q,Y,et){var lt={x:Y.x-Q.x,y:Y.y-Q.y},pt={x:et.x-Q.x,y:et.y-Q.y},bt=Z(lt,pt);return tt(bt,0)},k=function(Q){return Math.sqrt(w(Q,Q))},T=function(Q,Y,et){var lt={x:Y.x-Q.x,y:Y.y-Q.y},pt={x:et.x-Q.x,y:et.y-Q.y};return Z(pt,lt)/k(pt)/k(lt)},R=function(Q,Y,et){var lt={x:Y.x-Q.x,y:Y.y-Q.y},pt={x:et.x-Q.x,y:et.y-Q.y};return w(pt,lt)/k(pt)/k(lt)},F=function(Q,Y,et){return Y.y===0?null:{x:Q.x+Y.x/Y.y*(et-Q.y),y:et}},H=function(Q,Y,et){return Y.x===0?null:{x:et,y:Q.y+Y.y/Y.x*(et-Q.x)}},it=function(Q,Y,et,lt){if(Y.x===0)return H(et,lt,Q.x);if(lt.x===0)return H(Q,Y,et.x);if(Y.y===0)return F(et,lt,Q.y);if(lt.y===0)return F(Q,Y,et.y);var pt=Z(Y,lt);if(pt==0)return null;var bt={x:et.x-Q.x,y:et.y-Q.y},Et=Z(bt,Y)/pt,Ot=Z(bt,lt)/pt;return{x:(Q.x+Ot*Y.x+(et.x+Et*lt.x))/2,y:(Q.y+Ot*Y.y+(et.y+Et*lt.y))/2}},ot=function(){function Q(Y,et){r(this,Q),Y.events===void 0?Y.events=[this]:Y.events.push(this),this.point=Y,this.isLeft=et}return a(Q,null,[{key:"compare",value:function(Y,et){var lt=Q.comparePoints(Y.point,et.point);return lt!==0?lt:(Y.point!==et.point&&Y.link(et),Y.isLeft!==et.isLeft?Y.isLeft?1:-1:$.compare(Y.segment,et.segment))}},{key:"comparePoints",value:function(Y,et){return Y.x<et.x?-1:Y.x>et.x?1:Y.y<et.y?-1:Y.y>et.y?1:0}}]),a(Q,[{key:"link",value:function(Y){if(Y.point===this.point)throw new Error("Tried to link already linked events");for(var et=Y.point.events,lt=0,pt=et.length;lt<pt;lt++){var bt=et[lt];this.point.events.push(bt),bt.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var Y=this.point.events.length,et=0;et<Y;et++){var lt=this.point.events[et];if(lt.segment.consumedBy===void 0)for(var pt=et+1;pt<Y;pt++){var bt=this.point.events[pt];bt.consumedBy===void 0&&lt.otherSE.point.events===bt.otherSE.point.events&&lt.segment.consume(bt.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var Y=[],et=0,lt=this.point.events.length;et<lt;et++){var pt=this.point.events[et];pt!==this&&!pt.segment.ringOut&&pt.segment.isInResult()&&Y.push(pt)}return Y}},{key:"getLeftmostComparator",value:function(Y){var et=this,lt=new Map,pt=function(bt){var Et=bt.otherSE;lt.set(bt,{sine:T(et.point,Y.point,Et.point),cosine:R(et.point,Y.point,Et.point)})};return function(bt,Et){lt.has(bt)||pt(bt),lt.has(Et)||pt(Et);var Ot=lt.get(bt),zt=Ot.sine,Gt=Ot.cosine,Jt=lt.get(Et),Kt=Jt.sine,ie=Jt.cosine;return zt>=0&&Kt>=0?Gt<ie?1:Gt>ie?-1:0:zt<0&&Kt<0?Gt<ie?-1:Gt>ie?1:0:Kt<zt?-1:Kt>zt?1:0}}}]),Q}(),dt=0,$=function(){function Q(Y,et,lt,pt){r(this,Q),this.id=++dt,this.leftSE=Y,Y.segment=this,Y.otherSE=et,this.rightSE=et,et.segment=this,et.otherSE=Y,this.rings=lt,this.windings=pt}return a(Q,null,[{key:"compare",value:function(Y,et){var lt=Y.leftSE.point.x,pt=et.leftSE.point.x,bt=Y.rightSE.point.x,Et=et.rightSE.point.x;if(Et<lt)return 1;if(bt<pt)return-1;var Ot=Y.leftSE.point.y,zt=et.leftSE.point.y,Gt=Y.rightSE.point.y,Jt=et.rightSE.point.y;if(lt<pt){if(zt<Ot&&zt<Gt)return 1;if(zt>Ot&&zt>Gt)return-1;var Kt=Y.comparePoint(et.leftSE.point);if(Kt<0)return 1;if(Kt>0)return-1;var ie=et.comparePoint(Y.rightSE.point);return ie!==0?ie:-1}if(lt>pt){if(Ot<zt&&Ot<Jt)return-1;if(Ot>zt&&Ot>Jt)return 1;var Xt=et.comparePoint(Y.leftSE.point);if(Xt!==0)return Xt;var Ut=Y.comparePoint(et.rightSE.point);return Ut<0?1:Ut>0?-1:1}if(Ot<zt)return-1;if(Ot>zt)return 1;if(bt<Et){var _e=et.comparePoint(Y.rightSE.point);if(_e!==0)return _e}if(bt>Et){var le=Y.comparePoint(et.rightSE.point);if(le<0)return 1;if(le>0)return-1}if(bt!==Et){var ye=Gt-Ot,Ze=bt-lt,ce=Jt-zt,ke=Et-pt;if(ye>Ze&&ce<ke)return 1;if(ye<Ze&&ce>ke)return-1}return bt>Et?1:bt<Et||Gt<Jt?-1:Gt>Jt?1:Y.id<et.id?-1:Y.id>et.id?1:0}}]),a(Q,[{key:"replaceRightSE",value:function(Y){this.rightSE=Y,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var Y=this.leftSE.point.y,et=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:Y<et?Y:et},ur:{x:this.rightSE.point.x,y:Y>et?Y:et}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(Y){return Y.x===this.leftSE.point.x&&Y.y===this.leftSE.point.y||Y.x===this.rightSE.point.x&&Y.y===this.rightSE.point.y}},{key:"comparePoint",value:function(Y){if(this.isAnEndpoint(Y))return 0;var et=this.leftSE.point,lt=this.rightSE.point,pt=this.vector();if(et.x===lt.x)return Y.x===et.x?0:Y.x<et.x?1:-1;var bt=(Y.y-et.y)/pt.y,Et=et.x+bt*pt.x;if(Y.x===Et)return 0;var Ot=(Y.x-et.x)/pt.x,zt=et.y+Ot*pt.y;return Y.y===zt?0:Y.y<zt?-1:1}},{key:"getIntersection",value:function(Y){var et=this.bbox(),lt=Y.bbox(),pt=z(et,lt);if(pt===null)return null;var bt=this.leftSE.point,Et=this.rightSE.point,Ot=Y.leftSE.point,zt=Y.rightSE.point,Gt=U(et,Ot)&&this.comparePoint(Ot)===0,Jt=U(lt,bt)&&Y.comparePoint(bt)===0,Kt=U(et,zt)&&this.comparePoint(zt)===0,ie=U(lt,Et)&&Y.comparePoint(Et)===0;if(Jt&&Gt)return ie&&!Kt?Et:!ie&&Kt?zt:null;if(Jt)return Kt&&bt.x===zt.x&&bt.y===zt.y?null:bt;if(Gt)return ie&&Et.x===Ot.x&&Et.y===Ot.y?null:Ot;if(ie&&Kt)return null;if(ie)return Et;if(Kt)return zt;var Xt=it(bt,this.vector(),Ot,Y.vector());return Xt===null?null:U(pt,Xt)?N.round(Xt.x,Xt.y):null}},{key:"split",value:function(Y){var et=[],lt=Y.events!==void 0,pt=new ot(Y,!0),bt=new ot(Y,!1),Et=this.rightSE;this.replaceRightSE(bt),et.push(bt),et.push(pt);var Ot=new Q(pt,Et,this.rings.slice(),this.windings.slice());return ot.comparePoints(Ot.leftSE.point,Ot.rightSE.point)>0&&Ot.swapEvents(),ot.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),lt&&(pt.checkForConsuming(),bt.checkForConsuming()),et}},{key:"swapEvents",value:function(){var Y=this.rightSE;this.rightSE=this.leftSE,this.leftSE=Y,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var et=0,lt=this.windings.length;et<lt;et++)this.windings[et]*=-1}},{key:"consume",value:function(Y){for(var et=this,lt=Y;et.consumedBy;)et=et.consumedBy;for(;lt.consumedBy;)lt=lt.consumedBy;var pt=Q.compare(et,lt);if(pt!==0){if(pt>0){var bt=et;et=lt,lt=bt}if(et.prev===lt){var Et=et;et=lt,lt=Et}for(var Ot=0,zt=lt.rings.length;Ot<zt;Ot++){var Gt=lt.rings[Ot],Jt=lt.windings[Ot],Kt=et.rings.indexOf(Gt);Kt===-1?(et.rings.push(Gt),et.windings.push(Jt)):et.windings[Kt]+=Jt}lt.rings=null,lt.windings=null,lt.consumedBy=et,lt.leftSE.consumedBy=et.leftSE,lt.rightSE.consumedBy=et.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(this.prev){var Y=this.prev.consumedBy||this.prev;this._beforeState=Y.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var Y=this.beforeState();this._afterState={rings:Y.rings.slice(0),windings:Y.windings.slice(0),multiPolys:[]};for(var et=this._afterState.rings,lt=this._afterState.windings,pt=this._afterState.multiPolys,bt=0,Et=this.rings.length;bt<Et;bt++){var Ot=this.rings[bt],zt=this.windings[bt],Gt=et.indexOf(Ot);Gt===-1?(et.push(Ot),lt.push(zt)):lt[Gt]+=zt}for(var Jt=[],Kt=[],ie=0,Xt=et.length;ie<Xt;ie++)if(lt[ie]!==0){var Ut=et[ie],_e=Ut.poly;if(Kt.indexOf(_e)===-1)if(Ut.isExterior)Jt.push(_e);else{Kt.indexOf(_e)===-1&&Kt.push(_e);var le=Jt.indexOf(Ut.poly);le!==-1&&Jt.splice(le,1)}}for(var ye=0,Ze=Jt.length;ye<Ze;ye++){var ce=Jt[ye].multiPoly;pt.indexOf(ce)===-1&&pt.push(ce)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var Y=this.beforeState().multiPolys,et=this.afterState().multiPolys;switch(It.type){case"union":var lt=Y.length===0,pt=et.length===0;this._isInResult=lt!==pt;break;case"intersection":var bt,Et;Y.length<et.length?(bt=Y.length,Et=et.length):(bt=et.length,Et=Y.length),this._isInResult=Et===It.numMultiPolys&&bt<Et;break;case"xor":var Ot=Math.abs(Y.length-et.length);this._isInResult=Ot%2==1;break;case"difference":var zt=function(Gt){return Gt.length===1&&Gt[0].isSubject};this._isInResult=zt(Y)!==zt(et);break;default:throw new Error("Unrecognized operation type found ".concat(It.type))}return this._isInResult}}],[{key:"fromRing",value:function(Y,et,lt){var pt,bt,Et,Ot=ot.comparePoints(Y,et);if(Ot<0)pt=Y,bt=et,Et=1;else{if(!(Ot>0))throw new Error("Tried to create degenerate segment at [".concat(Y.x,", ").concat(Y.y,"]"));pt=et,bt=Y,Et=-1}return new Q(new ot(pt,!0),new ot(bt,!1),[lt],[Et])}}]),Q}(),ct=function(){function Q(Y,et,lt){if(r(this,Q),!Array.isArray(Y)||Y.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=et,this.isExterior=lt,this.segments=[],typeof Y[0][0]!="number"||typeof Y[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var pt=N.round(Y[0][0],Y[0][1]);this.bbox={ll:{x:pt.x,y:pt.y},ur:{x:pt.x,y:pt.y}};for(var bt=pt,Et=1,Ot=Y.length;Et<Ot;Et++){if(typeof Y[Et][0]!="number"||typeof Y[Et][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var zt=N.round(Y[Et][0],Y[Et][1]);zt.x===bt.x&&zt.y===bt.y||(this.segments.push($.fromRing(bt,zt,this)),zt.x<this.bbox.ll.x&&(this.bbox.ll.x=zt.x),zt.y<this.bbox.ll.y&&(this.bbox.ll.y=zt.y),zt.x>this.bbox.ur.x&&(this.bbox.ur.x=zt.x),zt.y>this.bbox.ur.y&&(this.bbox.ur.y=zt.y),bt=zt)}pt.x===bt.x&&pt.y===bt.y||this.segments.push($.fromRing(bt,pt,this))}return a(Q,[{key:"getSweepEvents",value:function(){for(var Y=[],et=0,lt=this.segments.length;et<lt;et++){var pt=this.segments[et];Y.push(pt.leftSE),Y.push(pt.rightSE)}return Y}}]),Q}(),W=function(){function Q(Y,et){if(r(this,Q),!Array.isArray(Y))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new ct(Y[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var lt=1,pt=Y.length;lt<pt;lt++){var bt=new ct(Y[lt],this,!1);bt.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=bt.bbox.ll.x),bt.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=bt.bbox.ll.y),bt.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=bt.bbox.ur.x),bt.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=bt.bbox.ur.y),this.interiorRings.push(bt)}this.multiPoly=et}return a(Q,[{key:"getSweepEvents",value:function(){for(var Y=this.exteriorRing.getSweepEvents(),et=0,lt=this.interiorRings.length;et<lt;et++)for(var pt=this.interiorRings[et].getSweepEvents(),bt=0,Et=pt.length;bt<Et;bt++)Y.push(pt[bt]);return Y}}]),Q}(),V=function(){function Q(Y,et){if(r(this,Q),!Array.isArray(Y))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof Y[0][0][0]=="number"&&(Y=[Y])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var lt=0,pt=Y.length;lt<pt;lt++){var bt=new W(Y[lt],this);bt.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=bt.bbox.ll.x),bt.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=bt.bbox.ll.y),bt.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=bt.bbox.ur.x),bt.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=bt.bbox.ur.y),this.polys.push(bt)}this.isSubject=et}return a(Q,[{key:"getSweepEvents",value:function(){for(var Y=[],et=0,lt=this.polys.length;et<lt;et++)for(var pt=this.polys[et].getSweepEvents(),bt=0,Et=pt.length;bt<Et;bt++)Y.push(pt[bt]);return Y}}]),Q}(),rt=function(){function Q(Y){r(this,Q),this.events=Y;for(var et=0,lt=Y.length;et<lt;et++)Y[et].segment.ringOut=this;this.poly=null}return a(Q,null,[{key:"factory",value:function(Y){for(var et=[],lt=0,pt=Y.length;lt<pt;lt++){var bt=Y[lt];if(bt.isInResult()&&!bt.ringOut){for(var Et=null,Ot=bt.leftSE,zt=bt.rightSE,Gt=[Ot],Jt=Ot.point,Kt=[];Et=Ot,Ot=zt,Gt.push(Ot),Ot.point!==Jt;)for(;;){var ie=Ot.getAvailableLinkedEvents();if(ie.length===0){var Xt=Gt[0].point,Ut=Gt[Gt.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(Xt.x,",")+" ".concat(Xt.y,"]. Last matching segment found ends at")+" [".concat(Ut.x,", ").concat(Ut.y,"]."))}if(ie.length===1){zt=ie[0].otherSE;break}for(var _e=null,le=0,ye=Kt.length;le<ye;le++)if(Kt[le].point===Ot.point){_e=le;break}if(_e===null){Kt.push({index:Gt.length,point:Ot.point});var Ze=Ot.getLeftmostComparator(Et);zt=ie.sort(Ze)[0].otherSE;break}var ce=Kt.splice(_e)[0],ke=Gt.splice(ce.index);ke.unshift(ke[0].otherSE),et.push(new Q(ke.reverse()))}et.push(new Q(Gt))}}return et}}]),a(Q,[{key:"getGeom",value:function(){for(var Y=this.events[0].point,et=[Y],lt=1,pt=this.events.length-1;lt<pt;lt++){var bt=this.events[lt].point,Et=this.events[lt+1].point;C(bt,Y,Et)!==0&&(et.push(bt),Y=bt)}if(et.length===1)return null;var Ot=et[0],zt=et[1];C(Ot,Y,zt)===0&&et.shift(),et.push(et[0]);for(var Gt=this.isExteriorRing()?1:-1,Jt=this.isExteriorRing()?0:et.length-1,Kt=this.isExteriorRing()?et.length:-1,ie=[],Xt=Jt;Xt!=Kt;Xt+=Gt)ie.push([et[Xt].x,et[Xt].y]);return ie}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var Y=this.enclosingRing();this._isExteriorRing=!Y||!Y.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var Y=this.events[0],et=1,lt=this.events.length;et<lt;et++){var pt=this.events[et];ot.compare(Y,pt)>0&&(Y=pt)}for(var bt=Y.segment.prevInResult(),Et=bt?bt.prevInResult():null;;){if(!bt)return null;if(!Et)return bt.ringOut;if(Et.ringOut!==bt.ringOut)return Et.ringOut.enclosingRing()!==bt.ringOut?bt.ringOut:bt.ringOut.enclosingRing();bt=Et.prevInResult(),Et=bt?bt.prevInResult():null}}}]),Q}(),mt=function(){function Q(Y){r(this,Q),this.exteriorRing=Y,Y.poly=this,this.interiorRings=[]}return a(Q,[{key:"addInterior",value:function(Y){this.interiorRings.push(Y),Y.poly=this}},{key:"getGeom",value:function(){var Y=[this.exteriorRing.getGeom()];if(Y[0]===null)return null;for(var et=0,lt=this.interiorRings.length;et<lt;et++){var pt=this.interiorRings[et].getGeom();pt!==null&&Y.push(pt)}return Y}}]),Q}(),wt=function(){function Q(Y){r(this,Q),this.rings=Y,this.polys=this._composePolys(Y)}return a(Q,[{key:"getGeom",value:function(){for(var Y=[],et=0,lt=this.polys.length;et<lt;et++){var pt=this.polys[et].getGeom();pt!==null&&Y.push(pt)}return Y}},{key:"_composePolys",value:function(Y){for(var et=[],lt=0,pt=Y.length;lt<pt;lt++){var bt=Y[lt];if(!bt.poly)if(bt.isExteriorRing())et.push(new mt(bt));else{var Et=bt.enclosingRing();Et.poly||et.push(new mt(Et)),Et.poly.addInterior(bt)}}return et}}]),Q}(),_t=function(){function Q(Y){var et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$.compare;r(this,Q),this.queue=Y,this.tree=new p(et),this.segments=[]}return a(Q,[{key:"process",value:function(Y){var et=Y.segment,lt=[];if(Y.consumedBy)return Y.isLeft?this.queue.remove(Y.otherSE):this.tree.remove(et),lt;var pt=Y.isLeft?this.tree.insert(et):this.tree.find(et);if(!pt)throw new Error("Unable to find segment #".concat(et.id," ")+"[".concat(et.leftSE.point.x,", ").concat(et.leftSE.point.y,"] -> ")+"[".concat(et.rightSE.point.x,", ").concat(et.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var bt=pt,Et=pt,Ot=void 0,zt=void 0;Ot===void 0;)(bt=this.tree.prev(bt))===null?Ot=null:bt.key.consumedBy===void 0&&(Ot=bt.key);for(;zt===void 0;)(Et=this.tree.next(Et))===null?zt=null:Et.key.consumedBy===void 0&&(zt=Et.key);if(Y.isLeft){var Gt=null;if(Ot){var Jt=Ot.getIntersection(et);if(Jt!==null&&(et.isAnEndpoint(Jt)||(Gt=Jt),!Ot.isAnEndpoint(Jt)))for(var Kt=this._splitSafely(Ot,Jt),ie=0,Xt=Kt.length;ie<Xt;ie++)lt.push(Kt[ie])}var Ut=null;if(zt){var _e=zt.getIntersection(et);if(_e!==null&&(et.isAnEndpoint(_e)||(Ut=_e),!zt.isAnEndpoint(_e)))for(var le=this._splitSafely(zt,_e),ye=0,Ze=le.length;ye<Ze;ye++)lt.push(le[ye])}if(Gt!==null||Ut!==null){var ce=null;ce=Gt===null?Ut:Ut===null||ot.comparePoints(Gt,Ut)<=0?Gt:Ut,this.queue.remove(et.rightSE),lt.push(et.rightSE);for(var ke=et.split(ce),He=0,$t=ke.length;He<$t;He++)lt.push(ke[He])}lt.length>0?(this.tree.remove(et),lt.push(Y)):(this.segments.push(et),et.prev=Ot)}else{if(Ot&&zt){var Te=Ot.getIntersection(zt);if(Te!==null){if(!Ot.isAnEndpoint(Te))for(var bi=this._splitSafely(Ot,Te),ue=0,Fe=bi.length;ue<Fe;ue++)lt.push(bi[ue]);if(!zt.isAnEndpoint(Te))for(var ai=this._splitSafely(zt,Te),Le=0,Oe=ai.length;Le<Oe;Le++)lt.push(ai[Le])}}this.tree.remove(et)}return lt}},{key:"_splitSafely",value:function(Y,et){this.tree.remove(Y);var lt=Y.rightSE;this.queue.remove(lt);var pt=Y.split(et);return pt.push(lt),Y.consumedBy===void 0&&this.tree.insert(Y),pt}}]),Q}(),Ct=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Ft=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,It=new(function(){function Q(){r(this,Q)}return a(Q,[{key:"run",value:function(Y,et,lt){It.type=Y,N.reset();for(var pt=[new V(et,!0)],bt=0,Et=lt.length;bt<Et;bt++)pt.push(new V(lt[bt],!1));if(It.numMultiPolys=pt.length,It.type==="difference")for(var Ot=pt[0],zt=1;zt<pt.length;)z(pt[zt].bbox,Ot.bbox)!==null?zt++:pt.splice(zt,1);if(It.type==="intersection"){for(var Gt=0,Jt=pt.length;Gt<Jt;Gt++)for(var Kt=pt[Gt],ie=Gt+1,Xt=pt.length;ie<Xt;ie++)if(z(Kt.bbox,pt[ie].bbox)===null)return[]}for(var Ut=new p(ot.compare),_e=0,le=pt.length;_e<le;_e++)for(var ye=pt[_e].getSweepEvents(),Ze=0,ce=ye.length;Ze<ce;Ze++)if(Ut.insert(ye[Ze]),Ut.size>Ct)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var ke=new _t(Ut),He=Ut.size,$t=Ut.pop();$t;){var Te=$t.key;if(Ut.size===He){var bi=Te.segment;throw new Error("Unable to pop() ".concat(Te.isLeft?"left":"right"," SweepEvent ")+"[".concat(Te.point.x,", ").concat(Te.point.y,"] from segment #").concat(bi.id," ")+"[".concat(bi.leftSE.point.x,", ").concat(bi.leftSE.point.y,"] -> ")+"[".concat(bi.rightSE.point.x,", ").concat(bi.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(Ut.size>Ct)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(ke.segments.length>Ft)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var ue=ke.process(Te),Fe=0,ai=ue.length;Fe<ai;Fe++){var Le=ue[Fe];Le.consumedBy===void 0&&Ut.insert(Le)}He=Ut.size,$t=Ut.pop()}N.reset();var Oe=rt.factory(ke.segments);return new wt(Oe).getGeom()}}]),Q}()),vt=function(Q){for(var Y=arguments.length,et=new Array(Y>1?Y-1:0),lt=1;lt<Y;lt++)et[lt-1]=arguments[lt];return It.run("union",Q,et)},kt=function(Q){for(var Y=arguments.length,et=new Array(Y>1?Y-1:0),lt=1;lt<Y;lt++)et[lt-1]=arguments[lt];return It.run("intersection",Q,et)},gt=function(Q){for(var Y=arguments.length,et=new Array(Y>1?Y-1:0),lt=1;lt<Y;lt++)et[lt-1]=arguments[lt];return It.run("xor",Q,et)},ut=function(Q){for(var Y=arguments.length,et=new Array(Y>1?Y-1:0),lt=1;lt<Y;lt++)et[lt-1]=arguments[lt];return It.run("difference",Q,et)};return{union:vt,intersection:kt,xor:gt,difference:ut}}()},2582:function(i){i.exports=function(){"use strict";function r(B,U,z,q,G){(function tt(K,D,N,Z,w){for(;Z>N;){if(Z-N>600){var C=Z-N+1,k=D-N+1,T=Math.log(C),R=.5*Math.exp(2*T/3),F=.5*Math.sqrt(T*R*(C-R)/C)*(k-C/2<0?-1:1);tt(K,D,Math.max(N,Math.floor(D-k*R/C+F)),Math.min(Z,Math.floor(D+(C-k)*R/C+F)),w)}var H=K[D],it=N,ot=Z;for(o(K,N,D),w(K[Z],H)>0&&o(K,N,Z);it<ot;){for(o(K,it,ot),it++,ot--;w(K[it],H)<0;)it++;for(;w(K[ot],H)>0;)ot--}w(K[N],H)===0?o(K,N,ot):o(K,++ot,Z),ot<=D&&(N=ot+1),D<=ot&&(Z=ot-1)}})(B,U,z||0,q||B.length-1,G||a)}function o(B,U,z){var q=B[U];B[U]=B[z],B[z]=q}function a(B,U){return B<U?-1:B>U?1:0}var s=function(B){B===void 0&&(B=9),this._maxEntries=Math.max(4,B),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function u(B,U,z){if(!z)return U.indexOf(B);for(var q=0;q<U.length;q++)if(z(B,U[q]))return q;return-1}function f(B,U){c(B,0,B.children.length,U,B)}function c(B,U,z,q,G){G||(G=S(null)),G.minX=1/0,G.minY=1/0,G.maxX=-1/0,G.maxY=-1/0;for(var tt=U;tt<z;tt++){var K=B.children[tt];d(G,B.leaf?q(K):K)}return G}function d(B,U){return B.minX=Math.min(B.minX,U.minX),B.minY=Math.min(B.minY,U.minY),B.maxX=Math.max(B.maxX,U.maxX),B.maxY=Math.max(B.maxY,U.maxY),B}function m(B,U){return B.minX-U.minX}function v(B,U){return B.minY-U.minY}function p(B){return(B.maxX-B.minX)*(B.maxY-B.minY)}function _(B){return B.maxX-B.minX+(B.maxY-B.minY)}function y(B,U){return B.minX<=U.minX&&B.minY<=U.minY&&U.maxX<=B.maxX&&U.maxY<=B.maxY}function x(B,U){return U.minX<=B.maxX&&U.minY<=B.maxY&&U.maxX>=B.minX&&U.maxY>=B.minY}function S(B){return{children:B,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function O(B,U,z,q,G){for(var tt=[U,z];tt.length;)if(!((z=tt.pop())-(U=tt.pop())<=q)){var K=U+Math.ceil((z-U)/q/2)*q;r(B,K,U,z,G),tt.push(U,K,K,z)}}return s.prototype.all=function(){return this._all(this.data,[])},s.prototype.search=function(B){var U=this.data,z=[];if(!x(B,U))return z;for(var q=this.toBBox,G=[];U;){for(var tt=0;tt<U.children.length;tt++){var K=U.children[tt],D=U.leaf?q(K):K;x(B,D)&&(U.leaf?z.push(K):y(B,D)?this._all(K,z):G.push(K))}U=G.pop()}return z},s.prototype.collides=function(B){var U=this.data;if(!x(B,U))return!1;for(var z=[];U;){for(var q=0;q<U.children.length;q++){var G=U.children[q],tt=U.leaf?this.toBBox(G):G;if(x(B,tt)){if(U.leaf||y(B,tt))return!0;z.push(G)}}U=z.pop()}return!1},s.prototype.load=function(B){if(!B||!B.length)return this;if(B.length<this._minEntries){for(var U=0;U<B.length;U++)this.insert(B[U]);return this}var z=this._build(B.slice(),0,B.length-1,0);if(this.data.children.length)if(this.data.height===z.height)this._splitRoot(this.data,z);else{if(this.data.height<z.height){var q=this.data;this.data=z,z=q}this._insert(z,this.data.height-z.height-1,!0)}else this.data=z;return this},s.prototype.insert=function(B){return B&&this._insert(B,this.data.height-1),this},s.prototype.clear=function(){return this.data=S([]),this},s.prototype.remove=function(B,U){if(!B)return this;for(var z,q,G,tt=this.data,K=this.toBBox(B),D=[],N=[];tt||D.length;){if(tt||(tt=D.pop(),q=D[D.length-1],z=N.pop(),G=!0),tt.leaf){var Z=u(B,tt.children,U);if(Z!==-1)return tt.children.splice(Z,1),D.push(tt),this._condense(D),this}G||tt.leaf||!y(tt,K)?q?(z++,tt=q.children[z],G=!1):tt=null:(D.push(tt),N.push(z),z=0,q=tt,tt=tt.children[0])}return this},s.prototype.toBBox=function(B){return B},s.prototype.compareMinX=function(B,U){return B.minX-U.minX},s.prototype.compareMinY=function(B,U){return B.minY-U.minY},s.prototype.toJSON=function(){return this.data},s.prototype.fromJSON=function(B){return this.data=B,this},s.prototype._all=function(B,U){for(var z=[];B;)B.leaf?U.push.apply(U,B.children):z.push.apply(z,B.children),B=z.pop();return U},s.prototype._build=function(B,U,z,q){var G,tt=z-U+1,K=this._maxEntries;if(tt<=K)return f(G=S(B.slice(U,z+1)),this.toBBox),G;q||(q=Math.ceil(Math.log(tt)/Math.log(K)),K=Math.ceil(tt/Math.pow(K,q-1))),(G=S([])).leaf=!1,G.height=q;var D=Math.ceil(tt/K),N=D*Math.ceil(Math.sqrt(K));O(B,U,z,N,this.compareMinX);for(var Z=U;Z<=z;Z+=N){var w=Math.min(Z+N-1,z);O(B,Z,w,D,this.compareMinY);for(var C=Z;C<=w;C+=D){var k=Math.min(C+D-1,w);G.children.push(this._build(B,C,k,q-1))}}return f(G,this.toBBox),G},s.prototype._chooseSubtree=function(B,U,z,q){for(;q.push(U),!U.leaf&&q.length-1!==z;){for(var G=1/0,tt=1/0,K=void 0,D=0;D<U.children.length;D++){var N=U.children[D],Z=p(N),w=(C=B,k=N,(Math.max(k.maxX,C.maxX)-Math.min(k.minX,C.minX))*(Math.max(k.maxY,C.maxY)-Math.min(k.minY,C.minY))-Z);w<tt?(tt=w,G=Z<G?Z:G,K=N):w===tt&&Z<G&&(G=Z,K=N)}U=K||U.children[0]}var C,k;return U},s.prototype._insert=function(B,U,z){var q=z?B:this.toBBox(B),G=[],tt=this._chooseSubtree(q,this.data,U,G);for(tt.children.push(B),d(tt,q);U>=0&&G[U].children.length>this._maxEntries;)this._split(G,U),U--;this._adjustParentBBoxes(q,G,U)},s.prototype._split=function(B,U){var z=B[U],q=z.children.length,G=this._minEntries;this._chooseSplitAxis(z,G,q);var tt=this._chooseSplitIndex(z,G,q),K=S(z.children.splice(tt,z.children.length-tt));K.height=z.height,K.leaf=z.leaf,f(z,this.toBBox),f(K,this.toBBox),U?B[U-1].children.push(K):this._splitRoot(z,K)},s.prototype._splitRoot=function(B,U){this.data=S([B,U]),this.data.height=B.height+1,this.data.leaf=!1,f(this.data,this.toBBox)},s.prototype._chooseSplitIndex=function(B,U,z){for(var q,G,tt,K,D,N,Z,w=1/0,C=1/0,k=U;k<=z-U;k++){var T=c(B,0,k,this.toBBox),R=c(B,k,z,this.toBBox),F=(G=T,tt=R,K=void 0,D=void 0,N=void 0,Z=void 0,K=Math.max(G.minX,tt.minX),D=Math.max(G.minY,tt.minY),N=Math.min(G.maxX,tt.maxX),Z=Math.min(G.maxY,tt.maxY),Math.max(0,N-K)*Math.max(0,Z-D)),H=p(T)+p(R);F<w?(w=F,q=k,C=H<C?H:C):F===w&&H<C&&(C=H,q=k)}return q||z-U},s.prototype._chooseSplitAxis=function(B,U,z){var q=B.leaf?this.compareMinX:m,G=B.leaf?this.compareMinY:v;this._allDistMargin(B,U,z,q)<this._allDistMargin(B,U,z,G)&&B.children.sort(q)},s.prototype._allDistMargin=function(B,U,z,q){B.children.sort(q);for(var G=this.toBBox,tt=c(B,0,U,G),K=c(B,z-U,z,G),D=_(tt)+_(K),N=U;N<z-U;N++){var Z=B.children[N];d(tt,B.leaf?G(Z):Z),D+=_(tt)}for(var w=z-U-1;w>=U;w--){var C=B.children[w];d(K,B.leaf?G(C):C),D+=_(K)}return D},s.prototype._adjustParentBBoxes=function(B,U,z){for(var q=z;q>=0;q--)d(U[q],B)},s.prototype._condense=function(B){for(var U=B.length-1,z=void 0;U>=0;U--)B[U].children.length===0?U>0?(z=B[U-1].children).splice(z.indexOf(B[U]),1):this.clear():f(B[U],this.toBBox)},s}()}},t={};function n(i){var r=t[i];if(r!==void 0)return r.exports;var o=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.n=i=>{var r=i&&i.__esModule?()=>i.default:()=>i;return n.d(r,{a:r}),r},n.d=(i,r)=>{for(var o in r)n.o(r,o)&&!n.o(i,o)&&Object.defineProperty(i,o,{enumerable:!0,get:r[o]})},n.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),n.o=(i,r)=>Object.prototype.hasOwnProperty.call(i,r),n.nmd=i=>(i.paths=[],i.children||(i.children=[]),i),n(5975)})();var yh=hr(ks()),Yl=32,ad=Yl*.5,K0=yh.default.Icon.extend({options:{iconSize:[Yl,Yl],iconAnchor:[ad,ad],popupAnchor:[0,-Yl*.25]}}),vh=async(e,t)=>{let n=await(await fetch(`./data/bl24/poi/${e}`)).json(),i={};for(let r of n.features){let{name:o,description:a,category:s,link:u}=r.properties,f=r.geometry.coordinates[0],c=r.geometry.coordinates[1];if(i[s]||(i[s]=new K0({iconUrl:"./img/icons/"+s+".png"})),u&&a){let m=u[0]!="#"?'target="_blank':"";a=`<a href="${u}" ${m}">${a}</a>`}let d=`<h3>${o}</h3> <p>${a}</p>`;yh.default.marker([c,f],{icon:i[s]}).addTo(t).bindPopup(d)}};var Kl=hr(ks()),ld=async e=>{let t=await(await fetch("./data/bl24/labels/quarters.json")).json();Zl(t,e,"white",.001)},ud=async e=>{let t=await(await fetch("./data/bl24/labels/plazas.json")).json();Zl(t,e,"white",.0015)},hd=async e=>{let t=await(await fetch("./data/bl24/labels/neighbourhoods.json")).json();Zl(t,e,"white",.003);let n=await(await fetch("./data/bl24/labels/non-camp-neighbourhoods.json")).json();Zl(n,e,"white",.003)},Zl=(e,t,n,i)=>{for(let o of e.features){let a=o.properties.size||i,s=o.properties.rotation||0,u=o.properties.name,f=o.geometry.coordinates[0],c=o.geometry.coordinates[1];var r=Kl.latLngBounds([[c-a*.5,f-a*.5],[c+a*.5,f+a*.5]]);let d=J0(u,"bradleyHand",n,s);Kl.svgOverlay(d,r,{opacity:1,interactive:!1}).addTo(t)}};function J0(e,t,n,i){let r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("xmlns","http://www.w3.org/2000/svg");let o="",a=e.split(`
`);for(let u of a)o+=`<tspan x="0" dy=".6em">${u}</tspan>`;r.innerHTML=`<text transform="rotate(${i})" id="text" fill="${n}"font-family="${t}" x="0" y="0" fill="white" >${o}</text>`,document.body.appendChild(r);let s=r.getBBox();return r.remove(),r.setAttribute("viewBox",`${s.x} ${s.y} ${s.width} ${s.height}`),r}var zo=hr(ks()),cd=async(e,t,n)=>{let i=zo.default.control({position:"bottomright"});i.onAdd=function(a){var s=zo.default.DomUtil.create("div","legend");return s.innerHTML+='<img src="./img/slopelegend.png" alt="legend" width="100" height="141">',s};let r=zo.default.control({position:"bottomright"});r.onAdd=function(a){var s=zo.default.DomUtil.create("div","legend");return s.innerHTML+='<img src="./img/heightlegend.png" alt="legend" width="100" height="124">',s};let o=zo.default.control({position:"bottomright"});o.onAdd=function(a){var s=zo.default.DomUtil.create("div","legend");return s.innerHTML+='<a target="blank" href="https://docs.google.com/document/d/1JjJArPpIsX-F82Xmcr2Y2dSPHtu2TjGTeYbP4ASkOWY"><img src="./img/soundlegend.png" alt="legend" width="150" height="165"></a>',s},e.on("overlayadd",function(a){switch(a.name){case"Slope":i.addTo(e);break;case"Height":r.addTo(e);break;case"Soundguide":o.addTo(e);break}}),e.on("overlayremove",function(a){switch(a.name){case"Slope":e.removeControl(i);break;case"Height":e.removeControl(r);break;case"Soundguide":e.removeControl(o);break}}),zo.default.control.layers(void 0,t,{position:"bottomright"}).addTo(e),n.has("Slope")&&i.addTo(e),n.has("Height")&&r.addTo(e),n.has("Soundguide")&&o.addTo(e)};var dd=hr(ks());function fd(e){return function(){let t={opacity:1,fillOpacity:0,weight:1.5,dashArray:"5"};switch(e){case"container":return{...t,fillOpacity:1,color:"#c3c3c3",weight:0};case"naturereserve":return{...t,color:"#00b521",weight:3};case"propertyborder":return{...t,color:"#e77409",weight:1};case"friends":return{...t,color:"turquoise"};case"forbidden":return{...t,color:"red",fillOpacity:.5};case"toilet":return{...t,color:"skyblue",fillOpacity:1,dashArray:"0"};case"bridge":return{...t,color:"brown",fillOpacity:1};case"oktocamp":case"publicplease":case"parking":return{...t,color:"lightblue",fillOpacity:0};case"slope":return{...t,fillOpacity:0,opacity:0};case"fireroad":return{...t,weight:1.5,dashArray:"2",color:"#f05039",fillOpacity:.15};case"plaza":return{...t,weight:2,dashArray:"4",color:"white",opacity:.5,fillOpacity:0};case"quarter":return{...t,weight:5,dashArray:"10",color:"white",opacity:.5,fillOpacity:0};case"neighbourhood":return{...t,weight:5,dashArray:"10",color:"white",opacity:.5,fillOpacity:0};case"minorroad":return{...t,weight:1,dashArray:"20",color:"black",opacity:.5,fillOpacity:0};case"area":return{dashArray:"5",color:"#e7e309",fillOpacity:0,weight:2};case"hiddenforbidden":return{color:"black",fillOpacity:1,weight:0};case"redsoundzone":return{...t,color:"#b60d0d",fillOpacity:.75,weight:0};case"orangesoundzone":return{...t,color:"#ff6f16",fillOpacity:.75,weight:0};case"yellowsoundzone":return{...t,color:"#f4e512",fillOpacity:.75,weight:0};case"closetosanctuary":case"greensoundzone":return{...t,color:"#00e300",fillOpacity:.75,weight:0};case"bluesoundzone":return{...t,color:"#29b6f3",fillOpacity:.75,weight:0};default:return{...t,color:"black"}}}}var ga=async(e,t,n)=>{let r=await(await fetch(n)).json();new Set(r.features.map(a=>a.properties[t])).forEach(a=>{let s=dd.default.geoJSON(r,{filter:Q0(t,a),style:fd(a)});e.groups[a]=s})};function Q0(e,t){return function(n){return n.properties[e]===t}}var bh=hr(ks()),pd=async(e,t,n)=>{var i=bh.default.latLngBounds(n),r=bh.default.imageOverlay(t,i,{opacity:1,interactive:!1});return r};var ya=null,_h=null,wh=null,va=null,ty=new Promise(async e=>{await Promise.allSettled([customElements.whenDefined("sl-drawer")]);let t=document.getElementById("drawer"),n=document.getElementById("drawer-button");t.addEventListener("sl-request-close",i=>{t.placement!="end"&&i.detail.source==="overlay"&&i.preventDefault()}),t.addEventListener("sl-after-hide",i=>{wh&&wh(),_h&&_h(),ya&&(ya=null),lo.page=void 0}),n.addEventListener("click",()=>{va&&va()}),e(t)});async function md(e){for(let t=0;t<e.length;t++){let n=e[t];t==e.length-1?await ao(n,{keepOpen:!1}):await ao(n,{keepOpen:!0})}}async function ao(e,t={}){return new Promise(async n=>{wh=e.onClose||null,_h=n,va=null;let i=await ty;i.placement=e.position||"bottom";let r=i.querySelector(".container");r.innerHTML="";let a=await(await fetch(`drawers/${e.file}.html`)).text();e.file.indexOf("home")>-1&&(e.keepOpen=!0);let s=document.createElement("div");s.innerHTML=a;for(let f of Array.from(s.children))r.appendChild(f);let u=document.getElementById("drawer-button");if(t.keepOpen)u.innerHTML="Continue",va=n;else if(ya&&ya.keepOpen){let f={...ya};u.innerHTML="Back",va=async()=>{await ao(f),n()}}else u.innerHTML="Close",va=()=>i.hide();e.btn&&(u.innerHTML=e.btn),lo.page=e.file,ya=e,i.show()})}var ax=document.querySelector(".alert-toast-wrapper");async function Bs(e,t="primary",n="info-circle",i=3e3){let r=Object.assign(document.createElement("sl-alert"),{variant:t,closable:!0,duration:i,innerHTML:`
		<sl-icon name="${n}" slot="icon"></sl-icon>
		${e}
	  `});return document.body.append(r),await Promise.allSettled([customElements.whenDefined("sl-alert")]),r.toast(),r}var ba="layers:",_a="page:",xh=class{constructor(){this._leafletHash=null;this._leafletMap=null;this._hashMeta=[];this._layers=[];this._page=void 0;window.addEventListener("hashchange",()=>{if(!(location.hash.indexOf(ba)==1||location.hash.indexOf(_a)==1))return;let t=location.hash.substring(1).split("/");for(let n of t)n.indexOf(ba)==0&&(this.layers=n.substring(ba.length).split(",")),n.indexOf(_a)==0&&(this.page=n.substring(_a.length),ao({file:this.page,position:"end"}))})}set map(t){this._leafletMap=t,this._leafletHash=new L.Hash(this._leafletMap)}get layers(){return this._layers}set layers(t){t instanceof Set&&(t=Array.from(t)),this._layers=t,this.encode()}get page(){return this._page}set page(t){this._page=t,this.encode()}encode(){this._hashMeta=[],this._layers.length>0&&this._hashMeta.push(ba+this._layers.join(",")),this._page&&this._page.length>0&&this._hashMeta.push(_a+this._page),this._leafletHash.setHashMeta(this._hashMeta,!0)}decode(t){this._hashMeta=t;let n=this._hashMeta.find(r=>r.startsWith(ba));this._layers=n?n.substring(ba.length).split(","):[];let i=this._hashMeta.find(r=>r.startsWith(_a));this._page=i?i.substring(_a.length):void 0,this._page&&ao({file:this.page,position:"end"})}},lo=new xh;var en=hr(ks());var lh=hr(ks());var Tn=63710088e-1,gd={centimeters:Tn*100,centimetres:Tn*100,degrees:Tn/111325,feet:Tn*3.28084,inches:Tn*39.37,kilometers:Tn/1e3,kilometres:Tn/1e3,meters:Tn,metres:Tn,miles:Tn/1609.344,millimeters:Tn*1e3,millimetres:Tn*1e3,nauticalmiles:Tn/1852,radians:1,yards:Tn*1.0936},gx={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/Tn,yards:1.0936133};function Dn(e,t,n){n===void 0&&(n={});var i={type:"Feature"};return(n.id===0||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=t||{},i.geometry=e,i}function wr(e,t,n){if(n===void 0&&(n={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!uo(e[0])||!uo(e[1]))throw new Error("coordinates must contain numbers");var i={type:"Point",coordinates:e};return Dn(i,t,n)}function Gr(e,t,n){n===void 0&&(n={});for(var i=0,r=e;i<r.length;i++){var o=r[i];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}var s={type:"Polygon",coordinates:e};return Dn(s,t,n)}function un(e,t,n){if(n===void 0&&(n={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");var i={type:"LineString",coordinates:e};return Dn(i,t,n)}function Ci(e,t){t===void 0&&(t={});var n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function Eh(e,t,n){n===void 0&&(n={});var i={type:"MultiPoint",coordinates:e};return Dn(i,t,n)}function nl(e,t){t===void 0&&(t="kilometers");var n=gd[t];if(!n)throw new Error(t+" units is invalid");return e*n}function sl(e,t){t===void 0&&(t="kilometers");var n=gd[t];if(!n)throw new Error(t+" units is invalid");return e/n}function Qo(e){var t=e%(2*Math.PI);return t*180/Math.PI}function Bn(e){var t=e%360;return t*Math.PI/180}function uo(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function Dr(e){return!!e&&e.constructor===Object}function xn(e,t,n){if(e!==null)for(var i,r,o,a,s,u,f,c=0,d=0,m,v=e.type,p=v==="FeatureCollection",_=v==="Feature",y=p?e.features.length:1,x=0;x<y;x++){f=p?e.features[x].geometry:_?e.geometry:e,m=f?f.type==="GeometryCollection":!1,s=m?f.geometries.length:1;for(var S=0;S<s;S++){var O=0,B=0;if(a=m?f.geometries[S]:f,a!==null){u=a.coordinates;var U=a.type;switch(c=n&&(U==="Polygon"||U==="MultiPolygon")?1:0,U){case null:break;case"Point":if(t(u,d,x,O,B)===!1)return!1;d++,O++;break;case"LineString":case"MultiPoint":for(i=0;i<u.length;i++){if(t(u[i],d,x,O,B)===!1)return!1;d++,U==="MultiPoint"&&O++}U==="LineString"&&O++;break;case"Polygon":case"MultiLineString":for(i=0;i<u.length;i++){for(r=0;r<u[i].length-c;r++){if(t(u[i][r],d,x,O,B)===!1)return!1;d++}U==="MultiLineString"&&O++,U==="Polygon"&&B++}U==="Polygon"&&O++;break;case"MultiPolygon":for(i=0;i<u.length;i++){for(B=0,r=0;r<u[i].length;r++){for(o=0;o<u[i][r].length-c;o++){if(t(u[i][r][o],d,x,O,B)===!1)return!1;d++}B++}O++}break;case"GeometryCollection":for(i=0;i<a.geometries.length;i++)if(xn(a.geometries[i],t,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function yd(e,t,n,i){var r=n;return xn(e,function(o,a,s,u,f){a===0&&n===void 0?r=o:r=t(r,o,a,s,u,f)},i),r}function Sr(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var n=0;n<e.features.length&&t(e.features[n],n)!==!1;n++);}function Zs(e,t){var n,i,r,o,a,s,u,f,c,d,m=0,v=e.type==="FeatureCollection",p=e.type==="Feature",_=v?e.features.length:1;for(n=0;n<_;n++){for(s=v?e.features[n].geometry:p?e.geometry:e,f=v?e.features[n].properties:p?e.properties:{},c=v?e.features[n].bbox:p?e.bbox:void 0,d=v?e.features[n].id:p?e.id:void 0,u=s?s.type==="GeometryCollection":!1,a=u?s.geometries.length:1,r=0;r<a;r++){if(o=u?s.geometries[r]:s,o===null){if(t(null,m,f,c,d)===!1)return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(o,m,f,c,d)===!1)return!1;break}case"GeometryCollection":{for(i=0;i<o.geometries.length;i++)if(t(o.geometries[i],m,f,c,d)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}m++}}function vd(e,t,n){var i=n;return Zs(e,function(r,o,a,s,u){o===0&&n===void 0?i=r:i=t(i,r,o,a,s,u)}),i}function es(e,t){Zs(e,function(n,i,r,o,a){var s=n===null?null:n.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return t(Dn(n,r,{bbox:o,id:a}),i,0)===!1?!1:void 0}var u;switch(s){case"MultiPoint":u="Point";break;case"MultiLineString":u="LineString";break;case"MultiPolygon":u="Polygon";break}for(var f=0;f<n.coordinates.length;f++){var c=n.coordinates[f],d={type:u,coordinates:c};if(t(Dn(d,r),i,f)===!1)return!1}})}function jo(e,t){es(e,function(n,i,r){var o=0;if(n.geometry){var a=n.geometry.type;if(!(a==="Point"||a==="MultiPoint")){var s,u=0,f=0,c=0;if(xn(n,function(d,m,v,p,_){if(s===void 0||i>u||p>f||_>c){s=d,u=i,f=p,c=_,o=0;return}var y=un([s,d],n.properties);if(t(y,i,r,_,o)===!1)return!1;o++,s=d})===!1)return!1}}})}function Ch(e){var t=[1/0,1/0,-1/0,-1/0];return xn(e,function(n){t[0]>n[0]&&(t[0]=n[0]),t[1]>n[1]&&(t[1]=n[1]),t[2]<n[0]&&(t[2]=n[0]),t[3]<n[1]&&(t[3]=n[1])}),t}Ch.default=Ch;var En=Ch;function Kr(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function xr(e){if(Array.isArray(e))return e;if(e.type==="Feature"){if(e.geometry!==null)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Mh(e,t,n){if(!e)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!e||e.type!=="Feature"||!e.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!e.geometry||e.geometry.type!==t)throw new Error("Invalid input to "+n+": must be a "+t+", given "+e.geometry.type)}function hn(e){return e.type==="Feature"?e.geometry:e}var ly=hr(Jl(),1);var vy=hr(Dd(),1);function cn(e,t,n){if(n===void 0&&(n={}),!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var i=Kr(e),r=hn(t),o=r.type,a=t.bbox,s=r.coordinates;if(a&&by(i,a)===!1)return!1;o==="Polygon"&&(s=[s]);for(var u=!1,f=0;f<s.length&&!u;f++)if(Bd(i,s[f][0],n.ignoreBoundary)){for(var c=!1,d=1;d<s[f].length&&!c;)Bd(i,s[f][d],!n.ignoreBoundary)&&(c=!0),d++;c||(u=!0)}return u}function Bd(e,t,n){var i=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var r=0,o=t.length-1;r<t.length;o=r++){var a=t[r][0],s=t[r][1],u=t[o][0],f=t[o][1],c=e[1]*(a-u)+s*(u-e[0])+f*(e[0]-a)===0&&(a-e[0])*(u-e[0])<=0&&(s-e[1])*(f-e[1])<=0;if(c)return!n;var d=s>e[1]!=f>e[1]&&e[0]<(u-a)*(e[1]-s)/(f-s)+a;d&&(i=!i)}return i}function by(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}function _y(e,t,n){n===void 0&&(n={});var i=Kr(e),r=Kr(t),o=Bn(r[1]-i[1]),a=Bn(r[0]-i[0]),s=Bn(i[1]),u=Bn(r[1]),f=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(s)*Math.cos(u);return nl(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)),n.units)}var Jr=_y;var zd=new ArrayBuffer(16),q2=new Float64Array(zd),W2=new Uint32Array(zd);var Ny=hr(qd(),1);var vC=function(){function e(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var n=0;n<this.length;n++)this.points[n].z=this.points[n].z||0;for(var n=0;n<this.length-1;n++){var i=this.points[n],r=this.points[n+1];this.centers.push({x:(i.x+r.x)/2,y:(i.y+r.y)/2,z:(i.z+r.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(var n=0;n<this.centers.length-1;n++){var o=this.points[n+1].x-(this.centers[n].x+this.centers[n+1].x)/2,a=this.points[n+1].y-(this.centers[n].y+this.centers[n+1].y)/2,s=this.points[n+1].z-(this.centers[n].y+this.centers[n+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[n+1].x+this.sharpness*(this.centers[n].x+o),y:(1-this.sharpness)*this.points[n+1].y+this.sharpness*(this.centers[n].y+a),z:(1-this.sharpness)*this.points[n+1].z+this.sharpness*(this.centers[n].z+s)},{x:(1-this.sharpness)*this.points[n+1].x+this.sharpness*(this.centers[n+1].x+o),y:(1-this.sharpness)*this.points[n+1].y+this.sharpness*(this.centers[n+1].y+a),z:(1-this.sharpness)*this.points[n+1].z+this.sharpness*(this.centers[n+1].z+s)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}return e.prototype.cacheSteps=function(t){var n=[],i=this.pos(0);n.push(0);for(var r=0;r<this.duration;r+=10){var o=this.pos(r),a=Math.sqrt((o.x-i.x)*(o.x-i.x)+(o.y-i.y)*(o.y-i.y)+(o.z-i.z)*(o.z-i.z));a>t&&(n.push(r),i=o)}return n},e.prototype.vector=function(t){var n=this.pos(t+10),i=this.pos(t-10);return{angle:180*Math.atan2(n.y-i.y,n.x-i.x)/3.14,speed:Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y)+(i.z-n.z)*(i.z-n.z))}},e.prototype.pos=function(t){var n=t-this.delay;n<0&&(n=0),n>this.duration&&(n=this.duration-1);var i=n/this.duration;if(i>=1)return this.points[this.length-1];var r=Math.floor((this.points.length-1)*i),o=(this.length-1)*i-r;return Dy(o,this.points[r],this.controls[r][1],this.controls[r+1][0],this.points[r+1])},e}();function Dy(e,t,n,i,r){var o=By(e),a={x:r.x*o[0]+i.x*o[1]+n.x*o[2]+t.x*o[3],y:r.y*o[0]+i.y*o[1]+n.y*o[2]+t.y*o[3],z:r.z*o[0]+i.z*o[1]+n.z*o[2]+t.z*o[3]};return a}function By(e){var t=e*e,n=t*e;return[n,3*t*(1-e),3*e*(1-e)*(1-e),(1-e)*(1-e)*(1-e)]}function ul(e,t){t===void 0&&(t={});var n=Number(e[0]),i=Number(e[1]),r=Number(e[2]),o=Number(e[3]);if(e.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var a=[n,i],s=[n,o],u=[r,o],f=[r,i];return Gr([[a,f,u,s,a]],t.properties,{bbox:e,id:t.id})}function Fy(e){return ul(En(e))}var Hh=Fy;function ho(e,t,n,i){i===void 0&&(i={});var r=Kr(e),o=Bn(r[0]),a=Bn(r[1]),s=Bn(n),u=sl(t,i.units),f=Math.asin(Math.sin(a)*Math.cos(u)+Math.cos(a)*Math.sin(u)*Math.cos(s)),c=o+Math.atan2(Math.sin(s)*Math.sin(u)*Math.cos(a),Math.cos(u)-Math.sin(a)*Math.sin(f)),d=Qo(c),m=Qo(f);return wr([d,m],i.properties)}function Lo(e,t,n){if(n===void 0&&(n={}),n.final===!0)return zy(e,t);var i=Kr(e),r=Kr(t),o=Bn(i[0]),a=Bn(r[0]),s=Bn(i[1]),u=Bn(r[1]),f=Math.sin(a-o)*Math.cos(u),c=Math.cos(s)*Math.sin(u)-Math.sin(s)*Math.cos(u)*Math.cos(a-o);return Qo(Math.atan2(f,c))}function zy(e,t){var n=Lo(t,e);return n=(n+180)%360,n}function jy(e,t){t===void 0&&(t={});var n=En(e),i=(n[0]+n[2])/2,r=(n[1]+n[3])/2;return wr([i,r],t.properties,t)}var hl=jy;var rv=hr(Zd(),1);function nv(e){if(!e)throw new Error("geojson is required");var t=[];return es(e,function(n){sv(n,t)}),Ci(t)}function sv(e,t){var n=[],i=e.geometry;if(i!==null){switch(i.type){case"Polygon":n=xr(i);break;case"LineString":n=[xr(i)]}n.forEach(function(r){var o=ov(r,e.properties);o.forEach(function(a){a.id=t.length,t.push(a)})})}}function ov(e,t){var n=[];return e.reduce(function(i,r){var o=un([i,r],t);return o.bbox=av(i,r),n.push(o),r}),n}function av(e,t){var n=e[0],i=e[1],r=t[0],o=t[1],a=n<r?n:r,s=i<o?i:o,u=n>r?n:r,f=i>o?i:o;return[a,s,u,f]}var Ho=nv;var fp=hr(mu(),1);function Iv(e,t){var n={},i=[];if(e.type==="LineString"&&(e=Dn(e)),t.type==="LineString"&&(t=Dn(t)),e.type==="Feature"&&t.type==="Feature"&&e.geometry!==null&&t.geometry!==null&&e.geometry.type==="LineString"&&t.geometry.type==="LineString"&&e.geometry.coordinates.length===2&&t.geometry.coordinates.length===2){var r=cp(e,t);return r&&i.push(r),Ci(i)}var o=(0,fp.default)();return o.load(Ho(t)),Sr(Ho(e),function(a){Sr(o.search(a),function(s){var u=cp(a,s);if(u){var f=xr(u).join(",");n[f]||(n[f]=!0,i.push(u))}})}),Ci(i)}function cp(e,t){var n=xr(e),i=xr(t);if(n.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(i.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var r=n[0][0],o=n[0][1],a=n[1][0],s=n[1][1],u=i[0][0],f=i[0][1],c=i[1][0],d=i[1][1],m=(d-f)*(a-r)-(c-u)*(s-o),v=(c-u)*(o-f)-(d-f)*(r-u),p=(a-r)*(o-f)-(s-o)*(r-u);if(m===0)return null;var _=v/m,y=p/m;if(_>=0&&_<=1&&y>=0&&y<=1){var x=r+_*(a-r),S=o+_*(s-o);return wr([x,S])}return null}var Uo=Iv;function Nv(e,t,n){n===void 0&&(n={});var i=wr([1/0,1/0],{dist:1/0}),r=0;return es(e,function(o){for(var a=xr(o),s=0;s<a.length-1;s++){var u=wr(a[s]);u.properties.dist=Jr(t,u,n);var f=wr(a[s+1]);f.properties.dist=Jr(t,f,n);var c=Jr(u,f,n),d=Math.max(u.properties.dist,f.properties.dist),m=Lo(u,f),v=ho(t,d,m+90,n),p=ho(t,d,m-90,n),_=Uo(un([v.geometry.coordinates,p.geometry.coordinates]),un([u.geometry.coordinates,f.geometry.coordinates])),y=null;_.features.length>0&&(y=_.features[0],y.properties.dist=Jr(t,y,n),y.properties.location=r+Jr(u,y,n)),u.properties.dist<i.properties.dist&&(i=u,i.properties.index=s,i.properties.location=r),f.properties.dist<i.properties.dist&&(i=f,i.properties.index=s+1,i.properties.location=r+c),y&&y.properties.dist<i.properties.dist&&(i=y,i.properties.index=s),r+=c}}),i}var To=Nv;var Bv=hr(Jl(),1);var dp=6378137;function fo(e){return vd(e,function(t,n){return t+Fv(n)},0)}function Fv(e){var t=0,n;switch(e.type){case"Polygon":return pp(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)t+=pp(e.coordinates[n]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function pp(e){var t=0;if(e&&e.length>0){t+=Math.abs(mp(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(mp(e[n]))}return t}function mp(e){var t,n,i,r,o,a,s,u=0,f=e.length;if(f>2){for(s=0;s<f;s++)s===f-2?(r=f-2,o=f-1,a=0):s===f-1?(r=f-1,o=0,a=1):(r=s,o=s+1,a=s+2),t=e[r],n=e[o],i=e[a],u+=(sc(i[0])-sc(t[0]))*Math.sin(sc(n[1]));u=u*dp*dp/2}return u}function sc(e){return e*Math.PI/180}function zv(e,t,n){n===void 0&&(n={});for(var i=Kr(e),r=xr(t),o=0;o<r.length-1;o++){var a=!1;if(n.ignoreEndVertices&&(o===0&&(a="start"),o===r.length-2&&(a="end"),o===0&&o+1===r.length-1&&(a="both")),jv(r[o],r[o+1],i,a,typeof n.epsilon>"u"?null:n.epsilon))return!0}return!1}function jv(e,t,n,i,r){var o=n[0],a=n[1],s=e[0],u=e[1],f=t[0],c=t[1],d=n[0]-s,m=n[1]-u,v=f-s,p=c-u,_=d*p-m*v;if(r!==null){if(Math.abs(_)>r)return!1}else if(_!==0)return!1;if(i){if(i==="start")return Math.abs(v)>=Math.abs(p)?v>0?s<o&&o<=f:f<=o&&o<s:p>0?u<a&&a<=c:c<=a&&a<u;if(i==="end")return Math.abs(v)>=Math.abs(p)?v>0?s<=o&&o<f:f<o&&o<=s:p>0?u<=a&&a<c:c<a&&a<=u;if(i==="both")return Math.abs(v)>=Math.abs(p)?v>0?s<o&&o<f:f<o&&o<s:p>0?u<a&&a<c:c<a&&a<u}else return Math.abs(v)>=Math.abs(p)?v>0?s<=o&&o<=f:f<=o&&o<=s:p>0?u<=a&&a<=c:c<=a&&a<=u;return!1}var Ls=zv;var Xv=hr(wp(),1);var xp=Math.PI/180,Ep=180/Math.PI,vl=function(e,t){this.lon=e,this.lat=t,this.x=xp*e,this.y=xp*t};vl.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)};vl.prototype.antipode=function(){var e=-1*this.lat,t=this.lon<0?180+this.lon:(180-this.lon)*-1;return new vl(t,e)};var Cp=function(){this.coords=[],this.length=0};Cp.prototype.move_to=function(e){this.length++,this.coords.push(e)};var cc=function(e){this.properties=e||{},this.geometries=[]};cc.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(this.geometries.length===1)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var e=[],t=0;t<this.geometries.length;t++)e.push(this.geometries[t].coords);return{geometry:{type:"MultiLineString",coordinates:e},type:"Feature",properties:this.properties}};cc.prototype.wkt=function(){for(var e="",t="LINESTRING(",n=function(o){t+=o[0]+" "+o[1]+","},i=0;i<this.geometries.length;i++){if(this.geometries[i].coords.length===0)return"LINESTRING(empty)";var r=this.geometries[i].coords;r.forEach(n),e+=t.substring(0,t.length-1)+")"}return e};var Mp=function(e,t,n){if(!e||e.x===void 0||e.y===void 0)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!t||t.x===void 0||t.y===void 0)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new vl(e.x,e.y),this.end=new vl(t.x,t.y),this.properties=n||{};var i=this.start.x-this.end.x,r=this.start.y-this.end.y,o=Math.pow(Math.sin(r/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(i/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+e.view()+" and "+t.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+e+" and "+t)};Mp.prototype.interpolate=function(e){var t=Math.sin((1-e)*this.g)/Math.sin(this.g),n=Math.sin(e*this.g)/Math.sin(this.g),i=t*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),r=t*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=t*Math.sin(this.start.y)+n*Math.sin(this.end.y),a=Ep*Math.atan2(o,Math.sqrt(Math.pow(i,2)+Math.pow(r,2))),s=Ep*Math.atan2(r,i);return[s,a]};Mp.prototype.Arc=function(e,t){var n=[];if(!e||e<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var i=1/(e-1),r=0;r<e;++r){var o=i*r,a=this.interpolate(o);n.push(a)}for(var s=!1,u=0,f=t&&t.offset?t.offset:10,c=180-f,d=-180+f,m=360-f,v=1;v<n.length;++v){var p=n[v-1][0],_=n[v][0],y=Math.abs(_-p);y>m&&(_>c&&p<d||p>c&&_<d)?s=!0:y>u&&(u=y)}var x=[];if(s&&u<f){var S=[];x.push(S);for(var O=0;O<n.length;++O){var B=parseFloat(n[O][0]);if(O>0&&Math.abs(B-n[O-1][0])>m){var U=parseFloat(n[O-1][0]),z=parseFloat(n[O-1][1]),q=parseFloat(n[O][0]),G=parseFloat(n[O][1]);if(U>-180&&U<d&&q===180&&O+1<n.length&&n[O-1][0]>-180&&n[O-1][0]<d){S.push([-180,n[O][1]]),O++,S.push([n[O][0],n[O][1]]);continue}else if(U>c&&U<180&&q===-180&&O+1<n.length&&n[O-1][0]>c&&n[O-1][0]<180){S.push([180,n[O][1]]),O++,S.push([n[O][0],n[O][1]]);continue}if(U<d&&q>c){var tt=U;U=q,q=tt;var K=z;z=G,G=K}if(U>c&&q<d&&(q+=360),U<=180&&q>=180&&U<q){var D=(180-U)/(q-U),N=D*G+(1-D)*z;S.push([n[O-1][0]>c?180:-180,N]),S=[],S.push([n[O-1][0]>c?-180:180,N]),x.push(S)}else S=[],x.push(S);S.push([B,n[O][1]])}else S.push([n[O][0],n[O][1]])}}else{var Z=[];x.push(Z);for(var w=0;w<n.length;++w)Z.push([n[w][0],n[w][1]])}for(var C=new cc(this.properties),k=0;k<x.length;++k){var T=new Cp;C.geometries.push(T);for(var R=x[k],F=0;F<R.length;++F)T.move_to(R[F])}return C};var Zv=hr(mu(),1);var ig=hr(mu(),1);var Na=hr(Ac(),1);function l1(e,t,n){if(n===void 0&&(n={}),n=n||{},!Dr(n))throw new Error("options is invalid");var i=n.tolerance||0,r=[],o=(0,ig.default)(),a=Ho(e);o.load(a);var s;return jo(t,function(u){var f=!1;u&&(Sr(o.search(u),function(c){if(f===!1){var d=xr(u).sort(),m=xr(c).sort();(0,Na.default)(d,m)||(i===0?Ls(d[0],c)&&Ls(d[1],c):To(c,d[0]).properties.dist<=i&&To(c,d[1]).properties.dist<=i)?(f=!0,s?s=Ic(s,u):s=u):(i===0?Ls(m[0],u)&&Ls(m[1],u):To(u,m[0]).properties.dist<=i&&To(u,m[1]).properties.dist<=i)&&(s?s=Ic(s,c):s=c)}}),f===!1&&s&&(r.push(s),s=void 0))}),s&&r.push(s),Ci(r)}function Ic(e,t){var n=xr(t),i=xr(e),r=i[0],o=i[i.length-1],a=e.geometry.coordinates;return(0,Na.default)(n[0],r)?a.unshift(n[1]):(0,Na.default)(n[0],o)?a.push(n[1]):(0,Na.default)(n[1],r)?a.unshift(n[0]):(0,Na.default)(n[1],o)&&a.push(n[0]),e}var Nc=l1;var c1=hr(Jl(),1);var Li=[],Ti=[],Pi=[],Ri=[],Oi=[],Ai=[],Ii=[],Ni=[],Di=[],Bi=[],Fi=[],zi=[],ji=[],Hi=[],Gi=[],Ui=[],Vi=[],qi=[],Wi=[],Xi=[],$i=[],Yi=[],Zi=[],Ki=[];Ii[85]=Bi[85]=-1;Ni[85]=Fi[85]=0;Di[85]=zi[85]=1;Wi[85]=Yi[85]=1;Xi[85]=Zi[85]=0;$i[85]=Ki[85]=1;Li[85]=Ri[85]=0;Ti[85]=Oi[85]=-1;Pi[85]=Gi[85]=0;Ui[85]=ji[85]=0;Vi[85]=Hi[85]=1;Ai[85]=qi[85]=1;Yi[1]=Yi[169]=0;Zi[1]=Zi[169]=-1;Ki[1]=Ki[169]=0;ji[1]=ji[169]=-1;Hi[1]=Hi[169]=0;Gi[1]=Gi[169]=0;Bi[4]=Bi[166]=0;Fi[4]=Fi[166]=-1;zi[4]=zi[166]=1;Ui[4]=Ui[166]=1;Vi[4]=Vi[166]=0;qi[4]=qi[166]=0;Ii[16]=Ii[154]=0;Ni[16]=Ni[154]=1;Di[16]=Di[154]=1;Ri[16]=Ri[154]=1;Oi[16]=Oi[154]=0;Ai[16]=Ai[154]=1;Wi[64]=Wi[106]=0;Xi[64]=Xi[106]=1;$i[64]=$i[106]=0;Li[64]=Li[106]=-1;Ti[64]=Ti[106]=0;Pi[64]=Pi[106]=1;Wi[2]=Wi[168]=0;Xi[2]=Xi[168]=-1;$i[2]=$i[168]=1;Yi[2]=Yi[168]=0;Zi[2]=Zi[168]=-1;Ki[2]=Ki[168]=0;ji[2]=ji[168]=-1;Hi[2]=Hi[168]=0;Gi[2]=Gi[168]=0;Ui[2]=Ui[168]=-1;Vi[2]=Vi[168]=0;qi[2]=qi[168]=1;Ii[8]=Ii[162]=0;Ni[8]=Ni[162]=-1;Di[8]=Di[162]=0;Bi[8]=Bi[162]=0;Fi[8]=Fi[162]=-1;zi[8]=zi[162]=1;ji[8]=ji[162]=1;Hi[8]=Hi[162]=0;Gi[8]=Gi[162]=1;Ui[8]=Ui[162]=1;Vi[8]=Vi[162]=0;qi[8]=qi[162]=0;Ii[32]=Ii[138]=0;Ni[32]=Ni[138]=1;Di[32]=Di[138]=1;Bi[32]=Bi[138]=0;Fi[32]=Fi[138]=1;zi[32]=zi[138]=0;Li[32]=Li[138]=1;Ti[32]=Ti[138]=0;Pi[32]=Pi[138]=0;Ri[32]=Ri[138]=1;Oi[32]=Oi[138]=0;Ai[32]=Ai[138]=1;Yi[128]=Yi[42]=0;Zi[128]=Zi[42]=1;Ki[128]=Ki[42]=1;Wi[128]=Wi[42]=0;Xi[128]=Xi[42]=1;$i[128]=$i[42]=0;Li[128]=Li[42]=-1;Ti[128]=Ti[42]=0;Pi[128]=Pi[42]=1;Ri[128]=Ri[42]=-1;Oi[128]=Oi[42]=0;Ai[128]=Ai[42]=0;Bi[5]=Bi[165]=-1;Fi[5]=Fi[165]=0;zi[5]=zi[165]=0;Yi[5]=Yi[165]=1;Zi[5]=Zi[165]=0;Ki[5]=Ki[165]=0;Ui[20]=Ui[150]=0;Vi[20]=Vi[150]=1;qi[20]=qi[150]=1;Ri[20]=Ri[150]=0;Oi[20]=Oi[150]=-1;Ai[20]=Ai[150]=1;Ii[80]=Ii[90]=-1;Ni[80]=Ni[90]=0;Di[80]=Di[90]=1;Wi[80]=Wi[90]=1;Xi[80]=Xi[90]=0;$i[80]=$i[90]=1;ji[65]=ji[105]=0;Hi[65]=Hi[105]=1;Gi[65]=Gi[105]=0;Li[65]=Li[105]=0;Ti[65]=Ti[105]=-1;Pi[65]=Pi[105]=0;Ii[160]=Ii[10]=-1;Ni[160]=Ni[10]=0;Di[160]=Di[10]=1;Bi[160]=Bi[10]=-1;Fi[160]=Fi[10]=0;zi[160]=zi[10]=0;Yi[160]=Yi[10]=1;Zi[160]=Zi[10]=0;Ki[160]=Ki[10]=0;Wi[160]=Wi[10]=1;Xi[160]=Xi[10]=0;$i[160]=$i[10]=1;Ui[130]=Ui[40]=0;Vi[130]=Vi[40]=1;qi[130]=qi[40]=1;ji[130]=ji[40]=0;Hi[130]=Hi[40]=1;Gi[130]=Gi[40]=0;Li[130]=Li[40]=0;Ti[130]=Ti[40]=-1;Pi[130]=Pi[40]=0;Ri[130]=Ri[40]=0;Oi[130]=Oi[40]=-1;Ai[130]=Ai[40]=1;Bi[37]=Bi[133]=0;Fi[37]=Fi[133]=1;zi[37]=zi[133]=1;Yi[37]=Yi[133]=0;Zi[37]=Zi[133]=1;Ki[37]=Ki[133]=0;Li[37]=Li[133]=-1;Ti[37]=Ti[133]=0;Pi[37]=Pi[133]=0;Ri[37]=Ri[133]=1;Oi[37]=Oi[133]=0;Ai[37]=Ai[133]=0;Ui[148]=Ui[22]=-1;Vi[148]=Vi[22]=0;qi[148]=qi[22]=0;Yi[148]=Yi[22]=0;Zi[148]=Zi[22]=-1;Ki[148]=Ki[22]=1;Wi[148]=Wi[22]=0;Xi[148]=Xi[22]=1;$i[148]=$i[22]=1;Ri[148]=Ri[22]=-1;Oi[148]=Oi[22]=0;Ai[148]=Ai[22]=1;Ii[82]=Ii[88]=0;Ni[82]=Ni[88]=-1;Di[82]=Di[88]=1;Ui[82]=Ui[88]=1;Vi[82]=Vi[88]=0;qi[82]=qi[88]=1;ji[82]=ji[88]=-1;Hi[82]=Hi[88]=0;Gi[82]=Gi[88]=1;Wi[82]=Wi[88]=0;Xi[82]=Xi[88]=-1;$i[82]=$i[88]=0;Ii[73]=Ii[97]=0;Ni[73]=Ni[97]=1;Di[73]=Di[97]=0;Bi[73]=Bi[97]=0;Fi[73]=Fi[97]=-1;zi[73]=zi[97]=0;ji[73]=ji[97]=1;Hi[73]=Hi[97]=0;Gi[73]=Gi[97]=0;Li[73]=Li[97]=1;Ti[73]=Ti[97]=0;Pi[73]=Pi[97]=1;Ii[145]=Ii[25]=0;Ni[145]=Ni[25]=-1;Di[145]=Di[25]=0;ji[145]=ji[25]=1;Hi[145]=Hi[25]=0;Gi[145]=Gi[25]=1;Yi[145]=Yi[25]=0;Zi[145]=Zi[25]=1;Ki[145]=Ki[25]=1;Ri[145]=Ri[25]=-1;Oi[145]=Oi[25]=0;Ai[145]=Ai[25]=0;Bi[70]=Bi[100]=0;Fi[70]=Fi[100]=1;zi[70]=zi[100]=0;Ui[70]=Ui[100]=-1;Vi[70]=Vi[100]=0;qi[70]=qi[100]=1;Wi[70]=Wi[100]=0;Xi[70]=Xi[100]=-1;$i[70]=$i[100]=1;Li[70]=Li[100]=1;Ti[70]=Ti[100]=0;Pi[70]=Pi[100]=0;Bi[101]=Bi[69]=0;Fi[101]=Fi[69]=1;zi[101]=zi[69]=0;Li[101]=Li[69]=1;Ti[101]=Ti[69]=0;Pi[101]=Pi[69]=0;Yi[149]=Yi[21]=0;Zi[149]=Zi[21]=1;Ki[149]=Ki[21]=1;Ri[149]=Ri[21]=-1;Oi[149]=Oi[21]=0;Ai[149]=Ai[21]=0;Ui[86]=Ui[84]=-1;Vi[86]=Vi[84]=0;qi[86]=qi[84]=1;Wi[86]=Wi[84]=0;Xi[86]=Xi[84]=-1;$i[86]=$i[84]=1;Ii[89]=Ii[81]=0;Ni[89]=Ni[81]=-1;Di[89]=Di[81]=0;ji[89]=ji[81]=1;Hi[89]=Hi[81]=0;Gi[89]=Gi[81]=1;Ii[96]=Ii[74]=0;Ni[96]=Ni[74]=1;Di[96]=Di[74]=0;Bi[96]=Bi[74]=-1;Fi[96]=Fi[74]=0;zi[96]=zi[74]=1;Wi[96]=Wi[74]=1;Xi[96]=Xi[74]=0;$i[96]=$i[74]=0;Li[96]=Li[74]=1;Ti[96]=Ti[74]=0;Pi[96]=Pi[74]=1;Ii[24]=Ii[146]=0;Ni[24]=Ni[146]=-1;Di[24]=Di[146]=1;Ui[24]=Ui[146]=1;Vi[24]=Vi[146]=0;qi[24]=qi[146]=1;ji[24]=ji[146]=0;Hi[24]=Hi[146]=1;Gi[24]=Gi[146]=1;Ri[24]=Ri[146]=0;Oi[24]=Oi[146]=-1;Ai[24]=Ai[146]=0;Bi[6]=Bi[164]=-1;Fi[6]=Fi[164]=0;zi[6]=zi[164]=1;Ui[6]=Ui[164]=-1;Vi[6]=Vi[164]=0;qi[6]=qi[164]=0;Yi[6]=Yi[164]=0;Zi[6]=Zi[164]=-1;Ki[6]=Ki[164]=1;Wi[6]=Wi[164]=1;Xi[6]=Xi[164]=0;$i[6]=$i[164]=0;ji[129]=ji[41]=0;Hi[129]=Hi[41]=1;Gi[129]=Gi[41]=1;Yi[129]=Yi[41]=0;Zi[129]=Zi[41]=1;Ki[129]=Ki[41]=0;Li[129]=Li[41]=-1;Ti[129]=Ti[41]=0;Pi[129]=Pi[41]=0;Ri[129]=Ri[41]=0;Oi[129]=Oi[41]=-1;Ai[129]=Ai[41]=0;Ui[66]=Ui[104]=0;Vi[66]=Vi[104]=1;qi[66]=qi[104]=0;ji[66]=ji[104]=-1;Hi[66]=Hi[104]=0;Gi[66]=Gi[104]=1;Wi[66]=Wi[104]=0;Xi[66]=Xi[104]=-1;$i[66]=$i[104]=0;Li[66]=Li[104]=0;Ti[66]=Ti[104]=-1;Pi[66]=Pi[104]=1;Ii[144]=Ii[26]=-1;Ni[144]=Ni[26]=0;Di[144]=Di[26]=0;Yi[144]=Yi[26]=1;Zi[144]=Zi[26]=0;Ki[144]=Ki[26]=1;Wi[144]=Wi[26]=0;Xi[144]=Xi[26]=1;$i[144]=$i[26]=1;Ri[144]=Ri[26]=-1;Oi[144]=Oi[26]=0;Ai[144]=Ai[26]=1;Bi[36]=Bi[134]=0;Fi[36]=Fi[134]=1;zi[36]=zi[134]=1;Ui[36]=Ui[134]=0;Vi[36]=Vi[134]=1;qi[36]=qi[134]=0;Li[36]=Li[134]=0;Ti[36]=Ti[134]=-1;Pi[36]=Pi[134]=1;Ri[36]=Ri[134]=1;Oi[36]=Oi[134]=0;Ai[36]=Ai[134]=0;Ii[9]=Ii[161]=-1;Ni[9]=Ni[161]=0;Di[9]=Di[161]=0;Bi[9]=Bi[161]=0;Fi[9]=Fi[161]=-1;zi[9]=zi[161]=0;ji[9]=ji[161]=1;Hi[9]=Hi[161]=0;Gi[9]=Gi[161]=0;Yi[9]=Yi[161]=1;Zi[9]=Zi[161]=0;Ki[9]=Ki[161]=1;Ii[136]=0;Ni[136]=1;Di[136]=1;Bi[136]=0;Fi[136]=1;zi[136]=0;Ui[136]=-1;Vi[136]=0;qi[136]=1;ji[136]=-1;Hi[136]=0;Gi[136]=0;Yi[136]=0;Zi[136]=-1;Ki[136]=0;Wi[136]=0;Xi[136]=-1;$i[136]=1;Li[136]=1;Ti[136]=0;Pi[136]=0;Ri[136]=1;Oi[136]=0;Ai[136]=1;Ii[34]=0;Ni[34]=-1;Di[34]=0;Bi[34]=0;Fi[34]=-1;zi[34]=1;Ui[34]=1;Vi[34]=0;qi[34]=0;ji[34]=1;Hi[34]=0;Gi[34]=1;Yi[34]=0;Zi[34]=1;Ki[34]=1;Wi[34]=0;Xi[34]=1;$i[34]=0;Li[34]=-1;Ti[34]=0;Pi[34]=1;Ri[34]=-1;Oi[34]=0;Ai[34]=0;Ii[35]=0;Ni[35]=1;Di[35]=1;Bi[35]=0;Fi[35]=-1;zi[35]=1;Ui[35]=1;Vi[35]=0;qi[35]=0;ji[35]=-1;Hi[35]=0;Gi[35]=0;Yi[35]=0;Zi[35]=-1;Ki[35]=0;Wi[35]=0;Xi[35]=1;$i[35]=0;Li[35]=-1;Ti[35]=0;Pi[35]=1;Ri[35]=1;Oi[35]=0;Ai[35]=1;Ii[153]=0;Ni[153]=1;Di[153]=1;ji[153]=-1;Hi[153]=0;Gi[153]=0;Yi[153]=0;Zi[153]=-1;Ki[153]=0;Ri[153]=1;Oi[153]=0;Ai[153]=1;Bi[102]=0;Fi[102]=-1;zi[102]=1;Ui[102]=1;Vi[102]=0;qi[102]=0;Wi[102]=0;Xi[102]=1;$i[102]=0;Li[102]=-1;Ti[102]=0;Pi[102]=1;Ii[155]=0;Ni[155]=-1;Di[155]=0;ji[155]=1;Hi[155]=0;Gi[155]=1;Yi[155]=0;Zi[155]=1;Ki[155]=1;Ri[155]=-1;Oi[155]=0;Ai[155]=0;Bi[103]=0;Fi[103]=1;zi[103]=0;Ui[103]=-1;Vi[103]=0;qi[103]=1;Wi[103]=0;Xi[103]=-1;$i[103]=1;Li[103]=1;Ti[103]=0;Pi[103]=0;Ii[152]=0;Ni[152]=1;Di[152]=1;Ui[152]=-1;Vi[152]=0;qi[152]=1;ji[152]=-1;Hi[152]=0;Gi[152]=0;Yi[152]=0;Zi[152]=-1;Ki[152]=0;Wi[152]=0;Xi[152]=-1;$i[152]=1;Ri[152]=1;Oi[152]=0;Ai[152]=1;Ii[156]=0;Ni[156]=-1;Di[156]=1;Ui[156]=1;Vi[156]=0;qi[156]=1;ji[156]=-1;Hi[156]=0;Gi[156]=0;Yi[156]=0;Zi[156]=-1;Ki[156]=0;Wi[156]=0;Xi[156]=1;$i[156]=1;Ri[156]=-1;Oi[156]=0;Ai[156]=1;Ii[137]=0;Ni[137]=1;Di[137]=1;Bi[137]=0;Fi[137]=1;zi[137]=0;ji[137]=-1;Hi[137]=0;Gi[137]=0;Yi[137]=0;Zi[137]=-1;Ki[137]=0;Li[137]=1;Ti[137]=0;Pi[137]=0;Ri[137]=1;Oi[137]=0;Ai[137]=1;Ii[139]=0;Ni[139]=1;Di[139]=1;Bi[139]=0;Fi[139]=-1;zi[139]=0;ji[139]=1;Hi[139]=0;Gi[139]=0;Yi[139]=0;Zi[139]=1;Ki[139]=0;Li[139]=-1;Ti[139]=0;Pi[139]=0;Ri[139]=1;Oi[139]=0;Ai[139]=1;Ii[98]=0;Ni[98]=-1;Di[98]=0;Bi[98]=0;Fi[98]=-1;zi[98]=1;Ui[98]=1;Vi[98]=0;qi[98]=0;ji[98]=1;Hi[98]=0;Gi[98]=1;Wi[98]=0;Xi[98]=1;$i[98]=0;Li[98]=-1;Ti[98]=0;Pi[98]=1;Ii[99]=0;Ni[99]=1;Di[99]=0;Bi[99]=0;Fi[99]=-1;zi[99]=1;Ui[99]=1;Vi[99]=0;qi[99]=0;ji[99]=-1;Hi[99]=0;Gi[99]=1;Wi[99]=0;Xi[99]=-1;$i[99]=0;Li[99]=1;Ti[99]=0;Pi[99]=1;Bi[38]=0;Fi[38]=-1;zi[38]=1;Ui[38]=1;Vi[38]=0;qi[38]=0;Yi[38]=0;Zi[38]=1;Ki[38]=1;Wi[38]=0;Xi[38]=1;$i[38]=0;Li[38]=-1;Ti[38]=0;Pi[38]=1;Ri[38]=-1;Oi[38]=0;Ai[38]=0;Bi[39]=0;Fi[39]=1;zi[39]=1;Ui[39]=-1;Vi[39]=0;qi[39]=0;Yi[39]=0;Zi[39]=-1;Ki[39]=1;Wi[39]=0;Xi[39]=1;$i[39]=0;Li[39]=-1;Ti[39]=0;Pi[39]=1;Ri[39]=1;Oi[39]=0;Ai[39]=0;var Dc=function(e){return[[e.bottomleft,0],[0,0],[0,e.leftbottom]]},Bc=function(e){return[[1,e.rightbottom],[1,0],[e.bottomright,0]]},Fc=function(e){return[[e.topright,1],[1,1],[1,e.righttop]]},zc=function(e){return[[0,e.lefttop],[0,1],[e.topleft,1]]},jc=function(e){return[[e.bottomright,0],[e.bottomleft,0],[0,e.leftbottom],[0,e.lefttop]]},Hc=function(e){return[[e.bottomright,0],[e.bottomleft,0],[1,e.righttop],[1,e.rightbottom]]},Gc=function(e){return[[1,e.righttop],[1,e.rightbottom],[e.topleft,1],[e.topright,1]]},Uc=function(e){return[[0,e.leftbottom],[0,e.lefttop],[e.topleft,1],[e.topright,1]]},f1=function(e){return[[0,0],[0,e.leftbottom],[1,e.rightbottom],[1,0]]},d1=function(e){return[[1,0],[e.bottomright,0],[e.topright,1],[1,1]]},p1=function(e){return[[1,1],[1,e.righttop],[0,e.lefttop],[0,1]]},m1=function(e){return[[e.bottomleft,0],[0,0],[0,1],[e.topleft,1]]},g1=function(e){return[[1,e.righttop],[1,e.rightbottom],[0,e.leftbottom],[0,e.lefttop]]},y1=function(e){return[[e.topleft,1],[e.topright,1],[e.bottomright,0],[e.bottomleft,0]]},v1=function(){return[[0,0],[0,1],[1,1],[1,0]]},b1=function(e){return[[1,e.rightbottom],[1,0],[0,0],[0,1],[e.topleft,1]]},_1=function(e){return[[e.topright,1],[1,1],[1,0],[0,0],[0,e.leftbottom]]},w1=function(e){return[[1,0],[e.bottomright,0],[0,e.lefttop],[0,1],[1,1]]},x1=function(e){return[[1,1],[1,e.righttop],[e.bottomleft,0],[0,0],[0,1]]},E1=function(e){return[[1,e.righttop],[1,e.rightbottom],[0,e.lefttop],[0,1],[e.topleft,1]]},C1=function(e){return[[1,1],[1,e.righttop],[e.bottomright,0],[e.bottomleft,0],[e.topright,1]]},M1=function(e){return[[1,e.rightbottom],[1,0],[e.bottomright,0],[0,e.leftbottom],[0,e.lefttop]]},S1=function(e){return[[e.topright,1],[e.bottomleft,0],[0,0],[0,e.leftbottom],[e.topleft,1]]},k1=function(e){return[[e.bottomright,0],[e.bottomleft,0],[0,e.lefttop],[0,1],[e.topleft,1]]},L1=function(e){return[[1,1],[1,e.righttop],[0,e.leftbottom],[0,e.lefttop],[e.topright,1]]},T1=function(e){return[[1,e.rightbottom],[1,0],[e.bottomright,0],[e.topleft,1],[e.topright,1]]},P1=function(e){return[[1,e.righttop],[1,e.rightbottom],[e.bottomleft,0],[0,0],[0,e.leftbottom]]},R1=function(e){return[[1,e.rightbottom],[1,0],[0,0],[0,e.leftbottom],[e.topleft,1],[e.topright,1]]},O1=function(e){return[[1,1],[1,0],[e.bottomright,0],[0,e.leftbottom],[0,e.lefttop],[e.topright,1]]},A1=function(e){return[[1,1],[1,e.righttop],[e.bottomright,0],[e.bottomleft,0],[0,e.lefttop],[0,1]]},I1=function(e){return[[1,e.righttop],[1,e.rightbottom],[e.bottomleft,0],[0,0],[0,1],[e.topleft,1]]},N1=function(e){return[[1,1],[1,e.righttop],[e.bottomleft,0],[0,0],[0,e.leftbottom],[e.topright,1]]},D1=function(e){return[[1,e.rightbottom],[1,0],[e.bottomright,0],[0,e.lefttop],[0,1],[e.topleft,1]]},B1=function(e){return[[1,e.righttop],[1,e.rightbottom],[e.bottomright,0],[e.bottomleft,0],[0,e.leftbottom],[0,e.lefttop],[e.topleft,1],[e.topright,1]]},F1=function(e){return[[1,1],[1,e.righttop],[e.bottomleft,0],[0,0],[0,e.leftbottom],[e.topright,1]]},z1=function(e){return[[1,e.rightbottom],[1,0],[e.bottomright,0],[0,e.lefttop],[0,1],[e.topleft,1]]},j1=function(e){return[[1,1],[1,e.righttop],[e.bottomright,0],[e.bottomleft,0],[0,e.leftbottom],[0,e.lefttop],[e.topright,1]]},H1=function(e){return[[1,e.righttop],[1,e.rightbottom],[e.bottomleft,0],[0,0],[0,e.leftbottom],[e.topleft,1],[e.topright,1]]},G1=function(e){return[[1,e.righttop],[1,e.rightbottom],[e.bottomright,0],[e.bottomleft,0],[0,e.lefttop],[0,1],[e.topleft,1]]},U1=function(e){return[[1,e.rightbottom],[1,0],[e.bottomright,0],[0,e.leftbottom],[0,e.lefttop],[e.topleft,1],[e.topright,1]]},tr=[],er=[],ir=[],rr=[],nr=[],sr=[],or=[],ar=[];rr[1]=nr[1]=18;rr[169]=nr[169]=18;ir[4]=er[4]=12;ir[166]=er[166]=12;tr[16]=ar[16]=4;tr[154]=ar[154]=4;sr[64]=or[64]=22;sr[106]=or[106]=22;ir[2]=sr[2]=17;rr[2]=nr[2]=18;ir[168]=sr[168]=17;rr[168]=nr[168]=18;tr[8]=rr[8]=9;er[8]=ir[8]=12;tr[162]=rr[162]=9;er[162]=ir[162]=12;tr[32]=ar[32]=4;er[32]=or[32]=1;tr[138]=ar[138]=4;er[138]=or[138]=1;nr[128]=ar[128]=21;sr[128]=or[128]=22;nr[42]=ar[42]=21;sr[42]=or[42]=22;er[5]=nr[5]=14;er[165]=nr[165]=14;ir[20]=ar[20]=6;ir[150]=ar[150]=6;tr[80]=sr[80]=11;tr[90]=sr[90]=11;rr[65]=or[65]=3;rr[105]=or[105]=3;tr[160]=sr[160]=11;er[160]=nr[160]=14;tr[10]=sr[10]=11;er[10]=nr[10]=14;ir[130]=ar[130]=6;rr[130]=or[130]=3;ir[40]=ar[40]=6;rr[40]=or[40]=3;er[101]=or[101]=1;er[69]=or[69]=1;nr[149]=ar[149]=21;nr[21]=ar[21]=21;ir[86]=sr[86]=17;ir[84]=sr[84]=17;tr[89]=rr[89]=9;tr[81]=rr[81]=9;tr[96]=or[96]=0;er[96]=sr[96]=15;tr[74]=or[74]=0;er[74]=sr[74]=15;tr[24]=ir[24]=8;rr[24]=ar[24]=7;tr[146]=ir[146]=8;rr[146]=ar[146]=7;er[6]=sr[6]=15;ir[6]=nr[6]=16;er[164]=sr[164]=15;ir[164]=nr[164]=16;rr[129]=ar[129]=7;nr[129]=or[129]=20;rr[41]=ar[41]=7;nr[41]=or[41]=20;ir[66]=or[66]=2;rr[66]=sr[66]=19;ir[104]=or[104]=2;rr[104]=sr[104]=19;tr[144]=nr[144]=10;sr[144]=ar[144]=23;tr[26]=nr[26]=10;sr[26]=ar[26]=23;er[36]=ar[36]=5;ir[36]=or[36]=2;er[134]=ar[134]=5;ir[134]=or[134]=2;tr[9]=nr[9]=10;er[9]=rr[9]=13;tr[161]=nr[161]=10;er[161]=rr[161]=13;er[37]=ar[37]=5;nr[37]=or[37]=20;er[133]=ar[133]=5;nr[133]=or[133]=20;ir[148]=nr[148]=16;sr[148]=ar[148]=23;ir[22]=nr[22]=16;sr[22]=ar[22]=23;tr[82]=ir[82]=8;rr[82]=sr[82]=19;tr[88]=ir[88]=8;rr[88]=sr[88]=19;tr[73]=or[73]=0;er[73]=rr[73]=13;tr[97]=or[97]=0;er[97]=rr[97]=13;tr[145]=rr[145]=9;nr[145]=ar[145]=21;tr[25]=rr[25]=9;nr[25]=ar[25]=21;er[70]=or[70]=1;ir[70]=sr[70]=17;er[100]=or[100]=1;ir[100]=sr[100]=17;tr[34]=rr[34]=9;er[34]=ir[34]=12;nr[34]=ar[34]=21;sr[34]=or[34]=22;tr[136]=ar[136]=4;er[136]=or[136]=1;ir[136]=sr[136]=17;rr[136]=nr[136]=18;tr[35]=ar[35]=4;er[35]=ir[35]=12;rr[35]=nr[35]=18;sr[35]=or[35]=22;tr[153]=ar[153]=4;rr[153]=nr[153]=18;er[102]=ir[102]=12;sr[102]=or[102]=22;tr[155]=rr[155]=9;nr[155]=ar[155]=23;er[103]=or[103]=1;ir[103]=sr[103]=17;tr[152]=ar[152]=4;ir[152]=sr[152]=17;rr[152]=nr[152]=18;tr[156]=ir[156]=8;rr[156]=nr[156]=18;sr[156]=ar[156]=23;tr[137]=ar[137]=4;er[137]=or[137]=1;rr[137]=nr[137]=18;tr[139]=ar[139]=4;er[139]=rr[139]=13;nr[139]=or[139]=20;tr[98]=rr[98]=9;er[98]=ir[98]=12;sr[98]=or[98]=22;tr[99]=or[99]=0;er[99]=ir[99]=12;rr[99]=sr[99]=19;er[38]=ir[38]=12;nr[38]=ar[38]=21;sr[38]=or[38]=22;er[39]=ar[39]=5;ir[39]=nr[39]=16;sr[39]=or[39]=22;var Re=[];Re[1]=Re[169]=Dc;Re[4]=Re[166]=Bc;Re[16]=Re[154]=Fc;Re[64]=Re[106]=zc;Re[168]=Re[2]=jc;Re[162]=Re[8]=Hc;Re[138]=Re[32]=Gc;Re[42]=Re[128]=Uc;Re[5]=Re[165]=f1;Re[20]=Re[150]=d1;Re[80]=Re[90]=p1;Re[65]=Re[105]=m1;Re[160]=Re[10]=g1;Re[130]=Re[40]=y1;Re[85]=v1;Re[101]=Re[69]=b1;Re[149]=Re[21]=_1;Re[86]=Re[84]=w1;Re[89]=Re[81]=x1;Re[96]=Re[74]=E1;Re[24]=Re[146]=C1;Re[6]=Re[164]=M1;Re[129]=Re[41]=S1;Re[66]=Re[104]=k1;Re[144]=Re[26]=L1;Re[36]=Re[134]=T1;Re[9]=Re[161]=P1;Re[37]=Re[133]=R1;Re[148]=Re[22]=O1;Re[82]=Re[88]=A1;Re[73]=Re[97]=I1;Re[145]=Re[25]=N1;Re[70]=Re[100]=D1;Re[34]=function(e){return[Uc(e),Hc(e)]};Re[35]=B1;Re[136]=function(e){return[Gc(e),jc(e)]};Re[153]=function(e){return[Fc(e),Dc(e)]};Re[102]=function(e){return[Bc(e),zc(e)]};Re[155]=F1;Re[103]=z1;Re[152]=function(e){return[Fc(e),jc(e)]};Re[156]=j1;Re[137]=function(e){return[Gc(e),Dc(e)]};Re[139]=H1;Re[98]=function(e){return[Hc(e),zc(e)]};Re[99]=G1;Re[38]=function(e){return[Bc(e),Uc(e)]};Re[39]=U1;function q1(e){return(e>0)-(e<0)||+e}function Da(e,t,n){var i=t[0]-e[0],r=t[1]-e[1],o=n[0]-t[0],a=n[1]-t[1];return q1(i*a-o*r)}function rg(e,t){var n=e.geometry.coordinates[0].map(function(a){return a[0]}),i=e.geometry.coordinates[0].map(function(a){return a[1]}),r=t.geometry.coordinates[0].map(function(a){return a[0]}),o=t.geometry.coordinates[0].map(function(a){return a[1]});return Math.max.apply(null,n)===Math.max.apply(null,r)&&Math.max.apply(null,i)===Math.max.apply(null,o)&&Math.min.apply(null,n)===Math.min.apply(null,r)&&Math.min.apply(null,i)===Math.min.apply(null,o)}function Vc(e,t){return t.geometry.coordinates[0].every(function(n){return cn(wr(n),e)})}function ng(e,t){return e[0]===t[0]&&e[1]===t[1]}var W1=function(){function e(t){this.id=e.buildId(t),this.coordinates=t,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return e.buildId=function(t){return t.join(",")},e.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter(function(n){return n.from.id!==t.from.id})},e.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter(function(n){return n.to.id!==t.to.id})},e.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},e.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort(function(n,i){var r=n.to,o=i.to;if(r.coordinates[0]-t.coordinates[0]>=0&&o.coordinates[0]-t.coordinates[0]<0)return 1;if(r.coordinates[0]-t.coordinates[0]<0&&o.coordinates[0]-t.coordinates[0]>=0)return-1;if(r.coordinates[0]-t.coordinates[0]===0&&o.coordinates[0]-t.coordinates[0]===0)return r.coordinates[1]-t.coordinates[1]>=0||o.coordinates[1]-t.coordinates[1]>=0?r.coordinates[1]-o.coordinates[1]:o.coordinates[1]-r.coordinates[1];var a=Da(t.coordinates,r.coordinates,o.coordinates);if(a<0)return 1;if(a>0)return-1;var s=Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2),u=Math.pow(o.coordinates[0]-t.coordinates[0],2)+Math.pow(o.coordinates[1]-t.coordinates[1],2);return s-u}),this.outerEdgesSorted=!0)},e.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},e.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},e.prototype.addInnerEdge=function(t){this.innerEdges.push(t)},e}(),qc=W1;var X1=function(){function e(t,n){this.from=t,this.to=n,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return e.prototype.getSymetric=function(){return this.symetric||(this.symetric=new e(this.to,this.from),this.symetric.symetric=this),this.symetric},e.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},e.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},e.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},e.prototype.toLineString=function(){return un([this.from.coordinates,this.to.coordinates])},e.prototype.compareTo=function(t){return Da(t.from.coordinates,t.to.coordinates,this.to.coordinates)},e}(),sg=X1;var $1=function(){function e(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return e.prototype.push=function(t){this.edges.push(t),this.polygon=this.envelope=void 0},e.prototype.get=function(t){return this.edges[t]},Object.defineProperty(e.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),e.prototype.forEach=function(t){this.edges.forEach(t)},e.prototype.map=function(t){return this.edges.map(t)},e.prototype.some=function(t){return this.edges.some(t)},e.prototype.isValid=function(){return!0},e.prototype.isHole=function(){var t=this,n=this.edges.reduce(function(a,s,u){return s.from.coordinates[1]>t.edges[a].from.coordinates[1]&&(a=u),a},0),i=(n===0?this.length:n)-1,r=(n+1)%this.length,o=Da(this.edges[i].from.coordinates,this.edges[n].from.coordinates,this.edges[r].from.coordinates);return o===0?this.edges[i].from.coordinates[0]>this.edges[r].from.coordinates[0]:o>0},e.prototype.toMultiPoint=function(){return Eh(this.edges.map(function(t){return t.from.coordinates}))},e.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map(function(n){return n.from.coordinates});return t.push(this.edges[0].from.coordinates),this.polygon=Gr([t])},e.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=Hh(this.toPolygon())},e.findEdgeRingContaining=function(t,n){var i=t.getEnvelope(),r,o;return n.forEach(function(a){var s=a.getEnvelope();if(o&&(r=o.getEnvelope()),!rg(s,i)&&Vc(s,i)){for(var u=t.map(function(p){return p.from.coordinates}),f=void 0,c=function(p){a.some(function(_){return ng(p,_.from.coordinates)})||(f=p)},d=0,m=u;d<m.length;d++){var v=m[d];c(v)}f&&a.inside(wr(f))&&(!o||Vc(r,s))&&(o=a)}}),o},e.prototype.inside=function(t){return cn(t,this.toPolygon())},e}(),Wc=$1;function Y1(e){if(!e)throw new Error("No geojson passed");if(e.type!=="FeatureCollection"&&e.type!=="GeometryCollection"&&e.type!=="MultiLineString"&&e.type!=="LineString"&&e.type!=="Feature")throw new Error("Invalid input type '"+e.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}var $4=function(){function e(){this.edges=[],this.nodes={}}return e.fromGeoJson=function(t){Y1(t);var n=new e;return es(t,function(i){Mh(i,"LineString","Graph::fromGeoJson"),yd(i,function(r,o){if(r){var a=n.getNode(r),s=n.getNode(o);n.addEdge(a,s)}return o})}),n},e.prototype.getNode=function(t){var n=qc.buildId(t),i=this.nodes[n];return i||(i=this.nodes[n]=new qc(t)),i},e.prototype.addEdge=function(t,n){var i=new sg(t,n),r=i.getSymetric();this.edges.push(i),this.edges.push(r)},e.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map(function(n){return t.nodes[n]}).forEach(function(n){return t._removeIfDangle(n)})},e.prototype._removeIfDangle=function(t){var n=this;if(t.innerEdges.length<=1){var i=t.getOuterEdges().map(function(r){return r.to});this.removeNode(t),i.forEach(function(r){return n._removeIfDangle(r)})}},e.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(n){n.label===n.symetric.label&&(t.removeEdge(n.symetric),t.removeEdge(n))})},e.prototype._computeNextCWEdges=function(t){var n=this;typeof t>"u"?Object.keys(this.nodes).forEach(function(i){return n._computeNextCWEdges(n.nodes[i])}):t.getOuterEdges().forEach(function(i,r){t.getOuterEdge((r===0?t.getOuterEdges().length:r)-1).symetric.next=i})},e.prototype._computeNextCCWEdges=function(t,n){for(var i=t.getOuterEdges(),r,o,a=i.length-1;a>=0;--a){var s=i[a],u=s.symetric,f=void 0,c=void 0;s.label===n&&(f=s),u.label===n&&(c=u),!(!f||!c)&&(c&&(o=c),f&&(o&&(o.next=f,o=void 0),r||(r=f)))}o&&(o.next=r)},e.prototype._findLabeledEdgeRings=function(){var t=[],n=0;return this.edges.forEach(function(i){if(!(i.label>=0)){t.push(i);var r=i;do r.label=n,r=r.next;while(!i.isEqual(r));n++}}),t},e.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach(function(i){i.label=void 0}),this._findLabeledEdgeRings().forEach(function(i){t._findIntersectionNodes(i).forEach(function(r){t._computeNextCCWEdges(r,i.label)})});var n=[];return this.edges.forEach(function(i){i.ring||n.push(t._findEdgeRing(i))}),n},e.prototype._findIntersectionNodes=function(t){var n=[],i=t,r=function(){var o=0;i.from.getOuterEdges().forEach(function(a){a.label===t.label&&++o}),o>1&&n.push(i.from),i=i.next};do r();while(!t.isEqual(i));return n},e.prototype._findEdgeRing=function(t){var n=t,i=new Wc;do i.push(n),n.ring=i,n=n.next;while(!t.isEqual(n));return i},e.prototype.removeNode=function(t){var n=this;t.getOuterEdges().forEach(function(i){return n.removeEdge(i)}),t.innerEdges.forEach(function(i){return n.removeEdge(i)}),delete this.nodes[t.id]},e.prototype.removeEdge=function(t){this.edges=this.edges.filter(function(n){return!n.isEqual(t)}),t.deleteEdge()},e}();function Po(e,t){var n=hn(e),i=hn(t),r=n.type,o=i.type,a=n.coordinates,s=i.coordinates;switch(r){case"Point":switch(o){case"Point":return Xc(a,s);default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"Point":return Z1(n,i);case"MultiPoint":return K1(n,i);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"Point":return Ls(i,n,{ignoreEndVertices:!0});case"LineString":return t_(n,i);case"MultiPoint":return J1(n,i);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Point":return cn(i,n,{ignoreBoundary:!0});case"LineString":return e_(n,i);case"Polygon":return i_(n,i);case"MultiPoint":return Q1(n,i);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+r+" geometry not supported")}}function Z1(e,t){var n,i=!1;for(n=0;n<e.coordinates.length;n++)if(Xc(e.coordinates[n],t.coordinates)){i=!0;break}return i}function K1(e,t){for(var n=0,i=t.coordinates;n<i.length;n++){for(var r=i[n],o=!1,a=0,s=e.coordinates;a<s.length;a++){var u=s[a];if(Xc(r,u)){o=!0;break}}if(!o)return!1}return!0}function J1(e,t){for(var n=!1,i=0,r=t.coordinates;i<r.length;i++){var o=r[i];if(Ls(o,e,{ignoreEndVertices:!0})&&(n=!0),!Ls(o,e))return!1}return!!n}function Q1(e,t){for(var n=0,i=t.coordinates;n<i.length;n++){var r=i[n];if(!cn(r,e,{ignoreBoundary:!0}))return!1}return!0}function t_(e,t){for(var n=!1,i=0,r=t.coordinates;i<r.length;i++){var o=r[i];if(Ls({type:"Point",coordinates:o},e,{ignoreEndVertices:!0})&&(n=!0),!Ls({type:"Point",coordinates:o},e,{ignoreEndVertices:!1}))return!1}return n}function e_(e,t){var n=!1,i=0,r=En(e),o=En(t);if(!ag(r,o))return!1;for(i;i<t.coordinates.length-1;i++){var a=r_(t.coordinates[i],t.coordinates[i+1]);if(cn({type:"Point",coordinates:a},e,{ignoreBoundary:!0})){n=!0;break}}return n}function i_(e,t){if(e.type==="Feature"&&e.geometry===null||t.type==="Feature"&&t.geometry===null)return!1;var n=En(e),i=En(t);if(!ag(n,i))return!1;for(var r=hn(t).coordinates,o=0,a=r;o<a.length;o++)for(var s=a[o],u=0,f=s;u<f.length;u++){var c=f[u];if(!cn(c,e))return!1}return!0}function ag(e,t){return!(e[0]>t[0]||e[2]<t[2]||e[1]>t[1]||e[3]<t[3])}function Xc(e,t){return e[0]===t[0]&&e[1]===t[1]}function r_(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}var cg=hr($c(),1);function na(e,t){var n=hn(e),i=hn(t),r=n.type,o=i.type;if(r==="MultiPoint"&&o!=="MultiPoint"||(r==="LineString"||r==="MultiLineString")&&o!=="LineString"&&o!=="MultiLineString"||(r==="Polygon"||r==="MultiPolygon")&&o!=="Polygon"&&o!=="MultiPolygon")throw new Error("features must be of the same type");if(r==="Point")throw new Error("Point geometry not supported");var a=new cg.default({precision:6});if(a.compare(e,t))return!1;var s=0;switch(r){case"MultiPoint":for(var u=0;u<n.coordinates.length;u++)for(var f=0;f<i.coordinates.length;f++){var c=n.coordinates[u],d=i.coordinates[f];if(c[0]===d[0]&&c[1]===d[1])return!0}return!1;case"LineString":case"MultiLineString":jo(e,function(m){jo(t,function(v){Nc(m,v).features.length&&s++})});break;case"Polygon":case"MultiPolygon":jo(e,function(m){jo(t,function(v){Uo(m,v).features.length&&s++})});break}return s>0}var o_=hr($c(),1);var l_=hr(gg(),1);var m_=hr(Sg(),1);function Lg(e){for(var t=e,n=[];t.parent;)n.unshift(t),t=t.parent;return n}function y_(){return new Tg(function(e){return e.f})}var Jc={search:function(e,t,n,i){e.cleanDirty(),i=i||{};var r=i.heuristic||Jc.heuristics.manhattan,o=i.closest||!1,a=y_(),s=t;for(t.h=r(t,n),a.push(t);a.size()>0;){var u=a.pop();if(u===n)return Lg(u);u.closed=!0;for(var f=e.neighbors(u),c=0,d=f.length;c<d;++c){var m=f[c];if(!(m.closed||m.isWall())){var v=u.g+m.getCost(u),p=m.visited;(!p||v<m.g)&&(m.visited=!0,m.parent=u,m.h=m.h||r(m,n),m.g=v,m.f=m.g+m.h,e.markDirty(m),o&&(m.h<s.h||m.h===s.h&&m.g<s.g)&&(s=m),p?a.rescoreElement(m):a.push(m))}}}return o?Lg(s):[]},heuristics:{manhattan:function(e,t){var n=Math.abs(t.x-e.x),i=Math.abs(t.y-e.y);return n+i},diagonal:function(e,t){var n=1,i=Math.sqrt(2),r=Math.abs(t.x-e.x),o=Math.abs(t.y-e.y);return n*(r+o)+(i-2*n)*Math.min(r,o)}},cleanNode:function(e){e.f=0,e.g=0,e.h=0,e.visited=!1,e.closed=!1,e.parent=null}};function Cl(e,t){t=t||{},this.nodes=[],this.diagonal=!!t.diagonal,this.grid=[];for(var n=0;n<e.length;n++){this.grid[n]=[];for(var i=0,r=e[n];i<r.length;i++){var o=new Du(n,i,r[i]);this.grid[n][i]=o,this.nodes.push(o)}}this.init()}Cl.prototype.init=function(){this.dirtyNodes=[];for(var e=0;e<this.nodes.length;e++)Jc.cleanNode(this.nodes[e])};Cl.prototype.cleanDirty=function(){for(var e=0;e<this.dirtyNodes.length;e++)Jc.cleanNode(this.dirtyNodes[e]);this.dirtyNodes=[]};Cl.prototype.markDirty=function(e){this.dirtyNodes.push(e)};Cl.prototype.neighbors=function(e){var t=[],n=e.x,i=e.y,r=this.grid;return r[n-1]&&r[n-1][i]&&t.push(r[n-1][i]),r[n+1]&&r[n+1][i]&&t.push(r[n+1][i]),r[n]&&r[n][i-1]&&t.push(r[n][i-1]),r[n]&&r[n][i+1]&&t.push(r[n][i+1]),this.diagonal&&(r[n-1]&&r[n-1][i-1]&&t.push(r[n-1][i-1]),r[n+1]&&r[n+1][i-1]&&t.push(r[n+1][i-1]),r[n-1]&&r[n-1][i+1]&&t.push(r[n-1][i+1]),r[n+1]&&r[n+1][i+1]&&t.push(r[n+1][i+1])),t};Cl.prototype.toString=function(){for(var e=[],t=this.grid,n,i,r,o,a=0,s=t.length;a<s;a++){for(n=[],i=t[a],r=0,o=i.length;r<o;r++)n.push(i[r].weight);e.push(n.join(" "))}return e.join(`
`)};function Du(e,t,n){this.x=e,this.y=t,this.weight=n}Du.prototype.toString=function(){return"["+this.x+" "+this.y+"]"};Du.prototype.getCost=function(e){return e&&e.x!==this.x&&e.y!==this.y?this.weight*1.41421:this.weight};Du.prototype.isWall=function(){return this.weight===0};function Tg(e){this.content=[],this.scoreFunction=e}Tg.prototype={push:function(e){this.content.push(e),this.sinkDown(this.content.length-1)},pop:function(){var e=this.content[0],t=this.content.pop();return this.content.length>0&&(this.content[0]=t,this.bubbleUp(0)),e},remove:function(e){var t=this.content.indexOf(e),n=this.content.pop();t!==this.content.length-1&&(this.content[t]=n,this.scoreFunction(n)<this.scoreFunction(e)?this.sinkDown(t):this.bubbleUp(t))},size:function(){return this.content.length},rescoreElement:function(e){this.sinkDown(this.content.indexOf(e))},sinkDown:function(e){for(var t=this.content[e];e>0;){var n=(e+1>>1)-1,i=this.content[n];if(this.scoreFunction(t)<this.scoreFunction(i))this.content[n]=t,this.content[e]=i,e=n;else break}},bubbleUp:function(e){for(var t=this.content.length,n=this.content[e],i=this.scoreFunction(n);;){var r=e+1<<1,o=r-1,a=null,s;if(o<t){var u=this.content[o];s=this.scoreFunction(u),s<i&&(a=o)}if(r<t){var f=this.content[r],c=this.scoreFunction(f);c<(a===null?i:s)&&(a=r)}if(a!==null)this.content[e]=this.content[a],this.content[a]=n,e=a;else break}}};function Qc(){this._=null}function Fa(e){e.U=e.C=e.L=e.R=e.P=e.N=null}Qc.prototype={constructor:Qc,insert:function(e,t){var n,i,r;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=Pg(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)i=n.U,n===i.L?(r=i.R,r&&r.C?(n.C=r.C=!1,i.C=!0,e=i):(e===n.R&&(Ml(this,n),e=n,n=e.U),n.C=!1,i.C=!0,Sl(this,i))):(r=i.L,r&&r.C?(n.C=r.C=!1,i.C=!0,e=i):(e===n.L&&(Sl(this,n),e=n,n=e.U),n.C=!1,i.C=!0,Ml(this,i))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t=e.U,n,i=e.L,r=e.R,o,a;if(i?r?o=Pg(r):o=i:o=r,t?t.L===e?t.L=o:t.R=o:this._=o,i&&r?(a=o.C,o.C=e.C,o.L=i,i.U=o,o!==r?(t=o.U,o.U=e.U,e=o.R,t.L=e,o.R=r,r.U=o):(o.U=t,t=o,e=o.R)):(a=e.C,e=o),e&&(e.U=t),!a){if(e&&e.C){e.C=!1;return}do{if(e===this._)break;if(e===t.L){if(n=t.R,n.C&&(n.C=!1,t.C=!0,Ml(this,t),n=t.R),n.L&&n.L.C||n.R&&n.R.C){(!n.R||!n.R.C)&&(n.L.C=!1,n.C=!0,Sl(this,n),n=t.R),n.C=t.C,t.C=n.R.C=!1,Ml(this,t),e=this._;break}}else if(n=t.L,n.C&&(n.C=!1,t.C=!0,Sl(this,t),n=t.L),n.L&&n.L.C||n.R&&n.R.C){(!n.L||!n.L.C)&&(n.R.C=!1,n.C=!0,Ml(this,n),n=t.L),n.C=t.C,t.C=n.L.C=!1,Sl(this,t),e=this._;break}n.C=!0,e=t,t=t.U}while(!e.C);e&&(e.C=!1)}}};function Ml(e,t){var n=t,i=t.R,r=n.U;r?r.L===n?r.L=i:r.R=i:e._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function Sl(e,t){var n=t,i=t.L,r=n.U;r?r.L===n?r.L=i:r.R=i:e._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function Pg(e){for(;e.L;)e=e.L;return e}var tf=Qc;function za(e,t,n,i){var r=[null,null],o=Fn.push(r)-1;return r.left=e,r.right=t,n&&kl(r,e,t,n),i&&kl(r,t,e,i),ls[e.index].halfedges.push(o),ls[t.index].halfedges.push(o),r}function ja(e,t,n){var i=[t,n];return i.left=e,i}function kl(e,t,n,i){!e[0]&&!e[1]?(e[0]=i,e.left=t,e.right=n):e.left===n?e[1]=i:e[0]=i}function v_(e,t,n,i,r){var o=e[0],a=e[1],s=o[0],u=o[1],f=a[0],c=a[1],d=0,m=1,v=f-s,p=c-u,_;if(_=t-s,!(!v&&_>0)){if(_/=v,v<0){if(_<d)return;_<m&&(m=_)}else if(v>0){if(_>m)return;_>d&&(d=_)}if(_=i-s,!(!v&&_<0)){if(_/=v,v<0){if(_>m)return;_>d&&(d=_)}else if(v>0){if(_<d)return;_<m&&(m=_)}if(_=n-u,!(!p&&_>0)){if(_/=p,p<0){if(_<d)return;_<m&&(m=_)}else if(p>0){if(_>m)return;_>d&&(d=_)}if(_=r-u,!(!p&&_<0)){if(_/=p,p<0){if(_>m)return;_>d&&(d=_)}else if(p>0){if(_<d)return;_<m&&(m=_)}return!(d>0)&&!(m<1)||(d>0&&(e[0]=[s+d*v,u+d*p]),m<1&&(e[1]=[s+m*v,u+m*p])),!0}}}}}function b_(e,t,n,i,r){var o=e[1];if(o)return!0;var a=e[0],s=e.left,u=e.right,f=s[0],c=s[1],d=u[0],m=u[1],v=(f+d)/2,p=(c+m)/2,_,y;if(m===c){if(v<t||v>=i)return;if(f>d){if(!a)a=[v,n];else if(a[1]>=r)return;o=[v,r]}else{if(!a)a=[v,r];else if(a[1]<n)return;o=[v,n]}}else if(_=(f-d)/(m-c),y=p-_*v,_<-1||_>1)if(f>d){if(!a)a=[(n-y)/_,n];else if(a[1]>=r)return;o=[(r-y)/_,r]}else{if(!a)a=[(r-y)/_,r];else if(a[1]<n)return;o=[(n-y)/_,n]}else if(c<m){if(!a)a=[t,_*t+y];else if(a[0]>=i)return;o=[i,_*i+y]}else{if(!a)a=[i,_*i+y];else if(a[0]<t)return;o=[t,_*t+y]}return e[0]=a,e[1]=o,!0}function Rg(e,t,n,i){for(var r=Fn.length,o;r--;)(!b_(o=Fn[r],e,t,n,i)||!v_(o,e,t,n,i)||!(Math.abs(o[0][0]-o[1][0])>Lr||Math.abs(o[0][1]-o[1][1])>Lr))&&delete Fn[r]}function Og(e){return ls[e.index]={site:e,halfedges:[]}}function __(e,t){var n=e.site,i=t.left,r=t.right;return n===r&&(r=i,i=n),r?Math.atan2(r[1]-i[1],r[0]-i[0]):(n===i?(i=t[1],r=t[0]):(i=t[0],r=t[1]),Math.atan2(i[0]-r[0],r[1]-i[1]))}function ef(e,t){return t[+(t.left!==e.site)]}function w_(e,t){return t[+(t.left===e.site)]}function Ag(){for(var e=0,t=ls.length,n,i,r,o;e<t;++e)if((n=ls[e])&&(o=(i=n.halfedges).length)){var a=new Array(o),s=new Array(o);for(r=0;r<o;++r)a[r]=r,s[r]=__(n,Fn[i[r]]);for(a.sort(function(u,f){return s[f]-s[u]}),r=0;r<o;++r)s[r]=i[a[r]];for(r=0;r<o;++r)i[r]=s[r]}}function Ig(e,t,n,i){var r=ls.length,o,a,s,u,f,c,d,m,v,p,_,y,x=!0;for(o=0;o<r;++o)if(a=ls[o]){for(s=a.site,f=a.halfedges,u=f.length;u--;)Fn[f[u]]||f.splice(u,1);for(u=0,c=f.length;u<c;)p=w_(a,Fn[f[u]]),_=p[0],y=p[1],d=ef(a,Fn[f[++u%c]]),m=d[0],v=d[1],(Math.abs(_-m)>Lr||Math.abs(y-v)>Lr)&&(f.splice(u,0,Fn.push(ja(s,p,Math.abs(_-e)<Lr&&i-y>Lr?[e,Math.abs(m-e)<Lr?v:i]:Math.abs(y-i)<Lr&&n-_>Lr?[Math.abs(v-i)<Lr?m:n,i]:Math.abs(_-n)<Lr&&y-t>Lr?[n,Math.abs(m-n)<Lr?v:t]:Math.abs(y-t)<Lr&&_-e>Lr?[Math.abs(v-t)<Lr?m:e,t]:null))-1),++c);c&&(x=!1)}if(x){var S,O,B,U=1/0;for(o=0,x=null;o<r;++o)(a=ls[o])&&(s=a.site,S=s[0]-e,O=s[1]-t,B=S*S+O*O,B<U&&(U=B,x=a));if(x){var z=[e,t],q=[e,i],G=[n,i],tt=[n,t];x.halfedges.push(Fn.push(ja(s=x.site,z,q))-1,Fn.push(ja(s,q,G))-1,Fn.push(ja(s,G,tt))-1,Fn.push(ja(s,tt,z))-1)}}for(o=0;o<r;++o)(a=ls[o])&&(a.halfedges.length||delete ls[o])}var Ng=[],Bu;function x_(){Fa(this),this.x=this.y=this.arc=this.site=this.cy=null}function sa(e){var t=e.P,n=e.N;if(!(!t||!n)){var i=t.site,r=e.site,o=n.site;if(i!==o){var a=r[0],s=r[1],u=i[0]-a,f=i[1]-s,c=o[0]-a,d=o[1]-s,m=2*(u*d-f*c);if(!(m>=-Dg)){var v=u*u+f*f,p=c*c+d*d,_=(d*v-f*p)/m,y=(u*p-c*v)/m,x=Ng.pop()||new x_;x.arc=e,x.site=r,x.x=_+a,x.y=(x.cy=y+s)+Math.sqrt(_*_+y*y),e.circle=x;for(var S=null,O=Ha._;O;)if(x.y<O.y||x.y===O.y&&x.x<=O.x)if(O.L)O=O.L;else{S=O.P;break}else if(O.R)O=O.R;else{S=O;break}Ha.insert(S,x),S||(Bu=x)}}}}function oa(e){var t=e.circle;t&&(t.P||(Bu=t.N),Ha.remove(t),Ng.push(t),Fa(t),e.circle=null)}var Fg=[];function E_(){Fa(this),this.edge=this.site=this.circle=null}function Bg(e){var t=Fg.pop()||new E_;return t.site=e,t}function rf(e){oa(e),aa.remove(e),Fg.push(e),Fa(e)}function zg(e){var t=e.circle,n=t.x,i=t.cy,r=[n,i],o=e.P,a=e.N,s=[e];rf(e);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<Lr&&Math.abs(i-u.circle.cy)<Lr;)o=u.P,s.unshift(u),rf(u),u=o;s.unshift(u),oa(u);for(var f=a;f.circle&&Math.abs(n-f.circle.x)<Lr&&Math.abs(i-f.circle.cy)<Lr;)a=f.N,s.push(f),rf(f),f=a;s.push(f),oa(f);var c=s.length,d;for(d=1;d<c;++d)f=s[d],u=s[d-1],kl(f.edge,u.site,f.site,r);u=s[0],f=s[c-1],f.edge=za(u.site,f.site,null,r),sa(u),sa(f)}function jg(e){for(var t=e[0],n=e[1],i,r,o,a,s=aa._;s;)if(o=Hg(s,n)-t,o>Lr)s=s.L;else if(a=t-C_(s,n),a>Lr){if(!s.R){i=s;break}s=s.R}else{o>-Lr?(i=s.P,r=s):a>-Lr?(i=s,r=s.N):i=r=s;break}Og(e);var u=Bg(e);if(aa.insert(i,u),!(!i&&!r)){if(i===r){oa(i),r=Bg(i.site),aa.insert(u,r),u.edge=r.edge=za(i.site,u.site),sa(i),sa(r);return}if(!r){u.edge=za(i.site,u.site);return}oa(i),oa(r);var f=i.site,c=f[0],d=f[1],m=e[0]-c,v=e[1]-d,p=r.site,_=p[0]-c,y=p[1]-d,x=2*(m*y-v*_),S=m*m+v*v,O=_*_+y*y,B=[(y*S-v*O)/x+c,(m*O-_*S)/x+d];kl(r.edge,f,p,B),u.edge=za(f,e,null,B),r.edge=za(e,p,null,B),sa(i),sa(r)}}function Hg(e,t){var n=e.site,i=n[0],r=n[1],o=r-t;if(!o)return i;var a=e.P;if(!a)return-1/0;n=a.site;var s=n[0],u=n[1],f=u-t;if(!f)return s;var c=s-i,d=1/o-1/f,m=c/f;return d?(-m+Math.sqrt(m*m-2*d*(c*c/(-2*f)-u+f/2+r-o/2)))/d+i:(i+s)/2}function C_(e,t){var n=e.N;if(n)return Hg(n,t);var i=e.site;return i[1]===t?i[0]:1/0}var Lr=1e-6,Dg=1e-12,aa,ls,Ha,Fn;function M_(e,t,n){return(e[0]-n[0])*(t[1]-e[1])-(e[0]-t[0])*(n[1]-e[1])}function S_(e,t){return t[1]-e[1]||t[0]-e[0]}function Fu(e,t){var n=e.sort(S_).pop(),i,r,o;for(Fn=[],ls=new Array(e.length),aa=new tf,Ha=new tf;;)if(o=Bu,n&&(!o||n[1]<o.y||n[1]===o.y&&n[0]<o.x))(n[0]!==i||n[1]!==r)&&(jg(n),i=n[0],r=n[1]),n=e.pop();else if(o)zg(o.arc);else break;if(Ag(),t){var a=+t[0][0],s=+t[0][1],u=+t[1][0],f=+t[1][1];Rg(a,s,u,f),Ig(a,s,u,f)}this.edges=Fn,this.cells=ls,aa=Ha=Fn=ls=null}Fu.prototype={constructor:Fu,polygons:function(){var e=this.edges;return this.cells.map(function(t){var n=t.halfedges.map(function(i){return ef(t,e[i])});return n.data=t.site.data,n})},triangles:function(){var e=[],t=this.edges;return this.cells.forEach(function(n,i){if(s=(o=n.halfedges).length)for(var r=n.site,o,a=-1,s,u,f=t[o[s-1]],c=f.left===r?f.right:f.left;++a<s;)u=c,f=t[o[a]],c=f.left===r?f.right:f.left,u&&c&&i<u.index&&i<c.index&&M_(r,u,c)<0&&e.push([r.data,u.data,c.data])}),e},links:function(){return this.edges.filter(function(e){return e.right}).map(function(e){return{source:e.left.data,target:e.right.data}})},find:function(e,t,n){for(var i=this,r,o=i._found||0,a=i.cells.length,s;!(s=i.cells[o]);)if(++o>=a)return null;var u=e-s.site[0],f=t-s.site[1],c=u*u+f*f;do s=i.cells[r=o],o=null,s.halfedges.forEach(function(d){var m=i.edges[d],v=m.left;if(!((v===s.site||!v)&&!(v=m.right))){var p=e-v[0],_=t-v[1],y=p*p+_*_;y<c&&(c=y,o=v.index)}});while(o!==null);return i._found=r,n==null||c<=n*n?s.site:null}};var I_=hr(Ga(),1);var Xa=hr(qg(),1);function _s(){return new Hu}function Hu(){this.reset()}Hu.prototype={constructor:Hu,reset:function(){this.s=this.t=0},add:function(e){Wg(ju,e,this.t),Wg(this,ju.s,this.s),this.s?this.t+=ju.t:this.s=ju.t},valueOf:function(){return this.s}};var ju=new Hu;function Wg(e,t,n){var i=e.s=t+n,r=i-t,o=i-r;e.t=t-o+(n-r)}var vi=1e-6;var Ji=Math.PI,Rn=Ji/2,Gu=Ji/4,$n=Ji*2,us=180/Ji,tn=Ji/180,_r=Math.abs,Js=Math.atan,zn=Math.atan2,pi=Math.cos;var Uu=Math.exp;var Ll=Math.log;var mi=Math.sin;var Cn=Math.sqrt,Tl=Math.tan;function Vu(e){return e>1?0:e<-1?Ji:Math.acos(e)}function On(e){return e>1?Rn:e<-1?-Rn:Math.asin(e)}function hs(){}function qu(e,t){e&&$g.hasOwnProperty(e.type)&&$g[e.type](e,t)}var Xg={Feature:function(e,t){qu(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)qu(n[i].geometry,t)}},$g={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){of(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)of(n[i],t,0)},Polygon:function(e,t){Yg(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)Yg(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)qu(n[i],t)}};function of(e,t,n){var i=-1,r=e.length-n,o;for(t.lineStart();++i<r;)o=e[i],t.point(o[0],o[1],o[2]);t.lineEnd()}function Yg(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)of(e[n],t,1);t.polygonEnd()}function Xo(e,t){e&&Xg.hasOwnProperty(e.type)?Xg[e.type](e,t):qu(e,t)}var N_=_s(),GT=_s();function Ua(e){return[zn(e[1],e[0]),On(e[2])]}function Qs(e){var t=e[0],n=e[1],i=pi(n);return[i*pi(t),i*mi(t),mi(n)]}function Pl(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function la(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Wu(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Rl(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Va(e){var t=Cn(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var JT=_s();function Xu(e,t){function n(i,r){return i=e(i,r),t(i[0],i[1])}return e.invert&&t.invert&&(n.invert=function(i,r){return i=t.invert(i,r),i&&e.invert(i[0],i[1])}),n}function af(e,t){return[e>Ji?e-$n:e<-Ji?e+$n:e,t]}af.invert=af;function lf(e,t,n){return(e%=$n)?t||n?Xu(Kg(e),Jg(t,n)):Kg(e):t||n?Jg(t,n):af}function Zg(e){return function(t,n){return t+=e,[t>Ji?t-$n:t<-Ji?t+$n:t,n]}}function Kg(e){var t=Zg(e);return t.invert=Zg(-e),t}function Jg(e,t){var n=pi(e),i=mi(e),r=pi(t),o=mi(t);function a(s,u){var f=pi(u),c=pi(s)*f,d=mi(s)*f,m=mi(u),v=m*n+c*i;return[zn(d*r-v*o,c*n-m*i),On(v*r+d*o)]}return a.invert=function(s,u){var f=pi(u),c=pi(s)*f,d=mi(s)*f,m=mi(u),v=m*r-d*o;return[zn(d*r+m*o,c*n+v*i),On(v*n-c*i)]},a}function t0(e,t,n,i,r,o){if(n){var a=pi(t),s=mi(t),u=i*n;r==null?(r=t+i*$n,o=t-u/2):(r=Qg(a,r),o=Qg(a,o),(i>0?r<o:r>o)&&(r+=i*$n));for(var f,c=r;i>0?c>o:c<o;c-=u)f=Ua([a,-s*pi(c),-s*mi(c)]),e.point(f[0],f[1])}}function Qg(e,t){t=Qs(t),t[0]-=e,Va(t);var n=Vu(-t[1]);return((-t[2]<0?-n:n)+$n-vi)%$n}function $u(){var e=[],t;return{point:function(n,i){t.push([n,i])},lineStart:function(){e.push(t=[])},lineEnd:hs,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function e0(e,t,n,i,r,o){var a=e[0],s=e[1],u=t[0],f=t[1],c=0,d=1,m=u-a,v=f-s,p;if(p=n-a,!(!m&&p>0)){if(p/=m,m<0){if(p<c)return;p<d&&(d=p)}else if(m>0){if(p>d)return;p>c&&(c=p)}if(p=r-a,!(!m&&p<0)){if(p/=m,m<0){if(p>d)return;p>c&&(c=p)}else if(m>0){if(p<c)return;p<d&&(d=p)}if(p=i-s,!(!v&&p>0)){if(p/=v,v<0){if(p<c)return;p<d&&(d=p)}else if(v>0){if(p>d)return;p>c&&(c=p)}if(p=o-s,!(!v&&p<0)){if(p/=v,v<0){if(p>d)return;p>c&&(c=p)}else if(v>0){if(p<c)return;p<d&&(d=p)}return c>0&&(e[0]=a+c*m,e[1]=s+c*v),d<1&&(t[0]=a+d*m,t[1]=s+d*v),!0}}}}}function qa(e,t){return _r(e[0]-t[0])<vi&&_r(e[1]-t[1])<vi}function Yu(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function Zu(e,t,n,i,r){var o=[],a=[],s,u;if(e.forEach(function(p){if(!((_=p.length-1)<=0)){var _,y=p[0],x=p[_],S;if(qa(y,x)){for(r.lineStart(),s=0;s<_;++s)r.point((y=p[s])[0],y[1]);r.lineEnd();return}o.push(S=new Yu(y,p,null,!0)),a.push(S.o=new Yu(y,null,S,!1)),o.push(S=new Yu(x,p,null,!1)),a.push(S.o=new Yu(x,null,S,!0))}}),!!o.length){for(a.sort(t),i0(o),i0(a),s=0,u=a.length;s<u;++s)a[s].e=n=!n;for(var f=o[0],c,d;;){for(var m=f,v=!0;m.v;)if((m=m.n)===f)return;c=m.z,r.lineStart();do{if(m.v=m.o.v=!0,m.e){if(v)for(s=0,u=c.length;s<u;++s)r.point((d=c[s])[0],d[1]);else i(m.x,m.n.x,1,r);m=m.n}else{if(v)for(c=m.p.z,s=c.length-1;s>=0;--s)r.point((d=c[s])[0],d[1]);else i(m.x,m.p.x,-1,r);m=m.p}m=m.o,c=m.z,v=!v}while(!m.v);r.lineEnd()}}}function i0(e){if(t=e.length){for(var t,n=0,i=e[0],r;++n<t;)i.n=r=e[n],r.p=i,i=r;i.n=r=e[0],r.p=i}}function $o(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function uf(e){return e.length===1&&(e=D_(e)),{left:function(t,n,i,r){for(i==null&&(i=0),r==null&&(r=t.length);i<r;){var o=i+r>>>1;e(t[o],n)<0?i=o+1:r=o}return i},right:function(t,n,i,r){for(i==null&&(i=0),r==null&&(r=t.length);i<r;){var o=i+r>>>1;e(t[o],n)>0?r=o:i=o+1}return i}}}function D_(e){return function(t,n){return $o(e(t),n)}}var r0=uf($o),B_=r0.right,F_=r0.left;var n0=Array.prototype,j_=n0.slice,H_=n0.map;var V5=Math.sqrt(50),q5=Math.sqrt(10),W5=Math.sqrt(2);function Ol(e){for(var t=e.length,n,i=-1,r=0,o,a;++i<t;)r+=e[i].length;for(o=new Array(r);--t>=0;)for(a=e[t],n=a.length;--n>=0;)o[--r]=a[n];return o}var Al=1e9,Ju=-Al;function hf(e,t,n,i){function r(f,c){return e<=f&&f<=n&&t<=c&&c<=i}function o(f,c,d,m){var v=0,p=0;if(f==null||(v=a(f,d))!==(p=a(c,d))||u(f,c)<0^d>0)do m.point(v===0||v===3?e:n,v>1?i:t);while((v=(v+d+4)%4)!==p);else m.point(c[0],c[1])}function a(f,c){return _r(f[0]-e)<vi?c>0?0:3:_r(f[0]-n)<vi?c>0?2:1:_r(f[1]-t)<vi?c>0?1:0:c>0?3:2}function s(f,c){return u(f.x,c.x)}function u(f,c){var d=a(f,1),m=a(c,1);return d!==m?d-m:d===0?c[1]-f[1]:d===1?f[0]-c[0]:d===2?f[1]-c[1]:c[0]-f[0]}return function(f){var c=f,d=$u(),m,v,p,_,y,x,S,O,B,U,z,q={point:G,lineStart:N,lineEnd:Z,polygonStart:K,polygonEnd:D};function G(C,k){r(C,k)&&c.point(C,k)}function tt(){for(var C=0,k=0,T=v.length;k<T;++k)for(var R=v[k],F=1,H=R.length,it=R[0],ot,dt,$=it[0],ct=it[1];F<H;++F)ot=$,dt=ct,it=R[F],$=it[0],ct=it[1],dt<=i?ct>i&&($-ot)*(i-dt)>(ct-dt)*(e-ot)&&++C:ct<=i&&($-ot)*(i-dt)<(ct-dt)*(e-ot)&&--C;return C}function K(){c=d,m=[],v=[],z=!0}function D(){var C=tt(),k=z&&C,T=(m=Ol(m)).length;(k||T)&&(f.polygonStart(),k&&(f.lineStart(),o(null,null,1,f),f.lineEnd()),T&&Zu(m,s,C,o,f),f.polygonEnd()),c=f,m=v=p=null}function N(){q.point=w,v&&v.push(p=[]),U=!0,B=!1,S=O=NaN}function Z(){m&&(w(_,y),x&&B&&d.rejoin(),m.push(d.result())),q.point=G,B&&c.lineEnd()}function w(C,k){var T=r(C,k);if(v&&p.push([C,k]),U)_=C,y=k,x=T,U=!1,T&&(c.lineStart(),c.point(C,k));else if(T&&B)c.point(C,k);else{var R=[S=Math.max(Ju,Math.min(Al,S)),O=Math.max(Ju,Math.min(Al,O))],F=[C=Math.max(Ju,Math.min(Al,C)),k=Math.max(Ju,Math.min(Al,k))];e0(R,F,e,t,n,i)?(B||(c.lineStart(),c.point(R[0],R[1])),c.point(F[0],F[1]),T||c.lineEnd(),z=!1):T&&(c.lineStart(),c.point(C,k),z=!1)}S=C,O=k,B=T}return q}}var cf=_s();function ff(e,t){var n=t[0],i=t[1],r=[mi(n),-pi(n),0],o=0,a=0;cf.reset();for(var s=0,u=e.length;s<u;++s)if(c=(f=e[s]).length)for(var f,c,d=f[c-1],m=d[0],v=d[1]/2+Gu,p=mi(v),_=pi(v),y=0;y<c;++y,m=S,p=B,_=U,d=x){var x=f[y],S=x[0],O=x[1]/2+Gu,B=mi(O),U=pi(O),z=S-m,q=z>=0?1:-1,G=q*z,tt=G>Ji,K=p*B;if(cf.add(zn(K*q*mi(G),_*U+K*pi(G))),o+=tt?z+q*$n:z,tt^m>=n^S>=n){var D=la(Qs(d),Qs(x));Va(D);var N=la(r,D);Va(N);var Z=(tt^z>=0?-1:1)*On(N[2]);(i>Z||i===Z&&(D[0]||D[1]))&&(a+=tt^z>=0?1:-1)}}return(o<-vi||o<vi&&cf<-vi)^a&1}var BP=_s();function Il(e){return e}var iR=_s(),rR=_s();var Wa=1/0,Qu=Wa,Nl=-Wa,th=Nl,K_={point:J_,lineStart:hs,lineEnd:hs,polygonStart:hs,polygonEnd:hs,result:function(){var e=[[Wa,Qu],[Nl,th]];return Nl=th=-(Qu=Wa=1/0),e}};function J_(e,t){e<Wa&&(Wa=e),e>Nl&&(Nl=e),t<Qu&&(Qu=t),t>th&&(th=t)}var eh=K_;function df(e){this._context=e}df.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,$n);break}}},result:hs};var mR=_s();function pf(){this._string=[]}pf.prototype={_radius:4.5,_circle:a0(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._string.push("M",e,",",t),this._point=1;break}case 1:{this._string.push("L",e,",",t);break}default:{this._circle==null&&(this._circle=a0(this._radius)),this._string.push("M",e,",",t,this._circle);break}}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}else return null}};function a0(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function ih(e,t,n,i){return function(r,o){var a=t(o),s=r.invert(i[0],i[1]),u=$u(),f=t(u),c=!1,d,m,v,p={point:_,lineStart:x,lineEnd:S,polygonStart:function(){p.point=O,p.lineStart=B,p.lineEnd=U,m=[],d=[]},polygonEnd:function(){p.point=_,p.lineStart=x,p.lineEnd=S,m=Ol(m);var z=ff(d,s);m.length?(c||(o.polygonStart(),c=!0),Zu(m,tw,z,n,o)):z&&(c||(o.polygonStart(),c=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),c&&(o.polygonEnd(),c=!1),m=d=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function _(z,q){var G=r(z,q);e(z=G[0],q=G[1])&&o.point(z,q)}function y(z,q){var G=r(z,q);a.point(G[0],G[1])}function x(){p.point=y,a.lineStart()}function S(){p.point=_,a.lineEnd()}function O(z,q){v.push([z,q]);var G=r(z,q);f.point(G[0],G[1])}function B(){f.lineStart(),v=[]}function U(){O(v[0][0],v[0][1]),f.lineEnd();var z=f.clean(),q=u.result(),G,tt=q.length,K,D,N;if(v.pop(),d.push(v),v=null,!!tt){if(z&1){if(D=q[0],(K=D.length-1)>0){for(c||(o.polygonStart(),c=!0),o.lineStart(),G=0;G<K;++G)o.point((N=D[G])[0],N[1]);o.lineEnd()}return}tt>1&&z&2&&q.push(q.pop().concat(q.shift())),m.push(q.filter(Q_))}}return p}}function Q_(e){return e.length>1}function tw(e,t){return((e=e.x)[0]<0?e[1]-Rn-vi:Rn-e[1])-((t=t.x)[0]<0?t[1]-Rn-vi:Rn-t[1])}var mf=ih(function(){return!0},ew,rw,[-Ji,-Rn]);function ew(e){var t=NaN,n=NaN,i=NaN,r;return{lineStart:function(){e.lineStart(),r=1},point:function(o,a){var s=o>0?Ji:-Ji,u=_r(o-t);_r(u-Ji)<vi?(e.point(t,n=(n+a)/2>0?Rn:-Rn),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(s,n),e.point(o,n),r=0):i!==s&&u>=Ji&&(_r(t-i)<vi&&(t-=i*vi),_r(o-s)<vi&&(o-=s*vi),n=iw(t,n,o,a),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(s,n),r=0),e.point(t=o,n=a),i=s},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-r}}}function iw(e,t,n,i){var r,o,a=mi(e-n);return _r(a)>vi?Js((mi(t)*(o=pi(i))*mi(n)-mi(i)*(r=pi(t))*mi(e))/(r*o*a)):(t+i)/2}function rw(e,t,n,i){var r;if(e==null)r=n*Rn,i.point(-Ji,r),i.point(0,r),i.point(Ji,r),i.point(Ji,0),i.point(Ji,-r),i.point(0,-r),i.point(-Ji,-r),i.point(-Ji,0),i.point(-Ji,r);else if(_r(e[0]-t[0])>vi){var o=e[0]<t[0]?Ji:-Ji;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(t[0],t[1])}function l0(e,t){var n=pi(e),i=n>0,r=_r(n)>vi;function o(c,d,m,v){t0(v,e,t,m,c,d)}function a(c,d){return pi(c)*pi(d)>n}function s(c){var d,m,v,p,_;return{lineStart:function(){p=v=!1,_=1},point:function(y,x){var S=[y,x],O,B=a(y,x),U=i?B?0:f(y,x):B?f(y+(y<0?Ji:-Ji),x):0;if(!d&&(p=v=B)&&c.lineStart(),B!==v&&(O=u(d,S),(!O||qa(d,O)||qa(S,O))&&(S[0]+=vi,S[1]+=vi,B=a(S[0],S[1]))),B!==v)_=0,B?(c.lineStart(),O=u(S,d),c.point(O[0],O[1])):(O=u(d,S),c.point(O[0],O[1]),c.lineEnd()),d=O;else if(r&&d&&i^B){var z;!(U&m)&&(z=u(S,d,!0))&&(_=0,i?(c.lineStart(),c.point(z[0][0],z[0][1]),c.point(z[1][0],z[1][1]),c.lineEnd()):(c.point(z[1][0],z[1][1]),c.lineEnd(),c.lineStart(),c.point(z[0][0],z[0][1])))}B&&(!d||!qa(d,S))&&c.point(S[0],S[1]),d=S,v=B,m=U},lineEnd:function(){v&&c.lineEnd(),d=null},clean:function(){return _|(p&&v)<<1}}}function u(c,d,m){var v=Qs(c),p=Qs(d),_=[1,0,0],y=la(v,p),x=Pl(y,y),S=y[0],O=x-S*S;if(!O)return!m&&c;var B=n*x/O,U=-n*S/O,z=la(_,y),q=Rl(_,B),G=Rl(y,U);Wu(q,G);var tt=z,K=Pl(q,tt),D=Pl(tt,tt),N=K*K-D*(Pl(q,q)-1);if(!(N<0)){var Z=Cn(N),w=Rl(tt,(-K-Z)/D);if(Wu(w,q),w=Ua(w),!m)return w;var C=c[0],k=d[0],T=c[1],R=d[1],F;k<C&&(F=C,C=k,k=F);var H=k-C,it=_r(H-Ji)<vi,ot=it||H<vi;if(!it&&R<T&&(F=T,T=R,R=F),ot?it?T+R>0^w[1]<(_r(w[0]-C)<vi?T:R):T<=w[1]&&w[1]<=R:H>Ji^(C<=w[0]&&w[0]<=k)){var dt=Rl(tt,(-K+Z)/D);return Wu(dt,q),[w,Ua(dt)]}}}function f(c,d){var m=i?e:Ji-e,v=0;return c<-m?v|=1:c>m&&(v|=2),d<-m?v|=4:d>m&&(v|=8),v}return ih(a,s,o,i?[0,-e]:[-Ji,e-Ji])}function Dl(e){return function(t){var n=new gf;for(var i in e)n[i]=e[i];return n.stream=t,n}}function gf(){}gf.prototype={constructor:gf,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Bl(e,t,n){var i=t[1][0]-t[0][0],r=t[1][1]-t[0][1],o=e.clipExtent&&e.clipExtent();e.scale(150).translate([0,0]),o!=null&&e.clipExtent(null),Xo(n,e.stream(eh));var a=eh.result(),s=Math.min(i/(a[1][0]-a[0][0]),r/(a[1][1]-a[0][1])),u=+t[0][0]+(i-s*(a[1][0]+a[0][0]))/2,f=+t[0][1]+(r-s*(a[1][1]+a[0][1]))/2;return o!=null&&e.clipExtent(o),e.scale(s*150).translate([u,f])}function rh(e,t,n){return Bl(e,[[0,0],t],n)}var u0=16,nw=pi(30*tn);function yf(e,t){return+t?ow(e,t):sw(e)}function sw(e){return Dl({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function ow(e,t){function n(i,r,o,a,s,u,f,c,d,m,v,p,_,y){var x=f-i,S=c-r,O=x*x+S*S;if(O>4*t&&_--){var B=a+m,U=s+v,z=u+p,q=Cn(B*B+U*U+z*z),G=On(z/=q),tt=_r(_r(z)-1)<vi||_r(o-d)<vi?(o+d)/2:zn(U,B),K=e(tt,G),D=K[0],N=K[1],Z=D-i,w=N-r,C=S*Z-x*w;(C*C/O>t||_r((x*Z+S*w)/O-.5)>.3||a*m+s*v+u*p<nw)&&(n(i,r,o,a,s,u,D,N,tt,B/=q,U/=q,z,_,y),y.point(D,N),n(D,N,tt,B,U,z,f,c,d,m,v,p,_,y))}}return function(i){var r,o,a,s,u,f,c,d,m,v,p,_,y={point:x,lineStart:S,lineEnd:B,polygonStart:function(){i.polygonStart(),y.lineStart=U},polygonEnd:function(){i.polygonEnd(),y.lineStart=S}};function x(G,tt){G=e(G,tt),i.point(G[0],G[1])}function S(){d=NaN,y.point=O,i.lineStart()}function O(G,tt){var K=Qs([G,tt]),D=e(G,tt);n(d,m,c,v,p,_,d=D[0],m=D[1],c=G,v=K[0],p=K[1],_=K[2],u0,i),i.point(d,m)}function B(){y.point=x,i.lineEnd()}function U(){S(),y.point=z,y.lineEnd=q}function z(G,tt){O(r=G,tt),o=d,a=m,s=v,u=p,f=_,y.point=O}function q(){n(d,m,c,v,p,_,o,a,r,s,u,f,u0,i),y.lineEnd=B,B()}return y}}var aw=Dl({point:function(e,t){this.stream.point(e*tn,t*tn)}});function to(e){return vf(function(){return e})()}function vf(e){var t,n=150,i=480,r=250,o,a,s=0,u=0,f=0,c=0,d=0,m,v,p=null,_=mf,y=null,x,S,O,B=Il,U=.5,z=yf(D,U),q,G;function tt(w){return w=v(w[0]*tn,w[1]*tn),[w[0]*n+o,a-w[1]*n]}function K(w){return w=v.invert((w[0]-o)/n,(a-w[1])/n),w&&[w[0]*us,w[1]*us]}function D(w,C){return w=t(w,C),[w[0]*n+o,a-w[1]*n]}tt.stream=function(w){return q&&G===w?q:q=aw(_(m,z(B(G=w))))},tt.clipAngle=function(w){return arguments.length?(_=+w?l0(p=w*tn,6*tn):(p=null,mf),Z()):p*us},tt.clipExtent=function(w){return arguments.length?(B=w==null?(y=x=S=O=null,Il):hf(y=+w[0][0],x=+w[0][1],S=+w[1][0],O=+w[1][1]),Z()):y==null?null:[[y,x],[S,O]]},tt.scale=function(w){return arguments.length?(n=+w,N()):n},tt.translate=function(w){return arguments.length?(i=+w[0],r=+w[1],N()):[i,r]},tt.center=function(w){return arguments.length?(s=w[0]%360*tn,u=w[1]%360*tn,N()):[s*us,u*us]},tt.rotate=function(w){return arguments.length?(f=w[0]%360*tn,c=w[1]%360*tn,d=w.length>2?w[2]%360*tn:0,N()):[f*us,c*us,d*us]},tt.precision=function(w){return arguments.length?(z=yf(D,U=w*w),Z()):Cn(U)},tt.fitExtent=function(w,C){return Bl(tt,w,C)},tt.fitSize=function(w,C){return rh(tt,w,C)};function N(){v=Xu(m=lf(f,c,d),t);var w=t(s,u);return o=i-w[0]*n,a=r+w[1]*n,Z()}function Z(){return q=G=null,tt}return function(){return t=e.apply(this,arguments),tt.invert=t.invert&&K,N()}}function nh(e){return function(t,n){var i=pi(t),r=pi(n),o=e(i*r);return[o*r*mi(t),o*mi(n)]}}function yo(e){return function(t,n){var i=Cn(t*t+n*n),r=e(i),o=mi(r),a=pi(r);return[zn(t*o,i*a),On(i&&n*o/i)]}}var d0=nh(function(e){return Cn(2/(1+e))});d0.invert=yo(function(e){return 2*On(e/2)});var bf=nh(function(e){return(e=Vu(e))&&e/mi(e)});bf.invert=yo(function(e){return e});function _f(){return to(bf).scale(79.4188).clipAngle(180-.001)}function wf(e,t){return[e,Ll(Tl((Rn+t)/2))]}wf.invert=function(e,t){return[e,2*Js(Uu(t))-Rn]};function sh(e,t){return[e,t]}sh.invert=sh;function p0(e,t){var n=pi(t),i=pi(e)*n;return[n*mi(e)/i,mi(t)/i]}p0.invert=yo(Js);function m0(e,t){var n=t*t,i=n*n;return[e*(.8707-.131979*n+i*(-.013791+i*(.003971*n-.001529*i))),t*(1.007226+n*(.015085+i*(-.044475+.028874*n-.005916*i)))]}m0.invert=function(e,t){var n=t,i=25,r;do{var o=n*n,a=o*o;n-=r=(n*(1.007226+o*(.015085+a*(-.044475+.028874*o-.005916*a)))-t)/(1.007226+o*(.015085*3+a*(-.044475*7+.028874*9*o-.005916*11*a)))}while(_r(r)>vi&&--i>0);return[e/(.8707+(o=n*n)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),n]};function g0(e,t){return[pi(t)*mi(e),mi(t)]}g0.invert=yo(On);function y0(e,t){var n=pi(t),i=1+pi(e)*n;return[n*mi(e)/i,mi(t)/i]}y0.invert=yo(function(e){return 2*Js(e)});function v0(e,t){return[Ll(Tl((Rn+t)/2)),-e]}v0.invert=function(e,t){return[-t,2*Js(Uu(e))-Rn]};function hw(e,t,n){n=n||{};var i=n.units||"kilometers",r=n.steps||8;if(!e)throw new Error("geojson is required");if(typeof n!="object")throw new Error("options must be an object");if(typeof r!="number")throw new Error("steps must be an number");if(t===void 0)throw new Error("radius is required");if(r<=0)throw new Error("steps must be greater than 0");var o=[];switch(e.type){case"GeometryCollection":return Zs(e,function(a){var s=oh(a,t,i,r);s&&o.push(s)}),Ci(o);case"FeatureCollection":return Sr(e,function(a){var s=oh(a,t,i,r);s&&Sr(s,function(u){u&&o.push(u)})}),Ci(o)}return oh(e,t,i,r)}function oh(e,t,n,i){var r=e.properties||{},o=e.type==="Feature"?e.geometry:e;if(o.type==="GeometryCollection"){var a=[];return Zs(e,function(_){var y=oh(_,t,n,i);y&&a.push(y)}),Ci(a)}var s=cw(o),u={type:o.type,coordinates:_0(o.coordinates,s)},f=new Xa.GeoJSONReader,c=f.read(u),d=nl(sl(t,n),"meters"),m=Xa.BufferOp.bufferOp(c,d,i),v=new Xa.GeoJSONWriter;if(m=v.write(m),!b0(m.coordinates)){var p={type:m.type,coordinates:w0(m.coordinates,s)};return Dn(p,r)}}function b0(e){return Array.isArray(e[0])?b0(e[0]):isNaN(e[0])}function _0(e,t){return typeof e[0]!="object"?t(e):e.map(function(n){return _0(n,t)})}function w0(e,t){return typeof e[0]!="object"?t.invert(e):e.map(function(n){return w0(n,t)})}function cw(e){var t=hl(e).geometry.coordinates,n=[-t[0],-t[1]];return _f().rotate(n).scale(Tn)}var Fl=hw;var fw=hr(Ga(),1);var dw=hr(Ga(),1);var mw=hr(Ga(),1);var gw=hr(Ga(),1);var ua=hr(ah()),Sf="#7ae9ff",kf={color:Sf,fillColor:Sf,fillOpacity:.3,weight:1},Mw={color:"#ffbb00",fillColor:"#ffbb00",fillOpacity:.75,weight:3},Sw={color:"#ff0000",fillColor:"#ff0000",fillOpacity:.95,weight:5},Mf="#00FF40",Oo=class{constructor(t,n){this._bufferWidth=5;this._sqmPerPerson=10;this._sqmPerVehicle=70;this.supressWarnings=!1;this.id=t.id,this._rules=n,this.revision=t.revision,this.timeStamp=t.timeStamp,this.isDeleted=t.isDeleted,this.deleteReason=t.deleteReason,this._originalGeoJson=t.geoJson;let i=JSON.parse(t.geoJson);this.layer=new lh.GeoJSON(i,{pmIgnore:!1,interactive:!0,bubblingMouseEvents:!1,snapIgnore:!0,style:()=>this.GetDefaultLayerStyle()}),this.revisions={},this.name=ua.default.sanitize(i.properties.name),this.contactInfo=ua.default.sanitize(i.properties.contactInfo)??"",this.description=ua.default.sanitize(i.properties.description)??"",this.nrOfPeople=i.properties.nrOfPeople??"0",this.nrOfVehicles=i.properties.nrOfVechiles??"0",this.additionalSqm=i.properties.additionalSqm??"0",this.powerNeed=i.properties.powerNeed??void 0,Number.isNaN(Number(i.properties.powerNeed))?this.powerNeed=-1:this.powerNeed=Number(i.properties.powerNeed),Number.isNaN(Number(i.properties.amplifiedSound))?this.amplifiedSound=-1:this.amplifiedSound=Number(i.properties.amplifiedSound),this.color=i.properties.color??Sf,this.supressWarnings=i.properties.supressWarnings??!1,this.updateBufferedLayer()}get calculatedAreaNeeded(){try{let t=0;return this.nrOfPeople&&(t+=Number(this.nrOfPeople)*this._sqmPerPerson),this.nrOfVehicles&&(t+=Number(this.nrOfVehicles)*this._sqmPerVehicle),this.additionalSqm&&(t+=Number(this.additionalSqm)),t}catch{return NaN}}get calculatedFireExtinguisherNeeded(){try{return 1}catch{return NaN}}get severityOfRulesBroken(){return this._rules.reduce((t,n)=>Math.max(t,n.severity),0)}get area(){return Math.round(fo(this.calculateGeoJson()))}get geoJson(){return JSON.stringify(this.toGeoJSON())}calculateGeoJson(){let t=this.layer.toGeoJSON();return t.features&&t.features[0]&&(t=t.features[0]),t}GetDefaultLayerStyle(t=!1){let n=this.color;return t&&(n=Mf),{color:n,fillColor:n,fillOpacity:.3,weight:1}}checkAllRules(){for(let t of this._rules)t.checkRule(this)}setLayerStyle(t="severity"){if(t=="severity"||t=="cleancolors")this.severityOfRulesBroken>=3?this.layer.setStyle(Sw):this.severityOfRulesBroken==2&&!this.supressWarnings?this.layer.setStyle(Mw):this.layer.setStyle(this.GetDefaultLayerStyle(t=="cleancolors"));else if(t=="power"){let n=Mf;this.powerNeed?this.powerNeed>9e3?n="#FF0000":this.powerNeed>1e3&&(n="#FFA200"):n="#D1D1D1",this.layer.setStyle({color:n,fillColor:n,fillOpacity:.3,weight:1})}else if(t=="sound"){let n=Mf;this.amplifiedSound?this.amplifiedSound>2e3?n="#FF0000":this.amplifiedSound>120&&(n="#FFA200"):n="#D1D1D1",this.layer.setStyle({color:n,fillColor:n,fillOpacity:.3,weight:1})}}getAllTriggeredRules(){return this._rules.filter(t=>t.triggered)}updateBufferedLayer(){let t=this.layer.toGeoJSON(),n=Fl(t,this._bufferWidth,{units:"meters"}),i=0;this.bufferLayer?(this.bufferLayer.clearLayers(),this.bufferLayer.addData(n)):this.bufferLayer=lh.geoJSON(n,{style:{color:"red",fillOpacity:0,weight:i,dashArray:"5, 5"},interactive:!1})}toGeoJSON(){let t=this.calculateGeoJson();return t.properties=t.properties||{},t.properties.name=ua.default.sanitize(this.name).substring(0,100),t.properties.description=ua.default.sanitize(this.description).substring(0,1e3),t.properties.contactInfo=ua.default.sanitize(this.contactInfo),t.properties.nrOfPeople=this.nrOfPeople,t.properties.nrOfVechiles=this.nrOfVehicles,t.properties.additionalSqm=this.additionalSqm,t.properties.powerNeed=this.powerNeed,t.properties.amplifiedSound=this.amplifiedSound,t.properties.color=this.color,t.properties.supressWarnings=this.supressWarnings,t}hasChanges(){return this._originalGeoJson!=this.geoJson}};var E0=hr(ah()),$a="https://placement.freaks.se/api/v1/mapentities",zl=class{constructor(t){this._latestRevisions={};this._entityConstraints=null;this._rulesGenerator=t,this.loaded=new Promise(n=>this._update().then(()=>n(!0)))}async _update(){let t=await fetch($a),n=t.ok?await t.json():[];this._latestRevisions={};for(let i of n){if(this._entityConstraints){let{earliest:r,latest:o}=this._entityConstraints;if(i.timeStamp>o||i.timeStamp<r)continue}this._latestRevisions[i.id]=new Oo(i,this._rulesGenerator())}}async reload(){let t=await fetch($a),n=t.ok?await t.json():[],i=new Array,r={refreshedDeleted:new Array,refreshedAdded:new Array,refreshedUpdated:new Array};for(let o of n){if(this._entityConstraints){let{earliest:a,latest:s}=this._entityConstraints;if(o.timeStamp>s||o.timeStamp<a)continue}i[o.id]=new Oo(o,this._rulesGenerator())}for(let o in this._latestRevisions){let a=parseInt(o);i[a]||r.refreshedDeleted.push(a)}for(let o in i){let a=parseInt(o),s=i[a];this._latestRevisions[a]?this._latestRevisions[a].revision<s.revision&&(this._latestRevisions[a]=s,r.refreshedUpdated.push(a)):(this._latestRevisions[a]=s,r.refreshedAdded.push(a))}return r}async constrain(t){this._entityConstraints=t,await this._update()}async entities(){return await this.loaded,Object.values(this._latestRevisions)}getEntityById(t){return this._latestRevisions[t]}getAllEntities(){return Object.values(this._latestRevisions)}isLatest(t){return t.revision==this._latestRevisions[t.id].revision}async createEntity(t){console.log("createEntity",t);let n=await fetch($a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({geoJson:JSON.stringify(t)})});if(n.ok){let i=await n.json();console.log("[API]","Saved initial entity",i);let r=new Oo(i,this._rulesGenerator());return this._latestRevisions[r.id]=r,r}else{let i=await n.json();return console.warn("[API]","Failed to save entity",i),null}}async updateEntity(t){let n=await fetch(`${$a}/${t.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({geoJson:t.geoJson,id:t.id})});if(n.ok){let i=await n.json();console.log("[API]","Updated existing entity",i);let r=new Oo(i,this._rulesGenerator());return this._latestRevisions[t.id]=r,r}else{let i=await n.json();return console.warn("[API]","Failed to update entity with id:",t.id,i),null}}async deleteEntity(t,n="No reason given"){let i=await fetch(`${$a}/${t.id}?reason=${E0.default.sanitize(n)}`,{method:"DELETE"});if(i.ok)console.log("[API]","Deleted entity with id:",t.id),delete this._latestRevisions[t.id];else{let r=await i.json();console.warn("[API]","Failed to delete entity with id:",t.id,r)}}async remove(t){delete this._latestRevisions[t.id]}async getRevisionsForEntity(t){let n=await fetch(`${$a}/${t.id}`),i=n.ok?await n.json():[];for(let r of i)t.revisions[r.revision]=new Oo(r,this._rulesGenerator())}};var uh={kilometers:1,miles:.621371192237334,nauticalmiles:.5399568034557235,meters:1e3,metres:1e3,yards:1093.6132983377079,feet:3280.839895013123,inches:39370.078740157485},kw=6378.137,C0=1/298.257223563,M0=C0*(2-C0),jl=Math.PI/180,Hl=class e{static fromTile(t,n,i){let r=Math.PI*(1-2*(t+.5)/Math.pow(2,n)),o=Math.atan(.5*(Math.exp(r)-Math.exp(-r)))/jl;return new e(o,i)}static get units(){return uh}constructor(t,n){if(t===void 0)throw new Error("No latitude given.");if(n&&!uh[n])throw new Error(`Unknown unit ${n}. Use one of: ${Object.keys(uh).join(", ")}`);let i=jl*kw*(n?uh[n]:1),r=Math.cos(t*jl),o=1/(1-M0*(1-r*r)),a=Math.sqrt(o);this.kx=i*a*r,this.ky=i*a*o*(1-M0)}distance(t,n){let i=Fs(t[0]-n[0])*this.kx,r=(t[1]-n[1])*this.ky;return Math.sqrt(i*i+r*r)}bearing(t,n){let i=Fs(n[0]-t[0])*this.kx,r=(n[1]-t[1])*this.ky;return Math.atan2(i,r)/jl}destination(t,n,i){let r=i*jl;return this.offset(t,Math.sin(r)*n,Math.cos(r)*n)}offset(t,n,i){return[t[0]+n/this.kx,t[1]+i/this.ky]}lineDistance(t){let n=0;for(let i=0;i<t.length-1;i++)n+=this.distance(t[i],t[i+1]);return n}area(t){let n=0;for(let i=0;i<t.length;i++){let r=t[i];for(let o=0,a=r.length,s=a-1;o<a;s=o++)n+=Fs(r[o][0]-r[s][0])*(r[o][1]+r[s][1])*(i?-1:1)}return Math.abs(n)/2*this.kx*this.ky}along(t,n){let i=0;if(n<=0)return t[0];for(let r=0;r<t.length-1;r++){let o=t[r],a=t[r+1],s=this.distance(o,a);if(i+=s,i>n)return Lf(o,a,(n-(i-s))/s)}return t[t.length-1]}pointToSegmentDistance(t,n,i){let[r,o]=n,a=Fs(i[0]-r)*this.kx,s=(i[1]-o)*this.ky,u=0;return(a!==0||s!==0)&&(u=(Fs(t[0]-r)*this.kx*a+(t[1]-o)*this.ky*s)/(a*a+s*s),u>1?(r=i[0],o=i[1]):u>0&&(r+=a/this.kx*u,o+=s/this.ky*u)),a=Fs(t[0]-r)*this.kx,s=(t[1]-o)*this.ky,Math.sqrt(a*a+s*s)}pointOnLine(t,n){let i=1/0,r,o,a,s;for(let u=0;u<t.length-1;u++){let f=t[u][0],c=t[u][1],d=Fs(t[u+1][0]-f)*this.kx,m=(t[u+1][1]-c)*this.ky,v=0;(d!==0||m!==0)&&(v=(Fs(n[0]-f)*this.kx*d+(n[1]-c)*this.ky*m)/(d*d+m*m),v>1?(f=t[u+1][0],c=t[u+1][1]):v>0&&(f+=d/this.kx*v,c+=m/this.ky*v)),d=Fs(n[0]-f)*this.kx,m=(n[1]-c)*this.ky;let p=d*d+m*m;p<i&&(i=p,r=f,o=c,a=u,s=v)}return{point:[r,o],index:a,t:Math.max(0,Math.min(1,s))}}lineSlice(t,n,i){let r=this.pointOnLine(i,t),o=this.pointOnLine(i,n);if(r.index>o.index||r.index===o.index&&r.t>o.t){let f=r;r=o,o=f}let a=[r.point],s=r.index+1,u=o.index;!S0(i[s],a[0])&&s<=u&&a.push(i[s]);for(let f=s+1;f<=u;f++)a.push(i[f]);return S0(i[u],o.point)||a.push(o.point),a}lineSliceAlong(t,n,i){let r=0,o=[];for(let a=0;a<i.length-1;a++){let s=i[a],u=i[a+1],f=this.distance(s,u);if(r+=f,r>t&&o.length===0&&o.push(Lf(s,u,(t-(r-f))/f)),r>=n)return o.push(Lf(s,u,(n-(r-f))/f)),o;r>t&&o.push(u)}return o}bufferPoint(t,n){let i=n/this.ky,r=n/this.kx;return[t[0]-r,t[1]-i,t[0]+r,t[1]+i]}bufferBBox(t,n){let i=n/this.ky,r=n/this.kx;return[t[0]-r,t[1]-i,t[2]+r,t[3]+i]}insideBBox(t,n){return Fs(t[0]-n[0])>=0&&Fs(t[0]-n[2])<=0&&t[1]>=n[1]&&t[1]<=n[3]}};function S0(e,t){return e[0]===t[0]&&e[1]===t[1]}function Lf(e,t,n){let i=Fs(t[0]-e[0]),r=t[1]-e[1];return[e[0]+i*n,e[1]+r*n]}function Fs(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}var Rf=1250,Lw=8e3;var L0=5,Tw=L0+1,Pw=new Hl(57.5,"meters"),Tf=class{constructor(){this.areaCache={};this.overlapCache={};this.coordsCache={}}coordsHaveChanged(t,n){let i=!1;if(!(t in this.coordsCache)||this.coordsCache[t].length==0||this.coordsCache[t].length!=n.length)i=!0;else for(let r=0;r<this.coordsCache[t].length;r++)if(!(this.coordsCache[t][r].lat==n[r].lat&&this.coordsCache[t][r].lng==n[r].lng)){i=!0;break}if(i){let r=[];for(let o=0;o<n.length;o++)r.push({lat:n[o].lat,lng:n[o].lng});return this.coordsCache[t]=r,!0}else return!1}areaIsCached(t){return t in this.areaCache}getAreaCache(t){return this.areaCache[t]}setAreaCache(t,n){this.areaCache[t]=n}overlapIsCached(t,n){return t in this.overlapCache&&n in this.overlapCache[t]}getOverlapCache(t,n){return this.overlapCache[t][n]}setOverlapCache(t,n,i){for(let r of[[t,n],[n,t]])r[0]in this.overlapCache||(this.overlapCache[r[0]]={}),this.overlapCache[r[0]][r[1]]=i}invalidateCache(t){if(t in this.overlapCache)for(let n in this.overlapCache[t])this.overlapCache[n]&&t in this.overlapCache[n]&&delete this.overlapCache[n][t];delete this.overlapCache[t],t in this.areaCache&&delete this.areaCache[t]}},Ao=new Tf,vo=class{get severity(){return this._triggered?this._severity:0}get triggered(){return this._triggered}checkRule(t){let n=this._callback(t);this._triggered=n.triggered,n.shortMessage&&(this.shortMessage=n.shortMessage),n.message&&(this.message=n.message)}constructor(t,n,i,r){this._severity=t,this._triggered=!1,this._callback=r,this.shortMessage=n,this.message=i}};function T0(e,t){return()=>[Iw(),Aw(),Rw(),Ow(),Dw(t,2,"Overlapping other area!","Your area is overlapping someone elses, plz fix <3"),ha(e.slope,1,"Slope warning!","Your area is in slopey or uneven terrain, make sure to check the slope map layer to make sure that you know what you are doing :)"),ha(e.fireroad,3,"Touching fireroad!","Plz move this area away from the fire road!"),k0(e.propertyborder,3,"Outside border!","You have placed yourself outside our land, please fix that <3"),ha(e.hiddenforbidden,3,"Inside forbidden zone!","You are inside a zone that can not be used this year."),zw(t,3,"Too large/close to others!","For fire safety, we need to add a bit of open space (5m2) between these camps (or if not next to any camps, this camp simply to big)"),k0(e.area,2,"Outside placement areas.","You are outside the main placement area (yellow border). Make sure you know what you are doing."),ha(e.publicplease,1,"Close to fire road","You are adjucant to a fire road, please use this space for public offerings and not just for sleeping"),ha(e.minorroad,2,"Blocking a path","You are possibly blocking a path for walking around (the black dotted lines). Keep it clean if possible or plan accordingly!"),ha(e.closetosanctuary,1,"Close to the  sanctuary","This area is in the viscinity of the sanctuary, please be mindful of what energy your camp is releasing and how it may effect the santuarcy"),ha(e.redsoundzone,1,"In the western meadow","You're in the western meadow, please be extra careful of keeping the land in good condition and do not put your overnight camp here unless necessary, public dreams are prefered")]}var Rw=()=>new vo(1,"Powerful.","You need a lot of power, make sure its not a typo.",e=>({triggered:e.powerNeed>Lw})),Ow=()=>new vo(2,"Missing info","Fill in name, description, contact info, power need and sound amplification please.",e=>({triggered:!e.name||!e.description||!e.contactInfo||e.powerNeed===-1||e.amplifiedSound===-1})),Aw=()=>new vo(3,"Too many ppl/vehicles!","Calculated area need is bigger than the maximum allowed area size! Make another area to fix this.",e=>({triggered:e.calculatedAreaNeeded>Rf})),Iw=()=>new vo(2,"Bigger than needed?","Your area is quite big for the amount of people/vehicles and extras you have typed in.",e=>({triggered:e.area>Nw(e.calculatedAreaNeeded),message:`Your area is <b>${e.area-e.calculatedAreaNeeded}m\xB2 bigger</b> than the suggested area size. Consider making it smaller.`}));function Nw(e){let i=.5*Math.pow(e,-.2),r=Math.max(0,Math.min(i,.5));return Math.min(e*(1+r),Rf)}var Dw=(e,t,n,i)=>new vo(t,n,i,r=>({triggered:Fw(r.layer,e)})),ha=(e,t,n,i)=>new vo(t,n,i,r=>{let o=r.toGeoJSON(),a=!1;return e.eachLayer(s=>{let u=s.toGeoJSON();if(u.features){for(let f=0;f<u.features.length;f++)if(na(o,u.features[f])||Po(u.features[f],o)){a=!0;return}}else(na(o,u)||Po(u,o))&&(a=!0)}),{triggered:a}});var k0=(e,t,n,i)=>Bw(e,t,n,i,!1),Bw=(e,t,n,i,r)=>new vo(t,n,i,o=>{let a=e.getLayers();for(let s of a){let u=s.toGeoJSON();if(u.features){for(let f=0;f<u.features.length;f++)if(Po(u.features[f],o.toGeoJSON()))return{triggered:r}}else if(Po(u,o.toGeoJSON()))return{triggered:r}}return{triggered:!r}});function Fw(e,t){let n=e.toGeoJSON(),i=Pf(n.features[0].geometry.coordinates[0]),r=!1,o=0;return t.eachLayer(a=>{if(r||O0(e,a))return;let s=a.toGeoJSON(),u=Pf(s.features[0].geometry.coordinates[0]);P0(i,u)&&(na(n.features[0],s.features[0])||Po(n.features[0],s.features[0]))&&(r=!0)}),r}var zw=(e,t,n,i)=>new vo(t,n,i,r=>{let o=r.layer._layers[Object.keys(r.layer._layers)[0]];Ao.coordsHaveChanged(o._leaflet_id,o._latlngs[0])&&Ao.invalidateCache(r.layer._leaflet_id);let a=new Set;return R0(r.layer,e,a)>Rf?{triggered:!0,severity:3,shortMessage:"We need some space between these camps"}:{triggered:!1}});function Pf(e){let t=[null,null,null,null],n=!0;for(let i of e)n?(t[0]=i[0],t[2]=i[0],t[1]=i[1],t[3]=i[1],n=!1):(i[0]<t[0]&&(t[0]=i[0]),i[0]>t[2]&&(t[2]=i[0]),i[1]<t[1]&&(t[1]=i[1]),i[1]>t[3]&&(t[3]=i[1]));return t}function P0(e,t){return!(t[0]>e[2]||t[2]<e[0]||t[3]<e[1]||t[1]>e[3])}function R0(e,t,n){if(n.has(e._leaflet_id))return 0;n.add(e._leaflet_id);let i;Ao.areaIsCached(e._leaflet_id)?i=Ao.getAreaCache(e._leaflet_id):(i=fo(e.toGeoJSON()),Ao.setAreaCache(e._leaflet_id,i));let r=Pf(e.toGeoJSON().features[0].geometry.coordinates[0]),o=Pw.bufferBBox(r,Tw);return t.eachLayer(a=>{if(!O0(e,a)){let s;if(Ao.overlapIsCached(e._leaflet_id,a._leaflet_id))s=Ao.getOverlapCache(e._leaflet_id,a._leaflet_id);else{let u=a.getBounds(),c=[u._southWest.lng,u._southWest.lat,u._northEast.lng,u._northEast.lat];if(!P0(o,c))s=!1,Ao.setOverlapCache(e._leaflet_id,a._leaflet_id,s);else{let d=a.toGeoJSON(),m;if(d.type==="Feature")m=d.geometry;else if(d.type==="FeatureCollection")m=d.features[0];else throw new Error("unsupported geometry");let v=Fl(e.toGeoJSON(),L0,{units:"meters"});na(v.features[0],m)||Po(v.features[0],m)?s=!0:s=!1,Ao.setOverlapCache(e._leaflet_id,a._leaflet_id,s)}}s&&(i+=R0(a,t,n))}}),i}function O0(e,t){return e._leaflet_id===t._leaflet_id}var hh=hr(ah());L.PathDraggable=L.Draggable.extend({initialize:function(e){this._path=e,this._canvas=e._map.getRenderer(e)instanceof L.Canvas;var t=this._canvas?this._path._map.getRenderer(this._path)._container:this._path._path;L.Draggable.prototype.initialize.call(this,t,t,!0)},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("drag",e)},_onDown:function(e){var t=e.touches?e.touches[0]:e;this._startPoint=new L.Point(t.clientX,t.clientY),!(this._canvas&&!this._path._containsPoint(this._path._map.mouseEventToLayerPoint(t)))&&L.Draggable.prototype._onDown.call(this,e)}});L.Handler.PathDrag=L.Handler.extend({initialize:function(e){this._path=e},getEvents:function(){return{dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd}},addHooks:function(){this._draggable||(this._draggable=new L.PathDraggable(this._path)),this._draggable.on(this.getEvents(),this).enable(),L.DomUtil.addClass(this._draggable._element,"leaflet-path-draggable")},removeHooks:function(){this._draggable.off(this.getEvents(),this).disable(),L.DomUtil.removeClass(this._draggable._element,"leaflet-path-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._startPoint=this._draggable._startPoint,this._path.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(e){var t=this._path,n=e.originalEvent.touches&&e.originalEvent.touches.length===1?e.originalEvent.touches[0]:e.originalEvent,i=L.point(n.clientX,n.clientY),r=t._map.layerPointToLatLng(i);this._offset=i.subtract(this._startPoint),this._startPoint=i,this._path.eachLatLng(this.updateLatLng,this),t.redraw(),e.latlng=r,e.offset=this._offset,t.fire("drag",e),e.latlng=this._path.getCenter?this._path.getCenter():this._path.getLatLng(),t.fire("move",e)},_onDragEnd:function(e){this._path._bounds&&this.resetBounds(),this._path.fire("moveend").fire("dragend",e)},latLngToLayerPoint:function(e){var t=this._path._map.project(L.latLng(e));return t._subtract(this._path._map.getPixelOrigin())},updateLatLng:function(e){var t=this.latLngToLayerPoint(e);t._add(this._offset);var n=this._path._map.layerPointToLatLng(t);e.lat=n.lat,e.lng=n.lng},resetBounds:function(){this._path._bounds=new L.LatLngBounds,this._path.eachLatLng(function(e){this._bounds.extend(e)})}});L.Path.include({eachLatLng:function(e,t){t=t||this;var n=function(i){for(var r=0;r<i.length;r++)L.Util.isArray(i[r])?n(i[r]):e.call(t,i[r])};n(this.getLatLngs?this.getLatLngs():[this.getLatLng()])}});L.Path.addInitHook(function(){this.dragging=new L.Handler.PathDrag(this),this.options.draggable&&this.once("add",function(){this.dragging.enable()})});var MD=hr(A0()),Gl=class{constructor(t,n){this._isEditMode=!1;this._mode="none";this._currentLayerFilterStyle="severity";this._selected=null;this._map=t,this._groups=n,this._placementLayers=new en.LayerGroup().addTo(t),this._placementBufferLayers=new en.LayerGroup().addTo(t),this._ghostLayers=new en.LayerGroup().addTo(t),this._placementLayers.addTo(n.placement),this._placementBufferLayers.addTo(n.placement),this._validateEntitiesQueue=new Array,this._lastEnityFetch=0,this._autoRefreshIntervall=90,this._currentRevisions={};var i=this._placementBufferLayers;t.on("zoomend",function(){t.getZoom()>=19?i.getLayers().forEach(function(a){a.setStyle({opacity:1})}):i.getLayers().forEach(function(a){a.setStyle({opacity:0})})});let r=T0(this._groups,this._placementLayers);this._repository=new zl(r),this._popup=en.popup({autoClose:!1,closeButton:!1,closeOnClick:!1,closeOnEscapeKey:!1}),en.PM.setOptIn(!0),this._map.pm.addControls({position:"bottomleft",drawPolygon:!1,drawCircle:!1,drawMarker:!1,drawPolyline:!1,drawRectangle:!1,drawCircleMarker:!1,drawText:!1,removalMode:!1,editControls:!1,snappable:!1}),this._map.pm.setPathOptions(kf),this._map.pm.setGlobalOptions({tooltips:!1,allowSelfIntersection:!1,snappable:!0,draggable:!0}),this._map.on("pm:create",this.onNewLayerCreated.bind(this)),this._map.on("click",a=>{console.log("[Editor]","Editor blur event fired (map click)",{mouseEvent:a}),this.setMode("blur")}),this.sqmTooltip=new en.Tooltip({permanent:!0,interactive:!1,direction:"center",className:"shape-tooltip"}),this.sqmTooltip.setLatLng([0,0]),this.sqmTooltip.addTo(this._map),this.sqmTooltip.closeTooltip(),this._nameTooltips={},t.on("zoomend",function(){var a=t.getZoom();this.groups.names.getLayers().forEach(function(s){a>=19?s._tooltip.setOpacity(1):s._tooltip.setOpacity(0)})}),document.onkeydown=a=>{this.keyEscapeListener(a)};var o=new en.Control.Search({layer:this._placementLayers,propertyName:"name",marker:!1,zoom:19,initial:!1});t.addControl(o)}async setMode(t,n){let i=this._mode,r=this._selected,o=t==i,a=n==r;if(!(o&&a)){if(this._ghostLayers.clearLayers(),t=="blur")if((i=="editing-shape"||i=="moving-shape"||i=="editing-info")&&r){t="selected",n=n||r;let u=n.layer.getBounds().getCenter();this._popup.setLatLng(u)}else t="none",n=void 0;if(console.log("[Editor]","mode changed!",{mode:this._mode,nextMode:t,nextEntity:n}),this._mode=t,this._mode=="none"){this.setSelected(null,r),this.setPopup("none");return}if(this._mode=="selected"&&n){this.setSelected(n,r),this.setPopup("info",n),r&&(r?.layer.pm.disable(),r?.layer._layers[r.layer._leaflet_id-1].dragging.disable());return}if(this._mode=="editing-shape"&&n){n.layer.pm.enable({editMode:!0,snappable:!1}),this.setSelected(n,r),this.setPopup("none");return}if(this._mode=="moving-shape"&&n){this.setSelected(n,r),this.setPopup("none"),this.UpdateOnScreenDisplay(n,"Drag to move"),n.layer._layers[n.layer._leaflet_id-1].dragging.enable();return}if(this._mode=="editing-info"&&n){this.setSelected(n,r),this.setPopup("edit-info",n);return}}}async setSelected(t,n){n&&t!=n&&n.hasChanges()&&await this.onLayerDoneEditing(n),this._isEditMode&&this.UpdateOnScreenDisplay(t),this._selected=t,this.refreshEntity(this._selected)}keyEscapeListener(t){"key"in t&&!(t.key==="Escape"||t.key==="Esc")||this.setMode("blur")}async setPopup(t,n){if(t=="none"||!n){this._popup.close();return}if(t=="info"){let i=document.createElement("div"),r=n.nrOfPeople==="1"?" person,":" people,",o=n.nrOfVehicles==="1"?"> vehicle,":" vehicles,",a=n.name?n.name:"No name yet",s=n.description?n.description:"No description yet, please add one!",u=n.contactInfo?n.contactInfo:"Please add contact info! Without it, your area might be removed.",f=n.powerNeed!=-1?`${n.powerNeed} Watts`:"Please state your power need! Set to 0 if you will not use electricity.",c=n.amplifiedSound!=-1?`${n.amplifiedSound} Watts`:"Please set sound amplification! Set to 0 if you wont have speakers.",d=hh.default.sanitize(s),m=/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim,v=d.replace(m,'<a href="$1" target="_blank">$1</a>');i.innerHTML=`<h2 style="margin-bottom: 0">${hh.default.sanitize(a)}</h2>
                                <p class="scrollable">${v}</p>
                                <p style="font-size:14px; margin-top:0px !important; margin-bottom:0px !important">
                                <b>Contact:</b> ${hh.default.sanitize(u)}   
                                </br>
                                <b style="text-align:right;">Power:</b> ${f}
                                </br>
                                <b style="text-align:right;">Sound:</b> ${c}
                                </p> 

                                <div style="font-size: 14px; color:#5c5c5c; margin-bottom: 10px !important">
                                    <b>${n.area}</b> m\xB2 - 
                                    ${n.nrOfPeople>0?"<b>"+n.nrOfPeople+"</b>"+r:""} 
                                    ${n.nrOfVehicles>0?"<b>"+n.nrOfVehicles+"</b>"+o:""} 
                                    ${n.additionalSqm>0?"<b>"+n.additionalSqm+"</b> m\xB2 other":""}
                                </div>
                                `;let p=n.getAllTriggeredRules().sort((_,y)=>y.severity-_.severity);if(p.length>0){n.supressWarnings||(i.innerHTML+=`<p style="margin-bottom: 0px !important"><b>${p.length}</b> issues found:</p> `);let _=document.createElement("div");_.style.maxHeight="200px",_.style.overflowY="auto",_.style.marginBottom="10px",i.appendChild(_);for(let y of p)y.severity>=3?_.innerHTML+=`<p class="error">${" "+y.message}</p>`:n.supressWarnings||(y.severity>=2?_.innerHTML+=`<p class="warning">${" "+y.message}</p>`:_.innerHTML+=`<p class="info">${" "+y.message}</p>`)}if(this._isEditMode){let _=document.createElement("button");_.innerHTML="Edit shape",_.onclick=S=>{S.stopPropagation(),S.preventDefault(),this.setMode("editing-shape",n)},i.appendChild(_);let y=document.createElement("button");y.innerHTML="Move",y.onclick=S=>{S.stopPropagation(),S.preventDefault(),this.setMode("moving-shape",n)},i.appendChild(y);let x=document.createElement("button");x.innerHTML="Edit info",x.onclick=S=>{S.stopPropagation(),S.preventDefault(),this.setMode("editing-info",n)},i.appendChild(x)}this._popup.setContent(i).openOn(this._map);return}if(t=="edit-info"){let i=document.createElement("div");i.innerHTML="",i.appendChild(document.createElement("label")).innerHTML="Name of camp/dream";let r=document.createElement("input");r.type="text",r.value=n.name,r.maxLength=100,r.placeholder="Enter camp name here..",r.oninput=()=>{n.name=r.value,this.refreshEntity(n)},i.appendChild(r),i.appendChild(document.createElement("br")),i.appendChild(document.createElement("label")).innerHTML="Description";let o=document.createElement("textarea");o.value=n.description,o.maxLength=300,o.placeholder="Describe your camp/dream here as much as you want. Remember that this information is public. 300 characters max.",o.style.height="100px",o.oninput=()=>{n.description=o.value,this.refreshEntity(n),this.UpdateOnScreenDisplay(n)},i.appendChild(o),i.appendChild(document.createElement("label")).innerHTML="Contact info";let a=document.createElement("input");a.type="text",a.value=n.contactInfo,a.placeholder="Email, phone, discord name etc",a.oninput=()=>{n.contactInfo=a.value,this.refreshEntity(n),this.UpdateOnScreenDisplay(n)},i.appendChild(a),i.appendChild(document.createElement("br")),i.appendChild(document.createElement("b")).innerHTML="People";let s=document.createElement("input");s.title="10m\xB2 per person",s.style.width="3em",s.style.marginBottom="7px",s.style.marginLeft="5px",s.type="number",s.value=String(n.nrOfPeople),s.min="0",s.oninput=()=>{n.nrOfPeople=s.value,m(n)},i.appendChild(s);let u=document.createElement("span");u.innerHTML=" x 10m\xB2",u.style.fontSize="12px",u.style.marginRight="25px",i.appendChild(u),i.appendChild(document.createElement("b")).innerHTML=" Vehicles ";let f=document.createElement("input");f.title="70m\xB2 per vehicle",f.style.width="3em",f.style.marginLeft="5px",f.type="number",f.value=String(n.nrOfVehicles),f.min="0",f.oninput=()=>{n.nrOfVehicles=f.value,m(n)},i.appendChild(f);let c=document.createElement("span");c.innerHTML=" x 70m\xB2",c.style.fontSize="12px",i.appendChild(c),i.appendChild(document.createElement("br")),i.appendChild(document.createElement("b")).innerHTML="Other stuff in m\xB2";let d=document.createElement("input");d.title="Area needed for kitchen, storage, workshop tents etc.",d.style.width="6.2em",d.style.marginLeft="116px",d.type="number",d.value=String(n.additionalSqm),d.min="0",d.oninput=()=>{n.additionalSqm=d.value,m(n)},i.appendChild(d);let m=(y,x=null)=>{this.refreshEntity(y),this.UpdateOnScreenDisplay(y);let S=document.getElementById("areaInfo");S||(S=x),S.innerHTML="With this amount of people, vehicles and extra m\xB2 such as art, kitchen tents and structures, a suggested camp size is <b>"+y?.calculatedAreaNeeded+"m\xB2</b>. Currently the area is <b>"+y?.area+"m\xB2.</b>"},v=i.appendChild(document.createElement("div"));v.id="areaInfo",v.style.marginTop="10px",v.style.marginBottom="5px",v.style.fontSize="12px",m(n,v),i.appendChild(document.createElement("b")).innerHTML="Power need (Watts) ";let p=document.createElement("input");p.title=`A water boiler is about 2000W, a fridge is about 100W,
a laptop is about 50W, a phone charger is about 10W.`,p.style.width="5em",p.style.marginTop="7px",p.style.marginBottom="7px",p.style.marginLeft="110px",p.type="number",p.value=String(n.powerNeed),p.placeholder="?",p.min="0",p.oninput=()=>{n.powerNeed=p.value,this.refreshEntity(n),this.UpdateOnScreenDisplay(n)},i.appendChild(p),i.appendChild(document.createElement("br")),i.appendChild(document.createElement("b")).innerHTML="Sound amplification (Watts) ";let _=document.createElement("input");if(_.style.width="5em",_.title=`If over 100W then you are considered a sound camp.
Please get in contact with the sound lead.`,_.style.marginBottom="7px",_.style.marginLeft="58px",_.type="number",_.value=String(n.amplifiedSound),_.min="0",_.placeholder="?",_.oninput=()=>{n.amplifiedSound=_.value,this.refreshEntity(n),this.UpdateOnScreenDisplay(n)},i.appendChild(_),i.appendChild(document.createElement("p")),this._isEditMode){let y=document.createElement("button");y.innerHTML="Ok!",y.style.width="200px",y.onclick=async S=>{S.stopPropagation(),S.preventDefault(),this.setMode("blur")},i.appendChild(y);let x=document.createElement("button");x.innerHTML="More...",x.style.marginRight="0",x.onclick=async S=>{S.stopPropagation(),S.preventDefault(),this.setPopup("more",n)},i.appendChild(x)}i.onkeydown=y=>{"key"in y&&y.key==="Enter"&&"ctrlKey"in y&&y.ctrlKey==!0&&this.setMode("blur")},this._popup.setContent(i).openOn(this._map);return}if(t=="more"){let i=document.createElement("div");i.innerHTML="",i.appendChild(document.createElement("h2")).innerHTML="More stuff";let r=this.formatDate(n.timeStamp),o=i.appendChild(document.createElement("div"));o.innerHTML=`<b>Entity Id: </b> ${n.id}<br><b>Revisions: </b> ${n.revision}<br><b>Last edited:</b> ${r}`,i.appendChild(document.createElement("br"));let a=i.appendChild(document.createElement("a"));a.innerHTML="Click here to copy a link to this entity",a.href="?id="+n.id,a.onclick=v=>(console.log("Copy to clipboard",a.href),v.stopPropagation(),v.preventDefault(),navigator.clipboard.writeText(a.href),!1),i.appendChild(document.createElement("br")),i.appendChild(document.createElement("br")),i.appendChild(document.createElement("b")).innerHTML="Supress yellow warnings";let s=document.createElement("input");s.type="checkbox",s.style.marginLeft="10px",s.checked=n.supressWarnings,s.onchange=()=>{n.supressWarnings=s.checked,this.refreshEntity(n)},i.appendChild(s),i.appendChild(document.createElement("br")),i.appendChild(document.createElement("b")).innerHTML="Custom color ";let u=document.createElement("input");u.type="color",u.style.width="66px",u.style.marginLeft="146px",u.value=n.color,u.onchange=()=>{n.color=u.value,this.refreshEntity(n)},i.appendChild(u),i.appendChild(document.createElement("p"));let f=document.createElement("button");f.classList.add("delete-button"),f.innerHTML="Delete",f.style.width="100%",f.onclick=async v=>{let p=prompt("Are you really sure you should delete this area? Answer why.","");if(p==null||p==""){console.log("Delete nope, deleteReason",p);return}console.log("Delete yes, deleteReason",p),v.stopPropagation(),v.preventDefault(),this.deleteAndRemoveEntity(n,p)},i.appendChild(f);let c=document.createElement("button");c.innerHTML="History",c.style.marginRight="0",c.onclick=async v=>{v.stopPropagation(),v.preventDefault(),this.setPopup("history",n)},i.appendChild(c);let d=i.appendChild(document.createElement("div"));d.innerHTML="Use delete with caution! Only delete things you know is ok. Undelete can only be performed by using black magic.",i.appendChild(document.createElement("br"));let m=document.createElement("button");m.innerHTML="Back",m.style.width="200px",m.onclick=async v=>{v.stopPropagation(),v.preventDefault(),this.setMode("blur")},i.appendChild(m),this._popup.setContent(i).openOn(this._map);return}if(t=="history"){let i=document.createElement("div");i.innerHTML="",i.appendChild(document.createElement("h2")).innerHTML="Edit-History";let r=this.formatDate(n.timeStamp),o=i.appendChild(document.createElement("div"));o.innerHTML=`<b>Entity Id: </b> ${n.id}<br><b>Name: </b> ${n.name}<br><b>Revisions: </b> ${n.revision}<br><b>Last edited:</b> ${r}`,i.appendChild(document.createElement("br"));let a=document.createElement("div"),s=document.createElement("div"),u=document.createElement("div"),f=document.createElement("h3");f.innerText="Description",s.append(f),s.append(u),a.id="history-table",i.appendChild(a),u.id="change-description",i.appendChild(s);let c=document.createElement("table");a.appendChild(c);let m=c.createTHead().insertRow();m.insertCell().innerText="Revision",m.insertCell().innerText="Timestamp",m.insertCell().innerText="What Changed";let v=c.createTBody();await this._repository.getRevisionsForEntity(n);let p=[],_=null,y=null,x={color:"#ff0000",fillColor:"#000000",fillOpacity:.5,weight:5};for(let O in n.revisions){let B=document.createElement("ul"),U=document.createElement("tr");_=n.revisions[O],U.insertCell().innerText=_.revision,U.insertCell().innerText=this.formatDate(_.timeStamp,"short","medium"),U.insertCell().append(B);let z=this.getEntityDifferences(_,y);for(let q in z){let G=z[q],tt=document.createElement("li");tt.innerText=G.changeShort;let K=document.createElement("a");K.href="#",K.innerText=" Show",K.title="Show a detailed description about this change.",K.onclick=()=>{let D=n.revisions[O];f.innerText=`Description of revision ${O}`,u.innerText=`${G.changeLong}

`;let N=en.DomUtil.create("button","history-button");N.title=`Restores detailes from revision ${O}.`,N.textContent="\u26A0 Restore Details",N.onclick=()=>{console.log(`Restores detailes from revision ${O}.`),n.name=n.revisions[O].name,n.description=n.revisions[O].description,n.contactInfo=n.revisions[O].contactInfo,n.nrOfPeople=n.revisions[O].nrOfPeople,n.nrOfVehicles=n.revisions[O].nrOfVehicles,n.additionalSqm=n.revisions[O].additionalSqm,n.powerNeed=n.revisions[O].powerNeed,n.amplifiedSound=n.revisions[O].amplifiedSound,n.color=n.revisions[O].color,n.supressWarnings=n.revisions[O].supressWarnings},u.append(N);let Z=en.DomUtil.create("button","history-button");Z.title=`Restores shape from revision ${O}.`,Z.textContent="\u26A0 Restore Shape",Z.onclick=()=>{console.log(`Restores shape from revision ${O}.`),this.removeEntityNameTooltip(n),this.removeEntityFromLayers(n),n.layer=n.revisions[O].layer,this.addEntityToMap(n)},u.append(Z),this._ghostLayers.clearLayers(),D.layer.setStyle(x),this._ghostLayers.addLayer(D.layer)},tt.append(K),B.append(tt)}p.push(U),y=_}p.slice().reverse().forEach(function(O){v.append(O)});let S=document.createElement("button");S.innerHTML="Back",S.style.width="200px",S.onclick=async O=>{O.stopPropagation(),O.preventDefault(),this.setMode("blur")},i.appendChild(S),this._popup.setContent(i).openOn(this._map);return}}async onLayerClicked(t){console.log("[Editor]","Click event fired",{entity:t}),this.setMode("selected",t)}async onLayerDoneEditing(t){console.log("[Editor]","onLayerDoneEditing!",{selected:this._selected}),t.layer.pm.disable(),this.UpdateOnScreenDisplay(null),await this._repository.getRevisionsForEntity(t);let n;for(let o in t.revisions)n=o;let i=t.revisions[n];if(t.revision!=i.revision){let o=this.getEntityDifferences(i,t),a="<b>Someone else edited this shape at the same time as you</b><br/>You have now overwritten their changes, these differences were detected:<ul>";for(let s in o)a+=`<li>${o[s].changeLong}</li>`;a+="</ul>",Bs(a,"danger",void 0,36e5)}if(this.isAreaTooBig(t.toGeoJSON())){Bs("The area of the polygon is waaay to big. It will not be saved, please change it.","danger",void 0,36e5);return}let r=await this._repository.updateEntity(t);r&&(this.removeEntity(t,!1),this.addEntityToMap(r),Bs("Saved!","success"))}async onNewLayerCreated(t){console.log("[Editor]","Create event fired",{createEvent:t});let{layer:n}=t,i=n.toGeoJSON();if(this.isAreaTooBig(i)){Bs("The area of the polygon is waaay to big. Draw something smaller.","danger",void 0,36e5),this._map.removeLayer(n);return}let r=await this._repository.createEntity(i);if(r){this.addEntityToMap(r),this._map.removeLayer(n);let a=r.layer.getBounds().getCenter();this._popup.setLatLng(a),this.setMode("editing-info",r),Bs("Saved!","success")}}createEntityTooltip(t){let n=new en.Marker(t.layer.getBounds().getCenter(),{opacity:0});return n.feature={type:"Feature",geometry:{type:"Point",coordinates:[0,0]},properties:{}},n.options.icon.options.iconSize=[1,1],n.bindTooltip(t.name,{permanent:!0,interactive:!1,direction:"center",className:"name-tooltip"}),t.nameMarker=n,n}addEntityToMap(t,n=!0){this._currentRevisions[t.id]=t,t.layer.on("click",({latlng:i})=>{console.log(i),this._popup.setLatLng(i),this.onLayerClicked(t)}),this._nameTooltips[t.id]=this.createEntityTooltip(t),this._nameTooltips[t.id].addTo(this._groups.names),t.layer.on("pm:markerdrag",()=>{t.updateBufferedLayer(),this.refreshEntity(t),this.UpdateOnScreenDisplay(t)}),t.layer.on("pm:markerdragend",()=>{this.isAreaTooBig(t.toGeoJSON())&&Bs("The area of the polygon is waaay to big. Draw something smaller, this wont be saved anyways.","danger",void 0,36e5)}),t.layer._layers[t.layer._leaflet_id-1].on("drag",()=>{t.updateBufferedLayer(),this.refreshEntity(t),this.UpdateOnScreenDisplay(null)}),t.layer.on("pm:vertexremoved",()=>{t.updateBufferedLayer(),this.refreshEntity(t),this.UpdateOnScreenDisplay(t)}),this._placementLayers.addLayer(t.layer),this._placementBufferLayers.addLayer(t.bufferLayer),this._map.getZoom()<19&&t.bufferLayer.setStyle({opacity:0}),n&&this.refreshEntity(t)}refreshEntity(t,n=!0){if(t==null)return;let i=t.nameMarker,r=t.nameMarker.getLatLng(),o=t.layer.getBounds().getCenter();(o.lat!=r.lat||o.lng!=r.lng)&&t.nameMarker.setLatLng(o),t.nameMarker._tooltip._content!=t.name&&t.nameMarker.setTooltipContent(t.name);var a=this._map.getZoom();a>=19?this._nameTooltips[t.id]._tooltip.setOpacity(1):this._nameTooltips[t.id]._tooltip.setOpacity(0),n&&t.checkAllRules(),t.setLayerStyle(this._currentLayerFilterStyle)}refreshAllEntities(t=!0){for(let n in this._currentRevisions)this.refreshEntity(this._currentRevisions[n],t)}refreshEntitiesSlow(t=null){if(Bs("Validating..."),t)this._validateEntitiesQueue=t;else for(let n in this._currentRevisions)this._validateEntitiesQueue.push(this._currentRevisions[n]);this.validateSlowly()}validateSlowly(){let t=0;for(;this._validateEntitiesQueue.length>0&&t<50;){let n=this._validateEntitiesQueue.pop();t=t+1,this.refreshEntity(n,!0)}this._validateEntitiesQueue.length==0?Bs("Validation done","success"):setTimeout(()=>{this.validateSlowly()},50)}setLayerFilter(t,n=!0){this._currentLayerFilterStyle=t,this.refreshAllEntities(n)}isAreaTooBig(t){return fo(t)>5e3}deleteAndRemoveEntity(t,n=null){this._selected=null,this.setMode("none"),this.removeEntity(t),this._repository.deleteEntity(t,n)}removeEntityNameTooltip(t){t.nameMarker.unbindTooltip(),this._groups.names.removeLayer(t.nameMarker),t.nameMarker=null,delete this._nameTooltips[t.id]}removeEntityFromLayers(t){this._placementLayers.removeLayer(t.layer),this._placementBufferLayers.removeLayer(t.bufferLayer),this._map.removeLayer(t.layer),this._map.removeLayer(t.bufferLayer)}removeEntity(t,n=!0){this.removeEntityNameTooltip(t),this.removeEntityFromLayers(t),delete this._currentRevisions[t.id],n&&this._repository.remove(t)}addToggleEditButton(){if(!0){let t=en.Control.extend({options:{position:"bottomleft"},onAdd:()=>{let n=en.DomUtil.create("button","btn btn-gradient1 button-shake-animate");return n.title="Edit",n.textContent="Edit",en.DomEvent.disableClickPropagation(n),n.onclick=()=>{this.toggleEditMode(),n.textContent=this._isEditMode?"Done":"Edit",n.title=this._isEditMode?"Done":"Edit"},n}});this._map.addControl(new t)}if(void 0){let t=en.Control.extend({options:{position:"bottomleft"},onAdd:()=>{var n=en.DomUtil.create("p","btn btn-gradient1 button-shake-animate");return n.innerHTML+=void 0,n}});this._map.addControl(new t)}}formatDate(t,n="short",i="short"){return new Date(Date.parse(t)).toLocaleString("sv",{dateStyle:n,timeStyle:i})}getEntityDifferences(t,n){let i=[];if(n==null)return i.push({what:"Created",changeShort:"Created",changeLong:"Someone created this entity."}),i;t.isDeleted!=n.isDeleted&&i.push({what:"Deleted",changeShort:"Is Deleted",changeLong:`Is Deleted due to ${t.deleteReason}.`}),t.name!=n.name&&i.push({what:"Name",changeShort:"Name Changed",changeLong:`Someone changed the name from ${n.name} to ${t.name}.`}),t.description!=n.description&&i.push({what:"Description",changeShort:"Description Changed",changeLong:`Someone changed the description from ${n.description} to ${t.description}.`}),t.contactInfo!=n.contactInfo&&i.push({what:"Contact Info",changeShort:"Contact Info Changed",changeLong:`Someone changed the contact info from ${n.contactInfo} to ${t.contactInfo}.`}),t.nrOfPeople!=n.nrOfPeople&&i.push({what:"NrOfPeople",changeShort:"NrOfPeople Changed",changeLong:`Someone changed the number of people from ${n.nrOfPeople} to ${t.nrOfPeople}.`}),t.nrOfVehicles!=n.nrOfVehicles&&i.push({what:"NrOfVehicles",changeShort:"NrOfVehicles Changed",changeLong:`Someone changed the number of vehicles from ${n.nrOfVehicles} to ${t.nrOfVehicles}.`}),t.additionalSqm!=n.additionalSqm&&i.push({what:"AdditionalSqm",changeShort:"AdditionalSqm Changed",changeLong:`Someone changed additional Sqm from ${n.additionalSqm} to ${t.additionalSqm}.`}),t.powerNeed!=n.powerNeed&&i.push({what:"PowerNeed",changeShort:"PowerNeed Changed",changeLong:`Someone changed power need from ${n.powerNeed} to ${t.powerNeed}.`}),t.amplifiedSound!=n.amplifiedSound&&i.push({what:"AmplifiedSound",changeShort:"AmplifiedSound Changed",changeLong:`Someone changed amplified sound from ${n.amplifiedSound} to ${t.amplifiedSound}.`}),t.color!=n.color&&i.push({what:"Color",changeShort:"Color Changed",changeLong:`Someone changed color from ${n.color} to ${t.color}.`}),t.supressWarnings!=n.supressWarnings&&i.push({what:"SupressWarnings",changeShort:"SupressWarnings Changed",changeLong:`Someone changed supress warnings from ${n.supressWarnings} to ${t.supressWarnings}.`});let r=JSON.stringify(t.toGeoJSON().geometry),o=JSON.stringify(n.toGeoJSON().geometry);return r!=o&&i.push({what:"GeoJson",changeShort:"Polygon Changed",changeLong:"Someone changed the polygon."}),i.length==0&&i.push({what:"NoDifference",changeShort:"No difference",changeLong:"No difference detected between revisions."}),i}async toggleEditMode(){if(!!0){this._isEditMode=!1;return}this._isEditMode=!this._isEditMode,this._isEditMode&&localStorage.getItem("hasSeenEditorInstructions")==null&&md([{file:"entering_edit_mode",position:"bottom"},{file:"entering_edit_mode_page_two",position:"bottom",onClose:()=>{localStorage.setItem("hasSeenEditorInstructions","true")}}]),this.setPopup("info",this._selected),this._isEditMode==!1&&this._mode!="selected"&&this.setMode("none"),this._map.pm.addControls({drawPolygon:this._isEditMode}),this._map.pm.Toolbar.changeActionsOfControl("Polygon",["cancel"])}async addAPIEntities(){Bs("Loading your drawn polygons from da interweb!");let t=await this._repository.entities();this._lastEnityFetch=new Date().getTime()/1e3;for(let n of t)this.addEntityToMap(n,!1);this.refreshAllEntities(!1),setTimeout(()=>{this.refreshEntitiesSlow()},100),this.addToggleEditButton()}async checkForUpdatedEntities(){if(this._isEditMode==!1){var t=new Date().getTime()/1e3;if(t-this._lastEnityFetch>this._autoRefreshIntervall){this._lastEnityFetch=t;let n=await this._repository.reload(),i=new Array,r=new Array;for(let o of n.refreshedAdded){let a=this._repository.getEntityById(o);r.push(`Add new entity ${a.id} ${a.name}`),this.addEntityToMap(a,!1),i.push(a)}for(let o of n.refreshedDeleted){let a=this._currentRevisions[o];r.push(`Removed entity ${a.id} ${a.name}`),this.removeEntity(a)}for(let o of n.refreshedUpdated){let a=this._repository.getEntityById(o);r.push(`Updated entity ${a.id} ${a.name}`),this.removeEntity(this._currentRevisions[o],!1),this.addEntityToMap(a,!1),i.push(a)}r.length>0&&(console.log("Fetched latest changes from map",new Date().toISOString(),r),this.refreshAllEntities(!1)),i.length>0&&this.refreshEntitiesSlow(i)}}setTimeout(()=>{this.checkForUpdatedEntities()},1e4)}gotoEntity(t){let n=this._repository.getEntityById(t);if(n){let i=n.layer.getBounds().getCenter();this._map.setView(i,19),this._popup.setLatLng(i),this.onLayerClicked(n)}}UpdateOnScreenDisplay(t,n=null){if(t||n){let i="";if(n)i=n;else{i=t.area+"m\xB2";for(let r of t.getAllTriggeredRules())r.severity>=2&&(i+="<br>"+r.shortMessage)}this.sqmTooltip.openOn(this._map),this.sqmTooltip.setLatLng(t.layer.getBounds().getCenter()),this.sqmTooltip.setContent(i)}else this.sqmTooltip.close()}};var D0=async()=>{let e=new Set(["Placement","Placement_map","POI"]),t=fn.default.map("map",{zoomControl:!1,maxZoom:21,drawControl:!0,attributionControl:!1}).setView([57.6226,14.9276],16);t.groups={placement:new fn.default.LayerGroup,mapstuff:new fn.default.LayerGroup,neighbourhoods:new fn.default.LayerGroup,quarters:new fn.default.LayerGroup,plazas:new fn.default.LayerGroup,poi:new fn.default.LayerGroup,soundspots:new fn.default.LayerGroup},t.groups.googleSatellite=fn.default.tileLayer("https://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}",{maxZoom:21,maxNativeZoom:20,subdomains:["mt0","mt1","mt2","mt3"]}).addTo(t),fetch("./data/analysis/contours.geojson").then(f=>f.json()).then(f=>{fn.default.geoJSON(f.features,{style:{color:"#ffffff",weight:1,opacity:.5}}).addTo(t.groups.mapstuff)}),await ga(t,"type","./data/bl24/placement_areas.geojson"),await ga(t,"type","./data/bl24/borders.geojson"),await ga(t,"type","./data/bl24/roads_and_distances.geojson"),await ga(t,"type","./data/bl24/plazas.geojson"),await ga(t,"type","./data/bl24/neighbourhoods.geojson"),t.groups.propertyborder.addTo(t.groups.mapstuff),t.removeLayer(t.groups.propertyborder),t.groups.minorroad.addTo(t.groups.mapstuff),t.removeLayer(t.groups.minorroad),t.groups.fireroad.addTo(t.groups.mapstuff),t.removeLayer(t.groups.fireroad),t.groups.area.addTo(t.groups.mapstuff),t.removeLayer(t.groups.area),t.groups.hiddenforbidden.addTo(t.groups.mapstuff),t.groups.container.addTo(t.groups.mapstuff),t.removeLayer(t.groups.container),t.groups.parking.addTo(t.groups.mapstuff),t.removeLayer(t.groups.parking),t.groups.toilet.addTo(t.groups.mapstuff),t.removeLayer(t.groups.toilet),t.groups.bridge.addTo(t.groups.mapstuff),t.removeLayer(t.groups.bridge),t.groups.names=new fn.default.LayerGroup,t.groups.names.addTo(t),t.groups.soundguide=new fn.default.LayerGroup,t.groups.bluesoundzone.addTo(t.groups.soundguide),t.removeLayer(t.groups.bluesoundzone),t.groups.greensoundzone.addTo(t.groups.soundguide),t.removeLayer(t.groups.greensoundzone),t.groups.yellowsoundzone.addTo(t.groups.soundguide),t.removeLayer(t.groups.yellowsoundzone),t.groups.orangesoundzone.addTo(t.groups.soundguide),t.removeLayer(t.groups.orangesoundzone),t.groups.redsoundzone.addTo(t.groups.soundguide),t.on("overlayadd",function(f){t.groups.names.setZIndex(101),f.name==="Soundguide"&&(t.groups.bluesoundzone.bringToBack(),t.groups.greensoundzone.bringToBack(),t.groups.yellowsoundzone.bringToBack(),t.groups.orangesoundzone.bringToBack(),t.groups.redsoundzone.bringToBack())}),t.groups.terrain=await pd(t,"./data/terrain.png",[[57.615642290070426,14.915097173672454],[57.62912303949617,14.936217846229036]]),t.groups.heightmap=fn.default.tileLayer("./data/analysis/height/{z}/{x}/{y}.jpg",{minZoom:13,maxZoom:21,minNativeZoom:16,maxNativeZoom:17,tms:!1}),t.groups.slopemap=fn.default.tileLayer("./data/analysis/slope/{z}/{x}/{y}.png",{minZoom:13,maxZoom:21,minNativeZoom:16,maxNativeZoom:17,tms:!1}),t.groups.aftermath=fn.default.tileLayer("./data/bl23/aftermath/{z}/{x}/{y}.png",{minZoom:0,maxZoom:21,minNativeZoom:0,maxNativeZoom:20,tms:!1}),t.groups.aftermath22=fn.default.tileLayer("./data/bl22/aftermath/{z}/{x}/{y}.png",{minZoom:0,maxZoom:21,minNativeZoom:0,maxNativeZoom:20,tms:!1}),t.groups.plaza.addTo(t.groups.plazas),t.removeLayer(t.groups.plaza),t.groups.neighbourhood.addTo(t.groups.neighbourhoods),t.removeLayer(t.groups.neighbourhood);var n={Placement_map:t.groups.mapstuff,POI:t.groups.poi,Soundguide:t.groups.soundguide,Slope:t.groups.slopemap,Height:t.groups.heightmap,Terrain:t.groups.terrain,Plazas:t.groups.plazas,Placement:t.groups.placement,Names:t.groups.names,Neighbourhoods:t.groups.neighbourhoods,Quarters:t.groups.quarters,Aftermath22:t.groups.aftermath22,Aftermath23:t.groups.aftermath};let i=new Gl(t,t.groups),r=fn.default.Control.extend({options:{position:"topleft"},onAdd:()=>{let f=fn.default.DomUtil.create("button","leaflet-bar help-button");return f.title="Guide to the placement process",f.textContent="\u26D1\uFE0F",fn.default.DomEvent.disableClickPropagation(f),f.onclick=()=>{ao({file:"guide-home",position:"end",onClose:()=>{localStorage.setItem("hasSeenPlacementWelcome","true")}})},f}});t.addControl(new r),fn.default.control.polylineMeasure({measureControlLabel:"&#128207;",arrow:{color:"#0000"}}).addTo(t);let a=new fn.default.Control.Coordinates({position:"topright",latitudeText:"lat",longitudeText:"lng",promptText:"Current Coordinaes:",precision:10});a.addTo(t),console.log(a),t.on("hashmetainit",function(f){lo.decode(f.meta),lo.layers.filter(c=>c in n).forEach(c=>e.add(c)),e.forEach(c=>t.addLayer(n[c]))}),t.on("overlayadd",function(f){e.add(f.name),lo.layers=e}),t.on("overlayremove",function(f){e.delete(f.name),lo.layers=e}),lo.map=t,lo.layers=e,t.on("click",function(f){console.log(f.latlng),a.setCoordinates(f)}),await vh("poi.json",t.groups.poi),await vh("soundspots.json",t.groups.soundspots),t.groups.soundspots.addTo(t.groups.soundguide),t.removeLayer(t.groups.soundspots),ld(t.groups.quarters),ud(t.groups.plazas),hd(t.groups.neighbourhoods),await cd(t,n,e),await i.addAPIEntities(),t.groups.placement.addTo(t);let u=new URLSearchParams(window.location.search).get("id");u&&i.gotoEntity(u),Bs("Loaded everything!","success")};var cs=class{constructor(t){this.table=t}reloadData(t,n,i){return this.table.dataLoader.load(t,void 0,void 0,void 0,n,i)}langText(){return this.table.modules.localize.getText(...arguments)}langBind(){return this.table.modules.localize.bind(...arguments)}langLocale(){return this.table.modules.localize.getLocale(...arguments)}commsConnections(){return this.table.modules.comms.getConnections(...arguments)}commsSend(){return this.table.modules.comms.send(...arguments)}layoutMode(){return this.table.modules.layout.getMode()}layoutRefresh(t){return this.table.modules.layout.layout(t)}subscribe(){return this.table.eventBus.subscribe(...arguments)}unsubscribe(){return this.table.eventBus.unsubscribe(...arguments)}subscribed(t){return this.table.eventBus.subscribed(t)}subscriptionChange(){return this.table.eventBus.subscriptionChange(...arguments)}dispatch(){return this.table.eventBus.dispatch(...arguments)}chain(){return this.table.eventBus.chain(...arguments)}confirm(){return this.table.eventBus.confirm(...arguments)}dispatchExternal(){return this.table.externalEvents.dispatch(...arguments)}subscribedExternal(t){return this.table.externalEvents.subscribed(t)}subscriptionChangeExternal(){return this.table.externalEvents.subscriptionChange(...arguments)}options(t){return this.table.options[t]}setOption(t,n){return typeof n<"u"&&(this.table.options[t]=n),this.table.options[t]}deprecationCheck(t,n,i){return this.table.deprecationAdvisor.check(t,n,i)}deprecationCheckMsg(t,n){return this.table.deprecationAdvisor.checkMsg(t,n)}deprecationMsg(t){return this.table.deprecationAdvisor.msg(t)}module(t){return this.table.module(t)}},Yn=class{static elVisible(t){return!(t.offsetWidth<=0&&t.offsetHeight<=0)}static elOffset(t){var n=t.getBoundingClientRect();return{top:n.top+window.pageYOffset-document.documentElement.clientTop,left:n.left+window.pageXOffset-document.documentElement.clientLeft}}static retrieveNestedData(t,n,i){var r=t?n.split(t):[n],o=r.length,a;for(let s=0;s<o&&(i=i[r[s]],a=i,!!i);s++);return a}static deepClone(t,n,i=[]){var r={}.__proto__,o=[].__proto__;n||(n=Object.assign(Array.isArray(t)?[]:{},t));for(var a in t){let s=t[a],u,f;s!=null&&typeof s=="object"&&(s.__proto__===r||s.__proto__===o)&&(u=i.findIndex(c=>c.subject===s),u>-1?n[a]=i[u].copy:(f=Object.assign(Array.isArray(s)?[]:{},s),i.unshift({subject:s,copy:f}),n[a]=this.deepClone(s,f,i)))}return n}},jw=class F0 extends cs{constructor(t,n,i){super(t),this.element=n,this.container=this._lookupContainer(),this.parent=i,this.reversedX=!1,this.childPopup=null,this.blurable=!1,this.blurCallback=null,this.blurEventsBound=!1,this.renderedCallback=null,this.visible=!1,this.hideable=!0,this.element.classList.add("tabulator-popup-container"),this.blurEvent=this.hide.bind(this,!1),this.escEvent=this._escapeCheck.bind(this),this.destroyBinding=this.tableDestroyed.bind(this),this.destroyed=!1}tableDestroyed(){this.destroyed=!0,this.hide(!0)}_lookupContainer(){var t=this.table.options.popupContainer;return typeof t=="string"?(t=document.querySelector(t),t||console.warn("Menu Error - no container element found matching selector:",this.table.options.popupContainer,"(defaulting to document body)")):t===!0&&(t=this.table.element),t&&!this._checkContainerIsParent(t)&&(t=!1,console.warn("Menu Error - container element does not contain this table:",this.table.options.popupContainer,"(defaulting to document body)")),t||(t=document.body),t}_checkContainerIsParent(t,n=this.table.element){return t===n?!0:n.parentNode?this._checkContainerIsParent(t,n.parentNode):!1}renderCallback(t){this.renderedCallback=t}containerEventCoords(t){var n=!(t instanceof MouseEvent),i=n?t.touches[0].pageX:t.pageX,r=n?t.touches[0].pageY:t.pageY;if(this.container!==document.body){let o=Yn.elOffset(this.container);i-=o.left,r-=o.top}return{x:i,y:r}}elementPositionCoords(t,n="right"){var i=Yn.elOffset(t),r,o,a;switch(this.container!==document.body&&(r=Yn.elOffset(this.container),i.left-=r.left,i.top-=r.top),n){case"right":o=i.left+t.offsetWidth,a=i.top-1;break;case"bottom":o=i.left,a=i.top+t.offsetHeight;break;case"left":o=i.left,a=i.top-1;break;case"top":o=i.left,a=i.top;break;case"center":o=i.left+t.offsetWidth/2,a=i.top+t.offsetHeight/2;break}return{x:o,y:a,offset:i}}show(t,n){var i,r,o,a,s;return this.destroyed||this.table.destroyed?this:(t instanceof HTMLElement?(o=t,s=this.elementPositionCoords(t,n),a=s.offset,i=s.x,r=s.y):typeof t=="number"?(a={top:0,left:0},i=t,r=n):(s=this.containerEventCoords(t),i=s.x,r=s.y,this.reversedX=!1),this.element.style.top=r+"px",this.element.style.left=i+"px",this.container.appendChild(this.element),typeof this.renderedCallback=="function"&&this.renderedCallback(),this._fitToScreen(i,r,o,a,n),this.visible=!0,this.subscribe("table-destroy",this.destroyBinding),this.element.addEventListener("mousedown",u=>{u.stopPropagation()}),this)}_fitToScreen(t,n,i,r,o){var a=this.container===document.body?document.documentElement.scrollTop:this.container.scrollTop;(t+this.element.offsetWidth>=this.container.offsetWidth||this.reversedX)&&(this.element.style.left="",i?this.element.style.right=this.container.offsetWidth-r.left+"px":this.element.style.right=this.container.offsetWidth-t+"px",this.reversedX=!0);let s=Math.max(this.container.offsetHeight,a?this.container.scrollHeight:0);if(n+this.element.offsetHeight>s)if(i)switch(o){case"bottom":this.element.style.top=parseInt(this.element.style.top)-this.element.offsetHeight-i.offsetHeight-1+"px";break;default:this.element.style.top=parseInt(this.element.style.top)-this.element.offsetHeight+i.offsetHeight+1+"px"}else this.element.style.height=s+"px"}isVisible(){return this.visible}hideOnBlur(t){return this.blurable=!0,this.visible&&(setTimeout(()=>{this.visible&&(this.table.rowManager.element.addEventListener("scroll",this.blurEvent),this.subscribe("cell-editing",this.blurEvent),document.body.addEventListener("click",this.blurEvent),document.body.addEventListener("contextmenu",this.blurEvent),document.body.addEventListener("mousedown",this.blurEvent),window.addEventListener("resize",this.blurEvent),document.body.addEventListener("keydown",this.escEvent),this.blurEventsBound=!0)},100),this.blurCallback=t),this}_escapeCheck(t){t.keyCode==27&&this.hide()}blockHide(){this.hideable=!1}restoreHide(){this.hideable=!0}hide(t=!1){return this.visible&&this.hideable&&(this.blurable&&this.blurEventsBound&&(document.body.removeEventListener("keydown",this.escEvent),document.body.removeEventListener("click",this.blurEvent),document.body.removeEventListener("contextmenu",this.blurEvent),document.body.removeEventListener("mousedown",this.blurEvent),window.removeEventListener("resize",this.blurEvent),this.table.rowManager.element.removeEventListener("scroll",this.blurEvent),this.unsubscribe("cell-editing",this.blurEvent),this.blurEventsBound=!1),this.childPopup&&this.childPopup.hide(),this.parent&&(this.parent.childPopup=null),this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.visible=!1,this.blurCallback&&!t&&this.blurCallback(),this.unsubscribe("table-destroy",this.destroyBinding)),this}child(t){return this.childPopup&&this.childPopup.hide(),this.childPopup=new F0(this.table,t,this),this.childPopup}},Vl=class extends cs{constructor(t,n){super(t),this._handler=null}initialize(){}registerTableOption(t,n){this.table.optionsList.register(t,n)}registerColumnOption(t,n){this.table.columnManager.optionsList.register(t,n)}registerTableFunction(t,n){typeof this.table[t]>"u"?this.table[t]=(...i)=>(this.table.initGuard(t),n(...i)):console.warn("Unable to bind table function, name already in use",t)}registerComponentFunction(t,n,i){return this.table.componentFunctionBinder.bind(t,n,i)}registerDataHandler(t,n){this.table.rowManager.registerDataPipelineHandler(t,n),this._handler=t}registerDisplayHandler(t,n){this.table.rowManager.registerDisplayPipelineHandler(t,n),this._handler=t}displayRows(t){var n=this.table.rowManager.displayRows.length-1,i;if(this._handler&&(i=this.table.rowManager.displayPipeline.findIndex(r=>r.handler===this._handler),i>-1&&(n=i)),t&&(n=n+t),this._handler)return n>-1?this.table.rowManager.getDisplayRows(n):this.activeRows()}activeRows(){return this.table.rowManager.activeRows}refreshData(t,n){n||(n=this._handler),n&&this.table.rowManager.refreshActiveData(n,!1,t)}footerAppend(t){return this.table.footerManager.append(t)}footerPrepend(t){return this.table.footerManager.prepend(t)}footerRemove(t){return this.table.footerManager.remove(t)}popup(t,n){return new jw(this.table,t,n)}alert(t,n){return this.table.alertManager.alert(t,n)}clearAlert(){return this.table.alertManager.clear()}};var Af=class{constructor(t){return this._cell=t,new Proxy(this,{get:function(n,i,r){return typeof n[i]<"u"?n[i]:n._cell.table.componentFunctionBinder.handle("cell",n._cell,i)}})}getValue(){return this._cell.getValue()}getOldValue(){return this._cell.getOldValue()}getInitialValue(){return this._cell.initialValue}getElement(){return this._cell.getElement()}getRow(){return this._cell.row.getComponent()}getData(t){return this._cell.row.getData(t)}getType(){return"cell"}getField(){return this._cell.column.getField()}getColumn(){return this._cell.column.getComponent()}setValue(t,n){typeof n>"u"&&(n=!0),this._cell.setValue(t,n)}restoreOldValue(){this._cell.setValueActual(this._cell.getOldValue())}restoreInitialValue(){this._cell.setValueActual(this._cell.initialValue)}checkHeight(){this._cell.checkHeight()}getTable(){return this._cell.table}_getSelf(){return this._cell}},If=class extends cs{constructor(t,n){super(t.table),this.table=t.table,this.column=t,this.row=n,this.element=null,this.value=null,this.initialValue,this.oldValue=null,this.modules={},this.height=null,this.width=null,this.minWidth=null,this.component=null,this.loaded=!1,this.build()}build(){this.generateElement(),this.setWidth(),this._configureCell(),this.setValueActual(this.column.getFieldValue(this.row.data)),this.initialValue=this.value}generateElement(){this.element=document.createElement("div"),this.element.className="tabulator-cell",this.element.setAttribute("role","gridcell"),this.column.isRowHeader&&this.element.classList.add("tabulator-row-header")}_configureCell(){var t=this.element,n=this.column.getField(),i={top:"flex-start",bottom:"flex-end",middle:"center"},r={left:"flex-start",right:"flex-end",center:"center"};if(t.style.textAlign=this.column.hozAlign,this.column.vertAlign&&(t.style.display="inline-flex",t.style.alignItems=i[this.column.vertAlign]||"",this.column.hozAlign&&(t.style.justifyContent=r[this.column.hozAlign]||"")),n&&t.setAttribute("tabulator-field",n),this.column.definition.cssClass){var o=this.column.definition.cssClass.split(" ");o.forEach(a=>{t.classList.add(a)})}this.dispatch("cell-init",this),this.column.visible||this.hide()}_generateContents(){var t;switch(t=this.chain("cell-format",this,null,()=>this.element.innerHTML=this.value),typeof t){case"object":if(t instanceof Node){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.appendChild(t)}else this.element.innerHTML="",t!=null&&console.warn("Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",t);break;case"undefined":this.element.innerHTML="";break;default:this.element.innerHTML=t}}cellRendered(){this.dispatch("cell-rendered",this)}getElement(t){return this.loaded||(this.loaded=!0,t||this.layoutElement()),this.element}getValue(){return this.value}getOldValue(){return this.oldValue}setValue(t,n,i){var r=this.setValueProcessData(t,n,i);r&&(this.dispatch("cell-value-updated",this),this.cellRendered(),this.column.definition.cellEdited&&this.column.definition.cellEdited.call(this.table,this.getComponent()),this.dispatchExternal("cellEdited",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()))}setValueProcessData(t,n,i){var r=!1;return(this.value!==t||i)&&(r=!0,n&&(t=this.chain("cell-value-changing",[this,t],null,t))),this.setValueActual(t),r&&this.dispatch("cell-value-changed",this),r}setValueActual(t){this.oldValue=this.value,this.value=t,this.dispatch("cell-value-save-before",this),this.column.setFieldValue(this.row.data,t),this.dispatch("cell-value-save-after",this),this.loaded&&this.layoutElement()}layoutElement(){this._generateContents(),this.dispatch("cell-layout",this)}setWidth(){this.width=this.column.width,this.element.style.width=this.column.widthStyled}clearWidth(){this.width="",this.element.style.width=""}getWidth(){return this.width||this.element.offsetWidth}setMinWidth(){this.minWidth=this.column.minWidth,this.element.style.minWidth=this.column.minWidthStyled}setMaxWidth(){this.maxWidth=this.column.maxWidth,this.element.style.maxWidth=this.column.maxWidthStyled}checkHeight(){this.row.reinitializeHeight()}clearHeight(){this.element.style.height="",this.height=null,this.dispatch("cell-height",this,"")}setHeight(){this.height=this.row.height,this.element.style.height=this.row.heightStyled,this.dispatch("cell-height",this,this.row.heightStyled)}getHeight(){return this.height||this.element.offsetHeight}show(){this.element.style.display=this.column.vertAlign?"inline-flex":""}hide(){this.element.style.display="none"}delete(){this.dispatch("cell-delete",this),!this.table.rowManager.redrawBlock&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.column.deleteCell(this),this.row.deleteCell(this),this.calcs={}}getIndex(){return this.row.getCellIndex(this)}getComponent(){return this.component||(this.component=new Af(this)),this.component}},ch=class{constructor(t){return this._column=t,this.type="ColumnComponent",new Proxy(this,{get:function(n,i,r){return typeof n[i]<"u"?n[i]:n._column.table.componentFunctionBinder.handle("column",n._column,i)}})}getElement(){return this._column.getElement()}getDefinition(){return this._column.getDefinition()}getField(){return this._column.getField()}getTitleDownload(){return this._column.getTitleDownload()}getCells(){var t=[];return this._column.cells.forEach(function(n){t.push(n.getComponent())}),t}isVisible(){return this._column.visible}show(){this._column.isGroup?this._column.columns.forEach(function(t){t.show()}):this._column.show()}hide(){this._column.isGroup?this._column.columns.forEach(function(t){t.hide()}):this._column.hide()}toggle(){this._column.visible?this.hide():this.show()}delete(){return this._column.delete()}getSubColumns(){var t=[];return this._column.columns.length&&this._column.columns.forEach(function(n){t.push(n.getComponent())}),t}getParentColumn(){return this._column.getParentComponent()}_getSelf(){return this._column}scrollTo(t,n){return this._column.table.columnManager.scrollToColumn(this._column,t,n)}getTable(){return this._column.table}move(t,n){var i=this._column.table.columnManager.findColumn(t);i?this._column.table.columnManager.moveColumn(this._column,i,n):console.warn("Move Error - No matching column found:",i)}getNextColumn(){var t=this._column.nextColumn();return t?t.getComponent():!1}getPrevColumn(){var t=this._column.prevColumn();return t?t.getComponent():!1}updateDefinition(t){return this._column.updateDefinition(t)}getWidth(){return this._column.getWidth()}setWidth(t){var n;return t===!0?n=this._column.reinitializeWidth(!0):n=this._column.setWidth(t),this._column.table.columnManager.rerenderColumns(!0),n}},z0={title:void 0,field:void 0,columns:void 0,visible:void 0,hozAlign:void 0,vertAlign:void 0,width:void 0,minWidth:40,maxWidth:void 0,maxInitialWidth:void 0,cssClass:void 0,variableHeight:void 0,headerVertical:void 0,headerHozAlign:void 0,headerWordWrap:!1,editableTitle:void 0},Ul=class e extends cs{static defaultOptionList=z0;constructor(t,n,i){super(n.table),this.definition=t,this.parent=n,this.type="column",this.columns=[],this.cells=[],this.isGroup=!1,this.isRowHeader=i,this.element=this.createElement(),this.contentElement=!1,this.titleHolderElement=!1,this.titleElement=!1,this.groupElement=this.createGroupElement(),this.hozAlign="",this.vertAlign="",this.field="",this.fieldStructure="",this.getFieldValue="",this.setFieldValue="",this.titleDownload=null,this.titleFormatterRendered=!1,this.mapDefinitions(),this.setField(this.definition.field),this.modules={},this.width=null,this.widthStyled="",this.maxWidth=null,this.maxWidthStyled="",this.maxInitialWidth=null,this.minWidth=null,this.minWidthStyled="",this.widthFixed=!1,this.visible=!0,this.component=null,this.definition.columns?(this.isGroup=!0,this.definition.columns.forEach((r,o)=>{var a=new e(r,this);this.attachColumn(a)}),this.checkColumnVisibility()):n.registerColumnField(this),this._initialize()}createElement(){var t=document.createElement("div");switch(t.classList.add("tabulator-col"),t.setAttribute("role","columnheader"),t.setAttribute("aria-sort","none"),this.isRowHeader&&t.classList.add("tabulator-row-header"),this.table.options.columnHeaderVertAlign){case"middle":t.style.justifyContent="center";break;case"bottom":t.style.justifyContent="flex-end";break}return t}createGroupElement(){var t=document.createElement("div");return t.classList.add("tabulator-col-group-cols"),t}mapDefinitions(){var t=this.table.options.columnDefaults;if(t)for(let n in t)typeof this.definition[n]>"u"&&(this.definition[n]=t[n]);this.definition=this.table.columnManager.optionsList.generate(e.defaultOptionList,this.definition)}checkDefinition(){Object.keys(this.definition).forEach(t=>{e.defaultOptionList.indexOf(t)===-1&&console.warn("Invalid column definition option in '"+(this.field||this.definition.title)+"' column:",t)})}setField(t){this.field=t,this.fieldStructure=t?this.table.options.nestedFieldSeparator?t.split(this.table.options.nestedFieldSeparator):[t]:[],this.getFieldValue=this.fieldStructure.length>1?this._getNestedData:this._getFlatData,this.setFieldValue=this.fieldStructure.length>1?this._setNestedData:this._setFlatData}registerColumnPosition(t){this.parent.registerColumnPosition(t)}registerColumnField(t){this.parent.registerColumnField(t)}reRegisterPosition(){this.isGroup?this.columns.forEach(function(t){t.reRegisterPosition()}):this.registerColumnPosition(this)}_initialize(){for(var t=this.definition;this.element.firstChild;)this.element.removeChild(this.element.firstChild);t.headerVertical&&(this.element.classList.add("tabulator-col-vertical"),t.headerVertical==="flip"&&this.element.classList.add("tabulator-col-vertical-flip")),this.contentElement=this._buildColumnHeaderContent(),this.element.appendChild(this.contentElement),this.isGroup?this._buildGroupHeader():this._buildColumnHeader(),this.dispatch("column-init",this)}_buildColumnHeader(){var t=this.definition;if(this.dispatch("column-layout",this),typeof t.visible<"u"&&(t.visible?this.show(!0):this.hide(!0)),t.cssClass){var n=t.cssClass.split(" ");n.forEach(i=>{this.element.classList.add(i)})}t.field&&this.element.setAttribute("tabulator-field",t.field),this.setMinWidth(parseInt(t.minWidth)),t.maxInitialWidth&&(this.maxInitialWidth=parseInt(t.maxInitialWidth)),t.maxWidth&&this.setMaxWidth(parseInt(t.maxWidth)),this.reinitializeWidth(),this.hozAlign=this.definition.hozAlign,this.vertAlign=this.definition.vertAlign,this.titleElement.style.textAlign=this.definition.headerHozAlign}_buildColumnHeaderContent(){var t=document.createElement("div");return t.classList.add("tabulator-col-content"),this.titleHolderElement=document.createElement("div"),this.titleHolderElement.classList.add("tabulator-col-title-holder"),t.appendChild(this.titleHolderElement),this.titleElement=this._buildColumnHeaderTitle(),this.titleHolderElement.appendChild(this.titleElement),t}_buildColumnHeaderTitle(){var t=this.definition,n=document.createElement("div");if(n.classList.add("tabulator-col-title"),t.headerWordWrap&&n.classList.add("tabulator-col-title-wrap"),t.editableTitle){var i=document.createElement("input");i.classList.add("tabulator-title-editor"),i.addEventListener("click",r=>{r.stopPropagation(),i.focus()}),i.addEventListener("mousedown",r=>{r.stopPropagation()}),i.addEventListener("change",()=>{t.title=i.value,this.dispatchExternal("columnTitleChanged",this.getComponent())}),n.appendChild(i),t.field?this.langBind("columns|"+t.field,r=>{i.value=r||t.title||"&nbsp;"}):i.value=t.title||"&nbsp;"}else t.field?this.langBind("columns|"+t.field,r=>{this._formatColumnHeaderTitle(n,r||t.title||"&nbsp;")}):this._formatColumnHeaderTitle(n,t.title||"&nbsp;");return n}_formatColumnHeaderTitle(t,n){var i=this.chain("column-format",[this,n,t],null,()=>n);switch(typeof i){case"object":i instanceof Node?t.appendChild(i):(t.innerHTML="",console.warn("Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",i));break;case"undefined":t.innerHTML="";break;default:t.innerHTML=i}}_buildGroupHeader(){if(this.element.classList.add("tabulator-col-group"),this.element.setAttribute("role","columngroup"),this.element.setAttribute("aria-title",this.definition.title),this.definition.cssClass){var t=this.definition.cssClass.split(" ");t.forEach(n=>{this.element.classList.add(n)})}this.titleElement.style.textAlign=this.definition.headerHozAlign,this.element.appendChild(this.groupElement)}_getFlatData(t){return t[this.field]}_getNestedData(t){var n=t,i=this.fieldStructure,r=i.length,o;for(let a=0;a<r&&(n=n[i[a]],o=n,!!n);a++);return o}_setFlatData(t,n){this.field&&(t[this.field]=n)}_setNestedData(t,n){var i=t,r=this.fieldStructure,o=r.length;for(let a=0;a<o;a++)if(a==o-1)i[r[a]]=n;else{if(!i[r[a]])if(typeof n<"u")i[r[a]]={};else break;i=i[r[a]]}}attachColumn(t){this.groupElement?(this.columns.push(t),this.groupElement.appendChild(t.getElement()),t.columnRendered()):console.warn("Column Warning - Column being attached to another column instead of column group")}verticalAlign(t,n){var i=this.parent.isGroup?this.parent.getGroupElement().clientHeight:n||this.parent.getHeadersElement().clientHeight;this.element.style.height=i+"px",this.dispatch("column-height",this,this.element.style.height),this.isGroup&&(this.groupElement.style.minHeight=i-this.contentElement.offsetHeight+"px"),this.columns.forEach(function(r){r.verticalAlign(t)})}clearVerticalAlign(){this.element.style.paddingTop="",this.element.style.height="",this.element.style.minHeight="",this.groupElement.style.minHeight="",this.columns.forEach(function(t){t.clearVerticalAlign()}),this.dispatch("column-height",this,"")}getElement(){return this.element}getGroupElement(){return this.groupElement}getField(){return this.field}getTitleDownload(){return this.titleDownload}getFirstColumn(){return this.isGroup?this.columns.length?this.columns[0].getFirstColumn():!1:this}getLastColumn(){return this.isGroup?this.columns.length?this.columns[this.columns.length-1].getLastColumn():!1:this}getColumns(t){var n=[];return t?this.columns.forEach(i=>{n.push(i),n=n.concat(i.getColumns(!0))}):n=this.columns,n}getCells(){return this.cells}getTopColumn(){return this.parent.isGroup?this.parent.getTopColumn():this}getDefinition(t){var n=[];return this.isGroup&&t&&(this.columns.forEach(function(i){n.push(i.getDefinition(!0))}),this.definition.columns=n),this.definition}checkColumnVisibility(){var t=!1;this.columns.forEach(function(n){n.visible&&(t=!0)}),t?(this.show(),this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1)):this.hide()}show(t,n){this.visible||(this.visible=!0,this.element.style.display="",this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(i){i.show()}),!this.isGroup&&this.width===null&&this.reinitializeWidth(),this.table.columnManager.verticalAlignHeaders(),this.dispatch("column-show",this,n),t||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!0),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.rerenderColumns())}hide(t,n){this.visible&&(this.visible=!1,this.element.style.display="none",this.table.columnManager.verticalAlignHeaders(),this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(i){i.hide()}),this.dispatch("column-hide",this,n),t||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.rerenderColumns())}matchChildWidths(){var t=0;this.contentElement&&this.columns.length&&(this.columns.forEach(function(n){n.visible&&(t+=n.getWidth())}),this.contentElement.style.maxWidth=t-1+"px",this.parent.isGroup&&this.parent.matchChildWidths())}removeChild(t){var n=this.columns.indexOf(t);n>-1&&this.columns.splice(n,1),this.columns.length||this.delete()}setWidth(t){this.widthFixed=!0,this.setWidthActual(t)}setWidthActual(t){isNaN(t)&&(t=Math.floor(this.table.element.clientWidth/100*parseInt(t))),t=Math.max(this.minWidth,t),this.maxWidth&&(t=Math.min(this.maxWidth,t)),this.width=t,this.widthStyled=t?t+"px":"",this.element.style.width=this.widthStyled,this.isGroup||this.cells.forEach(function(n){n.setWidth()}),this.parent.isGroup&&this.parent.matchChildWidths(),this.dispatch("column-width",this),this.subscribedExternal("columnWidth")&&this.dispatchExternal("columnWidth",this.getComponent())}checkCellHeights(){var t=[];this.cells.forEach(function(n){n.row.heightInitialized&&(n.row.getElement().offsetParent!==null?(t.push(n.row),n.row.clearCellHeight()):n.row.heightInitialized=!1)}),t.forEach(function(n){n.calcHeight()}),t.forEach(function(n){n.setCellHeight()})}getWidth(){var t=0;return this.isGroup?this.columns.forEach(function(n){n.visible&&(t+=n.getWidth())}):t=this.width,t}getLeftOffset(){var t=this.element.offsetLeft;return this.parent.isGroup&&(t+=this.parent.getLeftOffset()),t}getHeight(){return Math.ceil(this.element.getBoundingClientRect().height)}setMinWidth(t){this.maxWidth&&t>this.maxWidth&&(t=this.maxWidth,console.warn("the minWidth ("+t+"px) for column '"+this.field+"' cannot be bigger that its maxWidth ("+this.maxWidthStyled+")")),this.minWidth=t,this.minWidthStyled=t?t+"px":"",this.element.style.minWidth=this.minWidthStyled,this.cells.forEach(function(n){n.setMinWidth()})}setMaxWidth(t){this.minWidth&&t<this.minWidth&&(t=this.minWidth,console.warn("the maxWidth ("+t+"px) for column '"+this.field+"' cannot be smaller that its minWidth ("+this.minWidthStyled+")")),this.maxWidth=t,this.maxWidthStyled=t?t+"px":"",this.element.style.maxWidth=this.maxWidthStyled,this.cells.forEach(function(n){n.setMaxWidth()})}delete(){return new Promise((t,n)=>{this.isGroup&&this.columns.forEach(function(r){r.delete()}),this.dispatch("column-delete",this);var i=this.cells.length;for(let r=0;r<i;r++)this.cells[0].delete();this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.contentElement=!1,this.titleElement=!1,this.groupElement=!1,this.parent.isGroup&&this.parent.removeChild(this),this.table.columnManager.deregisterColumn(this),this.table.columnManager.rerenderColumns(!0),this.dispatch("column-deleted",this),t()})}columnRendered(){this.titleFormatterRendered&&this.titleFormatterRendered(),this.dispatch("column-rendered",this)}generateCell(t){var n=new If(this,t);return this.cells.push(n),n}nextColumn(){var t=this.table.columnManager.findColumnIndex(this);return t>-1?this._nextVisibleColumn(t+1):!1}_nextVisibleColumn(t){var n=this.table.columnManager.getColumnByIndex(t);return!n||n.visible?n:this._nextVisibleColumn(t+1)}prevColumn(){var t=this.table.columnManager.findColumnIndex(this);return t>-1?this._prevVisibleColumn(t-1):!1}_prevVisibleColumn(t){var n=this.table.columnManager.getColumnByIndex(t);return!n||n.visible?n:this._prevVisibleColumn(t-1)}reinitializeWidth(t){this.widthFixed=!1,typeof this.definition.width<"u"&&!t&&this.setWidth(this.definition.width),this.dispatch("column-width-fit-before",this),this.fitToData(t),this.dispatch("column-width-fit-after",this)}fitToData(t){if(!this.isGroup){this.widthFixed||(this.element.style.width="",this.cells.forEach(r=>{r.clearWidth()}));var n=this.element.offsetWidth;if((!this.width||!this.widthFixed)&&(this.cells.forEach(r=>{var o=r.getWidth();o>n&&(n=o)}),n)){var i=n+1;this.maxInitialWidth&&!t&&(i=Math.min(i,this.maxInitialWidth)),this.setWidthActual(i)}}}updateDefinition(t){var n;return this.isGroup||this.parent.isGroup?(console.error("Column Update Error - The updateDefinition function is only available on ungrouped columns"),Promise.reject("Column Update Error - The updateDefinition function is only available on columns, not column groups")):(n=Object.assign({},this.getDefinition()),n=Object.assign(n,t),this.table.columnManager.addColumn(n,!1,this).then(i=>(n.field==this.field&&(this.field=!1),this.delete().then(()=>i.getComponent()))))}deleteCell(t){var n=this.cells.indexOf(t);n>-1&&this.cells.splice(n,1)}getComponent(){return this.component||(this.component=new ch(this)),this.component}getPosition(){return this.table.columnManager.getVisibleColumnsByIndex().indexOf(this)+1}getParentComponent(){return this.parent instanceof e?this.parent.getComponent():!1}},fh=class{constructor(t){return this._row=t,new Proxy(this,{get:function(n,i,r){return typeof n[i]<"u"?n[i]:n._row.table.componentFunctionBinder.handle("row",n._row,i)}})}getData(t){return this._row.getData(t)}getElement(){return this._row.getElement()}getCells(){var t=[];return this._row.getCells().forEach(function(n){t.push(n.getComponent())}),t}getCell(t){var n=this._row.getCell(t);return n?n.getComponent():!1}getIndex(){return this._row.getData("data")[this._row.table.options.index]}getPosition(){return this._row.getPosition()}watchPosition(t){return this._row.watchPosition(t)}delete(){return this._row.delete()}scrollTo(t,n){return this._row.table.rowManager.scrollToRow(this._row,t,n)}move(t,n){this._row.moveToRow(t,n)}update(t){return this._row.updateData(t)}normalizeHeight(){this._row.normalizeHeight(!0)}_getSelf(){return this._row}reformat(){return this._row.reinitialize()}getTable(){return this._row.table}getNextRow(){var t=this._row.nextRow();return t&&t.getComponent()}getPrevRow(){var t=this._row.prevRow();return t&&t.getComponent()}},Io=class extends cs{constructor(t,n,i="row"){super(n.table),this.parent=n,this.data={},this.type=i,this.element=!1,this.modules={},this.cells=[],this.height=0,this.heightStyled="",this.manualHeight=!1,this.outerHeight=0,this.initialized=!1,this.heightInitialized=!1,this.position=0,this.positionWatchers=[],this.component=null,this.created=!1,this.setData(t)}create(){this.created||(this.created=!0,this.generateElement())}createElement(){var t=document.createElement("div");t.classList.add("tabulator-row"),t.setAttribute("role","row"),this.element=t}getElement(){return this.create(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}generateElement(){this.createElement(),this.dispatch("row-init",this)}generateCells(){this.cells=this.table.columnManager.generateCells(this)}initialize(t,n){if(this.create(),!this.initialized||t){for(this.deleteCells();this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.dispatch("row-layout-before",this),this.generateCells(),this.initialized=!0,this.table.columnManager.renderer.renderRowCells(this,n),t&&this.normalizeHeight(),this.dispatch("row-layout",this),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent()),this.dispatch("row-layout-after",this)}else this.table.columnManager.renderer.rerenderRowCells(this,n)}rendered(){this.cells.forEach(t=>{t.cellRendered()})}reinitializeHeight(){this.heightInitialized=!1,this.element&&this.element.offsetParent!==null&&this.normalizeHeight(!0)}deinitialize(){this.initialized=!1}deinitializeHeight(){this.heightInitialized=!1}reinitialize(t){this.initialized=!1,this.heightInitialized=!1,this.manualHeight||(this.height=0,this.heightStyled=""),this.element&&this.element.offsetParent!==null&&this.initialize(!0),this.dispatch("row-relayout",this)}calcHeight(t){var n=0,i=0;this.table.options.rowHeight?this.height=this.table.options.rowHeight:(i=this.calcMinHeight(),n=this.calcMaxHeight(),t?this.height=Math.max(n,i):this.height=this.manualHeight?this.height:Math.max(n,i)),this.heightStyled=this.height?this.height+"px":"",this.outerHeight=this.element.offsetHeight}calcMinHeight(){return this.table.options.resizableRows?this.element.clientHeight:0}calcMaxHeight(){var t=0;return this.cells.forEach(function(n){var i=n.getHeight();i>t&&(t=i)}),t}setCellHeight(){this.cells.forEach(function(t){t.setHeight()}),this.heightInitialized=!0}clearCellHeight(){this.cells.forEach(function(t){t.clearHeight()})}normalizeHeight(t){t&&!this.table.options.rowHeight&&this.clearCellHeight(),this.calcHeight(t),this.setCellHeight()}setHeight(t,n){(this.height!=t||n)&&(this.manualHeight=!0,this.height=t,this.heightStyled=t?t+"px":"",this.setCellHeight(),this.outerHeight=this.element.offsetHeight,this.subscribedExternal("rowHeight")&&this.dispatchExternal("rowHeight",this.getComponent()))}getHeight(){return this.outerHeight}getWidth(){return this.element.offsetWidth}deleteCell(t){var n=this.cells.indexOf(t);n>-1&&this.cells.splice(n,1)}setData(t){this.data=this.chain("row-data-init-before",[this,t],void 0,t),this.dispatch("row-data-init-after",this)}updateData(t){var n=this.element&&Yn.elVisible(this.element),i={},r;return new Promise((o,a)=>{typeof t=="string"&&(t=JSON.parse(t)),this.dispatch("row-data-save-before",this),this.subscribed("row-data-changing")&&(i=Object.assign(i,this.data),i=Object.assign(i,t)),r=this.chain("row-data-changing",[this,i,t],null,t);for(let s in r)this.data[s]=r[s];this.dispatch("row-data-save-after",this);for(let s in t)this.table.columnManager.getColumnsByFieldRoot(s).forEach(f=>{let c=this.getCell(f.getField());if(c){let d=f.getFieldValue(r);c.getValue()!==d&&(c.setValueProcessData(d),n&&c.cellRendered())}});n?(this.normalizeHeight(!0),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent())):(this.initialized=!1,this.height=0,this.heightStyled=""),this.dispatch("row-data-changed",this,n,t),this.dispatchExternal("rowUpdated",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),o()})}getData(t){return t?this.chain("row-data-retrieve",[this,t],null,this.data):this.data}getCell(t){var n=!1;return t=this.table.columnManager.findColumn(t),!this.initialized&&this.cells.length===0&&this.generateCells(),n=this.cells.find(function(i){return i.column===t}),n}getCellIndex(t){return this.cells.findIndex(function(n){return n===t})}findCell(t){return this.cells.find(n=>n.element===t)}getCells(){return!this.initialized&&this.cells.length===0&&this.generateCells(),this.cells}nextRow(){var t=this.table.rowManager.nextDisplayRow(this,!0);return t||!1}prevRow(){var t=this.table.rowManager.prevDisplayRow(this,!0);return t||!1}moveToRow(t,n){var i=this.table.rowManager.findRow(t);i?(this.table.rowManager.moveRowActual(this,i,!n),this.table.rowManager.refreshActiveData("display",!1,!0)):console.warn("Move Error - No matching row found:",t)}delete(){return this.dispatch("row-delete",this),this.deleteActual(),Promise.resolve()}deleteActual(t){this.detachModules(),this.table.rowManager.deleteRow(this,t),this.deleteCells(),this.initialized=!1,this.heightInitialized=!1,this.element=!1,this.dispatch("row-deleted",this)}detachModules(){this.dispatch("row-deleting",this)}deleteCells(){var t=this.cells.length;for(let n=0;n<t;n++)this.cells[0].delete()}wipe(){if(this.detachModules(),this.deleteCells(),this.element){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.parentNode&&this.element.parentNode.removeChild(this.element)}this.element=!1,this.modules={}}isDisplayed(){return this.table.rowManager.getDisplayRows().includes(this)}getPosition(){return this.isDisplayed()?this.position:!1}setPosition(t){t!=this.position&&(this.position=t,this.positionWatchers.forEach(n=>{n(this.position)}))}watchPosition(t){this.positionWatchers.push(t),t(this.position)}getGroup(){return this.modules.group||!1}getComponent(){return this.component||(this.component=new fh(this)),this.component}};var Hw={debugEventsExternal:!1,debugEventsInternal:!1,debugInvalidOptions:!0,debugInvalidComponentFuncs:!0,debugInitialization:!0,debugDeprecation:!0,height:!1,minHeight:!1,maxHeight:!1,columnHeaderVertAlign:"top",popupContainer:!1,columns:[],columnDefaults:{},rowHeader:!1,data:!1,autoColumns:!1,autoColumnsDefinitions:!1,nestedFieldSeparator:".",footerElement:!1,index:"id",textDirection:"auto",addRowPos:"bottom",headerVisible:!0,renderVertical:"virtual",renderHorizontal:"basic",renderVerticalBuffer:0,scrollToRowPosition:"top",scrollToRowIfVisible:!0,scrollToColumnPosition:"left",scrollToColumnIfVisible:!0,rowFormatter:!1,rowFormatterPrint:null,rowFormatterClipboard:null,rowFormatterHtmlOutput:null,rowHeight:null,placeholder:!1,dataLoader:!0,dataLoaderLoading:!1,dataLoaderError:!1,dataLoaderErrorTimeout:3e3,dataSendParams:{},dataReceiveParams:{}},dh=class{constructor(t,n,i={}){this.table=t,this.msgType=n,this.registeredDefaults=Object.assign({},i)}register(t,n){this.registeredDefaults[t]=n}generate(t,n={}){var i=Object.assign({},this.registeredDefaults),r=this.table.options.debugInvalidOptions||n.debugInvalidOptions===!0;Object.assign(i,t);for(let o in n)i.hasOwnProperty(o)||(r&&console.warn("Invalid "+this.msgType+" option:",o),i[o]=n.key);for(let o in i)o in n?i[o]=n[o]:Array.isArray(i[o])?i[o]=Object.assign([],i[o]):typeof i[o]=="object"&&i[o]!==null?i[o]=Object.assign({},i[o]):typeof i[o]>"u"&&delete i[o];return i}},Ya=class extends cs{constructor(t){super(t),this.elementVertical=t.rowManager.element,this.elementHorizontal=t.columnManager.element,this.tableElement=t.rowManager.tableElement,this.verticalFillMode="fit"}initialize(){}clearRows(){}clearColumns(){}reinitializeColumnWidths(t){}renderRows(){}renderColumns(){}rerenderRows(t){t&&t()}rerenderColumns(t,n){}renderRowCells(t){}rerenderRowCells(t,n){}scrollColumns(t,n){}scrollRows(t,n){}resize(){}scrollToRow(t){}scrollToRowNearestTop(t){}visibleRows(t){return[]}rows(){return this.table.rowManager.getDisplayRows()}styleRow(t,n){var i=t.getElement();n%2?(i.classList.add("tabulator-row-even"),i.classList.remove("tabulator-row-odd")):(i.classList.add("tabulator-row-odd"),i.classList.remove("tabulator-row-even"))}clear(){this.clearRows(),this.clearColumns()}render(){this.renderRows(),this.renderColumns()}rerender(t){this.rerenderRows(),this.rerenderColumns()}scrollToRowPosition(t,n,i){var r=this.rows().indexOf(t),o=t.getElement(),a=0;return new Promise((s,u)=>{if(r>-1){if(typeof i>"u"&&(i=this.table.options.scrollToRowIfVisible),!i&&Yn.elVisible(o)&&(a=Yn.elOffset(o).top-Yn.elOffset(this.elementVertical).top,a>0&&a<this.elementVertical.clientHeight-o.offsetHeight))return s(),!1;switch(typeof n>"u"&&(n=this.table.options.scrollToRowPosition),n==="nearest"&&(n=this.scrollToRowNearestTop(t)?"top":"bottom"),this.scrollToRow(t),n){case"middle":case"center":this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop=this.elementVertical.scrollTop+(o.offsetTop-this.elementVertical.scrollTop)-(this.elementVertical.scrollHeight-o.offsetTop)/2:this.elementVertical.scrollTop=this.elementVertical.scrollTop-this.elementVertical.clientHeight/2;break;case"bottom":this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop=this.elementVertical.scrollTop-(this.elementVertical.scrollHeight-o.offsetTop)+o.offsetHeight:this.elementVertical.scrollTop=this.elementVertical.scrollTop-this.elementVertical.clientHeight+o.offsetHeight;break;case"top":this.elementVertical.scrollTop=o.offsetTop;break}s()}else console.warn("Scroll Error - Row not visible"),u("Scroll Error - Row not visible")})}},Nf=class extends Ya{constructor(t){super(t)}renderRowCells(t,n){let i=document.createDocumentFragment();t.cells.forEach(r=>{i.appendChild(r.getElement())}),t.element.appendChild(i),n||t.cells.forEach(r=>{r.cellRendered()})}reinitializeColumnWidths(t){t.forEach(function(n){n.reinitializeWidth()})}},Df=class extends Ya{constructor(t){super(t),this.leftCol=0,this.rightCol=0,this.scrollLeft=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0,this.fitDataColAvg=0,this.windowBuffer=200,this.visibleRows=null,this.initialized=!1,this.isFitData=!1,this.columns=[]}initialize(){this.compatibilityCheck(),this.layoutCheck(),this.vertScrollListen()}compatibilityCheck(){this.options("layout")=="fitDataTable"&&console.warn("Horizontal Virtual DOM is not compatible with fitDataTable layout mode"),this.options("responsiveLayout")&&console.warn("Horizontal Virtual DOM is not compatible with responsive columns"),this.options("rtl")&&console.warn("Horizontal Virtual DOM is not currently compatible with RTL text direction")}layoutCheck(){this.isFitData=this.options("layout").startsWith("fitData")}vertScrollListen(){this.subscribe("scroll-vertical",this.clearVisRowCache.bind(this)),this.subscribe("data-refreshed",this.clearVisRowCache.bind(this))}clearVisRowCache(){this.visibleRows=null}renderColumns(t,n){this.dataChange()}scrollColumns(t,n){this.scrollLeft!=t&&(this.scrollLeft=t,this.scroll(t-(this.vDomScrollPosLeft+this.windowBuffer)))}calcWindowBuffer(){var t=this.elementVertical.clientWidth;this.table.columnManager.columnsByIndex.forEach(n=>{if(n.visible){var i=n.getWidth();i>t&&(t=i)}}),this.windowBuffer=t*2}rerenderColumns(t,n){var i={cols:this.columns,leftCol:this.leftCol,rightCol:this.rightCol},r=0;t&&!this.initialized||(this.clear(),this.calcWindowBuffer(),this.scrollLeft=this.elementVertical.scrollLeft,this.vDomScrollPosLeft=this.scrollLeft-this.windowBuffer,this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.windowBuffer,this.table.columnManager.columnsByIndex.forEach(o=>{var a={},s;o.visible&&(o.modules.frozen||(s=o.getWidth(),a.leftPos=r,a.rightPos=r+s,a.width=s,this.isFitData&&(a.fitDataCheck=o.modules.vdomHoz?o.modules.vdomHoz.fitDataCheck:!0),r+s>this.vDomScrollPosLeft&&r<this.vDomScrollPosRight?(this.leftCol==-1&&(this.leftCol=this.columns.length,this.vDomPadLeft=r),this.rightCol=this.columns.length):this.leftCol!==-1&&(this.vDomPadRight+=s),this.columns.push(o),o.modules.vdomHoz=a,r+=s))}),this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.initialized=!0,n||(!t||this.reinitChanged(i))&&this.reinitializeRows(),this.elementVertical.scrollLeft=this.scrollLeft)}renderRowCells(t){if(this.initialized)this.initializeRow(t);else{let n=document.createDocumentFragment();t.cells.forEach(i=>{n.appendChild(i.getElement())}),t.element.appendChild(n),t.cells.forEach(i=>{i.cellRendered()})}}rerenderRowCells(t,n){this.reinitializeRow(t,n)}reinitializeColumnWidths(t){for(let n=this.leftCol;n<=this.rightCol;n++)this.columns[n].reinitializeWidth()}deinitialize(){this.initialized=!1}clear(){this.columns=[],this.leftCol=-1,this.rightCol=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0}dataChange(){var t=!1,n,i;if(this.isFitData){if(this.table.columnManager.columnsByIndex.forEach(r=>{!r.definition.width&&r.visible&&(t=!0)}),t&&this.table.rowManager.getDisplayRows().length&&(this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.windowBuffer,n=this.chain("rows-sample",[1],[],()=>this.table.rowManager.getDisplayRows())[0],n)){i=n.getElement(),n.generateCells(),this.tableElement.appendChild(i);for(let r=0;r<n.cells.length;r++){let o=n.cells[r];i.appendChild(o.getElement()),o.column.reinitializeWidth()}i.parentNode.removeChild(i),this.rerenderColumns(!1,!0)}}else this.options("layout")==="fitColumns"&&(this.layoutRefresh(),this.rerenderColumns(!1,!0))}reinitChanged(t){var n=!0;return t.cols.length!==this.columns.length||t.leftCol!==this.leftCol||t.rightCol!==this.rightCol?!0:(t.cols.forEach((i,r)=>{i!==this.columns[r]&&(n=!1)}),!n)}reinitializeRows(){var t=this.getVisibleRows(),n=this.table.rowManager.getRows().filter(i=>!t.includes(i));t.forEach(i=>{this.reinitializeRow(i,!0)}),n.forEach(i=>{i.deinitialize()})}getVisibleRows(){return this.visibleRows||(this.visibleRows=this.table.rowManager.getVisibleRows()),this.visibleRows}scroll(t){this.vDomScrollPosLeft+=t,this.vDomScrollPosRight+=t,Math.abs(t)>this.windowBuffer/2?this.rerenderColumns():t>0?(this.addColRight(),this.removeColLeft()):(this.addColLeft(),this.removeColRight())}colPositionAdjust(t,n,i){for(let r=t;r<n;r++){let o=this.columns[r];o.modules.vdomHoz.leftPos+=i,o.modules.vdomHoz.rightPos+=i}}addColRight(){for(var t=!1,n=!0;n;){let i=this.columns[this.rightCol+1];i&&i.modules.vdomHoz.leftPos<=this.vDomScrollPosRight?(t=!0,this.getVisibleRows().forEach(r=>{if(r.type!=="group"){var o=r.getCell(i);r.getElement().insertBefore(o.getElement(),r.getCell(this.columns[this.rightCol]).getElement().nextSibling),o.cellRendered()}}),this.fitDataColActualWidthCheck(i),this.rightCol++,this.getVisibleRows().forEach(r=>{r.type!=="group"&&(r.modules.vdomHoz.rightCol=this.rightCol)}),this.rightCol>=this.columns.length-1?this.vDomPadRight=0:this.vDomPadRight-=i.getWidth()):n=!1}t&&(this.tableElement.style.paddingRight=this.vDomPadRight+"px")}addColLeft(){for(var t=!1,n=!0;n;){let i=this.columns[this.leftCol-1];if(i)if(i.modules.vdomHoz.rightPos>=this.vDomScrollPosLeft){t=!0,this.getVisibleRows().forEach(o=>{if(o.type!=="group"){var a=o.getCell(i);o.getElement().insertBefore(a.getElement(),o.getCell(this.columns[this.leftCol]).getElement()),a.cellRendered()}}),this.leftCol--,this.getVisibleRows().forEach(o=>{o.type!=="group"&&(o.modules.vdomHoz.leftCol=this.leftCol)}),this.leftCol<=0?this.vDomPadLeft=0:this.vDomPadLeft-=i.getWidth();let r=this.fitDataColActualWidthCheck(i);r&&(this.scrollLeft=this.elementVertical.scrollLeft=this.elementVertical.scrollLeft+r,this.vDomPadRight-=r)}else n=!1;else n=!1}t&&(this.tableElement.style.paddingLeft=this.vDomPadLeft+"px")}removeColRight(){for(var t=!1,n=!0;n;){let i=this.columns[this.rightCol];i&&i.modules.vdomHoz.leftPos>this.vDomScrollPosRight?(t=!0,this.getVisibleRows().forEach(r=>{if(r.type!=="group"){var o=r.getCell(i);try{r.getElement().removeChild(o.getElement())}catch(a){console.warn("Could not removeColRight",a.message)}}}),this.vDomPadRight+=i.getWidth(),this.rightCol--,this.getVisibleRows().forEach(r=>{r.type!=="group"&&(r.modules.vdomHoz.rightCol=this.rightCol)})):n=!1}t&&(this.tableElement.style.paddingRight=this.vDomPadRight+"px")}removeColLeft(){for(var t=!1,n=!0;n;){let i=this.columns[this.leftCol];i&&i.modules.vdomHoz.rightPos<this.vDomScrollPosLeft?(t=!0,this.getVisibleRows().forEach(r=>{if(r.type!=="group"){var o=r.getCell(i);try{r.getElement().removeChild(o.getElement())}catch(a){console.warn("Could not removeColLeft",a.message)}}}),this.vDomPadLeft+=i.getWidth(),this.leftCol++,this.getVisibleRows().forEach(r=>{r.type!=="group"&&(r.modules.vdomHoz.leftCol=this.leftCol)})):n=!1}t&&(this.tableElement.style.paddingLeft=this.vDomPadLeft+"px")}fitDataColActualWidthCheck(t){var n,i;return t.modules.vdomHoz.fitDataCheck&&(t.reinitializeWidth(),n=t.getWidth(),i=n-t.modules.vdomHoz.width,i&&(t.modules.vdomHoz.rightPos+=i,t.modules.vdomHoz.width=n,this.colPositionAdjust(this.columns.indexOf(t)+1,this.columns.length,i)),t.modules.vdomHoz.fitDataCheck=!1),i}initializeRow(t){if(t.type!=="group"){t.modules.vdomHoz={leftCol:this.leftCol,rightCol:this.rightCol},this.table.modules.frozenColumns&&this.table.modules.frozenColumns.leftColumns.forEach(n=>{this.appendCell(t,n)});for(let n=this.leftCol;n<=this.rightCol;n++)this.appendCell(t,this.columns[n]);this.table.modules.frozenColumns&&this.table.modules.frozenColumns.rightColumns.forEach(n=>{this.appendCell(t,n)})}}appendCell(t,n){if(n&&n.visible){let i=t.getCell(n);t.getElement().appendChild(i.getElement()),i.cellRendered()}}reinitializeRow(t,n){if(t.type!=="group"&&(n||!t.modules.vdomHoz||t.modules.vdomHoz.leftCol!==this.leftCol||t.modules.vdomHoz.rightCol!==this.rightCol)){for(var i=t.getElement();i.firstChild;)i.removeChild(i.firstChild);this.initializeRow(t)}}},Bf=class extends cs{constructor(t){super(t),this.blockHozScrollEvent=!1,this.headersElement=null,this.contentsElement=null,this.rowHeader=null,this.element=null,this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.scrollLeft=0,this.optionsList=new dh(this.table,"column definition",z0),this.redrawBlock=!1,this.redrawBlockUpdate=null,this.renderer=null}initialize(){this.initializeRenderer(),this.headersElement=this.createHeadersElement(),this.contentsElement=this.createHeaderContentsElement(),this.element=this.createHeaderElement(),this.contentsElement.insertBefore(this.headersElement,this.contentsElement.firstChild),this.element.insertBefore(this.contentsElement,this.element.firstChild),this.initializeScrollWheelWatcher(),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("scrollbar-vertical",this.padVerticalScrollbar.bind(this))}padVerticalScrollbar(t){this.table.rtl?this.headersElement.style.marginLeft=t+"px":this.headersElement.style.marginRight=t+"px"}initializeRenderer(){var t,n={virtual:Df,basic:Nf};typeof this.table.options.renderHorizontal=="string"?t=n[this.table.options.renderHorizontal]:t=this.table.options.renderHorizontal,t?(this.renderer=new t(this.table,this.element,this.tableElement),this.renderer.initialize()):console.error("Unable to find matching renderer:",this.table.options.renderHorizontal)}createHeadersElement(){var t=document.createElement("div");return t.classList.add("tabulator-headers"),t.setAttribute("role","row"),t}createHeaderContentsElement(){var t=document.createElement("div");return t.classList.add("tabulator-header-contents"),t.setAttribute("role","rowgroup"),t}createHeaderElement(){var t=document.createElement("div");return t.classList.add("tabulator-header"),t.setAttribute("role","rowgroup"),this.table.options.headerVisible||t.classList.add("tabulator-header-hidden"),t}getElement(){return this.element}getContentsElement(){return this.contentsElement}getHeadersElement(){return this.headersElement}scrollHorizontal(t){this.contentsElement.scrollLeft=t,this.scrollLeft=t,this.renderer.scrollColumns(t)}initializeScrollWheelWatcher(){this.contentsElement.addEventListener("wheel",t=>{var n;t.deltaX&&(n=this.contentsElement.scrollLeft+t.deltaX,this.table.rowManager.scrollHorizontal(n),this.table.columnManager.scrollHorizontal(n))})}generateColumnsFromRowData(t){var n=[],i={},r=this.table.options.autoColumns==="full"?t:[t[0]],o=this.table.options.autoColumnsDefinitions;if(t&&t.length){if(r.forEach(a=>{Object.keys(a).forEach((s,u)=>{let f=a[s],c;i[s]?i[s]!==!0&&typeof f<"u"&&(i[s].sorter=this.calculateSorterFromValue(f),i[s]=!0):(c={field:s,title:s,sorter:this.calculateSorterFromValue(f)},n.splice(u,0,c),i[s]=typeof f>"u"?c:!0)})}),o)switch(typeof o){case"function":this.table.options.columns=o.call(this.table,n);break;case"object":Array.isArray(o)?n.forEach(a=>{var s=o.find(u=>u.field===a.field);s&&Object.assign(a,s)}):n.forEach(a=>{o[a.field]&&Object.assign(a,o[a.field])}),this.table.options.columns=n;break}else this.table.options.columns=n;this.setColumns(this.table.options.columns)}}calculateSorterFromValue(t){var n;switch(typeof t){case"undefined":n="string";break;case"boolean":n="boolean";break;case"number":n="number";break;case"object":Array.isArray(t)?n="array":n="string";break;default:!isNaN(t)&&t!==""?n="number":t.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)?n="alphanum":n="string";break}return n}setColumns(t,n){for(;this.headersElement.firstChild;)this.headersElement.removeChild(this.headersElement.firstChild);this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.dispatch("columns-loading"),this.dispatchExternal("columnsLoading"),this.table.options.rowHeader&&(this.rowHeader=new Ul(this.table.options.rowHeader===!0?{}:this.table.options.rowHeader,this,!0),this.columns.push(this.rowHeader),this.headersElement.appendChild(this.rowHeader.getElement()),this.rowHeader.columnRendered()),t.forEach((i,r)=>{this._addColumn(i)}),this._reIndexColumns(),this.dispatch("columns-loaded"),this.subscribedExternal("columnsLoaded")&&this.dispatchExternal("columnsLoaded",this.getComponents()),this.rerenderColumns(!1,!0),this.redraw(!0)}_addColumn(t,n,i){var r=new Ul(t,this),o=r.getElement(),a=i&&this.findColumnIndex(i);if(n&&this.rowHeader&&(!i||i===this.rowHeader)&&(n=!1,i=this.rowHeader,a=0),i&&a>-1){var s=i.getTopColumn(),u=this.columns.indexOf(s),f=s.getElement();n?(this.columns.splice(u,0,r),f.parentNode.insertBefore(o,f)):(this.columns.splice(u+1,0,r),f.parentNode.insertBefore(o,f.nextSibling))}else n?(this.columns.unshift(r),this.headersElement.insertBefore(r.getElement(),this.headersElement.firstChild)):(this.columns.push(r),this.headersElement.appendChild(r.getElement()));return r.columnRendered(),r}registerColumnField(t){t.definition.field&&(this.columnsByField[t.definition.field]=t)}registerColumnPosition(t){this.columnsByIndex.push(t)}_reIndexColumns(){this.columnsByIndex=[],this.columns.forEach(function(t){t.reRegisterPosition()})}verticalAlignHeaders(){var t=0;this.redrawBlock||(this.headersElement.style.height="",this.columns.forEach(n=>{n.clearVerticalAlign()}),this.columns.forEach(n=>{var i=n.getHeight();i>t&&(t=i)}),this.headersElement.style.height=t+"px",this.columns.forEach(n=>{n.verticalAlign(this.table.options.columnHeaderVertAlign,t)}),this.table.rowManager.adjustTableSize())}findColumn(t){var n;if(typeof t=="object"){if(t instanceof Ul)return t;if(t instanceof ch)return t._getSelf()||!1;if(typeof HTMLElement<"u"&&t instanceof HTMLElement)return n=[],this.columns.forEach(r=>{n.push(r),n=n.concat(r.getColumns(!0))}),n.find(r=>r.element===t)||!1}else return this.columnsByField[t]||!1;return!1}getColumnByField(t){return this.columnsByField[t]}getColumnsByFieldRoot(t){var n=[];return Object.keys(this.columnsByField).forEach(i=>{var r=this.table.options.nestedFieldSeparator?i.split(this.table.options.nestedFieldSeparator)[0]:i;r===t&&n.push(this.columnsByField[i])}),n}getColumnByIndex(t){return this.columnsByIndex[t]}getFirstVisibleColumn(){var t=this.columnsByIndex.findIndex(n=>n.visible);return t>-1?this.columnsByIndex[t]:!1}getVisibleColumnsByIndex(){return this.columnsByIndex.filter(t=>t.visible)}getColumns(){return this.columns}findColumnIndex(t){return this.columnsByIndex.findIndex(n=>t===n)}getRealColumns(){return this.columnsByIndex}traverse(t){this.columnsByIndex.forEach((n,i)=>{t(n,i)})}getDefinitions(t){var n=[];return this.columnsByIndex.forEach(i=>{(!t||t&&i.visible)&&n.push(i.getDefinition())}),n}getDefinitionTree(){var t=[];return this.columns.forEach(n=>{t.push(n.getDefinition(!0))}),t}getComponents(t){var n=[],i=t?this.columns:this.columnsByIndex;return i.forEach(r=>{n.push(r.getComponent())}),n}getWidth(){var t=0;return this.columnsByIndex.forEach(n=>{n.visible&&(t+=n.getWidth())}),t}moveColumn(t,n,i){n.element.parentNode.insertBefore(t.element,n.element),i&&n.element.parentNode.insertBefore(n.element,t.element),this.moveColumnActual(t,n,i),this.verticalAlignHeaders(),this.table.rowManager.reinitialize()}moveColumnActual(t,n,i){t.parent.isGroup?this._moveColumnInArray(t.parent.columns,t,n,i):this._moveColumnInArray(this.columns,t,n,i),this._moveColumnInArray(this.columnsByIndex,t,n,i,!0),this.rerenderColumns(!0),this.dispatch("column-moved",t,n,i),this.subscribedExternal("columnMoved")&&this.dispatchExternal("columnMoved",t.getComponent(),this.table.columnManager.getComponents())}_moveColumnInArray(t,n,i,r,o){var a=t.indexOf(n),s,u=[];a>-1&&(t.splice(a,1),s=t.indexOf(i),s>-1?r&&(s=s+1):s=a,t.splice(s,0,n),o&&(u=this.chain("column-moving-rows",[n,i,r],null,[])||[],u=u.concat(this.table.rowManager.rows),u.forEach(function(f){if(f.cells.length){var c=f.cells.splice(a,1)[0];f.cells.splice(s,0,c)}})))}scrollToColumn(t,n,i){var r=0,o=t.getLeftOffset(),a=0,s=t.getElement();return new Promise((u,f)=>{if(typeof n>"u"&&(n=this.table.options.scrollToColumnPosition),typeof i>"u"&&(i=this.table.options.scrollToColumnIfVisible),t.visible){switch(n){case"middle":case"center":a=-this.element.clientWidth/2;break;case"right":a=s.clientWidth-this.headersElement.clientWidth;break}if(!i&&o>0&&o+s.offsetWidth<this.element.clientWidth)return!1;r=o+a,r=Math.max(Math.min(r,this.table.rowManager.element.scrollWidth-this.table.rowManager.element.clientWidth),0),this.table.rowManager.scrollHorizontal(r),this.scrollHorizontal(r),u()}else console.warn("Scroll Error - Column not visible"),f("Scroll Error - Column not visible")})}generateCells(t){var n=[];return this.columnsByIndex.forEach(i=>{n.push(i.generateCell(t))}),n}getFlexBaseWidth(){var t=this.table.element.clientWidth,n=0;return this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(t-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),this.columnsByIndex.forEach(function(i){var r,o,a;i.visible&&(r=i.definition.width||0,o=parseInt(i.minWidth),typeof r=="string"?r.indexOf("%")>-1?a=t/100*parseInt(r):a=parseInt(r):a=r,n+=a>o?a:o)}),n}addColumn(t,n,i){return new Promise((r,o)=>{var a=this._addColumn(t,n,i);this._reIndexColumns(),this.dispatch("column-add",t,n,i),this.layoutMode()!="fitColumns"&&a.reinitializeWidth(),this.redraw(!0),this.table.rowManager.reinitialize(),this.rerenderColumns(),r(a)})}deregisterColumn(t){var n=t.getField(),i;n&&delete this.columnsByField[n],i=this.columnsByIndex.indexOf(t),i>-1&&this.columnsByIndex.splice(i,1),i=this.columns.indexOf(t),i>-1&&this.columns.splice(i,1),this.verticalAlignHeaders(),this.redraw()}rerenderColumns(t,n){this.redrawBlock?(t===!1||t===!0&&this.redrawBlockUpdate===null)&&(this.redrawBlockUpdate=t):this.renderer.rerenderColumns(t,n)}blockRedraw(){this.redrawBlock=!0,this.redrawBlockUpdate=null}restoreRedraw(){this.redrawBlock=!1,this.verticalAlignHeaders(),this.renderer.rerenderColumns(this.redrawBlockUpdate)}redraw(t){Yn.elVisible(this.element)&&this.verticalAlignHeaders(),t&&(this.table.rowManager.resetScroll(),this.table.rowManager.reinitialize()),this.confirm("table-redrawing",t)||this.layoutRefresh(t),this.dispatch("table-redraw",t),this.table.footerManager.redraw()}},Ff=class extends Ya{constructor(t){super(t),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0}clearRows(){for(var t=this.tableElement;t.firstChild;)t.removeChild(t.firstChild);t.scrollTop=0,t.scrollLeft=0,t.style.minWidth="",t.style.minHeight="",t.style.display="",t.style.visibility=""}renderRows(){var t=this.tableElement,n=!0,i=document.createDocumentFragment(),r=this.rows();r.forEach((o,a)=>{this.styleRow(o,a),o.initialize(!1,!0),o.type!=="group"&&(n=!1),i.appendChild(o.getElement())}),t.appendChild(i),r.forEach(o=>{o.rendered(),o.heightInitialized||o.calcHeight(!0)}),r.forEach(o=>{o.heightInitialized||o.setCellHeight()}),n?t.style.minWidth=this.table.columnManager.getWidth()+"px":t.style.minWidth=""}rerenderRows(t){this.clearRows(),t&&t(),this.renderRows(),this.rows().length||this.table.rowManager.tableEmpty()}scrollToRowNearestTop(t){var n=Yn.elOffset(t.getElement()).top;return!(Math.abs(this.elementVertical.scrollTop-n)>Math.abs(this.elementVertical.scrollTop+this.elementVertical.clientHeight-n))}scrollToRow(t){var n=t.getElement();this.elementVertical.scrollTop=Yn.elOffset(n).top-Yn.elOffset(this.elementVertical).top+this.elementVertical.scrollTop}visibleRows(t){return this.rows()}},zf=class extends Ya{constructor(t){super(t),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.vDomRowHeight=20,this.vDomTop=0,this.vDomBottom=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomMaxRenderChain=90,this.vDomWindowBuffer=0,this.vDomWindowMinTotalRows=20,this.vDomWindowMinMarginRows=5,this.vDomTopNewRows=[],this.vDomBottomNewRows=[]}clearRows(){for(var t=this.tableElement;t.firstChild;)t.removeChild(t.firstChild);t.style.paddingTop="",t.style.paddingBottom="",t.style.minHeight="",t.style.display="",t.style.visibility="",this.elementVertical.scrollTop=0,this.elementVertical.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0,this.vDomTop=0,this.vDomBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0}renderRows(){this._virtualRenderFill()}rerenderRows(t){for(var n=this.elementVertical.scrollTop,i=!1,r=!1,o=this.table.rowManager.scrollLeft,a=this.rows(),s=this.vDomTop;s<=this.vDomBottom;s++)if(a[s]){var u=n-a[s].getElement().offsetTop;if(r===!1||Math.abs(u)<r)r=u,i=s;else break}a.forEach(f=>{f.deinitializeHeight()}),t&&t(),this.rows().length?this._virtualRenderFill(i===!1?this.rows.length-1:i,!0,r||0):(this.clear(),this.table.rowManager.tableEmpty()),this.scrollColumns(o)}scrollColumns(t){this.table.rowManager.scrollHorizontal(t)}scrollRows(t,n){var i=t-this.vDomScrollPosTop,r=t-this.vDomScrollPosBottom,o=this.vDomWindowBuffer*2,a=this.rows();if(this.scrollTop=t,-i>o||r>o){var s=this.table.rowManager.scrollLeft;this._virtualRenderFill(Math.floor(this.elementVertical.scrollTop/this.elementVertical.scrollHeight*a.length)),this.scrollColumns(s)}else n?(i<0&&this._addTopRow(a,-i),r<0&&(this.vDomScrollHeight-this.scrollTop>this.vDomWindowBuffer?this._removeBottomRow(a,-r):this.vDomScrollPosBottom=this.scrollTop)):(r>=0&&this._addBottomRow(a,r),i>=0&&(this.scrollTop>this.vDomWindowBuffer?this._removeTopRow(a,i):this.vDomScrollPosTop=this.scrollTop))}resize(){this.vDomWindowBuffer=this.table.options.renderVerticalBuffer||this.elementVertical.clientHeight}scrollToRowNearestTop(t){var n=this.rows().indexOf(t);return!(Math.abs(this.vDomTop-n)>Math.abs(this.vDomBottom-n))}scrollToRow(t){var n=this.rows().indexOf(t);n>-1&&this._virtualRenderFill(n,!0)}visibleRows(t){var n=this.elementVertical.scrollTop,i=this.elementVertical.clientHeight+n,r=!1,o=0,a=0,s=this.rows();if(t)o=this.vDomTop,a=this.vDomBottom;else for(var u=this.vDomTop;u<=this.vDomBottom;u++)if(s[u])if(r)if(i-s[u].getElement().offsetTop>=0)a=u;else break;else if(n-s[u].getElement().offsetTop>=0)o=u;else if(r=!0,i-s[u].getElement().offsetTop>=0)a=u;else break;return s.slice(o,a+1)}_virtualRenderFill(t,n,i){var r=this.tableElement,o=this.elementVertical,a=0,s=0,u=0,f=0,c=0,d=0,m=this.rows(),v=m.length,p=0,_,y,x=[],S=0,O=0,B=this.table.rowManager.fixedHeight,U=this.elementVertical.clientHeight,z=this.table.options.rowHeight,q=!0;if(t=t||0,i=i||0,!t)this.clear();else{for(;r.firstChild;)r.removeChild(r.firstChild);f=(v-t+1)*this.vDomRowHeight,f<U&&(t-=Math.ceil((U-f)/this.vDomRowHeight),t<0&&(t=0)),a=Math.min(Math.max(Math.floor(this.vDomWindowBuffer/this.vDomRowHeight),this.vDomWindowMinMarginRows),t),t-=a}if(v&&Yn.elVisible(this.elementVertical)){for(this.vDomTop=t,this.vDomBottom=t-1,B||this.table.options.maxHeight?(z&&(O=U/z+this.vDomWindowBuffer/z),O=Math.max(this.vDomWindowMinTotalRows,Math.ceil(O))):O=v;(O==v||s<=U+this.vDomWindowBuffer||S<this.vDomWindowMinTotalRows)&&this.vDomBottom<v-1;){for(x=[],y=document.createDocumentFragment(),d=0;d<O&&this.vDomBottom<v-1;)p=this.vDomBottom+1,_=m[p],this.styleRow(_,p),_.initialize(!1,!0),!_.heightInitialized&&!this.table.options.rowHeight&&_.clearCellHeight(),y.appendChild(_.getElement()),x.push(_),this.vDomBottom++,d++;if(!x.length)break;r.appendChild(y),x.forEach(G=>{G.rendered(),G.heightInitialized||G.calcHeight(!0)}),x.forEach(G=>{G.heightInitialized||G.setCellHeight()}),x.forEach(G=>{u=G.getHeight(),S<a?c+=u:s+=u,u>this.vDomWindowBuffer&&(this.vDomWindowBuffer=u*2),S++}),q=this.table.rowManager.adjustTableSize(),U=this.elementVertical.clientHeight,q&&(B||this.table.options.maxHeight)&&(z=s/S,O=Math.max(this.vDomWindowMinTotalRows,Math.ceil(U/z+this.vDomWindowBuffer/z)))}t?(this.vDomTopPad=n?this.vDomRowHeight*this.vDomTop+i:this.scrollTop-c,this.vDomBottomPad=this.vDomBottom==v-1?0:Math.max(this.vDomScrollHeight-this.vDomTopPad-s-c,0)):(this.vDomTopPad=0,this.vDomRowHeight=Math.floor((s+c)/S),this.vDomBottomPad=this.vDomRowHeight*(v-this.vDomBottom-1),this.vDomScrollHeight=c+s+this.vDomBottomPad-U),r.style.paddingTop=this.vDomTopPad+"px",r.style.paddingBottom=this.vDomBottomPad+"px",n&&(this.scrollTop=this.vDomTopPad+c+i-(this.elementVertical.scrollWidth>this.elementVertical.clientWidth?this.elementVertical.offsetHeight-U:0)),this.scrollTop=Math.min(this.scrollTop,this.elementVertical.scrollHeight-U),this.elementVertical.scrollWidth>this.elementVertical.clientWidth&&n&&(this.scrollTop+=this.elementVertical.offsetHeight-U),this.vDomScrollPosTop=this.scrollTop,this.vDomScrollPosBottom=this.scrollTop,o.scrollTop=this.scrollTop,this.dispatch("render-virtual-fill")}}_addTopRow(t,n){for(var i=this.tableElement,r=[],o=0,a=this.vDomTop-1,s=0,u=!0;u;)if(this.vDomTop){let f=t[a],c,d;f&&s<this.vDomMaxRenderChain?(c=f.getHeight()||this.vDomRowHeight,d=f.initialized,n>=c?(this.styleRow(f,a),i.insertBefore(f.getElement(),i.firstChild),(!f.initialized||!f.heightInitialized)&&r.push(f),f.initialize(),d||(c=f.getElement().offsetHeight,c>this.vDomWindowBuffer&&(this.vDomWindowBuffer=c*2)),n-=c,o+=c,this.vDomTop--,a--,s++):u=!1):u=!1}else u=!1;for(let f of r)f.clearCellHeight();this._quickNormalizeRowHeight(r),o&&(this.vDomTopPad-=o,this.vDomTopPad<0&&(this.vDomTopPad=a*this.vDomRowHeight),a<1&&(this.vDomTopPad=0),i.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop-=o)}_removeTopRow(t,n){for(var i=[],r=0,o=0,a=!0;a;){let s=t[this.vDomTop],u;s&&o<this.vDomMaxRenderChain?(u=s.getHeight()||this.vDomRowHeight,n>=u?(this.vDomTop++,n-=u,r+=u,i.push(s),o++):a=!1):a=!1}for(let s of i){let u=s.getElement();u.parentNode&&u.parentNode.removeChild(u)}r&&(this.vDomTopPad+=r,this.tableElement.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop+=this.vDomTop?r:r+this.vDomWindowBuffer)}_addBottomRow(t,n){for(var i=this.tableElement,r=[],o=0,a=this.vDomBottom+1,s=0,u=!0;u;){let f=t[a],c,d;f&&s<this.vDomMaxRenderChain?(c=f.getHeight()||this.vDomRowHeight,d=f.initialized,n>=c?(this.styleRow(f,a),i.appendChild(f.getElement()),(!f.initialized||!f.heightInitialized)&&r.push(f),f.initialize(),d||(c=f.getElement().offsetHeight,c>this.vDomWindowBuffer&&(this.vDomWindowBuffer=c*2)),n-=c,o+=c,this.vDomBottom++,a++,s++):u=!1):u=!1}for(let f of r)f.clearCellHeight();this._quickNormalizeRowHeight(r),o&&(this.vDomBottomPad-=o,(this.vDomBottomPad<0||a==t.length-1)&&(this.vDomBottomPad=0),i.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom+=o)}_removeBottomRow(t,n){for(var i=[],r=0,o=0,a=!0;a;){let s=t[this.vDomBottom],u;s&&o<this.vDomMaxRenderChain?(u=s.getHeight()||this.vDomRowHeight,n>=u?(this.vDomBottom--,n-=u,r+=u,i.push(s),o++):a=!1):a=!1}for(let s of i){let u=s.getElement();u.parentNode&&u.parentNode.removeChild(u)}r&&(this.vDomBottomPad+=r,this.vDomBottomPad<0&&(this.vDomBottomPad=0),this.tableElement.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom-=r)}_quickNormalizeRowHeight(t){for(let n of t)n.calcHeight();for(let n of t)n.setCellHeight()}},jf=class extends cs{constructor(t){super(t),this.element=this.createHolderElement(),this.tableElement=this.createTableElement(),this.heightFixer=this.createTableElement(),this.placeholder=null,this.placeholderContents=null,this.firstRender=!1,this.renderMode="virtual",this.fixedHeight=!1,this.rows=[],this.activeRowsPipeline=[],this.activeRows=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.scrollTop=0,this.scrollLeft=0,this.redrawBlock=!1,this.redrawBlockRestoreConfig=!1,this.redrawBlockRenderInPosition=!1,this.dataPipeline=[],this.displayPipeline=[],this.scrollbarWidth=0,this.renderer=null}createHolderElement(){var t=document.createElement("div");return t.classList.add("tabulator-tableholder"),t.setAttribute("tabindex",0),t}createTableElement(){var t=document.createElement("div");return t.classList.add("tabulator-table"),t.setAttribute("role","rowgroup"),t}initializePlaceholder(){var t=this.table.options.placeholder;if(typeof t=="function"&&(t=t.call(this.table)),t=this.chain("placeholder",[t],t,t)||t,t){let n=document.createElement("div");if(n.classList.add("tabulator-placeholder"),typeof t=="string"){let i=document.createElement("div");i.classList.add("tabulator-placeholder-contents"),i.innerHTML=t,n.appendChild(i),this.placeholderContents=i}else typeof HTMLElement<"u"&&t instanceof HTMLElement?(n.appendChild(t),this.placeholderContents=t):(console.warn("Invalid placeholder provided, must be string or HTML Element",t),this.el=null);this.placeholder=n}}getElement(){return this.element}getTableElement(){return this.tableElement}initialize(){this.initializePlaceholder(),this.initializeRenderer(),this.element.appendChild(this.tableElement),this.firstRender=!0,this.element.addEventListener("scroll",()=>{var t=this.element.scrollLeft,n=this.scrollLeft>t,i=this.element.scrollTop,r=this.scrollTop>i;this.scrollLeft!=t&&(this.scrollLeft=t,this.dispatch("scroll-horizontal",t,n),this.dispatchExternal("scrollHorizontal",t,n),this._positionPlaceholder()),this.scrollTop!=i&&(this.scrollTop=i,this.renderer.scrollRows(i,r),this.dispatch("scroll-vertical",i,r),this.dispatchExternal("scrollVertical",i,r))})}findRow(t){if(typeof t=="object"){if(t instanceof Io)return t;if(t instanceof fh)return t._getSelf()||!1;if(typeof HTMLElement<"u"&&t instanceof HTMLElement)return this.rows.find(i=>i.getElement()===t)||!1;if(t===null)return!1}else return typeof t>"u"?!1:this.rows.find(i=>i.data[this.table.options.index]==t)||!1;return!1}getRowFromDataObject(t){var n=this.rows.find(i=>i.data===t);return n||!1}getRowFromPosition(t){return this.getDisplayRows().find(n=>n.type==="row"&&n.getPosition()===t&&n.isDisplayed())}scrollToRow(t,n,i){return this.renderer.scrollToRowPosition(t,n,i)}setData(t,n,i){return new Promise((r,o)=>{n&&this.getDisplayRows().length?this.table.options.pagination?this._setDataActual(t,!0):this.reRenderInPosition(()=>{this._setDataActual(t)}):(this.table.options.autoColumns&&i&&this.table.initialized&&this.table.columnManager.generateColumnsFromRowData(t),this.resetScroll(),this._setDataActual(t)),r()})}_setDataActual(t,n){this.dispatchExternal("dataProcessing",t),this._wipeElements(),Array.isArray(t)?(this.dispatch("data-processing",t),t.forEach((i,r)=>{if(i&&typeof i=="object"){var o=new Io(i,this);this.rows.push(o)}else console.warn("Data Loading Warning - Invalid row data detected and ignored, expecting object but received:",i)}),this.refreshActiveData(!1,!1,n),this.dispatch("data-processed",t),this.dispatchExternal("dataProcessed",t)):console.error(`Data Loading Error - Unable to process data due to invalid data type 
Expecting: array 
Received: `,typeof t,`
Data:     `,t)}_wipeElements(){this.dispatch("rows-wipe"),this.destroy(),this.adjustTableSize(),this.dispatch("rows-wiped")}destroy(){this.rows.forEach(t=>{t.wipe()}),this.rows=[],this.activeRows=[],this.activeRowsPipeline=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0}deleteRow(t,n){var i=this.rows.indexOf(t),r=this.activeRows.indexOf(t);r>-1&&this.activeRows.splice(r,1),i>-1&&this.rows.splice(i,1),this.setActiveRows(this.activeRows),this.displayRowIterator(o=>{var a=o.indexOf(t);a>-1&&o.splice(a,1)}),n||this.reRenderInPosition(),this.regenerateRowPositions(),this.dispatchExternal("rowDeleted",t.getComponent()),this.displayRowsCount||this.tableEmpty(),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.getData())}addRow(t,n,i,r){var o=this.addRowActual(t,n,i,r);return o}addRows(t,n,i,r){var o=[];return new Promise((a,s)=>{n=this.findAddRowPos(n),Array.isArray(t)||(t=[t]),(typeof i>"u"&&n||typeof i<"u"&&!n)&&t.reverse(),t.forEach((u,f)=>{var c=this.addRow(u,n,i,!0);o.push(c),this.dispatch("row-added",c,u,n,i)}),this.refreshActiveData(r?"displayPipeline":!1,!1,!0),this.regenerateRowPositions(),this.displayRowsCount&&this._clearPlaceholder(),a(o)})}findAddRowPos(t){return typeof t>"u"&&(t=this.table.options.addRowPos),t==="pos"&&(t=!0),t==="bottom"&&(t=!1),t}addRowActual(t,n,i,r){var o=t instanceof Io?t:new Io(t||{},this),a=this.findAddRowPos(n),s=-1,u,f;return i||(f=this.chain("row-adding-position",[o,a],null,{index:i,top:a}),i=f.index,a=f.top),typeof i<"u"&&(i=this.findRow(i)),i=this.chain("row-adding-index",[o,i,a],null,i),i&&(s=this.rows.indexOf(i)),i&&s>-1?(u=this.activeRows.indexOf(i),this.displayRowIterator(function(c){var d=c.indexOf(i);d>-1&&c.splice(a?d:d+1,0,o)}),u>-1&&this.activeRows.splice(a?u:u+1,0,o),this.rows.splice(a?s:s+1,0,o)):a?(this.displayRowIterator(function(c){c.unshift(o)}),this.activeRows.unshift(o),this.rows.unshift(o)):(this.displayRowIterator(function(c){c.push(o)}),this.activeRows.push(o),this.rows.push(o)),this.setActiveRows(this.activeRows),this.dispatchExternal("rowAdded",o.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),r||this.reRenderInPosition(),o}moveRow(t,n,i){this.dispatch("row-move",t,n,i),this.moveRowActual(t,n,i),this.regenerateRowPositions(),this.dispatch("row-moved",t,n,i),this.dispatchExternal("rowMoved",t.getComponent())}moveRowActual(t,n,i){this.moveRowInArray(this.rows,t,n,i),this.moveRowInArray(this.activeRows,t,n,i),this.displayRowIterator(r=>{this.moveRowInArray(r,t,n,i)}),this.dispatch("row-moving",t,n,i)}moveRowInArray(t,n,i,r){var o,a,s,u;if(n!==i&&(o=t.indexOf(n),o>-1&&(t.splice(o,1),a=t.indexOf(i),a>-1?r?t.splice(a+1,0,n):t.splice(a,0,n):t.splice(o,0,n)),t===this.getDisplayRows())){s=o<a?o:a,u=a>o?a:o+1;for(let f=s;f<=u;f++)t[f]&&this.styleRow(t[f],f)}}clearData(){this.setData([])}getRowIndex(t){return this.findRowIndex(t,this.rows)}getDisplayRowIndex(t){var n=this.getDisplayRows().indexOf(t);return n>-1?n:!1}nextDisplayRow(t,n){var i=this.getDisplayRowIndex(t),r=!1;return i!==!1&&i<this.displayRowsCount-1&&(r=this.getDisplayRows()[i+1]),r&&(!(r instanceof Io)||r.type!="row")?this.nextDisplayRow(r,n):r}prevDisplayRow(t,n){var i=this.getDisplayRowIndex(t),r=!1;return i&&(r=this.getDisplayRows()[i-1]),n&&r&&(!(r instanceof Io)||r.type!="row")?this.prevDisplayRow(r,n):r}findRowIndex(t,n){var i;return t=this.findRow(t),t&&(i=n.indexOf(t),i>-1)?i:!1}getData(t,n){var i=[],r=this.getRows(t);return r.forEach(function(o){o.type=="row"&&i.push(o.getData(n||"data"))}),i}getComponents(t){var n=[],i=this.getRows(t);return i.forEach(function(r){n.push(r.getComponent())}),n}getDataCount(t){var n=this.getRows(t);return n.length}scrollHorizontal(t){this.scrollLeft=t,this.element.scrollLeft=t,this.dispatch("scroll-horizontal",t)}registerDataPipelineHandler(t,n){typeof n<"u"?(this.dataPipeline.push({handler:t,priority:n}),this.dataPipeline.sort((i,r)=>i.priority-r.priority)):console.error("Data pipeline handlers must have a priority in order to be registered")}registerDisplayPipelineHandler(t,n){typeof n<"u"?(this.displayPipeline.push({handler:t,priority:n}),this.displayPipeline.sort((i,r)=>i.priority-r.priority)):console.error("Display pipeline handlers must have a priority in order to be registered")}refreshActiveData(t,n,i){var r=this.table,o="",a=0,s=["all","dataPipeline","display","displayPipeline","end"];if(!this.table.destroyed){if(typeof t=="function")if(a=this.dataPipeline.findIndex(u=>u.handler===t),a>-1)o="dataPipeline",n&&(a==this.dataPipeline.length-1?o="display":a++);else if(a=this.displayPipeline.findIndex(u=>u.handler===t),a>-1)o="displayPipeline",n&&(a==this.displayPipeline.length-1?o="end":a++);else{console.error("Unable to refresh data, invalid handler provided",t);return}else o=t||"all",a=0;if(this.redrawBlock){(!this.redrawBlockRestoreConfig||this.redrawBlockRestoreConfig&&(this.redrawBlockRestoreConfig.stage===o&&a<this.redrawBlockRestoreConfig.index||s.indexOf(o)<s.indexOf(this.redrawBlockRestoreConfig.stage)))&&(this.redrawBlockRestoreConfig={handler:t,skipStage:n,renderInPosition:i,stage:o,index:a});return}else Yn.elVisible(this.element)?i?this.reRenderInPosition(this.refreshPipelines.bind(this,t,o,a,i)):(this.refreshPipelines(t,o,a,i),t||this.table.columnManager.renderer.renderColumns(),this.renderTable(),r.options.layoutColumnsOnNewData&&this.table.columnManager.redraw(!0)):this.refreshPipelines(t,o,a,i),this.dispatch("data-refreshed")}}refreshPipelines(t,n,i,r){switch(this.dispatch("data-refreshing"),(!t||!this.activeRowsPipeline[0])&&(this.activeRowsPipeline[0]=this.rows.slice(0)),n){case"all":case"dataPipeline":for(let o=i;o<this.dataPipeline.length;o++){let a=this.dataPipeline[o].handler(this.activeRowsPipeline[o].slice(0));this.activeRowsPipeline[o+1]=a||this.activeRowsPipeline[o].slice(0)}this.setActiveRows(this.activeRowsPipeline[this.dataPipeline.length]);case"display":i=0,this.resetDisplayRows();case"displayPipeline":for(let o=i;o<this.displayPipeline.length;o++){let a=this.displayPipeline[o].handler((o?this.getDisplayRows(o-1):this.activeRows).slice(0),r);this.setDisplayRows(a||this.getDisplayRows(o-1).slice(0),o)}case"end":this.regenerateRowPositions()}this.getDisplayRows().length&&this._clearPlaceholder()}regenerateRowPositions(){var t=this.getDisplayRows(),n=1;t.forEach(i=>{i.type==="row"&&(i.setPosition(n),n++)})}setActiveRows(t){this.activeRows=this.activeRows=Object.assign([],t),this.activeRowsCount=this.activeRows.length}resetDisplayRows(){this.displayRows=[],this.displayRows.push(this.activeRows.slice(0)),this.displayRowsCount=this.displayRows[0].length}setDisplayRows(t,n){this.displayRows[n]=t,n==this.displayRows.length-1&&(this.displayRowsCount=this.displayRows[this.displayRows.length-1].length)}getDisplayRows(t){return typeof t>"u"?this.displayRows.length?this.displayRows[this.displayRows.length-1]:[]:this.displayRows[t]||[]}getVisibleRows(t,n){var i=Object.assign([],this.renderer.visibleRows(!n));return t&&(i=this.chain("rows-visible",[n],i,i)),i}displayRowIterator(t){this.activeRowsPipeline.forEach(t),this.displayRows.forEach(t),this.displayRowsCount=this.displayRows[this.displayRows.length-1].length}getRows(t){var n=[];switch(t){case"active":n=this.activeRows;break;case"display":n=this.table.rowManager.getDisplayRows();break;case"visible":n=this.getVisibleRows(!1,!0);break;default:n=this.chain("rows-retrieve",t,null,this.rows)||this.rows}return n}reRenderInPosition(t){this.redrawBlock?t?t():this.redrawBlockRenderInPosition=!0:(this.dispatchExternal("renderStarted"),this.renderer.rerenderRows(t),this.fixedHeight||this.adjustTableSize(),this.scrollBarCheck(),this.dispatchExternal("renderComplete"))}scrollBarCheck(){var t=0;this.element.scrollHeight>this.element.clientHeight&&(t=this.element.offsetWidth-this.element.clientWidth),t!==this.scrollbarWidth&&(this.scrollbarWidth=t,this.dispatch("scrollbar-vertical",t))}initializeRenderer(){var t,n={virtual:zf,basic:Ff};typeof this.table.options.renderVertical=="string"?t=n[this.table.options.renderVertical]:t=this.table.options.renderVertical,t?(this.renderMode=this.table.options.renderVertical,this.renderer=new t(this.table,this.element,this.tableElement),this.renderer.initialize(),(this.table.element.clientHeight||this.table.options.height)&&!(this.table.options.minHeight&&this.table.options.maxHeight)?this.fixedHeight=!0:this.fixedHeight=!1):console.error("Unable to find matching renderer:",this.table.options.renderVertical)}getRenderMode(){return this.renderMode}renderTable(){this.dispatchExternal("renderStarted"),this.element.scrollTop=0,this._clearTable(),this.displayRowsCount?(this.renderer.renderRows(),this.firstRender&&(this.firstRender=!1,this.fixedHeight||this.adjustTableSize(),this.layoutRefresh(!0))):this.renderEmptyScroll(),this.fixedHeight||this.adjustTableSize(),this.dispatch("table-layout"),this.displayRowsCount||this._showPlaceholder(),this.scrollBarCheck(),this.dispatchExternal("renderComplete")}renderEmptyScroll(){this.placeholder?this.tableElement.style.display="none":this.tableElement.style.minWidth=this.table.columnManager.getWidth()+"px"}_clearTable(){this._clearPlaceholder(),this.scrollTop=0,this.scrollLeft=0,this.renderer.clearRows()}tableEmpty(){this.renderEmptyScroll(),this._showPlaceholder()}checkPlaceholder(){this.displayRowsCount?this._clearPlaceholder():this.tableEmpty()}_showPlaceholder(){this.placeholder&&(this.placeholder&&this.placeholder.parentNode&&this.placeholder.parentNode.removeChild(this.placeholder),this.initializePlaceholder(),this.placeholder.setAttribute("tabulator-render-mode",this.renderMode),this.getElement().appendChild(this.placeholder),this._positionPlaceholder(),this.adjustTableSize())}_clearPlaceholder(){this.placeholder&&this.placeholder.parentNode&&this.placeholder.parentNode.removeChild(this.placeholder),this.tableElement.style.minWidth="",this.tableElement.style.display=""}_positionPlaceholder(){this.placeholder&&this.placeholder.parentNode&&(this.placeholder.style.width=this.table.columnManager.getWidth()+"px",this.placeholderContents.style.width=this.table.rowManager.element.clientWidth+"px",this.placeholderContents.style.marginLeft=this.scrollLeft+"px")}styleRow(t,n){var i=t.getElement();n%2?(i.classList.add("tabulator-row-even"),i.classList.remove("tabulator-row-odd")):(i.classList.add("tabulator-row-odd"),i.classList.remove("tabulator-row-even"))}normalizeHeight(){this.activeRows.forEach(function(t){t.normalizeHeight()})}adjustTableSize(){let t=this.element.clientHeight,n,i=!1;if(this.renderer.verticalFillMode==="fill"){let r=Math.floor(this.table.columnManager.getElement().getBoundingClientRect().height+(this.table.footerManager&&this.table.footerManager.active&&!this.table.footerManager.external?this.table.footerManager.getElement().getBoundingClientRect().height:0));if(this.fixedHeight){n=isNaN(this.table.options.minHeight)?this.table.options.minHeight:this.table.options.minHeight+"px";let o="calc(100% - "+r+"px)";this.element.style.minHeight=n||"calc(100% - "+r+"px)",this.element.style.height=o,this.element.style.maxHeight=o}else this.element.style.height="",this.element.style.height=this.table.element.clientHeight-r+"px",this.element.scrollTop=this.scrollTop;this.renderer.resize(),!this.fixedHeight&&t!=this.element.clientHeight&&(i=!0,this.subscribed("table-resize")?this.dispatch("table-resize"):this.redraw()),this.scrollBarCheck()}return this._positionPlaceholder(),i}reinitialize(){this.rows.forEach(function(t){t.reinitialize(!0)})}blockRedraw(){this.redrawBlock=!0,this.redrawBlockRestoreConfig=!1}restoreRedraw(){this.redrawBlock=!1,this.redrawBlockRestoreConfig?(this.refreshActiveData(this.redrawBlockRestoreConfig.handler,this.redrawBlockRestoreConfig.skipStage,this.redrawBlockRestoreConfig.renderInPosition),this.redrawBlockRestoreConfig=!1):this.redrawBlockRenderInPosition&&this.reRenderInPosition(),this.redrawBlockRenderInPosition=!1}redraw(t){this.adjustTableSize(),this.table.tableWidth=this.table.element.clientWidth,t?this.renderTable():(this.reRenderInPosition(),this.scrollHorizontal(this.scrollLeft))}resetScroll(){if(this.element.scrollLeft=0,this.element.scrollTop=0,this.table.browser==="ie"){var t=document.createEvent("Event");t.initEvent("scroll",!1,!0),this.element.dispatchEvent(t)}else this.element.dispatchEvent(new Event("scroll"))}},Hf=class extends cs{constructor(t){super(t),this.active=!1,this.element=this.createElement(),this.containerElement=this.createContainerElement(),this.external=!1}initialize(){this.initializeElement()}createElement(){var t=document.createElement("div");return t.classList.add("tabulator-footer"),t}createContainerElement(){var t=document.createElement("div");return t.classList.add("tabulator-footer-contents"),this.element.appendChild(t),t}initializeElement(){if(this.table.options.footerElement)switch(typeof this.table.options.footerElement){case"string":this.table.options.footerElement[0]==="<"?this.containerElement.innerHTML=this.table.options.footerElement:(this.external=!0,this.containerElement=document.querySelector(this.table.options.footerElement));break;default:this.element=this.table.options.footerElement;break}}getElement(){return this.element}append(t){this.activate(),this.containerElement.appendChild(t),this.table.rowManager.adjustTableSize()}prepend(t){this.activate(),this.element.insertBefore(t,this.element.firstChild),this.table.rowManager.adjustTableSize()}remove(t){t.parentNode.removeChild(t),this.deactivate()}deactivate(t){(!this.element.firstChild||t)&&(this.external||this.element.parentNode.removeChild(this.element),this.active=!1)}activate(){this.active||(this.active=!0,this.external||(this.table.element.appendChild(this.getElement()),this.table.element.style.display=""))}redraw(){this.dispatch("footer-redraw")}},Gf=class extends cs{constructor(t){super(t),this.el=null,this.abortClasses=["tabulator-headers","tabulator-table"],this.previousTargets={},this.listeners=["click","dblclick","contextmenu","mouseenter","mouseleave","mouseover","mouseout","mousemove","mouseup","mousedown","touchstart","touchend"],this.componentMap={"tabulator-cell":"cell","tabulator-row":"row","tabulator-group":"group","tabulator-col":"column"},this.pseudoTrackers={row:{subscriber:null,target:null},cell:{subscriber:null,target:null},group:{subscriber:null,target:null},column:{subscriber:null,target:null}},this.pseudoTracking=!1}initialize(){this.el=this.table.element,this.buildListenerMap(),this.bindSubscriptionWatchers()}buildListenerMap(){var t={};this.listeners.forEach(n=>{t[n]={handler:null,components:[]}}),this.listeners=t}bindPseudoEvents(){Object.keys(this.pseudoTrackers).forEach(t=>{this.pseudoTrackers[t].subscriber=this.pseudoMouseEnter.bind(this,t),this.subscribe(t+"-mouseover",this.pseudoTrackers[t].subscriber)}),this.pseudoTracking=!0}pseudoMouseEnter(t,n,i){this.pseudoTrackers[t].target!==i&&(this.pseudoTrackers[t].target&&this.dispatch(t+"-mouseleave",n,this.pseudoTrackers[t].target),this.pseudoMouseLeave(t,n),this.pseudoTrackers[t].target=i,this.dispatch(t+"-mouseenter",n,i))}pseudoMouseLeave(t,n){var i=Object.keys(this.pseudoTrackers),r={row:["cell"],cell:["row"]};i=i.filter(o=>{var a=r[t];return o!==t&&(!a||a&&!a.includes(o))}),i.forEach(o=>{var a=this.pseudoTrackers[o].target;this.pseudoTrackers[o].target&&(this.dispatch(o+"-mouseleave",n,a),this.pseudoTrackers[o].target=null)})}bindSubscriptionWatchers(){var t=Object.keys(this.listeners),n=Object.values(this.componentMap);for(let i of n)for(let r of t){let o=i+"-"+r;this.subscriptionChange(o,this.subscriptionChanged.bind(this,i,r))}this.subscribe("table-destroy",this.clearWatchers.bind(this))}subscriptionChanged(t,n,i){var r=this.listeners[n].components,o=r.indexOf(t),a=!1;i?o===-1&&(r.push(t),a=!0):this.subscribed(t+"-"+n)||o>-1&&(r.splice(o,1),a=!0),(n==="mouseenter"||n==="mouseleave")&&!this.pseudoTracking&&this.bindPseudoEvents(),a&&this.updateEventListeners()}updateEventListeners(){for(let t in this.listeners){let n=this.listeners[t];n.components.length?n.handler||(n.handler=this.track.bind(this,t),this.el.addEventListener(t,n.handler)):n.handler&&(this.el.removeEventListener(t,n.handler),n.handler=null)}}track(t,n){var i=n.composedPath&&n.composedPath()||n.path,r=this.findTargets(i);r=this.bindComponents(t,r),this.triggerEvents(t,n,r),this.pseudoTracking&&(t=="mouseover"||t=="mouseleave")&&!Object.keys(r).length&&this.pseudoMouseLeave("none",n)}findTargets(t){var n={};let i=Object.keys(this.componentMap);for(let r of t){let o=r.classList?[...r.classList]:[];if(o.filter(u=>this.abortClasses.includes(u)).length)break;let s=o.filter(u=>i.includes(u));for(let u of s)n[this.componentMap[u]]||(n[this.componentMap[u]]=r)}return n.group&&n.group===n.row&&delete n.row,n}bindComponents(t,n){var i=Object.keys(n).reverse(),r=this.listeners[t],o={},a={};for(let s of i){let u,f=n[s],c=this.previousTargets[s];if(c&&c.target===f)u=c.component;else switch(s){case"row":case"group":(r.components.includes("row")||r.components.includes("cell")||r.components.includes("group"))&&(u=this.table.rowManager.getVisibleRows(!0).find(m=>m.getElement()===f),n.row&&n.row.parentNode&&n.row.parentNode.closest(".tabulator-row")&&(n[s]=!1));break;case"column":r.components.includes("column")&&(u=this.table.columnManager.findColumn(f));break;case"cell":r.components.includes("cell")&&(o.row instanceof Io?u=o.row.findCell(f):n.row&&console.warn("Event Target Lookup Error - The row this cell is attached to cannot be found, has the table been reinitialized without being destroyed first?"));break}u&&(o[s]=u,a[s]={target:f,component:u})}return this.previousTargets=a,o}triggerEvents(t,n,i){var r=this.listeners[t];for(let o in i)i[o]&&r.components.includes(o)&&this.dispatch(o+"-"+t,n,i[o])}clearWatchers(){for(let t in this.listeners){let n=this.listeners[t];n.handler&&(this.el.removeEventListener(t,n.handler),n.handler=null)}}},Uf=class{constructor(t){this.table=t,this.bindings={}}bind(t,n,i){this.bindings[t]||(this.bindings[t]={}),this.bindings[t][n]?console.warn("Unable to bind component handler, a matching function name is already bound",t,n,i):this.bindings[t][n]=i}handle(t,n,i){if(this.bindings[t]&&this.bindings[t][i]&&typeof this.bindings[t][i].bind=="function")return this.bindings[t][i].bind(null,n);i!=="then"&&typeof i=="string"&&!i.startsWith("_")&&this.table.options.debugInvalidComponentFuncs&&console.error("The "+t+" component does not have a "+i+" function, have you checked that you have the correct Tabulator module installed?")}},Vf=class extends cs{constructor(t){super(t),this.requestOrder=0,this.loading=!1}initialize(){}load(t,n,i,r,o,a){var s=++this.requestOrder;if(this.table.destroyed)return Promise.resolve();if(this.dispatchExternal("dataLoading",t),t&&(t.indexOf("{")==0||t.indexOf("[")==0)&&(t=JSON.parse(t)),this.confirm("data-loading",[t,n,i,o])){this.loading=!0,o||this.alertLoader(),n=this.chain("data-params",[t,i,o],n||{},n||{}),n=this.mapParams(n,this.table.options.dataSendParams);var u=this.chain("data-load",[t,n,i,o],!1,Promise.resolve([]));return u.then(f=>{if(this.table.destroyed)console.warn("Data Load Response Blocked - Table has been destroyed");else{!Array.isArray(f)&&typeof f=="object"&&(f=this.mapParams(f,this.objectInvert(this.table.options.dataReceiveParams)));var c=this.chain("data-loaded",[f],null,f);s==this.requestOrder?(this.clearAlert(),c!==!1&&(this.dispatchExternal("dataLoaded",c),this.table.rowManager.setData(c,r,typeof a>"u"?!r:a))):console.warn("Data Load Response Blocked - An active data load request was blocked by an attempt to change table data while the request was being made")}}).catch(f=>{console.error("Data Load Error: ",f),this.dispatchExternal("dataLoadError",f),o||this.alertError(),setTimeout(()=>{this.clearAlert()},this.table.options.dataLoaderErrorTimeout)}).finally(()=>{this.loading=!1})}else return this.dispatchExternal("dataLoaded",t),t||(t=[]),this.table.rowManager.setData(t,r,typeof a>"u"?!r:a),Promise.resolve()}mapParams(t,n){var i={};for(let r in t)i[n.hasOwnProperty(r)?n[r]:r]=t[r];return i}objectInvert(t){var n={};for(let i in t)n[t[i]]=i;return n}blockActiveLoad(){this.requestOrder++}alertLoader(){var t=typeof this.table.options.dataLoader=="function"?this.table.options.dataLoader():this.table.options.dataLoader;t&&this.table.alertManager.alert(this.table.options.dataLoaderLoading||this.langText("data|loading"))}alertError(){this.table.alertManager.alert(this.table.options.dataLoaderError||this.langText("data|error"),"error")}clearAlert(){this.table.alertManager.clear()}},qf=class{constructor(t,n,i){this.table=t,this.events={},this.optionsList=n||{},this.subscriptionNotifiers={},this.dispatch=i?this._debugDispatch.bind(this):this._dispatch.bind(this),this.debug=i}subscriptionChange(t,n){this.subscriptionNotifiers[t]||(this.subscriptionNotifiers[t]=[]),this.subscriptionNotifiers[t].push(n),this.subscribed(t)&&this._notifySubscriptionChange(t,!0)}subscribe(t,n){this.events[t]||(this.events[t]=[]),this.events[t].push(n),this._notifySubscriptionChange(t,!0)}unsubscribe(t,n){var i;if(this.events[t])if(n)if(i=this.events[t].findIndex(r=>r===n),i>-1)this.events[t].splice(i,1);else{console.warn("Cannot remove event, no matching event found:",t,n);return}else delete this.events[t];else{console.warn("Cannot remove event, no events set on:",t);return}this._notifySubscriptionChange(t,!1)}subscribed(t){return this.events[t]&&this.events[t].length}_notifySubscriptionChange(t,n){var i=this.subscriptionNotifiers[t];i&&i.forEach(r=>{r(n)})}_dispatch(){var t=Array.from(arguments),n=t.shift(),i;return this.events[n]&&this.events[n].forEach((r,o)=>{let a=r.apply(this.table,t);o||(i=a)}),i}_debugDispatch(){var t=Array.from(arguments),n=t[0];return t[0]="ExternalEvent:"+t[0],(this.debug===!0||this.debug.includes(n))&&console.log(...t),this._dispatch(...arguments)}},Wf=class{constructor(t){this.events={},this.subscriptionNotifiers={},this.dispatch=t?this._debugDispatch.bind(this):this._dispatch.bind(this),this.chain=t?this._debugChain.bind(this):this._chain.bind(this),this.confirm=t?this._debugConfirm.bind(this):this._confirm.bind(this),this.debug=t}subscriptionChange(t,n){this.subscriptionNotifiers[t]||(this.subscriptionNotifiers[t]=[]),this.subscriptionNotifiers[t].push(n),this.subscribed(t)&&this._notifySubscriptionChange(t,!0)}subscribe(t,n,i=1e4){this.events[t]||(this.events[t]=[]),this.events[t].push({callback:n,priority:i}),this.events[t].sort((r,o)=>r.priority-o.priority),this._notifySubscriptionChange(t,!0)}unsubscribe(t,n){var i;if(this.events[t]){if(n)if(i=this.events[t].findIndex(r=>r.callback===n),i>-1)this.events[t].splice(i,1);else{console.warn("Cannot remove event, no matching event found:",t,n);return}}else{console.warn("Cannot remove event, no events set on:",t);return}this._notifySubscriptionChange(t,!1)}subscribed(t){return this.events[t]&&this.events[t].length}_chain(t,n,i,r){var o=i;return Array.isArray(n)||(n=[n]),this.subscribed(t)?(this.events[t].forEach((a,s)=>{o=a.callback.apply(this,n.concat([o]))}),o):typeof r=="function"?r():r}_confirm(t,n){var i=!1;return Array.isArray(n)||(n=[n]),this.subscribed(t)&&this.events[t].forEach((r,o)=>{r.callback.apply(this,n)&&(i=!0)}),i}_notifySubscriptionChange(t,n){var i=this.subscriptionNotifiers[t];i&&i.forEach(r=>{r(n)})}_dispatch(){var t=Array.from(arguments),n=t.shift();this.events[n]&&this.events[n].forEach(i=>{i.callback.apply(this,t)})}_debugDispatch(){var t=Array.from(arguments),n=t[0];return t[0]="InternalEvent:"+n,(this.debug===!0||this.debug.includes(n))&&console.log(...t),this._dispatch(...arguments)}_debugChain(){var t=Array.from(arguments),n=t[0];return t[0]="InternalEvent:"+n,(this.debug===!0||this.debug.includes(n))&&console.log(...t),this._chain(...arguments)}_debugConfirm(){var t=Array.from(arguments),n=t[0];return t[0]="InternalEvent:"+n,(this.debug===!0||this.debug.includes(n))&&console.log(...t),this._confirm(...arguments)}},Xf=class extends cs{constructor(t){super(t)}_warnUser(){this.options("debugDeprecation")&&console.warn(...arguments)}check(t,n,i){var r="";return typeof this.options(t)<"u"?(r="Deprecated Setup Option - Use of the %c"+t+"%c option is now deprecated",n?(r=r+", Please use the %c"+n+"%c option instead",this._warnUser(r,"font-weight: bold;","font-weight: normal;","font-weight: bold;","font-weight: normal;"),i&&(this.table.options[n]=this.table.options[t])):this._warnUser(r,"font-weight: bold;","font-weight: normal;"),!1):!0}checkMsg(t,n){return typeof this.options(t)<"u"?(this._warnUser("%cDeprecated Setup Option - Use of the %c"+t+" %c option is now deprecated, "+n,"font-weight: normal;","font-weight: bold;","font-weight: normal;"),!1):!0}msg(t){this._warnUser(t)}};function Gw(e,t){t&&this.table.columnManager.renderer.reinitializeColumnWidths(e),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()}function B0(e,t){e.forEach(function(n){n.reinitializeWidth()}),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()}function Uw(e,t){var n=0,i=this.table.rowManager.element.clientWidth,r=0,o=!1;e.forEach((a,s)=>{a.widthFixed||a.reinitializeWidth(),(this.table.options.responsiveLayout?a.modules.responsive.visible:a.visible)&&(o=a),a.visible&&(n+=a.getWidth())}),o?(r=i-n+o.getWidth(),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&(o.setWidth(0),this.table.modules.responsiveLayout.update()),r>0?o.setWidth(r):o.reinitializeWidth()):this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()}function Vw(e,t){var n=this.table.rowManager.element.getBoundingClientRect().width,i=0,r=0,o=0,a=0,s=[],u=[],f=0,c=0,d=0;function m(p){var _;return typeof p=="string"?p.indexOf("%")>-1?_=n/100*parseInt(p):_=parseInt(p):_=p,_}function v(p,_,y,x){var S=[],O=0,B=0,U=0,z=o,q=0,G=0,tt=[];function K(N){return y*(N.column.definition.widthGrow||1)}function D(N){return m(N.width)-y*(N.column.definition.widthShrink||0)}return p.forEach(function(N,Z){var w=x?D(N):K(N);N.column.minWidth>=w?S.push(N):N.column.maxWidth&&N.column.maxWidth<w?(N.width=N.column.maxWidth,_-=N.column.maxWidth,z-=x?N.column.definition.widthShrink||1:N.column.definition.widthGrow||1,z&&(y=Math.floor(_/z))):(tt.push(N),G+=x?N.column.definition.widthShrink||1:N.column.definition.widthGrow||1)}),S.length?(S.forEach(function(N){O+=x?N.width-N.column.minWidth:N.column.minWidth,N.width=N.column.minWidth}),B=_-O,U=G?Math.floor(B/G):B,q=v(tt,B,U,x)):(q=G?_-Math.floor(_/G)*G:_,tt.forEach(function(N){N.width=x?D(N):K(N)})),q}this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update(),this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(n-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),e.forEach(function(p){var _,y,x;p.visible&&(_=p.definition.width,y=parseInt(p.minWidth),_?(x=m(_),i+=x>y?x:y,p.definition.widthShrink&&(u.push({column:p,width:x>y?x:y}),f+=p.definition.widthShrink)):(s.push({column:p,width:0}),o+=p.definition.widthGrow||1))}),r=n-i,a=Math.floor(r/o),d=v(s,r,a,!1),s.length&&d>0&&(s[s.length-1].width+=d),s.forEach(function(p){r-=p.width}),c=Math.abs(d)+r,c>0&&f&&(d=v(u,c,Math.floor(c/f),!0)),d&&u.length&&(u[u.length-1].width-=d),s.forEach(function(p){p.column.setWidth(p.width)}),u.forEach(function(p){p.column.setWidth(p.width)})}var qw={fitData:Gw,fitDataFill:B0,fitDataTable:B0,fitDataStretch:Uw,fitColumns:Vw},$f=class e extends Vl{static moduleName="layout";static modes=qw;constructor(t){super(t,"layout"),this.mode=null,this.registerTableOption("layout","fitData"),this.registerTableOption("layoutColumnsOnNewData",!1),this.registerColumnOption("widthGrow"),this.registerColumnOption("widthShrink")}initialize(){var t=this.table.options.layout;e.modes[t]?this.mode=t:(console.warn("Layout Error - invalid mode set, defaulting to 'fitData' : "+t),this.mode="fitData"),this.table.element.setAttribute("tabulator-layout",this.mode),this.subscribe("column-init",this.initializeColumn.bind(this))}initializeColumn(t){t.definition.widthGrow&&(t.definition.widthGrow=Number(t.definition.widthGrow)),t.definition.widthShrink&&(t.definition.widthShrink=Number(t.definition.widthShrink))}getMode(){return this.mode}layout(t){this.dispatch("layout-refreshing"),e.modes[this.mode].call(this,this.table.columnManager.columnsByIndex,t),this.dispatch("layout-refreshed")}},Ww={default:{groups:{item:"item",items:"items"},columns:{},data:{loading:"Loading",error:"Error"},pagination:{page_size:"Page Size",page_title:"Show Page",first:"First",first_title:"First Page",last:"Last",last_title:"Last Page",prev:"Prev",prev_title:"Prev Page",next:"Next",next_title:"Next Page",all:"All",counter:{showing:"Showing",of:"of",rows:"rows",pages:"pages"}},headerFilters:{default:"filter column...",columns:{}}}},Yf=class e extends Vl{static moduleName="localize";static langs=Ww;constructor(t){super(t),this.locale="default",this.lang=!1,this.bindings={},this.langList={},this.registerTableOption("locale",!1),this.registerTableOption("langs",{})}initialize(){this.langList=Yn.deepClone(e.langs),this.table.options.columnDefaults.headerFilterPlaceholder!==!1&&this.setHeaderFilterPlaceholder(this.table.options.columnDefaults.headerFilterPlaceholder);for(let t in this.table.options.langs)this.installLang(t,this.table.options.langs[t]);this.setLocale(this.table.options.locale),this.registerTableFunction("setLocale",this.setLocale.bind(this)),this.registerTableFunction("getLocale",this.getLocale.bind(this)),this.registerTableFunction("getLang",this.getLang.bind(this))}setHeaderFilterPlaceholder(t){this.langList.default.headerFilters.default=t}installLang(t,n){this.langList[t]?this._setLangProp(this.langList[t],n):this.langList[t]=n}_setLangProp(t,n){for(let i in n)t[i]&&typeof t[i]=="object"?this._setLangProp(t[i],n[i]):t[i]=n[i]}setLocale(t){t=t||"default";function n(i,r){for(var o in i)typeof i[o]=="object"?(r[o]||(r[o]={}),n(i[o],r[o])):r[o]=i[o]}if(t===!0&&navigator.language&&(t=navigator.language.toLowerCase()),t&&!this.langList[t]){let i=t.split("-")[0];this.langList[i]?(console.warn("Localization Error - Exact matching locale not found, using closest match: ",t,i),t=i):(console.warn("Localization Error - Matching locale not found, using default: ",t),t="default")}this.locale=t,this.lang=Yn.deepClone(this.langList.default||{}),t!="default"&&n(this.langList[t],this.lang),this.dispatchExternal("localized",this.locale,this.lang),this._executeBindings()}getLocale(t){return this.locale}getLang(t){return t?this.langList[t]:this.lang}getText(t,n){var i=n?t+"|"+n:t,r=i.split("|"),o=this._getLangElement(r,this.locale);return o||""}_getLangElement(t,n){var i=this.lang;return t.forEach(function(r){var o;i&&(o=i[r],typeof o<"u"?i=o:i=!1)}),i}bind(t,n){this.bindings[t]||(this.bindings[t]=[]),this.bindings[t].push(n),n(this.getText(t),this.lang)}_executeBindings(){for(let t in this.bindings)this.bindings[t].forEach(n=>{n(this.getText(t),this.lang)})}},Zf=class extends Vl{static moduleName="comms";constructor(t){super(t)}initialize(){this.registerTableFunction("tableComms",this.receive.bind(this))}getConnections(t){var n=[],i;return i=this.table.constructor.registry.lookupTable(t),i.forEach(r=>{this.table!==r&&n.push(r)}),n}send(t,n,i,r){var o=this.getConnections(t);o.forEach(a=>{a.tableComms(this.table.element,n,i,r)}),!o.length&&t&&console.warn("Table Connection Error - No tables matching selector found",t)}receive(t,n,i,r){if(this.table.modExists(n))return this.table.modules[n].commsReceived(t,i,r);console.warn("Inter-table Comms Error - no such module:",n)}},Xw=Object.freeze({__proto__:null,CommsModule:Zf,LayoutModule:$f,LocalizeModule:Yf}),Kf=class e{static registry={tables:[],register(t){e.registry.tables.push(t)},deregister(t){var n=e.registry.tables.indexOf(t);n>-1&&e.registry.tables.splice(n,1)},lookupTable(t,n){var i=[],r,o;if(typeof t=="string"){if(r=document.querySelectorAll(t),r.length)for(var a=0;a<r.length;a++)o=e.registry.matchElement(r[a]),o&&i.push(o)}else typeof HTMLElement<"u"&&t instanceof HTMLElement||t instanceof e?(o=e.registry.matchElement(t),o&&i.push(o)):Array.isArray(t)?t.forEach(function(s){i=i.concat(e.registry.lookupTable(s))}):n||console.warn("Table Connection Error - Invalid Selector",t);return i},matchElement(t){return e.registry.tables.find(function(n){return t instanceof e?n===t:n.element===t})}};static findTable(t){var n=e.registry.lookupTable(t,!0);return Array.isArray(n)&&!n.length?!1:n}},Jf=class e extends Kf{static moduleBindings={};static moduleExtensions={};static modulesRegistered=!1;static defaultModules=!1;constructor(){super()}static initializeModuleBinder(t){e.modulesRegistered||(e.modulesRegistered=!0,e._registerModules(Xw,!0),t&&e._registerModules(t))}static _extendModule(t,n,i){if(e.moduleBindings[t]){var r=e.moduleBindings[t][n];if(r)if(typeof i=="object")for(let o in i)r[o]=i[o];else console.warn("Module Error - Invalid value type, it must be an object");else console.warn("Module Error - property does not exist:",n)}else console.warn("Module Error - module does not exist:",t)}static _registerModules(t,n){var i=Object.values(t);n&&i.forEach(r=>{r.prototype.moduleCore=!0}),e._registerModule(i)}static _registerModule(t){Array.isArray(t)||(t=[t]),t.forEach(n=>{e._registerModuleBinding(n),e._registerModuleExtensions(n)})}static _registerModuleBinding(t){t.moduleName?e.moduleBindings[t.moduleName]=t:console.error("Unable to bind module, no moduleName defined",t.moduleName)}static _registerModuleExtensions(t){var n=t.moduleExtensions;if(t.moduleExtensions)for(let i in n){let r=n[i];if(e.moduleBindings[i])for(let o in r)e._extendModule(i,o,r[o]);else{e.moduleExtensions[i]||(e.moduleExtensions[i]={});for(let o in r)e.moduleExtensions[i][o]||(e.moduleExtensions[i][o]={}),Object.assign(e.moduleExtensions[i][o],r[o])}}e._extendModuleFromQueue(t)}static _extendModuleFromQueue(t){var n=e.moduleExtensions[t.moduleName];if(n)for(let i in n)e._extendModule(t.moduleName,i,n[i])}_bindModules(){var t=[],n=[],i=[];this.modules={};for(var r in e.moduleBindings){let o=e.moduleBindings[r],a=new o(this);this.modules[r]=a,o.prototype.moduleCore?this.modulesCore.push(a):o.moduleInitOrder?o.moduleInitOrder<0?t.push(a):n.push(a):i.push(a)}t.sort((o,a)=>o.moduleInitOrder>a.moduleInitOrder?1:-1),n.sort((o,a)=>o.moduleInitOrder>a.moduleInitOrder?1:-1),this.modulesRegular=t.concat(i.concat(n))}},Qf=class extends cs{constructor(t){super(t),this.element=this._createAlertElement(),this.msgElement=this._createMsgElement(),this.type=null,this.element.appendChild(this.msgElement)}_createAlertElement(){var t=document.createElement("div");return t.classList.add("tabulator-alert"),t}_createMsgElement(){var t=document.createElement("div");return t.classList.add("tabulator-alert-msg"),t.setAttribute("role","alert"),t}_typeClass(){return"tabulator-alert-state-"+this.type}alert(t,n="msg"){if(t){for(this.clear(),this.dispatch("alert-show",n),this.type=n;this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.add(this._typeClass()),typeof t=="function"&&(t=t()),t instanceof HTMLElement?this.msgElement.appendChild(t):this.msgElement.innerHTML=t,this.table.element.appendChild(this.element)}}clear(){this.dispatch("alert-hide",this.type),this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.msgElement.classList.remove(this._typeClass())}},td=class e extends Jf{static defaultOptions=Hw;static extendModule(){e.initializeModuleBinder(),e._extendModule(...arguments)}static registerModule(){e.initializeModuleBinder(),e._registerModule(...arguments)}constructor(t,n,i){super(),e.initializeModuleBinder(i),this.options={},this.columnManager=null,this.rowManager=null,this.footerManager=null,this.alertManager=null,this.vdomHoz=null,this.externalEvents=null,this.eventBus=null,this.interactionMonitor=!1,this.browser="",this.browserSlow=!1,this.browserMobile=!1,this.rtl=!1,this.originalElement=null,this.componentFunctionBinder=new Uf(this),this.dataLoader=!1,this.modules={},this.modulesCore=[],this.modulesRegular=[],this.deprecationAdvisor=new Xf(this),this.optionsList=new dh(this,"table constructor"),this.initialized=!1,this.destroyed=!1,this.initializeElement(t)&&(this.initializeCoreSystems(n),setTimeout(()=>{this._create()})),this.constructor.registry.register(this)}initializeElement(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement?(this.element=t,!0):typeof t=="string"?(this.element=document.querySelector(t),this.element?!0:(console.error("Tabulator Creation Error - no element found matching selector: ",t),!1)):(console.error("Tabulator Creation Error - Invalid element provided:",t),!1)}initializeCoreSystems(t){this.columnManager=new Bf(this),this.rowManager=new jf(this),this.footerManager=new Hf(this),this.dataLoader=new Vf(this),this.alertManager=new Qf(this),this._bindModules(),this.options=this.optionsList.generate(e.defaultOptions,t),this._clearObjectPointers(),this._mapDeprecatedFunctionality(),this.externalEvents=new qf(this,this.options,this.options.debugEventsExternal),this.eventBus=new Wf(this.options.debugEventsInternal),this.interactionMonitor=new Gf(this),this.dataLoader.initialize(),this.footerManager.initialize()}_mapDeprecatedFunctionality(){}_clearSelection(){this.element.classList.add("tabulator-block-select"),window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty(),this.element.classList.remove("tabulator-block-select")}_create(){this.externalEvents.dispatch("tableBuilding"),this.eventBus.dispatch("table-building"),this._rtlCheck(),this._buildElement(),this._initializeTable(),this.initialized=!0,this._loadInitialData().finally(()=>{this.eventBus.dispatch("table-initialized"),this.externalEvents.dispatch("tableBuilt")})}_rtlCheck(){var t=window.getComputedStyle(this.element);switch(this.options.textDirection){case"auto":if(t.direction!=="rtl")break;case"rtl":this.element.classList.add("tabulator-rtl"),this.rtl=!0;break;case"ltr":this.element.classList.add("tabulator-ltr");default:this.rtl=!1}}_clearObjectPointers(){this.options.columns=this.options.columns.slice(0),Array.isArray(this.options.data)&&!this.options.reactiveData&&(this.options.data=this.options.data.slice(0))}_buildElement(){var t=this.element,n=this.options,i;if(t.tagName==="TABLE"){this.originalElement=this.element,i=document.createElement("div");var r=t.attributes;for(var o in r)typeof r[o]=="object"&&i.setAttribute(r[o].name,r[o].value);t.parentNode.replaceChild(i,t),this.element=t=i}for(t.classList.add("tabulator"),t.setAttribute("role","grid");t.firstChild;)t.removeChild(t.firstChild);n.height&&(n.height=isNaN(n.height)?n.height:n.height+"px",t.style.height=n.height),n.minHeight!==!1&&(n.minHeight=isNaN(n.minHeight)?n.minHeight:n.minHeight+"px",t.style.minHeight=n.minHeight),n.maxHeight!==!1&&(n.maxHeight=isNaN(n.maxHeight)?n.maxHeight:n.maxHeight+"px",t.style.maxHeight=n.maxHeight)}_initializeTable(){var t=this.element,n=this.options;this.interactionMonitor.initialize(),this.columnManager.initialize(),this.rowManager.initialize(),this._detectBrowser(),this.modulesCore.forEach(i=>{i.initialize()}),t.appendChild(this.columnManager.getElement()),t.appendChild(this.rowManager.getElement()),n.footerElement&&this.footerManager.activate(),n.autoColumns&&n.data&&this.columnManager.generateColumnsFromRowData(this.options.data),this.modulesRegular.forEach(i=>{i.initialize()}),this.columnManager.setColumns(n.columns),this.eventBus.dispatch("table-built")}_loadInitialData(){return this.dataLoader.load(this.options.data).finally(()=>{this.columnManager.verticalAlignHeaders()})}destroy(){var t=this.element;for(this.destroyed=!0,this.constructor.registry.deregister(this),this.eventBus.dispatch("table-destroy"),this.rowManager.destroy();t.firstChild;)t.removeChild(t.firstChild);t.classList.remove("tabulator"),this.externalEvents.dispatch("tableDestroyed")}_detectBrowser(){var t=navigator.userAgent||navigator.vendor||window.opera;t.indexOf("Trident")>-1?(this.browser="ie",this.browserSlow=!0):t.indexOf("Edge")>-1?(this.browser="edge",this.browserSlow=!0):t.indexOf("Firefox")>-1?(this.browser="firefox",this.browserSlow=!1):t.indexOf("Mac OS")>-1?(this.browser="safari",this.browserSlow=!1):(this.browser="other",this.browserSlow=!1),this.browserMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(t.slice(0,4))}initGuard(t,n){var i,r;return this.options.debugInitialization&&!this.initialized&&(t||(i=new Error().stack.split(`
`),r=i[0]=="Error"?i[2]:i[1],r[0]==" "?t=r.trim().split(" ")[1].split(".")[1]:t=r.trim().split("@")[0]),console.warn("Table Not Initialized - Calling the "+t+" function before the table is initialized may result in inconsistent behavior, Please wait for the `tableBuilt` event before calling this function."+(n?" "+n:""))),this.initialized}blockRedraw(){this.initGuard(),this.eventBus.dispatch("redraw-blocking"),this.rowManager.blockRedraw(),this.columnManager.blockRedraw(),this.eventBus.dispatch("redraw-blocked")}restoreRedraw(){this.initGuard(),this.eventBus.dispatch("redraw-restoring"),this.rowManager.restoreRedraw(),this.columnManager.restoreRedraw(),this.eventBus.dispatch("redraw-restored")}setData(t,n,i){return this.initGuard(!1,"To set initial data please use the 'data' property in the table constructor."),this.dataLoader.load(t,n,i,!1)}clearData(){this.initGuard(),this.dataLoader.blockActiveLoad(),this.rowManager.clearData()}getData(t){return this.rowManager.getData(t)}getDataCount(t){return this.rowManager.getDataCount(t)}replaceData(t,n,i){return this.initGuard(),this.dataLoader.load(t,n,i,!0,!0)}updateData(t){var n=0;return this.initGuard(),new Promise((i,r)=>{this.dataLoader.blockActiveLoad(),typeof t=="string"&&(t=JSON.parse(t)),t&&t.length>0?t.forEach(o=>{var a=this.rowManager.findRow(o[this.options.index]);a?(n++,a.updateData(o).then(()=>{n--,n||i()}).catch(s=>{r("Update Error - Unable to update row",o,s)})):r("Update Error - Unable to find row",o)}):(console.warn("Update Error - No data provided"),r("Update Error - No data provided"))})}addData(t,n,i){return this.initGuard(),new Promise((r,o)=>{this.dataLoader.blockActiveLoad(),typeof t=="string"&&(t=JSON.parse(t)),t?this.rowManager.addRows(t,n,i).then(a=>{var s=[];a.forEach(function(u){s.push(u.getComponent())}),r(s)}):(console.warn("Update Error - No data provided"),o("Update Error - No data provided"))})}updateOrAddData(t){var n=[],i=0;return this.initGuard(),new Promise((r,o)=>{this.dataLoader.blockActiveLoad(),typeof t=="string"&&(t=JSON.parse(t)),t&&t.length>0?t.forEach(a=>{var s=this.rowManager.findRow(a[this.options.index]);i++,s?s.updateData(a).then(()=>{i--,n.push(s.getComponent()),i||r(n)}):this.rowManager.addRows(a).then(u=>{i--,n.push(u[0].getComponent()),i||r(n)})}):(console.warn("Update Error - No data provided"),o("Update Error - No data provided"))})}getRow(t){var n=this.rowManager.findRow(t);return n?n.getComponent():(console.warn("Find Error - No matching row found:",t),!1)}getRowFromPosition(t){var n=this.rowManager.getRowFromPosition(t);return n?n.getComponent():(console.warn("Find Error - No matching row found:",t),!1)}deleteRow(t){var n=[];this.initGuard(),Array.isArray(t)||(t=[t]);for(let i of t){let r=this.rowManager.findRow(i,!0);if(r)n.push(r);else return console.error("Delete Error - No matching row found:",i),Promise.reject("Delete Error - No matching row found")}return n.sort((i,r)=>this.rowManager.rows.indexOf(i)>this.rowManager.rows.indexOf(r)?1:-1),n.forEach(i=>{i.delete()}),this.rowManager.reRenderInPosition(),Promise.resolve()}addRow(t,n,i){return this.initGuard(),typeof t=="string"&&(t=JSON.parse(t)),this.rowManager.addRows(t,n,i,!0).then(r=>r[0].getComponent())}updateOrAddRow(t,n){var i=this.rowManager.findRow(t);return this.initGuard(),typeof n=="string"&&(n=JSON.parse(n)),i?i.updateData(n).then(()=>i.getComponent()):this.rowManager.addRows(n).then(r=>r[0].getComponent())}updateRow(t,n){var i=this.rowManager.findRow(t);return this.initGuard(),typeof n=="string"&&(n=JSON.parse(n)),i?i.updateData(n).then(()=>Promise.resolve(i.getComponent())):(console.warn("Update Error - No matching row found:",t),Promise.reject("Update Error - No matching row found"))}scrollToRow(t,n,i){var r=this.rowManager.findRow(t);return r?this.rowManager.scrollToRow(r,n,i):(console.warn("Scroll Error - No matching row found:",t),Promise.reject("Scroll Error - No matching row found"))}moveRow(t,n,i){var r=this.rowManager.findRow(t);this.initGuard(),r?r.moveToRow(n,i):console.warn("Move Error - No matching row found:",t)}getRows(t){return this.rowManager.getComponents(t)}getRowPosition(t){var n=this.rowManager.findRow(t);return n?n.getPosition():(console.warn("Position Error - No matching row found:",t),!1)}setColumns(t){this.initGuard(!1,"To set initial columns please use the 'columns' property in the table constructor"),this.columnManager.setColumns(t)}getColumns(t){return this.columnManager.getComponents(t)}getColumn(t){var n=this.columnManager.findColumn(t);return n?n.getComponent():(console.warn("Find Error - No matching column found:",t),!1)}getColumnDefinitions(){return this.columnManager.getDefinitionTree()}showColumn(t){var n=this.columnManager.findColumn(t);if(this.initGuard(),n)n.show();else return console.warn("Column Show Error - No matching column found:",t),!1}hideColumn(t){var n=this.columnManager.findColumn(t);if(this.initGuard(),n)n.hide();else return console.warn("Column Hide Error - No matching column found:",t),!1}toggleColumn(t){var n=this.columnManager.findColumn(t);if(this.initGuard(),n)n.visible?n.hide():n.show();else return console.warn("Column Visibility Toggle Error - No matching column found:",t),!1}addColumn(t,n,i){var r=this.columnManager.findColumn(i);return this.initGuard(),this.columnManager.addColumn(t,n,r).then(o=>o.getComponent())}deleteColumn(t){var n=this.columnManager.findColumn(t);return this.initGuard(),n?n.delete():(console.warn("Column Delete Error - No matching column found:",t),Promise.reject())}updateColumnDefinition(t,n){var i=this.columnManager.findColumn(t);return this.initGuard(),i?i.updateDefinition(n):(console.warn("Column Update Error - No matching column found:",t),Promise.reject())}moveColumn(t,n,i){var r=this.columnManager.findColumn(t),o=this.columnManager.findColumn(n);this.initGuard(),r?o?this.columnManager.moveColumn(r,o,i):console.warn("Move Error - No matching column found:",o):console.warn("Move Error - No matching column found:",t)}scrollToColumn(t,n,i){return new Promise((r,o)=>{var a=this.columnManager.findColumn(t);return a?this.columnManager.scrollToColumn(a,n,i):(console.warn("Scroll Error - No matching column found:",t),Promise.reject("Scroll Error - No matching column found"))})}redraw(t){this.initGuard(),this.columnManager.redraw(t),this.rowManager.redraw(t)}setHeight(t){this.options.height=isNaN(t)?t:t+"px",this.element.style.height=this.options.height,this.rowManager.initializeRenderer(),this.rowManager.redraw(!0)}on(t,n){this.externalEvents.subscribe(t,n)}off(t,n){this.externalEvents.unsubscribe(t,n)}dispatchEvent(){var t=Array.from(arguments);t.shift(),this.externalEvents.dispatch(...arguments)}alert(t,n){this.initGuard(),this.alertManager.alert(t,n)}clearAlert(){this.initGuard(),this.alertManager.clear()}modExists(t,n){return this.modules[t]?!0:(n&&console.error("Tabulator Module Not Installed: "+t),!1)}module(t){var n=this.modules[t];return n||console.error("Tabulator module not installed: "+t),n}},j0=td;var U0=hr(G0()),V0=async()=>{let i=await(await fetch("https://placement.freaks.se/api/v1/mapentities")).json(),r=[],o=i.length,a=0,s=0,u=0;for(let p of i){let{properties:_}=JSON.parse(p.geoJson),y={name:String(_.name),additionalSqm:Number(_.additionalSqm),amplifiedSound:Number(_.amplifiedSound),color:String(_.color),contactInfo:String(_.contactInfo),description:String(_.description),nrOfPeople:Number(_.nrOfPeople),nrOfVechiles:Number(_.nrOfVechiles),powerNeed:Number(_.powerNeed),revision:Number(p.revision)};a+=+y.nrOfPeople,s+=y.nrOfVechiles,u+=y.powerNeed,r.push(y)}console.log({totalNrOfEntries:o,totalNrOfPeople:a,totalNrOfVechiles:s,totalPowerNeed:u}),new j0("#stats",{data:r,autoColumns:!0});let f=new U0.default.Workbook;f.creator="Borderland Community Cocreators";let c=f.addWorksheet("Camps");c.columns=[{header:"Name",key:"name"},{header:"Revision",key:"revision"},{header:"AdditionalSqm",key:"additionalSqm"},{header:"AmplifiedSound",key:"amplifiedSound"},{header:"Color",key:"color"},{header:"ContactInfo",key:"contactInfo"},{header:"Description",key:"description"},{header:"NrOfPeople",key:"nrOfPeople"},{header:"NrOfVechiles",key:"nrOfVechiles"},{header:"PowerNeed",key:"powerNeed"}],r.forEach(p=>c.addRow(p));let d=await f.xlsx.writeBuffer(),m=URL.createObjectURL(new Blob([d],{type:"application/xlsx"})),v=document.createElement("a");v.classList.add("button"),v.innerHTML="Download XLSX File",v.href=m,document.querySelector("#header").appendChild(v)};async function $w(){try{await D0()}catch(e){console.error(e)}localStorage.getItem("hasSeenPlacementWelcome")||ao({file:"welcome",position:"bottom",onClose:()=>{localStorage.setItem("hasSeenPlacementWelcome","true")}})}window.indexMain=$w;async function Yw(){await V0()}window.statsMain=Yw;})();
/*! Bundled license information:

leaflet/dist/leaflet-src.js:
  (* @preserve
   * Leaflet 1.9.3, a JS library for interactive maps. https://leafletjs.com
   * (c) 2010-2022 Vladimir Agafonkin, (c) 2010-2011 CloudMade
   *)

leaflet.locatecontrol/src/L.Control.Locate.js:
  (*!
  Copyright (c) 2016 Dominik Moritz
  
  This file is part of the leaflet locate control. It is licensed under the MIT license.
  You can find the project at: https://github.com/domoritz/leaflet-locatecontrol
  *)

object-assign/index.js:
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)

polygon-clipping/dist/polygon-clipping.umd.js:
  (**
   * splaytree v3.1.0
   * Fast Splay tree for Node and browser
   *
   * @author Alexander Milevski <info@w8r.name>
   * @license MIT
   * @preserve
   *)

dompurify/dist/purify.js:
  (*! @license DOMPurify 3.0.2 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.2/LICENSE *)

exceljs/dist/exceljs.min.js:
  (*! ExcelJS 19-10-2023 *)
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
  (*!
  
  JSZip v3.10.1 - A JavaScript class for generating and reading zip files
  <http://stuartk.com/jszip>
  
  (c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
  Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.
  
  JSZip uses the library pako released under the MIT license :
  https://github.com/nodeca/pako/blob/main/LICENSE
  *)
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
  (**
   * Character classes and associated utilities for the 5th edition of XML 1.0.
   *
   * @author Louis-Dominique Dubeau
   * @license MIT
   * @copyright Louis-Dominique Dubeau
   *)
  (**
   * Character classes and associated utilities for the 2nd edition of XML 1.1.
   *
   * @author Louis-Dominique Dubeau
   * @license MIT
   * @copyright Louis-Dominique Dubeau
   *)
  (**
   * Character class utilities for XML NS 1.0 edition 3.
   *
   * @author Louis-Dominique Dubeau
   * @license MIT
   * @copyright Louis-Dominique Dubeau
   *)

@turf/isolines/dist/es/index.js:
  (**
   * @license GNU Affero General Public License.
   * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
   * v. 1.2.0
   * https://github.com/RaumZeit/MarchingSquares.js
   *
   * MarchingSquaresJS is free software: you can redistribute it and/or modify
   * it under the terms of the GNU Affero General Public License as published by
   * the Free Software Foundation, either version 3 of the License, or
   * (at your option) any later version.
   *
   * MarchingSquaresJS is distributed in the hope that it will be useful,
   * but WITHOUT ANY WARRANTY; without even the implied warranty of
   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   * GNU Affero General Public License for more details.
   *
   * As additional permission under GNU Affero General Public License version 3
   * section 7, third-party projects (personal or commercial) may distribute,
   * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
   * requirement that said third-party project for that reason alone becomes
   * subject to any requirement of the GNU Affero General Public License version 3.
   * Any modifications to MarchingSquaresJS, however, must be shared with the public
   * and made available.
   *
   * In summary this:
   * - allows you to use MarchingSquaresJS at no cost
   * - allows you to use MarchingSquaresJS for both personal and commercial purposes
   * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
   *   license as long as this license notice is included
   * - enables you to keep the source code of your program that uses MarchingSquaresJS
   *   undisclosed
   * - forces you to share any modifications you have made to MarchingSquaresJS,
   *   e.g. bug-fixes
   *
   * You should have received a copy of the GNU Affero General Public License
   * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
   *)

@turf/isobands/dist/es/index.js:
  (*!
   * @license GNU Affero General Public License.
   * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
   * v. 1.2.0
   * https://github.com/RaumZeit/MarchingSquares.js
   *
   * MarchingSquaresJS is free software: you can redistribute it and/or modify
   * it under the terms of the GNU Affero General Public License as published by
   * the Free Software Foundation, either version 3 of the License, or
   * (at your option) any later version.
   *
   * MarchingSquaresJS is distributed in the hope that it will be useful,
   * but WITHOUT ANY WARRANTY; without even the implied warranty of
   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   * GNU Affero General Public License for more details.
   *
   * As additional permission under GNU Affero General Public License version 3
   * section 7, third-party projects (personal or commercial) may distribute,
   * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
   * requirement that said third-party project for that reason alone becomes
   * subject to any requirement of the GNU Affero General Public License version 3.
   * Any modifications to MarchingSquaresJS, however, must be shared with the public
   * and made available.
   *
   * In summary this:
   * - allows you to use MarchingSquaresJS at no cost
   * - allows you to use MarchingSquaresJS for both personal and commercial purposes
   * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
   *   license as long as this license notice is included
   * - enables you to keep the source code of your program that uses MarchingSquaresJS
   *   undisclosed
   * - forces you to share any modifications you have made to MarchingSquaresJS,
   *   e.g. bug-fixes
   *
   * You should have received a copy of the GNU Affero General Public License
   * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
   *)
*/
