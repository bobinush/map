(()=>{var r_=Object.create;var wf=Object.defineProperty;var i_=Object.getOwnPropertyDescriptor;var o_=Object.getOwnPropertyNames;var s_=Object.getPrototypeOf,a_=Object.prototype.hasOwnProperty;var se=(r,n)=>()=>(n||r((n={exports:{}}).exports,n),n.exports);var u_=(r,n,s,a)=>{if(n&&typeof n=="object"||typeof n=="function")for(let l of o_(n))!a_.call(r,l)&&l!==s&&wf(r,l,{get:()=>n[l],enumerable:!(a=i_(n,l))||a.enumerable});return r};var On=(r,n,s)=>(s=r!=null?r_(s_(r)):{},u_(n||!r||!r.__esModule?wf(s,"default",{value:r,enumerable:!0}):s,r));var Oo=se((Gu,Lf)=>{(function(r,n){typeof Gu=="object"&&typeof Lf<"u"?n(Gu):typeof define=="function"&&define.amd?define(["exports"],n):(r=typeof globalThis<"u"?globalThis:r||self,n(r.leaflet={}))})(Gu,function(r){"use strict";var n="1.9.3";function s(i){var f,y,M,O;for(y=1,M=arguments.length;y<M;y++){O=arguments[y];for(f in O)i[f]=O[f]}return i}var a=Object.create||function(){function i(){}return function(f){return i.prototype=f,new i}}();function l(i,f){var y=Array.prototype.slice;if(i.bind)return i.bind.apply(i,y.call(arguments,1));var M=y.call(arguments,2);return function(){return i.apply(f,M.length?M.concat(y.call(arguments)):arguments)}}var c=0;function g(i){return"_leaflet_id"in i||(i._leaflet_id=++c),i._leaflet_id}function m(i,f,y){var M,O,W,at;return at=function(){M=!1,O&&(W.apply(y,O),O=!1)},W=function(){M?O=arguments:(i.apply(y,arguments),setTimeout(at,f),M=!0)},W}function v(i,f,y){var M=f[1],O=f[0],W=M-O;return i===M&&y?i:((i-O)%W+W)%W+O}function x(){return!1}function P(i,f){if(f===!1)return i;var y=Math.pow(10,f===void 0?6:f);return Math.round(i*y)/y}function T(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function N(i){return T(i).split(/\s+/)}function G(i,f){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?a(i.options):{});for(var y in f)i.options[y]=f[y];return i.options}function z(i,f,y){var M=[];for(var O in i)M.push(encodeURIComponent(y?O.toUpperCase():O)+"="+encodeURIComponent(i[O]));return(!f||f.indexOf("?")===-1?"?":"&")+M.join("&")}var j=/\{ *([\w_ -]+) *\}/g;function R(i,f){return i.replace(j,function(y,M){var O=f[M];if(O===void 0)throw new Error("No value provided for variable "+y);return typeof O=="function"&&(O=O(f)),O})}var B=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function D(i,f){for(var y=0;y<i.length;y++)if(i[y]===f)return y;return-1}var A="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function q(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var H=0;function K(i){var f=+new Date,y=Math.max(0,16-(f-H));return H=f+y,window.setTimeout(i,y)}var et=window.requestAnimationFrame||q("RequestAnimationFrame")||K,X=window.cancelAnimationFrame||q("CancelAnimationFrame")||q("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function lt(i,f,y){if(y&&et===K)i.call(f);else return et.call(window,l(i,f))}function gt(i){i&&X.call(window,i)}var Et={__proto__:null,extend:s,create:a,bind:l,get lastId(){return c},stamp:g,throttle:m,wrapNum:v,falseFn:x,formatNum:P,trim:T,splitWords:N,setOptions:G,getParamString:z,template:R,isArray:B,indexOf:D,emptyImageUrl:A,requestFn:et,cancelFn:X,requestAnimFrame:lt,cancelAnimFrame:gt};function Q(){}Q.extend=function(i){var f=function(){G(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},y=f.__super__=this.prototype,M=a(y);M.constructor=f,f.prototype=M;for(var O in this)Object.prototype.hasOwnProperty.call(this,O)&&O!=="prototype"&&O!=="__super__"&&(f[O]=this[O]);return i.statics&&s(f,i.statics),i.includes&&(kt(i.includes),s.apply(null,[M].concat(i.includes))),s(M,i),delete M.statics,delete M.includes,M.options&&(M.options=y.options?a(y.options):{},s(M.options,i.options)),M._initHooks=[],M.callInitHooks=function(){if(!this._initHooksCalled){y.callInitHooks&&y.callInitHooks.call(this),this._initHooksCalled=!0;for(var W=0,at=M._initHooks.length;W<at;W++)M._initHooks[W].call(this)}},f},Q.include=function(i){var f=this.prototype.options;return s(this.prototype,i),i.options&&(this.prototype.options=f,this.mergeOptions(i.options)),this},Q.mergeOptions=function(i){return s(this.prototype.options,i),this},Q.addInitHook=function(i){var f=Array.prototype.slice.call(arguments,1),y=typeof i=="function"?i:function(){this[i].apply(this,f)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(y),this};function kt(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=B(i)?i:[i];for(var f=0;f<i.length;f++)i[f]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ct={on:function(i,f,y){if(typeof i=="object")for(var M in i)this._on(M,i[M],f);else{i=N(i);for(var O=0,W=i.length;O<W;O++)this._on(i[O],f,y)}return this},off:function(i,f,y){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var M in i)this._off(M,i[M],f);else{i=N(i);for(var O=arguments.length===1,W=0,at=i.length;W<at;W++)O?this._off(i[W]):this._off(i[W],f,y)}return this},_on:function(i,f,y,M){if(typeof f!="function"){console.warn("wrong listener type: "+typeof f);return}if(this._listens(i,f,y)===!1){y===this&&(y=void 0);var O={fn:f,ctx:y};M&&(O.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(O)}},_off:function(i,f,y){var M,O,W;if(this._events&&(M=this._events[i],!!M)){if(arguments.length===1){if(this._firingCount)for(O=0,W=M.length;O<W;O++)M[O].fn=x;delete this._events[i];return}if(typeof f!="function"){console.warn("wrong listener type: "+typeof f);return}var at=this._listens(i,f,y);if(at!==!1){var mt=M[at];this._firingCount&&(mt.fn=x,this._events[i]=M=M.slice()),M.splice(at,1)}}},fire:function(i,f,y){if(!this.listens(i,y))return this;var M=s({},f,{type:i,target:this,sourceTarget:f&&f.sourceTarget||this});if(this._events){var O=this._events[i];if(O){this._firingCount=this._firingCount+1||1;for(var W=0,at=O.length;W<at;W++){var mt=O[W],xt=mt.fn;mt.once&&this.off(i,xt,mt.ctx),xt.call(mt.ctx||this,M)}this._firingCount--}}return y&&this._propagateEvent(M),this},listens:function(i,f,y,M){typeof i!="string"&&console.warn('"string" type argument expected');var O=f;typeof f!="function"&&(M=!!f,O=void 0,y=void 0);var W=this._events&&this._events[i];if(W&&W.length&&this._listens(i,O,y)!==!1)return!0;if(M){for(var at in this._eventParents)if(this._eventParents[at].listens(i,f,y,M))return!0}return!1},_listens:function(i,f,y){if(!this._events)return!1;var M=this._events[i]||[];if(!f)return!!M.length;y===this&&(y=void 0);for(var O=0,W=M.length;O<W;O++)if(M[O].fn===f&&M[O].ctx===y)return O;return!1},once:function(i,f,y){if(typeof i=="object")for(var M in i)this._on(M,i[M],f,!0);else{i=N(i);for(var O=0,W=i.length;O<W;O++)this._on(i[O],f,y,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[g(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[g(i)],this},_propagateEvent:function(i){for(var f in this._eventParents)this._eventParents[f].fire(i.type,s({layer:i.target,propagatedFrom:i.target},i),!0)}};ct.addEventListener=ct.on,ct.removeEventListener=ct.clearAllEventListeners=ct.off,ct.addOneTimeEventListener=ct.once,ct.fireEvent=ct.fire,ct.hasEventListeners=ct.listens;var bt=Q.extend(ct);function Mt(i,f,y){this.x=y?Math.round(i):i,this.y=y?Math.round(f):f}var Xt=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};Mt.prototype={clone:function(){return new Mt(this.x,this.y)},add:function(i){return this.clone()._add(ft(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(ft(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new Mt(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new Mt(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Xt(this.x),this.y=Xt(this.y),this},distanceTo:function(i){i=ft(i);var f=i.x-this.x,y=i.y-this.y;return Math.sqrt(f*f+y*y)},equals:function(i){return i=ft(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=ft(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+P(this.x)+", "+P(this.y)+")"}};function ft(i,f,y){return i instanceof Mt?i:B(i)?new Mt(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new Mt(i.x,i.y):new Mt(i,f,y)}function Ct(i,f){if(i)for(var y=f?[i,f]:i,M=0,O=y.length;M<O;M++)this.extend(y[M])}Ct.prototype={extend:function(i){var f,y;if(!i)return this;if(i instanceof Mt||typeof i[0]=="number"||"x"in i)f=y=ft(i);else if(i=st(i),f=i.min,y=i.max,!f||!y)return this;return!this.min&&!this.max?(this.min=f.clone(),this.max=y.clone()):(this.min.x=Math.min(f.x,this.min.x),this.max.x=Math.max(y.x,this.max.x),this.min.y=Math.min(f.y,this.min.y),this.max.y=Math.max(y.y,this.max.y)),this},getCenter:function(i){return ft((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return ft(this.min.x,this.max.y)},getTopRight:function(){return ft(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var f,y;return typeof i[0]=="number"||i instanceof Mt?i=ft(i):i=st(i),i instanceof Ct?(f=i.min,y=i.max):f=y=i,f.x>=this.min.x&&y.x<=this.max.x&&f.y>=this.min.y&&y.y<=this.max.y},intersects:function(i){i=st(i);var f=this.min,y=this.max,M=i.min,O=i.max,W=O.x>=f.x&&M.x<=y.x,at=O.y>=f.y&&M.y<=y.y;return W&&at},overlaps:function(i){i=st(i);var f=this.min,y=this.max,M=i.min,O=i.max,W=O.x>f.x&&M.x<y.x,at=O.y>f.y&&M.y<y.y;return W&&at},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var f=this.min,y=this.max,M=Math.abs(f.x-y.x)*i,O=Math.abs(f.y-y.y)*i;return st(ft(f.x-M,f.y-O),ft(y.x+M,y.y+O))},equals:function(i){return i?(i=st(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function st(i,f){return!i||i instanceof Ct?i:new Ct(i,f)}function Rt(i,f){if(i)for(var y=f?[i,f]:i,M=0,O=y.length;M<O;M++)this.extend(y[M])}Rt.prototype={extend:function(i){var f=this._southWest,y=this._northEast,M,O;if(i instanceof Qt)M=i,O=i;else if(i instanceof Rt){if(M=i._southWest,O=i._northEast,!M||!O)return this}else return i?this.extend(Tt(i)||Ot(i)):this;return!f&&!y?(this._southWest=new Qt(M.lat,M.lng),this._northEast=new Qt(O.lat,O.lng)):(f.lat=Math.min(M.lat,f.lat),f.lng=Math.min(M.lng,f.lng),y.lat=Math.max(O.lat,y.lat),y.lng=Math.max(O.lng,y.lng)),this},pad:function(i){var f=this._southWest,y=this._northEast,M=Math.abs(f.lat-y.lat)*i,O=Math.abs(f.lng-y.lng)*i;return new Rt(new Qt(f.lat-M,f.lng-O),new Qt(y.lat+M,y.lng+O))},getCenter:function(){return new Qt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Qt(this.getNorth(),this.getWest())},getSouthEast:function(){return new Qt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof Qt||"lat"in i?i=Tt(i):i=Ot(i);var f=this._southWest,y=this._northEast,M,O;return i instanceof Rt?(M=i.getSouthWest(),O=i.getNorthEast()):M=O=i,M.lat>=f.lat&&O.lat<=y.lat&&M.lng>=f.lng&&O.lng<=y.lng},intersects:function(i){i=Ot(i);var f=this._southWest,y=this._northEast,M=i.getSouthWest(),O=i.getNorthEast(),W=O.lat>=f.lat&&M.lat<=y.lat,at=O.lng>=f.lng&&M.lng<=y.lng;return W&&at},overlaps:function(i){i=Ot(i);var f=this._southWest,y=this._northEast,M=i.getSouthWest(),O=i.getNorthEast(),W=O.lat>f.lat&&M.lat<y.lat,at=O.lng>f.lng&&M.lng<y.lng;return W&&at},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,f){return i?(i=Ot(i),this._southWest.equals(i.getSouthWest(),f)&&this._northEast.equals(i.getNorthEast(),f)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ot(i,f){return i instanceof Rt?i:new Rt(i,f)}function Qt(i,f,y){if(isNaN(i)||isNaN(f))throw new Error("Invalid LatLng object: ("+i+", "+f+")");this.lat=+i,this.lng=+f,y!==void 0&&(this.alt=+y)}Qt.prototype={equals:function(i,f){if(!i)return!1;i=Tt(i);var y=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return y<=(f===void 0?1e-9:f)},toString:function(i){return"LatLng("+P(this.lat,i)+", "+P(this.lng,i)+")"},distanceTo:function(i){return Re.distance(this,Tt(i))},wrap:function(){return Re.wrapLatLng(this)},toBounds:function(i){var f=180*i/40075017,y=f/Math.cos(Math.PI/180*this.lat);return Ot([this.lat-f,this.lng-y],[this.lat+f,this.lng+y])},clone:function(){return new Qt(this.lat,this.lng,this.alt)}};function Tt(i,f,y){return i instanceof Qt?i:B(i)&&typeof i[0]!="object"?i.length===3?new Qt(i[0],i[1],i[2]):i.length===2?new Qt(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new Qt(i.lat,"lng"in i?i.lng:i.lon,i.alt):f===void 0?null:new Qt(i,f,y)}var ce={latLngToPoint:function(i,f){var y=this.projection.project(i),M=this.scale(f);return this.transformation._transform(y,M)},pointToLatLng:function(i,f){var y=this.scale(f),M=this.transformation.untransform(i,y);return this.projection.unproject(M)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var f=this.projection.bounds,y=this.scale(i),M=this.transformation.transform(f.min,y),O=this.transformation.transform(f.max,y);return new Ct(M,O)},infinite:!1,wrapLatLng:function(i){var f=this.wrapLng?v(i.lng,this.wrapLng,!0):i.lng,y=this.wrapLat?v(i.lat,this.wrapLat,!0):i.lat,M=i.alt;return new Qt(y,f,M)},wrapLatLngBounds:function(i){var f=i.getCenter(),y=this.wrapLatLng(f),M=f.lat-y.lat,O=f.lng-y.lng;if(M===0&&O===0)return i;var W=i.getSouthWest(),at=i.getNorthEast(),mt=new Qt(W.lat-M,W.lng-O),xt=new Qt(at.lat-M,at.lng-O);return new Rt(mt,xt)}},Re=s({},ce,{wrapLng:[-180,180],R:6371e3,distance:function(i,f){var y=Math.PI/180,M=i.lat*y,O=f.lat*y,W=Math.sin((f.lat-i.lat)*y/2),at=Math.sin((f.lng-i.lng)*y/2),mt=W*W+Math.cos(M)*Math.cos(O)*at*at,xt=2*Math.atan2(Math.sqrt(mt),Math.sqrt(1-mt));return this.R*xt}}),Cn=6378137,fe={R:Cn,MAX_LATITUDE:85.0511287798,project:function(i){var f=Math.PI/180,y=this.MAX_LATITUDE,M=Math.max(Math.min(y,i.lat),-y),O=Math.sin(M*f);return new Mt(this.R*i.lng*f,this.R*Math.log((1+O)/(1-O))/2)},unproject:function(i){var f=180/Math.PI;return new Qt((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*f,i.x*f/this.R)},bounds:function(){var i=Cn*Math.PI;return new Ct([-i,-i],[i,i])}()};function ke(i,f,y,M){if(B(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=f,this._c=y,this._d=M}ke.prototype={transform:function(i,f){return this._transform(i.clone(),f)},_transform:function(i,f){return f=f||1,i.x=f*(this._a*i.x+this._b),i.y=f*(this._c*i.y+this._d),i},untransform:function(i,f){return f=f||1,new Mt((i.x/f-this._b)/this._a,(i.y/f-this._d)/this._c)}};function Bt(i,f,y,M){return new ke(i,f,y,M)}var hn=s({},Re,{code:"EPSG:3857",projection:fe,transformation:function(){var i=.5/(Math.PI*fe.R);return Bt(i,.5,-i,.5)}()}),Sn=s({},hn,{code:"EPSG:900913"});function Hn(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function Me(i,f){var y="",M,O,W,at,mt,xt;for(M=0,W=i.length;M<W;M++){for(mt=i[M],O=0,at=mt.length;O<at;O++)xt=mt[O],y+=(O?"L":"M")+xt.x+" "+xt.y;y+=f?Ut.svg?"z":"x":""}return y||"M0 0"}var ue=document.documentElement.style,Ht="ActiveXObject"in window,ht=Ht&&!document.addEventListener,Y="msLaunchUri"in navigator&&!("documentMode"in document),C=nr("webkit"),b=nr("android"),k=nr("android 2")||nr("android 3"),F=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Z=b&&nr("Google")&&F<537&&!("AudioNode"in window),J=!!window.opera,tt=!Y&&nr("chrome"),pt=nr("gecko")&&!C&&!J&&!Ht,Lt=!tt&&nr("safari"),vt=nr("phantom"),Ft="OTransition"in ue,Wt=navigator.platform.indexOf("Win")===0,Jt=Ht&&"transition"in ue,$t="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!k,jt="MozPerspective"in ue,ge=!window.L_DISABLE_3D&&(Jt||$t||jt)&&!Ft&&!vt,pe=typeof orientation<"u"||nr("mobile"),Te=pe&&C,Ce=pe&&$t,he=!window.PointerEvent&&window.MSPointerEvent,An=!!(window.PointerEvent||he),we="ontouchstart"in window||!!window.TouchEvent,St=!window.L_NO_TOUCH&&(we||An),Dn=pe&&J,Xn=pe&&pt,re=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Yr=function(){var i=!1;try{var f=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",x,f),window.removeEventListener("testPassiveEventSupport",x,f)}catch{}return i}(),zn=function(){return!!document.createElement("canvas").getContext}(),cn=!!(document.createElementNS&&Hn("svg").createSVGRect),or=!!cn&&function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),sr=!cn&&function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var f=i.firstChild;return f.style.behavior="url(#default#VML)",f&&typeof f.adj=="object"}catch{return!1}}(),wo=navigator.platform.indexOf("Mac")===0,Wn=navigator.platform.indexOf("Linux")===0;function nr(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var Ut={ie:Ht,ielt9:ht,edge:Y,webkit:C,android:b,android23:k,androidStock:Z,opera:J,chrome:tt,gecko:pt,safari:Lt,phantom:vt,opera12:Ft,win:Wt,ie3d:Jt,webkit3d:$t,gecko3d:jt,any3d:ge,mobile:pe,mobileWebkit:Te,mobileWebkit3d:Ce,msPointer:he,pointer:An,touch:St,touchNative:we,mobileOpera:Dn,mobileGecko:Xn,retina:re,passiveEvents:Yr,canvas:zn,svg:cn,vml:sr,inlineSvg:or,mac:wo,linux:Wn},Ei=Ut.msPointer?"MSPointerDown":"pointerdown",oi=Ut.msPointer?"MSPointerMove":"pointermove",xe=Ut.msPointer?"MSPointerUp":"pointerup",Kn=Ut.msPointer?"MSPointerCancel":"pointercancel",$n={touchstart:Ei,touchmove:oi,touchend:xe,touchcancel:Kn},jr={touchstart:pr,touchmove:Di,touchend:Di,touchcancel:Di},wn={},ar=!1;function Or(i,f,y){return f==="touchstart"&&kn(),jr[f]?(y=jr[f].bind(this,y),i.addEventListener($n[f],y,!1),y):(console.warn("wrong event specified:",f),x)}function ho(i,f,y){if(!$n[f]){console.warn("wrong event specified:",f);return}i.removeEventListener($n[f],y,!1)}function rr(i){wn[i.pointerId]=i}function Lo(i){wn[i.pointerId]&&(wn[i.pointerId]=i)}function Ln(i){delete wn[i.pointerId]}function kn(){ar||(document.addEventListener(Ei,rr,!0),document.addEventListener(oi,Lo,!0),document.addEventListener(xe,Ln,!0),document.addEventListener(Kn,Ln,!0),ar=!0)}function Di(i,f){if(f.pointerType!==(f.MSPOINTER_TYPE_MOUSE||"mouse")){f.touches=[];for(var y in wn)f.touches.push(wn[y]);f.changedTouches=[f],i(f)}}function pr(i,f){f.MSPOINTER_TYPE_TOUCH&&f.pointerType===f.MSPOINTER_TYPE_TOUCH&&it(f),Di(i,f)}function Mi(i){var f={},y,M;for(M in i)y=i[M],f[M]=y&&y.bind?y.bind(i):y;return i=f,f.type="dblclick",f.detail=2,f.isTrusted=!1,f._simulated=!0,f}var bn=200;function mi(i,f){i.addEventListener("dblclick",f);var y=0,M;function O(W){if(W.detail!==1){M=W.detail;return}if(!(W.pointerType==="mouse"||W.sourceCapabilities&&!W.sourceCapabilities.firesTouchEvents)){var at=ot(W);if(!(at.some(function(xt){return xt instanceof HTMLLabelElement&&xt.attributes.for})&&!at.some(function(xt){return xt instanceof HTMLInputElement||xt instanceof HTMLSelectElement}))){var mt=Date.now();mt-y<=bn?(M++,M===2&&f(Mi(W))):M=1,y=mt}}}return i.addEventListener("click",O),{dblclick:f,simDblclick:O}}function Nr(i,f){i.removeEventListener("dblclick",f.dblclick),i.removeEventListener("click",f.simDblclick)}var dr=Jo(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ur=Jo(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),co=ur==="webkitTransition"||ur==="OTransition"?ur+"End":"transitionend";function Bi(i){return typeof i=="string"?document.getElementById(i):i}function Fi(i,f){var y=i.style[f]||i.currentStyle&&i.currentStyle[f];if((!y||y==="auto")&&document.defaultView){var M=document.defaultView.getComputedStyle(i,null);y=M?M[f]:null}return y==="auto"?null:y}function Le(i,f,y){var M=document.createElement(i);return M.className=f||"",y&&y.appendChild(M),M}function le(i){var f=i.parentNode;f&&f.removeChild(i)}function Rr(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function Un(i){var f=i.parentNode;f&&f.lastChild!==i&&f.appendChild(i)}function Pi(i){var f=i.parentNode;f&&f.firstChild!==i&&f.insertBefore(i,f.firstChild)}function fo(i,f){if(i.classList!==void 0)return i.classList.contains(f);var y=bo(i);return y.length>0&&new RegExp("(^|\\s)"+f+"(\\s|$)").test(y)}function Zt(i,f){if(i.classList!==void 0)for(var y=N(f),M=0,O=y.length;M<O;M++)i.classList.add(y[M]);else if(!fo(i,f)){var W=bo(i);Vr(i,(W?W+" ":"")+f)}}function En(i,f){i.classList!==void 0?i.classList.remove(f):Vr(i,T((" "+bo(i)+" ").replace(" "+f+" "," ")))}function Vr(i,f){i.className.baseVal===void 0?i.className=f:i.className.baseVal=f}function bo(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function Kt(i,f){"opacity"in i.style?i.style.opacity=f:"filter"in i.style&&eo(i,f)}function eo(i,f){var y=!1,M="DXImageTransform.Microsoft.Alpha";try{y=i.filters.item(M)}catch{if(f===1)return}f=Math.round(f*100),y?(y.Enabled=f!==100,y.Opacity=f):i.style.filter+=" progid:"+M+"(opacity="+f+")"}function Jo(i){for(var f=document.documentElement.style,y=0;y<i.length;y++)if(i[y]in f)return i[y];return!1}function si(i,f,y){var M=f||new Mt(0,0);i.style[dr]=(Ut.ie3d?"translate("+M.x+"px,"+M.y+"px)":"translate3d("+M.x+"px,"+M.y+"px,0)")+(y?" scale("+y+")":"")}function De(i,f){i._leaflet_pos=f,Ut.any3d?si(i,f):(i.style.left=f.x+"px",i.style.top=f.y+"px")}function gr(i){return i._leaflet_pos||new Mt(0,0)}var ai,Vi,It;if("onselectstart"in document)ai=function(){ie(window,"selectstart",it)},Vi=function(){Pe(window,"selectstart",it)};else{var zi=Jo(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ai=function(){if(zi){var i=document.documentElement.style;It=i[zi],i[zi]="none"}},Vi=function(){zi&&(document.documentElement.style[zi]=It,It=void 0)}}function fn(){ie(window,"dragstart",it)}function Qn(){Pe(window,"dragstart",it)}var Ci,tr;function Ae(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(be(),Ci=i,tr=i.style.outline,i.style.outline="none",ie(window,"keydown",be))}function be(){Ci&&(Ci.style.outline=tr,Ci=void 0,tr=void 0,Pe(window,"keydown",be))}function Nn(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function ui(i){var f=i.getBoundingClientRect();return{x:f.width/i.offsetWidth||1,y:f.height/i.offsetHeight||1,boundingClientRect:f}}var $o={__proto__:null,TRANSFORM:dr,TRANSITION:ur,TRANSITION_END:co,get:Bi,getStyle:Fi,create:Le,remove:le,empty:Rr,toFront:Un,toBack:Pi,hasClass:fo,addClass:Zt,removeClass:En,setClass:Vr,getClass:bo,setOpacity:Kt,testProp:Jo,setTransform:si,setPosition:De,getPosition:gr,get disableTextSelection(){return ai},get enableTextSelection(){return Vi},disableImageDrag:fn,enableImageDrag:Qn,preventOutline:Ae,restoreOutline:be,getSizedParentNode:Nn,getScale:ui};function ie(i,f,y,M){if(f&&typeof f=="object")for(var O in f)_(i,O,f[O],y);else{f=N(f);for(var W=0,at=f.length;W<at;W++)_(i,f[W],y,M)}return this}var Wr="_leaflet_events";function Pe(i,f,y,M){if(arguments.length===1)h(i),delete i[Wr];else if(f&&typeof f=="object")for(var O in f)E(i,O,f[O],y);else if(f=N(f),arguments.length===2)h(i,function(mt){return D(f,mt)!==-1});else for(var W=0,at=f.length;W<at;W++)E(i,f[W],y,M);return this}function h(i,f){for(var y in i[Wr]){var M=y.split(/\d/)[0];(!f||f(M))&&E(i,M,null,null,y)}}var p={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function _(i,f,y,M){var O=f+g(y)+(M?"_"+g(M):"");if(i[Wr]&&i[Wr][O])return this;var W=function(mt){return y.call(M||i,mt||window.event)},at=W;!Ut.touchNative&&Ut.pointer&&f.indexOf("touch")===0?W=Or(i,f,W):Ut.touch&&f==="dblclick"?W=mi(i,W):"addEventListener"in i?f==="touchstart"||f==="touchmove"||f==="wheel"||f==="mousewheel"?i.addEventListener(p[f]||f,W,Ut.passiveEvents?{passive:!1}:!1):f==="mouseenter"||f==="mouseleave"?(W=function(mt){mt=mt||window.event,At(i,mt)&&at(mt)},i.addEventListener(p[f],W,!1)):i.addEventListener(f,at,!1):i.attachEvent("on"+f,W),i[Wr]=i[Wr]||{},i[Wr][O]=W}function E(i,f,y,M,O){O=O||f+g(y)+(M?"_"+g(M):"");var W=i[Wr]&&i[Wr][O];if(!W)return this;!Ut.touchNative&&Ut.pointer&&f.indexOf("touch")===0?ho(i,f,W):Ut.touch&&f==="dblclick"?Nr(i,W):"removeEventListener"in i?i.removeEventListener(p[f]||f,W,!1):i.detachEvent("on"+f,W),i[Wr][O]=null}function I(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function V(i){return _(i,"wheel",I),this}function nt(i){return ie(i,"mousedown touchstart dblclick contextmenu",I),i._leaflet_disable_click=!0,this}function it(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function rt(i){return it(i),I(i),this}function ot(i){if(i.composedPath)return i.composedPath();for(var f=[],y=i.target;y;)f.push(y),y=y.parentNode;return f}function dt(i,f){if(!f)return new Mt(i.clientX,i.clientY);var y=ui(f),M=y.boundingClientRect;return new Mt((i.clientX-M.left)/y.x-f.clientLeft,(i.clientY-M.top)/y.y-f.clientTop)}var Pt=Ut.linux&&Ut.chrome?window.devicePixelRatio:Ut.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function yt(i){return Ut.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/Pt:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function At(i,f){var y=f.relatedTarget;if(!y)return!0;try{for(;y&&y!==i;)y=y.parentNode}catch{return!1}return y!==i}var Gt={__proto__:null,on:ie,off:Pe,stopPropagation:I,disableScrollPropagation:V,disableClickPropagation:nt,preventDefault:it,stop:rt,getPropagationPath:ot,getMousePosition:dt,getWheelDelta:yt,isExternalTarget:At,addListener:ie,removeListener:Pe},te=bt.extend({run:function(i,f,y,M){this.stop(),this._el=i,this._inProgress=!0,this._duration=y||.25,this._easeOutPower=1/Math.max(M||.5,.2),this._startPos=gr(i),this._offset=f.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=lt(this._animate,this),this._step()},_step:function(i){var f=+new Date-this._startTime,y=this._duration*1e3;f<y?this._runFrame(this._easeOut(f/y),i):(this._runFrame(1),this._complete())},_runFrame:function(i,f){var y=this._startPos.add(this._offset.multiplyBy(i));f&&y._round(),De(this._el,y),this.fire("step")},_complete:function(){gt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),Dt=bt.extend({options:{crs:hn,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,f){f=G(this,f),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),f.maxBounds&&this.setMaxBounds(f.maxBounds),f.zoom!==void 0&&(this._zoom=this._limitZoom(f.zoom)),f.center&&f.zoom!==void 0&&this.setView(Tt(f.center),f.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ur&&Ut.any3d&&!Ut.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ie(this._proxy,co,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,f,y){if(f=f===void 0?this._zoom:this._limitZoom(f),i=this._limitCenter(Tt(i),f,this.options.maxBounds),y=y||{},this._stop(),this._loaded&&!y.reset&&y!==!0){y.animate!==void 0&&(y.zoom=s({animate:y.animate},y.zoom),y.pan=s({animate:y.animate,duration:y.duration},y.pan));var M=this._zoom!==f?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,f,y.zoom):this._tryAnimatedPan(i,y.pan);if(M)return clearTimeout(this._sizeTimer),this}return this._resetView(i,f,y.pan&&y.pan.noMoveStart),this},setZoom:function(i,f){return this._loaded?this.setView(this.getCenter(),i,{zoom:f}):(this._zoom=i,this)},zoomIn:function(i,f){return i=i||(Ut.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,f)},zoomOut:function(i,f){return i=i||(Ut.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,f)},setZoomAround:function(i,f,y){var M=this.getZoomScale(f),O=this.getSize().divideBy(2),W=i instanceof Mt?i:this.latLngToContainerPoint(i),at=W.subtract(O).multiplyBy(1-1/M),mt=this.containerPointToLatLng(O.add(at));return this.setView(mt,f,{zoom:y})},_getBoundsCenterZoom:function(i,f){f=f||{},i=i.getBounds?i.getBounds():Ot(i);var y=ft(f.paddingTopLeft||f.padding||[0,0]),M=ft(f.paddingBottomRight||f.padding||[0,0]),O=this.getBoundsZoom(i,!1,y.add(M));if(O=typeof f.maxZoom=="number"?Math.min(f.maxZoom,O):O,O===1/0)return{center:i.getCenter(),zoom:O};var W=M.subtract(y).divideBy(2),at=this.project(i.getSouthWest(),O),mt=this.project(i.getNorthEast(),O),xt=this.unproject(at.add(mt).divideBy(2).add(W),O);return{center:xt,zoom:O}},fitBounds:function(i,f){if(i=Ot(i),!i.isValid())throw new Error("Bounds are not valid.");var y=this._getBoundsCenterZoom(i,f);return this.setView(y.center,y.zoom,f)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,f){return this.setView(i,this._zoom,{pan:f})},panBy:function(i,f){if(i=ft(i).round(),f=f||{},!i.x&&!i.y)return this.fire("moveend");if(f.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new te,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),f.noMoveStart||this.fire("movestart"),f.animate!==!1){Zt(this._mapPane,"leaflet-pan-anim");var y=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,y,f.duration||.25,f.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,f,y){if(y=y||{},y.animate===!1||!Ut.any3d)return this.setView(i,f,y);this._stop();var M=this.project(this.getCenter()),O=this.project(i),W=this.getSize(),at=this._zoom;i=Tt(i),f=f===void 0?at:f;var mt=Math.max(W.x,W.y),xt=mt*this.getZoomScale(at,f),Nt=O.distanceTo(M)||1,ee=1.42,ae=ee*ee;function Se(Mn){var Ws=Mn?-1:1,Ri=Mn?xt:mt,ir=xt*xt-mt*mt+Ws*ae*ae*Nt*Nt,zu=2*Ri*ae*Nt,bs=ir/zu,t=Math.sqrt(bs*bs+1)-bs,e=t<1e-9?-18:Math.log(t);return e}function ci(Mn){return(Math.exp(Mn)-Math.exp(-Mn))/2}function qo(Mn){return(Math.exp(Mn)+Math.exp(-Mn))/2}function Uo(Mn){return ci(Mn)/qo(Mn)}var Ni=Se(0);function Ls(Mn){return mt*(qo(Ni)/qo(Ni+ee*Mn))}function Ns(Mn){return mt*(qo(Ni)*Uo(Ni+ee*Mn)-ci(Ni))/ae}function is(Mn){return 1-Math.pow(1-Mn,1.5)}var de=Date.now(),Io=(Se(1)-Ni)/ee,Rs=y.duration?1e3*y.duration:1e3*Io*.8;function jo(){var Mn=(Date.now()-de)/Rs,Ws=is(Mn)*Io;Mn<=1?(this._flyToFrame=lt(jo,this),this._move(this.unproject(M.add(O.subtract(M).multiplyBy(Ns(Ws)/Nt)),at),this.getScaleZoom(mt/Ls(Ws),at),{flyTo:!0})):this._move(i,f)._moveEnd(!0)}return this._moveStart(!0,y.noMoveStart),jo.call(this),this},flyToBounds:function(i,f){var y=this._getBoundsCenterZoom(i,f);return this.flyTo(y.center,y.zoom,f)},setMaxBounds:function(i){return i=Ot(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var f=this.options.minZoom;return this.options.minZoom=i,this._loaded&&f!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var f=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&f!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,f){this._enforcingBounds=!0;var y=this.getCenter(),M=this._limitCenter(y,this._zoom,Ot(i));return y.equals(M)||this.panTo(M,f),this._enforcingBounds=!1,this},panInside:function(i,f){f=f||{};var y=ft(f.paddingTopLeft||f.padding||[0,0]),M=ft(f.paddingBottomRight||f.padding||[0,0]),O=this.project(this.getCenter()),W=this.project(i),at=this.getPixelBounds(),mt=st([at.min.add(y),at.max.subtract(M)]),xt=mt.getSize();if(!mt.contains(W)){this._enforcingBounds=!0;var Nt=W.subtract(mt.getCenter()),ee=mt.extend(W).getSize().subtract(xt);O.x+=Nt.x<0?-ee.x:ee.x,O.y+=Nt.y<0?-ee.y:ee.y,this.panTo(this.unproject(O),f),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=s({animate:!1,pan:!0},i===!0?{animate:!0}:i);var f=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var y=this.getSize(),M=f.divideBy(2).round(),O=y.divideBy(2).round(),W=M.subtract(O);return!W.x&&!W.y?this:(i.animate&&i.pan?this.panBy(W):(i.pan&&this._rawPanBy(W),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:f,newSize:y}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=s({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var f=l(this._handleGeolocationResponse,this),y=l(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(f,y,i):navigator.geolocation.getCurrentPosition(f,y,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var f=i.code,y=i.message||(f===1?"permission denied":f===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:f,message:"Geolocation error: "+y+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var f=i.coords.latitude,y=i.coords.longitude,M=new Qt(f,y),O=M.toBounds(i.coords.accuracy*2),W=this._locateOptions;if(W.setView){var at=this.getBoundsZoom(O);this.setView(M,W.maxZoom?Math.min(at,W.maxZoom):at)}var mt={latlng:M,bounds:O,timestamp:i.timestamp};for(var xt in i.coords)typeof i.coords[xt]=="number"&&(mt[xt]=i.coords[xt]);this.fire("locationfound",mt)}},addHandler:function(i,f){if(!f)return this;var y=this[i]=new f(this);return this._handlers.push(y),this.options[i]&&y.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),le(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(gt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)le(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,f){var y="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),M=Le("div",y,f||this._mapPane);return i&&(this._panes[i]=M),M},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),f=this.unproject(i.getBottomLeft()),y=this.unproject(i.getTopRight());return new Rt(f,y)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,f,y){i=Ot(i),y=ft(y||[0,0]);var M=this.getZoom()||0,O=this.getMinZoom(),W=this.getMaxZoom(),at=i.getNorthWest(),mt=i.getSouthEast(),xt=this.getSize().subtract(y),Nt=st(this.project(mt,M),this.project(at,M)).getSize(),ee=Ut.any3d?this.options.zoomSnap:1,ae=xt.x/Nt.x,Se=xt.y/Nt.y,ci=f?Math.max(ae,Se):Math.min(ae,Se);return M=this.getScaleZoom(ci,M),ee&&(M=Math.round(M/(ee/100))*(ee/100),M=f?Math.ceil(M/ee)*ee:Math.floor(M/ee)*ee),Math.max(O,Math.min(W,M))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Mt(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,f){var y=this._getTopLeftPoint(i,f);return new Ct(y,y.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,f){var y=this.options.crs;return f=f===void 0?this._zoom:f,y.scale(i)/y.scale(f)},getScaleZoom:function(i,f){var y=this.options.crs;f=f===void 0?this._zoom:f;var M=y.zoom(i*y.scale(f));return isNaN(M)?1/0:M},project:function(i,f){return f=f===void 0?this._zoom:f,this.options.crs.latLngToPoint(Tt(i),f)},unproject:function(i,f){return f=f===void 0?this._zoom:f,this.options.crs.pointToLatLng(ft(i),f)},layerPointToLatLng:function(i){var f=ft(i).add(this.getPixelOrigin());return this.unproject(f)},latLngToLayerPoint:function(i){var f=this.project(Tt(i))._round();return f._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(Tt(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(Ot(i))},distance:function(i,f){return this.options.crs.distance(Tt(i),Tt(f))},containerPointToLayerPoint:function(i){return ft(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return ft(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var f=this.containerPointToLayerPoint(ft(i));return this.layerPointToLatLng(f)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Tt(i)))},mouseEventToContainerPoint:function(i){return dt(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var f=this._container=Bi(i);if(f){if(f._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ie(f,"scroll",this._onScroll,this),this._containerId=g(f)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ut.any3d,Zt(i,"leaflet-container"+(Ut.touch?" leaflet-touch":"")+(Ut.retina?" leaflet-retina":"")+(Ut.ielt9?" leaflet-oldie":"")+(Ut.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var f=Fi(i,"position");f!=="absolute"&&f!=="relative"&&f!=="fixed"&&f!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),De(this._mapPane,new Mt(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Zt(i.markerPane,"leaflet-zoom-hide"),Zt(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,f,y){De(this._mapPane,new Mt(0,0));var M=!this._loaded;this._loaded=!0,f=this._limitZoom(f),this.fire("viewprereset");var O=this._zoom!==f;this._moveStart(O,y)._move(i,f)._moveEnd(O),this.fire("viewreset"),M&&this.fire("load")},_moveStart:function(i,f){return i&&this.fire("zoomstart"),f||this.fire("movestart"),this},_move:function(i,f,y,M){f===void 0&&(f=this._zoom);var O=this._zoom!==f;return this._zoom=f,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),M?y&&y.pinch&&this.fire("zoom",y):((O||y&&y.pinch)&&this.fire("zoom",y),this.fire("move",y)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return gt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){De(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[g(this._container)]=this;var f=i?Pe:ie;f(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&f(window,"resize",this._onResize,this),Ut.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){gt(this._resizeRequest),this._resizeRequest=lt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,f){for(var y=[],M,O=f==="mouseout"||f==="mouseover",W=i.target||i.srcElement,at=!1;W;){if(M=this._targets[g(W)],M&&(f==="click"||f==="preclick")&&this._draggableMoved(M)){at=!0;break}if(M&&M.listens(f,!0)&&(O&&!At(W,i)||(y.push(M),O))||W===this._container)break;W=W.parentNode}return!y.length&&!at&&!O&&this.listens(f,!0)&&(y=[this]),y},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var f=i.target||i.srcElement;if(!(!this._loaded||f._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(f))){var y=i.type;y==="mousedown"&&Ae(f),this._fireDOMEvent(i,y)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,f,y){if(i.type==="click"){var M=s({},i);M.type="preclick",this._fireDOMEvent(M,M.type,y)}var O=this._findEventTargets(i,f);if(y){for(var W=[],at=0;at<y.length;at++)y[at].listens(f,!0)&&W.push(y[at]);O=W.concat(O)}if(O.length){f==="contextmenu"&&it(i);var mt=O[0],xt={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var Nt=mt.getLatLng&&(!mt._radius||mt._radius<=10);xt.containerPoint=Nt?this.latLngToContainerPoint(mt.getLatLng()):this.mouseEventToContainerPoint(i),xt.layerPoint=this.containerPointToLayerPoint(xt.containerPoint),xt.latlng=Nt?mt.getLatLng():this.layerPointToLatLng(xt.layerPoint)}for(at=0;at<O.length;at++)if(O[at].fire(f,xt,!0),xt.originalEvent._stopped||O[at].options.bubblingMouseEvents===!1&&D(this._mouseEvents,f)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,f=this._handlers.length;i<f;i++)this._handlers[i].disable()},whenReady:function(i,f){return this._loaded?i.call(f||this,{target:this}):this.on("load",i,f),this},_getMapPanePos:function(){return gr(this._mapPane)||new Mt(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,f){var y=i&&f!==void 0?this._getNewPixelOrigin(i,f):this.getPixelOrigin();return y.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,f){var y=this.getSize()._divideBy(2);return this.project(i,f)._subtract(y)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,f,y){var M=this._getNewPixelOrigin(y,f);return this.project(i,f)._subtract(M)},_latLngBoundsToNewLayerBounds:function(i,f,y){var M=this._getNewPixelOrigin(y,f);return st([this.project(i.getSouthWest(),f)._subtract(M),this.project(i.getNorthWest(),f)._subtract(M),this.project(i.getSouthEast(),f)._subtract(M),this.project(i.getNorthEast(),f)._subtract(M)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,f,y){if(!y)return i;var M=this.project(i,f),O=this.getSize().divideBy(2),W=new Ct(M.subtract(O),M.add(O)),at=this._getBoundsOffset(W,y,f);return Math.abs(at.x)<=1&&Math.abs(at.y)<=1?i:this.unproject(M.add(at),f)},_limitOffset:function(i,f){if(!f)return i;var y=this.getPixelBounds(),M=new Ct(y.min.add(i),y.max.add(i));return i.add(this._getBoundsOffset(M,f))},_getBoundsOffset:function(i,f,y){var M=st(this.project(f.getNorthEast(),y),this.project(f.getSouthWest(),y)),O=M.min.subtract(i.min),W=M.max.subtract(i.max),at=this._rebound(O.x,-W.x),mt=this._rebound(O.y,-W.y);return new Mt(at,mt)},_rebound:function(i,f){return i+f>0?Math.round(i-f)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(f))},_limitZoom:function(i){var f=this.getMinZoom(),y=this.getMaxZoom(),M=Ut.any3d?this.options.zoomSnap:1;return M&&(i=Math.round(i/M)*M),Math.max(f,Math.min(y,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){En(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,f){var y=this._getCenterOffset(i)._trunc();return(f&&f.animate)!==!0&&!this.getSize().contains(y)?!1:(this.panBy(y,f),!0)},_createAnimProxy:function(){var i=this._proxy=Le("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(f){var y=dr,M=this._proxy.style[y];si(this._proxy,this.project(f.center,f.zoom),this.getZoomScale(f.zoom,1)),M===this._proxy.style[y]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){le(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),f=this.getZoom();si(this._proxy,this.project(i,f),this.getZoomScale(f,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,f,y){if(this._animatingZoom)return!0;if(y=y||{},!this._zoomAnimated||y.animate===!1||this._nothingToAnimate()||Math.abs(f-this._zoom)>this.options.zoomAnimationThreshold)return!1;var M=this.getZoomScale(f),O=this._getCenterOffset(i)._divideBy(1-1/M);return y.animate!==!0&&!this.getSize().contains(O)?!1:(lt(function(){this._moveStart(!0,!1)._animateZoom(i,f,!0)},this),!0)},_animateZoom:function(i,f,y,M){this._mapPane&&(y&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=f,Zt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:f,noUpdate:M}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&En(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Rn(i,f){return new Dt(i,f)}var Tn=Q.extend({options:{position:"topright"},initialize:function(i){G(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var f=this._map;return f&&f.removeControl(this),this.options.position=i,f&&f.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var f=this._container=this.onAdd(i),y=this.getPosition(),M=i._controlCorners[y];return Zt(f,"leaflet-control"),y.indexOf("bottom")!==-1?M.insertBefore(f,M.firstChild):M.appendChild(f),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(le(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),Ie=function(i){return new Tn(i)};Dt.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},f="leaflet-",y=this._controlContainer=Le("div",f+"control-container",this._container);function M(O,W){var at=f+O+" "+f+W;i[O+W]=Le("div",at,y)}M("top","left"),M("top","right"),M("bottom","left"),M("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)le(this._controlCorners[i]);le(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ar=Tn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,f,y,M){return y<M?-1:M<y?1:0}},initialize:function(i,f,y){G(this,y),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var M in i)this._addLayer(i[M],M);for(M in f)this._addLayer(f[M],M,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var f=0;f<this._layers.length;f++)this._layers[f].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return Tn.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,f){return this._addLayer(i,f),this._map?this._update():this},addOverlay:function(i,f){return this._addLayer(i,f,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var f=this._getLayer(g(i));return f&&this._layers.splice(this._layers.indexOf(f),1),this._map?this._update():this},expand:function(){Zt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(Zt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):En(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return En(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",f=this._container=Le("div",i),y=this.options.collapsed;f.setAttribute("aria-haspopup",!0),nt(f),V(f);var M=this._section=Le("section",i+"-list");y&&(this._map.on("click",this.collapse,this),ie(f,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var O=this._layersLink=Le("a",i+"-toggle",f);O.href="#",O.title="Layers",O.setAttribute("role","button"),ie(O,{keydown:function(W){W.keyCode===13&&this._expandSafely()},click:function(W){it(W),this._expandSafely()}},this),y||this.expand(),this._baseLayersList=Le("div",i+"-base",M),this._separator=Le("div",i+"-separator",M),this._overlaysList=Le("div",i+"-overlays",M),f.appendChild(M)},_getLayer:function(i){for(var f=0;f<this._layers.length;f++)if(this._layers[f]&&g(this._layers[f].layer)===i)return this._layers[f]},_addLayer:function(i,f,y){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:f,overlay:y}),this.options.sortLayers&&this._layers.sort(l(function(M,O){return this.options.sortFunction(M.layer,O.layer,M.name,O.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Rr(this._baseLayersList),Rr(this._overlaysList),this._layerControlInputs=[];var i,f,y,M,O=0;for(y=0;y<this._layers.length;y++)M=this._layers[y],this._addItem(M),f=f||M.overlay,i=i||!M.overlay,O+=M.overlay?0:1;return this.options.hideSingleBase&&(i=i&&O>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=f&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var f=this._getLayer(g(i.target)),y=f.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;y&&this._map.fire(y,f)},_createRadioElement:function(i,f){var y='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(f?' checked="checked"':"")+"/>",M=document.createElement("div");return M.innerHTML=y,M.firstChild},_addItem:function(i){var f=document.createElement("label"),y=this._map.hasLayer(i.layer),M;i.overlay?(M=document.createElement("input"),M.type="checkbox",M.className="leaflet-control-layers-selector",M.defaultChecked=y):M=this._createRadioElement("leaflet-base-layers_"+g(this),y),this._layerControlInputs.push(M),M.layerId=g(i.layer),ie(M,"click",this._onInputClick,this);var O=document.createElement("span");O.innerHTML=" "+i.name;var W=document.createElement("span");f.appendChild(W),W.appendChild(M),W.appendChild(O);var at=i.overlay?this._overlaysList:this._baseLayersList;return at.appendChild(f),this._checkDisabledLayers(),f},_onInputClick:function(){var i=this._layerControlInputs,f,y,M=[],O=[];this._handlingClick=!0;for(var W=i.length-1;W>=0;W--)f=i[W],y=this._getLayer(f.layerId).layer,f.checked?M.push(y):f.checked||O.push(y);for(W=0;W<O.length;W++)this._map.hasLayer(O[W])&&this._map.removeLayer(O[W]);for(W=0;W<M.length;W++)this._map.hasLayer(M[W])||this._map.addLayer(M[W]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,f,y,M=this._map.getZoom(),O=i.length-1;O>=0;O--)f=i[O],y=this._getLayer(f.layerId).layer,f.disabled=y.options.minZoom!==void 0&&M<y.options.minZoom||y.options.maxZoom!==void 0&&M>y.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;ie(i,"click",it),this.expand(),setTimeout(function(){Pe(i,"click",it)})}}),Si=function(i,f,y){return new Ar(i,f,y)},jn=Tn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var f="leaflet-control-zoom",y=Le("div",f+" leaflet-bar"),M=this.options;return this._zoomInButton=this._createButton(M.zoomInText,M.zoomInTitle,f+"-in",y,this._zoomIn),this._zoomOutButton=this._createButton(M.zoomOutText,M.zoomOutTitle,f+"-out",y,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),y},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,f,y,M,O){var W=Le("a",y,M);return W.innerHTML=i,W.href="#",W.title=f,W.setAttribute("role","button"),W.setAttribute("aria-label",f),nt(W),ie(W,"click",rt),ie(W,"click",O,this),ie(W,"click",this._refocusOnMap,this),W},_updateDisabled:function(){var i=this._map,f="leaflet-disabled";En(this._zoomInButton,f),En(this._zoomOutButton,f),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(Zt(this._zoomOutButton,f),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(Zt(this._zoomInButton,f),this._zoomInButton.setAttribute("aria-disabled","true"))}});Dt.mergeOptions({zoomControl:!0}),Dt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new jn,this.addControl(this.zoomControl))});var no=function(i){return new jn(i)},lr=Tn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var f="leaflet-control-scale",y=Le("div",f),M=this.options;return this._addScales(M,f+"-line",y),i.on(M.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),y},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,f,y){i.metric&&(this._mScale=Le("div",f,y)),i.imperial&&(this._iScale=Le("div",f,y))},_update:function(){var i=this._map,f=i.getSize().y/2,y=i.distance(i.containerPointToLatLng([0,f]),i.containerPointToLatLng([this.options.maxWidth,f]));this._updateScales(y)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var f=this._getRoundNum(i),y=f<1e3?f+" m":f/1e3+" km";this._updateScale(this._mScale,y,f/i)},_updateImperial:function(i){var f=i*3.2808399,y,M,O;f>5280?(y=f/5280,M=this._getRoundNum(y),this._updateScale(this._iScale,M+" mi",M/y)):(O=this._getRoundNum(f),this._updateScale(this._iScale,O+" ft",O/f))},_updateScale:function(i,f,y){i.style.width=Math.round(this.options.maxWidth*y)+"px",i.innerHTML=f},_getRoundNum:function(i){var f=Math.pow(10,(Math.floor(i)+"").length-1),y=i/f;return y=y>=10?10:y>=5?5:y>=3?3:y>=2?2:1,f*y}}),ki=function(i){return new lr(i)},Gi='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Eo=Tn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ut.inlineSvg?Gi+" ":"")+"Leaflet</a>"},initialize:function(i){G(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=Le("div","leaflet-control-attribution"),nt(this._container);for(var f in i._layers)i._layers[f].getAttribution&&this.addAttribution(i._layers[f].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var f in this._attributions)this._attributions[f]&&i.push(f);var y=[];this.options.prefix&&y.push(this.options.prefix),i.length&&y.push(i.join(", ")),this._container.innerHTML=y.join(' <span aria-hidden="true">|</span> ')}}});Dt.mergeOptions({attributionControl:!0}),Dt.addInitHook(function(){this.options.attributionControl&&new Eo().addTo(this)});var Zn=function(i){return new Eo(i)};Tn.Layers=Ar,Tn.Zoom=jn,Tn.Scale=lr,Tn.Attribution=Eo,Ie.layers=Si,Ie.zoom=no,Ie.scale=ki,Ie.attribution=Zn;var Yt=Q.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Yt.addTo=function(i,f){return i.addHandler(f,this),this};var aa={Events:ct},Qo=Ut.touch?"touchstart mousedown":"mousedown",hr=bt.extend({options:{clickTolerance:3},initialize:function(i,f,y,M){G(this,M),this._element=i,this._dragStartTarget=f||i,this._preventOutline=y},enable:function(){this._enabled||(ie(this._dragStartTarget,Qo,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(hr._dragging===this&&this.finishDrag(!0),Pe(this._dragStartTarget,Qo,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!fo(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){hr._dragging===this&&this.finishDrag();return}if(!(hr._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(hr._dragging=this,this._preventOutline&&Ae(this._element),fn(),ai(),!this._moving)){this.fire("down");var f=i.touches?i.touches[0]:i,y=Nn(this._element);this._startPoint=new Mt(f.clientX,f.clientY),this._startPos=gr(this._element),this._parentScale=ui(y);var M=i.type==="mousedown";ie(document,M?"mousemove":"touchmove",this._onMove,this),ie(document,M?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var f=i.touches&&i.touches.length===1?i.touches[0]:i,y=new Mt(f.clientX,f.clientY)._subtract(this._startPoint);!y.x&&!y.y||Math.abs(y.x)+Math.abs(y.y)<this.options.clickTolerance||(y.x/=this._parentScale.x,y.y/=this._parentScale.y,it(i),this._moved||(this.fire("dragstart"),this._moved=!0,Zt(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Zt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(y),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),De(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){En(document.body,"leaflet-dragging"),this._lastTarget&&(En(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Pe(document,"mousemove touchmove",this._onMove,this),Pe(document,"mouseup touchend touchcancel",this._onUp,this),Qn(),Vi(),this._moved&&this._moving&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)}),this._moving=!1,hr._dragging=!1}});function Wi(i,f){if(!f||!i.length)return i.slice();var y=f*f;return i=Be(i,y),i=Ha(i,y),i}function Ro(i,f,y){return Math.sqrt(_e(i,f,y,!0))}function Zs(i,f,y){return _e(i,f,y)}function Ha(i,f){var y=i.length,M=typeof Uint8Array<"u"?Uint8Array:Array,O=new M(y);O[0]=O[y-1]=1,ua(i,O,f,0,y-1);var W,at=[];for(W=0;W<y;W++)O[W]&&at.push(i[W]);return at}function ua(i,f,y,M,O){var W=0,at,mt,xt;for(mt=M+1;mt<=O-1;mt++)xt=_e(i[mt],i[M],i[O],!0),xt>W&&(at=mt,W=xt);W>y&&(f[at]=1,ua(i,f,y,M,at),ua(i,f,y,at,O))}function Be(i,f){for(var y=[i[0]],M=1,O=0,W=i.length;M<W;M++)Bu(i[M],i[O])>f&&(y.push(i[M]),O=M);return O<W-1&&y.push(i[W-1]),y}var po;function Yn(i,f,y,M,O){var W=M?po:Lr(i,y),at=Lr(f,y),mt,xt,Nt;for(po=at;;){if(!(W|at))return[i,f];if(W&at)return!1;mt=W||at,xt=ts(i,f,mt,y,O),Nt=Lr(xt,y),mt===W?(i=xt,W=Nt):(f=xt,at=Nt)}}function ts(i,f,y,M,O){var W=f.x-i.x,at=f.y-i.y,mt=M.min,xt=M.max,Nt,ee;return y&8?(Nt=i.x+W*(xt.y-i.y)/at,ee=xt.y):y&4?(Nt=i.x+W*(mt.y-i.y)/at,ee=mt.y):y&2?(Nt=xt.x,ee=i.y+at*(xt.x-i.x)/W):y&1&&(Nt=mt.x,ee=i.y+at*(mt.x-i.x)/W),new Mt(Nt,ee,O)}function Lr(i,f){var y=0;return i.x<f.min.x?y|=1:i.x>f.max.x&&(y|=2),i.y<f.min.y?y|=4:i.y>f.max.y&&(y|=8),y}function Bu(i,f){var y=f.x-i.x,M=f.y-i.y;return y*y+M*M}function _e(i,f,y,M){var O=f.x,W=f.y,at=y.x-O,mt=y.y-W,xt=at*at+mt*mt,Nt;return xt>0&&(Nt=((i.x-O)*at+(i.y-W)*mt)/xt,Nt>1?(O=y.x,W=y.y):Nt>0&&(O+=at*Nt,W+=mt*Nt)),at=i.x-O,mt=i.y-W,M?at*at+mt*mt:new Mt(O,W)}function Kr(i){return!B(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function Bn(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Kr(i)}function Is(i,f){var y,M,O,W,at,mt,xt,Nt;if(!i||i.length===0)throw new Error("latlngs not passed");Kr(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var ee=[];for(var ae in i)ee.push(f.project(Tt(i[ae])));var Se=ee.length;for(y=0,M=0;y<Se-1;y++)M+=ee[y].distanceTo(ee[y+1])/2;if(M===0)Nt=ee[0];else for(y=0,W=0;y<Se-1;y++)if(at=ee[y],mt=ee[y+1],O=at.distanceTo(mt),W+=O,W>M){xt=(W-M)/O,Nt=[mt.x-xt*(mt.x-at.x),mt.y-xt*(mt.y-at.y)];break}return f.unproject(ft(Nt))}var li={__proto__:null,simplify:Wi,pointToSegmentDistance:Ro,closestPointOnSegment:Zs,clipSegment:Yn,_getEdgeIntersection:ts,_getBitCode:Lr,_sqClosestPointOnSegment:_e,isFlat:Kr,_flat:Bn,polylineCenter:Is};function es(i,f,y){var M,O=[1,4,2,8],W,at,mt,xt,Nt,ee,ae,Se;for(W=0,ee=i.length;W<ee;W++)i[W]._code=Lr(i[W],f);for(mt=0;mt<4;mt++){for(ae=O[mt],M=[],W=0,ee=i.length,at=ee-1;W<ee;at=W++)xt=i[W],Nt=i[at],xt._code&ae?Nt._code&ae||(Se=ts(Nt,xt,ae,f,y),Se._code=Lr(Se,f),M.push(Se)):(Nt._code&ae&&(Se=ts(Nt,xt,ae,f,y),Se._code=Lr(Se,f),M.push(Se)),M.push(xt));i=M}return i}function Xa(i,f){var y,M,O,W,at,mt,xt,Nt,ee;if(!i||i.length===0)throw new Error("latlngs not passed");Kr(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var ae=[];for(var Se in i)ae.push(f.project(Tt(i[Se])));var ci=ae.length;for(mt=xt=Nt=0,y=0,M=ci-1;y<ci;M=y++)O=ae[y],W=ae[M],at=O.y*W.x-W.y*O.x,xt+=(O.x+W.x)*at,Nt+=(O.y+W.y)*at,mt+=at*3;return mt===0?ee=ae[0]:ee=[xt/mt,Nt/mt],f.unproject(ft(ee))}var ns={__proto__:null,clipPolygon:es,polygonCenter:Xa},Oe={project:function(i){return new Mt(i.lng,i.lat)},unproject:function(i){return new Qt(i.y,i.x)},bounds:new Ct([-180,-90],[180,90])},_i={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Ct([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var f=Math.PI/180,y=this.R,M=i.lat*f,O=this.R_MINOR/y,W=Math.sqrt(1-O*O),at=W*Math.sin(M),mt=Math.tan(Math.PI/4-M/2)/Math.pow((1-at)/(1+at),W/2);return M=-y*Math.log(Math.max(mt,1e-10)),new Mt(i.lng*f*y,M)},unproject:function(i){for(var f=180/Math.PI,y=this.R,M=this.R_MINOR/y,O=Math.sqrt(1-M*M),W=Math.exp(-i.y/y),at=Math.PI/2-2*Math.atan(W),mt=0,xt=.1,Nt;mt<15&&Math.abs(xt)>1e-7;mt++)Nt=O*Math.sin(at),Nt=Math.pow((1-Nt)/(1+Nt),O/2),xt=Math.PI/2-2*Math.atan(W*Nt)-at,at+=xt;return new Qt(at*f,i.x*f/y)}},Os={__proto__:null,LonLat:Oe,Mercator:_i,SphericalMercator:fe},go=s({},Re,{code:"EPSG:3395",projection:_i,transformation:function(){var i=.5/(Math.PI*_i.R);return Bt(i,.5,-i,.5)}()}),yi=s({},Re,{code:"EPSG:4326",projection:Oe,transformation:Bt(1/180,1,-1/180,.5)}),Hr=s({},ce,{projection:Oe,transformation:Bt(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,f){var y=f.lng-i.lng,M=f.lat-i.lat;return Math.sqrt(y*y+M*M)},infinite:!0});ce.Earth=Re,ce.EPSG3395=go,ce.EPSG3857=hn,ce.EPSG900913=Sn,ce.EPSG4326=yi,ce.Simple=Hr;var mo=bt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[g(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[g(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var f=i.target;if(f.hasLayer(this)){if(this._map=f,this._zoomAnimated=f._zoomAnimated,this.getEvents){var y=this.getEvents();f.on(y,this),this.once("remove",function(){f.off(y,this)},this)}this.onAdd(f),this.fire("add"),f.fire("layeradd",{layer:this})}}});Dt.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var f=g(i);return this._layers[f]?this:(this._layers[f]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var f=g(i);return this._layers[f]?(this._loaded&&i.onRemove(this),delete this._layers[f],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return g(i)in this._layers},eachLayer:function(i,f){for(var y in this._layers)i.call(f,this._layers[y]);return this},_addLayers:function(i){i=i?B(i)?i:[i]:[];for(var f=0,y=i.length;f<y;f++)this.addLayer(i[f])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[g(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var f=g(i);this._zoomBoundLayers[f]&&(delete this._zoomBoundLayers[f],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,f=-1/0,y=this._getZoomSpan();for(var M in this._zoomBoundLayers){var O=this._zoomBoundLayers[M].options;i=O.minZoom===void 0?i:Math.min(i,O.minZoom),f=O.maxZoom===void 0?f:Math.max(f,O.maxZoom)}this._layersMaxZoom=f===-1/0?void 0:f,this._layersMinZoom=i===1/0?void 0:i,y!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ms=mo.extend({initialize:function(i,f){G(this,f),this._layers={};var y,M;if(i)for(y=0,M=i.length;y<M;y++)this.addLayer(i[y])},addLayer:function(i){var f=this.getLayerId(i);return this._layers[f]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var f=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[f]&&this._map.removeLayer(this._layers[f]),delete this._layers[f],this},hasLayer:function(i){var f=typeof i=="number"?i:this.getLayerId(i);return f in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var f=Array.prototype.slice.call(arguments,1),y,M;for(y in this._layers)M=this._layers[y],M[i]&&M[i].apply(M,f);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,f){for(var y in this._layers)i.call(f,this._layers[y]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return g(i)}}),Ao=function(i,f){return new ms(i,f)},br=ms.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),ms.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),ms.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new Rt;for(var f in this._layers){var y=this._layers[f];i.extend(y.getBounds?y.getBounds():y.getLatLng())}return i}}),rs=function(i,f){return new br(i,f)},Dr=Q.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){G(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,f){var y=this._getIconUrl(i);if(!y){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var M=this._createImg(y,f&&f.tagName==="IMG"?f:null);return this._setIconStyles(M,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(M.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),M},_setIconStyles:function(i,f){var y=this.options,M=y[f+"Size"];typeof M=="number"&&(M=[M,M]);var O=ft(M),W=ft(f==="shadow"&&y.shadowAnchor||y.iconAnchor||O&&O.divideBy(2,!0));i.className="leaflet-marker-"+f+" "+(y.className||""),W&&(i.style.marginLeft=-W.x+"px",i.style.marginTop=-W.y+"px"),O&&(i.style.width=O.x+"px",i.style.height=O.y+"px")},_createImg:function(i,f){return f=f||document.createElement("img"),f.src=i,f},_getIconUrl:function(i){return Ut.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function ro(i){return new Dr(i)}var Ti=Dr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof Ti.imagePath!="string"&&(Ti.imagePath=this._detectIconPath()),(this.options.imagePath||Ti.imagePath)+Dr.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var f=function(y,M,O){var W=M.exec(y);return W&&W[O]};return i=f(i,/^url\((['"])?(.+)\1\)$/,2),i&&f(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=Le("div","leaflet-default-icon-path",document.body),f=Fi(i,"background-image")||Fi(i,"backgroundImage");if(document.body.removeChild(i),f=this._stripUrl(f),f)return f;var y=document.querySelector('link[href$="leaflet.css"]');return y?y.href.substring(0,y.href.length-11-1):""}}),Do=Yt.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new hr(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Zt(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&En(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var f=this._marker,y=f._map,M=this._marker.options.autoPanSpeed,O=this._marker.options.autoPanPadding,W=gr(f._icon),at=y.getPixelBounds(),mt=y.getPixelOrigin(),xt=st(at.min._subtract(mt).add(O),at.max._subtract(mt).subtract(O));if(!xt.contains(W)){var Nt=ft((Math.max(xt.max.x,W.x)-xt.max.x)/(at.max.x-xt.max.x)-(Math.min(xt.min.x,W.x)-xt.min.x)/(at.min.x-xt.min.x),(Math.max(xt.max.y,W.y)-xt.max.y)/(at.max.y-xt.max.y)-(Math.min(xt.min.y,W.y)-xt.min.y)/(at.min.y-xt.min.y)).multiplyBy(M);y.panBy(Nt,{animate:!1}),this._draggable._newPos._add(Nt),this._draggable._startPos._add(Nt),De(f._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=lt(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(gt(this._panRequest),this._panRequest=lt(this._adjustPan.bind(this,i)))},_onDrag:function(i){var f=this._marker,y=f._shadow,M=gr(f._icon),O=f._map.layerPointToLatLng(M);y&&De(y,M),f._latlng=O,i.latlng=O,i.oldLatLng=this._oldLatLng,f.fire("move",i).fire("drag",i)},_onDragEnd:function(i){gt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),Ki=mo.extend({options:{icon:new Ti,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,f){G(this,f),this._latlng=Tt(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var f=this._latlng;return this._latlng=Tt(i),this.update(),this.fire("move",{oldLatLng:f,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,f="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),y=i.icon.createIcon(this._icon),M=!1;y!==this._icon&&(this._icon&&this._removeIcon(),M=!0,i.title&&(y.title=i.title),y.tagName==="IMG"&&(y.alt=i.alt||"")),Zt(y,f),i.keyboard&&(y.tabIndex="0",y.setAttribute("role","button")),this._icon=y,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ie(y,"focus",this._panOnFocus,this);var O=i.icon.createShadow(this._shadow),W=!1;O!==this._shadow&&(this._removeShadow(),W=!0),O&&(Zt(O,f),O.alt=""),this._shadow=O,i.opacity<1&&this._updateOpacity(),M&&this.getPane().appendChild(this._icon),this._initInteraction(),O&&W&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Pe(this._icon,"focus",this._panOnFocus,this),le(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&le(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&De(this._icon,i),this._shadow&&De(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var f=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(f)},_initInteraction:function(){if(this.options.interactive&&(Zt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Do)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Do(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&Kt(this._icon,i),this._shadow&&Kt(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var f=this.options.icon.options,y=f.iconSize?ft(f.iconSize):ft(0,0),M=f.iconAnchor?ft(f.iconAnchor):ft(0,0);i.panInside(this._latlng,{paddingTopLeft:M,paddingBottomRight:y.subtract(M)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Br(i,f){return new Ki(i,f)}var Bo=mo.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return G(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),_s=Bo.extend({options:{fill:!0,radius:10},initialize:function(i,f){G(this,f),this._latlng=Tt(i),this._radius=this.options.radius},setLatLng:function(i){var f=this._latlng;return this._latlng=Tt(i),this.redraw(),this.fire("move",{oldLatLng:f,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var f=i&&i.radius||this._radius;return Bo.prototype.setStyle.call(this,i),this.setRadius(f),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,f=this._radiusY||i,y=this._clickTolerance(),M=[i+y,f+y];this._pxBounds=new Ct(this._point.subtract(M),this._point.add(M))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Jr(i,f){return new _s(i,f)}var _o=_s.extend({initialize:function(i,f,y){if(typeof f=="number"&&(f=s({},y,{radius:f})),G(this,f),this._latlng=Tt(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new Rt(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:Bo.prototype.setStyle,_project:function(){var i=this._latlng.lng,f=this._latlng.lat,y=this._map,M=y.options.crs;if(M.distance===Re.distance){var O=Math.PI/180,W=this._mRadius/Re.R/O,at=y.project([f+W,i]),mt=y.project([f-W,i]),xt=at.add(mt).divideBy(2),Nt=y.unproject(xt).lat,ee=Math.acos((Math.cos(W*O)-Math.sin(f*O)*Math.sin(Nt*O))/(Math.cos(f*O)*Math.cos(Nt*O)))/O;(isNaN(ee)||ee===0)&&(ee=W/Math.cos(Math.PI/180*f)),this._point=xt.subtract(y.getPixelOrigin()),this._radius=isNaN(ee)?0:xt.x-y.project([Nt,i-ee]).x,this._radiusY=xt.y-at.y}else{var ae=M.unproject(M.project(this._latlng).subtract([this._mRadius,0]));this._point=y.latLngToLayerPoint(this._latlng),this._radius=this._point.x-y.latLngToLayerPoint(ae).x}this._updateBounds()}});function io(i,f,y){return new _o(i,f,y)}var Mo=Bo.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,f){G(this,f),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var f=1/0,y=null,M=_e,O,W,at=0,mt=this._parts.length;at<mt;at++)for(var xt=this._parts[at],Nt=1,ee=xt.length;Nt<ee;Nt++){O=xt[Nt-1],W=xt[Nt];var ae=M(i,O,W,!0);ae<f&&(f=ae,y=M(i,O,W))}return y&&(y.distance=Math.sqrt(f)),y},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Is(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,f){return f=f||this._defaultShape(),i=Tt(i),f.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new Rt,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return Kr(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var f=[],y=Kr(i),M=0,O=i.length;M<O;M++)y?(f[M]=Tt(i[M]),this._bounds.extend(f[M])):f[M]=this._convertLatLngs(i[M]);return f},_project:function(){var i=new Ct;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),f=new Mt(i,i);this._rawPxBounds&&(this._pxBounds=new Ct([this._rawPxBounds.min.subtract(f),this._rawPxBounds.max.add(f)]))},_projectLatlngs:function(i,f,y){var M=i[0]instanceof Qt,O=i.length,W,at;if(M){for(at=[],W=0;W<O;W++)at[W]=this._map.latLngToLayerPoint(i[W]),y.extend(at[W]);f.push(at)}else for(W=0;W<O;W++)this._projectLatlngs(i[W],f,y)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var f=this._parts,y,M,O,W,at,mt,xt;for(y=0,O=0,W=this._rings.length;y<W;y++)for(xt=this._rings[y],M=0,at=xt.length;M<at-1;M++)mt=Yn(xt[M],xt[M+1],i,M,!0),mt&&(f[O]=f[O]||[],f[O].push(mt[0]),(mt[1]!==xt[M+1]||M===at-2)&&(f[O].push(mt[1]),O++))}},_simplifyPoints:function(){for(var i=this._parts,f=this.options.smoothFactor,y=0,M=i.length;y<M;y++)i[y]=Wi(i[y],f)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,f){var y,M,O,W,at,mt,xt=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(y=0,W=this._parts.length;y<W;y++)for(mt=this._parts[y],M=0,at=mt.length,O=at-1;M<at;O=M++)if(!(!f&&M===0)&&Ro(i,mt[O],mt[M])<=xt)return!0;return!1}});function hi(i,f){return new Mo(i,f)}Mo._flat=Bn;var ys=Mo.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Xa(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var f=Mo.prototype._convertLatLngs.call(this,i),y=f.length;return y>=2&&f[0]instanceof Qt&&f[0].equals(f[y-1])&&f.pop(),f},_setLatLngs:function(i){Mo.prototype._setLatLngs.call(this,i),Kr(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Kr(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,f=this.options.weight,y=new Mt(f,f);if(i=new Ct(i.min.subtract(y),i.max.add(y)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var M=0,O=this._rings.length,W;M<O;M++)W=es(this._rings[M],i,!0),W.length&&this._parts.push(W)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var f=!1,y,M,O,W,at,mt,xt,Nt;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(W=0,xt=this._parts.length;W<xt;W++)for(y=this._parts[W],at=0,Nt=y.length,mt=Nt-1;at<Nt;mt=at++)M=y[at],O=y[mt],M.y>i.y!=O.y>i.y&&i.x<(O.x-M.x)*(i.y-M.y)/(O.y-M.y)+M.x&&(f=!f);return f||Mo.prototype._containsPoint.call(this,i,!0)}});function Ys(i,f){return new ys(i,f)}var qi=br.extend({initialize:function(i,f){G(this,f),this._layers={},i&&this.addData(i)},addData:function(i){var f=B(i)?i:i.features,y,M,O;if(f){for(y=0,M=f.length;y<M;y++)O=f[y],(O.geometries||O.geometry||O.features||O.coordinates)&&this.addData(O);return this}var W=this.options;if(W.filter&&!W.filter(i))return this;var at=Vs(i,W);return at?(at.feature=ji(i),at.defaultOptions=at.options,this.resetStyle(at),W.onEachFeature&&W.onEachFeature(i,at),this.addLayer(at)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=s({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(f){this._setLayerStyle(f,i)},this)},_setLayerStyle:function(i,f){i.setStyle&&(typeof f=="function"&&(f=f(i.feature)),i.setStyle(f))}});function Vs(i,f){var y=i.type==="Feature"?i.geometry:i,M=y?y.coordinates:null,O=[],W=f&&f.pointToLayer,at=f&&f.coordsToLatLng||Fo,mt,xt,Nt,ee;if(!M&&!y)return null;switch(y.type){case"Point":return mt=at(M),Za(W,i,mt,f);case"MultiPoint":for(Nt=0,ee=M.length;Nt<ee;Nt++)mt=at(M[Nt]),O.push(Za(W,i,mt,f));return new br(O);case"LineString":case"MultiLineString":return xt=Ui(M,y.type==="LineString"?0:1,at),new Mo(xt,f);case"Polygon":case"MultiPolygon":return xt=Ui(M,y.type==="Polygon"?1:2,at),new ys(xt,f);case"GeometryCollection":for(Nt=0,ee=y.geometries.length;Nt<ee;Nt++){var ae=Vs({geometry:y.geometries[Nt],type:"Feature",properties:i.properties},f);ae&&O.push(ae)}return new br(O);case"FeatureCollection":for(Nt=0,ee=y.features.length;Nt<ee;Nt++){var Se=Vs(y.features[Nt],f);Se&&O.push(Se)}return new br(O);default:throw new Error("Invalid GeoJSON object.")}}function Za(i,f,y,M){return i?i(f,y):new Ki(y,M&&M.markersInheritOptions&&M)}function Fo(i){return new Qt(i[1],i[0],i[2])}function Ui(i,f,y){for(var M=[],O=0,W=i.length,at;O<W;O++)at=f?Ui(i[O],f-1,y):(y||Fo)(i[O]),M.push(at);return M}function mr(i,f){return i=Tt(i),i.alt!==void 0?[P(i.lng,f),P(i.lat,f),P(i.alt,f)]:[P(i.lng,f),P(i.lat,f)]}function zo(i,f,y,M){for(var O=[],W=0,at=i.length;W<at;W++)O.push(f?zo(i[W],Kr(i[W])?0:f-1,y,M):mr(i[W],M));return!f&&y&&O.push(O[0].slice()),O}function cr(i,f){return i.feature?s({},i.feature,{geometry:f}):ji(f)}function ji(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var Po={toGeoJSON:function(i){return cr(this,{type:"Point",coordinates:mr(this.getLatLng(),i)})}};Ki.include(Po),_o.include(Po),_s.include(Po),Mo.include({toGeoJSON:function(i){var f=!Kr(this._latlngs),y=zo(this._latlngs,f?1:0,!1,i);return cr(this,{type:(f?"Multi":"")+"LineString",coordinates:y})}}),ys.include({toGeoJSON:function(i){var f=!Kr(this._latlngs),y=f&&!Kr(this._latlngs[0]),M=zo(this._latlngs,y?2:f?1:0,!0,i);return f||(M=[M]),cr(this,{type:(y?"Multi":"")+"Polygon",coordinates:M})}}),ms.include({toMultiPoint:function(i){var f=[];return this.eachLayer(function(y){f.push(y.toGeoJSON(i).geometry.coordinates)}),cr(this,{type:"MultiPoint",coordinates:f})},toGeoJSON:function(i){var f=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(f==="MultiPoint")return this.toMultiPoint(i);var y=f==="GeometryCollection",M=[];return this.eachLayer(function(O){if(O.toGeoJSON){var W=O.toGeoJSON(i);if(y)M.push(W.geometry);else{var at=ji(W);at.type==="FeatureCollection"?M.push.apply(M,at.features):M.push(at)}}}),y?cr(this,{geometries:M,type:"GeometryCollection"}):{type:"FeatureCollection",features:M}}});function la(i,f){return new qi(i,f)}var vs=la,oo=mo.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,f,y){this._url=i,this._bounds=Ot(f),G(this,y)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Zt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){le(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&Un(this._image),this},bringToBack:function(){return this._map&&Pi(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=Ot(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",f=this._image=i?this._url:Le("img");if(Zt(f,"leaflet-image-layer"),this._zoomAnimated&&Zt(f,"leaflet-zoom-animated"),this.options.className&&Zt(f,this.options.className),f.onselectstart=x,f.onmousemove=x,f.onload=l(this.fire,this,"load"),f.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=f.src;return}f.src=this._url,f.alt=this.options.alt},_animateZoom:function(i){var f=this._map.getZoomScale(i.zoom),y=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;si(this._image,y,f)},_reset:function(){var i=this._image,f=new Ct(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),y=f.getSize();De(i,f.min),i.style.width=y.x+"px",i.style.height=y.y+"px"},_updateOpacity:function(){Kt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),Co=function(i,f,y){return new oo(i,f,y)},Er=oo.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",f=this._image=i?this._url:Le("video");if(Zt(f,"leaflet-image-layer"),this._zoomAnimated&&Zt(f,"leaflet-zoom-animated"),this.options.className&&Zt(f,this.options.className),f.onselectstart=x,f.onmousemove=x,f.onloadeddata=l(this.fire,this,"load"),i){for(var y=f.getElementsByTagName("source"),M=[],O=0;O<y.length;O++)M.push(y[O].src);this._url=y.length>0?M:[f.src];return}B(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(f.style,"objectFit")&&(f.style.objectFit="fill"),f.autoplay=!!this.options.autoplay,f.loop=!!this.options.loop,f.muted=!!this.options.muted,f.playsInline=!!this.options.playsInline;for(var W=0;W<this._url.length;W++){var at=Le("source");at.src=this._url[W],f.appendChild(at)}}});function Ji(i,f,y){return new Er(i,f,y)}var Xr=oo.extend({_initImage:function(){var i=this._image=this._url;Zt(i,"leaflet-image-layer"),this._zoomAnimated&&Zt(i,"leaflet-zoom-animated"),this.options.className&&Zt(i,this.options.className),i.onselectstart=x,i.onmousemove=x}});function Fu(i,f,y){return new Xr(i,f,y)}var $r=mo.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,f){i&&(i instanceof Qt||B(i))?(this._latlng=Tt(i),G(this,f)):(G(this,i),this._source=f),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&Kt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&Kt(this._container,1),this.bringToFront(),this.options.interactive&&(Zt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(Kt(this._container,0),this._removeTimeout=setTimeout(l(le,void 0,this._container),200)):le(this._container),this.options.interactive&&(En(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=Tt(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Un(this._container),this},bringToBack:function(){return this._map&&Pi(this._container),this},_prepareOpen:function(i){var f=this._source;if(!f._map)return!1;if(f instanceof br){f=null;var y=this._source._layers;for(var M in y)if(y[M]._map){f=y[M];break}if(!f)return!1;this._source=f}if(!i)if(f.getCenter)i=f.getCenter();else if(f.getLatLng)i=f.getLatLng();else if(f.getBounds)i=f.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,f=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof f=="string")i.innerHTML=f;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(f)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),f=ft(this.options.offset),y=this._getAnchor();this._zoomAnimated?De(this._container,i.add(y)):f=f.add(i).add(y);var M=this._containerBottom=-f.y,O=this._containerLeft=-Math.round(this._containerWidth/2)+f.x;this._container.style.bottom=M+"px",this._container.style.left=O+"px"}},_getAnchor:function(){return[0,0]}});Dt.include({_initOverlay:function(i,f,y,M){var O=f;return O instanceof i||(O=new i(M).setContent(f)),y&&O.setLatLng(y),O}}),mo.include({_initOverlay:function(i,f,y,M){var O=y;return O instanceof i?(G(O,M),O._source=this):(O=f&&!M?f:new i(M,this),O.setContent(y)),O}});var So=$r.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,$r.prototype.openOn.call(this,i)},onAdd:function(i){$r.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Bo||this._source.on("preclick",I))},onRemove:function(i){$r.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Bo||this._source.off("preclick",I))},getEvents:function(){var i=$r.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",f=this._container=Le("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),y=this._wrapper=Le("div",i+"-content-wrapper",f);if(this._contentNode=Le("div",i+"-content",y),nt(f),V(this._contentNode),ie(f,"contextmenu",I),this._tipContainer=Le("div",i+"-tip-container",f),this._tip=Le("div",i+"-tip",this._tipContainer),this.options.closeButton){var M=this._closeButton=Le("a",i+"-close-button",f);M.setAttribute("role","button"),M.setAttribute("aria-label","Close popup"),M.href="#close",M.innerHTML='<span aria-hidden="true">&#215;</span>',ie(M,"click",function(O){it(O),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,f=i.style;f.width="",f.whiteSpace="nowrap";var y=i.offsetWidth;y=Math.min(y,this.options.maxWidth),y=Math.max(y,this.options.minWidth),f.width=y+1+"px",f.whiteSpace="",f.height="";var M=i.offsetHeight,O=this.options.maxHeight,W="leaflet-popup-scrolled";O&&M>O?(f.height=O+"px",Zt(i,W)):En(i,W),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var f=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),y=this._getAnchor();De(this._container,f.add(y))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,f=parseInt(Fi(this._container,"marginBottom"),10)||0,y=this._container.offsetHeight+f,M=this._containerWidth,O=new Mt(this._containerLeft,-y-this._containerBottom);O._add(gr(this._container));var W=i.layerPointToContainerPoint(O),at=ft(this.options.autoPanPadding),mt=ft(this.options.autoPanPaddingTopLeft||at),xt=ft(this.options.autoPanPaddingBottomRight||at),Nt=i.getSize(),ee=0,ae=0;W.x+M+xt.x>Nt.x&&(ee=W.x+M-Nt.x+xt.x),W.x-ee-mt.x<0&&(ee=W.x-mt.x),W.y+y+xt.y>Nt.y&&(ae=W.y+y-Nt.y+xt.y),W.y-ae-mt.y<0&&(ae=W.y-mt.y),(ee||ae)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([ee,ae]))}},_getAnchor:function(){return ft(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Fr=function(i,f){return new So(i,f)};Dt.mergeOptions({closePopupOnClick:!0}),Dt.include({openPopup:function(i,f,y){return this._initOverlay(So,i,f,y).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),mo.include({bindPopup:function(i,f){return this._popup=this._initOverlay(So,this._popup,i,f),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof br||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){rt(i);var f=i.layer||i.target;if(this._popup._source===f&&!(f instanceof Bo)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=f,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var _r=$r.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){$r.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){$r.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=$r.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",f=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Le("div",f),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+g(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var f,y,M=this._map,O=this._container,W=M.latLngToContainerPoint(M.getCenter()),at=M.layerPointToContainerPoint(i),mt=this.options.direction,xt=O.offsetWidth,Nt=O.offsetHeight,ee=ft(this.options.offset),ae=this._getAnchor();mt==="top"?(f=xt/2,y=Nt):mt==="bottom"?(f=xt/2,y=0):mt==="center"?(f=xt/2,y=Nt/2):mt==="right"?(f=0,y=Nt/2):mt==="left"?(f=xt,y=Nt/2):at.x<W.x?(mt="right",f=0,y=Nt/2):(mt="left",f=xt+(ee.x+ae.x)*2,y=Nt/2),i=i.subtract(ft(f,y,!0)).add(ee).add(ae),En(O,"leaflet-tooltip-right"),En(O,"leaflet-tooltip-left"),En(O,"leaflet-tooltip-top"),En(O,"leaflet-tooltip-bottom"),Zt(O,"leaflet-tooltip-"+mt),De(O,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&Kt(this._container,i)},_animateZoom:function(i){var f=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(f)},_getAnchor:function(){return ft(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),so=function(i,f){return new _r(i,f)};Dt.include({openTooltip:function(i,f,y){return this._initOverlay(_r,i,f,y).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),mo.include({bindTooltip:function(i,f){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(_r,this._tooltip,i,f),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var f=i?"off":"on",y={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?y.add=this._openTooltip:(y.mouseover=this._openTooltip,y.mouseout=this.closeTooltip,y.click=this._openTooltip,this._map?this._addFocusListeners():y.add=this._addFocusListeners),this._tooltip.options.sticky&&(y.mousemove=this._moveTooltip),this[f](y),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof br||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var f=i.getElement();f&&(ie(f,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),ie(f,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var f=i.getElement();f&&f.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){!this._tooltip||!this._map||this._map.dragging&&this._map.dragging.moving()||(this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0))},_moveTooltip:function(i){var f=i.latlng,y,M;this._tooltip.options.sticky&&i.originalEvent&&(y=this._map.mouseEventToContainerPoint(i.originalEvent),M=this._map.containerPointToLayerPoint(y),f=this._map.layerPointToLatLng(M)),this._tooltip.setLatLng(f)}});var Ii=Dr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var f=i&&i.tagName==="DIV"?i:document.createElement("div"),y=this.options;if(y.html instanceof Element?(Rr(f),f.appendChild(y.html)):f.innerHTML=y.html!==!1?y.html:"",y.bgPos){var M=ft(y.bgPos);f.style.backgroundPosition=-M.x+"px "+-M.y+"px"}return this._setIconStyles(f,"icon"),f},createShadow:function(){return null}});function Ya(i){return new Ii(i)}Dr.Default=Ti;var yo=mo.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ut.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){G(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),le(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Un(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Pi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof Mt?i:new Mt(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var f=this.getPane().children,y=-i(-1/0,1/0),M=0,O=f.length,W;M<O;M++)W=f[M].style.zIndex,f[M]!==this._container&&W&&(y=i(y,+W));isFinite(y)&&(this.options.zIndex=y+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ut.ielt9){Kt(this._container,this.options.opacity);var i=+new Date,f=!1,y=!1;for(var M in this._tiles){var O=this._tiles[M];if(!(!O.current||!O.loaded)){var W=Math.min(1,(i-O.loaded)/200);Kt(O.el,W),W<1?f=!0:(O.active?y=!0:this._onOpaqueTile(O),O.active=!0)}}y&&!this._noPrune&&this._pruneTiles(),f&&(gt(this._fadeFrame),this._fadeFrame=lt(this._updateOpacity,this))}},_onOpaqueTile:x,_initContainer:function(){this._container||(this._container=Le("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,f=this.options.maxZoom;if(i!==void 0){for(var y in this._levels)y=Number(y),this._levels[y].el.children.length||y===i?(this._levels[y].el.style.zIndex=f-Math.abs(i-y),this._onUpdateLevel(y)):(le(this._levels[y].el),this._removeTilesAtZoom(y),this._onRemoveLevel(y),delete this._levels[y]);var M=this._levels[i],O=this._map;return M||(M=this._levels[i]={},M.el=Le("div","leaflet-tile-container leaflet-zoom-animated",this._container),M.el.style.zIndex=f,M.origin=O.project(O.unproject(O.getPixelOrigin()),i).round(),M.zoom=i,this._setZoomTransform(M,O.getCenter(),O.getZoom()),x(M.el.offsetWidth),this._onCreateLevel(M)),this._level=M,M}},_onUpdateLevel:x,_onRemoveLevel:x,_onCreateLevel:x,_pruneTiles:function(){if(this._map){var i,f,y=this._map.getZoom();if(y>this.options.maxZoom||y<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)f=this._tiles[i],f.retain=f.current;for(i in this._tiles)if(f=this._tiles[i],f.current&&!f.active){var M=f.coords;this._retainParent(M.x,M.y,M.z,M.z-5)||this._retainChildren(M.x,M.y,M.z,M.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var f in this._tiles)this._tiles[f].coords.z===i&&this._removeTile(f)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)le(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,f,y,M){var O=Math.floor(i/2),W=Math.floor(f/2),at=y-1,mt=new Mt(+O,+W);mt.z=+at;var xt=this._tileCoordsToKey(mt),Nt=this._tiles[xt];return Nt&&Nt.active?(Nt.retain=!0,!0):(Nt&&Nt.loaded&&(Nt.retain=!0),at>M?this._retainParent(O,W,at,M):!1)},_retainChildren:function(i,f,y,M){for(var O=2*i;O<2*i+2;O++)for(var W=2*f;W<2*f+2;W++){var at=new Mt(O,W);at.z=y+1;var mt=this._tileCoordsToKey(at),xt=this._tiles[mt];if(xt&&xt.active){xt.retain=!0;continue}else xt&&xt.loaded&&(xt.retain=!0);y+1<M&&this._retainChildren(O,W,y+1,M)}},_resetView:function(i){var f=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),f,f)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var f=this.options;return f.minNativeZoom!==void 0&&i<f.minNativeZoom?f.minNativeZoom:f.maxNativeZoom!==void 0&&f.maxNativeZoom<i?f.maxNativeZoom:i},_setView:function(i,f,y,M){var O=Math.round(f);this.options.maxZoom!==void 0&&O>this.options.maxZoom||this.options.minZoom!==void 0&&O<this.options.minZoom?O=void 0:O=this._clampZoom(O);var W=this.options.updateWhenZooming&&O!==this._tileZoom;(!M||W)&&(this._tileZoom=O,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),O!==void 0&&this._update(i),y||this._pruneTiles(),this._noPrune=!!y),this._setZoomTransforms(i,f)},_setZoomTransforms:function(i,f){for(var y in this._levels)this._setZoomTransform(this._levels[y],i,f)},_setZoomTransform:function(i,f,y){var M=this._map.getZoomScale(y,i.zoom),O=i.origin.multiplyBy(M).subtract(this._map._getNewPixelOrigin(f,y)).round();Ut.any3d?si(i.el,O,M):De(i.el,O)},_resetGrid:function(){var i=this._map,f=i.options.crs,y=this._tileSize=this.getTileSize(),M=this._tileZoom,O=this._map.getPixelWorldBounds(this._tileZoom);O&&(this._globalTileRange=this._pxBoundsToTileRange(O)),this._wrapX=f.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,f.wrapLng[0]],M).x/y.x),Math.ceil(i.project([0,f.wrapLng[1]],M).x/y.y)],this._wrapY=f.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([f.wrapLat[0],0],M).y/y.x),Math.ceil(i.project([f.wrapLat[1],0],M).y/y.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var f=this._map,y=f._animatingZoom?Math.max(f._animateToZoom,f.getZoom()):f.getZoom(),M=f.getZoomScale(y,this._tileZoom),O=f.project(i,this._tileZoom).floor(),W=f.getSize().divideBy(M*2);return new Ct(O.subtract(W),O.add(W))},_update:function(i){var f=this._map;if(f){var y=this._clampZoom(f.getZoom());if(i===void 0&&(i=f.getCenter()),this._tileZoom!==void 0){var M=this._getTiledPixelBounds(i),O=this._pxBoundsToTileRange(M),W=O.getCenter(),at=[],mt=this.options.keepBuffer,xt=new Ct(O.getBottomLeft().subtract([mt,-mt]),O.getTopRight().add([mt,-mt]));if(!(isFinite(O.min.x)&&isFinite(O.min.y)&&isFinite(O.max.x)&&isFinite(O.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Nt in this._tiles){var ee=this._tiles[Nt].coords;(ee.z!==this._tileZoom||!xt.contains(new Mt(ee.x,ee.y)))&&(this._tiles[Nt].current=!1)}if(Math.abs(y-this._tileZoom)>1){this._setView(i,y);return}for(var ae=O.min.y;ae<=O.max.y;ae++)for(var Se=O.min.x;Se<=O.max.x;Se++){var ci=new Mt(Se,ae);if(ci.z=this._tileZoom,!!this._isValidTile(ci)){var qo=this._tiles[this._tileCoordsToKey(ci)];qo?qo.current=!0:at.push(ci)}}if(at.sort(function(Ni,Ls){return Ni.distanceTo(W)-Ls.distanceTo(W)}),at.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Uo=document.createDocumentFragment();for(Se=0;Se<at.length;Se++)this._addTile(at[Se],Uo);this._level.el.appendChild(Uo)}}}},_isValidTile:function(i){var f=this._map.options.crs;if(!f.infinite){var y=this._globalTileRange;if(!f.wrapLng&&(i.x<y.min.x||i.x>y.max.x)||!f.wrapLat&&(i.y<y.min.y||i.y>y.max.y))return!1}if(!this.options.bounds)return!0;var M=this._tileCoordsToBounds(i);return Ot(this.options.bounds).overlaps(M)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var f=this._map,y=this.getTileSize(),M=i.scaleBy(y),O=M.add(y),W=f.unproject(M,i.z),at=f.unproject(O,i.z);return[W,at]},_tileCoordsToBounds:function(i){var f=this._tileCoordsToNwSe(i),y=new Rt(f[0],f[1]);return this.options.noWrap||(y=this._map.wrapLatLngBounds(y)),y},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var f=i.split(":"),y=new Mt(+f[0],+f[1]);return y.z=+f[2],y},_removeTile:function(i){var f=this._tiles[i];f&&(le(f.el),delete this._tiles[i],this.fire("tileunload",{tile:f.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){Zt(i,"leaflet-tile");var f=this.getTileSize();i.style.width=f.x+"px",i.style.height=f.y+"px",i.onselectstart=x,i.onmousemove=x,Ut.ielt9&&this.options.opacity<1&&Kt(i,this.options.opacity)},_addTile:function(i,f){var y=this._getTilePos(i),M=this._tileCoordsToKey(i),O=this.createTile(this._wrapCoords(i),l(this._tileReady,this,i));this._initTile(O),this.createTile.length<2&&lt(l(this._tileReady,this,i,null,O)),De(O,y),this._tiles[M]={el:O,coords:i,current:!0},f.appendChild(O),this.fire("tileloadstart",{tile:O,coords:i})},_tileReady:function(i,f,y){f&&this.fire("tileerror",{error:f,tile:y,coords:i});var M=this._tileCoordsToKey(i);y=this._tiles[M],y&&(y.loaded=+new Date,this._map._fadeAnimated?(Kt(y.el,0),gt(this._fadeFrame),this._fadeFrame=lt(this._updateOpacity,this)):(y.active=!0,this._pruneTiles()),f||(Zt(y.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:y.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ut.ielt9||!this._map._fadeAnimated?lt(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var f=new Mt(this._wrapX?v(i.x,this._wrapX):i.x,this._wrapY?v(i.y,this._wrapY):i.y);return f.z=i.z,f},_pxBoundsToTileRange:function(i){var f=this.getTileSize();return new Ct(i.min.unscaleBy(f).floor(),i.max.unscaleBy(f).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function Go(i){return new yo(i)}var Mr=yo.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,f){this._url=i,f=G(this,f),f.detectRetina&&Ut.retina&&f.maxZoom>0?(f.tileSize=Math.floor(f.tileSize/2),f.zoomReverse?(f.zoomOffset--,f.minZoom=Math.min(f.maxZoom,f.minZoom+1)):(f.zoomOffset++,f.maxZoom=Math.max(f.minZoom,f.maxZoom-1)),f.minZoom=Math.max(0,f.minZoom)):f.zoomReverse?f.minZoom=Math.min(f.maxZoom,f.minZoom):f.maxZoom=Math.max(f.minZoom,f.maxZoom),typeof f.subdomains=="string"&&(f.subdomains=f.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,f){return this._url===i&&f===void 0&&(f=!0),this._url=i,f||this.redraw(),this},createTile:function(i,f){var y=document.createElement("img");return ie(y,"load",l(this._tileOnLoad,this,f,y)),ie(y,"error",l(this._tileOnError,this,f,y)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(y.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(y.referrerPolicy=this.options.referrerPolicy),y.alt="",y.src=this.getTileUrl(i),y},getTileUrl:function(i){var f={r:Ut.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var y=this._globalTileRange.max.y-i.y;this.options.tms&&(f.y=y),f["-y"]=y}return R(this._url,s(f,this.options))},_tileOnLoad:function(i,f){Ut.ielt9?setTimeout(l(i,this,null,f),0):i(null,f)},_tileOnError:function(i,f,y){var M=this.options.errorTileUrl;M&&f.getAttribute("src")!==M&&(f.src=M),i(y,f)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,f=this.options.maxZoom,y=this.options.zoomReverse,M=this.options.zoomOffset;return y&&(i=f-i),i+M},_getSubdomain:function(i){var f=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[f]},_abortLoading:function(){var i,f;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(f=this._tiles[i].el,f.onload=x,f.onerror=x,!f.complete)){f.src=A;var y=this._tiles[i].coords;le(f),delete this._tiles[i],this.fire("tileabort",{tile:f,coords:y})}},_removeTile:function(i){var f=this._tiles[i];if(f)return f.el.setAttribute("src",A),yo.prototype._removeTile.call(this,i)},_tileReady:function(i,f,y){if(!(!this._map||y&&y.getAttribute("src")===A))return yo.prototype._tileReady.call(this,i,f,y)}});function ha(i,f){return new Mr(i,f)}var Pr=Mr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,f){this._url=i;var y=s({},this.defaultWmsParams);for(var M in f)M in this.options||(y[M]=f[M]);f=G(this,f);var O=f.detectRetina&&Ut.retina?2:1,W=this.getTileSize();y.width=W.x*O,y.height=W.y*O,this.wmsParams=y},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var f=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[f]=this._crs.code,Mr.prototype.onAdd.call(this,i)},getTileUrl:function(i){var f=this._tileCoordsToNwSe(i),y=this._crs,M=st(y.project(f[0]),y.project(f[1])),O=M.min,W=M.max,at=(this._wmsVersion>=1.3&&this._crs===yi?[O.y,O.x,W.y,W.x]:[O.x,O.y,W.x,W.y]).join(","),mt=Mr.prototype.getTileUrl.call(this,i);return mt+z(this.wmsParams,mt,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+at},setParams:function(i,f){return s(this.wmsParams,i),f||this.redraw(),this}});function Va(i,f){return new Pr(i,f)}Mr.WMS=Pr,ha.wms=Va;var zr=mo.extend({options:{padding:.1},initialize:function(i){G(this,i),g(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&Zt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,f){var y=this._map.getZoomScale(f,this._zoom),M=this._map.getSize().multiplyBy(.5+this.options.padding),O=this._map.project(this._center,f),W=M.multiplyBy(-y).add(O).subtract(this._map._getNewPixelOrigin(i,f));Ut.any3d?si(this._container,W,y):De(this._container,W)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,f=this._map.getSize(),y=this._map.containerPointToLayerPoint(f.multiplyBy(-i)).round();this._bounds=new Ct(y,y.add(f.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),yr=zr.extend({options:{tolerance:0},getEvents:function(){var i=zr.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){zr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");ie(i,"mousemove",this._onMouseMove,this),ie(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ie(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){gt(this._redrawRequest),delete this._ctx,le(this._container),Pe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var f in this._layers)i=this._layers[f],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){zr.prototype._update.call(this);var i=this._bounds,f=this._container,y=i.getSize(),M=Ut.retina?2:1;De(f,i.min),f.width=M*y.x,f.height=M*y.y,f.style.width=y.x+"px",f.style.height=y.y+"px",Ut.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){zr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[g(i)]=i;var f=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=f),this._drawLast=f,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var f=i._order,y=f.next,M=f.prev;y?y.prev=M:this._drawLast=M,M?M.next=y:this._drawFirst=y,delete i._order,delete this._layers[g(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var f=i.options.dashArray.split(/[, ]+/),y=[],M,O;for(O=0;O<f.length;O++){if(M=Number(f[O]),isNaN(M))return;y.push(M)}i.options._dashArray=y}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||lt(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var f=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Ct,this._redrawBounds.extend(i._pxBounds.min.subtract([f,f])),this._redrawBounds.extend(i._pxBounds.max.add([f,f]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var f=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,f.x,f.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,f=this._redrawBounds;if(this._ctx.save(),f){var y=f.getSize();this._ctx.beginPath(),this._ctx.rect(f.min.x,f.min.y,y.x,y.y),this._ctx.clip()}this._drawing=!0;for(var M=this._drawFirst;M;M=M.next)i=M.layer,(!f||i._pxBounds&&i._pxBounds.intersects(f))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,f){if(this._drawing){var y,M,O,W,at=i._parts,mt=at.length,xt=this._ctx;if(mt){for(xt.beginPath(),y=0;y<mt;y++){for(M=0,O=at[y].length;M<O;M++)W=at[y][M],xt[M?"lineTo":"moveTo"](W.x,W.y);f&&xt.closePath()}this._fillStroke(xt,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var f=i._point,y=this._ctx,M=Math.max(Math.round(i._radius),1),O=(Math.max(Math.round(i._radiusY),1)||M)/M;O!==1&&(y.save(),y.scale(1,O)),y.beginPath(),y.arc(f.x,f.y/O,M,0,Math.PI*2,!1),O!==1&&y.restore(),this._fillStroke(y,i)}},_fillStroke:function(i,f){var y=f.options;y.fill&&(i.globalAlpha=y.fillOpacity,i.fillStyle=y.fillColor||y.color,i.fill(y.fillRule||"evenodd")),y.stroke&&y.weight!==0&&(i.setLineDash&&i.setLineDash(f.options&&f.options._dashArray||[]),i.globalAlpha=y.opacity,i.lineWidth=y.weight,i.strokeStyle=y.color,i.lineCap=y.lineCap,i.lineJoin=y.lineJoin,i.stroke())},_onClick:function(i){for(var f=this._map.mouseEventToLayerPoint(i),y,M,O=this._drawFirst;O;O=O.next)y=O.layer,y.options.interactive&&y._containsPoint(f)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(y))&&(M=y);this._fireEvent(M?[M]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var f=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,f)}},_handleMouseOut:function(i){var f=this._hoveredLayer;f&&(En(this._container,"leaflet-interactive"),this._fireEvent([f],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,f){if(!this._mouseHoverThrottled){for(var y,M,O=this._drawFirst;O;O=O.next)y=O.layer,y.options.interactive&&y._containsPoint(f)&&(M=y);M!==this._hoveredLayer&&(this._handleMouseOut(i),M&&(Zt(this._container,"leaflet-interactive"),this._fireEvent([M],i,"mouseover"),this._hoveredLayer=M)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,f,y){this._map._fireDOMEvent(f,y||f.type,i)},_bringToFront:function(i){var f=i._order;if(f){var y=f.next,M=f.prev;if(y)y.prev=M;else return;M?M.next=y:y&&(this._drawFirst=y),f.prev=this._drawLast,this._drawLast.next=f,f.next=null,this._drawLast=f,this._requestRedraw(i)}},_bringToBack:function(i){var f=i._order;if(f){var y=f.next,M=f.prev;if(M)M.next=y;else return;y?y.prev=M:M&&(this._drawLast=M),f.prev=null,f.next=this._drawFirst,this._drawFirst.prev=f,this._drawFirst=f,this._requestRedraw(i)}}});function Hi(i){return Ut.canvas?new yr(i):null}var ao=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),xs={_initContainer:function(){this._container=Le("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(zr.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var f=i._container=ao("shape");Zt(f,"leaflet-vml-shape "+(this.options.className||"")),f.coordsize="1 1",i._path=ao("path"),f.appendChild(i._path),this._updateStyle(i),this._layers[g(i)]=i},_addPath:function(i){var f=i._container;this._container.appendChild(f),i.options.interactive&&i.addInteractiveTarget(f)},_removePath:function(i){var f=i._container;le(f),i.removeInteractiveTarget(f),delete this._layers[g(i)]},_updateStyle:function(i){var f=i._stroke,y=i._fill,M=i.options,O=i._container;O.stroked=!!M.stroke,O.filled=!!M.fill,M.stroke?(f||(f=i._stroke=ao("stroke")),O.appendChild(f),f.weight=M.weight+"px",f.color=M.color,f.opacity=M.opacity,M.dashArray?f.dashStyle=B(M.dashArray)?M.dashArray.join(" "):M.dashArray.replace(/( *, *)/g," "):f.dashStyle="",f.endcap=M.lineCap.replace("butt","flat"),f.joinstyle=M.lineJoin):f&&(O.removeChild(f),i._stroke=null),M.fill?(y||(y=i._fill=ao("fill")),O.appendChild(y),y.color=M.fillColor||M.color,y.opacity=M.fillOpacity):y&&(O.removeChild(y),i._fill=null)},_updateCircle:function(i){var f=i._point.round(),y=Math.round(i._radius),M=Math.round(i._radiusY||y);this._setPath(i,i._empty()?"M0 0":"AL "+f.x+","+f.y+" "+y+","+M+" 0,"+65535*360)},_setPath:function(i,f){i._path.v=f},_bringToFront:function(i){Un(i._container)},_bringToBack:function(i){Pi(i._container)}},Oi=Ut.vml?ao:Hn,vo=zr.extend({_initContainer:function(){this._container=Oi("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Oi("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){le(this._container),Pe(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){zr.prototype._update.call(this);var i=this._bounds,f=i.getSize(),y=this._container;(!this._svgSize||!this._svgSize.equals(f))&&(this._svgSize=f,y.setAttribute("width",f.x),y.setAttribute("height",f.y)),De(y,i.min),y.setAttribute("viewBox",[i.min.x,i.min.y,f.x,f.y].join(" ")),this.fire("update")}},_initPath:function(i){var f=i._path=Oi("path");i.options.className&&Zt(f,i.options.className),i.options.interactive&&Zt(f,"leaflet-interactive"),this._updateStyle(i),this._layers[g(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){le(i._path),i.removeInteractiveTarget(i._path),delete this._layers[g(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var f=i._path,y=i.options;f&&(y.stroke?(f.setAttribute("stroke",y.color),f.setAttribute("stroke-opacity",y.opacity),f.setAttribute("stroke-width",y.weight),f.setAttribute("stroke-linecap",y.lineCap),f.setAttribute("stroke-linejoin",y.lineJoin),y.dashArray?f.setAttribute("stroke-dasharray",y.dashArray):f.removeAttribute("stroke-dasharray"),y.dashOffset?f.setAttribute("stroke-dashoffset",y.dashOffset):f.removeAttribute("stroke-dashoffset")):f.setAttribute("stroke","none"),y.fill?(f.setAttribute("fill",y.fillColor||y.color),f.setAttribute("fill-opacity",y.fillOpacity),f.setAttribute("fill-rule",y.fillRule||"evenodd")):f.setAttribute("fill","none"))},_updatePoly:function(i,f){this._setPath(i,Me(i._parts,f))},_updateCircle:function(i){var f=i._point,y=Math.max(Math.round(i._radius),1),M=Math.max(Math.round(i._radiusY),1)||y,O="a"+y+","+M+" 0 1,0 ",W=i._empty()?"M0 0":"M"+(f.x-y)+","+f.y+O+y*2+",0 "+O+-y*2+",0 ";this._setPath(i,W)},_setPath:function(i,f){i._path.setAttribute("d",f)},_bringToFront:function(i){Un(i._path)},_bringToBack:function(i){Pi(i._path)}});Ut.vml&&vo.include(xs);function Qr(i){return Ut.svg||Ut.vml?new vo(i):null}Dt.include({getRenderer:function(i){var f=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return f||(f=this._renderer=this._createRenderer()),this.hasLayer(f)||this.addLayer(f),f},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var f=this._paneRenderers[i];return f===void 0&&(f=this._createRenderer({pane:i}),this._paneRenderers[i]=f),f},_createRenderer:function(i){return this.options.preferCanvas&&Hi(i)||Qr(i)}});var uo=ys.extend({initialize:function(i,f){ys.prototype.initialize.call(this,this._boundsToLatLngs(i),f)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=Ot(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function er(i,f){return new uo(i,f)}vo.create=Oi,vo.pointsToPath=Me,qi.geometryToLayer=Vs,qi.coordsToLatLng=Fo,qi.coordsToLatLngs=Ui,qi.latLngToCoords=mr,qi.latLngsToCoords=zo,qi.getFeature=cr,qi.asFeature=ji,Dt.mergeOptions({boxZoom:!0});var Wa=Yt.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){ie(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Pe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){le(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ai(),fn(),this._startPoint=this._map.mouseEventToContainerPoint(i),ie(document,{contextmenu:rt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=Le("div","leaflet-zoom-box",this._container),Zt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var f=new Ct(this._point,this._startPoint),y=f.getSize();De(this._box,f.min),this._box.style.width=y.x+"px",this._box.style.height=y.y+"px"},_finish:function(){this._moved&&(le(this._box),En(this._container,"leaflet-crosshair")),Vi(),Qn(),Pe(document,{contextmenu:rt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var f=new Rt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(f).fire("boxzoomend",{boxZoomBounds:f})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Dt.addInitHook("addHandler","boxZoom",Wa),Dt.mergeOptions({doubleClickZoom:!0});var Ka=Yt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var f=this._map,y=f.getZoom(),M=f.options.zoomDelta,O=i.originalEvent.shiftKey?y-M:y+M;f.options.doubleClickZoom==="center"?f.setZoom(O):f.setZoomAround(i.containerPoint,O)}});Dt.addInitHook("addHandler","doubleClickZoom",Ka),Dt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Zr=Yt.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new hr(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}Zt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){En(this._map._container,"leaflet-grab"),En(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var f=Ot(this._map.options.maxBounds);this._offsetLimit=st(this._map.latLngToContainerPoint(f.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(f.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var f=this._lastTime=+new Date,y=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(y),this._times.push(f),this._prunePositions(f)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),f=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=f.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,f){return i-(i-f)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),f=this._offsetLimit;i.x<f.min.x&&(i.x=this._viscousLimit(i.x,f.min.x)),i.y<f.min.y&&(i.y=this._viscousLimit(i.y,f.min.y)),i.x>f.max.x&&(i.x=this._viscousLimit(i.x,f.max.x)),i.y>f.max.y&&(i.y=this._viscousLimit(i.y,f.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,f=Math.round(i/2),y=this._initialWorldOffset,M=this._draggable._newPos.x,O=(M-f+y)%i+f-y,W=(M+f+y)%i-f-y,at=Math.abs(O+y)<Math.abs(W+y)?O:W;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=at},_onDragEnd:function(i){var f=this._map,y=f.options,M=!y.inertia||i.noInertia||this._times.length<2;if(f.fire("dragend",i),M)f.fire("moveend");else{this._prunePositions(+new Date);var O=this._lastPos.subtract(this._positions[0]),W=(this._lastTime-this._times[0])/1e3,at=y.easeLinearity,mt=O.multiplyBy(at/W),xt=mt.distanceTo([0,0]),Nt=Math.min(y.inertiaMaxSpeed,xt),ee=mt.multiplyBy(Nt/xt),ae=Nt/(y.inertiaDeceleration*at),Se=ee.multiplyBy(-ae/2).round();!Se.x&&!Se.y?f.fire("moveend"):(Se=f._limitOffset(Se,f.options.maxBounds),lt(function(){f.panBy(Se,{duration:ae,easeLinearity:at,noMoveStart:!0,animate:!0})}))}}});Dt.addInitHook("addHandler","dragging",Zr),Dt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ko=Yt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),ie(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Pe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,f=document.documentElement,y=i.scrollTop||f.scrollTop,M=i.scrollLeft||f.scrollLeft;this._map._container.focus(),window.scrollTo(M,y)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var f=this._panKeys={},y=this.keyCodes,M,O;for(M=0,O=y.left.length;M<O;M++)f[y.left[M]]=[-1*i,0];for(M=0,O=y.right.length;M<O;M++)f[y.right[M]]=[i,0];for(M=0,O=y.down.length;M<O;M++)f[y.down[M]]=[0,i];for(M=0,O=y.up.length;M<O;M++)f[y.up[M]]=[0,-1*i]},_setZoomDelta:function(i){var f=this._zoomKeys={},y=this.keyCodes,M,O;for(M=0,O=y.zoomIn.length;M<O;M++)f[y.zoomIn[M]]=i;for(M=0,O=y.zoomOut.length;M<O;M++)f[y.zoomOut[M]]=-i},_addHooks:function(){ie(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Pe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var f=i.keyCode,y=this._map,M;if(f in this._panKeys){if(!y._panAnim||!y._panAnim._inProgress)if(M=this._panKeys[f],i.shiftKey&&(M=ft(M).multiplyBy(3)),y.options.maxBounds&&(M=y._limitOffset(ft(M),y.options.maxBounds)),y.options.worldCopyJump){var O=y.wrapLatLng(y.unproject(y.project(y.getCenter()).add(M)));y.panTo(O)}else y.panBy(M)}else if(f in this._zoomKeys)y.setZoom(y.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[f]);else if(f===27&&y._popup&&y._popup.options.closeOnEscapeKey)y.closePopup();else return;rt(i)}}});Dt.addInitHook("addHandler","keyboard",ko),Dt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ca=Yt.extend({addHooks:function(){ie(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Pe(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var f=yt(i),y=this._map.options.wheelDebounceTime;this._delta+=f,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var M=Math.max(y-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),M),rt(i)},_performZoom:function(){var i=this._map,f=i.getZoom(),y=this._map.options.zoomSnap||0;i._stop();var M=this._delta/(this._map.options.wheelPxPerZoomLevel*4),O=4*Math.log(2/(1+Math.exp(-Math.abs(M))))/Math.LN2,W=y?Math.ceil(O/y)*y:O,at=i._limitZoom(f+(this._delta>0?W:-W))-f;this._delta=0,this._startTime=null,at&&(i.options.scrollWheelZoom==="center"?i.setZoom(f+at):i.setZoomAround(this._lastMousePos,f+at))}});Dt.addInitHook("addHandler","scrollWheelZoom",ca);var ws=600;Dt.mergeOptions({tapHold:Ut.touchNative&&Ut.safari&&Ut.mobile,tapTolerance:15});var To=Yt.extend({addHooks:function(){ie(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Pe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var f=i.touches[0];this._startPos=this._newPos=new Mt(f.clientX,f.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(ie(document,"touchend",it),ie(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",f))},this),ws),ie(document,"touchend touchcancel contextmenu",this._cancel,this),ie(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){Pe(document,"touchend",it),Pe(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),Pe(document,"touchend touchcancel contextmenu",this._cancel,this),Pe(document,"touchmove",this._onMove,this)},_onMove:function(i){var f=i.touches[0];this._newPos=new Mt(f.clientX,f.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,f){var y=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:f.screenX,screenY:f.screenY,clientX:f.clientX,clientY:f.clientY});y._simulated=!0,f.target.dispatchEvent(y)}});Dt.addInitHook("addHandler","tapHold",To),Dt.mergeOptions({touchZoom:Ut.touch,bounceAtZoomLimits:!0});var vr=Yt.extend({addHooks:function(){Zt(this._map._container,"leaflet-touch-zoom"),ie(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){En(this._map._container,"leaflet-touch-zoom"),Pe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var f=this._map;if(!(!i.touches||i.touches.length!==2||f._animatingZoom||this._zooming)){var y=f.mouseEventToContainerPoint(i.touches[0]),M=f.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=f.getSize()._divideBy(2),this._startLatLng=f.containerPointToLatLng(this._centerPoint),f.options.touchZoom!=="center"&&(this._pinchStartLatLng=f.containerPointToLatLng(y.add(M)._divideBy(2))),this._startDist=y.distanceTo(M),this._startZoom=f.getZoom(),this._moved=!1,this._zooming=!0,f._stop(),ie(document,"touchmove",this._onTouchMove,this),ie(document,"touchend touchcancel",this._onTouchEnd,this),it(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var f=this._map,y=f.mouseEventToContainerPoint(i.touches[0]),M=f.mouseEventToContainerPoint(i.touches[1]),O=y.distanceTo(M)/this._startDist;if(this._zoom=f.getScaleZoom(O,this._startZoom),!f.options.bounceAtZoomLimits&&(this._zoom<f.getMinZoom()&&O<1||this._zoom>f.getMaxZoom()&&O>1)&&(this._zoom=f._limitZoom(this._zoom)),f.options.touchZoom==="center"){if(this._center=this._startLatLng,O===1)return}else{var W=y._add(M)._divideBy(2)._subtract(this._centerPoint);if(O===1&&W.x===0&&W.y===0)return;this._center=f.unproject(f.project(this._pinchStartLatLng,this._zoom).subtract(W),this._zoom)}this._moved||(f._moveStart(!0,!1),this._moved=!0),gt(this._animRequest);var at=l(f._move,f,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=lt(at,this,!0),it(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,gt(this._animRequest),Pe(document,"touchmove",this._onTouchMove,this),Pe(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Dt.addInitHook("addHandler","touchZoom",vr),Dt.BoxZoom=Wa,Dt.DoubleClickZoom=Ka,Dt.Drag=Zr,Dt.Keyboard=ko,Dt.ScrollWheelZoom=ca,Dt.TapHold=To,Dt.TouchZoom=vr,r.Bounds=Ct,r.Browser=Ut,r.CRS=ce,r.Canvas=yr,r.Circle=_o,r.CircleMarker=_s,r.Class=Q,r.Control=Tn,r.DivIcon=Ii,r.DivOverlay=$r,r.DomEvent=Gt,r.DomUtil=$o,r.Draggable=hr,r.Evented=bt,r.FeatureGroup=br,r.GeoJSON=qi,r.GridLayer=yo,r.Handler=Yt,r.Icon=Dr,r.ImageOverlay=oo,r.LatLng=Qt,r.LatLngBounds=Rt,r.Layer=mo,r.LayerGroup=ms,r.LineUtil=li,r.Map=Dt,r.Marker=Ki,r.Mixin=aa,r.Path=Bo,r.Point=Mt,r.PolyUtil=ns,r.Polygon=ys,r.Polyline=Mo,r.Popup=So,r.PosAnimation=te,r.Projection=Os,r.Rectangle=uo,r.Renderer=zr,r.SVG=vo,r.SVGOverlay=Xr,r.TileLayer=Mr,r.Tooltip=_r,r.Transformation=ke,r.Util=Et,r.VideoOverlay=Er,r.bind=l,r.bounds=st,r.canvas=Hi,r.circle=io,r.circleMarker=Jr,r.control=Ie,r.divIcon=Ya,r.extend=s,r.featureGroup=rs,r.geoJSON=la,r.geoJson=vs,r.gridLayer=Go,r.icon=ro,r.imageOverlay=Co,r.latLng=Tt,r.latLngBounds=Ot,r.layerGroup=Ao,r.map=Rn,r.marker=Br,r.point=ft,r.polygon=Ys,r.polyline=hi,r.popup=Fr,r.rectangle=er,r.setOptions=G,r.stamp=g,r.svg=Qr,r.svgOverlay=Fu,r.tileLayer=ha,r.tooltip=so,r.transformation=Bt,r.version=n,r.videoOverlay=Ji;var ti=window.L;r.noConflict=function(){return window.L=ti,this},window.L=r})});var Ef=se((bf,ih)=>{(function(r,n){typeof define=="function"&&define.amd?define(["leaflet"],r):typeof bf=="object"&&(typeof n<"u"&&n.L?ih.exports=r(L):ih.exports=r(Oo())),typeof n<"u"&&n.L&&(n.L.Control.Locate=r(L))})(function(r){let n=(m,v,x)=>{x=x.split(" "),x.forEach(function(P){r.DomUtil[m].call(this,v,P)})},s=(m,v)=>n("addClass",m,v),a=(m,v)=>n("removeClass",m,v),l=r.Marker.extend({initialize(m,v){r.Util.setOptions(this,v),this._latlng=m,this.createIcon()},createIcon(){let m=this.options,v="";m.color!==void 0&&(v+=`stroke:${m.color};`),m.weight!==void 0&&(v+=`stroke-width:${m.weight};`),m.fillColor!==void 0&&(v+=`fill:${m.fillColor};`),m.fillOpacity!==void 0&&(v+=`fill-opacity:${m.fillOpacity};`),m.opacity!==void 0&&(v+=`opacity:${m.opacity};`);let x=this._getIconSVG(m,v);this._locationIcon=r.divIcon({className:x.className,html:x.svg,iconSize:[x.w,x.h]}),this.setIcon(this._locationIcon)},_getIconSVG(m,v){let x=m.radius,P=m.weight,T=x+P,N=T*2;return{className:"leaflet-control-locate-location",svg:`<svg xmlns="http://www.w3.org/2000/svg" width="${N}" height="${N}" version="1.1" viewBox="-${T} -${T} ${N} ${N}"><circle r="`+x+'" style="'+v+'" /></svg>',w:N,h:N}},setStyle(m){r.Util.setOptions(this,m),this.createIcon()}}),c=l.extend({initialize(m,v,x){r.Util.setOptions(this,x),this._latlng=m,this._heading=v,this.createIcon()},setHeading(m){this._heading=m},_getIconSVG(m,v){let x=m.radius,P=m.width+m.weight,T=(x+m.depth+m.weight)*2,N=`M0,0 l${m.width/2},${m.depth} l-${P},0 z`,G=`transform: rotate(${this._heading}deg)`;return{className:"leaflet-control-locate-heading",svg:`<svg xmlns="http://www.w3.org/2000/svg" width="${P}" height="${T}" version="1.1" viewBox="-${P/2} 0 ${P} ${T}" style="${G}"><path d="`+N+'" style="'+v+'" /></svg>',w:P,h:T}}}),g=r.Control.extend({options:{position:"topleft",layer:void 0,setView:"untilPanOrZoom",keepCurrentZoomLevel:!1,initialZoomLevel:!1,getLocationBounds(m){return m.bounds},flyTo:!1,clickBehavior:{inView:"stop",outOfView:"setView",inViewNotFollowing:"inView"},returnToPrevBounds:!1,cacheLocation:!0,drawCircle:!0,drawMarker:!0,showCompass:!0,markerClass:l,compassClass:c,circleStyle:{className:"leaflet-control-locate-circle",color:"#136AEC",fillColor:"#136AEC",fillOpacity:.15,weight:0},markerStyle:{className:"leaflet-control-locate-marker",color:"#fff",fillColor:"#2A93EE",fillOpacity:1,weight:3,opacity:1,radius:9},compassStyle:{fillColor:"#2A93EE",fillOpacity:1,weight:0,color:"#fff",opacity:1,radius:9,width:9,depth:6},followCircleStyle:{},followMarkerStyle:{},followCompassStyle:{},icon:"leaflet-control-locate-location-arrow",iconLoading:"leaflet-control-locate-spinner",iconElementTag:"span",textElementTag:"small",circlePadding:[0,0],metric:!0,createButtonCallback(m,v){let x=r.DomUtil.create("a","leaflet-bar-part leaflet-bar-part-single",m);x.title=v.strings.title,x.href="#",x.setAttribute("role","button");let P=r.DomUtil.create(v.iconElementTag,v.icon,x);if(v.strings.text!==void 0){let T=r.DomUtil.create(v.textElementTag,"leaflet-locate-text",x);T.textContent=v.strings.text,x.classList.add("leaflet-locate-text-active"),x.parentNode.style.display="flex",v.icon.length>0&&P.classList.add("leaflet-locate-icon")}return{link:x,icon:P}},onLocationError(m,v){alert(m.message)},onLocationOutsideMapBounds(m){m.stop(),alert(m.options.strings.outsideMapBoundsMsg)},showPopup:!0,strings:{title:"Show me where I am",metersUnit:"meters",feetUnit:"feet",popup:"You are within {distance} {unit} from this point",outsideMapBoundsMsg:"You seem located outside the boundaries of the map"},locateOptions:{maxZoom:1/0,watch:!0,setView:!1}},initialize(m){for(let v in m)typeof this.options[v]=="object"?r.extend(this.options[v],m[v]):this.options[v]=m[v];this.options.followMarkerStyle=r.extend({},this.options.markerStyle,this.options.followMarkerStyle),this.options.followCircleStyle=r.extend({},this.options.circleStyle,this.options.followCircleStyle),this.options.followCompassStyle=r.extend({},this.options.compassStyle,this.options.followCompassStyle)},onAdd(m){let v=r.DomUtil.create("div","leaflet-control-locate leaflet-bar leaflet-control");this._container=v,this._map=m,this._layer=this.options.layer||new r.LayerGroup,this._layer.addTo(m),this._event=void 0,this._compassHeading=null,this._prevBounds=null;let x=this.options.createButtonCallback(v,this.options);return this._link=x.link,this._icon=x.icon,r.DomEvent.on(this._link,"click",function(P){r.DomEvent.stopPropagation(P),r.DomEvent.preventDefault(P),this._onClick()},this).on(this._link,"dblclick",r.DomEvent.stopPropagation),this._resetVariables(),this._map.on("unload",this._unload,this),v},_onClick(){this._justClicked=!0;let m=this._isFollowing();if(this._userPanned=!1,this._userZoomed=!1,this._active&&!this._event)this.stop();else if(this._active){let v=this.options.clickBehavior,x=v.outOfView;switch(this._map.getBounds().contains(this._event.latlng)&&(x=m?v.inView:v.inViewNotFollowing),v[x]&&(x=v[x]),x){case"setView":this.setView();break;case"stop":this.stop(),this.options.returnToPrevBounds&&(this.options.flyTo?this._map.flyToBounds:this._map.fitBounds).bind(this._map)(this._prevBounds);break}}else this.options.returnToPrevBounds&&(this._prevBounds=this._map.getBounds()),this.start();this._updateContainerStyle()},start(){this._activate(),this._event&&(this._drawMarker(this._map),this.options.setView&&this.setView()),this._updateContainerStyle()},stop(){this._deactivate(),this._cleanClasses(),this._resetVariables(),this._removeMarker()},stopFollowing(){this._userPanned=!0,this._updateContainerStyle(),this._drawMarker()},_activate(){if(!this._active&&(this._map.locate(this.options.locateOptions),this._map.fire("locateactivate",this),this._active=!0,this._map.on("locationfound",this._onLocationFound,this),this._map.on("locationerror",this._onLocationError,this),this._map.on("dragstart",this._onDrag,this),this._map.on("zoomstart",this._onZoom,this),this._map.on("zoomend",this._onZoomEnd,this),this.options.showCompass)){let m="ondeviceorientationabsolute"in window;if(m||"ondeviceorientation"in window){let v=this,x=function(){r.DomEvent.on(window,m?"deviceorientationabsolute":"deviceorientation",v._onDeviceOrientation,v)};DeviceOrientationEvent&&typeof DeviceOrientationEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(function(P){P==="granted"&&x()}):x()}}},_deactivate(){this._map.stopLocate(),this._map.fire("locatedeactivate",this),this._active=!1,this.options.cacheLocation||(this._event=void 0),this._map.off("locationfound",this._onLocationFound,this),this._map.off("locationerror",this._onLocationError,this),this._map.off("dragstart",this._onDrag,this),this._map.off("zoomstart",this._onZoom,this),this._map.off("zoomend",this._onZoomEnd,this),this.options.showCompass&&(this._compassHeading=null,"ondeviceorientationabsolute"in window?r.DomEvent.off(window,"deviceorientationabsolute",this._onDeviceOrientation,this):"ondeviceorientation"in window&&r.DomEvent.off(window,"deviceorientation",this._onDeviceOrientation,this))},setView(){if(this._drawMarker(),this._isOutsideMapBounds())this._event=void 0,this.options.onLocationOutsideMapBounds(this);else if(this._justClicked&&this.options.initialZoomLevel!==!1){var m=this.options.flyTo?this._map.flyTo:this._map.setView;m.bind(this._map)([this._event.latitude,this._event.longitude],this.options.initialZoomLevel)}else if(this.options.keepCurrentZoomLevel){var m=this.options.flyTo?this._map.flyTo:this._map.panTo;m.bind(this._map)([this._event.latitude,this._event.longitude])}else{var m=this.options.flyTo?this._map.flyToBounds:this._map.fitBounds;this._ignoreEvent=!0,m.bind(this._map)(this.options.getLocationBounds(this._event),{padding:this.options.circlePadding,maxZoom:this.options.initialZoomLevel||this.options.locateOptions.maxZoom}),r.Util.requestAnimFrame(function(){this._ignoreEvent=!1},this)}},_drawCompass(){if(!this._event)return;let m=this._event.latlng;if(this.options.showCompass&&m&&this._compassHeading!==null){let v=this._isFollowing()?this.options.followCompassStyle:this.options.compassStyle;this._compass?(this._compass.setLatLng(m),this._compass.setHeading(this._compassHeading),this._compass.setStyle&&this._compass.setStyle(v)):this._compass=new this.options.compassClass(m,this._compassHeading,v).addTo(this._layer)}this._compass&&(!this.options.showCompass||this._compassHeading===null)&&(this._compass.removeFrom(this._layer),this._compass=null)},_drawMarker(){this._event.accuracy===void 0&&(this._event.accuracy=0);let m=this._event.accuracy,v=this._event.latlng;if(this.options.drawCircle){let G=this._isFollowing()?this.options.followCircleStyle:this.options.circleStyle;this._circle?this._circle.setLatLng(v).setRadius(m).setStyle(G):this._circle=r.circle(v,m,G).addTo(this._layer)}let x,P;if(this.options.metric?(x=m.toFixed(0),P=this.options.strings.metersUnit):(x=(m*3.2808399).toFixed(0),P=this.options.strings.feetUnit),this.options.drawMarker){let G=this._isFollowing()?this.options.followMarkerStyle:this.options.markerStyle;this._marker?(this._marker.setLatLng(v),this._marker.setStyle&&this._marker.setStyle(G)):this._marker=new this.options.markerClass(v,G).addTo(this._layer)}this._drawCompass();let T=this.options.strings.popup;function N(){return typeof T=="string"?r.Util.template(T,{distance:x,unit:P}):typeof T=="function"?T({distance:x,unit:P}):T}this.options.showPopup&&T&&this._marker&&this._marker.bindPopup(N())._popup.setLatLng(v),this.options.showPopup&&T&&this._compass&&this._compass.bindPopup(N())._popup.setLatLng(v)},_removeMarker(){this._layer.clearLayers(),this._marker=void 0,this._circle=void 0},_unload(){this.stop(),this._map.off("unload",this._unload,this)},_setCompassHeading(m){!isNaN(parseFloat(m))&&isFinite(m)?(m=Math.round(m),this._compassHeading=m,r.Util.requestAnimFrame(this._drawCompass,this)):this._compassHeading=null},_onCompassNeedsCalibration(){this._setCompassHeading()},_onDeviceOrientation(m){this._active&&(m.webkitCompassHeading?this._setCompassHeading(m.webkitCompassHeading):m.absolute&&m.alpha&&this._setCompassHeading(360-m.alpha))},_onLocationError(m){m.code==3&&this.options.locateOptions.watch||(this.stop(),this.options.onLocationError(m,this))},_onLocationFound(m){if(!(this._event&&this._event.latlng.lat===m.latlng.lat&&this._event.latlng.lng===m.latlng.lng&&this._event.accuracy===m.accuracy)&&this._active){switch(this._event=m,this._drawMarker(),this._updateContainerStyle(),this.options.setView){case"once":this._justClicked&&this.setView();break;case"untilPan":this._userPanned||this.setView();break;case"untilPanOrZoom":!this._userPanned&&!this._userZoomed&&this.setView();break;case"always":this.setView();break;case!1:break}this._justClicked=!1}},_onDrag(){this._event&&!this._ignoreEvent&&(this._userPanned=!0,this._updateContainerStyle(),this._drawMarker())},_onZoom(){this._event&&!this._ignoreEvent&&(this._userZoomed=!0,this._updateContainerStyle(),this._drawMarker())},_onZoomEnd(){this._event&&this._drawCompass(),this._event&&!this._ignoreEvent&&this._marker&&!this._map.getBounds().pad(-.3).contains(this._marker.getLatLng())&&(this._userPanned=!0,this._updateContainerStyle(),this._drawMarker())},_isFollowing(){if(!this._active)return!1;if(this.options.setView==="always")return!0;if(this.options.setView==="untilPan")return!this._userPanned;if(this.options.setView==="untilPanOrZoom")return!this._userPanned&&!this._userZoomed},_isOutsideMapBounds(){return this._event===void 0?!1:this._map.options.maxBounds&&!this._map.options.maxBounds.contains(this._event.latlng)},_updateContainerStyle(){this._container&&(this._active&&!this._event?this._setClasses("requesting"):this._isFollowing()?this._setClasses("following"):this._active?this._setClasses("active"):this._cleanClasses())},_setClasses(m){m=="requesting"?(a(this._container,"active following"),s(this._container,"requesting"),a(this._icon,this.options.icon),s(this._icon,this.options.iconLoading)):m=="active"?(a(this._container,"requesting following"),s(this._container,"active"),a(this._icon,this.options.iconLoading),s(this._icon,this.options.icon)):m=="following"&&(a(this._container,"requesting"),s(this._container,"active following"),a(this._icon,this.options.iconLoading),s(this._icon,this.options.icon))},_cleanClasses(){r.DomUtil.removeClass(this._container,"requesting"),r.DomUtil.removeClass(this._container,"active"),r.DomUtil.removeClass(this._container,"following"),a(this._icon,this.options.iconLoading),s(this._icon,this.options.icon)},_resetVariables(){this._active=!1,this._justClicked=!1,this._userPanned=!1,this._userZoomed=!1}});return r.control.locate=m=>new r.Control.Locate(m),g},window)});var Mf=se((Qx,oh)=>{(function(r){if(typeof define=="function"&&define.amd)define(["leaflet"],r);else if(typeof oh<"u")oh.exports=r(Oo());else{if(typeof window.L>"u")throw new Error("Leaflet must be loaded first");r(window.L)}})(function(r){var n="polyline-measure-control",s="polyline-measure-unicode-icon";return r.Control.PolylineMeasure=r.Control.extend({options:{position:"topleft",unit:"metres",clearMeasurementsOnStop:!0,showBearings:!1,bearingTextIn:"In",bearingTextOut:"Out",tooltipTextFinish:"Click to <b>finish line</b><br>",tooltipTextDelete:"Press SHIFT-key and click to <b>delete point</b>",tooltipTextMove:"Click and drag to <b>move point</b><br>",tooltipTextResume:"<br>Press CTRL-key and click to <b>resume line</b>",tooltipTextAdd:"Press CTRL-key and click to <b>add point</b>",measureControlTitleOn:"Turn on PolylineMeasure",measureControlTitleOff:"Turn off PolylineMeasure",measureControlLabel:"&#8614;",measureControlClasses:[],showClearControl:!1,clearControlTitle:"Clear Measurements",clearControlLabel:"&times;",clearControlClasses:[],showUnitControl:!1,distanceShowSameUnit:!1,unitControlTitle:{text:"Change Units",metres:"metres",landmiles:"land miles",nauticalmiles:"nautical miles"},unitControlLabel:{metres:"m",kilometres:"km",feet:"ft",landmiles:"mi",nauticalmiles:"nm"},tempLine:{color:"#00f",weight:2},fixedLine:{color:"#006",weight:2},startCircle:{color:"#000",weight:1,fillColor:"#0f0",fillOpacity:1,radius:3},intermedCircle:{color:"#000",weight:1,fillColor:"#ff0",fillOpacity:1,radius:3},currentCircle:{color:"#000",weight:1,fillColor:"#f0f",fillOpacity:1,radius:6},endCircle:{color:"#000",weight:1,fillColor:"#f00",fillOpacity:1,radius:3}},_arcpoints:100,_circleNr:-1,_lineNr:-1,_createControl:function(a,l,c,g,m,v){var x=document.createElement("a");return x.innerHTML=a,x.setAttribute("title",l),c.forEach(function(P){x.classList.add(P)}),r.DomEvent.on(x,"click",m,v),g.appendChild(x),x},onAdd:function(a){var l=this;a.on("movestart ",function(){l._mapdragging=!0}),this._container=document.createElement("div"),this._container.classList.add("leaflet-bar"),r.DomEvent.disableClickPropagation(this._container);var c=this.options.measureControlTitleOn,g=this.options.measureControlLabel,m=this.options.measureControlClasses;if(g.indexOf("&")!=-1&&m.push(s),this._arrPolylines=[],this._measureControl=this._createControl(g,c,m,this._container,this._toggleMeasure,this),this._defaultControlBgColor=this._measureControl.style.backgroundColor,this._measureControl.setAttribute("id",n),this.options.showClearControl){var c=this.options.clearControlTitle,g=this.options.clearControlLabel,m=this.options.clearControlClasses;g.indexOf("&")!=-1&&m.push(s),this._clearMeasureControl=this._createControl(g,c,m,this._container,this._clearAllMeasurements,this),this._clearMeasureControl.classList.add("polyline-measure-clearControl")}if(this.options.showUnitControl){if(this.options.unit=="metres")var g=this.options.unitControlLabel.metres,c=this.options.unitControlTitle.text+" ["+this.options.unitControlTitle.metres+"]";else if(this.options.unit=="landmiles")var g=this.options.unitControlLabel.landmiles,c=this.options.unitControlTitle.text+" ["+this.options.unitControlTitle.landmiles+"]";else var g=this.options.unitControlLabel.nauticalmiles,c=this.options.unitControlTitle.text+" ["+this.options.unitControlTitle.nauticalmiles+"]";var m=[];this._unitControl=this._createControl(g,c,m,this._container,this._changeUnit,this),this._unitControl.setAttribute("id","unitControlId")}return this._container},onRemove:function(){this._measuring&&this._toggleMeasure()},_saveNonpolylineEvents:function(){this._nonpolylineTargets=this._map._targets,typeof this._polylineTargets<"u"?this._map._targets=this._polylineTargets:this._map._targets={}},_savePolylineEvents:function(){this._polylineTargets=this._map._targets,this._map._targets=this._nonpolylineTargets},_toggleMeasure:function(){this._measuring=!this._measuring,this._measuring?(this._mapdragging=!1,this._saveNonpolylineEvents(),this._measureControl.classList.add("polyline-measure-controlOnBgColor"),this._measureControl.style.backgroundColor=this.options.backgroundColor,this._measureControl.title=this.options.measureControlTitleOff,this._oldCursor=this._map._container.style.cursor,this._map._container.style.cursor="crosshair",this._doubleClickZoom=this._map.doubleClickZoom.enabled(),this._map.doubleClickZoom.disable(),this._layerPaint||(this._layerPaint=r.layerGroup().addTo(this._map)),this._map.on("mousemove",this._mouseMove,this),this._map.on("click",this._mouseClick,this),r.DomEvent.on(document,"keydown",this._onKeyDown,this),this._resetPathVariables()):(this._savePolylineEvents(),this._measureControl.classList.remove("polyline-measure-controlOnBgColor"),this._measureControl.style.backgroundColor=this._defaultControlBgColor,this._measureControl.title=this.options.measureControlTitleOn,this._map._container.style.cursor=this._oldCursor,this._map.off("mousemove",this._mouseMove,this),this._map.off("click",this._mouseClick,this),this._map.off("mousemove",this._resumeFirstpointMousemove,this),this._map.off("click",this._resumeFirstpointClick,this),this._map.off("mousemove",this._dragCircleMousemove,this),this._map.off("mouseup",this._dragCircleMouseup,this),r.DomEvent.off(document,"keydown",this._onKeyDown,this),this._doubleClickZoom&&this._map.doubleClickZoom.enable(),this.options.clearMeasurementsOnStop&&this._layerPaint&&this._clearAllMeasurements(),this._cntCircle!==0&&this._finishPolylinePath()),this._map.fire("polylinemeasure:toggle",{sttus:this._measuring})},_clearAllMeasurements:function(){this._cntCircle!==void 0&&this._cntCircle!==0&&this._finishPolylinePath(),this._layerPaint&&this._layerPaint.clearLayers(),this._arrPolylines=[],this._map.fire("polylinemeasure:clear")},_changeUnit:function(){this.options.unit=="metres"?(this.options.unit="landmiles",document.getElementById("unitControlId").innerHTML=this.options.unitControlLabel.landmiles,this._unitControl.title=this.options.unitControlTitle.text+" ["+this.options.unitControlTitle.landmiles+"]"):this.options.unit=="landmiles"?(this.options.unit="nauticalmiles",document.getElementById("unitControlId").innerHTML=this.options.unitControlLabel.nauticalmiles,this._unitControl.title=this.options.unitControlTitle.text+" ["+this.options.unitControlTitle.nauticalmiles+"]"):(this.options.unit="metres",document.getElementById("unitControlId").innerHTML=this.options.unitControlLabel.metres,this._unitControl.title=this.options.unitControlTitle.text+" ["+this.options.unitControlTitle.metres+"]"),this._currentLine&&this._computeDistance(this._currentLine),this._arrPolylines.map(this._computeDistance.bind(this))},_computeDistance:function(a){var l=0;a.circleCoords.map(function(c,g){if(g>=1){var m=a.circleCoords[g-1].distanceTo(a.circleCoords[g]);l+=m,this._updateTooltip(a.tooltips[g],a.tooltips[g-1],l,m,a.circleCoords[g-1],a.circleCoords[g])}}.bind(this))},_onKeyDown:function(a){if(a.keyCode===27){if(this._resumeFirstpointFlag===!0){this._resumeFirstpointFlag=!1;var l=this._lineNr;this._map.off("mousemove",this._resumeFirstpointMousemove,this),this._map.off("click",this._resumeFirstpointClick,this),this._layerPaint.removeLayer(this._rubberlinePath2),this._layerPaint.removeLayer(this._tooltipNew),this._arrPolylines[l].circleMarkers[0].setStyle(this.options.startCircle);var c="",g=0;this.options.showBearings===!0&&(c=this.options.bearingTextIn+":---\xB0<br>"+this.options.bearingTextOut+":---\xB0"),c=c+'<div class="polyline-measure-tooltip-difference">+0</div>',c=c+'<div class="polyline-measure-tooltip-total">0</div>',this._arrPolylines[l].tooltips[0]._icon.innerHTML=c,this._arrPolylines[l].tooltips.map(function(m,v){if(v>=1){var x=this._arrPolylines[l].circleCoords[v-1].distanceTo(this._arrPolylines[l].circleCoords[v]),P=this._arrPolylines[l].circleCoords[v-1],T=this._arrPolylines[l].circleCoords[v];g+=x;var N=this._arrPolylines[l].tooltips[v-1];this._updateTooltip(m,N,g,x,P,T)}}.bind(this)),this._map.on("mousemove",this._mouseMove,this);return}this._currentLine?this._finishPolylinePath(a):this._toggleMeasure()}},_getDistance:function(a){var l=a,c;return this.options.unit==="nauticalmiles"?(c=this.options.unitControlLabel.nauticalmiles,l>=185200?l=(l/1852).toFixed(0):l>=18520?l=(l/1852).toFixed(1):l>=1852?l=(l/1852).toFixed(2):this.options.distanceShowSameUnit?l=(l/1852).toFixed(3):(l=(l/.3048).toFixed(0),c=this.options.unitControlLabel.feet)):this.options.unit==="landmiles"?(c=this.options.unitControlLabel.landmiles,l>=160934.4?l=(l/1609.344).toFixed(0):l>=16093.44?l=(l/1609.344).toFixed(1):l>=1609.344?l=(l/1609.344).toFixed(2):this.options.distanceShowSameUnit?l=(l/1609.344).toFixed(3):(l=(l/.3048).toFixed(0),c=this.options.unitControlLabel.feet)):(c=this.options.unitControlLabel.kilometres,l>=1e5?l=(l/1e3).toFixed(0):l>=1e4?l=(l/1e3).toFixed(1):l>=1e3?l=(l/1e3).toFixed(2):this.options.distanceShowSameUnit?l=(l/1e3).toFixed(3):(l=l.toFixed(0),c=this.options.unitControlLabel.metres)),{value:l,unit:c}},_polylineArc:function(a,l){function c(G){var z=Math.sin((1-G)*T)/Math.sin(T),j=Math.sin(G*T)/Math.sin(T),R=z*Math.cos(m)*Math.cos(v)+j*Math.cos(x)*Math.cos(P),B=z*Math.cos(m)*Math.sin(v)+j*Math.cos(x)*Math.sin(P),D=z*Math.sin(m)+j*Math.sin(x),A=180/Math.PI*Math.atan2(D,Math.sqrt(Math.pow(R,2)+Math.pow(B,2))),q=180/Math.PI*Math.atan2(B,R),H=q-v*180/Math.PI;function K(et){return Math[et>0?"floor":"ceil"](et)}return H<0?q=q-K((H-180)/360)*360:q=q-K((H+180)/360)*360,[A,q]}function g(G){for(var z=[],j=1/(G-1),R=0;R<G;R++){var B=j*R,D=c(B);z.push(D)}return z}var m=a.lat,v=a.lng,x=l.lat,P=l.lng;m=m*Math.PI/180,v=v*Math.PI/180,x=x*Math.PI/180,P=P*Math.PI/180;var T=2*Math.asin(Math.sqrt(Math.pow(Math.sin((m-x)/2),2)+Math.cos(m)*Math.cos(x)*Math.pow(Math.sin((v-P)/2),2))),N;return T===0?N=[[m,v]]:N=g(this._arcpoints),N},_updateTooltip:function(a,l,c,g,m,v){var x=function(D,A,q){var H=D.lat/180*Math.PI,K=A.lat/180*Math.PI,et=D.lng/180*Math.PI,X=A.lng/180*Math.PI,lt=Math.sin(X-et)*Math.cos(K),gt=Math.cos(H)*Math.sin(K)-Math.sin(H)*Math.cos(K)*Math.cos(X-et);if(q==="inbound")var Et=(Math.atan2(lt,gt)*180/Math.PI+180).toFixed(0);else var Et=(Math.atan2(lt,gt)*180/Math.PI+360).toFixed(0);return Et%360},P=x(v,m,"inbound"),T=x(m,v,"outbound"),N=this._getDistance(c),G=this._getDistance(g),z="";if(G.value>0&&(this.options.showBearings===!0&&(z=this.options.bearingTextIn+": "+P+"\xB0<br>"+this.options.bearingTextOut+":---\xB0"),z+='<div class="polyline-measure-tooltip-difference">+'+G.value+"&nbsp;"+G.unit+"</div>"),z+='<div class="polyline-measure-tooltip-total">'+N.value+"&nbsp;"+N.unit+"</div>",a._icon.innerHTML=z,this.options.showBearings===!0&&l){var j=l._icon.innerHTML,R=new RegExp(this.options.bearingTextOut+".*\xB0"),B=j.replace(R,this.options.bearingTextOut+": "+T+"\xB0");l._icon.innerHTML=B}},_drawArrow:function(a){var l=Math.round(a.length/2),c=a[l-1],g=a[l],m=g[1]-c[1],v=g[0]-c[0],x=[c[0]+v/2,c[1]+m/2],P=-Math.atan2(v,m)*57.29578,T=r.divIcon({className:"",iconSize:[16,16],iconAnchor:[8,8],html:"<div style = 'font-size: 16px; line-height: 16px; vertical-align:top; transform: rotate("+P+"deg)'>&#x27a4;</div>"}),N=r.marker(x,{icon:T,zIndexOffset:-50}).addTo(this._layerPaint);return this._currentLine||N.bindTooltip(this.options.tooltipTextAdd,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),N.on("click",this._clickedArrow,this),N},_mouseMove:function(a){var l=a.latlng;if(this._map.on("click",this._mouseClick,this),!(!l||!this._currentLine)){var c=this._currentLine.circleCoords.last();this._rubberlinePath.setLatLngs(this._polylineArc(c,l));var g=this._currentLine.tooltips.last(),m=this._currentLine.tooltips.slice(-2,-1)[0];g.setLatLng(l);var v=l.distanceTo(c);this._updateTooltip(g,m,this._currentLine.distance+v,v,c,l)}},_startLine:function(a){var l=r.divIcon({className:"polyline-measure-tooltip",iconAnchor:[-4,-4]}),c=function(){return this.slice(-1)[0]};this._rubberlinePath=r.polyline([],{color:this.options.tempLine.color,weight:this.options.tempLine.weight,interactive:!1,dashArray:"8,8"}).addTo(this._layerPaint).bringToBack();var g=this;this._currentLine={id:0,circleCoords:[],circleMarkers:[],arrowMarkers:[],tooltips:[],distance:0,polylinePath:r.polyline([],{color:this.options.fixedLine.color,weight:this.options.fixedLine.weight,interactive:!1}).addTo(this._layerPaint).bringToBack(),handleMarkers:function(x){var P=this.circleMarkers.last();P&&(P.bindTooltip(g.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),P.off("click",g._finishPolylinePath,g),this.circleMarkers.length===1?P.setStyle(g.options.startCircle):P.setStyle(g.options.intermedCircle));var T=new r.CircleMarker(x,g.options.currentCircle).addTo(g._layerPaint);T.bindTooltip(g.options.tooltipTextFinish+g.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),T.cntLine=g._currentLine.id,T.cntCircle=g._cntCircle,g._cntCircle++,T.on("mousedown",g._dragCircle,g),T.on("click",g._finishPolylinePath,g),this.circleMarkers.push(T)},getNewToolTip:function(x){return r.marker(x,{icon:l,interactive:!1})},addPoint:function(x){var P=this.circleCoords.last();if(!(P&&P.equals(x))){if(this.circleCoords.push(x),this.circleCoords.length>1){var T=g._polylineArc(P,x);this.circleCoords.length>2&&T.shift(),this.polylinePath.setLatLngs(this.polylinePath.getLatLngs().concat(T));var N=g._drawArrow(T);N.cntLine=g._currentLine.id,N.cntArrow=g._cntCircle-1,g._currentLine.arrowMarkers.push(N);var G=P.distanceTo(x);this.distance+=G;var z=g._currentLine.tooltips.last(),j=g._currentLine.tooltips.slice(-1,-2)[0];g._updateTooltip(z,j,this.distance,G,P,x)}z&&z.setLatLng(x);var R=this.getNewToolTip(x);R.addTo(g._layerPaint),this.tooltips.push(R),this.handleMarkers(x)}},finalize:function(){if(g._layerPaint.removeLayer(this.tooltips.last()),this.tooltips.pop(),g._layerPaint.removeLayer(g._rubberlinePath),this.circleCoords.length>1){this.tooltips.last()._icon.classList.add("polyline-measure-tooltip-end");var x=this.circleMarkers.last();x.setStyle(g.options.endCircle),x.unbindTooltip(),g._currentLine.circleMarkers.map(function(P){P.bindTooltip(g.options.tooltipTextMove+g.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"})}),g._currentLine.circleMarkers[0].bindTooltip(g.options.tooltipTextMove+g.options.tooltipTextDelete+g.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),x.bindTooltip(g.options.tooltipTextMove+g.options.tooltipTextDelete+g.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),g._currentLine.arrowMarkers.map(function(P){P.bindTooltip(g.options.tooltipTextAdd,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"})}),x.off("click",g._finishPolylinePath,g),x.on("click",g._resumePolylinePath,g),g._arrPolylines.push(this)}else g._layerPaint.removeLayer(this.circleMarkers.last()),g._layerPaint.removeLayer(this.tooltips.last());g._resetPathVariables()}};var m=r.marker(a,{icon:l,interactive:!1});m.addTo(this._layerPaint);var v="";this.options.showBearings===!0&&(v=this.options.bearingTextIn+":---\xB0<br>"+this.options.bearingTextOut+":---\xB0"),v=v+'<div class="polyline-measure-tooltip-difference">+0</div>',v=v+'<div class="polyline-measure-tooltip-total">0</div>',m._icon.innerHTML=v,this._currentLine.tooltips.push(m),this._currentLine.circleCoords.last=c,this._currentLine.tooltips.last=c,this._currentLine.circleMarkers.last=c,this._currentLine.id=this._arrPolylines.length},_mouseClick:function(a){!a.latlng||this._finishCircleScreencoords&&this._finishCircleScreencoords.equals(a.containerPoint)||(!this._currentLine&&!this._mapdragging&&(this._startLine(a.latlng),this._map.fire("polylinemeasure:start",this._currentLine)),this._mapdragging?this._mapdragging=!1:(this._currentLine.addPoint(a.latlng),this._map.fire("polylinemeasure:add",a),this._map.fire("polylinemeasure:change",this._currentLine)))},_finishPolylinePath:function(a){this._map.fire("polylinemeasure:finish",this._currentLine),this._currentLine.finalize(),a&&(this._finishCircleScreencoords=a.containerPoint)},_resumePolylinePath:function(a){if(a.originalEvent.ctrlKey===!0){this._currentLine=this._arrPolylines[a.target.cntLine],this._rubberlinePath=r.polyline([],{color:this.options.tempLine.color,weight:this.options.tempLine.weight,interactive:!1,dashArray:"8,8"}).addTo(this._layerPaint).bringToBack(),this._currentLine.tooltips.last()._icon.classList.remove("polyline-measure-tooltip-end");var l=this._currentLine.getNewToolTip(a.latlng);l.addTo(this._layerPaint),this._currentLine.tooltips.push(l),this._currentLine.circleMarkers.last().unbindTooltip(),this._currentLine.circleMarkers.last().bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._currentLine.circleMarkers.last().setStyle(this.options.currentCircle),this._cntCircle=this._currentLine.circleCoords.length,this._map.fire("polylinemeasure:resume",this._currentLine)}},_resetPathVariables:function(){this._cntCircle=0,this._currentLine=null},_clickedArrow:function(a){if(a.originalEvent.ctrlKey){var l=a.target.cntLine,c=a.target.cntArrow;this._arrPolylines[l].arrowMarkers[c].removeFrom(this._layerPaint);var g=new r.CircleMarker(a.latlng,this.options.intermedCircle).addTo(this._layerPaint);g.cntLine=l,g.on("mousedown",this._dragCircle,this),g.bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._arrPolylines[l].circleMarkers.splice(c+1,0,g),this._arrPolylines[l].circleMarkers.map(function(T,N){T.cntCircle=N}),this._arrPolylines[l].circleCoords.splice(c+1,0,a.latlng),lineCoords=this._arrPolylines[l].polylinePath.getLatLngs();var m=this._polylineArc(this._arrPolylines[l].circleCoords[c],a.latlng);m.pop();var v=this._polylineArc(a.latlng,this._arrPolylines[l].circleCoords[c+2]);Array.prototype.splice.apply(lineCoords,[c*(this._arcpoints-1),this._arcpoints].concat(m,v)),this._arrPolylines[l].polylinePath.setLatLngs(lineCoords);var x=this._drawArrow(m);this._arrPolylines[l].arrowMarkers[c]=x,x=this._drawArrow(v),this._arrPolylines[l].arrowMarkers.splice(c+1,0,x),this._arrPolylines[l].arrowMarkers.map(function(T,N){T.cntLine=l,T.cntArrow=N}),this._tooltipNew=r.marker(a.latlng,{icon:r.divIcon({className:"polyline-measure-tooltip",iconAnchor:[-4,-4]}),interactive:!1}),this._tooltipNew.addTo(this._layerPaint),this._arrPolylines[l].tooltips.splice(c+1,0,this._tooltipNew);var P=0;this._arrPolylines[l].tooltips.map(function(T,N){if(N>=1){var G=this._arrPolylines[l].circleCoords[N-1].distanceTo(this._arrPolylines[l].circleCoords[N]),z=this._arrPolylines[l].circleCoords[N-1],j=this._arrPolylines[l].circleCoords[N];P+=G;var R=this._arrPolylines[l].tooltips[N-1];this._updateTooltip(T,R,P,G,z,j)}}.bind(this)),this._map.fire("polylinemeasure:insert",a),this._map.fire("polylinemeasure:change",this._arrPolylines[this._lineNr])}},_dragCircleMouseup:function(){this._circleNr===0||this._circleNr===this._arrPolylines[this._lineNr].circleCoords.length-1?this._e1.target.bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete+this.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}):this._e1.target.bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._resetPathVariables(),this._map.off("mousemove",this._dragCircleMousemove,this),this._map.dragging.enable(),this._map.on("mousemove",this._mouseMove,this),this._map.off("mouseup",this._dragCircleMouseup,this),this._map.fire("polylinemeasure:move",this._e1),this._map.fire("polylinemeasure:change",this._arrPolylines[this._lineNr])},_dragCircleMousemove:function(a){var l=a.latlng.lat,c=a.latlng.lng,g=l-this._mouseStartingLat,m=c-this._mouseStartingLng,v=r.latLng(this._circleStartingLat+g,this._circleStartingLng+m),x=this._arcpoints,P=this._e1.target.cntLine;this._lineNr=P;var T=this._e1.target.cntCircle;this._circleNr=T,this._e1.target.setLatLng(v),this._e1.target.unbindTooltip(),this._arrPolylines[P].circleCoords[T]=v;var N=this._arrPolylines[P].polylinePath.getLatLngs();if(T>=1){var G=this._polylineArc(this._arrPolylines[P].circleCoords[T-1],v);Array.prototype.splice.apply(N,[(T-1)*(x-1),x].concat(G));var z=this._drawArrow(G);z.cntLine=P,z.cntArrow=T-1,this._arrPolylines[P].arrowMarkers[T-1].removeFrom(this._layerPaint),this._arrPolylines[P].arrowMarkers[T-1]=z}if(T<this._arrPolylines[P].circleCoords.length-1){var j=this._polylineArc(v,this._arrPolylines[P].circleCoords[T+1]);Array.prototype.splice.apply(N,[T*(x-1),x].concat(j)),z=this._drawArrow(j),z.cntLine=P,z.cntArrow=T,this._arrPolylines[P].arrowMarkers[T].removeFrom(this._layerPaint),this._arrPolylines[P].arrowMarkers[T]=z}this._arrPolylines[P].polylinePath.setLatLngs(N),T>=0&&this._arrPolylines[P].tooltips[T].setLatLng(v);var R=0;this._arrPolylines[P].tooltips.map(function(B,D){if(D>=1){var A=this._arrPolylines[P].circleCoords[D-1].distanceTo(this._arrPolylines[P].circleCoords[D]),q=this._arrPolylines[P].circleCoords[D-1],H=this._arrPolylines[P].circleCoords[D];R+=A,this._arrPolylines[P].distance=R;var K=this._arrPolylines[P].tooltips[D-1];this._updateTooltip(B,K,R,A,q,H)}}.bind(this)),this._map.on("mouseup",this._dragCircleMouseup,this)},_resumeFirstpointMousemove:function(a){var l=this._lineNr;this._map.on("click",this._resumeFirstpointClick,this);var c=a.latlng;this._rubberlinePath2.setLatLngs(this._polylineArc(c,currentCircleCoords)),this._tooltipNew.setLatLng(c);var g=0,m=c.distanceTo(this._arrPolylines[l].circleCoords[0]),v=c,x=this._arrPolylines[l].circleCoords[0];g+=m;var P=this._tooltipNew,T=this._arrPolylines[l].tooltips[0];this._updateTooltip(T,P,g,m,v,x),this._arrPolylines[l].tooltips.map(function(N,G){if(G>=1){var z=this._arrPolylines[l].circleCoords[G-1].distanceTo(this._arrPolylines[l].circleCoords[G]),j=this._arrPolylines[l].circleCoords[G-1],R=this._arrPolylines[l].circleCoords[G];g+=z;var B=this._arrPolylines[l].tooltips[G-1];this._updateTooltip(N,B,g,z,j,R)}}.bind(this))},_resumeFirstpointClick:function(a){var l=this._lineNr;this._resumeFirstpointFlag=!1,this._map.off("mousemove",this._resumeFirstpointMousemove,this),this._map.off("click",this._resumeFirstpointClick,this),this._layerPaint.removeLayer(this._rubberlinePath2),this._arrPolylines[l].circleMarkers[0].setStyle(this.options.intermedCircle),this._arrPolylines[l].circleMarkers[0].unbindTooltip(),this._arrPolylines[l].circleMarkers[0].bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"});var c=new r.CircleMarker(a.latlng,this.options.startCircle).addTo(this._layerPaint);c.cntLine=l,c.cntCircle=0,c.on("mousedown",this._dragCircle,this),c.bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete+this.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._arrPolylines[l].circleMarkers.unshift(c),this._arrPolylines[l].circleMarkers.map(function(v,x){v.cntCircle=x}),this._arrPolylines[l].circleCoords.unshift(a.latlng);var g=this._polylineArc(a.latlng,currentCircleCoords),m=this._drawArrow(g);this._arrPolylines[l].arrowMarkers.unshift(m),this._arrPolylines[l].arrowMarkers.map(function(v,x){v.cntLine=l,v.cntArrow=x}),g.pop(),this._arrPolylines[l].polylinePath.setLatLngs(g.concat(this._arrPolylines[l].polylinePath.getLatLngs())),this._arrPolylines[l].tooltips.unshift(this._tooltipNew),this._map.on("mousemove",this._mouseMove,this)},_dragCircle:function(a){var l=this._arcpoints;if(a.originalEvent.ctrlKey){if(this._map.off("click",this._mouseClick,this),a.target.cntCircle===0){this._resumeFirstpointFlag=!0,this._lineNr=a.target.cntLine;var c=this._lineNr;this._circleNr=a.target.cntCircle,currentCircleCoords=a.latlng,this._arrPolylines[c].circleMarkers[0].setStyle(this.options.currentCircle),this._rubberlinePath2=r.polyline([],{color:this.options.tempLine.color,weight:this.options.tempLine.weight,interactive:!1,dashArray:"8,8"}).addTo(this._layerPaint).bringToBack(),this._tooltipNew=r.marker(currentCircleCoords,{icon:r.divIcon({className:"polyline-measure-tooltip",iconAnchor:[-4,-4]}),interactive:!1}),this._tooltipNew.addTo(this._layerPaint);var g="";this.options.showBearings===!0&&(g=g+this.options.bearingTextIn+":---\xB0<br>"+this.options.bearingTextOut+":---\xB0"),g=g+'<div class="polyline-measure-tooltip-difference">+0</div>',g=g+'<div class="polyline-measure-tooltip-total">0</div>',this._tooltipNew._icon.innerHTML=g,this._map.off("mousemove",this._mouseMove,this),this._map.on("mousemove",this._resumeFirstpointMousemove,this)}return}if(a.originalEvent.shiftKey){this._lineNr=a.target.cntLine;var c=this._lineNr;this._circleNr=a.target.cntCircle;var m=this._circleNr;if(this._arrPolylines[c]){if(this._arrPolylines[c].circleMarkers.length===2){this._layerPaint.removeLayer(this._arrPolylines[c].circleMarkers[1]),this._layerPaint.removeLayer(this._arrPolylines[c].tooltips[1]),this._layerPaint.removeLayer(this._arrPolylines[c].circleMarkers[0]),this._layerPaint.removeLayer(this._arrPolylines[c].tooltips[0]),this._layerPaint.removeLayer(this._arrPolylines[c].arrowMarkers[0]),this._layerPaint.removeLayer(this._arrPolylines[c].polylinePath),this._map.fire("polylinemeasure:remove",a),this._map.fire("polylinemeasure:change",this._arrPolylines[this._lineNr]);return}this._arrPolylines[c].circleCoords.splice(m,1),this._arrPolylines[c].circleMarkers[m].removeFrom(this._layerPaint),this._arrPolylines[c].circleMarkers.splice(m,1),this._arrPolylines[c].circleMarkers.map(function(G,z){G.cntCircle=z});var v=this._arrPolylines[c].polylinePath.getLatLngs();if(this._arrPolylines[c].tooltips[m].removeFrom(this._layerPaint),this._arrPolylines[c].tooltips.splice(m,1),!this._arrPolylines[c].circleMarkers.length){this._arrPolylines.splice(c,1),this._arrPolylines.forEach(function(G,z){G.circleMarkers.map(function(j){j.cntLine=z}),G.arrowMarkers.map(function(j){j.cntLine=z})});return}if(m===0){this._arrPolylines[c].circleMarkers[0].setStyle(this.options.startCircle),v.splice(0,l-1),this._arrPolylines[c].circleMarkers[0].bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete+this.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._arrPolylines[c].arrowMarkers[m].removeFrom(this._layerPaint),this._arrPolylines[c].arrowMarkers.splice(0,1);var g="";this.options.showBearings===!0&&(g=this.options.bearingTextIn+":---\xB0<br>"+this.options.bearingTextOut+":---\xB0"),g=g+'<div class="polyline-measure-tooltip-difference">+0</div>',g=g+'<div class="polyline-measure-tooltip-total">0</div>',this._arrPolylines[c].tooltips[0]._icon.innerHTML=g}else if(m===this._arrPolylines[c].circleCoords.length)this._arrPolylines[c].circleMarkers[m-1].on("click",this._resumePolylinePath,this),this._arrPolylines[c].circleMarkers[m-1].bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete+this.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._arrPolylines[c].circleMarkers.slice(-1)[0].setStyle(this.options.endCircle),this._arrPolylines[c].tooltips.slice(-1)[0]._icon.classList.add("polyline-measure-tooltip-end"),v.splice(-(l-1),l-1),this._arrPolylines[c].arrowMarkers[m-1].removeFrom(this._layerPaint),this._arrPolylines[c].arrowMarkers.splice(-1,1);else{newLineSegment=this._polylineArc(this._arrPolylines[c].circleCoords[m-1],this._arrPolylines[c].circleCoords[m]),Array.prototype.splice.apply(v,[(m-1)*(l-1),2*l-1].concat(newLineSegment)),this._arrPolylines[c].arrowMarkers[m-1].removeFrom(this._layerPaint),this._arrPolylines[c].arrowMarkers[m].removeFrom(this._layerPaint);var x=this._drawArrow(newLineSegment);this._arrPolylines[c].arrowMarkers.splice(m-1,2,x)}this._arrPolylines[c].polylinePath.setLatLngs(v),this._arrPolylines[c].arrowMarkers.map(function(G,z){G.cntLine=c,G.cntArrow=z});var P=0;this._arrPolylines[c].tooltips.map(function(G,z){if(z>=1){var j=this._arrPolylines[c].circleCoords[z-1].distanceTo(this._arrPolylines[c].circleCoords[z]),R=this._arrPolylines[c].circleCoords[z-1],B=this._arrPolylines[c].circleCoords[z];P+=j,this._arrPolylines[c].distance=P;var D=this._arrPolylines[c].tooltips[z-1];this._updateTooltip(G,D,P,j,R,B)}}.bind(this))}else{if(this._cntCircle--,this._currentLine.circleMarkers.length===1){this._currentLine.finalize();return}if(this._currentLine.circleCoords.splice(m,1),this._currentLine.circleMarkers[m].removeFrom(this._layerPaint),this._currentLine.circleMarkers.splice(m,1),this._currentLine.circleMarkers.map(function(G,z){G.cntCircle=z}),v=this._currentLine.polylinePath.getLatLngs(),this._currentLine.tooltips[m].removeFrom(this._layerPaint),this._currentLine.tooltips.splice(m,1),m===0){this._currentLine.circleMarkers.length===1?this._currentLine.circleMarkers[0].setStyle(this.options.currentCircle):this._currentLine.circleMarkers[0].setStyle(this.options.startCircle),v.splice(0,l-1),this._currentLine.circleMarkers[0].bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete+this.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._currentLine.arrowMarkers[m].removeFrom(this._layerPaint),this._currentLine.arrowMarkers.splice(0,1);var g="";this.options.showBearings===!0&&(g=this.options.bearingTextIn+":---\xB0<br>"+this.options.bearingTextOut+":---\xB0"),g=g+'<div class="polyline-measure-tooltip-difference">+0</div>',g=g+'<div class="polyline-measure-tooltip-total">0</div>',this._currentLine.tooltips[0]._icon.innerHTML=g}else m===this._currentLine.circleCoords.length?(this._currentLine.circleMarkers[m-1].on("click",this._resumePolylinePath,this),this._currentLine.circleMarkers[m-1].bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete+this.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._currentLine.circleMarkers.slice(-1)[0].setStyle(this.options.currentCircle),this._currentLine.tooltips.slice(-1)[0]._icon.classList.add("polyline-measure-tooltip-end"),v.splice(-(l-1),l-1),this._currentLine.arrowMarkers[m-1].removeFrom(this._layerPaint),this._currentLine.arrowMarkers.splice(-1,1)):(newLineSegment=this._polylineArc(this._currentLine.circleCoords[m-1],this._currentLine.circleCoords[m]),Array.prototype.splice.apply(v,[(m-1)*(l-1),2*l-1].concat(newLineSegment)),this._currentLine.arrowMarkers[m-1].removeFrom(this._layerPaint),this._currentLine.arrowMarkers[m].removeFrom(this._layerPaint),x=this._drawArrow(newLineSegment),this._currentLine.arrowMarkers.splice(m-1,2,x));this._currentLine.polylinePath.setLatLngs(v),this._currentLine.arrowMarkers.map(function(G,z){G.cntLine=c,G.cntArrow=z});var T=0;this._currentLine.tooltips.map(function(G,z,j){if(z>=1){var R,B,D=this._currentLine.tooltips[z-1],A=this._currentLine.circleCoords[z-1];z===j.length-1?(R=this._currentLine.circleCoords[z-1].distanceTo(a.latlng),B=a.latlng,this._updateTooltip(G,D,T+R,R,A,B)):(R=this._currentLine.circleCoords[z-1].distanceTo(this._currentLine.circleCoords[z]),B=this._currentLine.circleCoords[z],T+=R,this._updateTooltip(G,D,T,R,A,B))}}.bind(this)),this._currentLine.distance=T}this._map.fire("polylinemeasure:remove",a),this._map.fire("polylinemeasure:change",this._arrPolylines[this._lineNr]);return}this._e1=a,this._measuring&&this._cntCircle===0&&(this._map.dragging.disable(),this._map.off("mousemove",this._mouseMove,this),this._map.off("click",this._mouseClick,this),this._mouseStartingLat=a.latlng.lat,this._mouseStartingLng=a.latlng.lng,this._circleStartingLat=a.target._latlng.lat,this._circleStartingLng=a.target._latlng.lng,this._map.on("mousemove",this._dragCircleMousemove,this))},seed:function(a){a.forEach(l=>{this._toggleMeasure(),this._startLine(l[0]),l.forEach((c,g)=>{let m=r.latLng(c);this._mouseMove({latLng:m}),this._currentLine.addPoint(m),g===l.length-1&&(this._finishPolylinePath(),this._toggleMeasure())})})}}),r.Map.mergeOptions({PolylineMeasureControl:!1}),r.Map.addInitHook(function(){this.options.polylineMeasureControl&&(this.PMControl=new r.Control.PolylineMeasure,this.addControl(this.PMControl))}),r.control.polylineMeasure=function(a){return new r.Control.PolylineMeasure(a)},r.Control.PolylineMeasure})});var Hu=se((bw,Gf)=>{"use strict";var zf=Object.getOwnPropertySymbols,m_=Object.prototype.hasOwnProperty,__=Object.prototype.propertyIsEnumerable;function y_(r){if(r==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}function v_(){try{if(!Object.assign)return!1;var r=new String("abc");if(r[5]="de",Object.getOwnPropertyNames(r)[0]==="5")return!1;for(var n={},s=0;s<10;s++)n["_"+String.fromCharCode(s)]=s;var a=Object.getOwnPropertyNames(n).map(function(c){return n[c]});if(a.join("")!=="0123456789")return!1;var l={};return"abcdefghijklmnopqrst".split("").forEach(function(c){l[c]=c}),Object.keys(Object.assign({},l)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}Gf.exports=v_()?Object.assign:function(r,n){for(var s,a=y_(r),l,c=1;c<arguments.length;c++){s=Object(arguments[c]);for(var g in s)m_.call(s,g)&&(a[g]=s[g]);if(zf){l=zf(s);for(var m=0;m<l.length;m++)__.call(s,l[m])&&(a[l[m]]=s[l[m]])}}return a}});var mh=se((dh,gh)=>{(function(r,n){typeof dh=="object"&&typeof gh<"u"?gh.exports=n():typeof define=="function"&&define.amd?define(n):(r=r||self).RBush=n()})(dh,function(){"use strict";function r(R,B,D,A,q){(function H(K,et,X,lt,gt){for(;lt>X;){if(lt-X>600){var Et=lt-X+1,Q=et-X+1,kt=Math.log(Et),ct=.5*Math.exp(2*kt/3),bt=.5*Math.sqrt(kt*ct*(Et-ct)/Et)*(Q-Et/2<0?-1:1),Mt=Math.max(X,Math.floor(et-Q*ct/Et+bt)),Xt=Math.min(lt,Math.floor(et+(Et-Q)*ct/Et+bt));H(K,et,Mt,Xt,gt)}var ft=K[et],Ct=X,st=lt;for(n(K,X,et),gt(K[lt],ft)>0&&n(K,X,lt);Ct<st;){for(n(K,Ct,st),Ct++,st--;gt(K[Ct],ft)<0;)Ct++;for(;gt(K[st],ft)>0;)st--}gt(K[X],ft)===0?n(K,X,st):n(K,++st,lt),st<=et&&(X=st+1),et<=st&&(lt=st-1)}})(R,B,D||0,A||R.length-1,q||s)}function n(R,B,D){var A=R[B];R[B]=R[D],R[D]=A}function s(R,B){return R<B?-1:R>B?1:0}var a=function(R){R===void 0&&(R=9),this._maxEntries=Math.max(4,R),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function l(R,B,D){if(!D)return B.indexOf(R);for(var A=0;A<B.length;A++)if(D(R,B[A]))return A;return-1}function c(R,B){g(R,0,R.children.length,B,R)}function g(R,B,D,A,q){q||(q=z(null)),q.minX=1/0,q.minY=1/0,q.maxX=-1/0,q.maxY=-1/0;for(var H=B;H<D;H++){var K=R.children[H];m(q,R.leaf?A(K):K)}return q}function m(R,B){return R.minX=Math.min(R.minX,B.minX),R.minY=Math.min(R.minY,B.minY),R.maxX=Math.max(R.maxX,B.maxX),R.maxY=Math.max(R.maxY,B.maxY),R}function v(R,B){return R.minX-B.minX}function x(R,B){return R.minY-B.minY}function P(R){return(R.maxX-R.minX)*(R.maxY-R.minY)}function T(R){return R.maxX-R.minX+(R.maxY-R.minY)}function N(R,B){return R.minX<=B.minX&&R.minY<=B.minY&&B.maxX<=R.maxX&&B.maxY<=R.maxY}function G(R,B){return B.minX<=R.maxX&&B.minY<=R.maxY&&B.maxX>=R.minX&&B.maxY>=R.minY}function z(R){return{children:R,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function j(R,B,D,A,q){for(var H=[B,D];H.length;)if(!((D=H.pop())-(B=H.pop())<=A)){var K=B+Math.ceil((D-B)/A/2)*A;r(R,K,B,D,q),H.push(B,K,K,D)}}return a.prototype.all=function(){return this._all(this.data,[])},a.prototype.search=function(R){var B=this.data,D=[];if(!G(R,B))return D;for(var A=this.toBBox,q=[];B;){for(var H=0;H<B.children.length;H++){var K=B.children[H],et=B.leaf?A(K):K;G(R,et)&&(B.leaf?D.push(K):N(R,et)?this._all(K,D):q.push(K))}B=q.pop()}return D},a.prototype.collides=function(R){var B=this.data;if(!G(R,B))return!1;for(var D=[];B;){for(var A=0;A<B.children.length;A++){var q=B.children[A],H=B.leaf?this.toBBox(q):q;if(G(R,H)){if(B.leaf||N(R,H))return!0;D.push(q)}}B=D.pop()}return!1},a.prototype.load=function(R){if(!R||!R.length)return this;if(R.length<this._minEntries){for(var B=0;B<R.length;B++)this.insert(R[B]);return this}var D=this._build(R.slice(),0,R.length-1,0);if(this.data.children.length)if(this.data.height===D.height)this._splitRoot(this.data,D);else{if(this.data.height<D.height){var A=this.data;this.data=D,D=A}this._insert(D,this.data.height-D.height-1,!0)}else this.data=D;return this},a.prototype.insert=function(R){return R&&this._insert(R,this.data.height-1),this},a.prototype.clear=function(){return this.data=z([]),this},a.prototype.remove=function(R,B){if(!R)return this;for(var D,A,q,H=this.data,K=this.toBBox(R),et=[],X=[];H||et.length;){if(H||(H=et.pop(),A=et[et.length-1],D=X.pop(),q=!0),H.leaf){var lt=l(R,H.children,B);if(lt!==-1)return H.children.splice(lt,1),et.push(H),this._condense(et),this}q||H.leaf||!N(H,K)?A?(D++,H=A.children[D],q=!1):H=null:(et.push(H),X.push(D),D=0,A=H,H=H.children[0])}return this},a.prototype.toBBox=function(R){return R},a.prototype.compareMinX=function(R,B){return R.minX-B.minX},a.prototype.compareMinY=function(R,B){return R.minY-B.minY},a.prototype.toJSON=function(){return this.data},a.prototype.fromJSON=function(R){return this.data=R,this},a.prototype._all=function(R,B){for(var D=[];R;)R.leaf?B.push.apply(B,R.children):D.push.apply(D,R.children),R=D.pop();return B},a.prototype._build=function(R,B,D,A){var q,H=D-B+1,K=this._maxEntries;if(H<=K)return c(q=z(R.slice(B,D+1)),this.toBBox),q;A||(A=Math.ceil(Math.log(H)/Math.log(K)),K=Math.ceil(H/Math.pow(K,A-1))),(q=z([])).leaf=!1,q.height=A;var et=Math.ceil(H/K),X=et*Math.ceil(Math.sqrt(K));j(R,B,D,X,this.compareMinX);for(var lt=B;lt<=D;lt+=X){var gt=Math.min(lt+X-1,D);j(R,lt,gt,et,this.compareMinY);for(var Et=lt;Et<=gt;Et+=et){var Q=Math.min(Et+et-1,gt);q.children.push(this._build(R,Et,Q,A-1))}}return c(q,this.toBBox),q},a.prototype._chooseSubtree=function(R,B,D,A){for(;A.push(B),!B.leaf&&A.length-1!==D;){for(var q=1/0,H=1/0,K=void 0,et=0;et<B.children.length;et++){var X=B.children[et],lt=P(X),gt=(Et=R,Q=X,(Math.max(Q.maxX,Et.maxX)-Math.min(Q.minX,Et.minX))*(Math.max(Q.maxY,Et.maxY)-Math.min(Q.minY,Et.minY))-lt);gt<H?(H=gt,q=lt<q?lt:q,K=X):gt===H&&lt<q&&(q=lt,K=X)}B=K||B.children[0]}var Et,Q;return B},a.prototype._insert=function(R,B,D){var A=D?R:this.toBBox(R),q=[],H=this._chooseSubtree(A,this.data,B,q);for(H.children.push(R),m(H,A);B>=0&&q[B].children.length>this._maxEntries;)this._split(q,B),B--;this._adjustParentBBoxes(A,q,B)},a.prototype._split=function(R,B){var D=R[B],A=D.children.length,q=this._minEntries;this._chooseSplitAxis(D,q,A);var H=this._chooseSplitIndex(D,q,A),K=z(D.children.splice(H,D.children.length-H));K.height=D.height,K.leaf=D.leaf,c(D,this.toBBox),c(K,this.toBBox),B?R[B-1].children.push(K):this._splitRoot(D,K)},a.prototype._splitRoot=function(R,B){this.data=z([R,B]),this.data.height=R.height+1,this.data.leaf=!1,c(this.data,this.toBBox)},a.prototype._chooseSplitIndex=function(R,B,D){for(var A,q,H,K,et,X,lt,gt=1/0,Et=1/0,Q=B;Q<=D-B;Q++){var kt=g(R,0,Q,this.toBBox),ct=g(R,Q,D,this.toBBox),bt=(q=kt,H=ct,K=void 0,et=void 0,X=void 0,lt=void 0,K=Math.max(q.minX,H.minX),et=Math.max(q.minY,H.minY),X=Math.min(q.maxX,H.maxX),lt=Math.min(q.maxY,H.maxY),Math.max(0,X-K)*Math.max(0,lt-et)),Mt=P(kt)+P(ct);bt<gt?(gt=bt,A=Q,Et=Mt<Et?Mt:Et):bt===gt&&Mt<Et&&(Et=Mt,A=Q)}return A||D-B},a.prototype._chooseSplitAxis=function(R,B,D){var A=R.leaf?this.compareMinX:v,q=R.leaf?this.compareMinY:x;this._allDistMargin(R,B,D,A)<this._allDistMargin(R,B,D,q)&&R.children.sort(A)},a.prototype._allDistMargin=function(R,B,D,A){R.children.sort(A);for(var q=this.toBBox,H=g(R,0,B,q),K=g(R,D-B,D,q),et=T(H)+T(K),X=B;X<D-B;X++){var lt=R.children[X];m(H,R.leaf?q(lt):lt),et+=T(H)}for(var gt=D-B-1;gt>=B;gt--){var Et=R.children[gt];m(K,R.leaf?q(Et):Et),et+=T(K)}return et},a.prototype._adjustParentBBoxes=function(R,B,D){for(var A=D;A>=0;A--)m(B[A],R)},a.prototype._condense=function(R){for(var B=R.length-1,D=void 0;B>=0;B--)R[B].children.length===0?B>0?(D=R[B-1].children).splice(D.indexOf(R[B]),1):this.clear():c(R[B],this.toBBox)},a})});var qf=se((_h,yh)=>{(function(r,n){typeof _h=="object"&&typeof yh<"u"?yh.exports=n():typeof define=="function"&&define.amd?define(n):(r=r||self,r.TinyQueue=n())})(_h,function(){"use strict";var r=function(a,l){if(a===void 0&&(a=[]),l===void 0&&(l=n),this.data=a,this.length=this.data.length,this.compare=l,this.length>0)for(var c=(this.length>>1)-1;c>=0;c--)this._down(c)};r.prototype.push=function(a){this.data.push(a),this.length++,this._up(this.length-1)},r.prototype.pop=function(){if(this.length!==0){var a=this.data[0],l=this.data.pop();return this.length--,this.length>0&&(this.data[0]=l,this._down(0)),a}},r.prototype.peek=function(){return this.data[0]},r.prototype._up=function(a){for(var l=this,c=l.data,g=l.compare,m=c[a];a>0;){var v=a-1>>1,x=c[v];if(g(m,x)>=0)break;c[a]=x,a=v}c[a]=m},r.prototype._down=function(a){for(var l=this,c=l.data,g=l.compare,m=this.length>>1,v=c[a];a<m;){var x=(a<<1)+1,P=c[x],T=x+1;if(T<this.length&&g(c[T],P)<0&&(x=T,P=c[T]),g(P,v)>=0)break;c[a]=P,a=x}c[a]=v};function n(s,a){return s<a?-1:s>a?1:0}return r})});var jf=se((kw,Uf)=>{Uf.exports=function(n,s,a,l){var c=n[0],g=n[1],m=!1;a===void 0&&(a=0),l===void 0&&(l=s.length);for(var v=(l-a)/2,x=0,P=v-1;x<v;P=x++){var T=s[a+x*2+0],N=s[a+x*2+1],G=s[a+P*2+0],z=s[a+P*2+1],j=N>g!=z>g&&c<(G-T)*(g-N)/(z-N)+T;j&&(m=!m)}return m}});var Xf=se((Tw,Hf)=>{Hf.exports=function(n,s,a,l){var c=n[0],g=n[1],m=!1;a===void 0&&(a=0),l===void 0&&(l=s.length);for(var v=l-a,x=0,P=v-1;x<v;P=x++){var T=s[x+a][0],N=s[x+a][1],G=s[P+a][0],z=s[P+a][1],j=N>g!=z>g&&c<(G-T)*(g-N)/(z-N)+T;j&&(m=!m)}return m}});var Vf=se((Iw,Yu)=>{var Zf=jf(),Yf=Xf();Yu.exports=function(n,s,a,l){return s.length>0&&Array.isArray(s[0])?Yf(n,s,a,l):Zf(n,s,a,l)};Yu.exports.nested=Yf;Yu.exports.flat=Zf});var Kf=se((Vu,Wf)=>{(function(r,n){typeof Vu=="object"&&typeof Wf<"u"?n(Vu):typeof define=="function"&&define.amd?define(["exports"],n):n((r=r||self).predicates={})})(Vu,function(r){"use strict";let s=33306690738754706e-32;function a(G,z,j,R,B){let D,A,q,H,K=z[0],et=R[0],X=0,lt=0;et>K==et>-K?(D=K,K=z[++X]):(D=et,et=R[++lt]);let gt=0;if(X<G&&lt<j)for(et>K==et>-K?(q=D-((A=K+D)-K),K=z[++X]):(q=D-((A=et+D)-et),et=R[++lt]),D=A,q!==0&&(B[gt++]=q);X<G&&lt<j;)et>K==et>-K?(q=D-((A=D+K)-(H=A-D))+(K-H),K=z[++X]):(q=D-((A=D+et)-(H=A-D))+(et-H),et=R[++lt]),D=A,q!==0&&(B[gt++]=q);for(;X<G;)q=D-((A=D+K)-(H=A-D))+(K-H),K=z[++X],D=A,q!==0&&(B[gt++]=q);for(;lt<j;)q=D-((A=D+et)-(H=A-D))+(et-H),et=R[++lt],D=A,q!==0&&(B[gt++]=q);return D===0&&gt!==0||(B[gt++]=D),gt}function l(G){return new Float64Array(G)}let c=33306690738754716e-32,g=22204460492503146e-32,m=11093356479670487e-47,v=l(4),x=l(8),P=l(12),T=l(16),N=l(4);r.orient2d=function(G,z,j,R,B,D){let A=(z-D)*(j-B),q=(G-B)*(R-D),H=A-q;if(A===0||q===0||A>0!=q>0)return H;let K=Math.abs(A+q);return Math.abs(H)>=c*K?H:-function(et,X,lt,gt,Et,Q,kt){let ct,bt,Mt,Xt,ft,Ct,st,Rt,Ot,Qt,Tt,ce,Re,Cn,fe,ke,Bt,hn,Sn=et-Et,Hn=lt-Et,Me=X-Q,ue=gt-Q;ft=(fe=(Rt=Sn-(st=(Ct=134217729*Sn)-(Ct-Sn)))*(Qt=ue-(Ot=(Ct=134217729*ue)-(Ct-ue)))-((Cn=Sn*ue)-st*Ot-Rt*Ot-st*Qt))-(Tt=fe-(Bt=(Rt=Me-(st=(Ct=134217729*Me)-(Ct-Me)))*(Qt=Hn-(Ot=(Ct=134217729*Hn)-(Ct-Hn)))-((ke=Me*Hn)-st*Ot-Rt*Ot-st*Qt))),v[0]=fe-(Tt+ft)+(ft-Bt),ft=(Re=Cn-((ce=Cn+Tt)-(ft=ce-Cn))+(Tt-ft))-(Tt=Re-ke),v[1]=Re-(Tt+ft)+(ft-ke),ft=(hn=ce+Tt)-ce,v[2]=ce-(hn-ft)+(Tt-ft),v[3]=hn;let Ht=function(k,F){let Z=F[0];for(let J=1;J<k;J++)Z+=F[J];return Z}(4,v),ht=g*kt;if(Ht>=ht||-Ht>=ht||(ct=et-(Sn+(ft=et-Sn))+(ft-Et),Mt=lt-(Hn+(ft=lt-Hn))+(ft-Et),bt=X-(Me+(ft=X-Me))+(ft-Q),Xt=gt-(ue+(ft=gt-ue))+(ft-Q),ct===0&&bt===0&&Mt===0&&Xt===0)||(ht=m*kt+s*Math.abs(Ht),(Ht+=Sn*Xt+ue*ct-(Me*Mt+Hn*bt))>=ht||-Ht>=ht))return Ht;ft=(fe=(Rt=ct-(st=(Ct=134217729*ct)-(Ct-ct)))*(Qt=ue-(Ot=(Ct=134217729*ue)-(Ct-ue)))-((Cn=ct*ue)-st*Ot-Rt*Ot-st*Qt))-(Tt=fe-(Bt=(Rt=bt-(st=(Ct=134217729*bt)-(Ct-bt)))*(Qt=Hn-(Ot=(Ct=134217729*Hn)-(Ct-Hn)))-((ke=bt*Hn)-st*Ot-Rt*Ot-st*Qt))),N[0]=fe-(Tt+ft)+(ft-Bt),ft=(Re=Cn-((ce=Cn+Tt)-(ft=ce-Cn))+(Tt-ft))-(Tt=Re-ke),N[1]=Re-(Tt+ft)+(ft-ke),ft=(hn=ce+Tt)-ce,N[2]=ce-(hn-ft)+(Tt-ft),N[3]=hn;let Y=a(4,v,4,N,x);ft=(fe=(Rt=Sn-(st=(Ct=134217729*Sn)-(Ct-Sn)))*(Qt=Xt-(Ot=(Ct=134217729*Xt)-(Ct-Xt)))-((Cn=Sn*Xt)-st*Ot-Rt*Ot-st*Qt))-(Tt=fe-(Bt=(Rt=Me-(st=(Ct=134217729*Me)-(Ct-Me)))*(Qt=Mt-(Ot=(Ct=134217729*Mt)-(Ct-Mt)))-((ke=Me*Mt)-st*Ot-Rt*Ot-st*Qt))),N[0]=fe-(Tt+ft)+(ft-Bt),ft=(Re=Cn-((ce=Cn+Tt)-(ft=ce-Cn))+(Tt-ft))-(Tt=Re-ke),N[1]=Re-(Tt+ft)+(ft-ke),ft=(hn=ce+Tt)-ce,N[2]=ce-(hn-ft)+(Tt-ft),N[3]=hn;let C=a(Y,x,4,N,P);ft=(fe=(Rt=ct-(st=(Ct=134217729*ct)-(Ct-ct)))*(Qt=Xt-(Ot=(Ct=134217729*Xt)-(Ct-Xt)))-((Cn=ct*Xt)-st*Ot-Rt*Ot-st*Qt))-(Tt=fe-(Bt=(Rt=bt-(st=(Ct=134217729*bt)-(Ct-bt)))*(Qt=Mt-(Ot=(Ct=134217729*Mt)-(Ct-Mt)))-((ke=bt*Mt)-st*Ot-Rt*Ot-st*Qt))),N[0]=fe-(Tt+ft)+(ft-Bt),ft=(Re=Cn-((ce=Cn+Tt)-(ft=ce-Cn))+(Tt-ft))-(Tt=Re-ke),N[1]=Re-(Tt+ft)+(ft-ke),ft=(hn=ce+Tt)-ce,N[2]=ce-(hn-ft)+(Tt-ft),N[3]=hn;let b=a(C,P,4,N,T);return T[b-1]}(G,z,j,R,B,D,K)},r.orient2dfast=function(G,z,j,R,B,D){return(z-D)*(j-B)-(G-B)*(R-D)},Object.defineProperty(r,"__esModule",{value:!0})})});var np=se((Ow,Lh)=>{"use strict";var Jf=mh(),Ku=qf(),w_=Vf(),L_=Kf().orient2d;Ku.default&&(Ku=Ku.default);Lh.exports=ep;Lh.exports.default=ep;function ep(r,n,s){n=Math.max(0,n===void 0?2:n),s=s||0;var a=C_(r),l=new Jf(16);l.toBBox=function(D){return{minX:D[0],minY:D[1],maxX:D[0],maxY:D[1]}},l.compareMinX=function(D,A){return D[0]-A[0]},l.compareMinY=function(D,A){return D[1]-A[1]},l.load(r);for(var c=[],g=0,m;g<a.length;g++){var v=a[g];l.remove(v),m=tp(v,m),c.push(m)}var x=new Jf(16);for(g=0;g<c.length;g++)x.insert(vh(c[g]));for(var P=n*n,T=s*s;c.length;){var N=c.shift(),G=N.p,z=N.next.p,j=xh(G,z);if(!(j<T)){var R=j/P;v=b_(l,N.prev.p,G,z,N.next.next.p,R,x),v&&Math.min(xh(v,G),xh(v,z))<=R&&(c.push(N),c.push(tp(v,N)),l.remove(v),x.remove(N),x.insert(vh(N)),x.insert(vh(N.next)))}}N=m;var B=[];do B.push(N.p),N=N.next;while(N!==m);return B.push(N.p),B}function b_(r,n,s,a,l,c,g){for(var m=new Ku([],E_),v=r.data;v;){for(var x=0;x<v.children.length;x++){var P=v.children[x],T=v.leaf?wh(P,s,a):M_(s,a,P);T>c||m.push({node:P,dist:T})}for(;m.length&&!m.peek().node.children;){var N=m.pop(),G=N.node,z=wh(G,n,s),j=wh(G,a,l);if(N.dist<z&&N.dist<j&&Qf(s,G,g)&&Qf(a,G,g))return G}v=m.pop(),v&&(v=v.node)}return null}function E_(r,n){return r.dist-n.dist}function M_(r,n,s){if($f(r,s)||$f(n,s))return 0;var a=Wu(r[0],r[1],n[0],n[1],s.minX,s.minY,s.maxX,s.minY);if(a===0)return 0;var l=Wu(r[0],r[1],n[0],n[1],s.minX,s.minY,s.minX,s.maxY);if(l===0)return 0;var c=Wu(r[0],r[1],n[0],n[1],s.maxX,s.minY,s.maxX,s.maxY);if(c===0)return 0;var g=Wu(r[0],r[1],n[0],n[1],s.minX,s.maxY,s.maxX,s.maxY);return g===0?0:Math.min(a,l,c,g)}function $f(r,n){return r[0]>=n.minX&&r[0]<=n.maxX&&r[1]>=n.minY&&r[1]<=n.maxY}function Qf(r,n,s){for(var a=Math.min(r[0],n[0]),l=Math.min(r[1],n[1]),c=Math.max(r[0],n[0]),g=Math.max(r[1],n[1]),m=s.search({minX:a,minY:l,maxX:c,maxY:g}),v=0;v<m.length;v++)if(P_(m[v].p,m[v].next.p,r,n))return!1;return!0}function ma(r,n,s){return L_(r[0],r[1],n[0],n[1],s[0],s[1])}function P_(r,n,s,a){return r!==a&&n!==s&&ma(r,n,s)>0!=ma(r,n,a)>0&&ma(s,a,r)>0!=ma(s,a,n)>0}function vh(r){var n=r.p,s=r.next.p;return r.minX=Math.min(n[0],s[0]),r.minY=Math.min(n[1],s[1]),r.maxX=Math.max(n[0],s[0]),r.maxY=Math.max(n[1],s[1]),r}function C_(r){for(var n=r[0],s=r[0],a=r[0],l=r[0],c=0;c<r.length;c++){var g=r[c];g[0]<n[0]&&(n=g),g[0]>a[0]&&(a=g),g[1]<s[1]&&(s=g),g[1]>l[1]&&(l=g)}var m=[n,s,a,l],v=m.slice();for(c=0;c<r.length;c++)w_(r[c],m)||v.push(r[c]);return k_(v)}function tp(r,n){var s={p:r,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return n?(s.next=n.next,s.prev=n,n.next.prev=s,n.next=s):(s.prev=s,s.next=s),s}function xh(r,n){var s=r[0]-n[0],a=r[1]-n[1];return s*s+a*a}function wh(r,n,s){var a=n[0],l=n[1],c=s[0]-a,g=s[1]-l;if(c!==0||g!==0){var m=((r[0]-a)*c+(r[1]-l)*g)/(c*c+g*g);m>1?(a=s[0],l=s[1]):m>0&&(a+=c*m,l+=g*m)}return c=r[0]-a,g=r[1]-l,c*c+g*g}function Wu(r,n,s,a,l,c,g,m){var v=s-r,x=a-n,P=g-l,T=m-c,N=r-l,G=n-c,z=v*v+x*x,j=v*P+x*T,R=P*P+T*T,B=v*N+x*G,D=P*N+T*G,A=z*R-j*j,q,H,K,et,X=A,lt=A;A===0?(H=0,X=1,et=D,lt=R):(H=j*D-R*B,et=z*D-j*B,H<0?(H=0,et=D,lt=R):H>X&&(H=X,et=D+j,lt=R)),et<0?(et=0,-B<0?H=0:-B>z?H=X:(H=-B,X=z)):et>lt&&(et=lt,-B+j<0?H=0:-B+j>z?H=X:(H=-B+j,X=z)),q=H===0?0:H/X,K=et===0?0:et/lt;var gt=(1-q)*r+q*s,Et=(1-q)*n+q*a,Q=(1-K)*l+K*g,kt=(1-K)*c+K*m,ct=Q-gt,bt=kt-Et;return ct*ct+bt*bt}function S_(r,n){return r[0]===n[0]?r[1]-n[1]:r[0]-n[0]}function k_(r){r.sort(S_);for(var n=[],s=0;s<r.length;s++){for(;n.length>=2&&ma(n[n.length-2],n[n.length-1],r[s])<=0;)n.pop();n.push(r[s])}for(var a=[],l=r.length-1;l>=0;l--){for(;a.length>=2&&ma(a[a.length-2],a[a.length-1],r[l])<=0;)a.pop();a.push(r[l])}return a.pop(),n.pop(),n.concat(a)}});var ap=se((Eh,Mh)=>{(function(r,n){typeof Eh=="object"&&typeof Mh<"u"?Mh.exports=n():typeof define=="function"&&define.amd?define(n):r.quickselect=n()})(Eh,function(){"use strict";function r(l,c,g,m,v){n(l,c,g||0,m||l.length-1,v||a)}function n(l,c,g,m,v){for(;m>g;){if(m-g>600){var x=m-g+1,P=c-g+1,T=Math.log(x),N=.5*Math.exp(2*T/3),G=.5*Math.sqrt(T*N*(x-N)/x)*(P-x/2<0?-1:1),z=Math.max(g,Math.floor(c-P*N/x+G)),j=Math.min(m,Math.floor(c+(x-P)*N/x+G));n(l,c,z,j,v)}var R=l[c],B=g,D=m;for(s(l,g,c),v(l[m],R)>0&&s(l,g,m);B<D;){for(s(l,B,D),B++,D--;v(l[B],R)<0;)B++;for(;v(l[D],R)>0;)D--}v(l[g],R)===0?s(l,g,D):(D++,s(l,D,m)),D<=c&&(g=D+1),c<=D&&(m=D-1)}}function s(l,c,g){var m=l[c];l[c]=l[g],l[g]=m}function a(l,c){return l<c?-1:l>c?1:0}return r})});var cp=se((iE,Sh)=>{"use strict";Sh.exports=nu;Sh.exports.default=nu;var j_=ap();function nu(r,n){if(!(this instanceof nu))return new nu(r,n);this._maxEntries=Math.max(4,r||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),n&&this._initFormat(n),this.clear()}nu.prototype={all:function(){return this._all(this.data,[])},search:function(r){var n=this.data,s=[],a=this.toBBox;if(!$u(r,n))return s;for(var l=[],c,g,m,v;n;){for(c=0,g=n.children.length;c<g;c++)m=n.children[c],v=n.leaf?a(m):m,$u(r,v)&&(n.leaf?s.push(m):Ch(r,v)?this._all(m,s):l.push(m));n=l.pop()}return s},collides:function(r){var n=this.data,s=this.toBBox;if(!$u(r,n))return!1;for(var a=[],l,c,g,m;n;){for(l=0,c=n.children.length;l<c;l++)if(g=n.children[l],m=n.leaf?s(g):g,$u(r,m)){if(n.leaf||Ch(r,m))return!0;a.push(g)}n=a.pop()}return!1},load:function(r){if(!(r&&r.length))return this;if(r.length<this._minEntries){for(var n=0,s=r.length;n<s;n++)this.insert(r[n]);return this}var a=this._build(r.slice(),0,r.length-1,0);if(!this.data.children.length)this.data=a;else if(this.data.height===a.height)this._splitRoot(this.data,a);else{if(this.data.height<a.height){var l=this.data;this.data=a,a=l}this._insert(a,this.data.height-a.height-1,!0)}return this},insert:function(r){return r&&this._insert(r,this.data.height-1),this},clear:function(){return this.data=ya([]),this},remove:function(r,n){if(!r)return this;for(var s=this.data,a=this.toBBox(r),l=[],c=[],g,m,v,x;s||l.length;){if(s||(s=l.pop(),m=l[l.length-1],g=c.pop(),x=!0),s.leaf&&(v=H_(r,s.children,n),v!==-1))return s.children.splice(v,1),l.push(s),this._condense(l),this;!x&&!s.leaf&&Ch(s,a)?(l.push(s),c.push(g),g=0,m=s,s=s.children[0]):m?(g++,s=m.children[g],x=!1):s=null}return this},toBBox:function(r){return r},compareMinX:up,compareMinY:lp,toJSON:function(){return this.data},fromJSON:function(r){return this.data=r,this},_all:function(r,n){for(var s=[];r;)r.leaf?n.push.apply(n,r.children):s.push.apply(s,r.children),r=s.pop();return n},_build:function(r,n,s,a){var l=s-n+1,c=this._maxEntries,g;if(l<=c)return g=ya(r.slice(n,s+1)),_a(g,this.toBBox),g;a||(a=Math.ceil(Math.log(l)/Math.log(c)),c=Math.ceil(l/Math.pow(c,a-1))),g=ya([]),g.leaf=!1,g.height=a;var m=Math.ceil(l/c),v=m*Math.ceil(Math.sqrt(c)),x,P,T,N;for(hp(r,n,s,v,this.compareMinX),x=n;x<=s;x+=v)for(T=Math.min(x+v-1,s),hp(r,x,T,m,this.compareMinY),P=x;P<=T;P+=m)N=Math.min(P+m-1,T),g.children.push(this._build(r,P,N,a-1));return _a(g,this.toBBox),g},_chooseSubtree:function(r,n,s,a){for(var l,c,g,m,v,x,P,T;a.push(n),!(n.leaf||a.length-1===s);){for(P=T=1/0,l=0,c=n.children.length;l<c;l++)g=n.children[l],v=Ph(g),x=X_(r,g)-v,x<T?(T=x,P=v<P?v:P,m=g):x===T&&v<P&&(P=v,m=g);n=m||n.children[0]}return n},_insert:function(r,n,s){var a=this.toBBox,l=s?r:a(r),c=[],g=this._chooseSubtree(l,this.data,n,c);for(g.children.push(r),eu(g,l);n>=0&&c[n].children.length>this._maxEntries;)this._split(c,n),n--;this._adjustParentBBoxes(l,c,n)},_split:function(r,n){var s=r[n],a=s.children.length,l=this._minEntries;this._chooseSplitAxis(s,l,a);var c=this._chooseSplitIndex(s,l,a),g=ya(s.children.splice(c,s.children.length-c));g.height=s.height,g.leaf=s.leaf,_a(s,this.toBBox),_a(g,this.toBBox),n?r[n-1].children.push(g):this._splitRoot(s,g)},_splitRoot:function(r,n){this.data=ya([r,n]),this.data.height=r.height+1,this.data.leaf=!1,_a(this.data,this.toBBox)},_chooseSplitIndex:function(r,n,s){var a,l,c,g,m,v,x,P;for(v=x=1/0,a=n;a<=s-n;a++)l=tu(r,0,a,this.toBBox),c=tu(r,a,s,this.toBBox),g=Z_(l,c),m=Ph(l)+Ph(c),g<v?(v=g,P=a,x=m<x?m:x):g===v&&m<x&&(x=m,P=a);return P},_chooseSplitAxis:function(r,n,s){var a=r.leaf?this.compareMinX:up,l=r.leaf?this.compareMinY:lp,c=this._allDistMargin(r,n,s,a),g=this._allDistMargin(r,n,s,l);c<g&&r.children.sort(a)},_allDistMargin:function(r,n,s,a){r.children.sort(a);var l=this.toBBox,c=tu(r,0,n,l),g=tu(r,s-n,s,l),m=Ju(c)+Ju(g),v,x;for(v=n;v<s-n;v++)x=r.children[v],eu(c,r.leaf?l(x):x),m+=Ju(c);for(v=s-n-1;v>=n;v--)x=r.children[v],eu(g,r.leaf?l(x):x),m+=Ju(g);return m},_adjustParentBBoxes:function(r,n,s){for(var a=s;a>=0;a--)eu(n[a],r)},_condense:function(r){for(var n=r.length-1,s;n>=0;n--)r[n].children.length===0?n>0?(s=r[n-1].children,s.splice(s.indexOf(r[n]),1)):this.clear():_a(r[n],this.toBBox)},_initFormat:function(r){var n=["return a"," - b",";"];this.compareMinX=new Function("a","b",n.join(r[0])),this.compareMinY=new Function("a","b",n.join(r[1])),this.toBBox=new Function("a","return {minX: a"+r[0]+", minY: a"+r[1]+", maxX: a"+r[2]+", maxY: a"+r[3]+"};")}};function H_(r,n,s){if(!s)return n.indexOf(r);for(var a=0;a<n.length;a++)if(s(r,n[a]))return a;return-1}function _a(r,n){tu(r,0,r.children.length,n,r)}function tu(r,n,s,a,l){l||(l=ya(null)),l.minX=1/0,l.minY=1/0,l.maxX=-1/0,l.maxY=-1/0;for(var c=n,g;c<s;c++)g=r.children[c],eu(l,r.leaf?a(g):g);return l}function eu(r,n){return r.minX=Math.min(r.minX,n.minX),r.minY=Math.min(r.minY,n.minY),r.maxX=Math.max(r.maxX,n.maxX),r.maxY=Math.max(r.maxY,n.maxY),r}function up(r,n){return r.minX-n.minX}function lp(r,n){return r.minY-n.minY}function Ph(r){return(r.maxX-r.minX)*(r.maxY-r.minY)}function Ju(r){return r.maxX-r.minX+(r.maxY-r.minY)}function X_(r,n){return(Math.max(n.maxX,r.maxX)-Math.min(n.minX,r.minX))*(Math.max(n.maxY,r.maxY)-Math.min(n.minY,r.minY))}function Z_(r,n){var s=Math.max(r.minX,n.minX),a=Math.max(r.minY,n.minY),l=Math.min(r.maxX,n.maxX),c=Math.min(r.maxY,n.maxY);return Math.max(0,l-s)*Math.max(0,c-a)}function Ch(r,n){return r.minX<=n.minX&&r.minY<=n.minY&&n.maxX<=r.maxX&&n.maxY<=r.maxY}function $u(r,n){return n.minX<=r.maxX&&n.minY<=r.maxY&&n.maxX>=r.minX&&n.maxY>=r.minY}function ya(r){return{children:r,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function hp(r,n,s,a,l){for(var c=[n,s],g;c.length;)s=c.pop(),n=c.pop(),!(s-n<=a)&&(g=n+Math.ceil((s-n)/a/2)*a,j_(r,g,n,s,l),c.push(n,g,g,s))}});var mp=se((_M,Nh)=>{"use strict";Nh.exports=nl;Nh.exports.default=nl;function nl(r,n,s){s=s||2;var a=n&&n.length,l=a?n[0]*s:r.length,c=pp(r,0,l,s,!0),g=[];if(!c||c.next===c.prev)return g;var m,v,x,P,T,N,G;if(a&&(c=iy(r,n,c,s)),r.length>80*s){m=x=r[0],v=P=r[1];for(var z=s;z<l;z+=s)T=r[z],N=r[z+1],T<m&&(m=T),N<v&&(v=N),T>x&&(x=T),N>P&&(P=N);G=Math.max(x-m,P-v),G=G!==0?32767/G:0}return ou(c,g,s,m,v,G,0),g}function pp(r,n,s,a,l){var c,g;if(l===Oh(r,n,s,a)>0)for(c=n;c<s;c+=a)g=fp(c,r[c],r[c+1],g);else for(c=s-a;c>=n;c-=a)g=fp(c,r[c],r[c+1],g);return g&&rl(g,g.next)&&(au(g),g=g.next),g}function Js(r,n){if(!r)return r;n||(n=r);var s=r,a;do if(a=!1,!s.steiner&&(rl(s,s.next)||kr(s.prev,s,s.next)===0)){if(au(s),s=n=s.prev,s===s.next)break;a=!0}else s=s.next;while(a||s!==n);return n}function ou(r,n,s,a,l,c,g){if(r){!g&&c&&ly(r,a,l,c);for(var m=r,v,x;r.prev!==r.next;){if(v=r.prev,x=r.next,c?ey(r,a,l,c):ty(r)){n.push(v.i/s|0),n.push(r.i/s|0),n.push(x.i/s|0),au(r),r=x.next,m=x.next;continue}if(r=x,r===m){g?g===1?(r=ny(Js(r),n,s),ou(r,n,s,a,l,c,2)):g===2&&ry(r,n,s,a,l,c):ou(Js(r),n,s,a,l,c,1);break}}}}function ty(r){var n=r.prev,s=r,a=r.next;if(kr(n,s,a)>=0)return!1;for(var l=n.x,c=s.x,g=a.x,m=n.y,v=s.y,x=a.y,P=l<c?l<g?l:g:c<g?c:g,T=m<v?m<x?m:x:v<x?v:x,N=l>c?l>g?l:g:c>g?c:g,G=m>v?m>x?m:x:v>x?v:x,z=a.next;z!==n;){if(z.x>=P&&z.x<=N&&z.y>=T&&z.y<=G&&xa(l,m,c,v,g,x,z.x,z.y)&&kr(z.prev,z,z.next)>=0)return!1;z=z.next}return!0}function ey(r,n,s,a){var l=r.prev,c=r,g=r.next;if(kr(l,c,g)>=0)return!1;for(var m=l.x,v=c.x,x=g.x,P=l.y,T=c.y,N=g.y,G=m<v?m<x?m:x:v<x?v:x,z=P<T?P<N?P:N:T<N?T:N,j=m>v?m>x?m:x:v>x?v:x,R=P>T?P>N?P:N:T>N?T:N,B=Th(G,z,n,s,a),D=Th(j,R,n,s,a),A=r.prevZ,q=r.nextZ;A&&A.z>=B&&q&&q.z<=D;){if(A.x>=G&&A.x<=j&&A.y>=z&&A.y<=R&&A!==l&&A!==g&&xa(m,P,v,T,x,N,A.x,A.y)&&kr(A.prev,A,A.next)>=0||(A=A.prevZ,q.x>=G&&q.x<=j&&q.y>=z&&q.y<=R&&q!==l&&q!==g&&xa(m,P,v,T,x,N,q.x,q.y)&&kr(q.prev,q,q.next)>=0))return!1;q=q.nextZ}for(;A&&A.z>=B;){if(A.x>=G&&A.x<=j&&A.y>=z&&A.y<=R&&A!==l&&A!==g&&xa(m,P,v,T,x,N,A.x,A.y)&&kr(A.prev,A,A.next)>=0)return!1;A=A.prevZ}for(;q&&q.z<=D;){if(q.x>=G&&q.x<=j&&q.y>=z&&q.y<=R&&q!==l&&q!==g&&xa(m,P,v,T,x,N,q.x,q.y)&&kr(q.prev,q,q.next)>=0)return!1;q=q.nextZ}return!0}function ny(r,n,s){var a=r;do{var l=a.prev,c=a.next.next;!rl(l,c)&&dp(l,a,a.next,c)&&su(l,c)&&su(c,l)&&(n.push(l.i/s|0),n.push(a.i/s|0),n.push(c.i/s|0),au(a),au(a.next),a=r=c),a=a.next}while(a!==r);return Js(a)}function ry(r,n,s,a,l,c){var g=r;do{for(var m=g.next.next;m!==g.prev;){if(g.i!==m.i&&fy(g,m)){var v=gp(g,m);g=Js(g,g.next),v=Js(v,v.next),ou(g,n,s,a,l,c,0),ou(v,n,s,a,l,c,0);return}m=m.next}g=g.next}while(g!==r)}function iy(r,n,s,a){var l=[],c,g,m,v,x;for(c=0,g=n.length;c<g;c++)m=n[c]*a,v=c<g-1?n[c+1]*a:r.length,x=pp(r,m,v,a,!1),x===x.next&&(x.steiner=!0),l.push(cy(x));for(l.sort(oy),c=0;c<l.length;c++)s=sy(l[c],s);return s}function oy(r,n){return r.x-n.x}function sy(r,n){var s=ay(r,n);if(!s)return n;var a=gp(s,r);return Js(a,a.next),Js(s,s.next)}function ay(r,n){var s=n,a=r.x,l=r.y,c=-1/0,g;do{if(l<=s.y&&l>=s.next.y&&s.next.y!==s.y){var m=s.x+(l-s.y)*(s.next.x-s.x)/(s.next.y-s.y);if(m<=a&&m>c&&(c=m,g=s.x<s.next.x?s:s.next,m===a))return g}s=s.next}while(s!==n);if(!g)return null;var v=g,x=g.x,P=g.y,T=1/0,N;s=g;do a>=s.x&&s.x>=x&&a!==s.x&&xa(l<P?a:c,l,x,P,l<P?c:a,l,s.x,s.y)&&(N=Math.abs(l-s.y)/(a-s.x),su(s,r)&&(N<T||N===T&&(s.x>g.x||s.x===g.x&&uy(g,s)))&&(g=s,T=N)),s=s.next;while(s!==v);return g}function uy(r,n){return kr(r.prev,r,n.prev)<0&&kr(n.next,r,r.next)<0}function ly(r,n,s,a){var l=r;do l.z===0&&(l.z=Th(l.x,l.y,n,s,a)),l.prevZ=l.prev,l.nextZ=l.next,l=l.next;while(l!==r);l.prevZ.nextZ=null,l.prevZ=null,hy(l)}function hy(r){var n,s,a,l,c,g,m,v,x=1;do{for(s=r,r=null,c=null,g=0;s;){for(g++,a=s,m=0,n=0;n<x&&(m++,a=a.nextZ,!!a);n++);for(v=x;m>0||v>0&&a;)m!==0&&(v===0||!a||s.z<=a.z)?(l=s,s=s.nextZ,m--):(l=a,a=a.nextZ,v--),c?c.nextZ=l:r=l,l.prevZ=c,c=l;s=a}c.nextZ=null,x*=2}while(g>1);return r}function Th(r,n,s,a,l){return r=(r-s)*l|0,n=(n-a)*l|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,r|n<<1}function cy(r){var n=r,s=r;do(n.x<s.x||n.x===s.x&&n.y<s.y)&&(s=n),n=n.next;while(n!==r);return s}function xa(r,n,s,a,l,c,g,m){return(l-g)*(n-m)>=(r-g)*(c-m)&&(r-g)*(a-m)>=(s-g)*(n-m)&&(s-g)*(c-m)>=(l-g)*(a-m)}function fy(r,n){return r.next.i!==n.i&&r.prev.i!==n.i&&!py(r,n)&&(su(r,n)&&su(n,r)&&dy(r,n)&&(kr(r.prev,r,n.prev)||kr(r,n.prev,n))||rl(r,n)&&kr(r.prev,r,r.next)>0&&kr(n.prev,n,n.next)>0)}function kr(r,n,s){return(n.y-r.y)*(s.x-n.x)-(n.x-r.x)*(s.y-n.y)}function rl(r,n){return r.x===n.x&&r.y===n.y}function dp(r,n,s,a){var l=el(kr(r,n,s)),c=el(kr(r,n,a)),g=el(kr(s,a,r)),m=el(kr(s,a,n));return!!(l!==c&&g!==m||l===0&&tl(r,s,n)||c===0&&tl(r,a,n)||g===0&&tl(s,r,a)||m===0&&tl(s,n,a))}function tl(r,n,s){return n.x<=Math.max(r.x,s.x)&&n.x>=Math.min(r.x,s.x)&&n.y<=Math.max(r.y,s.y)&&n.y>=Math.min(r.y,s.y)}function el(r){return r>0?1:r<0?-1:0}function py(r,n){var s=r;do{if(s.i!==r.i&&s.next.i!==r.i&&s.i!==n.i&&s.next.i!==n.i&&dp(s,s.next,r,n))return!0;s=s.next}while(s!==r);return!1}function su(r,n){return kr(r.prev,r,r.next)<0?kr(r,n,r.next)>=0&&kr(r,r.prev,n)>=0:kr(r,n,r.prev)<0||kr(r,r.next,n)<0}function dy(r,n){var s=r,a=!1,l=(r.x+n.x)/2,c=(r.y+n.y)/2;do s.y>c!=s.next.y>c&&s.next.y!==s.y&&l<(s.next.x-s.x)*(c-s.y)/(s.next.y-s.y)+s.x&&(a=!a),s=s.next;while(s!==r);return a}function gp(r,n){var s=new Ih(r.i,r.x,r.y),a=new Ih(n.i,n.x,n.y),l=r.next,c=n.prev;return r.next=n,n.prev=r,s.next=l,l.prev=s,a.next=s,s.prev=a,c.next=a,a.prev=c,a}function fp(r,n,s,a){var l=new Ih(r,n,s);return a?(l.next=a.next,l.prev=a,a.next.prev=l,a.next=l):(l.prev=l,l.next=l),l}function au(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function Ih(r,n,s){this.i=r,this.x=n,this.y=s,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}nl.deviation=function(r,n,s,a){var l=n&&n.length,c=l?n[0]*s:r.length,g=Math.abs(Oh(r,0,c,s));if(l)for(var m=0,v=n.length;m<v;m++){var x=n[m]*s,P=m<v-1?n[m+1]*s:r.length;g-=Math.abs(Oh(r,x,P,s))}var T=0;for(m=0;m<a.length;m+=3){var N=a[m]*s,G=a[m+1]*s,z=a[m+2]*s;T+=Math.abs((r[N]-r[z])*(r[G+1]-r[N+1])-(r[N]-r[G])*(r[z+1]-r[N+1]))}return g===0&&T===0?0:Math.abs((T-g)/g)};function Oh(r,n,s,a){for(var l=0,c=n,g=s-a;c<s;c+=a)l+=(r[g]-r[c])*(r[c+1]+r[g+1]),g=c;return l}nl.flatten=function(r){for(var n=r[0][0].length,s={vertices:[],holes:[],dimensions:n},a=0,l=0;l<r.length;l++){for(var c=0;c<r[l].length;c++)for(var g=0;g<n;g++)s.vertices.push(r[l][c][g]);l>0&&(a+=r[l-1].length,s.holes.push(a))}return s}});var Fh=se(me=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0});me.earthRadius=63710088e-1;me.factors={centimeters:me.earthRadius*100,centimetres:me.earthRadius*100,degrees:me.earthRadius/111325,feet:me.earthRadius*3.28084,inches:me.earthRadius*39.37,kilometers:me.earthRadius/1e3,kilometres:me.earthRadius/1e3,meters:me.earthRadius,metres:me.earthRadius,miles:me.earthRadius/1609.344,millimeters:me.earthRadius*1e3,millimetres:me.earthRadius*1e3,nauticalmiles:me.earthRadius/1852,radians:1,yards:me.earthRadius*1.0936};me.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/me.earthRadius,yards:1.0936133};me.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function zs(r,n,s){s===void 0&&(s={});var a={type:"Feature"};return(s.id===0||s.id)&&(a.id=s.id),s.bbox&&(a.bbox=s.bbox),a.properties=n||{},a.geometry=r,a}me.feature=zs;function xy(r,n,s){switch(s===void 0&&(s={}),r){case"Point":return Rh(n).geometry;case"LineString":return Dh(n).geometry;case"Polygon":return Ah(n).geometry;case"MultiPoint":return yp(n).geometry;case"MultiLineString":return _p(n).geometry;case"MultiPolygon":return vp(n).geometry;default:throw new Error(r+" is invalid")}}me.geometry=xy;function Rh(r,n,s){if(s===void 0&&(s={}),!r)throw new Error("coordinates is required");if(!Array.isArray(r))throw new Error("coordinates must be an Array");if(r.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!il(r[0])||!il(r[1]))throw new Error("coordinates must contain numbers");var a={type:"Point",coordinates:r};return zs(a,n,s)}me.point=Rh;function wy(r,n,s){return s===void 0&&(s={}),ol(r.map(function(a){return Rh(a,n)}),s)}me.points=wy;function Ah(r,n,s){s===void 0&&(s={});for(var a=0,l=r;a<l.length;a++){var c=l[a];if(c.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var g=0;g<c[c.length-1].length;g++)if(c[c.length-1][g]!==c[0][g])throw new Error("First and last Position are not equivalent.")}var m={type:"Polygon",coordinates:r};return zs(m,n,s)}me.polygon=Ah;function Ly(r,n,s){return s===void 0&&(s={}),ol(r.map(function(a){return Ah(a,n)}),s)}me.polygons=Ly;function Dh(r,n,s){if(s===void 0&&(s={}),r.length<2)throw new Error("coordinates must be an array of two or more positions");var a={type:"LineString",coordinates:r};return zs(a,n,s)}me.lineString=Dh;function by(r,n,s){return s===void 0&&(s={}),ol(r.map(function(a){return Dh(a,n)}),s)}me.lineStrings=by;function ol(r,n){n===void 0&&(n={});var s={type:"FeatureCollection"};return n.id&&(s.id=n.id),n.bbox&&(s.bbox=n.bbox),s.features=r,s}me.featureCollection=ol;function _p(r,n,s){s===void 0&&(s={});var a={type:"MultiLineString",coordinates:r};return zs(a,n,s)}me.multiLineString=_p;function yp(r,n,s){s===void 0&&(s={});var a={type:"MultiPoint",coordinates:r};return zs(a,n,s)}me.multiPoint=yp;function vp(r,n,s){s===void 0&&(s={});var a={type:"MultiPolygon",coordinates:r};return zs(a,n,s)}me.multiPolygon=vp;function Ey(r,n,s){s===void 0&&(s={});var a={type:"GeometryCollection",geometries:r};return zs(a,n,s)}me.geometryCollection=Ey;function My(r,n){if(n===void 0&&(n=0),n&&!(n>=0))throw new Error("precision must be a positive number");var s=Math.pow(10,n||0);return Math.round(r*s)/s}me.round=My;function xp(r,n){n===void 0&&(n="kilometers");var s=me.factors[n];if(!s)throw new Error(n+" units is invalid");return r*s}me.radiansToLength=xp;function Bh(r,n){n===void 0&&(n="kilometers");var s=me.factors[n];if(!s)throw new Error(n+" units is invalid");return r/s}me.lengthToRadians=Bh;function Py(r,n){return wp(Bh(r,n))}me.lengthToDegrees=Py;function Cy(r){var n=r%360;return n<0&&(n+=360),n}me.bearingToAzimuth=Cy;function wp(r){var n=r%(2*Math.PI);return n*180/Math.PI}me.radiansToDegrees=wp;function Sy(r){var n=r%360;return n*Math.PI/180}me.degreesToRadians=Sy;function ky(r,n,s){if(n===void 0&&(n="kilometers"),s===void 0&&(s="kilometers"),!(r>=0))throw new Error("length must be a positive number");return xp(Bh(r,n),s)}me.convertLength=ky;function Ty(r,n,s){if(n===void 0&&(n="meters"),s===void 0&&(s="kilometers"),!(r>=0))throw new Error("area must be a positive number");var a=me.areaFactors[n];if(!a)throw new Error("invalid original units");var l=me.areaFactors[s];if(!l)throw new Error("invalid final units");return r/a*l}me.convertArea=Ty;function il(r){return!isNaN(r)&&r!==null&&!Array.isArray(r)}me.isNumber=il;function Iy(r){return!!r&&r.constructor===Object}me.isObject=Iy;function Oy(r){if(!r)throw new Error("bbox is required");if(!Array.isArray(r))throw new Error("bbox must be an Array");if(r.length!==4&&r.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");r.forEach(function(n){if(!il(n))throw new Error("bbox must only contain numbers")})}me.validateBBox=Oy;function Ny(r){if(!r)throw new Error("id is required");if(["string","number"].indexOf(typeof r)===-1)throw new Error("id must be a number or a string")}me.validateId=Ny});var Gh=se(pi=>{"use strict";Object.defineProperty(pi,"__esModule",{value:!0});var Yi=Fh();function uu(r,n,s){if(r!==null)for(var a,l,c,g,m,v,x,P=0,T=0,N,G=r.type,z=G==="FeatureCollection",j=G==="Feature",R=z?r.features.length:1,B=0;B<R;B++){x=z?r.features[B].geometry:j?r.geometry:r,N=x?x.type==="GeometryCollection":!1,m=N?x.geometries.length:1;for(var D=0;D<m;D++){var A=0,q=0;if(g=N?x.geometries[D]:x,g!==null){v=g.coordinates;var H=g.type;switch(P=s&&(H==="Polygon"||H==="MultiPolygon")?1:0,H){case null:break;case"Point":if(n(v,T,B,A,q)===!1)return!1;T++,A++;break;case"LineString":case"MultiPoint":for(a=0;a<v.length;a++){if(n(v[a],T,B,A,q)===!1)return!1;T++,H==="MultiPoint"&&A++}H==="LineString"&&A++;break;case"Polygon":case"MultiLineString":for(a=0;a<v.length;a++){for(l=0;l<v[a].length-P;l++){if(n(v[a][l],T,B,A,q)===!1)return!1;T++}H==="MultiLineString"&&A++,H==="Polygon"&&q++}H==="Polygon"&&A++;break;case"MultiPolygon":for(a=0;a<v.length;a++){for(q=0,l=0;l<v[a].length;l++){for(c=0;c<v[a][l].length-P;c++){if(n(v[a][l][c],T,B,A,q)===!1)return!1;T++}q++}A++}break;case"GeometryCollection":for(a=0;a<g.geometries.length;a++)if(uu(g.geometries[a],n,s)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Ry(r,n,s,a){var l=s;return uu(r,function(c,g,m,v,x){g===0&&s===void 0?l=c:l=n(l,c,g,m,v,x)},a),l}function Lp(r,n){var s;switch(r.type){case"FeatureCollection":for(s=0;s<r.features.length&&n(r.features[s].properties,s)!==!1;s++);break;case"Feature":n(r.properties,0);break}}function Ay(r,n,s){var a=s;return Lp(r,function(l,c){c===0&&s===void 0?a=l:a=n(a,l,c)}),a}function bp(r,n){if(r.type==="Feature")n(r,0);else if(r.type==="FeatureCollection")for(var s=0;s<r.features.length&&n(r.features[s],s)!==!1;s++);}function Dy(r,n,s){var a=s;return bp(r,function(l,c){c===0&&s===void 0?a=l:a=n(a,l,c)}),a}function By(r){var n=[];return uu(r,function(s){n.push(s)}),n}function zh(r,n){var s,a,l,c,g,m,v,x,P,T,N=0,G=r.type==="FeatureCollection",z=r.type==="Feature",j=G?r.features.length:1;for(s=0;s<j;s++){for(m=G?r.features[s].geometry:z?r.geometry:r,x=G?r.features[s].properties:z?r.properties:{},P=G?r.features[s].bbox:z?r.bbox:void 0,T=G?r.features[s].id:z?r.id:void 0,v=m?m.type==="GeometryCollection":!1,g=v?m.geometries.length:1,l=0;l<g;l++){if(c=v?m.geometries[l]:m,c===null){if(n(null,N,x,P,T)===!1)return!1;continue}switch(c.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(n(c,N,x,P,T)===!1)return!1;break}case"GeometryCollection":{for(a=0;a<c.geometries.length;a++)if(n(c.geometries[a],N,x,P,T)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}N++}}function Fy(r,n,s){var a=s;return zh(r,function(l,c,g,m,v){c===0&&s===void 0?a=l:a=n(a,l,c,g,m,v)}),a}function sl(r,n){zh(r,function(s,a,l,c,g){var m=s===null?null:s.type;switch(m){case null:case"Point":case"LineString":case"Polygon":return n(Yi.feature(s,l,{bbox:c,id:g}),a,0)===!1?!1:void 0}var v;switch(m){case"MultiPoint":v="Point";break;case"MultiLineString":v="LineString";break;case"MultiPolygon":v="Polygon";break}for(var x=0;x<s.coordinates.length;x++){var P=s.coordinates[x],T={type:v,coordinates:P};if(n(Yi.feature(T,l),a,x)===!1)return!1}})}function zy(r,n,s){var a=s;return sl(r,function(l,c,g){c===0&&g===0&&s===void 0?a=l:a=n(a,l,c,g)}),a}function Ep(r,n){sl(r,function(s,a,l){var c=0;if(s.geometry){var g=s.geometry.type;if(!(g==="Point"||g==="MultiPoint")){var m,v=0,x=0,P=0;if(uu(s,function(T,N,G,z,j){if(m===void 0||a>v||z>x||j>P){m=T,v=a,x=z,P=j,c=0;return}var R=Yi.lineString([m,T],s.properties);if(n(R,a,l,j,c)===!1)return!1;c++,m=T})===!1)return!1}}})}function Gy(r,n,s){var a=s,l=!1;return Ep(r,function(c,g,m,v,x){l===!1&&s===void 0?a=c:a=n(a,c,g,m,v,x),l=!0}),a}function Mp(r,n){if(!r)throw new Error("geojson is required");sl(r,function(s,a,l){if(s.geometry!==null){var c=s.geometry.type,g=s.geometry.coordinates;switch(c){case"LineString":if(n(s,a,l,0,0)===!1)return!1;break;case"Polygon":for(var m=0;m<g.length;m++)if(n(Yi.lineString(g[m],s.properties),a,l,m)===!1)return!1;break}}})}function qy(r,n,s){var a=s;return Mp(r,function(l,c,g,m){c===0&&s===void 0?a=l:a=n(a,l,c,g,m)}),a}function Uy(r,n){if(n=n||{},!Yi.isObject(n))throw new Error("options is invalid");var s=n.featureIndex||0,a=n.multiFeatureIndex||0,l=n.geometryIndex||0,c=n.segmentIndex||0,g=n.properties,m;switch(r.type){case"FeatureCollection":s<0&&(s=r.features.length+s),g=g||r.features[s].properties,m=r.features[s].geometry;break;case"Feature":g=g||r.properties,m=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":m=r;break;default:throw new Error("geojson is invalid")}if(m===null)return null;var v=m.coordinates;switch(m.type){case"Point":case"MultiPoint":return null;case"LineString":return c<0&&(c=v.length+c-1),Yi.lineString([v[c],v[c+1]],g,n);case"Polygon":return l<0&&(l=v.length+l),c<0&&(c=v[l].length+c-1),Yi.lineString([v[l][c],v[l][c+1]],g,n);case"MultiLineString":return a<0&&(a=v.length+a),c<0&&(c=v[a].length+c-1),Yi.lineString([v[a][c],v[a][c+1]],g,n);case"MultiPolygon":return a<0&&(a=v.length+a),l<0&&(l=v[a].length+l),c<0&&(c=v[a][l].length-c-1),Yi.lineString([v[a][l][c],v[a][l][c+1]],g,n)}throw new Error("geojson is invalid")}function jy(r,n){if(n=n||{},!Yi.isObject(n))throw new Error("options is invalid");var s=n.featureIndex||0,a=n.multiFeatureIndex||0,l=n.geometryIndex||0,c=n.coordIndex||0,g=n.properties,m;switch(r.type){case"FeatureCollection":s<0&&(s=r.features.length+s),g=g||r.features[s].properties,m=r.features[s].geometry;break;case"Feature":g=g||r.properties,m=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":m=r;break;default:throw new Error("geojson is invalid")}if(m===null)return null;var v=m.coordinates;switch(m.type){case"Point":return Yi.point(v,g,n);case"MultiPoint":return a<0&&(a=v.length+a),Yi.point(v[a],g,n);case"LineString":return c<0&&(c=v.length+c),Yi.point(v[c],g,n);case"Polygon":return l<0&&(l=v.length+l),c<0&&(c=v[l].length+c),Yi.point(v[l][c],g,n);case"MultiLineString":return a<0&&(a=v.length+a),c<0&&(c=v[a].length+c),Yi.point(v[a][c],g,n);case"MultiPolygon":return a<0&&(a=v.length+a),l<0&&(l=v[a].length+l),c<0&&(c=v[a][l].length-c),Yi.point(v[a][l][c],g,n)}throw new Error("geojson is invalid")}pi.coordAll=By;pi.coordEach=uu;pi.coordReduce=Ry;pi.featureEach=bp;pi.featureReduce=Dy;pi.findPoint=jy;pi.findSegment=Uy;pi.flattenEach=sl;pi.flattenReduce=zy;pi.geomEach=zh;pi.geomReduce=Fy;pi.lineEach=Mp;pi.lineReduce=qy;pi.propEach=Lp;pi.propReduce=Ay;pi.segmentEach=Ep;pi.segmentReduce=Gy});var Pp=se(Uh=>{"use strict";Object.defineProperty(Uh,"__esModule",{value:!0});var Hy=Gh();function qh(r){var n=[1/0,1/0,-1/0,-1/0];return Hy.coordEach(r,function(s){n[0]>s[0]&&(n[0]=s[0]),n[1]>s[1]&&(n[1]=s[1]),n[2]<s[0]&&(n[2]=s[0]),n[3]<s[1]&&(n[3]=s[1])}),n}qh.default=qh;Uh.default=qh});var al=se((NM,jh)=>{var ls=mh(),Sp=Fh(),kp=Gh(),wa=Pp().default,Xy=kp.featureEach,IM=kp.coordEach,OM=Sp.polygon,Cp=Sp.featureCollection;function Tp(r){var n=new ls(r);return n.insert=function(s){if(s.type!=="Feature")throw new Error("invalid feature");return s.bbox=s.bbox?s.bbox:wa(s),ls.prototype.insert.call(this,s)},n.load=function(s){var a=[];return Array.isArray(s)?s.forEach(function(l){if(l.type!=="Feature")throw new Error("invalid features");l.bbox=l.bbox?l.bbox:wa(l),a.push(l)}):Xy(s,function(l){if(l.type!=="Feature")throw new Error("invalid features");l.bbox=l.bbox?l.bbox:wa(l),a.push(l)}),ls.prototype.load.call(this,a)},n.remove=function(s,a){if(s.type!=="Feature")throw new Error("invalid feature");return s.bbox=s.bbox?s.bbox:wa(s),ls.prototype.remove.call(this,s,a)},n.clear=function(){return ls.prototype.clear.call(this)},n.search=function(s){var a=ls.prototype.search.call(this,this.toBBox(s));return Cp(a)},n.collides=function(s){return ls.prototype.collides.call(this,this.toBBox(s))},n.all=function(){var s=ls.prototype.all.call(this);return Cp(s)},n.toJSON=function(){return ls.prototype.toJSON.call(this)},n.fromJSON=function(s){return ls.prototype.fromJSON.call(this,s)},n.toBBox=function(s){var a;if(s.bbox)a=s.bbox;else if(Array.isArray(s)&&s.length===4)a=s;else if(Array.isArray(s)&&s.length===6)a=[s[0],s[1],s[3],s[4]];else if(s.type==="Feature")a=wa(s);else if(s.type==="FeatureCollection")a=wa(s);else throw new Error("invalid geojson");return{minX:a[0],minY:a[1],maxX:a[2],maxY:a[3]}},n}jh.exports=Tp;jh.exports.default=Tp});var Bp=se((Vh,Wh)=>{(function(r,n){typeof Vh=="object"&&typeof Wh<"u"?Wh.exports=n():typeof define=="function"&&define.amd?define(n):r.quickselect=n()})(Vh,function(){"use strict";function r(l,c,g,m,v){n(l,c,g||0,m||l.length-1,v||a)}function n(l,c,g,m,v){for(;m>g;){if(m-g>600){var x=m-g+1,P=c-g+1,T=Math.log(x),N=.5*Math.exp(2*T/3),G=.5*Math.sqrt(T*N*(x-N)/x)*(P-x/2<0?-1:1),z=Math.max(g,Math.floor(c-P*N/x+G)),j=Math.min(m,Math.floor(c+(x-P)*N/x+G));n(l,c,z,j,v)}var R=l[c],B=g,D=m;for(s(l,g,c),v(l[m],R)>0&&s(l,g,m);B<D;){for(s(l,B,D),B++,D--;v(l[B],R)<0;)B++;for(;v(l[D],R)>0;)D--}v(l[g],R)===0?s(l,g,D):(D++,s(l,D,m)),D<=c&&(g=D+1),c<=D&&(m=D-1)}}function s(l,c,g){var m=l[c];l[c]=l[g],l[g]=m}function a(l,c){return l<c?-1:l>c?1:0}return r})});var qp=se((iC,$h)=>{"use strict";$h.exports=cu;$h.exports.default=cu;var ev=Bp();function cu(r,n){if(!(this instanceof cu))return new cu(r,n);this._maxEntries=Math.max(4,r||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),n&&this._initFormat(n),this.clear()}cu.prototype={all:function(){return this._all(this.data,[])},search:function(r){var n=this.data,s=[],a=this.toBBox;if(!hl(r,n))return s;for(var l=[],c,g,m,v;n;){for(c=0,g=n.children.length;c<g;c++)m=n.children[c],v=n.leaf?a(m):m,hl(r,v)&&(n.leaf?s.push(m):Jh(r,v)?this._all(m,s):l.push(m));n=l.pop()}return s},collides:function(r){var n=this.data,s=this.toBBox;if(!hl(r,n))return!1;for(var a=[],l,c,g,m;n;){for(l=0,c=n.children.length;l<c;l++)if(g=n.children[l],m=n.leaf?s(g):g,hl(r,m)){if(n.leaf||Jh(r,m))return!0;a.push(g)}n=a.pop()}return!1},load:function(r){if(!(r&&r.length))return this;if(r.length<this._minEntries){for(var n=0,s=r.length;n<s;n++)this.insert(r[n]);return this}var a=this._build(r.slice(),0,r.length-1,0);if(!this.data.children.length)this.data=a;else if(this.data.height===a.height)this._splitRoot(this.data,a);else{if(this.data.height<a.height){var l=this.data;this.data=a,a=l}this._insert(a,this.data.height-a.height-1,!0)}return this},insert:function(r){return r&&this._insert(r,this.data.height-1),this},clear:function(){return this.data=ba([]),this},remove:function(r,n){if(!r)return this;for(var s=this.data,a=this.toBBox(r),l=[],c=[],g,m,v,x;s||l.length;){if(s||(s=l.pop(),m=l[l.length-1],g=c.pop(),x=!0),s.leaf&&(v=nv(r,s.children,n),v!==-1))return s.children.splice(v,1),l.push(s),this._condense(l),this;!x&&!s.leaf&&Jh(s,a)?(l.push(s),c.push(g),g=0,m=s,s=s.children[0]):m?(g++,s=m.children[g],x=!1):s=null}return this},toBBox:function(r){return r},compareMinX:Fp,compareMinY:zp,toJSON:function(){return this.data},fromJSON:function(r){return this.data=r,this},_all:function(r,n){for(var s=[];r;)r.leaf?n.push.apply(n,r.children):s.push.apply(s,r.children),r=s.pop();return n},_build:function(r,n,s,a){var l=s-n+1,c=this._maxEntries,g;if(l<=c)return g=ba(r.slice(n,s+1)),La(g,this.toBBox),g;a||(a=Math.ceil(Math.log(l)/Math.log(c)),c=Math.ceil(l/Math.pow(c,a-1))),g=ba([]),g.leaf=!1,g.height=a;var m=Math.ceil(l/c),v=m*Math.ceil(Math.sqrt(c)),x,P,T,N;for(Gp(r,n,s,v,this.compareMinX),x=n;x<=s;x+=v)for(T=Math.min(x+v-1,s),Gp(r,x,T,m,this.compareMinY),P=x;P<=T;P+=m)N=Math.min(P+m-1,T),g.children.push(this._build(r,P,N,a-1));return La(g,this.toBBox),g},_chooseSubtree:function(r,n,s,a){for(var l,c,g,m,v,x,P,T;a.push(n),!(n.leaf||a.length-1===s);){for(P=T=1/0,l=0,c=n.children.length;l<c;l++)g=n.children[l],v=Kh(g),x=rv(r,g)-v,x<T?(T=x,P=v<P?v:P,m=g):x===T&&v<P&&(P=v,m=g);n=m||n.children[0]}return n},_insert:function(r,n,s){var a=this.toBBox,l=s?r:a(r),c=[],g=this._chooseSubtree(l,this.data,n,c);for(g.children.push(r),hu(g,l);n>=0&&c[n].children.length>this._maxEntries;)this._split(c,n),n--;this._adjustParentBBoxes(l,c,n)},_split:function(r,n){var s=r[n],a=s.children.length,l=this._minEntries;this._chooseSplitAxis(s,l,a);var c=this._chooseSplitIndex(s,l,a),g=ba(s.children.splice(c,s.children.length-c));g.height=s.height,g.leaf=s.leaf,La(s,this.toBBox),La(g,this.toBBox),n?r[n-1].children.push(g):this._splitRoot(s,g)},_splitRoot:function(r,n){this.data=ba([r,n]),this.data.height=r.height+1,this.data.leaf=!1,La(this.data,this.toBBox)},_chooseSplitIndex:function(r,n,s){var a,l,c,g,m,v,x,P;for(v=x=1/0,a=n;a<=s-n;a++)l=lu(r,0,a,this.toBBox),c=lu(r,a,s,this.toBBox),g=iv(l,c),m=Kh(l)+Kh(c),g<v?(v=g,P=a,x=m<x?m:x):g===v&&m<x&&(x=m,P=a);return P},_chooseSplitAxis:function(r,n,s){var a=r.leaf?this.compareMinX:Fp,l=r.leaf?this.compareMinY:zp,c=this._allDistMargin(r,n,s,a),g=this._allDistMargin(r,n,s,l);c<g&&r.children.sort(a)},_allDistMargin:function(r,n,s,a){r.children.sort(a);var l=this.toBBox,c=lu(r,0,n,l),g=lu(r,s-n,s,l),m=ll(c)+ll(g),v,x;for(v=n;v<s-n;v++)x=r.children[v],hu(c,r.leaf?l(x):x),m+=ll(c);for(v=s-n-1;v>=n;v--)x=r.children[v],hu(g,r.leaf?l(x):x),m+=ll(g);return m},_adjustParentBBoxes:function(r,n,s){for(var a=s;a>=0;a--)hu(n[a],r)},_condense:function(r){for(var n=r.length-1,s;n>=0;n--)r[n].children.length===0?n>0?(s=r[n-1].children,s.splice(s.indexOf(r[n]),1)):this.clear():La(r[n],this.toBBox)},_initFormat:function(r){var n=["return a"," - b",";"];this.compareMinX=new Function("a","b",n.join(r[0])),this.compareMinY=new Function("a","b",n.join(r[1])),this.toBBox=new Function("a","return {minX: a"+r[0]+", minY: a"+r[1]+", maxX: a"+r[2]+", maxY: a"+r[3]+"};")}};function nv(r,n,s){if(!s)return n.indexOf(r);for(var a=0;a<n.length;a++)if(s(r,n[a]))return a;return-1}function La(r,n){lu(r,0,r.children.length,n,r)}function lu(r,n,s,a,l){l||(l=ba(null)),l.minX=1/0,l.minY=1/0,l.maxX=-1/0,l.maxY=-1/0;for(var c=n,g;c<s;c++)g=r.children[c],hu(l,r.leaf?a(g):g);return l}function hu(r,n){return r.minX=Math.min(r.minX,n.minX),r.minY=Math.min(r.minY,n.minY),r.maxX=Math.max(r.maxX,n.maxX),r.maxY=Math.max(r.maxY,n.maxY),r}function Fp(r,n){return r.minX-n.minX}function zp(r,n){return r.minY-n.minY}function Kh(r){return(r.maxX-r.minX)*(r.maxY-r.minY)}function ll(r){return r.maxX-r.minX+(r.maxY-r.minY)}function rv(r,n){return(Math.max(n.maxX,r.maxX)-Math.min(n.minX,r.minX))*(Math.max(n.maxY,r.maxY)-Math.min(n.minY,r.minY))}function iv(r,n){var s=Math.max(r.minX,n.minX),a=Math.max(r.minY,n.minY),l=Math.min(r.maxX,n.maxX),c=Math.min(r.maxY,n.maxY);return Math.max(0,l-s)*Math.max(0,c-a)}function Jh(r,n){return r.minX<=n.minX&&r.minY<=n.minY&&n.maxX<=r.maxX&&n.maxY<=r.maxY}function hl(r,n){return n.minX<=r.maxX&&n.minY<=r.maxY&&n.maxX>=r.minX&&n.maxY>=r.minY}function ba(r){return{children:r,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Gp(r,n,s,a,l){for(var c=[n,s],g;c.length;)s=c.pop(),n=c.pop(),!(s-n<=a)&&(g=n+Math.ceil((s-n)/a/2)*a,ev(r,g,n,s,l),c.push(n,g,g,s))}});var tc=se((UC,Vp)=>{"use strict";var Yp=Object.prototype.toString;Vp.exports=function(n){var s=Yp.call(n),a=s==="[object Arguments]";return a||(a=s!=="[object Array]"&&n!==null&&typeof n=="object"&&typeof n.length=="number"&&n.length>=0&&Yp.call(n.callee)==="[object Function]"),a}});var rd=se((jC,nd)=>{"use strict";var ed;Object.keys||(pu=Object.prototype.hasOwnProperty,ec=Object.prototype.toString,Wp=tc(),nc=Object.prototype.propertyIsEnumerable,Kp=!nc.call({toString:null},"toString"),Jp=nc.call(function(){},"prototype"),du=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],cl=function(r){var n=r.constructor;return n&&n.prototype===r},$p={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},Qp=function(){if(typeof window>"u")return!1;for(var r in window)try{if(!$p["$"+r]&&pu.call(window,r)&&window[r]!==null&&typeof window[r]=="object")try{cl(window[r])}catch{return!0}}catch{return!0}return!1}(),td=function(r){if(typeof window>"u"||!Qp)return cl(r);try{return cl(r)}catch{return!1}},ed=function(n){var s=n!==null&&typeof n=="object",a=ec.call(n)==="[object Function]",l=Wp(n),c=s&&ec.call(n)==="[object String]",g=[];if(!s&&!a&&!l)throw new TypeError("Object.keys called on a non-object");var m=Jp&&a;if(c&&n.length>0&&!pu.call(n,0))for(var v=0;v<n.length;++v)g.push(String(v));if(l&&n.length>0)for(var x=0;x<n.length;++x)g.push(String(x));else for(var P in n)!(m&&P==="prototype")&&pu.call(n,P)&&g.push(String(P));if(Kp)for(var T=td(n),N=0;N<du.length;++N)!(T&&du[N]==="constructor")&&pu.call(n,du[N])&&g.push(du[N]);return g});var pu,ec,Wp,nc,Kp,Jp,du,cl,$p,Qp,td;nd.exports=ed});var rc=se((HC,sd)=>{"use strict";var lv=Array.prototype.slice,hv=tc(),id=Object.keys,fl=id?function(n){return id(n)}:rd(),od=Object.keys;fl.shim=function(){if(Object.keys){var n=function(){var s=Object.keys(arguments);return s&&s.length===arguments.length}(1,2);n||(Object.keys=function(a){return hv(a)?od(lv.call(a)):od(a)})}else Object.keys=fl;return Object.keys||fl};sd.exports=fl});var ic=se((XC,ad)=>{"use strict";ad.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var n={},s=Symbol("test"),a=Object(s);if(typeof s=="string"||Object.prototype.toString.call(s)!=="[object Symbol]"||Object.prototype.toString.call(a)!=="[object Symbol]")return!1;var l=42;n[s]=l;for(s in n)return!1;if(typeof Object.keys=="function"&&Object.keys(n).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(n).length!==0)return!1;var c=Object.getOwnPropertySymbols(n);if(c.length!==1||c[0]!==s||!Object.prototype.propertyIsEnumerable.call(n,s))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var g=Object.getOwnPropertyDescriptor(n,s);if(g.value!==l||g.enumerable!==!0)return!1}return!0}});var pl=se((ZC,ud)=>{"use strict";var cv=ic();ud.exports=function(){return cv()&&!!Symbol.toStringTag}});var cd=se((YC,hd)=>{"use strict";var ld=typeof Symbol<"u"&&Symbol,fv=ic();hd.exports=function(){return typeof ld!="function"||typeof Symbol!="function"||typeof ld("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:fv()}});var pd=se((VC,fd)=>{"use strict";var pv="Function.prototype.bind called on incompatible ",oc=Array.prototype.slice,dv=Object.prototype.toString,gv="[object Function]";fd.exports=function(n){var s=this;if(typeof s!="function"||dv.call(s)!==gv)throw new TypeError(pv+s);for(var a=oc.call(arguments,1),l,c=function(){if(this instanceof l){var P=s.apply(this,a.concat(oc.call(arguments)));return Object(P)===P?P:this}else return s.apply(n,a.concat(oc.call(arguments)))},g=Math.max(0,s.length-a.length),m=[],v=0;v<g;v++)m.push("$"+v);if(l=Function("binder","return function ("+m.join(",")+"){ return binder.apply(this,arguments); }")(c),s.prototype){var x=function(){};x.prototype=s.prototype,l.prototype=new x,x.prototype=null}return l}});var dl=se((WC,dd)=>{"use strict";var mv=pd();dd.exports=Function.prototype.bind||mv});var md=se((KC,gd)=>{"use strict";var _v=dl();gd.exports=_v.call(Function.call,Object.prototype.hasOwnProperty)});var _l=se((JC,wd)=>{"use strict";var Pn,Ca=SyntaxError,xd=Function,Pa=TypeError,sc=function(r){try{return xd('"use strict"; return ('+r+").constructor;")()}catch{}},$s=Object.getOwnPropertyDescriptor;if($s)try{$s({},"")}catch{$s=null}var ac=function(){throw new Pa},yv=$s?function(){try{return arguments.callee,ac}catch{try{return $s(arguments,"callee").get}catch{return ac}}}():ac,Ea=cd()(),cs=Object.getPrototypeOf||function(r){return r.__proto__},Ma={},vv=typeof Uint8Array>"u"?Pn:cs(Uint8Array),Qs={"%AggregateError%":typeof AggregateError>"u"?Pn:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Pn:ArrayBuffer,"%ArrayIteratorPrototype%":Ea?cs([][Symbol.iterator]()):Pn,"%AsyncFromSyncIteratorPrototype%":Pn,"%AsyncFunction%":Ma,"%AsyncGenerator%":Ma,"%AsyncGeneratorFunction%":Ma,"%AsyncIteratorPrototype%":Ma,"%Atomics%":typeof Atomics>"u"?Pn:Atomics,"%BigInt%":typeof BigInt>"u"?Pn:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Pn:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Pn:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Pn:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Pn:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Pn:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Pn:FinalizationRegistry,"%Function%":xd,"%GeneratorFunction%":Ma,"%Int8Array%":typeof Int8Array>"u"?Pn:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Pn:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Pn:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Ea?cs(cs([][Symbol.iterator]())):Pn,"%JSON%":typeof JSON=="object"?JSON:Pn,"%Map%":typeof Map>"u"?Pn:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Ea?Pn:cs(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Pn:Promise,"%Proxy%":typeof Proxy>"u"?Pn:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Pn:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Pn:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Ea?Pn:cs(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Pn:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Ea?cs(""[Symbol.iterator]()):Pn,"%Symbol%":Ea?Symbol:Pn,"%SyntaxError%":Ca,"%ThrowTypeError%":yv,"%TypedArray%":vv,"%TypeError%":Pa,"%Uint8Array%":typeof Uint8Array>"u"?Pn:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Pn:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Pn:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Pn:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Pn:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Pn:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Pn:WeakSet};try{null.error}catch(r){_d=cs(cs(r)),Qs["%Error.prototype%"]=_d}var _d,xv=function r(n){var s;if(n==="%AsyncFunction%")s=sc("async function () {}");else if(n==="%GeneratorFunction%")s=sc("function* () {}");else if(n==="%AsyncGeneratorFunction%")s=sc("async function* () {}");else if(n==="%AsyncGenerator%"){var a=r("%AsyncGeneratorFunction%");a&&(s=a.prototype)}else if(n==="%AsyncIteratorPrototype%"){var l=r("%AsyncGenerator%");l&&(s=cs(l.prototype))}return Qs[n]=s,s},yd={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},gu=dl(),gl=md(),wv=gu.call(Function.call,Array.prototype.concat),Lv=gu.call(Function.apply,Array.prototype.splice),vd=gu.call(Function.call,String.prototype.replace),ml=gu.call(Function.call,String.prototype.slice),bv=gu.call(Function.call,RegExp.prototype.exec),Ev=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Mv=/\\(\\)?/g,Pv=function(n){var s=ml(n,0,1),a=ml(n,-1);if(s==="%"&&a!=="%")throw new Ca("invalid intrinsic syntax, expected closing `%`");if(a==="%"&&s!=="%")throw new Ca("invalid intrinsic syntax, expected opening `%`");var l=[];return vd(n,Ev,function(c,g,m,v){l[l.length]=m?vd(v,Mv,"$1"):g||c}),l},Cv=function(n,s){var a=n,l;if(gl(yd,a)&&(l=yd[a],a="%"+l[0]+"%"),gl(Qs,a)){var c=Qs[a];if(c===Ma&&(c=xv(a)),typeof c>"u"&&!s)throw new Pa("intrinsic "+n+" exists, but is not available. Please file an issue!");return{alias:l,name:a,value:c}}throw new Ca("intrinsic "+n+" does not exist!")};wd.exports=function(n,s){if(typeof n!="string"||n.length===0)throw new Pa("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof s!="boolean")throw new Pa('"allowMissing" argument must be a boolean');if(bv(/^%?[^%]*%?$/,n)===null)throw new Ca("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var a=Pv(n),l=a.length>0?a[0]:"",c=Cv("%"+l+"%",s),g=c.name,m=c.value,v=!1,x=c.alias;x&&(l=x[0],Lv(a,wv([0,1],x)));for(var P=1,T=!0;P<a.length;P+=1){var N=a[P],G=ml(N,0,1),z=ml(N,-1);if((G==='"'||G==="'"||G==="`"||z==='"'||z==="'"||z==="`")&&G!==z)throw new Ca("property names with quotes must have matching quotes");if((N==="constructor"||!T)&&(v=!0),l+="."+N,g="%"+l+"%",gl(Qs,g))m=Qs[g];else if(m!=null){if(!(N in m)){if(!s)throw new Pa("base intrinsic for "+n+" exists, but the property is not available.");return}if($s&&P+1>=a.length){var j=$s(m,N);T=!!j,T&&"get"in j&&!("originalValue"in j.get)?m=j.get:m=m[N]}else T=gl(m,N),m=m[N];T&&!v&&(Qs[g]=m)}}return m}});var vl=se(($C,yl)=>{"use strict";var uc=dl(),Sa=_l(),Ed=Sa("%Function.prototype.apply%"),Md=Sa("%Function.prototype.call%"),Pd=Sa("%Reflect.apply%",!0)||uc.call(Md,Ed),Ld=Sa("%Object.getOwnPropertyDescriptor%",!0),ta=Sa("%Object.defineProperty%",!0),Sv=Sa("%Math.max%");if(ta)try{ta({},"a",{value:1})}catch{ta=null}yl.exports=function(n){var s=Pd(uc,Md,arguments);if(Ld&&ta){var a=Ld(s,"length");a.configurable&&ta(s,"length",{value:1+Sv(0,n.length-(arguments.length-1))})}return s};var bd=function(){return Pd(uc,Ed,arguments)};ta?ta(yl.exports,"apply",{value:bd}):yl.exports.apply=bd});var lc=se((QC,kd)=>{"use strict";var Cd=_l(),Sd=vl(),kv=Sd(Cd("String.prototype.indexOf"));kd.exports=function(n,s){var a=Cd(n,!!s);return typeof a=="function"&&kv(n,".prototype.")>-1?Sd(a):a}});var Od=se((tS,Id)=>{"use strict";var Tv=pl()(),Iv=lc(),hc=Iv("Object.prototype.toString"),xl=function(n){return Tv&&n&&typeof n=="object"&&Symbol.toStringTag in n?!1:hc(n)==="[object Arguments]"},Td=function(n){return xl(n)?!0:n!==null&&typeof n=="object"&&typeof n.length=="number"&&n.length>=0&&hc(n)!=="[object Array]"&&hc(n.callee)==="[object Function]"},Ov=function(){return xl(arguments)}();xl.isLegacyArguments=Td;Id.exports=Ov?xl:Td});var Rd=se((eS,Nd)=>{"use strict";var Nv=_l(),cc=Nv("%Object.defineProperty%",!0),fc=function(){if(cc)try{return cc({},"a",{value:1}),!0}catch{return!1}return!1};fc.hasArrayLengthDefineBug=function(){if(!fc())return null;try{return cc([],"length",{value:1}).length!==1}catch{return!0}};Nd.exports=fc});var ka=se((nS,Fd)=>{"use strict";var Rv=rc(),Av=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",Dv=Object.prototype.toString,Bv=Array.prototype.concat,Ad=Object.defineProperty,Fv=function(r){return typeof r=="function"&&Dv.call(r)==="[object Function]"},zv=Rd()(),Dd=Ad&&zv,Gv=function(r,n,s,a){if(n in r){if(a===!0){if(r[n]===s)return}else if(!Fv(a)||!a())return}Dd?Ad(r,n,{configurable:!0,enumerable:!1,value:s,writable:!0}):r[n]=s},Bd=function(r,n){var s=arguments.length>2?arguments[2]:{},a=Rv(n);Av&&(a=Bv.call(a,Object.getOwnPropertySymbols(n)));for(var l=0;l<a.length;l+=1)Gv(r,a[l],n[a[l]],s[a[l]])};Bd.supportsDescriptors=!!Dd;Fd.exports=Bd});var pc=se((rS,Gd)=>{"use strict";var zd=function(r){return r!==r};Gd.exports=function(n,s){return n===0&&s===0?1/n===1/s:!!(n===s||zd(n)&&zd(s))}});var dc=se((iS,qd)=>{"use strict";var qv=pc();qd.exports=function(){return typeof Object.is=="function"?Object.is:qv}});var jd=se((oS,Ud)=>{"use strict";var Uv=dc(),jv=ka();Ud.exports=function(){var n=Uv();return jv(Object,{is:n},{is:function(){return Object.is!==n}}),n}});var Yd=se((sS,Zd)=>{"use strict";var Hv=ka(),Xv=vl(),Zv=pc(),Hd=dc(),Yv=jd(),Xd=Xv(Hd(),Object);Hv(Xd,{getPolyfill:Hd,implementation:Zv,shim:Yv});Zd.exports=Xd});var $d=se((aS,Jd)=>{"use strict";var gc=lc(),Vd=pl()(),Wd,Kd,mc,_c;Vd&&(Wd=gc("Object.prototype.hasOwnProperty"),Kd=gc("RegExp.prototype.exec"),mc={},wl=function(){throw mc},_c={toString:wl,valueOf:wl},typeof Symbol.toPrimitive=="symbol"&&(_c[Symbol.toPrimitive]=wl));var wl,Vv=gc("Object.prototype.toString"),Wv=Object.getOwnPropertyDescriptor,Kv="[object RegExp]";Jd.exports=Vd?function(n){if(!n||typeof n!="object")return!1;var s=Wv(n,"lastIndex"),a=s&&Wd(s,"value");if(!a)return!1;try{Kd(n,_c)}catch(l){return l===mc}}:function(n){return!n||typeof n!="object"&&typeof n!="function"?!1:Vv(n)===Kv}});var tg=se((uS,Qd)=>{"use strict";var _u=function(){return typeof function(){}.name=="string"},mu=Object.getOwnPropertyDescriptor;if(mu)try{mu([],"length")}catch{mu=null}_u.functionsHaveConfigurableNames=function(){if(!_u()||!mu)return!1;var n=mu(function(){},"name");return!!n&&!!n.configurable};var Jv=Function.prototype.bind;_u.boundFunctionsHaveNames=function(){return _u()&&typeof Jv=="function"&&function(){}.bind().name!==""};Qd.exports=_u});var vc=se((lS,yc)=>{"use strict";var $v=tg().functionsHaveConfigurableNames(),Qv=Object,t0=TypeError;yc.exports=function(){if(this!=null&&this!==Qv(this))throw new t0("RegExp.prototype.flags getter called on non-object");var n="";return this.hasIndices&&(n+="d"),this.global&&(n+="g"),this.ignoreCase&&(n+="i"),this.multiline&&(n+="m"),this.dotAll&&(n+="s"),this.unicode&&(n+="u"),this.sticky&&(n+="y"),n};$v&&Object.defineProperty&&Object.defineProperty(yc.exports,"name",{value:"get flags"})});var xc=se((hS,eg)=>{"use strict";var e0=vc(),n0=ka().supportsDescriptors,r0=Object.getOwnPropertyDescriptor;eg.exports=function(){if(n0&&/a/mig.flags==="gim"){var n=r0(RegExp.prototype,"flags");if(n&&typeof n.get=="function"&&typeof RegExp.prototype.dotAll=="boolean"&&typeof RegExp.prototype.hasIndices=="boolean"){var s="",a={};if(Object.defineProperty(a,"hasIndices",{get:function(){s+="d"}}),Object.defineProperty(a,"sticky",{get:function(){s+="y"}}),s==="dy")return n.get}}return e0}});var ig=se((cS,rg)=>{"use strict";var i0=ka().supportsDescriptors,o0=xc(),s0=Object.getOwnPropertyDescriptor,a0=Object.defineProperty,u0=TypeError,ng=Object.getPrototypeOf,l0=/a/;rg.exports=function(){if(!i0||!ng)throw new u0("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var n=o0(),s=ng(l0),a=s0(s,"flags");return(!a||a.get!==n)&&a0(s,"flags",{configurable:!0,enumerable:!1,get:n}),n}});var ug=se((fS,ag)=>{"use strict";var h0=ka(),c0=vl(),f0=vc(),og=xc(),p0=ig(),sg=c0(og());h0(sg,{getPolyfill:og,implementation:f0,shim:p0});ag.exports=sg});var hg=se((pS,lg)=>{"use strict";var d0=Date.prototype.getDay,g0=function(n){try{return d0.call(n),!0}catch{return!1}},m0=Object.prototype.toString,_0="[object Date]",y0=pl()();lg.exports=function(n){return typeof n!="object"||n===null?!1:y0?g0(n):m0.call(n)===_0}});var wc=se((dS,wg)=>{var cg=rc(),fg=Od(),pg=Yd(),dg=$d(),gg=ug(),mg=hg(),_g=Date.prototype.getTime;function xg(r,n,s){var a=s||{};return(a.strict?pg(r,n):r===n)?!0:!r||!n||typeof r!="object"&&typeof n!="object"?a.strict?pg(r,n):r==n:v0(r,n,a)}function yg(r){return r==null}function vg(r){return!(!r||typeof r!="object"||typeof r.length!="number"||typeof r.copy!="function"||typeof r.slice!="function"||r.length>0&&typeof r[0]!="number")}function v0(r,n,s){var a,l;if(typeof r!=typeof n||yg(r)||yg(n)||r.prototype!==n.prototype||fg(r)!==fg(n))return!1;var c=dg(r),g=dg(n);if(c!==g)return!1;if(c||g)return r.source===n.source&&gg(r)===gg(n);if(mg(r)&&mg(n))return _g.call(r)===_g.call(n);var m=vg(r),v=vg(n);if(m!==v)return!1;if(m||v){if(r.length!==n.length)return!1;for(a=0;a<r.length;a++)if(r[a]!==n[a])return!1;return!0}if(typeof r!=typeof n)return!1;try{var x=cg(r),P=cg(n)}catch{return!1}if(x.length!==P.length)return!1;for(x.sort(),P.sort(),a=x.length-1;a>=0;a--)if(x[a]!=P[a])return!1;for(a=x.length-1;a>=0;a--)if(l=x[a],!xg(r[l],n[l],s))return!1;return!0}wg.exports=xg});var Dc=se((xT,Tg)=>{var m1=wc(),fs=function(r){this.precision=r&&r.precision?r.precision:17,this.direction=r&&r.direction?r.direction:!1,this.pseudoNode=r&&r.pseudoNode?r.pseudoNode:!1,this.objectComparator=r&&r.objectComparator?r.objectComparator:_1};fs.prototype.compare=function(r,n){if(r.type!==n.type||!kg(r,n))return!1;switch(r.type){case"Point":return this.compareCoord(r.coordinates,n.coordinates);case"LineString":return this.compareLine(r.coordinates,n.coordinates,0,!1);case"Polygon":return this.comparePolygon(r,n);case"Feature":return this.compareFeature(r,n);default:if(r.type.indexOf("Multi")===0){var s=this,a=Sg(r),l=Sg(n);return a.every(function(c){return this.some(function(g){return s.compare(c,g)})},l)}}return!1};function Sg(r){return r.coordinates.map(function(n){return{type:r.type.replace("Multi",""),coordinates:n}})}function kg(r,n){return r.hasOwnProperty("coordinates")?r.coordinates.length===n.coordinates.length:r.length===n.length}fs.prototype.compareCoord=function(r,n){if(r.length!==n.length)return!1;for(var s=0;s<r.length;s++)if(r[s].toFixed(this.precision)!==n[s].toFixed(this.precision))return!1;return!0};fs.prototype.compareLine=function(r,n,s,a){if(!kg(r,n))return!1;var l=this.pseudoNode?r:this.removePseudo(r),c=this.pseudoNode?n:this.removePseudo(n);if(!(a&&!this.compareCoord(l[0],c[0])&&(c=this.fixStartIndex(c,l),!c))){var g=this.compareCoord(l[s],c[s]);return this.direction||g?this.comparePath(l,c):this.compareCoord(l[s],c[c.length-(1+s)])?this.comparePath(l.slice().reverse(),c):!1}};fs.prototype.fixStartIndex=function(r,n){for(var s,a=-1,l=0;l<r.length;l++)if(this.compareCoord(r[l],n[0])){a=l;break}return a>=0&&(s=[].concat(r.slice(a,r.length),r.slice(1,a+1))),s};fs.prototype.comparePath=function(r,n){var s=this;return r.every(function(a,l){return s.compareCoord(a,this[l])},n)};fs.prototype.comparePolygon=function(r,n){if(this.compareLine(r.coordinates[0],n.coordinates[0],1,!0)){var s=r.coordinates.slice(1,r.coordinates.length),a=n.coordinates.slice(1,n.coordinates.length),l=this;return s.every(function(c){return this.some(function(g){return l.compareLine(c,g,1,!0)})},a)}else return!1};fs.prototype.compareFeature=function(r,n){return r.id!==n.id||!this.objectComparator(r.properties,n.properties)||!this.compareBBox(r,n)?!1:this.compare(r.geometry,n.geometry)};fs.prototype.compareBBox=function(r,n){return!!(!r.bbox&&!n.bbox||r.bbox&&n.bbox&&this.compareCoord(r.bbox,n.bbox))};fs.prototype.removePseudo=function(r){return r};function _1(r,n){return m1(r,n,{strict:!0})}Tg.exports=fs});var Og=se((OT,El)=>{function Us(r,n,s,a){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(r,n,s,a)}Us.prototype.run=function(r,n,s,a){this._init(r,n,s,a);for(var l=0;l<this._datasetLength;l++)if(this._visited[l]!==1){this._visited[l]=1;var c=this._regionQuery(l);if(c.length<this.minPts)this.noise.push(l);else{var g=this.clusters.length;this.clusters.push([]),this._addToCluster(l,g),this._expandCluster(g,c)}}return this.clusters};Us.prototype._init=function(r,n,s,a){if(r){if(!(r instanceof Array))throw Error("Dataset must be of type array, "+typeof r+" given");this.dataset=r,this.clusters=[],this.noise=[],this._datasetLength=r.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}n&&(this.epsilon=n),s&&(this.minPts=s),a&&(this.distance=a)};Us.prototype._expandCluster=function(r,n){for(var s=0;s<n.length;s++){var a=n[s];if(this._visited[a]!==1){this._visited[a]=1;var l=this._regionQuery(a);l.length>=this.minPts&&(n=this._mergeArrays(n,l))}this._assigned[a]!==1&&this._addToCluster(a,r)}};Us.prototype._addToCluster=function(r,n){this.clusters[n].push(r),this._assigned[r]=1};Us.prototype._regionQuery=function(r){for(var n=[],s=0;s<this._datasetLength;s++){var a=this.distance(this.dataset[r],this.dataset[s]);a<this.epsilon&&n.push(s)}return n};Us.prototype._mergeArrays=function(r,n){for(var s=n.length,a=0;a<s;a++){var l=n[a];r.indexOf(l)<0&&r.push(l)}return r};Us.prototype._euclideanDistance=function(r,n){for(var s=0,a=Math.min(r.length,n.length);a--;)s+=(r[a]-n[a])*(r[a]-n[a]);return Math.sqrt(s)};typeof El<"u"&&El.exports&&(El.exports=Us)});var Ng=se((NT,Ml)=>{function js(r,n,s){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(r,n,s)}js.prototype.init=function(r,n,s){this.assignments=[],this.centroids=[],typeof r<"u"&&(this.dataset=r),typeof n<"u"&&(this.k=n),typeof s<"u"&&(this.distance=s)};js.prototype.run=function(r,n){this.init(r,n);for(var s=this.dataset.length,a=0;a<this.k;a++)this.centroids[a]=this.randomCentroid();for(var l=!0;l;){l=this.assign();for(var c=0;c<this.k;c++){for(var g=new Array(P),m=0,v=0;v<P;v++)g[v]=0;for(var x=0;x<s;x++){var P=this.dataset[x].length;if(c===this.assignments[x]){for(var v=0;v<P;v++)g[v]+=this.dataset[x][v];m++}}if(m>0){for(var v=0;v<P;v++)g[v]/=m;this.centroids[c]=g}else this.centroids[c]=this.randomCentroid(),l=!0}}return this.getClusters()};js.prototype.randomCentroid=function(){var r=this.dataset.length-1,n,s;do s=Math.round(Math.random()*r),n=this.dataset[s];while(this.centroids.indexOf(n)>=0);return n};js.prototype.assign=function(){for(var r=!1,n=this.dataset.length,s,a=0;a<n;a++)s=this.argmin(this.dataset[a],this.centroids,this.distance),s!=this.assignments[a]&&(this.assignments[a]=s,r=!0);return r};js.prototype.getClusters=function(){for(var r=new Array(this.k),n,s=0;s<this.assignments.length;s++)n=this.assignments[s],typeof r[n]>"u"&&(r[n]=[]),r[n].push(s);return r};js.prototype.argmin=function(r,n,s){for(var a=Number.MAX_VALUE,l=0,c=n.length,g,m=0;m<c;m++)g=s(r,n[m]),g<a&&(a=g,l=m);return l};js.prototype.distance=function(r,n){for(var s=0,a=Math.min(r.length,n.length);a--;){var l=r[a]-n[a];s+=l*l}return Math.sqrt(s)};typeof Ml<"u"&&Ml.exports&&(Ml.exports=js)});var Bc=se((RT,Pl)=>{function ps(r,n,s){this._queue=[],this._priorities=[],this._sorting="desc",this._init(r,n,s)}ps.prototype.insert=function(r,n){for(var s=this._queue.length,a=s;a--;){var l=this._priorities[a];this._sorting==="desc"?n>l&&(s=a):n<l&&(s=a)}this._insertAt(r,n,s)};ps.prototype.remove=function(r){for(var n=this._queue.length;n--;){var s=this._queue[n];if(r===s){this._queue.splice(n,1),this._priorities.splice(n,1);break}}};ps.prototype.forEach=function(r){this._queue.forEach(r)};ps.prototype.getElements=function(){return this._queue};ps.prototype.getElementPriority=function(r){return this._priorities[r]};ps.prototype.getPriorities=function(){return this._priorities};ps.prototype.getElementsWithPriorities=function(){for(var r=[],n=0,s=this._queue.length;n<s;n++)r.push([this._queue[n],this._priorities[n]]);return r};ps.prototype._init=function(r,n,s){if(r&&n){if(this._queue=[],this._priorities=[],r.length!==n.length)throw new Error("Arrays must have the same length");for(var a=0;a<r.length;a++)this.insert(r[a],n[a])}s&&(this._sorting=s)};ps.prototype._insertAt=function(r,n,s){this._queue.length===s?(this._queue.push(r),this._priorities.push(n)):(this._queue.splice(s,0,r),this._priorities.splice(s,0,n))};typeof Pl<"u"&&Pl.exports&&(Pl.exports=ps)});var Ag=se((AT,Oa)=>{typeof Oa<"u"&&Oa.exports&&(Rg=Bc());var Rg;function Ss(r,n,s,a){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(r,n,s,a)}Ss.prototype.run=function(r,n,s,a){this._init(r,n,s,a);for(var l=0,c=this.dataset.length;l<c;l++)if(this._processed[l]!==1){this._processed[l]=1,this.clusters.push([l]);var g=this.clusters.length-1;this._orderedList.push(l);var m=new Rg(null,null,"asc"),v=this._regionQuery(l);this._distanceToCore(l)!==void 0&&(this._updateQueue(l,v,m),this._expandCluster(g,m))}return this.clusters};Ss.prototype.getReachabilityPlot=function(){for(var r=[],n=0,s=this._orderedList.length;n<s;n++){var a=this._orderedList[n],l=this._reachability[a];r.push([a,l])}return r};Ss.prototype._init=function(r,n,s,a){if(r){if(!(r instanceof Array))throw Error("Dataset must be of type array, "+typeof r+" given");this.dataset=r,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}n&&(this.epsilon=n),s&&(this.minPts=s),a&&(this.distance=a)};Ss.prototype._updateQueue=function(r,n,s){var a=this;this._coreDistance=this._distanceToCore(r),n.forEach(function(l){if(a._processed[l]===void 0){var c=a.distance(a.dataset[r],a.dataset[l]),g=Math.max(a._coreDistance,c);a._reachability[l]===void 0?(a._reachability[l]=g,s.insert(l,g)):g<a._reachability[l]&&(a._reachability[l]=g,s.remove(l),s.insert(l,g))}})};Ss.prototype._expandCluster=function(r,n){for(var s=n.getElements(),a=0,l=s.length;a<l;a++){var c=s[a];if(this._processed[c]===void 0){var g=this._regionQuery(c);this._processed[c]=1,this.clusters[r].push(c),this._orderedList.push(c),this._distanceToCore(c)!==void 0&&(this._updateQueue(c,g,n),this._expandCluster(r,n))}}};Ss.prototype._distanceToCore=function(r){for(var n=this.epsilon,s=0;s<n;s++){var a=this._regionQuery(r,s);if(a.length>=this.minPts)return s}};Ss.prototype._regionQuery=function(r,n){n=n||this.epsilon;for(var s=[],a=0,l=this.dataset.length;a<l;a++)this.distance(this.dataset[r],this.dataset[a])<n&&s.push(a);return s};Ss.prototype._euclideanDistance=function(r,n){for(var s=0,a=Math.min(r.length,n.length);a--;)s+=(r[a]-n[a])*(r[a]-n[a]);return Math.sqrt(s)};typeof Oa<"u"&&Oa.exports&&(Oa.exports=Ss)});var Dg=se((DT,Cl)=>{typeof Cl<"u"&&Cl.exports&&(Cl.exports={DBSCAN:Og(),KMEANS:Ng(),OPTICS:Ag(),PriorityQueue:Bc()})});var Fc=se((UT,Fg)=>{"use strict";Fg.exports={eudist:function(n,s,a){for(var l=n.length,c=0,g=0;g<l;g++){var m=(n[g]||0)-(s[g]||0);c+=m*m}return a?Math.sqrt(c):c},mandist:function(n,s,a){for(var l=n.length,c=0,g=0;g<l;g++)c+=Math.abs((n[g]||0)-(s[g]||0));return a?Math.sqrt(c):c},dist:function(n,s,a){var l=Math.abs(n-s);return a?l:l*l}}});var qg=se((jT,Gg)=>{"use strict";var zg=Fc(),w1=zg.eudist,L1=zg.dist;Gg.exports={kmrand:function(n,s){for(var a={},l=[],c=s<<2,g=n.length,m=n[0].length>0;l.length<s&&c-- >0;){var v=n[Math.floor(Math.random()*g)],x=m?v.join("_"):""+v;a[x]||(a[x]=!0,l.push(v))}if(l.length<s)throw new Error("Error initializating clusters");return l},kmpp:function(n,s){var a=n[0].length?w1:L1,l=[],c=n.length,g=n[0].length>0,m={},v=n[Math.floor(Math.random()*c)],x=g?v.join("_"):""+v;for(l.push(v),m[x]=!0;l.length<s;){for(var P=[],T=l.length,N=0,G=[],z=0;z<c;z++){for(var j=1/0,R=0;R<T;R++){var B=a(n[z],l[R]);B<=j&&(j=B)}P[z]=j}for(var D=0;D<c;D++)N+=P[D];for(var A=0;A<c;A++)G[A]={i:A,v:n[A],pr:P[A]/N,cs:0};G.sort(function(et,X){return et.pr-X.pr}),G[0].cs=G[0].pr;for(var q=1;q<c;q++)G[q].cs=G[q-1].cs+G[q].pr;for(var H=Math.random(),K=0;K<c-1&&G[K++].cs<H;);l.push(G[K-1].v)}return l}}});var Zg=se((ZT,Xg)=>{"use strict";var zc=Fc(),Hg=qg(),b1=zc.eudist,HT=zc.mandist,XT=zc.dist,E1=Hg.kmrand,M1=Hg.kmpp,Ug=1e4;function jg(r,n,s){s=s||[];for(var a=0;a<r;a++)s[a]=n;return s}function P1(r,n,s,a){var l=[],c=[],g=[],m=[],v=!1,x=a||Ug,P=r.length,T=r[0].length,N=T>0,G=[];if(s)s=="kmrand"?l=E1(r,n):s=="kmpp"?l=M1(r,n):l=s;else for(var z={};l.length<n;){var j=Math.floor(Math.random()*P);z[j]||(z[j]=!0,l.push(r[j]))}do{jg(n,0,G);for(var R=0;R<P;R++){for(var B=1/0,D=0,A=0;A<n;A++){var m=N?b1(r[R],l[A]):Math.abs(r[R]-l[A]);m<=B&&(B=m,D=A)}g[R]=D,G[D]++}for(var q=[],c=[],H=0,K=0;K<n;K++)q[K]=N?jg(T,0,q[K]):0,c[K]=l[K];if(N){for(var et=0;et<n;et++)l[et]=[];for(var X=0;X<P;X++)for(var lt=g[X],gt=q[lt],Et=r[X],Q=0;Q<T;Q++)gt[Q]+=Et[Q];v=!0;for(var kt=0;kt<n;kt++){for(var ct=l[kt],bt=q[kt],Mt=c[kt],Xt=G[kt],ft=0;ft<T;ft++)ct[ft]=bt[ft]/Xt||0;if(v){for(var Ct=0;Ct<T;Ct++)if(Mt[Ct]!=ct[Ct]){v=!1;break}}}}else{for(var st=0;st<P;st++){var Rt=g[st];q[Rt]+=r[st]}for(var Ot=0;Ot<n;Ot++)l[Ot]=q[Ot]/G[Ot]||0;v=!0;for(var Qt=0;Qt<n;Qt++)if(c[Qt]!=l[Qt]){v=!1;break}}v=v||--x<=0}while(!v);return{it:Ug-x,k:n,idxs:g,centroids:l}}Xg.exports=P1});var Ba=se((Xc,Zc)=>{(function(r,n){typeof Xc=="object"&&typeof Zc<"u"?Zc.exports=n():typeof define=="function"&&define.amd?define(n):(r=typeof globalThis<"u"?globalThis:r||self,r.polygonClipping=n())})(Xc,function(){"use strict";function r(ht,Y){if(!(ht instanceof Y))throw new TypeError("Cannot call a class as a function")}function n(ht,Y){for(var C=0;C<Y.length;C++){var b=Y[C];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(ht,b.key,b)}}function s(ht,Y,C){return Y&&n(ht.prototype,Y),C&&n(ht,C),ht}var a=function(){function ht(Y,C){this.next=null,this.key=Y,this.data=C,this.left=null,this.right=null}return ht}();function l(ht,Y){return ht>Y?1:ht<Y?-1:0}function c(ht,Y,C){for(var b=new a(null,null),k=b,F=b;;){var Z=C(ht,Y.key);if(Z<0){if(Y.left===null)break;if(C(ht,Y.left.key)<0){var J=Y.left;if(Y.left=J.right,J.right=Y,Y=J,Y.left===null)break}F.left=Y,F=Y,Y=Y.left}else if(Z>0){if(Y.right===null)break;if(C(ht,Y.right.key)>0){var J=Y.right;if(Y.right=J.left,J.left=Y,Y=J,Y.right===null)break}k.right=Y,k=Y,Y=Y.right}else break}return k.right=Y.left,F.left=Y.right,Y.left=b.right,Y.right=b.left,Y}function g(ht,Y,C,b){var k=new a(ht,Y);if(C===null)return k.left=k.right=null,k;C=c(ht,C,b);var F=b(ht,C.key);return F<0?(k.left=C.left,k.right=C,C.left=null):F>=0&&(k.right=C.right,k.left=C,C.right=null),k}function m(ht,Y,C){var b=null,k=null;if(Y){Y=c(ht,Y,C);var F=C(Y.key,ht);F===0?(b=Y.left,k=Y.right):F<0?(k=Y.right,Y.right=null,b=Y):(b=Y.left,Y.left=null,k=Y)}return{left:b,right:k}}function v(ht,Y,C){return Y===null?ht:(ht===null||(Y=c(ht.key,Y,C),Y.left=ht),Y)}function x(ht,Y,C,b,k){if(ht){b(""+Y+(C?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ")+k(ht)+`
`);var F=Y+(C?"    ":"\u2502   ");ht.left&&x(ht.left,F,!1,b,k),ht.right&&x(ht.right,F,!0,b,k)}}var P=function(){function ht(Y){Y===void 0&&(Y=l),this._root=null,this._size=0,this._comparator=Y}return ht.prototype.insert=function(Y,C){return this._size++,this._root=g(Y,C,this._root,this._comparator)},ht.prototype.add=function(Y,C){var b=new a(Y,C);this._root===null&&(b.left=b.right=null,this._size++,this._root=b);var k=this._comparator,F=c(Y,this._root,k),Z=k(Y,F.key);return Z===0?this._root=F:(Z<0?(b.left=F.left,b.right=F,F.left=null):Z>0&&(b.right=F.right,b.left=F,F.right=null),this._size++,this._root=b),this._root},ht.prototype.remove=function(Y){this._root=this._remove(Y,this._root,this._comparator)},ht.prototype._remove=function(Y,C,b){var k;if(C===null)return null;C=c(Y,C,b);var F=b(Y,C.key);return F===0?(C.left===null?k=C.right:(k=c(Y,C.left,b),k.right=C.right),this._size--,k):C},ht.prototype.pop=function(){var Y=this._root;if(Y){for(;Y.left;)Y=Y.left;return this._root=c(Y.key,this._root,this._comparator),this._root=this._remove(Y.key,this._root,this._comparator),{key:Y.key,data:Y.data}}return null},ht.prototype.findStatic=function(Y){for(var C=this._root,b=this._comparator;C;){var k=b(Y,C.key);if(k===0)return C;k<0?C=C.left:C=C.right}return null},ht.prototype.find=function(Y){return this._root&&(this._root=c(Y,this._root,this._comparator),this._comparator(Y,this._root.key)!==0)?null:this._root},ht.prototype.contains=function(Y){for(var C=this._root,b=this._comparator;C;){var k=b(Y,C.key);if(k===0)return!0;k<0?C=C.left:C=C.right}return!1},ht.prototype.forEach=function(Y,C){for(var b=this._root,k=[],F=!1;!F;)b!==null?(k.push(b),b=b.left):k.length!==0?(b=k.pop(),Y.call(C,b),b=b.right):F=!0;return this},ht.prototype.range=function(Y,C,b,k){for(var F=[],Z=this._comparator,J=this._root,tt;F.length!==0||J;)if(J)F.push(J),J=J.left;else{if(J=F.pop(),tt=Z(J.key,C),tt>0)break;if(Z(J.key,Y)>=0&&b.call(k,J))return this;J=J.right}return this},ht.prototype.keys=function(){var Y=[];return this.forEach(function(C){var b=C.key;return Y.push(b)}),Y},ht.prototype.values=function(){var Y=[];return this.forEach(function(C){var b=C.data;return Y.push(b)}),Y},ht.prototype.min=function(){return this._root?this.minNode(this._root).key:null},ht.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},ht.prototype.minNode=function(Y){if(Y===void 0&&(Y=this._root),Y)for(;Y.left;)Y=Y.left;return Y},ht.prototype.maxNode=function(Y){if(Y===void 0&&(Y=this._root),Y)for(;Y.right;)Y=Y.right;return Y},ht.prototype.at=function(Y){for(var C=this._root,b=!1,k=0,F=[];!b;)if(C)F.push(C),C=C.left;else if(F.length>0){if(C=F.pop(),k===Y)return C;k++,C=C.right}else b=!0;return null},ht.prototype.next=function(Y){var C=this._root,b=null;if(Y.right){for(b=Y.right;b.left;)b=b.left;return b}for(var k=this._comparator;C;){var F=k(Y.key,C.key);if(F===0)break;F<0?(b=C,C=C.left):C=C.right}return b},ht.prototype.prev=function(Y){var C=this._root,b=null;if(Y.left!==null){for(b=Y.left;b.right;)b=b.right;return b}for(var k=this._comparator;C;){var F=k(Y.key,C.key);if(F===0)break;F<0?C=C.left:(b=C,C=C.right)}return b},ht.prototype.clear=function(){return this._root=null,this._size=0,this},ht.prototype.toList=function(){return G(this._root)},ht.prototype.load=function(Y,C,b){C===void 0&&(C=[]),b===void 0&&(b=!1);var k=Y.length,F=this._comparator;if(b&&R(Y,C,0,k-1,F),this._root===null)this._root=T(Y,C,0,k),this._size=k;else{var Z=j(this.toList(),N(Y,C),F);k=this._size+k,this._root=z({head:Z},0,k)}return this},ht.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(ht.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(ht.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),ht.prototype.toString=function(Y){Y===void 0&&(Y=function(k){return String(k.key)});var C=[];return x(this._root,"",!0,function(b){return C.push(b)},Y),C.join("")},ht.prototype.update=function(Y,C,b){var k=this._comparator,F=m(Y,this._root,k),Z=F.left,J=F.right;k(Y,C)<0?J=g(C,b,J,k):Z=g(C,b,Z,k),this._root=v(Z,J,k)},ht.prototype.split=function(Y){return m(Y,this._root,this._comparator)},ht}();function T(ht,Y,C,b){var k=b-C;if(k>0){var F=C+Math.floor(k/2),Z=ht[F],J=Y[F],tt=new a(Z,J);return tt.left=T(ht,Y,C,F),tt.right=T(ht,Y,F+1,b),tt}return null}function N(ht,Y){for(var C=new a(null,null),b=C,k=0;k<ht.length;k++)b=b.next=new a(ht[k],Y[k]);return b.next=null,C.next}function G(ht){for(var Y=ht,C=[],b=!1,k=new a(null,null),F=k;!b;)Y?(C.push(Y),Y=Y.left):C.length>0?(Y=F=F.next=C.pop(),Y=Y.right):b=!0;return F.next=null,k.next}function z(ht,Y,C){var b=C-Y;if(b>0){var k=Y+Math.floor(b/2),F=z(ht,Y,k),Z=ht.head;return Z.left=F,ht.head=ht.head.next,Z.right=z(ht,k+1,C),Z}return null}function j(ht,Y,C){for(var b=new a(null,null),k=b,F=ht,Z=Y;F!==null&&Z!==null;)C(F.key,Z.key)<0?(k.next=F,F=F.next):(k.next=Z,Z=Z.next),k=k.next;return F!==null?k.next=F:Z!==null&&(k.next=Z),b.next}function R(ht,Y,C,b,k){if(!(C>=b)){for(var F=ht[C+b>>1],Z=C-1,J=b+1;;){do Z++;while(k(ht[Z],F)<0);do J--;while(k(ht[J],F)>0);if(Z>=J)break;var tt=ht[Z];ht[Z]=ht[J],ht[J]=tt,tt=Y[Z],Y[Z]=Y[J],Y[J]=tt}R(ht,Y,C,J,k),R(ht,Y,J+1,b,k)}}var B=function(Y,C){return Y.ll.x<=C.x&&C.x<=Y.ur.x&&Y.ll.y<=C.y&&C.y<=Y.ur.y},D=function(Y,C){if(C.ur.x<Y.ll.x||Y.ur.x<C.ll.x||C.ur.y<Y.ll.y||Y.ur.y<C.ll.y)return null;var b=Y.ll.x<C.ll.x?C.ll.x:Y.ll.x,k=Y.ur.x<C.ur.x?Y.ur.x:C.ur.x,F=Y.ll.y<C.ll.y?C.ll.y:Y.ll.y,Z=Y.ur.y<C.ur.y?Y.ur.y:C.ur.y;return{ll:{x:b,y:F},ur:{x:k,y:Z}}},A=Number.EPSILON;A===void 0&&(A=Math.pow(2,-52));var q=A*A,H=function(Y,C){if(-A<Y&&Y<A&&-A<C&&C<A)return 0;var b=Y-C;return b*b<q*Y*C?0:Y<C?-1:1},K=function(){function ht(){r(this,ht),this.reset()}return s(ht,[{key:"reset",value:function(){this.xRounder=new et,this.yRounder=new et}},{key:"round",value:function(C,b){return{x:this.xRounder.round(C),y:this.yRounder.round(b)}}}]),ht}(),et=function(){function ht(){r(this,ht),this.tree=new P,this.round(0)}return s(ht,[{key:"round",value:function(C){var b=this.tree.add(C),k=this.tree.prev(b);if(k!==null&&H(b.key,k.key)===0)return this.tree.remove(C),k.key;var F=this.tree.next(b);return F!==null&&H(b.key,F.key)===0?(this.tree.remove(C),F.key):C}}]),ht}(),X=new K,lt=function(Y,C){return Y.x*C.y-Y.y*C.x},gt=function(Y,C){return Y.x*C.x+Y.y*C.y},Et=function(Y,C,b){var k={x:C.x-Y.x,y:C.y-Y.y},F={x:b.x-Y.x,y:b.y-Y.y},Z=lt(k,F);return H(Z,0)},Q=function(Y){return Math.sqrt(gt(Y,Y))},kt=function(Y,C,b){var k={x:C.x-Y.x,y:C.y-Y.y},F={x:b.x-Y.x,y:b.y-Y.y};return lt(F,k)/Q(F)/Q(k)},ct=function(Y,C,b){var k={x:C.x-Y.x,y:C.y-Y.y},F={x:b.x-Y.x,y:b.y-Y.y};return gt(F,k)/Q(F)/Q(k)},bt=function(Y,C,b){return C.y===0?null:{x:Y.x+C.x/C.y*(b-Y.y),y:b}},Mt=function(Y,C,b){return C.x===0?null:{x:b,y:Y.y+C.y/C.x*(b-Y.x)}},Xt=function(Y,C,b,k){if(C.x===0)return Mt(b,k,Y.x);if(k.x===0)return Mt(Y,C,b.x);if(C.y===0)return bt(b,k,Y.y);if(k.y===0)return bt(Y,C,b.y);var F=lt(C,k);if(F==0)return null;var Z={x:b.x-Y.x,y:b.y-Y.y},J=lt(Z,C)/F,tt=lt(Z,k)/F,pt=Y.x+tt*C.x,Lt=b.x+J*k.x,vt=Y.y+tt*C.y,Ft=b.y+J*k.y,Wt=(pt+Lt)/2,Jt=(vt+Ft)/2;return{x:Wt,y:Jt}},ft=function(){s(ht,null,[{key:"compare",value:function(C,b){var k=ht.comparePoints(C.point,b.point);return k!==0?k:(C.point!==b.point&&C.link(b),C.isLeft!==b.isLeft?C.isLeft?1:-1:st.compare(C.segment,b.segment))}},{key:"comparePoints",value:function(C,b){return C.x<b.x?-1:C.x>b.x?1:C.y<b.y?-1:C.y>b.y?1:0}}]);function ht(Y,C){r(this,ht),Y.events===void 0?Y.events=[this]:Y.events.push(this),this.point=Y,this.isLeft=C}return s(ht,[{key:"link",value:function(C){if(C.point===this.point)throw new Error("Tried to link already linked events");for(var b=C.point.events,k=0,F=b.length;k<F;k++){var Z=b[k];this.point.events.push(Z),Z.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var C=this.point.events.length,b=0;b<C;b++){var k=this.point.events[b];if(k.segment.consumedBy===void 0)for(var F=b+1;F<C;F++){var Z=this.point.events[F];Z.consumedBy===void 0&&k.otherSE.point.events===Z.otherSE.point.events&&k.segment.consume(Z.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var C=[],b=0,k=this.point.events.length;b<k;b++){var F=this.point.events[b];F!==this&&!F.segment.ringOut&&F.segment.isInResult()&&C.push(F)}return C}},{key:"getLeftmostComparator",value:function(C){var b=this,k=new Map,F=function(J){var tt=J.otherSE;k.set(J,{sine:kt(b.point,C.point,tt.point),cosine:ct(b.point,C.point,tt.point)})};return function(Z,J){k.has(Z)||F(Z),k.has(J)||F(J);var tt=k.get(Z),pt=tt.sine,Lt=tt.cosine,vt=k.get(J),Ft=vt.sine,Wt=vt.cosine;return pt>=0&&Ft>=0?Lt<Wt?1:Lt>Wt?-1:0:pt<0&&Ft<0?Lt<Wt?-1:Lt>Wt?1:0:Ft<pt?-1:Ft>pt?1:0}}}]),ht}(),Ct=0,st=function(){s(ht,null,[{key:"compare",value:function(C,b){var k=C.leftSE.point.x,F=b.leftSE.point.x,Z=C.rightSE.point.x,J=b.rightSE.point.x;if(J<k)return 1;if(Z<F)return-1;var tt=C.leftSE.point.y,pt=b.leftSE.point.y,Lt=C.rightSE.point.y,vt=b.rightSE.point.y;if(k<F){if(pt<tt&&pt<Lt)return 1;if(pt>tt&&pt>Lt)return-1;var Ft=C.comparePoint(b.leftSE.point);if(Ft<0)return 1;if(Ft>0)return-1;var Wt=b.comparePoint(C.rightSE.point);return Wt!==0?Wt:-1}if(k>F){if(tt<pt&&tt<vt)return-1;if(tt>pt&&tt>vt)return 1;var Jt=b.comparePoint(C.leftSE.point);if(Jt!==0)return Jt;var $t=C.comparePoint(b.rightSE.point);return $t<0?1:$t>0?-1:1}if(tt<pt)return-1;if(tt>pt)return 1;if(Z<J){var jt=b.comparePoint(C.rightSE.point);if(jt!==0)return jt}if(Z>J){var ge=C.comparePoint(b.rightSE.point);if(ge<0)return 1;if(ge>0)return-1}if(Z!==J){var pe=Lt-tt,Te=Z-k,Ce=vt-pt,he=J-F;if(pe>Te&&Ce<he)return 1;if(pe<Te&&Ce>he)return-1}return Z>J?1:Z<J||Lt<vt?-1:Lt>vt?1:C.id<b.id?-1:C.id>b.id?1:0}}]);function ht(Y,C,b,k){r(this,ht),this.id=++Ct,this.leftSE=Y,Y.segment=this,Y.otherSE=C,this.rightSE=C,C.segment=this,C.otherSE=Y,this.rings=b,this.windings=k}return s(ht,[{key:"replaceRightSE",value:function(C){this.rightSE=C,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var C=this.leftSE.point.y,b=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:C<b?C:b},ur:{x:this.rightSE.point.x,y:C>b?C:b}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(C){return C.x===this.leftSE.point.x&&C.y===this.leftSE.point.y||C.x===this.rightSE.point.x&&C.y===this.rightSE.point.y}},{key:"comparePoint",value:function(C){if(this.isAnEndpoint(C))return 0;var b=this.leftSE.point,k=this.rightSE.point,F=this.vector();if(b.x===k.x)return C.x===b.x?0:C.x<b.x?1:-1;var Z=(C.y-b.y)/F.y,J=b.x+Z*F.x;if(C.x===J)return 0;var tt=(C.x-b.x)/F.x,pt=b.y+tt*F.y;return C.y===pt?0:C.y<pt?-1:1}},{key:"getIntersection",value:function(C){var b=this.bbox(),k=C.bbox(),F=D(b,k);if(F===null)return null;var Z=this.leftSE.point,J=this.rightSE.point,tt=C.leftSE.point,pt=C.rightSE.point,Lt=B(b,tt)&&this.comparePoint(tt)===0,vt=B(k,Z)&&C.comparePoint(Z)===0,Ft=B(b,pt)&&this.comparePoint(pt)===0,Wt=B(k,J)&&C.comparePoint(J)===0;if(vt&&Lt)return Wt&&!Ft?J:!Wt&&Ft?pt:null;if(vt)return Ft&&Z.x===pt.x&&Z.y===pt.y?null:Z;if(Lt)return Wt&&J.x===tt.x&&J.y===tt.y?null:tt;if(Wt&&Ft)return null;if(Wt)return J;if(Ft)return pt;var Jt=Xt(Z,this.vector(),tt,C.vector());return Jt===null||!B(F,Jt)?null:X.round(Jt.x,Jt.y)}},{key:"split",value:function(C){var b=[],k=C.events!==void 0,F=new ft(C,!0),Z=new ft(C,!1),J=this.rightSE;this.replaceRightSE(Z),b.push(Z),b.push(F);var tt=new ht(F,J,this.rings.slice(),this.windings.slice());return ft.comparePoints(tt.leftSE.point,tt.rightSE.point)>0&&tt.swapEvents(),ft.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),k&&(F.checkForConsuming(),Z.checkForConsuming()),b}},{key:"swapEvents",value:function(){var C=this.rightSE;this.rightSE=this.leftSE,this.leftSE=C,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var b=0,k=this.windings.length;b<k;b++)this.windings[b]*=-1}},{key:"consume",value:function(C){for(var b=this,k=C;b.consumedBy;)b=b.consumedBy;for(;k.consumedBy;)k=k.consumedBy;var F=ht.compare(b,k);if(F!==0){if(F>0){var Z=b;b=k,k=Z}if(b.prev===k){var J=b;b=k,k=J}for(var tt=0,pt=k.rings.length;tt<pt;tt++){var Lt=k.rings[tt],vt=k.windings[tt],Ft=b.rings.indexOf(Lt);Ft===-1?(b.rings.push(Lt),b.windings.push(vt)):b.windings[Ft]+=vt}k.rings=null,k.windings=null,k.consumedBy=b,k.leftSE.consumedBy=b.leftSE,k.rightSE.consumedBy=b.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var C=this.prev.consumedBy||this.prev;this._beforeState=C.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var C=this.beforeState();this._afterState={rings:C.rings.slice(0),windings:C.windings.slice(0),multiPolys:[]};for(var b=this._afterState.rings,k=this._afterState.windings,F=this._afterState.multiPolys,Z=0,J=this.rings.length;Z<J;Z++){var tt=this.rings[Z],pt=this.windings[Z],Lt=b.indexOf(tt);Lt===-1?(b.push(tt),k.push(pt)):k[Lt]+=pt}for(var vt=[],Ft=[],Wt=0,Jt=b.length;Wt<Jt;Wt++)if(k[Wt]!==0){var $t=b[Wt],jt=$t.poly;if(Ft.indexOf(jt)===-1)if($t.isExterior)vt.push(jt);else{Ft.indexOf(jt)===-1&&Ft.push(jt);var ge=vt.indexOf($t.poly);ge!==-1&&vt.splice(ge,1)}}for(var pe=0,Te=vt.length;pe<Te;pe++){var Ce=vt[pe].multiPoly;F.indexOf(Ce)===-1&&F.push(Ce)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var C=this.beforeState().multiPolys,b=this.afterState().multiPolys;switch(hn.type){case"union":{var k=C.length===0,F=b.length===0;this._isInResult=k!==F;break}case"intersection":{var Z,J;C.length<b.length?(Z=C.length,J=b.length):(Z=b.length,J=C.length),this._isInResult=J===hn.numMultiPolys&&Z<J;break}case"xor":{var tt=Math.abs(C.length-b.length);this._isInResult=tt%2===1;break}case"difference":{var pt=function(vt){return vt.length===1&&vt[0].isSubject};this._isInResult=pt(C)!==pt(b);break}default:throw new Error("Unrecognized operation type found ".concat(hn.type))}return this._isInResult}}],[{key:"fromRing",value:function(C,b,k){var F,Z,J,tt=ft.comparePoints(C,b);if(tt<0)F=C,Z=b,J=1;else if(tt>0)F=b,Z=C,J=-1;else throw new Error("Tried to create degenerate segment at [".concat(C.x,", ").concat(C.y,"]"));var pt=new ft(F,!0),Lt=new ft(Z,!1);return new ht(pt,Lt,[k],[J])}}]),ht}(),Rt=function(){function ht(Y,C,b){if(r(this,ht),!Array.isArray(Y)||Y.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=C,this.isExterior=b,this.segments=[],typeof Y[0][0]!="number"||typeof Y[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var k=X.round(Y[0][0],Y[0][1]);this.bbox={ll:{x:k.x,y:k.y},ur:{x:k.x,y:k.y}};for(var F=k,Z=1,J=Y.length;Z<J;Z++){if(typeof Y[Z][0]!="number"||typeof Y[Z][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var tt=X.round(Y[Z][0],Y[Z][1]);tt.x===F.x&&tt.y===F.y||(this.segments.push(st.fromRing(F,tt,this)),tt.x<this.bbox.ll.x&&(this.bbox.ll.x=tt.x),tt.y<this.bbox.ll.y&&(this.bbox.ll.y=tt.y),tt.x>this.bbox.ur.x&&(this.bbox.ur.x=tt.x),tt.y>this.bbox.ur.y&&(this.bbox.ur.y=tt.y),F=tt)}(k.x!==F.x||k.y!==F.y)&&this.segments.push(st.fromRing(F,k,this))}return s(ht,[{key:"getSweepEvents",value:function(){for(var C=[],b=0,k=this.segments.length;b<k;b++){var F=this.segments[b];C.push(F.leftSE),C.push(F.rightSE)}return C}}]),ht}(),Ot=function(){function ht(Y,C){if(r(this,ht),!Array.isArray(Y))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Rt(Y[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var b=1,k=Y.length;b<k;b++){var F=new Rt(Y[b],this,!1);F.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=F.bbox.ll.x),F.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=F.bbox.ll.y),F.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=F.bbox.ur.x),F.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=F.bbox.ur.y),this.interiorRings.push(F)}this.multiPoly=C}return s(ht,[{key:"getSweepEvents",value:function(){for(var C=this.exteriorRing.getSweepEvents(),b=0,k=this.interiorRings.length;b<k;b++)for(var F=this.interiorRings[b].getSweepEvents(),Z=0,J=F.length;Z<J;Z++)C.push(F[Z]);return C}}]),ht}(),Qt=function(){function ht(Y,C){if(r(this,ht),!Array.isArray(Y))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof Y[0][0][0]=="number"&&(Y=[Y])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var b=0,k=Y.length;b<k;b++){var F=new Ot(Y[b],this);F.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=F.bbox.ll.x),F.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=F.bbox.ll.y),F.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=F.bbox.ur.x),F.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=F.bbox.ur.y),this.polys.push(F)}this.isSubject=C}return s(ht,[{key:"getSweepEvents",value:function(){for(var C=[],b=0,k=this.polys.length;b<k;b++)for(var F=this.polys[b].getSweepEvents(),Z=0,J=F.length;Z<J;Z++)C.push(F[Z]);return C}}]),ht}(),Tt=function(){s(ht,null,[{key:"factory",value:function(C){for(var b=[],k=0,F=C.length;k<F;k++){var Z=C[k];if(!(!Z.isInResult()||Z.ringOut)){for(var J=null,tt=Z.leftSE,pt=Z.rightSE,Lt=[tt],vt=tt.point,Ft=[];J=tt,tt=pt,Lt.push(tt),tt.point!==vt;)for(;;){var Wt=tt.getAvailableLinkedEvents();if(Wt.length===0){var Jt=Lt[0].point,$t=Lt[Lt.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(Jt.x,",")+" ".concat(Jt.y,"]. Last matching segment found ends at")+" [".concat($t.x,", ").concat($t.y,"]."))}if(Wt.length===1){pt=Wt[0].otherSE;break}for(var jt=null,ge=0,pe=Ft.length;ge<pe;ge++)if(Ft[ge].point===tt.point){jt=ge;break}if(jt!==null){var Te=Ft.splice(jt)[0],Ce=Lt.splice(Te.index);Ce.unshift(Ce[0].otherSE),b.push(new ht(Ce.reverse()));continue}Ft.push({index:Lt.length,point:tt.point});var he=tt.getLeftmostComparator(J);pt=Wt.sort(he)[0].otherSE;break}b.push(new ht(Lt))}}return b}}]);function ht(Y){r(this,ht),this.events=Y;for(var C=0,b=Y.length;C<b;C++)Y[C].segment.ringOut=this;this.poly=null}return s(ht,[{key:"getGeom",value:function(){for(var C=this.events[0].point,b=[C],k=1,F=this.events.length-1;k<F;k++){var Z=this.events[k].point,J=this.events[k+1].point;Et(Z,C,J)!==0&&(b.push(Z),C=Z)}if(b.length===1)return null;var tt=b[0],pt=b[1];Et(tt,C,pt)===0&&b.shift(),b.push(b[0]);for(var Lt=this.isExteriorRing()?1:-1,vt=this.isExteriorRing()?0:b.length-1,Ft=this.isExteriorRing()?b.length:-1,Wt=[],Jt=vt;Jt!=Ft;Jt+=Lt)Wt.push([b[Jt].x,b[Jt].y]);return Wt}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var C=this.enclosingRing();this._isExteriorRing=C?!C.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var C=this.events[0],b=1,k=this.events.length;b<k;b++){var F=this.events[b];ft.compare(C,F)>0&&(C=F)}for(var Z=C.segment.prevInResult(),J=Z?Z.prevInResult():null;;){if(!Z)return null;if(!J)return Z.ringOut;if(J.ringOut!==Z.ringOut)return J.ringOut.enclosingRing()!==Z.ringOut?Z.ringOut:Z.ringOut.enclosingRing();Z=J.prevInResult(),J=Z?Z.prevInResult():null}}}]),ht}(),ce=function(){function ht(Y){r(this,ht),this.exteriorRing=Y,Y.poly=this,this.interiorRings=[]}return s(ht,[{key:"addInterior",value:function(C){this.interiorRings.push(C),C.poly=this}},{key:"getGeom",value:function(){var C=[this.exteriorRing.getGeom()];if(C[0]===null)return null;for(var b=0,k=this.interiorRings.length;b<k;b++){var F=this.interiorRings[b].getGeom();F!==null&&C.push(F)}return C}}]),ht}(),Re=function(){function ht(Y){r(this,ht),this.rings=Y,this.polys=this._composePolys(Y)}return s(ht,[{key:"getGeom",value:function(){for(var C=[],b=0,k=this.polys.length;b<k;b++){var F=this.polys[b].getGeom();F!==null&&C.push(F)}return C}},{key:"_composePolys",value:function(C){for(var b=[],k=0,F=C.length;k<F;k++){var Z=C[k];if(!Z.poly)if(Z.isExteriorRing())b.push(new ce(Z));else{var J=Z.enclosingRing();J.poly||b.push(new ce(J)),J.poly.addInterior(Z)}}return b}}]),ht}(),Cn=function(){function ht(Y){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:st.compare;r(this,ht),this.queue=Y,this.tree=new P(C),this.segments=[]}return s(ht,[{key:"process",value:function(C){var b=C.segment,k=[];if(C.consumedBy)return C.isLeft?this.queue.remove(C.otherSE):this.tree.remove(b),k;var F=C.isLeft?this.tree.insert(b):this.tree.find(b);if(!F)throw new Error("Unable to find segment #".concat(b.id," ")+"[".concat(b.leftSE.point.x,", ").concat(b.leftSE.point.y,"] -> ")+"[".concat(b.rightSE.point.x,", ").concat(b.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var Z=F,J=F,tt=void 0,pt=void 0;tt===void 0;)Z=this.tree.prev(Z),Z===null?tt=null:Z.key.consumedBy===void 0&&(tt=Z.key);for(;pt===void 0;)J=this.tree.next(J),J===null?pt=null:J.key.consumedBy===void 0&&(pt=J.key);if(C.isLeft){var Lt=null;if(tt){var vt=tt.getIntersection(b);if(vt!==null&&(b.isAnEndpoint(vt)||(Lt=vt),!tt.isAnEndpoint(vt)))for(var Ft=this._splitSafely(tt,vt),Wt=0,Jt=Ft.length;Wt<Jt;Wt++)k.push(Ft[Wt])}var $t=null;if(pt){var jt=pt.getIntersection(b);if(jt!==null&&(b.isAnEndpoint(jt)||($t=jt),!pt.isAnEndpoint(jt)))for(var ge=this._splitSafely(pt,jt),pe=0,Te=ge.length;pe<Te;pe++)k.push(ge[pe])}if(Lt!==null||$t!==null){var Ce=null;if(Lt===null)Ce=$t;else if($t===null)Ce=Lt;else{var he=ft.comparePoints(Lt,$t);Ce=he<=0?Lt:$t}this.queue.remove(b.rightSE),k.push(b.rightSE);for(var An=b.split(Ce),we=0,St=An.length;we<St;we++)k.push(An[we])}k.length>0?(this.tree.remove(b),k.push(C)):(this.segments.push(b),b.prev=tt)}else{if(tt&&pt){var Dn=tt.getIntersection(pt);if(Dn!==null){if(!tt.isAnEndpoint(Dn))for(var Xn=this._splitSafely(tt,Dn),re=0,Yr=Xn.length;re<Yr;re++)k.push(Xn[re]);if(!pt.isAnEndpoint(Dn))for(var zn=this._splitSafely(pt,Dn),cn=0,or=zn.length;cn<or;cn++)k.push(zn[cn])}}this.tree.remove(b)}return k}},{key:"_splitSafely",value:function(C,b){this.tree.remove(C);var k=C.rightSE;this.queue.remove(k);var F=C.split(b);return F.push(k),C.consumedBy===void 0&&this.tree.insert(C),F}}]),ht}(),fe=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,ke=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Bt=function(){function ht(){r(this,ht)}return s(ht,[{key:"run",value:function(C,b,k){hn.type=C,X.reset();for(var F=[new Qt(b,!0)],Z=0,J=k.length;Z<J;Z++)F.push(new Qt(k[Z],!1));if(hn.numMultiPolys=F.length,hn.type==="difference")for(var tt=F[0],pt=1;pt<F.length;)D(F[pt].bbox,tt.bbox)!==null?pt++:F.splice(pt,1);if(hn.type==="intersection"){for(var Lt=0,vt=F.length;Lt<vt;Lt++)for(var Ft=F[Lt],Wt=Lt+1,Jt=F.length;Wt<Jt;Wt++)if(D(Ft.bbox,F[Wt].bbox)===null)return[]}for(var $t=new P(ft.compare),jt=0,ge=F.length;jt<ge;jt++)for(var pe=F[jt].getSweepEvents(),Te=0,Ce=pe.length;Te<Ce;Te++)if($t.insert(pe[Te]),$t.size>fe)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var he=new Cn($t),An=$t.size,we=$t.pop();we;){var St=we.key;if($t.size===An){var Dn=St.segment;throw new Error("Unable to pop() ".concat(St.isLeft?"left":"right"," SweepEvent ")+"[".concat(St.point.x,", ").concat(St.point.y,"] from segment #").concat(Dn.id," ")+"[".concat(Dn.leftSE.point.x,", ").concat(Dn.leftSE.point.y,"] -> ")+"[".concat(Dn.rightSE.point.x,", ").concat(Dn.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if($t.size>fe)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(he.segments.length>ke)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var Xn=he.process(St),re=0,Yr=Xn.length;re<Yr;re++){var zn=Xn[re];zn.consumedBy===void 0&&$t.insert(zn)}An=$t.size,we=$t.pop()}X.reset();var cn=Tt.factory(he.segments),or=new Re(cn);return or.getGeom()}}]),ht}(),hn=new Bt,Sn=function(Y){for(var C=arguments.length,b=new Array(C>1?C-1:0),k=1;k<C;k++)b[k-1]=arguments[k];return hn.run("union",Y,b)},Hn=function(Y){for(var C=arguments.length,b=new Array(C>1?C-1:0),k=1;k<C;k++)b[k-1]=arguments[k];return hn.run("intersection",Y,b)},Me=function(Y){for(var C=arguments.length,b=new Array(C>1?C-1:0),k=1;k<C;k++)b[k-1]=arguments[k];return hn.run("xor",Y,b)},ue=function(Y){for(var C=arguments.length,b=new Array(C>1?C-1:0),k=1;k<C;k++)b[k-1]=arguments[k];return hn.run("difference",Y,b)},Ht={union:Sn,intersection:Hn,xor:Me,difference:ue};return Ht})});var cm=se((Il,hm)=>{(function(r,n){typeof Il=="object"&&typeof hm<"u"?n(Il):typeof define=="function"&&define.amd?define(["exports"],n):n(r.jsts={})})(Il,function(r){"use strict";function n(){}function s(t){this.message=t||""}function a(t){this.message=t||""}function l(t){this.message=t||""}function c(){}function g(t){return t===null?nr:t.color}function m(t){return t===null?null:t.parent}function v(t,e){t!==null&&(t.color=e)}function x(t){return t===null?null:t.left}function P(t){return t===null?null:t.right}function T(){this.root_=null,this.size_=0}function N(){}function G(){this.array_=[],arguments[0]instanceof he&&this.addAll(arguments[0])}function z(){}function j(t){this.message=t||""}function R(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(this===void 0||this===null)throw new TypeError(this+" is not an object");var e=Object(this),o=Math.max(Math.min(e.length,9007199254740991),0)||0,u=1 in arguments&&parseInt(Number(arguments[1]),10)||0;u=u<0?Math.max(o+u,0):Math.min(u,o);var d=2 in arguments&&arguments[2]!==void 0?parseInt(Number(arguments[2]),10)||0:o;for(d=d<0?Math.max(o+arguments[2],0):Math.min(d,o);u<d;)e[u]=t,++u;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return typeof t=="number"&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var B=function(){};B.prototype.interfaces_=function(){return[]},B.prototype.getClass=function(){return B},B.prototype.equalsWithTolerance=function(t,e,o){return Math.abs(t-e)<=o};var D=function(t){function e(o){t.call(this,o),this.name="IllegalArgumentException",this.message=o,this.stack=new t().stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),A=function(){},q={MAX_VALUE:{configurable:!0}};A.isNaN=function(t){return Number.isNaN(t)},A.doubleToLongBits=function(t){return t},A.longBitsToDouble=function(t){return t},A.isInfinite=function(t){return!Number.isFinite(t)},q.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(A,q);var H=function(){},K=function(){},et=function(){},X=function t(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(arguments.length===1){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else arguments.length===2?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):arguments.length===3&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},lt={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};X.prototype.setOrdinate=function(t,e){switch(t){case X.X:this.x=e;break;case X.Y:this.y=e;break;case X.Z:this.z=e;break;default:throw new D("Invalid ordinate index: "+t)}},X.prototype.equals2D=function(){if(arguments.length===1){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(arguments.length===2){var e=arguments[0],o=arguments[1];return!!B.equalsWithTolerance(this.x,e.x,o)&&!!B.equalsWithTolerance(this.y,e.y,o)}},X.prototype.getOrdinate=function(t){switch(t){case X.X:return this.x;case X.Y:return this.y;case X.Z:return this.z}throw new D("Invalid ordinate index: "+t)},X.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||A.isNaN(this.z))&&A.isNaN(t.z)},X.prototype.equals=function(t){return t instanceof X&&this.equals2D(t)},X.prototype.equalInZ=function(t,e){return B.equalsWithTolerance(this.z,t.z,e)},X.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},X.prototype.clone=function(){},X.prototype.copy=function(){return new X(this)},X.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},X.prototype.distance3D=function(t){var e=this.x-t.x,o=this.y-t.y,u=this.z-t.z;return Math.sqrt(e*e+o*o+u*u)},X.prototype.distance=function(t){var e=this.x-t.x,o=this.y-t.y;return Math.sqrt(e*e+o*o)},X.prototype.hashCode=function(){var t=17;return t=37*t+X.hashCode(this.x),t=37*t+X.hashCode(this.y)},X.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},X.prototype.interfaces_=function(){return[H,K,n]},X.prototype.getClass=function(){return X},X.hashCode=function(){if(arguments.length===1){var t=arguments[0],e=A.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},lt.DimensionalComparator.get=function(){return gt},lt.serialVersionUID.get=function(){return 6683108902428367e3},lt.NULL_ORDINATE.get=function(){return A.NaN},lt.X.get=function(){return 0},lt.Y.get=function(){return 1},lt.Z.get=function(){return 2},Object.defineProperties(X,lt);var gt=function(t){if(this._dimensionsToTest=2,arguments.length!==0){if(arguments.length===1){var e=arguments[0];if(e!==2&&e!==3)throw new D("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}}};gt.prototype.compare=function(t,e){var o=t,u=e,d=gt.compare(o.x,u.x);if(d!==0)return d;var w=gt.compare(o.y,u.y);return w!==0?w:this._dimensionsToTest<=2?0:gt.compare(o.z,u.z)},gt.prototype.interfaces_=function(){return[et]},gt.prototype.getClass=function(){return gt},gt.compare=function(t,e){return t<e?-1:t>e?1:A.isNaN(t)?A.isNaN(e)?0:-1:A.isNaN(e)?1:0};var Et=function(){};Et.prototype.create=function(){},Et.prototype.interfaces_=function(){return[]},Et.prototype.getClass=function(){return Et};var Q=function(){},kt={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};Q.prototype.interfaces_=function(){return[]},Q.prototype.getClass=function(){return Q},Q.toLocationSymbol=function(t){switch(t){case Q.EXTERIOR:return"e";case Q.BOUNDARY:return"b";case Q.INTERIOR:return"i";case Q.NONE:return"-"}throw new D("Unknown location value: "+t)},kt.INTERIOR.get=function(){return 0},kt.BOUNDARY.get=function(){return 1},kt.EXTERIOR.get=function(){return 2},kt.NONE.get=function(){return-1},Object.defineProperties(Q,kt);var ct=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},bt=function(){},Mt={LOG_10:{configurable:!0}};bt.prototype.interfaces_=function(){return[]},bt.prototype.getClass=function(){return bt},bt.log10=function(t){var e=Math.log(t);return A.isInfinite(e)||A.isNaN(e)?e:e/bt.LOG_10},bt.min=function(t,e,o,u){var d=t;return e<d&&(d=e),o<d&&(d=o),u<d&&(d=u),d},bt.clamp=function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1],o=arguments[2];return t<e?e:t>o?o:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var u=arguments[0],d=arguments[1],w=arguments[2];return u<d?d:u>w?w:u}},bt.wrap=function(t,e){return t<0?e- -t%e:t%e},bt.max=function(){if(arguments.length===3){var t=arguments[0],e=arguments[1],o=arguments[2],u=t;return e>u&&(u=e),o>u&&(u=o),u}if(arguments.length===4){var d=arguments[0],w=arguments[1],S=arguments[2],U=arguments[3],$=d;return w>$&&($=w),S>$&&($=S),U>$&&($=U),$}},bt.average=function(t,e){return(t+e)/2},Mt.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(bt,Mt);var Xt=function(t){this.str=t};Xt.prototype.append=function(t){this.str+=t},Xt.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},Xt.prototype.toString=function(t){return this.str};var ft=function(t){this.value=t};ft.prototype.intValue=function(){return this.value},ft.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},ft.isNaN=function(t){return Number.isNaN(t)};var Ct=function(){};Ct.isWhitespace=function(t){return t<=32&&t>=0||t===127},Ct.toUpperCase=function(t){return t.toUpperCase()};var st=function t(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var o=arguments[0];this.init(o)}else if(typeof arguments[0]=="string"){var u=arguments[0];t.call(this,t.parse(u))}}else if(arguments.length===2){var d=arguments[0],w=arguments[1];this.init(d,w)}},Rt={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};st.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},st.prototype.extractSignificantDigits=function(t,e){var o=this.abs(),u=st.magnitude(o._hi),d=st.TEN.pow(u);(o=o.divide(d)).gt(st.TEN)?(o=o.divide(st.TEN),u+=1):o.lt(st.ONE)&&(o=o.multiply(st.TEN),u-=1);for(var w=u+1,S=new Xt,U=st.MAX_PRINT_DIGITS-1,$=0;$<=U;$++){t&&$===w&&S.append(".");var ut=Math.trunc(o._hi);if(ut<0)break;var _t=!1,wt=0;ut>9?(_t=!0,wt="9"):wt="0"+ut,S.append(wt),o=o.subtract(st.valueOf(ut)).multiply(st.TEN),_t&&o.selfAdd(st.TEN);var zt=!0,qt=st.magnitude(o._hi);if(qt<0&&Math.abs(qt)>=U-$&&(zt=!1),!zt)break}return e[0]=u,S.toString()},st.prototype.sqr=function(){return this.multiply(this)},st.prototype.doubleValue=function(){return this._hi+this._lo},st.prototype.subtract=function(){if(arguments[0]instanceof st){var t=arguments[0];return this.add(t.negate())}if(typeof arguments[0]=="number"){var e=arguments[0];return this.add(-e)}},st.prototype.equals=function(){if(arguments.length===1){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},st.prototype.isZero=function(){return this._hi===0&&this._lo===0},st.prototype.selfSubtract=function(){if(arguments[0]instanceof st){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if(typeof arguments[0]=="number"){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},st.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},st.prototype.min=function(t){return this.le(t)?this:t},st.prototype.selfDivide=function(){if(arguments.length===1){if(arguments[0]instanceof st){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if(typeof arguments[0]=="number"){var e=arguments[0];return this.selfDivide(e,0)}}else if(arguments.length===2){var o=arguments[0],u=arguments[1],d=null,w=null,S=null,U=null,$=null,ut=null,_t=null,wt=null;return $=this._hi/o,ut=st.SPLIT*$,d=ut-$,wt=st.SPLIT*o,d=ut-d,w=$-d,S=wt-o,_t=$*o,S=wt-S,U=o-S,wt=d*S-_t+d*U+w*S+w*U,ut=(this._hi-_t-wt+this._lo-$*u)/o,wt=$+ut,this._hi=wt,this._lo=$-wt+ut,this}},st.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},st.prototype.divide=function(){if(arguments[0]instanceof st){var t=arguments[0],e=null,o=null,u=null,d=null,w=null,S=null,U=null,$=null;return o=(w=this._hi/t._hi)-(e=(S=st.SPLIT*w)-(e=S-w)),$=e*(u=($=st.SPLIT*t._hi)-(u=$-t._hi))-(U=w*t._hi)+e*(d=t._hi-u)+o*u+o*d,S=(this._hi-U-$+this._lo-w*t._lo)/t._hi,new st($=w+S,w-$+S)}if(typeof arguments[0]=="number"){var ut=arguments[0];return A.isNaN(ut)?st.createNaN():st.copy(this).selfDivide(ut,0)}},st.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},st.prototype.pow=function(t){if(t===0)return st.valueOf(1);var e=new st(this),o=st.valueOf(1),u=Math.abs(t);if(u>1)for(;u>0;)u%2==1&&o.selfMultiply(e),(u/=2)>0&&(e=e.sqr());else o=e;return t<0?o.reciprocal():o},st.prototype.ceil=function(){if(this.isNaN())return st.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new st(t,e)},st.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},st.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},st.prototype.setValue=function(){if(arguments[0]instanceof st){var t=arguments[0];return this.init(t),this}if(typeof arguments[0]=="number"){var e=arguments[0];return this.init(e),this}},st.prototype.max=function(t){return this.ge(t)?this:t},st.prototype.sqrt=function(){if(this.isZero())return st.valueOf(0);if(this.isNegative())return st.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,o=st.valueOf(e),u=this.subtract(o.sqr())._hi*(.5*t);return o.add(u)},st.prototype.selfAdd=function(){if(arguments.length===1){if(arguments[0]instanceof st){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if(typeof arguments[0]=="number"){var e=arguments[0],o=null,u=null,d=null,w=null,S=null,U=null;return d=this._hi+e,S=d-this._hi,w=d-S,w=e-S+(this._hi-w),U=w+this._lo,o=d+U,u=U+(d-o),this._hi=o+u,this._lo=u+(o-this._hi),this}}else if(arguments.length===2){var $=arguments[0],ut=arguments[1],_t=null,wt=null,zt=null,qt=null,ne=null,oe=null,In=null;qt=this._hi+$,wt=this._lo+ut,ne=qt-(oe=qt-this._hi),zt=wt-(In=wt-this._lo);var xr=(_t=qt+(oe=(ne=$-oe+(this._hi-ne))+wt))+(oe=(zt=ut-In+(this._lo-zt))+(oe+(qt-_t))),vi=oe+(_t-xr);return this._hi=xr,this._lo=vi,this}},st.prototype.selfMultiply=function(){if(arguments.length===1){if(arguments[0]instanceof st){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if(typeof arguments[0]=="number"){var e=arguments[0];return this.selfMultiply(e,0)}}else if(arguments.length===2){var o=arguments[0],u=arguments[1],d=null,w=null,S=null,U=null,$=null,ut=null;d=($=st.SPLIT*this._hi)-this._hi,ut=st.SPLIT*o,d=$-d,w=this._hi-d,S=ut-o;var _t=($=this._hi*o)+(ut=d*(S=ut-S)-$+d*(U=o-S)+w*S+w*U+(this._hi*u+this._lo*o)),wt=ut+(d=$-_t);return this._hi=_t,this._lo=wt,this}},st.prototype.selfSqr=function(){return this.selfMultiply(this)},st.prototype.floor=function(){if(this.isNaN())return st.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new st(t,e)},st.prototype.negate=function(){return this.isNaN()?this:new st(-this._hi,-this._lo)},st.prototype.clone=function(){},st.prototype.multiply=function(){if(arguments[0]instanceof st){var t=arguments[0];return t.isNaN()?st.createNaN():st.copy(this).selfMultiply(t)}if(typeof arguments[0]=="number"){var e=arguments[0];return A.isNaN(e)?st.createNaN():st.copy(this).selfMultiply(e,0)}},st.prototype.isNaN=function(){return A.isNaN(this._hi)},st.prototype.intValue=function(){return Math.trunc(this._hi)},st.prototype.toString=function(){var t=st.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},st.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(t!==null)return t;var e=new Array(1).fill(null),o=this.extractSignificantDigits(!0,e),u=e[0]+1,d=o;if(o.charAt(0)===".")d="0"+o;else if(u<0)d="0."+st.stringOfChar("0",-u)+o;else if(o.indexOf(".")===-1){var w=u-o.length;d=o+st.stringOfChar("0",w)+".0"}return this.isNegative()?"-"+d:d},st.prototype.reciprocal=function(){var t=null,e=null,o=null,u=null,d=null,w=null,S=null,U=null;e=(d=1/this._hi)-(t=(w=st.SPLIT*d)-(t=w-d)),o=(U=st.SPLIT*this._hi)-this._hi;var $=d+(w=(1-(S=d*this._hi)-(U=t*(o=U-o)-S+t*(u=this._hi-o)+e*o+e*u)-d*this._lo)/this._hi);return new st($,d-$+w)},st.prototype.toSciNotation=function(){if(this.isZero())return st.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(t!==null)return t;var e=new Array(1).fill(null),o=this.extractSignificantDigits(!1,e),u=st.SCI_NOT_EXPONENT_CHAR+e[0];if(o.charAt(0)==="0")throw new Error("Found leading zero: "+o);var d="";o.length>1&&(d=o.substring(1));var w=o.charAt(0)+"."+d;return this.isNegative()?"-"+w+u:w+u},st.prototype.abs=function(){return this.isNaN()?st.NaN:this.isNegative()?this.negate():new st(this)},st.prototype.isPositive=function(){return(this._hi>0||this._hi===0)&&this._lo>0},st.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},st.prototype.add=function(){if(arguments[0]instanceof st){var t=arguments[0];return st.copy(this).selfAdd(t)}if(typeof arguments[0]=="number"){var e=arguments[0];return st.copy(this).selfAdd(e)}},st.prototype.init=function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof st){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(arguments.length===2){var o=arguments[0],u=arguments[1];this._hi=o,this._lo=u}},st.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},st.prototype.isNegative=function(){return(this._hi<0||this._hi===0)&&this._lo<0},st.prototype.trunc=function(){return this.isNaN()?st.NaN:this.isPositive()?this.floor():this.ceil()},st.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},st.prototype.interfaces_=function(){return[n,H,K]},st.prototype.getClass=function(){return st},st.sqr=function(t){return st.valueOf(t).selfMultiply(t)},st.valueOf=function(){if(typeof arguments[0]=="string"){var t=arguments[0];return st.parse(t)}if(typeof arguments[0]=="number"){var e=arguments[0];return new st(e)}},st.sqrt=function(t){return st.valueOf(t).sqrt()},st.parse=function(t){for(var e=0,o=t.length;Ct.isWhitespace(t.charAt(e));)e++;var u=!1;if(e<o){var d=t.charAt(e);d!=="-"&&d!=="+"||(e++,d==="-"&&(u=!0))}for(var w=new st,S=0,U=0,$=0;!(e>=o);){var ut=t.charAt(e);if(e++,Ct.isDigit(ut)){var _t=ut-"0";w.selfMultiply(st.TEN),w.selfAdd(_t),S++}else{if(ut!=="."){if(ut==="e"||ut==="E"){var wt=t.substring(e);try{$=ft.parseInt(wt)}catch(In){throw In instanceof Error?new Error("Invalid exponent "+wt+" in string "+t):In}break}throw new Error("Unexpected character '"+ut+"' at position "+e+" in string "+t)}U=S}}var zt=w,qt=S-U-$;if(qt===0)zt=w;else if(qt>0){var ne=st.TEN.pow(qt);zt=w.divide(ne)}else if(qt<0){var oe=st.TEN.pow(-qt);zt=w.multiply(oe)}return u?zt.negate():zt},st.createNaN=function(){return new st(A.NaN,A.NaN)},st.copy=function(t){return new st(t)},st.magnitude=function(t){var e=Math.abs(t),o=Math.log(e)/Math.log(10),u=Math.trunc(Math.floor(o));return 10*Math.pow(10,u)<=e&&(u+=1),u},st.stringOfChar=function(t,e){for(var o=new Xt,u=0;u<e;u++)o.append(t);return o.toString()},Rt.PI.get=function(){return new st(3.141592653589793,12246467991473532e-32)},Rt.TWO_PI.get=function(){return new st(6.283185307179586,24492935982947064e-32)},Rt.PI_2.get=function(){return new st(1.5707963267948966,6123233995736766e-32)},Rt.E.get=function(){return new st(2.718281828459045,14456468917292502e-32)},Rt.NaN.get=function(){return new st(A.NaN,A.NaN)},Rt.EPS.get=function(){return 123259516440783e-46},Rt.SPLIT.get=function(){return 134217729},Rt.MAX_PRINT_DIGITS.get=function(){return 32},Rt.TEN.get=function(){return st.valueOf(10)},Rt.ONE.get=function(){return st.valueOf(1)},Rt.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},Rt.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(st,Rt);var Ot=function(){},Qt={DP_SAFE_EPSILON:{configurable:!0}};Ot.prototype.interfaces_=function(){return[]},Ot.prototype.getClass=function(){return Ot},Ot.orientationIndex=function(t,e,o){var u=Ot.orientationIndexFilter(t,e,o);if(u<=1)return u;var d=st.valueOf(e.x).selfAdd(-t.x),w=st.valueOf(e.y).selfAdd(-t.y),S=st.valueOf(o.x).selfAdd(-e.x),U=st.valueOf(o.y).selfAdd(-e.y);return d.selfMultiply(U).selfSubtract(w.selfMultiply(S)).signum()},Ot.signOfDet2x2=function(t,e,o,u){return t.multiply(u).selfSubtract(e.multiply(o)).signum()},Ot.intersection=function(t,e,o,u){var d=st.valueOf(u.y).selfSubtract(o.y).selfMultiply(st.valueOf(e.x).selfSubtract(t.x)),w=st.valueOf(u.x).selfSubtract(o.x).selfMultiply(st.valueOf(e.y).selfSubtract(t.y)),S=d.subtract(w),U=st.valueOf(u.x).selfSubtract(o.x).selfMultiply(st.valueOf(t.y).selfSubtract(o.y)),$=st.valueOf(u.y).selfSubtract(o.y).selfMultiply(st.valueOf(t.x).selfSubtract(o.x)),ut=U.subtract($).selfDivide(S).doubleValue(),_t=st.valueOf(t.x).selfAdd(st.valueOf(e.x).selfSubtract(t.x).selfMultiply(ut)).doubleValue(),wt=st.valueOf(e.x).selfSubtract(t.x).selfMultiply(st.valueOf(t.y).selfSubtract(o.y)),zt=st.valueOf(e.y).selfSubtract(t.y).selfMultiply(st.valueOf(t.x).selfSubtract(o.x)),qt=wt.subtract(zt).selfDivide(S).doubleValue(),ne=st.valueOf(o.y).selfAdd(st.valueOf(u.y).selfSubtract(o.y).selfMultiply(qt)).doubleValue();return new X(_t,ne)},Ot.orientationIndexFilter=function(t,e,o){var u=null,d=(t.x-o.x)*(e.y-o.y),w=(t.y-o.y)*(e.x-o.x),S=d-w;if(d>0){if(w<=0)return Ot.signum(S);u=d+w}else{if(!(d<0)||w>=0)return Ot.signum(S);u=-d-w}var U=Ot.DP_SAFE_EPSILON*u;return S>=U||-S>=U?Ot.signum(S):2},Ot.signum=function(t){return t>0?1:t<0?-1:0},Qt.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(Ot,Qt);var Tt=function(){},ce={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};ce.X.get=function(){return 0},ce.Y.get=function(){return 1},ce.Z.get=function(){return 2},ce.M.get=function(){return 3},Tt.prototype.setOrdinate=function(t,e,o){},Tt.prototype.size=function(){},Tt.prototype.getOrdinate=function(t,e){},Tt.prototype.getCoordinate=function(){},Tt.prototype.getCoordinateCopy=function(t){},Tt.prototype.getDimension=function(){},Tt.prototype.getX=function(t){},Tt.prototype.clone=function(){},Tt.prototype.expandEnvelope=function(t){},Tt.prototype.copy=function(){},Tt.prototype.getY=function(t){},Tt.prototype.toCoordinateArray=function(){},Tt.prototype.interfaces_=function(){return[K]},Tt.prototype.getClass=function(){return Tt},Object.defineProperties(Tt,ce);var Re=function(){},Cn=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Re),fe=function(){};fe.arraycopy=function(t,e,o,u,d){for(var w=0,S=e;S<e+d;S++)o[u+w]=t[S],w++},fe.getProperty=function(t){return{"line.separator":`
`}[t]};var ke=function t(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var o=arguments[0],u=arguments[1];this.x=o,this.y=u,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var d=arguments[0],w=arguments[1];this.x=d.y*w.w-w.y*d.w,this.y=w.x*d.w-d.x*w.w,this.w=d.x*w.y-w.x*d.y}else if(arguments[0]instanceof X&&arguments[1]instanceof X){var S=arguments[0],U=arguments[1];this.x=S.y-U.y,this.y=U.x-S.x,this.w=S.x*U.y-U.x*S.y}}else if(arguments.length===3){var $=arguments[0],ut=arguments[1],_t=arguments[2];this.x=$,this.y=ut,this.w=_t}else if(arguments.length===4){var wt=arguments[0],zt=arguments[1],qt=arguments[2],ne=arguments[3],oe=wt.y-zt.y,In=zt.x-wt.x,xr=wt.x*zt.y-zt.x*wt.y,vi=qt.y-ne.y,Ho=ne.x-qt.x,Es=qt.x*ne.y-ne.x*qt.y;this.x=In*Es-Ho*xr,this.y=vi*xr-oe*Es,this.w=oe*Ho-vi*In}};ke.prototype.getY=function(){var t=this.y/this.w;if(A.isNaN(t)||A.isInfinite(t))throw new Cn;return t},ke.prototype.getX=function(){var t=this.x/this.w;if(A.isNaN(t)||A.isInfinite(t))throw new Cn;return t},ke.prototype.getCoordinate=function(){var t=new X;return t.x=this.getX(),t.y=this.getY(),t},ke.prototype.interfaces_=function(){return[]},ke.prototype.getClass=function(){return ke},ke.intersection=function(t,e,o,u){var d=t.y-e.y,w=e.x-t.x,S=t.x*e.y-e.x*t.y,U=o.y-u.y,$=u.x-o.x,ut=o.x*u.y-u.x*o.y,_t=d*$-U*w,wt=(w*ut-$*S)/_t,zt=(U*S-d*ut)/_t;if(A.isNaN(wt)||A.isInfinite(wt)||A.isNaN(zt)||A.isInfinite(zt))throw new Cn;return new X(wt,zt)};var Bt=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof X){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var o=arguments[0];this.init(o)}}else if(arguments.length===2){var u=arguments[0],d=arguments[1];this.init(u.x,d.x,u.y,d.y)}else if(arguments.length===4){var w=arguments[0],S=arguments[1],U=arguments[2],$=arguments[3];this.init(w,S,U,$)}},hn={serialVersionUID:{configurable:!0}};Bt.prototype.getArea=function(){return this.getWidth()*this.getHeight()},Bt.prototype.equals=function(t){if(!(t instanceof Bt))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},Bt.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new Bt;var e=this._minx>t._minx?this._minx:t._minx,o=this._miny>t._miny?this._miny:t._miny,u=this._maxx<t._maxx?this._maxx:t._maxx,d=this._maxy<t._maxy?this._maxy:t._maxy;return new Bt(e,u,o,d)},Bt.prototype.isNull=function(){return this._maxx<this._minx},Bt.prototype.getMaxX=function(){return this._maxx},Bt.prototype.covers=function(){if(arguments.length===1){if(arguments[0]instanceof X){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof Bt){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(arguments.length===2){var o=arguments[0],u=arguments[1];return!this.isNull()&&o>=this._minx&&o<=this._maxx&&u>=this._miny&&u<=this._maxy}},Bt.prototype.intersects=function(){if(arguments.length===1){if(arguments[0]instanceof Bt){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof X){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(arguments.length===2){var o=arguments[0],u=arguments[1];return!this.isNull()&&!(o>this._maxx||o<this._minx||u>this._maxy||u<this._miny)}},Bt.prototype.getMinY=function(){return this._miny},Bt.prototype.getMinX=function(){return this._minx},Bt.prototype.expandToInclude=function(){if(arguments.length===1){if(arguments[0]instanceof X){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof Bt){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(arguments.length===2){var o=arguments[0],u=arguments[1];this.isNull()?(this._minx=o,this._maxx=o,this._miny=u,this._maxy=u):(o<this._minx&&(this._minx=o),o>this._maxx&&(this._maxx=o),u<this._miny&&(this._miny=u),u>this._maxy&&(this._maxy=u))}},Bt.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},Bt.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},Bt.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},Bt.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},Bt.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},Bt.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},Bt.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},Bt.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},Bt.prototype.expandBy=function(){if(arguments.length===1){var t=arguments[0];this.expandBy(t,t)}else if(arguments.length===2){var e=arguments[0],o=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=o,this._maxy+=o,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},Bt.prototype.contains=function(){if(arguments.length===1){if(arguments[0]instanceof Bt){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof X){var e=arguments[0];return this.covers(e)}}else if(arguments.length===2){var o=arguments[0],u=arguments[1];return this.covers(o,u)}},Bt.prototype.centre=function(){return this.isNull()?null:new X((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},Bt.prototype.init=function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof X){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof Bt){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(arguments.length===2){var o=arguments[0],u=arguments[1];this.init(o.x,u.x,o.y,u.y)}else if(arguments.length===4){var d=arguments[0],w=arguments[1],S=arguments[2],U=arguments[3];d<w?(this._minx=d,this._maxx=w):(this._minx=w,this._maxx=d),S<U?(this._miny=S,this._maxy=U):(this._miny=U,this._maxy=S)}},Bt.prototype.getMaxY=function(){return this._maxy},Bt.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var o=0;return this._maxy<t._miny?o=t._miny-this._maxy:this._miny>t._maxy&&(o=this._miny-t._maxy),e===0?o:o===0?e:Math.sqrt(e*e+o*o)},Bt.prototype.hashCode=function(){var t=17;return t=37*t+X.hashCode(this._minx),t=37*t+X.hashCode(this._maxx),t=37*t+X.hashCode(this._miny),t=37*t+X.hashCode(this._maxy)},Bt.prototype.interfaces_=function(){return[H,n]},Bt.prototype.getClass=function(){return Bt},Bt.intersects=function(){if(arguments.length===3){var t=arguments[0],e=arguments[1],o=arguments[2];return o.x>=(t.x<e.x?t.x:e.x)&&o.x<=(t.x>e.x?t.x:e.x)&&o.y>=(t.y<e.y?t.y:e.y)&&o.y<=(t.y>e.y?t.y:e.y)}if(arguments.length===4){var u=arguments[0],d=arguments[1],w=arguments[2],S=arguments[3],U=Math.min(w.x,S.x),$=Math.max(w.x,S.x),ut=Math.min(u.x,d.x),_t=Math.max(u.x,d.x);return!(ut>$)&&!(_t<U)&&(U=Math.min(w.y,S.y),$=Math.max(w.y,S.y),ut=Math.min(u.y,d.y),_t=Math.max(u.y,d.y),!(ut>$)&&!(_t<U))}},hn.serialVersionUID.get=function(){return 5873921885273102e3},Object.defineProperties(Bt,hn);var Sn={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Hn=function(t){this.geometryFactory=t||new Kt};Hn.prototype.read=function(t){var e,o,u;t=t.replace(/[\n\r]/g," ");var d=Sn.typeStr.exec(t);if(t.search("EMPTY")!==-1&&((d=Sn.emptyTypeStr.exec(t))[2]=void 0),d&&(o=d[1].toLowerCase(),u=d[2],ue[o]&&(e=ue[o].apply(this,[u]))),e===void 0)throw new Error("Could not parse WKT "+t);return e},Hn.prototype.write=function(t){return this.extractGeometry(t)},Hn.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!Me[e])return null;var o=e.toUpperCase();return t.isEmpty()?o+" EMPTY":o+"("+Me[e].apply(this,[t])+")"};var Me={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Me.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],o=0,u=t._geometries.length;o<u;++o)e.push("("+Me.point.apply(this,[t._geometries[o]])+")");return e.join(",")},linestring:function(t){for(var e=[],o=0,u=t._points._coordinates.length;o<u;++o)e.push(Me.coordinate.apply(this,[t._points._coordinates[o]]));return e.join(",")},linearring:function(t){for(var e=[],o=0,u=t._points._coordinates.length;o<u;++o)e.push(Me.coordinate.apply(this,[t._points._coordinates[o]]));return e.join(",")},multilinestring:function(t){for(var e=[],o=0,u=t._geometries.length;o<u;++o)e.push("("+Me.linestring.apply(this,[t._geometries[o]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+Me.linestring.apply(this,[t._shell])+")");for(var o=0,u=t._holes.length;o<u;++o)e.push("("+Me.linestring.apply(this,[t._holes[o]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],o=0,u=t._geometries.length;o<u;++o)e.push("("+Me.polygon.apply(this,[t._geometries[o]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],o=0,u=t._geometries.length;o<u;++o)e.push(this.extractGeometry(t._geometries[o]));return e.join(",")}},ue={point:function(t){if(t===void 0)return this.geometryFactory.createPoint();var e=t.trim().split(Sn.spaces);return this.geometryFactory.createPoint(new X(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(t===void 0)return this.geometryFactory.createMultiPoint();for(var e,o=t.trim().split(","),u=[],d=0,w=o.length;d<w;++d)e=o[d].replace(Sn.trimParens,"$1"),u.push(ue.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(u)},linestring:function(t){if(t===void 0)return this.geometryFactory.createLineString();for(var e,o=t.trim().split(","),u=[],d=0,w=o.length;d<w;++d)e=o[d].trim().split(Sn.spaces),u.push(new X(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(u)},linearring:function(t){if(t===void 0)return this.geometryFactory.createLinearRing();for(var e,o=t.trim().split(","),u=[],d=0,w=o.length;d<w;++d)e=o[d].trim().split(Sn.spaces),u.push(new X(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(u)},multilinestring:function(t){if(t===void 0)return this.geometryFactory.createMultiLineString();for(var e,o=t.trim().split(Sn.parenComma),u=[],d=0,w=o.length;d<w;++d)e=o[d].replace(Sn.trimParens,"$1"),u.push(ue.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(u)},polygon:function(t){if(t===void 0)return this.geometryFactory.createPolygon();for(var e,o,u,d,w=t.trim().split(Sn.parenComma),S=[],U=0,$=w.length;U<$;++U)e=w[U].replace(Sn.trimParens,"$1"),o=ue.linestring.apply(this,[e]),u=this.geometryFactory.createLinearRing(o._points),U===0?d=u:S.push(u);return this.geometryFactory.createPolygon(d,S)},multipolygon:function(t){if(t===void 0)return this.geometryFactory.createMultiPolygon();for(var e,o=t.trim().split(Sn.doubleParenComma),u=[],d=0,w=o.length;d<w;++d)e=o[d].replace(Sn.trimParens,"$1"),u.push(ue.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(u)},geometrycollection:function(t){if(t===void 0)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),o=[],u=0,d=e.length;u<d;++u)o.push(this.read(e[u]));return this.geometryFactory.createGeometryCollection(o)}},Ht=function(t){this.parser=new Hn(t)};Ht.prototype.write=function(t){return this.parser.write(t)},Ht.toLineString=function(t,e){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var ht=function(t){function e(o){t.call(this,o),this.name="RuntimeException",this.message=o,this.stack=new t().stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),Y=function(t){function e(){if(t.call(this),arguments.length===0)t.call(this);else if(arguments.length===1){var o=arguments[0];t.call(this,o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ht),C=function(){};C.prototype.interfaces_=function(){return[]},C.prototype.getClass=function(){return C},C.shouldNeverReachHere=function(){if(arguments.length===0)C.shouldNeverReachHere(null);else if(arguments.length===1){var t=arguments[0];throw new Y("Should never reach here"+(t!==null?": "+t:""))}},C.isTrue=function(){var t,e;if(arguments.length===1)t=arguments[0],C.isTrue(t,null);else if(arguments.length===2&&(t=arguments[0],e=arguments[1],!t))throw e===null?new Y:new Y(e)},C.equals=function(){var t,e,o;if(arguments.length===2)t=arguments[0],e=arguments[1],C.equals(t,e,null);else if(arguments.length===3&&(t=arguments[0],e=arguments[1],o=arguments[2],!e.equals(t)))throw new Y("Expected "+t+" but encountered "+e+(o!==null?": "+o:""))};var b=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new X,this._intPt[1]=new X,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},k={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};b.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},b.prototype.getTopologySummary=function(){var t=new Xt;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},b.prototype.computeIntersection=function(t,e,o,u){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=o,this._inputLines[1][1]=u,this._result=this.computeIntersect(t,e,o,u)},b.prototype.getIntersectionNum=function(){return this._result},b.prototype.computeIntLineIndex=function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},b.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},b.prototype.setPrecisionModel=function(t){this._precisionModel=t},b.prototype.isInteriorIntersection=function(){if(arguments.length===0)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(arguments.length===1){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},b.prototype.getIntersection=function(t){return this._intPt[t]},b.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},b.prototype.hasIntersection=function(){return this._result!==b.NO_INTERSECTION},b.prototype.getEdgeDistance=function(t,e){return b.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},b.prototype.isCollinear=function(){return this._result===b.COLLINEAR_INTERSECTION},b.prototype.toString=function(){return Ht.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Ht.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},b.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},b.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},b.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},b.prototype.interfaces_=function(){return[]},b.prototype.getClass=function(){return b},b.computeEdgeDistance=function(t,e,o){var u=Math.abs(o.x-e.x),d=Math.abs(o.y-e.y),w=-1;if(t.equals(e))w=0;else if(t.equals(o))w=u>d?u:d;else{var S=Math.abs(t.x-e.x),U=Math.abs(t.y-e.y);(w=u>d?S:U)!==0||t.equals(e)||(w=Math.max(S,U))}return C.isTrue(!(w===0&&!t.equals(e)),"Bad distance calculation"),w},b.nonRobustComputeEdgeDistance=function(t,e,o){var u=t.x-e.x,d=t.y-e.y,w=Math.sqrt(u*u+d*d);return C.isTrue(!(w===0&&!t.equals(e)),"Invalid distance calculation"),w},k.DONT_INTERSECT.get=function(){return 0},k.DO_INTERSECT.get=function(){return 1},k.COLLINEAR.get=function(){return 2},k.NO_INTERSECTION.get=function(){return 0},k.POINT_INTERSECTION.get=function(){return 1},k.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(b,k);var F=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(o){var u=new Bt(this._inputLines[0][0],this._inputLines[0][1]),d=new Bt(this._inputLines[1][0],this._inputLines[1][1]);return u.contains(o)&&d.contains(o)},e.prototype.computeIntersection=function(){if(arguments.length!==3)return t.prototype.computeIntersection.apply(this,arguments);var o=arguments[0],u=arguments[1],d=arguments[2];if(this._isProper=!1,Bt.intersects(u,d,o)&&tt.orientationIndex(u,d,o)===0&&tt.orientationIndex(d,u,o)===0)return this._isProper=!0,(o.equals(u)||o.equals(d))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(o,u,d,w,S){S.x=this.smallestInAbsValue(o.x,u.x,d.x,w.x),S.y=this.smallestInAbsValue(o.y,u.y,d.y,w.y),o.x-=S.x,o.y-=S.y,u.x-=S.x,u.y-=S.y,d.x-=S.x,d.y-=S.y,w.x-=S.x,w.y-=S.y},e.prototype.safeHCoordinateIntersection=function(o,u,d,w){var S=null;try{S=ke.intersection(o,u,d,w)}catch(U){if(!(U instanceof Cn))throw U;S=e.nearestEndpoint(o,u,d,w)}return S},e.prototype.intersection=function(o,u,d,w){var S=this.intersectionWithNormalization(o,u,d,w);return this.isInSegmentEnvelopes(S)||(S=new X(e.nearestEndpoint(o,u,d,w))),this._precisionModel!==null&&this._precisionModel.makePrecise(S),S},e.prototype.smallestInAbsValue=function(o,u,d,w){var S=o,U=Math.abs(S);return Math.abs(u)<U&&(S=u,U=Math.abs(u)),Math.abs(d)<U&&(S=d,U=Math.abs(d)),Math.abs(w)<U&&(S=w),S},e.prototype.checkDD=function(o,u,d,w,S){var U=Ot.intersection(o,u,d,w),$=this.isInSegmentEnvelopes(U);fe.out.println("DD in env = "+$+"  --------------------- "+U),S.distance(U)>1e-4&&fe.out.println("Distance = "+S.distance(U))},e.prototype.intersectionWithNormalization=function(o,u,d,w){var S=new X(o),U=new X(u),$=new X(d),ut=new X(w),_t=new X;this.normalizeToEnvCentre(S,U,$,ut,_t);var wt=this.safeHCoordinateIntersection(S,U,$,ut);return wt.x+=_t.x,wt.y+=_t.y,wt},e.prototype.computeCollinearIntersection=function(o,u,d,w){var S=Bt.intersects(o,u,d),U=Bt.intersects(o,u,w),$=Bt.intersects(d,w,o),ut=Bt.intersects(d,w,u);return S&&U?(this._intPt[0]=d,this._intPt[1]=w,t.COLLINEAR_INTERSECTION):$&&ut?(this._intPt[0]=o,this._intPt[1]=u,t.COLLINEAR_INTERSECTION):S&&$?(this._intPt[0]=d,this._intPt[1]=o,!d.equals(o)||U||ut?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):S&&ut?(this._intPt[0]=d,this._intPt[1]=u,!d.equals(u)||U||$?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):U&&$?(this._intPt[0]=w,this._intPt[1]=o,!w.equals(o)||S||ut?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):U&&ut?(this._intPt[0]=w,this._intPt[1]=u,!w.equals(u)||S||$?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(o,u,d,w,S){var U=o.x<u.x?o.x:u.x,$=o.y<u.y?o.y:u.y,ut=o.x>u.x?o.x:u.x,_t=o.y>u.y?o.y:u.y,wt=d.x<w.x?d.x:w.x,zt=d.y<w.y?d.y:w.y,qt=d.x>w.x?d.x:w.x,ne=d.y>w.y?d.y:w.y,oe=((U>wt?U:wt)+(ut<qt?ut:qt))/2,In=(($>zt?$:zt)+(_t<ne?_t:ne))/2;S.x=oe,S.y=In,o.x-=S.x,o.y-=S.y,u.x-=S.x,u.y-=S.y,d.x-=S.x,d.y-=S.y,w.x-=S.x,w.y-=S.y},e.prototype.computeIntersect=function(o,u,d,w){if(this._isProper=!1,!Bt.intersects(o,u,d,w))return t.NO_INTERSECTION;var S=tt.orientationIndex(o,u,d),U=tt.orientationIndex(o,u,w);if(S>0&&U>0||S<0&&U<0)return t.NO_INTERSECTION;var $=tt.orientationIndex(d,w,o),ut=tt.orientationIndex(d,w,u);return $>0&&ut>0||$<0&&ut<0?t.NO_INTERSECTION:S===0&&U===0&&$===0&&ut===0?this.computeCollinearIntersection(o,u,d,w):(S===0||U===0||$===0||ut===0?(this._isProper=!1,o.equals2D(d)||o.equals2D(w)?this._intPt[0]=o:u.equals2D(d)||u.equals2D(w)?this._intPt[0]=u:S===0?this._intPt[0]=new X(d):U===0?this._intPt[0]=new X(w):$===0?this._intPt[0]=new X(o):ut===0&&(this._intPt[0]=new X(u))):(this._isProper=!0,this._intPt[0]=this.intersection(o,u,d,w)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(o,u,d,w){var S=o,U=tt.distancePointLine(o,d,w),$=tt.distancePointLine(u,d,w);return $<U&&(U=$,S=u),($=tt.distancePointLine(d,o,u))<U&&(U=$,S=d),($=tt.distancePointLine(w,o,u))<U&&(U=$,S=w),S},e}(b),Z=function(){};Z.prototype.interfaces_=function(){return[]},Z.prototype.getClass=function(){return Z},Z.orientationIndex=function(t,e,o){var u=e.x-t.x,d=e.y-t.y,w=o.x-e.x,S=o.y-e.y;return Z.signOfDet2x2(u,d,w,S)},Z.signOfDet2x2=function(t,e,o,u){var d=null,w=null,S=null;if(d=1,t===0||u===0)return e===0||o===0?0:e>0?o>0?-d:d:o>0?d:-d;if(e===0||o===0)return u>0?t>0?d:-d:t>0?-d:d;if(e>0?u>0?e<=u||(d=-d,w=t,t=o,o=w,w=e,e=u,u=w):e<=-u?(d=-d,o=-o,u=-u):(w=t,t=-o,o=w,w=e,e=-u,u=w):u>0?-e<=u?(d=-d,t=-t,e=-e):(w=-t,t=o,o=w,w=-e,e=u,u=w):e>=u?(t=-t,e=-e,o=-o,u=-u):(d=-d,w=-t,t=-o,o=w,w=-e,e=-u,u=w),t>0){if(!(o>0)||!(t<=o))return d}else{if(o>0||!(t>=o))return-d;d=-d,t=-t,o=-o}for(;;){if(S=Math.floor(o/t),o-=S*t,(u-=S*e)<0)return-d;if(u>e)return d;if(t>o+o){if(e<u+u)return d}else{if(e>u+u)return-d;o=t-o,u=e-u,d=-d}if(u===0)return o===0?0:-d;if(o===0||(S=Math.floor(t/o),t-=S*o,(e-=S*u)<0))return d;if(e>u)return-d;if(o>t+t){if(u<e+e)return-d}else{if(u>e+e)return d;t=o-t,e=u-e,d=-d}if(e===0)return t===0?0:d;if(t===0)return-d}};var J=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};J.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var o=t.x,u=e.x;return o>u&&(o=e.x,u=t.x),this._p.x>=o&&this._p.x<=u&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var d=t.x-this._p.x,w=t.y-this._p.y,S=e.x-this._p.x,U=e.y-this._p.y,$=Z.signOfDet2x2(d,w,S,U);if($===0)return this._isPointOnSegment=!0,null;U<w&&($=-$),$>0&&this._crossingCount++}},J.prototype.isPointInPolygon=function(){return this.getLocation()!==Q.EXTERIOR},J.prototype.getLocation=function(){return this._isPointOnSegment?Q.BOUNDARY:this._crossingCount%2==1?Q.INTERIOR:Q.EXTERIOR},J.prototype.isOnSegment=function(){return this._isPointOnSegment},J.prototype.interfaces_=function(){return[]},J.prototype.getClass=function(){return J},J.locatePointInRing=function(){if(arguments[0]instanceof X&&ct(arguments[1],Tt)){for(var t=arguments[0],e=arguments[1],o=new J(t),u=new X,d=new X,w=1;w<e.size();w++)if(e.getCoordinate(w,u),e.getCoordinate(w-1,d),o.countSegment(u,d),o.isOnSegment())return o.getLocation();return o.getLocation()}if(arguments[0]instanceof X&&arguments[1]instanceof Array){for(var S=arguments[0],U=arguments[1],$=new J(S),ut=1;ut<U.length;ut++){var _t=U[ut],wt=U[ut-1];if($.countSegment(_t,wt),$.isOnSegment())return $.getLocation()}return $.getLocation()}};var tt=function(){},pt={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};tt.prototype.interfaces_=function(){return[]},tt.prototype.getClass=function(){return tt},tt.orientationIndex=function(t,e,o){return Ot.orientationIndex(t,e,o)},tt.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,o=t[0].x,u=1;u<t.length-1;u++){var d=t[u].x-o,w=t[u+1].y;e+=d*(t[u-1].y-w)}return e/2}if(ct(arguments[0],Tt)){var S=arguments[0],U=S.size();if(U<3)return 0;var $=new X,ut=new X,_t=new X;S.getCoordinate(0,ut),S.getCoordinate(1,_t);var wt=ut.x;_t.x-=wt;for(var zt=0,qt=1;qt<U-1;qt++)$.y=ut.y,ut.x=_t.x,ut.y=_t.y,S.getCoordinate(qt+1,_t),_t.x-=wt,zt+=ut.x*($.y-_t.y);return zt/2}},tt.distanceLineLine=function(t,e,o,u){if(t.equals(e))return tt.distancePointLine(t,o,u);if(o.equals(u))return tt.distancePointLine(u,t,e);var d=!1;if(Bt.intersects(t,e,o,u)){var w=(e.x-t.x)*(u.y-o.y)-(e.y-t.y)*(u.x-o.x);if(w===0)d=!0;else{var S=(t.y-o.y)*(u.x-o.x)-(t.x-o.x)*(u.y-o.y),U=((t.y-o.y)*(e.x-t.x)-(t.x-o.x)*(e.y-t.y))/w,$=S/w;($<0||$>1||U<0||U>1)&&(d=!0)}}else d=!0;return d?bt.min(tt.distancePointLine(t,o,u),tt.distancePointLine(e,o,u),tt.distancePointLine(o,t,e),tt.distancePointLine(u,t,e)):0},tt.isPointInRing=function(t,e){return tt.locatePointInRing(t,e)!==Q.EXTERIOR},tt.computeLength=function(t){var e=t.size();if(e<=1)return 0;var o=0,u=new X;t.getCoordinate(0,u);for(var d=u.x,w=u.y,S=1;S<e;S++){t.getCoordinate(S,u);var U=u.x,$=u.y,ut=U-d,_t=$-w;o+=Math.sqrt(ut*ut+_t*_t),d=U,w=$}return o},tt.isCCW=function(t){var e=t.length-1;if(e<3)throw new D("Ring has fewer than 4 points, so orientation cannot be determined");for(var o=t[0],u=0,d=1;d<=e;d++){var w=t[d];w.y>o.y&&(o=w,u=d)}var S=u;do(S-=1)<0&&(S=e);while(t[S].equals2D(o)&&S!==u);var U=u;do U=(U+1)%e;while(t[U].equals2D(o)&&U!==u);var $=t[S],ut=t[U];if($.equals2D(o)||ut.equals2D(o)||$.equals2D(ut))return!1;var _t=tt.computeOrientation($,o,ut),wt=!1;return wt=_t===0?$.x>ut.x:_t>0,wt},tt.locatePointInRing=function(t,e){return J.locatePointInRing(t,e)},tt.distancePointLinePerpendicular=function(t,e,o){var u=(o.x-e.x)*(o.x-e.x)+(o.y-e.y)*(o.y-e.y),d=((e.y-t.y)*(o.x-e.x)-(e.x-t.x)*(o.y-e.y))/u;return Math.abs(d)*Math.sqrt(u)},tt.computeOrientation=function(t,e,o){return tt.orientationIndex(t,e,o)},tt.distancePointLine=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];if(e.length===0)throw new D("Line array must contain at least one vertex");for(var o=t.distance(e[0]),u=0;u<e.length-1;u++){var d=tt.distancePointLine(t,e[u],e[u+1]);d<o&&(o=d)}return o}if(arguments.length===3){var w=arguments[0],S=arguments[1],U=arguments[2];if(S.x===U.x&&S.y===U.y)return w.distance(S);var $=(U.x-S.x)*(U.x-S.x)+(U.y-S.y)*(U.y-S.y),ut=((w.x-S.x)*(U.x-S.x)+(w.y-S.y)*(U.y-S.y))/$;if(ut<=0)return w.distance(S);if(ut>=1)return w.distance(U);var _t=((S.y-w.y)*(U.x-S.x)-(S.x-w.x)*(U.y-S.y))/$;return Math.abs(_t)*Math.sqrt($)}},tt.isOnLine=function(t,e){for(var o=new F,u=1;u<e.length;u++){var d=e[u-1],w=e[u];if(o.computeIntersection(t,d,w),o.hasIntersection())return!0}return!1},pt.CLOCKWISE.get=function(){return-1},pt.RIGHT.get=function(){return tt.CLOCKWISE},pt.COUNTERCLOCKWISE.get=function(){return 1},pt.LEFT.get=function(){return tt.COUNTERCLOCKWISE},pt.COLLINEAR.get=function(){return 0},pt.STRAIGHT.get=function(){return tt.COLLINEAR},Object.defineProperties(tt,pt);var Lt=function(){};Lt.prototype.filter=function(t){},Lt.prototype.interfaces_=function(){return[]},Lt.prototype.getClass=function(){return Lt};var vt=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},Ft={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};vt.prototype.isGeometryCollection=function(){return this.getSortIndex()===vt.SORTINDEX_GEOMETRYCOLLECTION},vt.prototype.getFactory=function(){return this._factory},vt.prototype.getGeometryN=function(t){return this},vt.prototype.getArea=function(){return 0},vt.prototype.isRectangle=function(){return!1},vt.prototype.equals=function(){if(arguments[0]instanceof vt){var t=arguments[0];return t!==null&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof vt))return!1;var o=e;return this.equalsExact(o)}},vt.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},vt.prototype.geometryChanged=function(){this.apply(vt.geometryChangedFilter)},vt.prototype.geometryChangedAction=function(){this._envelope=null},vt.prototype.equalsNorm=function(t){return t!==null&&this.norm().equalsExact(t.norm())},vt.prototype.getLength=function(){return 0},vt.prototype.getNumGeometries=function(){return 1},vt.prototype.compareTo=function(){if(arguments.length===1){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(arguments.length===2){var o=arguments[0],u=arguments[1];return this.getSortIndex()!==o.getSortIndex()?this.getSortIndex()-o.getSortIndex():this.isEmpty()&&o.isEmpty()?0:this.isEmpty()?-1:o.isEmpty()?1:this.compareToSameClass(o,u)}},vt.prototype.getUserData=function(){return this._userData},vt.prototype.getSRID=function(){return this._SRID},vt.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},vt.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===vt.SORTINDEX_GEOMETRYCOLLECTION)throw new D("This method does not support GeometryCollection arguments")},vt.prototype.equal=function(t,e,o){return o===0?t.equals(e):t.distance(e)<=o},vt.prototype.norm=function(){var t=this.copy();return t.normalize(),t},vt.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},vt.prototype.getEnvelopeInternal=function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new Bt(this._envelope)},vt.prototype.setSRID=function(t){this._SRID=t},vt.prototype.setUserData=function(t){this._userData=t},vt.prototype.compare=function(t,e){for(var o=t.iterator(),u=e.iterator();o.hasNext()&&u.hasNext();){var d=o.next(),w=u.next(),S=d.compareTo(w);if(S!==0)return S}return o.hasNext()?1:u.hasNext()?-1:0},vt.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},vt.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===vt.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===vt.SORTINDEX_MULTIPOINT||this.getSortIndex()===vt.SORTINDEX_MULTILINESTRING||this.getSortIndex()===vt.SORTINDEX_MULTIPOLYGON},vt.prototype.interfaces_=function(){return[K,H,n]},vt.prototype.getClass=function(){return vt},vt.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},vt.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(t[e]===null)return!0;return!1},Ft.serialVersionUID.get=function(){return 8763622679187377e3},Ft.SORTINDEX_POINT.get=function(){return 0},Ft.SORTINDEX_MULTIPOINT.get=function(){return 1},Ft.SORTINDEX_LINESTRING.get=function(){return 2},Ft.SORTINDEX_LINEARRING.get=function(){return 3},Ft.SORTINDEX_MULTILINESTRING.get=function(){return 4},Ft.SORTINDEX_POLYGON.get=function(){return 5},Ft.SORTINDEX_MULTIPOLYGON.get=function(){return 6},Ft.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},Ft.geometryChangedFilter.get=function(){return Wt},Object.defineProperties(vt,Ft);var Wt=function(){};Wt.interfaces_=function(){return[Lt]},Wt.filter=function(t){t.geometryChangedAction()};var Jt=function(){};Jt.prototype.filter=function(t){},Jt.prototype.interfaces_=function(){return[]},Jt.prototype.getClass=function(){return Jt};var $t=function(){},jt={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};$t.prototype.isInBoundary=function(t){},$t.prototype.interfaces_=function(){return[]},$t.prototype.getClass=function(){return $t},jt.Mod2BoundaryNodeRule.get=function(){return ge},jt.EndPointBoundaryNodeRule.get=function(){return pe},jt.MultiValentEndPointBoundaryNodeRule.get=function(){return Te},jt.MonoValentEndPointBoundaryNodeRule.get=function(){return Ce},jt.MOD2_BOUNDARY_RULE.get=function(){return new ge},jt.ENDPOINT_BOUNDARY_RULE.get=function(){return new pe},jt.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Te},jt.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Ce},jt.OGC_SFS_BOUNDARY_RULE.get=function(){return $t.MOD2_BOUNDARY_RULE},Object.defineProperties($t,jt);var ge=function(){};ge.prototype.isInBoundary=function(t){return t%2==1},ge.prototype.interfaces_=function(){return[$t]},ge.prototype.getClass=function(){return ge};var pe=function(){};pe.prototype.isInBoundary=function(t){return t>0},pe.prototype.interfaces_=function(){return[$t]},pe.prototype.getClass=function(){return pe};var Te=function(){};Te.prototype.isInBoundary=function(t){return t>1},Te.prototype.interfaces_=function(){return[$t]},Te.prototype.getClass=function(){return Te};var Ce=function(){};Ce.prototype.isInBoundary=function(t){return t===1},Ce.prototype.interfaces_=function(){return[$t]},Ce.prototype.getClass=function(){return Ce};var he=function(){};he.prototype.add=function(){},he.prototype.addAll=function(){},he.prototype.isEmpty=function(){},he.prototype.iterator=function(){},he.prototype.size=function(){},he.prototype.toArray=function(){},he.prototype.remove=function(){},(s.prototype=new Error).name="IndexOutOfBoundsException";var An=function(){};An.prototype.hasNext=function(){},An.prototype.next=function(){},An.prototype.remove=function(){};var we=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(he);(a.prototype=new Error).name="NoSuchElementException";var St=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof he&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,he]},e.prototype.add=function(o){return arguments.length===1?this.array_.push(o):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(o){for(var u=o.iterator();u.hasNext();)this.add(u.next());return!0},e.prototype.set=function(o,u){var d=this.array_[o];return this.array_[o]=u,d},e.prototype.iterator=function(){return new Dn(this)},e.prototype.get=function(o){if(o<0||o>=this.size())throw new s;return this.array_[o]},e.prototype.isEmpty=function(){return this.array_.length===0},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var o=[],u=0,d=this.array_.length;u<d;u++)o.push(this.array_[u]);return o},e.prototype.remove=function(o){for(var u=!1,d=0,w=this.array_.length;d<w;d++)if(this.array_[d]===o){this.array_.splice(d,1),u=!0;break}return u},e}(we),Dn=function(t){function e(o){t.call(this),this.arrayList_=o,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new a;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(o){return this.arrayList_.set(this.position_-1,o)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(An),Xn=function(t){function e(){if(t.call(this),arguments.length!==0){if(arguments.length===1){var u=arguments[0];this.ensureCapacity(u.length),this.add(u,!0)}else if(arguments.length===2){var d=arguments[0],w=arguments[1];this.ensureCapacity(d.length),this.add(d,w)}}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var o={coordArrayType:{configurable:!0}};return o.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(u){return this.get(u)},e.prototype.addAll=function(){if(arguments.length===2){for(var u=arguments[0],d=arguments[1],w=!1,S=u.iterator();S.hasNext();)this.add(S.next(),d),w=!0;return w}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var u=t.prototype.clone.call(this),d=0;d<this.size();d++)u.add(d,this.get(d).copy());return u},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(arguments.length===1){var u=arguments[0];t.prototype.add.call(this,u)}else if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var d=arguments[0],w=arguments[1];return this.add(d,w,!0),!0}if(arguments[0]instanceof X&&typeof arguments[1]=="boolean"){var S=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(S))return null;t.prototype.add.call(this,S)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var U=arguments[0],$=arguments[1];return this.add(U,$),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var ut=arguments[0],_t=arguments[1];if(arguments[2])for(var wt=0;wt<ut.length;wt++)this.add(ut[wt],_t);else for(var zt=ut.length-1;zt>=0;zt--)this.add(ut[zt],_t);return!0}if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof X){var qt=arguments[0],ne=arguments[1];if(!arguments[2]){var oe=this.size();if(oe>0&&(qt>0&&this.get(qt-1).equals2D(ne)||qt<oe&&this.get(qt).equals2D(ne)))return null}t.prototype.add.call(this,qt,ne)}}else if(arguments.length===4){var In=arguments[0],xr=arguments[1],vi=arguments[2],Ho=arguments[3],Es=1;vi>Ho&&(Es=-1);for(var rh=vi;rh!==Ho;rh+=Es)this.add(In[rh],xr);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new X(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,o),e}(St),re=function(){},Yr={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Yr.ForwardComparator.get=function(){return zn},Yr.BidirectionalComparator.get=function(){return cn},Yr.coordArrayType.get=function(){return new Array(0).fill(null)},re.prototype.interfaces_=function(){return[]},re.prototype.getClass=function(){return re},re.isRing=function(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])},re.ptNotInList=function(t,e){for(var o=0;o<t.length;o++){var u=t[o];if(re.indexOf(u,e)<0)return u}return null},re.scroll=function(t,e){var o=re.indexOf(e,t);if(o<0)return null;var u=new Array(t.length).fill(null);fe.arraycopy(t,o,u,0,t.length-o),fe.arraycopy(t,0,u,t.length-o,o),fe.arraycopy(u,0,t,0,t.length)},re.equals=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(t===null||e===null||t.length!==e.length)return!1;for(var o=0;o<t.length;o++)if(!t[o].equals(e[o]))return!1;return!0}if(arguments.length===3){var u=arguments[0],d=arguments[1],w=arguments[2];if(u===d)return!0;if(u===null||d===null||u.length!==d.length)return!1;for(var S=0;S<u.length;S++)if(w.compare(u[S],d[S])!==0)return!1;return!0}},re.intersection=function(t,e){for(var o=new Xn,u=0;u<t.length;u++)e.intersects(t[u])&&o.add(t[u],!0);return o.toCoordinateArray()},re.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},re.removeRepeatedPoints=function(t){return re.hasRepeatedPoints(t)?new Xn(t,!1).toCoordinateArray():t},re.reverse=function(t){for(var e=t.length-1,o=Math.trunc(e/2),u=0;u<=o;u++){var d=t[u];t[u]=t[e-u],t[e-u]=d}},re.removeNull=function(t){for(var e=0,o=0;o<t.length;o++)t[o]!==null&&e++;var u=new Array(e).fill(null);if(e===0)return u;for(var d=0,w=0;w<t.length;w++)t[w]!==null&&(u[d++]=t[w]);return u},re.copyDeep=function(){if(arguments.length===1){for(var t=arguments[0],e=new Array(t.length).fill(null),o=0;o<t.length;o++)e[o]=new X(t[o]);return e}if(arguments.length===5)for(var u=arguments[0],d=arguments[1],w=arguments[2],S=arguments[3],U=arguments[4],$=0;$<U;$++)w[S+$]=new X(u[d+$])},re.isEqualReversed=function(t,e){for(var o=0;o<t.length;o++){var u=t[o],d=e[t.length-o-1];if(u.compareTo(d)!==0)return!1}return!0},re.envelope=function(t){for(var e=new Bt,o=0;o<t.length;o++)e.expandToInclude(t[o]);return e},re.toCoordinateArray=function(t){return t.toArray(re.coordArrayType)},re.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},re.indexOf=function(t,e){for(var o=0;o<e.length;o++)if(t.equals(e[o]))return o;return-1},re.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var o=t.length-1-e,u=t[e].compareTo(t[o]);if(u!==0)return u}return 1},re.compare=function(t,e){for(var o=0;o<t.length&&o<e.length;){var u=t[o].compareTo(e[o]);if(u!==0)return u;o++}return o<e.length?-1:o<t.length?1:0},re.minCoordinate=function(t){for(var e=null,o=0;o<t.length;o++)(e===null||e.compareTo(t[o])>0)&&(e=t[o]);return e},re.extract=function(t,e,o){e=bt.clamp(e,0,t.length);var u=(o=bt.clamp(o,-1,t.length))-e+1;o<0&&(u=0),e>=t.length&&(u=0),o<e&&(u=0);var d=new Array(u).fill(null);if(u===0)return d;for(var w=0,S=e;S<=o;S++)d[w++]=t[S];return d},Object.defineProperties(re,Yr);var zn=function(){};zn.prototype.compare=function(t,e){return re.compare(t,e)},zn.prototype.interfaces_=function(){return[et]},zn.prototype.getClass=function(){return zn};var cn=function(){};cn.prototype.compare=function(t,e){var o=t,u=e;if(o.length<u.length)return-1;if(o.length>u.length)return 1;if(o.length===0)return 0;var d=re.compare(o,u);return re.isEqualReversed(o,u)?0:d},cn.prototype.OLDcompare=function(t,e){var o=t,u=e;if(o.length<u.length)return-1;if(o.length>u.length)return 1;if(o.length===0)return 0;for(var d=re.increasingDirection(o),w=re.increasingDirection(u),S=d>0?0:o.length-1,U=w>0?0:o.length-1,$=0;$<o.length;$++){var ut=o[S].compareTo(u[U]);if(ut!==0)return ut;S+=d,U+=w}return 0},cn.prototype.interfaces_=function(){return[et]},cn.prototype.getClass=function(){return cn};var or=function(){};or.prototype.get=function(){},or.prototype.put=function(){},or.prototype.size=function(){},or.prototype.values=function(){},or.prototype.entrySet=function(){};var sr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(or);(l.prototype=new Error).name="OperationNotSupported",(c.prototype=new he).contains=function(){};var wo=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof he&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(o){for(var u=0,d=this.array_.length;u<d;u++)if(this.array_[u]===o)return!0;return!1},e.prototype.add=function(o){return!this.contains(o)&&(this.array_.push(o),!0)},e.prototype.addAll=function(o){for(var u=o.iterator();u.hasNext();)this.add(u.next());return!0},e.prototype.remove=function(o){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return this.array_.length===0},e.prototype.toArray=function(){for(var o=[],u=0,d=this.array_.length;u<d;u++)o.push(this.array_[u]);return o},e.prototype.iterator=function(){return new Wn(this)},e}(c),Wn=function(t){function e(o){t.call(this),this.hashSet_=o,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new a;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new l},e}(An),nr=0;(T.prototype=new sr).get=function(t){for(var e=this.root_;e!==null;){var o=t.compareTo(e.key);if(o<0)e=e.left;else{if(!(o>0))return e.value;e=e.right}}return null},T.prototype.put=function(t,e){if(this.root_===null)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:nr,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var o,u,d=this.root_;do if(o=d,(u=t.compareTo(d.key))<0)d=d.left;else{if(!(u>0)){var w=d.value;return d.value=e,w}d=d.right}while(d!==null);var S={key:t,left:null,right:null,value:e,parent:o,color:nr,getValue:function(){return this.value},getKey:function(){return this.key}};return u<0?o.left=S:o.right=S,this.fixAfterInsertion(S),this.size_++,null},T.prototype.fixAfterInsertion=function(t){for(t.color=1;t!=null&&t!==this.root_&&t.parent.color===1;)if(m(t)===x(m(m(t)))){var e=P(m(m(t)));g(e)===1?(v(m(t),nr),v(e,nr),v(m(m(t)),1),t=m(m(t))):(t===P(m(t))&&(t=m(t),this.rotateLeft(t)),v(m(t),nr),v(m(m(t)),1),this.rotateRight(m(m(t))))}else{var o=x(m(m(t)));g(o)===1?(v(m(t),nr),v(o,nr),v(m(m(t)),1),t=m(m(t))):(t===x(m(t))&&(t=m(t),this.rotateRight(t)),v(m(t),nr),v(m(m(t)),1),this.rotateLeft(m(m(t))))}this.root_.color=nr},T.prototype.values=function(){var t=new St,e=this.getFirstEntry();if(e!==null)for(t.add(e.value);(e=T.successor(e))!==null;)t.add(e.value);return t},T.prototype.entrySet=function(){var t=new wo,e=this.getFirstEntry();if(e!==null)for(t.add(e);(e=T.successor(e))!==null;)t.add(e);return t},T.prototype.rotateLeft=function(t){if(t!=null){var e=t.right;t.right=e.left,e.left!=null&&(e.left.parent=t),e.parent=t.parent,t.parent===null?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},T.prototype.rotateRight=function(t){if(t!=null){var e=t.left;t.left=e.right,e.right!=null&&(e.right.parent=t),e.parent=t.parent,t.parent===null?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},T.prototype.getFirstEntry=function(){var t=this.root_;if(t!=null)for(;t.left!=null;)t=t.left;return t},T.successor=function(t){if(t===null)return null;if(t.right!==null){for(var e=t.right;e.left!==null;)e=e.left;return e}for(var o=t.parent,u=t;o!==null&&u===o.right;)u=o,o=o.parent;return o},T.prototype.size=function(){return this.size_};var Ut=function(){};Ut.prototype.interfaces_=function(){return[]},Ut.prototype.getClass=function(){return Ut},N.prototype=new c,(G.prototype=new N).contains=function(t){for(var e=0,o=this.array_.length;e<o;e++)if(this.array_[e].compareTo(t)===0)return!0;return!1},G.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,o=this.array_.length;e<o;e++)if(this.array_[e].compareTo(t)===1)return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},G.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},G.prototype.remove=function(t){throw new l},G.prototype.size=function(){return this.array_.length},G.prototype.isEmpty=function(){return this.array_.length===0},G.prototype.toArray=function(){for(var t=[],e=0,o=this.array_.length;e<o;e++)t.push(this.array_[e]);return t},G.prototype.iterator=function(){return new Ei(this)};var Ei=function(t){this.treeSet_=t,this.position_=0};Ei.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new a;return this.treeSet_.array_[this.position_++]},Ei.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Ei.prototype.remove=function(){throw new l};var oi=function(){};oi.sort=function(){var t,e,o,u,d=arguments[0];if(arguments.length===1)u=function(S,U){return S.compareTo(U)},d.sort(u);else if(arguments.length===2)o=arguments[1],u=function(S,U){return o.compare(S,U)},d.sort(u);else if(arguments.length===3){(e=d.slice(arguments[1],arguments[2])).sort();var w=d.slice(0,arguments[1]).concat(e,d.slice(arguments[2],d.length));for(d.splice(0,d.length),t=0;t<w.length;t++)d.push(w[t])}else if(arguments.length===4)for(e=d.slice(arguments[1],arguments[2]),o=arguments[3],u=function(S,U){return o.compare(S,U)},e.sort(u),w=d.slice(0,arguments[1]).concat(e,d.slice(arguments[2],d.length)),d.splice(0,d.length),t=0;t<w.length;t++)d.push(w[t])},oi.asList=function(t){for(var e=new St,o=0,u=t.length;o<u;o++)e.add(t[o]);return e};var xe=function(){},Kn={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Kn.P.get=function(){return 0},Kn.L.get=function(){return 1},Kn.A.get=function(){return 2},Kn.FALSE.get=function(){return-1},Kn.TRUE.get=function(){return-2},Kn.DONTCARE.get=function(){return-3},Kn.SYM_FALSE.get=function(){return"F"},Kn.SYM_TRUE.get=function(){return"T"},Kn.SYM_DONTCARE.get=function(){return"*"},Kn.SYM_P.get=function(){return"0"},Kn.SYM_L.get=function(){return"1"},Kn.SYM_A.get=function(){return"2"},xe.prototype.interfaces_=function(){return[]},xe.prototype.getClass=function(){return xe},xe.toDimensionSymbol=function(t){switch(t){case xe.FALSE:return xe.SYM_FALSE;case xe.TRUE:return xe.SYM_TRUE;case xe.DONTCARE:return xe.SYM_DONTCARE;case xe.P:return xe.SYM_P;case xe.L:return xe.SYM_L;case xe.A:return xe.SYM_A}throw new D("Unknown dimension value: "+t)},xe.toDimensionValue=function(t){switch(Ct.toUpperCase(t)){case xe.SYM_FALSE:return xe.FALSE;case xe.SYM_TRUE:return xe.TRUE;case xe.SYM_DONTCARE:return xe.DONTCARE;case xe.SYM_P:return xe.P;case xe.SYM_L:return xe.L;case xe.SYM_A:return xe.A}throw new D("Unknown dimension symbol: "+t)},Object.defineProperties(xe,Kn);var $n=function(){};$n.prototype.filter=function(t){},$n.prototype.interfaces_=function(){return[]},$n.prototype.getClass=function(){return $n};var jr=function(){};jr.prototype.filter=function(t,e){},jr.prototype.isDone=function(){},jr.prototype.isGeometryChanged=function(){},jr.prototype.interfaces_=function(){return[]},jr.prototype.getClass=function(){return jr};var wn=function(t){function e(u,d){if(t.call(this,d),this._geometries=u||[],t.hasNullElements(this._geometries))throw new D("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var o={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var u=new Bt,d=0;d<this._geometries.length;d++)u.expandToInclude(this._geometries[d].getEnvelopeInternal());return u},e.prototype.getGeometryN=function(u){return this._geometries[u]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var u=new Array(this.getNumPoints()).fill(null),d=-1,w=0;w<this._geometries.length;w++)for(var S=this._geometries[w].getCoordinates(),U=0;U<S.length;U++)u[++d]=S[U];return u},e.prototype.getArea=function(){for(var u=0,d=0;d<this._geometries.length;d++)u+=this._geometries[d].getArea();return u},e.prototype.equalsExact=function(){if(arguments.length===2){var u=arguments[0],d=arguments[1];if(!this.isEquivalentClass(u))return!1;var w=u;if(this._geometries.length!==w._geometries.length)return!1;for(var S=0;S<this._geometries.length;S++)if(!this._geometries[S].equalsExact(w._geometries[S],d))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var u=0;u<this._geometries.length;u++)this._geometries[u].normalize();oi.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var u=xe.FALSE,d=0;d<this._geometries.length;d++)u=Math.max(u,this._geometries[d].getBoundaryDimension());return u},e.prototype.getDimension=function(){for(var u=xe.FALSE,d=0;d<this._geometries.length;d++)u=Math.max(u,this._geometries[d].getDimension());return u},e.prototype.getLength=function(){for(var u=0,d=0;d<this._geometries.length;d++)u+=this._geometries[d].getLength();return u},e.prototype.getNumPoints=function(){for(var u=0,d=0;d<this._geometries.length;d++)u+=this._geometries[d].getNumPoints();return u},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var u=this._geometries.length,d=new Array(u).fill(null),w=0;w<this._geometries.length;w++)d[w]=this._geometries[w].reverse();return this.getFactory().createGeometryCollection(d)},e.prototype.compareToSameClass=function(){if(arguments.length===1){var u=arguments[0],d=new G(oi.asList(this._geometries)),w=new G(oi.asList(u._geometries));return this.compare(d,w)}if(arguments.length===2){for(var S=arguments[0],U=arguments[1],$=S,ut=this.getNumGeometries(),_t=$.getNumGeometries(),wt=0;wt<ut&&wt<_t;){var zt=this.getGeometryN(wt),qt=$.getGeometryN(wt),ne=zt.compareToSameClass(qt,U);if(ne!==0)return ne;wt++}return wt<ut?1:wt<_t?-1:0}},e.prototype.apply=function(){if(ct(arguments[0],Jt))for(var u=arguments[0],d=0;d<this._geometries.length;d++)this._geometries[d].apply(u);else if(ct(arguments[0],jr)){var w=arguments[0];if(this._geometries.length===0)return null;for(var S=0;S<this._geometries.length&&(this._geometries[S].apply(w),!w.isDone());S++);w.isGeometryChanged()&&this.geometryChanged()}else if(ct(arguments[0],$n)){var U=arguments[0];U.filter(this);for(var $=0;$<this._geometries.length;$++)this._geometries[$].apply(U)}else if(ct(arguments[0],Lt)){var ut=arguments[0];ut.filter(this);for(var _t=0;_t<this._geometries.length;_t++)this._geometries[_t].apply(ut)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),C.shouldNeverReachHere(),null},e.prototype.clone=function(){var u=t.prototype.clone.call(this);u._geometries=new Array(this._geometries.length).fill(null);for(var d=0;d<this._geometries.length;d++)u._geometries[d]=this._geometries[d].clone();return u},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var u=new Array(this._geometries.length).fill(null),d=0;d<u.length;d++)u[d]=this._geometries[d].copy();return new e(u,this._factory)},e.prototype.isEmpty=function(){for(var u=0;u<this._geometries.length;u++)if(!this._geometries[u].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},o.serialVersionUID.get=function(){return-5694727726395021e3},Object.defineProperties(e,o),e}(vt),ar=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var o={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return vt.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(arguments.length===2){var u=arguments[0],d=arguments[1];return!!this.isEquivalentClass(u)&&t.prototype.equalsExact.call(this,u,d)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?xe.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var u=0;u<this._geometries.length;u++)if(!this._geometries[u].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var u=this._geometries.length,d=new Array(u).fill(null),w=0;w<this._geometries.length;w++)d[u-1-w]=this._geometries[w].reverse();return this.getFactory().createMultiLineString(d)},e.prototype.getBoundary=function(){return new Or(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var u=new Array(this._geometries.length).fill(null),d=0;d<u.length;d++)u[d]=this._geometries[d].copy();return new e(u,this._factory)},e.prototype.interfaces_=function(){return[Ut]},e.prototype.getClass=function(){return e},o.serialVersionUID.get=function(){return 8166665132445434e3},Object.defineProperties(e,o),e}(wn),Or=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,arguments.length===1){var t=arguments[0],e=$t.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(arguments.length===2){var o=arguments[0],u=arguments[1];this._geom=o,this._geomFact=o.getFactory(),this._bnRule=u}};Or.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return e.length===1?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},Or.prototype.getBoundary=function(){return this._geom instanceof kn?this.boundaryLineString(this._geom):this._geom instanceof ar?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Or.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},Or.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Or.prototype.computeBoundaryCoordinates=function(t){var e=new St;this._endpointMap=new T;for(var o=0;o<t.getNumGeometries();o++){var u=t.getGeometryN(o);u.getNumPoints()!==0&&(this.addEndpoint(u.getCoordinateN(0)),this.addEndpoint(u.getCoordinateN(u.getNumPoints()-1)))}for(var d=this._endpointMap.entrySet().iterator();d.hasNext();){var w=d.next(),S=w.getValue().count;this._bnRule.isInBoundary(S)&&e.add(w.getKey())}return re.toCoordinateArray(e)},Or.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);e===null&&(e=new ho,this._endpointMap.put(t,e)),e.count++},Or.prototype.interfaces_=function(){return[]},Or.prototype.getClass=function(){return Or},Or.getBoundary=function(){if(arguments.length===1){var t=arguments[0];return new Or(t).getBoundary()}if(arguments.length===2){var e=arguments[0],o=arguments[1];return new Or(e,o).getBoundary()}};var ho=function(){this.count=null};ho.prototype.interfaces_=function(){return[]},ho.prototype.getClass=function(){return ho};var rr=function(){},Lo={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};rr.prototype.interfaces_=function(){return[]},rr.prototype.getClass=function(){return rr},rr.chars=function(t,e){for(var o=new Array(e).fill(null),u=0;u<e;u++)o[u]=t;return String(o)},rr.getStackTrace=function(){if(arguments.length===1){var t=arguments[0],e=new function(){},o=new function(){}(e);return t.printStackTrace(o),e.toString()}if(arguments.length===2){for(var u=arguments[0],d=arguments[1],w="",S=new function(){}(new function(){}(rr.getStackTrace(u))),U=0;U<d;U++)try{w+=S.readLine()+rr.NEWLINE}catch($){if(!($ instanceof z))throw $;C.shouldNeverReachHere()}return w}},rr.split=function(t,e){for(var o=e.length,u=new St,d=""+t,w=d.indexOf(e);w>=0;){var S=d.substring(0,w);u.add(S),w=(d=d.substring(w+o)).indexOf(e)}d.length>0&&u.add(d);for(var U=new Array(u.size()).fill(null),$=0;$<U.length;$++)U[$]=u.get($);return U},rr.toString=function(){if(arguments.length===1){var t=arguments[0];return rr.SIMPLE_ORDINATE_FORMAT.format(t)}},rr.spaces=function(t){return rr.chars(" ",t)},Lo.NEWLINE.get=function(){return fe.getProperty("line.separator")},Lo.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(rr,Lo);var Ln=function(){};Ln.prototype.interfaces_=function(){return[]},Ln.prototype.getClass=function(){return Ln},Ln.copyCoord=function(t,e,o,u){for(var d=Math.min(t.getDimension(),o.getDimension()),w=0;w<d;w++)o.setOrdinate(u,w,t.getOrdinate(e,w))},Ln.isRing=function(t){var e=t.size();return e===0||!(e<=3)&&t.getOrdinate(0,Tt.X)===t.getOrdinate(e-1,Tt.X)&&t.getOrdinate(0,Tt.Y)===t.getOrdinate(e-1,Tt.Y)},Ln.isEqual=function(t,e){var o=t.size();if(o!==e.size())return!1;for(var u=Math.min(t.getDimension(),e.getDimension()),d=0;d<o;d++)for(var w=0;w<u;w++){var S=t.getOrdinate(d,w),U=e.getOrdinate(d,w);if(t.getOrdinate(d,w)!==e.getOrdinate(d,w)&&(!A.isNaN(S)||!A.isNaN(U)))return!1}return!0},Ln.extend=function(t,e,o){var u=t.create(o,e.getDimension()),d=e.size();if(Ln.copy(e,0,u,0,d),d>0)for(var w=d;w<o;w++)Ln.copy(e,d-1,u,w,1);return u},Ln.reverse=function(t){for(var e=t.size()-1,o=Math.trunc(e/2),u=0;u<=o;u++)Ln.swap(t,u,e-u)},Ln.swap=function(t,e,o){if(e===o)return null;for(var u=0;u<t.getDimension();u++){var d=t.getOrdinate(e,u);t.setOrdinate(e,u,t.getOrdinate(o,u)),t.setOrdinate(o,u,d)}},Ln.copy=function(t,e,o,u,d){for(var w=0;w<d;w++)Ln.copyCoord(t,e+w,o,u+w)},Ln.toString=function(){if(arguments.length===1){var t=arguments[0],e=t.size();if(e===0)return"()";var o=t.getDimension(),u=new Xt;u.append("(");for(var d=0;d<e;d++){d>0&&u.append(" ");for(var w=0;w<o;w++)w>0&&u.append(","),u.append(rr.toString(t.getOrdinate(d,w)))}return u.append(")"),u.toString()}},Ln.ensureValidRing=function(t,e){var o=e.size();return o===0?e:o<=3?Ln.createClosedRing(t,e,4):e.getOrdinate(0,Tt.X)===e.getOrdinate(o-1,Tt.X)&&e.getOrdinate(0,Tt.Y)===e.getOrdinate(o-1,Tt.Y)?e:Ln.createClosedRing(t,e,o+1)},Ln.createClosedRing=function(t,e,o){var u=t.create(o,e.getDimension()),d=e.size();Ln.copy(e,0,u,0,d);for(var w=d;w<o;w++)Ln.copy(e,0,u,w,1);return u};var kn=function(t){function e(u,d){t.call(this,d),this._points=null,this.init(u)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var o={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Bt:this._points.expandEnvelope(new Bt)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(arguments.length===2){var u=arguments[0],d=arguments[1];if(!this.isEquivalentClass(u))return!1;var w=u;if(this._points.size()!==w._points.size())return!1;for(var S=0;S<this._points.size();S++)if(!this.equal(this._points.getCoordinate(S),w._points.getCoordinate(S),d))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var u=0;u<Math.trunc(this._points.size()/2);u++){var d=this._points.size()-1-u;if(!this._points.getCoordinate(u).equals(this._points.getCoordinate(d)))return this._points.getCoordinate(u).compareTo(this._points.getCoordinate(d))>0&&Ln.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?xe.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return tt.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var u=this._points.copy();return Ln.reverse(u),this.getFactory().createLineString(u)},e.prototype.compareToSameClass=function(){if(arguments.length===1){for(var u=arguments[0],d=0,w=0;d<this._points.size()&&w<u._points.size();){var S=this._points.getCoordinate(d).compareTo(u._points.getCoordinate(w));if(S!==0)return S;d++,w++}return d<this._points.size()?1:w<u._points.size()?-1:0}if(arguments.length===2){var U=arguments[0];return arguments[1].compare(this._points,U._points)}},e.prototype.apply=function(){if(ct(arguments[0],Jt))for(var u=arguments[0],d=0;d<this._points.size();d++)u.filter(this._points.getCoordinate(d));else if(ct(arguments[0],jr)){var w=arguments[0];if(this._points.size()===0)return null;for(var S=0;S<this._points.size()&&(w.filter(this._points,S),!w.isDone());S++);w.isGeometryChanged()&&this.geometryChanged()}else ct(arguments[0],$n)?arguments[0].filter(this):ct(arguments[0],Lt)&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new Or(this).getBoundary()},e.prototype.isEquivalentClass=function(u){return u instanceof e},e.prototype.clone=function(){var u=t.prototype.clone.call(this);return u._points=this._points.clone(),u},e.prototype.getCoordinateN=function(u){return this._points.getCoordinate(u)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return this._points.size()===0},e.prototype.init=function(u){if(u===null&&(u=this.getFactory().getCoordinateSequenceFactory().create([])),u.size()===1)throw new D("Invalid number of points in LineString (found "+u.size()+" - must be 0 or >= 2)");this._points=u},e.prototype.isCoordinate=function(u){for(var d=0;d<this._points.size();d++)if(this._points.getCoordinate(d).equals(u))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(u){return this.getFactory().createPoint(this._points.getCoordinate(u))},e.prototype.interfaces_=function(){return[Ut]},e.prototype.getClass=function(){return e},o.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,o),e}(vt),Di=function(){};Di.prototype.interfaces_=function(){return[]},Di.prototype.getClass=function(){return Di};var pr=function(t){function e(u,d){t.call(this,d),this._coordinates=u||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var o={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Bt;var u=new Bt;return u.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),u},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(arguments.length===2){var u=arguments[0],d=arguments[1];return!!this.isEquivalentClass(u)&&(!(!this.isEmpty()||!u.isEmpty())||this.isEmpty()===u.isEmpty()&&this.equal(u.getCoordinate(),this.getCoordinate(),d))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return xe.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(this.getCoordinate()===null)throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(arguments.length===1){var u=arguments[0];return this.getCoordinate().compareTo(u.getCoordinate())}if(arguments.length===2){var d=arguments[0];return arguments[1].compare(this._coordinates,d._coordinates)}},e.prototype.apply=function(){if(ct(arguments[0],Jt)){var u=arguments[0];if(this.isEmpty())return null;u.filter(this.getCoordinate())}else if(ct(arguments[0],jr)){var d=arguments[0];if(this.isEmpty())return null;d.filter(this._coordinates,0),d.isGeometryChanged()&&this.geometryChanged()}else ct(arguments[0],$n)?arguments[0].filter(this):ct(arguments[0],Lt)&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var u=t.prototype.clone.call(this);return u._coordinates=this._coordinates.clone(),u},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(this.getCoordinate()===null)throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return this._coordinates.size()===0},e.prototype.init=function(u){u===null&&(u=this.getFactory().getCoordinateSequenceFactory().create([])),C.isTrue(u.size()<=1),this._coordinates=u},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Di]},e.prototype.getClass=function(){return e},o.serialVersionUID.get=function(){return 4902022702746615e3},Object.defineProperties(e,o),e}(vt),Mi=function(){};Mi.prototype.interfaces_=function(){return[]},Mi.prototype.getClass=function(){return Mi};var bn=function(t){function e(u,d,w){if(t.call(this,w),this._shell=null,this._holes=null,u===null&&(u=this.getFactory().createLinearRing()),d===null&&(d=[]),t.hasNullElements(d))throw new D("holes must not contain null elements");if(u.isEmpty()&&t.hasNonEmptyElements(d))throw new D("shell is empty but holes are not");this._shell=u,this._holes=d}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var o={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var u=new Array(this.getNumPoints()).fill(null),d=-1,w=this._shell.getCoordinates(),S=0;S<w.length;S++)u[++d]=w[S];for(var U=0;U<this._holes.length;U++)for(var $=this._holes[U].getCoordinates(),ut=0;ut<$.length;ut++)u[++d]=$[ut];return u},e.prototype.getArea=function(){var u=0;u+=Math.abs(tt.signedArea(this._shell.getCoordinateSequence()));for(var d=0;d<this._holes.length;d++)u-=Math.abs(tt.signedArea(this._holes[d].getCoordinateSequence()));return u},e.prototype.isRectangle=function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var u=this._shell.getCoordinateSequence(),d=this.getEnvelopeInternal(),w=0;w<5;w++){var S=u.getX(w);if(S!==d.getMinX()&&S!==d.getMaxX())return!1;var U=u.getY(w);if(U!==d.getMinY()&&U!==d.getMaxY())return!1}for(var $=u.getX(0),ut=u.getY(0),_t=1;_t<=4;_t++){var wt=u.getX(_t),zt=u.getY(_t);if(wt!==$==(zt!==ut))return!1;$=wt,ut=zt}return!0},e.prototype.equalsExact=function(){if(arguments.length===2){var u=arguments[0],d=arguments[1];if(!this.isEquivalentClass(u))return!1;var w=u,S=this._shell,U=w._shell;if(!S.equalsExact(U,d)||this._holes.length!==w._holes.length)return!1;for(var $=0;$<this._holes.length;$++)if(!this._holes[$].equalsExact(w._holes[$],d))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(arguments.length===0){this.normalize(this._shell,!0);for(var u=0;u<this._holes.length;u++)this.normalize(this._holes[u],!1);oi.sort(this._holes)}else if(arguments.length===2){var d=arguments[0],w=arguments[1];if(d.isEmpty())return null;var S=new Array(d.getCoordinates().length-1).fill(null);fe.arraycopy(d.getCoordinates(),0,S,0,S.length);var U=re.minCoordinate(d.getCoordinates());re.scroll(S,U),fe.arraycopy(S,0,d.getCoordinates(),0,S.length),d.getCoordinates()[S.length]=S[0],tt.isCCW(d.getCoordinates())===w&&re.reverse(d.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var u=0;u+=this._shell.getLength();for(var d=0;d<this._holes.length;d++)u+=this._holes[d].getLength();return u},e.prototype.getNumPoints=function(){for(var u=this._shell.getNumPoints(),d=0;d<this._holes.length;d++)u+=this._holes[d].getNumPoints();return u},e.prototype.reverse=function(){var u=this.copy();u._shell=this._shell.copy().reverse(),u._holes=new Array(this._holes.length).fill(null);for(var d=0;d<this._holes.length;d++)u._holes[d]=this._holes[d].copy().reverse();return u},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(arguments.length===1){var u=arguments[0],d=this._shell,w=u._shell;return d.compareToSameClass(w)}if(arguments.length===2){var S=arguments[0],U=arguments[1],$=S,ut=this._shell,_t=$._shell,wt=ut.compareToSameClass(_t,U);if(wt!==0)return wt;for(var zt=this.getNumInteriorRing(),qt=$.getNumInteriorRing(),ne=0;ne<zt&&ne<qt;){var oe=this.getInteriorRingN(ne),In=$.getInteriorRingN(ne),xr=oe.compareToSameClass(In,U);if(xr!==0)return xr;ne++}return ne<zt?1:ne<qt?-1:0}},e.prototype.apply=function(u){if(ct(u,Jt)){this._shell.apply(u);for(var d=0;d<this._holes.length;d++)this._holes[d].apply(u)}else if(ct(u,jr)){if(this._shell.apply(u),!u.isDone())for(var w=0;w<this._holes.length&&(this._holes[w].apply(u),!u.isDone());w++);u.isGeometryChanged()&&this.geometryChanged()}else if(ct(u,$n))u.filter(this);else if(ct(u,Lt)){u.filter(this),this._shell.apply(u);for(var S=0;S<this._holes.length;S++)this._holes[S].apply(u)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var u=new Array(this._holes.length+1).fill(null);u[0]=this._shell;for(var d=0;d<this._holes.length;d++)u[d+1]=this._holes[d];return u.length<=1?this.getFactory().createLinearRing(u[0].getCoordinateSequence()):this.getFactory().createMultiLineString(u)},e.prototype.clone=function(){var u=t.prototype.clone.call(this);u._shell=this._shell.clone(),u._holes=new Array(this._holes.length).fill(null);for(var d=0;d<this._holes.length;d++)u._holes[d]=this._holes[d].clone();return u},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var u=this._shell.copy(),d=new Array(this._holes.length).fill(null),w=0;w<d.length;w++)d[w]=this._holes[w].copy();return new e(u,d,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(u){return this._holes[u]},e.prototype.interfaces_=function(){return[Mi]},e.prototype.getClass=function(){return e},o.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,o),e}(vt),mi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var o={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return vt.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(arguments.length===2){var u=arguments[0],d=arguments[1];return!!this.isEquivalentClass(u)&&t.prototype.equalsExact.call(this,u,d)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(arguments.length===1){var u=arguments[0];return this._geometries[u].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return xe.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var u=new Array(this._geometries.length).fill(null),d=0;d<u.length;d++)u[d]=this._geometries[d].copy();return new e(u,this._factory)},e.prototype.interfaces_=function(){return[Di]},e.prototype.getClass=function(){return e},o.serialVersionUID.get=function(){return-8048474874175356e3},Object.defineProperties(e,o),e}(wn),Nr=function(t){function e(u,d){u instanceof X&&d instanceof Kt&&(u=d.getCoordinateSequenceFactory().create(u)),t.call(this,u,d),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var o={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return vt.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return xe.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var u=this._points.copy();return Ln.reverse(u),this.getFactory().createLinearRing(u)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new D("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new D("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},o.MINIMUM_VALID_SIZE.get=function(){return 4},o.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,o),e}(kn),dr=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var o={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return vt.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(arguments.length===2){var u=arguments[0],d=arguments[1];return!!this.isEquivalentClass(u)&&t.prototype.equalsExact.call(this,u,d)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var u=this._geometries.length,d=new Array(u).fill(null),w=0;w<this._geometries.length;w++)d[w]=this._geometries[w].reverse();return this.getFactory().createMultiPolygon(d)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var u=new St,d=0;d<this._geometries.length;d++)for(var w=this._geometries[d].getBoundary(),S=0;S<w.getNumGeometries();S++)u.add(w.getGeometryN(S));var U=new Array(u.size()).fill(null);return this.getFactory().createMultiLineString(u.toArray(U))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var u=new Array(this._geometries.length).fill(null),d=0;d<u.length;d++)u[d]=this._geometries[d].copy();return new e(u,this._factory)},e.prototype.interfaces_=function(){return[Mi]},e.prototype.getClass=function(){return e},o.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,o),e}(wn),ur=function(t){this._factory=t||null,this._isUserDataCopied=!1},co={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};ur.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},ur.prototype.edit=function(t,e){if(t===null)return null;var o=this.editInternal(t,e);return this._isUserDataCopied&&o.setUserData(t.getUserData()),o},ur.prototype.editInternal=function(t,e){return this._factory===null&&(this._factory=t.getFactory()),t instanceof wn?this.editGeometryCollection(t,e):t instanceof bn?this.editPolygon(t,e):t instanceof pr?e.edit(t,this._factory):t instanceof kn?e.edit(t,this._factory):(C.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},ur.prototype.editGeometryCollection=function(t,e){for(var o=e.edit(t,this._factory),u=new St,d=0;d<o.getNumGeometries();d++){var w=this.edit(o.getGeometryN(d),e);w===null||w.isEmpty()||u.add(w)}return o.getClass()===mi?this._factory.createMultiPoint(u.toArray([])):o.getClass()===ar?this._factory.createMultiLineString(u.toArray([])):o.getClass()===dr?this._factory.createMultiPolygon(u.toArray([])):this._factory.createGeometryCollection(u.toArray([]))},ur.prototype.editPolygon=function(t,e){var o=e.edit(t,this._factory);if(o===null&&(o=this._factory.createPolygon(null)),o.isEmpty())return o;var u=this.edit(o.getExteriorRing(),e);if(u===null||u.isEmpty())return this._factory.createPolygon();for(var d=new St,w=0;w<o.getNumInteriorRing();w++){var S=this.edit(o.getInteriorRingN(w),e);S===null||S.isEmpty()||d.add(S)}return this._factory.createPolygon(u,d.toArray([]))},ur.prototype.interfaces_=function(){return[]},ur.prototype.getClass=function(){return ur},ur.GeometryEditorOperation=function(){},co.NoOpGeometryOperation.get=function(){return Bi},co.CoordinateOperation.get=function(){return Fi},co.CoordinateSequenceOperation.get=function(){return Le},Object.defineProperties(ur,co);var Bi=function(){};Bi.prototype.edit=function(t,e){return t},Bi.prototype.interfaces_=function(){return[ur.GeometryEditorOperation]},Bi.prototype.getClass=function(){return Bi};var Fi=function(){};Fi.prototype.edit=function(t,e){var o=this.editCoordinates(t.getCoordinates(),t);return o===null?t:t instanceof Nr?e.createLinearRing(o):t instanceof kn?e.createLineString(o):t instanceof pr?o.length>0?e.createPoint(o[0]):e.createPoint():t},Fi.prototype.interfaces_=function(){return[ur.GeometryEditorOperation]},Fi.prototype.getClass=function(){return Fi};var Le=function(){};Le.prototype.edit=function(t,e){return t instanceof Nr?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof kn?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof pr?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},Le.prototype.interfaces_=function(){return[ur.GeometryEditorOperation]},Le.prototype.getClass=function(){return Le};var le=function(){if(this._dimension=3,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new X}else if(ct(arguments[0],Tt)){var o=arguments[0];if(o===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=o.getDimension(),this._coordinates=new Array(o.size()).fill(null);for(var u=0;u<this._coordinates.length;u++)this._coordinates[u]=o.getCoordinateCopy(u)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var d=arguments[0],w=arguments[1];this._coordinates=d,this._dimension=w,d===null&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var S=arguments[0],U=arguments[1];this._coordinates=new Array(S).fill(null),this._dimension=U;for(var $=0;$<S;$++)this._coordinates[$]=new X}}},Rr={serialVersionUID:{configurable:!0}};le.prototype.setOrdinate=function(t,e,o){switch(e){case Tt.X:this._coordinates[t].x=o;break;case Tt.Y:this._coordinates[t].y=o;break;case Tt.Z:this._coordinates[t].z=o;break;default:throw new D("invalid ordinateIndex")}},le.prototype.size=function(){return this._coordinates.length},le.prototype.getOrdinate=function(t,e){switch(e){case Tt.X:return this._coordinates[t].x;case Tt.Y:return this._coordinates[t].y;case Tt.Z:return this._coordinates[t].z}return A.NaN},le.prototype.getCoordinate=function(){if(arguments.length===1){var t=arguments[0];return this._coordinates[t]}if(arguments.length===2){var e=arguments[0],o=arguments[1];o.x=this._coordinates[e].x,o.y=this._coordinates[e].y,o.z=this._coordinates[e].z}},le.prototype.getCoordinateCopy=function(t){return new X(this._coordinates[t])},le.prototype.getDimension=function(){return this._dimension},le.prototype.getX=function(t){return this._coordinates[t].x},le.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new le(t,this._dimension)},le.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},le.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new le(t,this._dimension)},le.prototype.toString=function(){if(this._coordinates.length>0){var t=new Xt(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},le.prototype.getY=function(t){return this._coordinates[t].y},le.prototype.toCoordinateArray=function(){return this._coordinates},le.prototype.interfaces_=function(){return[Tt,n]},le.prototype.getClass=function(){return le},Rr.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(le,Rr);var Un=function(){},Pi={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};Un.prototype.readResolve=function(){return Un.instance()},Un.prototype.create=function(){if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return new le(t)}if(ct(arguments[0],Tt)){var e=arguments[0];return new le(e)}}else if(arguments.length===2){var o=arguments[0],u=arguments[1];return u>3&&(u=3),u<2?new le(o):new le(o,u)}},Un.prototype.interfaces_=function(){return[Et,n]},Un.prototype.getClass=function(){return Un},Un.instance=function(){return Un.instanceObject},Pi.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},Pi.instanceObject.get=function(){return new Un},Object.defineProperties(Un,Pi);var fo=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(o){return this.map_.get(o)||null},e.prototype.put=function(o,u){return this.map_.set(o,u),u},e.prototype.values=function(){for(var o=new St,u=this.map_.values(),d=u.next();!d.done;)o.add(d.value),d=u.next();return o},e.prototype.entrySet=function(){var o=new wo;return this.map_.entries().forEach(function(u){return o.add(u)}),o},e.prototype.size=function(){return this.map_.size()},e}(or),Zt=function t(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=t.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof Vr){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var o=arguments[0];this._modelType=t.FIXED,this.setScale(o)}else if(arguments[0]instanceof t){var u=arguments[0];this._modelType=u._modelType,this._scale=u._scale}}},En={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};Zt.prototype.equals=function(t){if(!(t instanceof Zt))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},Zt.prototype.compareTo=function(t){var e=t,o=this.getMaximumSignificantDigits(),u=e.getMaximumSignificantDigits();return new ft(o).compareTo(new ft(u))},Zt.prototype.getScale=function(){return this._scale},Zt.prototype.isFloating=function(){return this._modelType===Zt.FLOATING||this._modelType===Zt.FLOATING_SINGLE},Zt.prototype.getType=function(){return this._modelType},Zt.prototype.toString=function(){var t="UNKNOWN";return this._modelType===Zt.FLOATING?t="Floating":this._modelType===Zt.FLOATING_SINGLE?t="Floating-Single":this._modelType===Zt.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},Zt.prototype.makePrecise=function(){if(typeof arguments[0]=="number"){var t=arguments[0];return A.isNaN(t)||this._modelType===Zt.FLOATING_SINGLE?t:this._modelType===Zt.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof X){var e=arguments[0];if(this._modelType===Zt.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},Zt.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===Zt.FLOATING?t=16:this._modelType===Zt.FLOATING_SINGLE?t=6:this._modelType===Zt.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},Zt.prototype.setScale=function(t){this._scale=Math.abs(t)},Zt.prototype.interfaces_=function(){return[n,H]},Zt.prototype.getClass=function(){return Zt},Zt.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},En.serialVersionUID.get=function(){return 7777263578777804e3},En.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(Zt,En);var Vr=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},bo={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};Vr.prototype.readResolve=function(){return Vr.nameToTypeMap.get(this._name)},Vr.prototype.toString=function(){return this._name},Vr.prototype.interfaces_=function(){return[n]},Vr.prototype.getClass=function(){return Vr},bo.serialVersionUID.get=function(){return-552860263173159e4},bo.nameToTypeMap.get=function(){return new fo},Object.defineProperties(Vr,bo),Zt.Type=Vr,Zt.FIXED=new Vr("FIXED"),Zt.FLOATING=new Vr("FLOATING"),Zt.FLOATING_SINGLE=new Vr("FLOATING SINGLE");var Kt=function t(){this._precisionModel=new Zt,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),arguments.length===0||(arguments.length===1?ct(arguments[0],Et)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof Zt&&(this._precisionModel=arguments[0]):arguments.length===2?(this._precisionModel=arguments[0],this._SRID=arguments[1]):arguments.length===3&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},eo={serialVersionUID:{configurable:!0}};Kt.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new X(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new X(t.getMinX(),t.getMinY()),new X(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new X(t.getMinX(),t.getMinY()),new X(t.getMinX(),t.getMaxY()),new X(t.getMaxX(),t.getMaxY()),new X(t.getMaxX(),t.getMinY()),new X(t.getMinX(),t.getMinY())]),null)},Kt.prototype.createLineString=function(t){return t?t instanceof Array?new kn(this.getCoordinateSequenceFactory().create(t),this):ct(t,Tt)?new kn(t,this):void 0:new kn(this.getCoordinateSequenceFactory().create([]),this)},Kt.prototype.createMultiLineString=function(){if(arguments.length===0)return new ar(null,this);if(arguments.length===1){var t=arguments[0];return new ar(t,this)}},Kt.prototype.buildGeometry=function(t){for(var e=null,o=!1,u=!1,d=t.iterator();d.hasNext();){var w=d.next(),S=w.getClass();e===null&&(e=S),S!==e&&(o=!0),w.isGeometryCollectionOrDerived()&&(u=!0)}if(e===null)return this.createGeometryCollection();if(o||u)return this.createGeometryCollection(Kt.toGeometryArray(t));var U=t.iterator().next();if(t.size()>1){if(U instanceof bn)return this.createMultiPolygon(Kt.toPolygonArray(t));if(U instanceof kn)return this.createMultiLineString(Kt.toLineStringArray(t));if(U instanceof pr)return this.createMultiPoint(Kt.toPointArray(t));C.shouldNeverReachHere("Unhandled class: "+U.getClass().getName())}return U},Kt.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(t!==null?this.getCoordinateSequenceFactory().create(t):null)},Kt.prototype.createPoint=function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof X){var t=arguments[0];return this.createPoint(t!==null?this.getCoordinateSequenceFactory().create([t]):null)}if(ct(arguments[0],Tt)){var e=arguments[0];return new pr(e,this)}}},Kt.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},Kt.prototype.createPolygon=function(){if(arguments.length===0)return new bn(null,null,this);if(arguments.length===1){if(ct(arguments[0],Tt)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof Nr){var o=arguments[0];return this.createPolygon(o,null)}}else if(arguments.length===2){var u=arguments[0],d=arguments[1];return new bn(u,d,this)}},Kt.prototype.getSRID=function(){return this._SRID},Kt.prototype.createGeometryCollection=function(){if(arguments.length===0)return new wn(null,this);if(arguments.length===1){var t=arguments[0];return new wn(t,this)}},Kt.prototype.createGeometry=function(t){return new ur(this).edit(t,{edit:function(){if(arguments.length===2){var e=arguments[0];return this._coordinateSequenceFactory.create(e)}}})},Kt.prototype.getPrecisionModel=function(){return this._precisionModel},Kt.prototype.createLinearRing=function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(t!==null?this.getCoordinateSequenceFactory().create(t):null)}if(ct(arguments[0],Tt)){var e=arguments[0];return new Nr(e,this)}}},Kt.prototype.createMultiPolygon=function(){if(arguments.length===0)return new dr(null,this);if(arguments.length===1){var t=arguments[0];return new dr(t,this)}},Kt.prototype.createMultiPoint=function(){if(arguments.length===0)return new mi(null,this);if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return new mi(t,this)}if(arguments[0]instanceof Array){var e=arguments[0];return this.createMultiPoint(e!==null?this.getCoordinateSequenceFactory().create(e):null)}if(ct(arguments[0],Tt)){var o=arguments[0];if(o===null)return this.createMultiPoint(new Array(0).fill(null));for(var u=new Array(o.size()).fill(null),d=0;d<o.size();d++){var w=this.getCoordinateSequenceFactory().create(1,o.getDimension());Ln.copy(o,d,w,0,1),u[d]=this.createPoint(w)}return this.createMultiPoint(u)}}},Kt.prototype.interfaces_=function(){return[n]},Kt.prototype.getClass=function(){return Kt},Kt.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Kt.toGeometryArray=function(t){if(t===null)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},Kt.getDefaultCoordinateSequenceFactory=function(){return Un.instance()},Kt.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Kt.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Kt.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Kt.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Kt.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Kt.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Kt.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},eo.serialVersionUID.get=function(){return-6820524753094096e3},Object.defineProperties(Kt,eo);var Jo=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],si=function(t){this.geometryFactory=t||new Kt};si.prototype.read=function(t){var e,o=(e=typeof t=="string"?JSON.parse(t):t).type;if(!De[o])throw new Error("Unknown GeoJSON type: "+e.type);return Jo.indexOf(o)!==-1?De[o].apply(this,[e.coordinates]):o==="GeometryCollection"?De[o].apply(this,[e.geometries]):De[o].apply(this,[e])},si.prototype.write=function(t){var e=t.getGeometryType();if(!gr[e])throw new Error("Geometry is not supported");return gr[e].apply(this,[t])};var De={Feature:function(t){var e={};for(var o in t)e[o]=t[o];if(t.geometry){var u=t.geometry.type;if(!De[u])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=De.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var o=0;o<t.features.length;++o)e.features.push(this.read(t.features[o]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],o=0;o<t.length;++o){var u=t[o];e.push(new X(u[0],u[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new X(t[0],t[1]),new X(t[2],t[1]),new X(t[2],t[3]),new X(t[0],t[3]),new X(t[0],t[1])])},Point:function(t){var e=new X(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],o=0;o<t.length;++o)e.push(De.Point.apply(this,[t[o]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=De.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],o=0;o<t.length;++o)e.push(De.LineString.apply(this,[t[o]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=De.coordinates.apply(this,[t[0]]),o=this.geometryFactory.createLinearRing(e),u=[],d=1;d<t.length;++d){var w=t[d],S=De.coordinates.apply(this,[w]),U=this.geometryFactory.createLinearRing(S);u.push(U)}return this.geometryFactory.createPolygon(o,u)},MultiPolygon:function(t){for(var e=[],o=0;o<t.length;++o){var u=t[o];e.push(De.Polygon.apply(this,[u]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],o=0;o<t.length;++o){var u=t[o];e.push(this.read(u))}return this.geometryFactory.createGeometryCollection(e)}},gr={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:gr.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],o=0;o<t._geometries.length;++o){var u=t._geometries[o],d=gr.Point.apply(this,[u]);e.push(d.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],o=t.getCoordinates(),u=0;u<o.length;++u){var d=o[u];e.push(gr.coordinate.apply(this,[d]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],o=0;o<t._geometries.length;++o){var u=t._geometries[o],d=gr.LineString.apply(this,[u]);e.push(d.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],o=gr.LineString.apply(this,[t._shell]);e.push(o.coordinates);for(var u=0;u<t._holes.length;++u){var d=t._holes[u],w=gr.LineString.apply(this,[d]);e.push(w.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],o=0;o<t._geometries.length;++o){var u=t._geometries[o],d=gr.Polygon.apply(this,[u]);e.push(d.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],o=0;o<t._geometries.length;++o){var u=t._geometries[o],d=u.getGeometryType();e.push(gr[d].apply(this,[u]))}return{type:"GeometryCollection",geometries:e}}},ai=function(t){this.geometryFactory=t||new Kt,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new si(this.geometryFactory)};ai.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===Zt.FIXED&&this.reducePrecision(e),e},ai.prototype.reducePrecision=function(t){var e,o;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,o=t.points.length;e<o;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,o=t.geometries.length;e<o;e++)this.reducePrecision(t.geometries[e])};var Vi=function(){this.parser=new si(this.geometryFactory)};Vi.prototype.write=function(t){return this.parser.write(t)};var It=function(){},zi={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};It.prototype.interfaces_=function(){return[]},It.prototype.getClass=function(){return It},It.opposite=function(t){return t===It.LEFT?It.RIGHT:t===It.RIGHT?It.LEFT:t},zi.ON.get=function(){return 0},zi.LEFT.get=function(){return 1},zi.RIGHT.get=function(){return 2},Object.defineProperties(It,zi),(j.prototype=new Error).name="EmptyStackException",(R.prototype=new we).add=function(t){return this.array_.push(t),!0},R.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},R.prototype.push=function(t){return this.array_.push(t),t},R.prototype.pop=function(t){if(this.array_.length===0)throw new j;return this.array_.pop()},R.prototype.peek=function(){if(this.array_.length===0)throw new j;return this.array_[this.array_.length-1]},R.prototype.empty=function(){return this.array_.length===0},R.prototype.isEmpty=function(){return this.empty()},R.prototype.search=function(t){return this.array_.indexOf(t)},R.prototype.size=function(){return this.array_.length},R.prototype.toArray=function(){for(var t=[],e=0,o=this.array_.length;e<o;e++)t.push(this.array_[e]);return t};var fn=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};fn.prototype.getCoordinate=function(){return this._minCoord},fn.prototype.getRightmostSide=function(t,e){var o=this.getRightmostSideOfSegment(t,e);return o<0&&(o=this.getRightmostSideOfSegment(t,e-1)),o<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),o},fn.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();C.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],o=t[this._minIndex+1],u=tt.computeOrientation(this._minCoord,o,e),d=!1;(e.y<this._minCoord.y&&o.y<this._minCoord.y&&u===tt.COUNTERCLOCKWISE||e.y>this._minCoord.y&&o.y>this._minCoord.y&&u===tt.CLOCKWISE)&&(d=!0),d&&(this._minIndex=this._minIndex-1)},fn.prototype.getRightmostSideOfSegment=function(t,e){var o=t.getEdge().getCoordinates();if(e<0||e+1>=o.length||o[e].y===o[e+1].y)return-1;var u=It.LEFT;return o[e].y<o[e+1].y&&(u=It.RIGHT),u},fn.prototype.getEdge=function(){return this._orientedDe},fn.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),o=0;o<e.length-1;o++)(this._minCoord===null||e[o].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=o,this._minCoord=e[o])},fn.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},fn.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var o=e.next();o.isForward()&&this.checkForRightmostCoordinate(o)}C.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===It.LEFT&&(this._orientedDe=this._minDe.getSym())},fn.prototype.interfaces_=function(){return[]},fn.prototype.getClass=function(){return fn};var Qn=function(t){function e(o,u){t.call(this,e.msgWithCoord(o,u)),this.pt=u?new X(u):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(o,u){return u?o:o+" [ "+u+" ]"},e}(ht),Ci=function(){this.array_=[]};Ci.prototype.addLast=function(t){this.array_.push(t)},Ci.prototype.removeFirst=function(){return this.array_.shift()},Ci.prototype.isEmpty=function(){return this.array_.length===0};var tr=function(){this._finder=null,this._dirEdgeList=new St,this._nodes=new St,this._rightMostCoord=null,this._env=null,this._finder=new fn};tr.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},tr.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},tr.prototype.computeNodeDepth=function(t){for(var e=null,o=t.getEdges().iterator();o.hasNext();){var u=o.next();if(u.isVisited()||u.getSym().isVisited()){e=u;break}}if(e===null)throw new Qn("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var d=t.getEdges().iterator();d.hasNext();){var w=d.next();w.setVisited(!0),this.copySymDepths(w)}},tr.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(It.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},tr.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},tr.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(It.RIGHT)>=1&&e.getDepth(It.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},tr.prototype.computeDepths=function(t){var e=new wo,o=new Ci,u=t.getNode();for(o.addLast(u),e.add(u),t.setVisited(!0);!o.isEmpty();){var d=o.removeFirst();e.add(d),this.computeNodeDepth(d);for(var w=d.getEdges().iterator();w.hasNext();){var S=w.next().getSym();if(!S.isVisited()){var U=S.getNode();e.contains(U)||(o.addLast(U),e.add(U))}}}},tr.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},tr.prototype.getEnvelope=function(){if(this._env===null){for(var t=new Bt,e=this._dirEdgeList.iterator();e.hasNext();)for(var o=e.next().getEdge().getCoordinates(),u=0;u<o.length-1;u++)t.expandToInclude(o[u]);this._env=t}return this._env},tr.prototype.addReachable=function(t){var e=new R;for(e.add(t);!e.empty();){var o=e.pop();this.add(o,e)}},tr.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(It.LEFT,t.getDepth(It.RIGHT)),e.setDepth(It.RIGHT,t.getDepth(It.LEFT))},tr.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var o=t.getEdges().iterator();o.hasNext();){var u=o.next();this._dirEdgeList.add(u);var d=u.getSym().getNode();d.isVisited()||e.push(d)}},tr.prototype.getNodes=function(){return this._nodes},tr.prototype.getDirectedEdges=function(){return this._dirEdgeList},tr.prototype.interfaces_=function(){return[H]},tr.prototype.getClass=function(){return tr};var Ae=function t(){if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var o=arguments[0];this.init(1),this.location[It.ON]=o}else if(arguments[0]instanceof t){var u=arguments[0];if(this.init(u.location.length),u!==null)for(var d=0;d<this.location.length;d++)this.location[d]=u.location[d]}}else if(arguments.length===3){var w=arguments[0],S=arguments[1],U=arguments[2];this.init(3),this.location[It.ON]=w,this.location[It.LEFT]=S,this.location[It.RIGHT]=U}};Ae.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Ae.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==Q.NONE)return!1;return!0},Ae.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===Q.NONE&&(this.location[e]=t)},Ae.prototype.isLine=function(){return this.location.length===1},Ae.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[It.ON]=this.location[It.ON],e[It.LEFT]=Q.NONE,e[It.RIGHT]=Q.NONE,this.location=e}for(var o=0;o<this.location.length;o++)this.location[o]===Q.NONE&&o<t.location.length&&(this.location[o]=t.location[o])},Ae.prototype.getLocations=function(){return this.location},Ae.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[It.LEFT];this.location[It.LEFT]=this.location[It.RIGHT],this.location[It.RIGHT]=t},Ae.prototype.toString=function(){var t=new Xt;return this.location.length>1&&t.append(Q.toLocationSymbol(this.location[It.LEFT])),t.append(Q.toLocationSymbol(this.location[It.ON])),this.location.length>1&&t.append(Q.toLocationSymbol(this.location[It.RIGHT])),t.toString()},Ae.prototype.setLocations=function(t,e,o){this.location[It.ON]=t,this.location[It.LEFT]=e,this.location[It.RIGHT]=o},Ae.prototype.get=function(t){return t<this.location.length?this.location[t]:Q.NONE},Ae.prototype.isArea=function(){return this.location.length>1},Ae.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===Q.NONE)return!0;return!1},Ae.prototype.setLocation=function(){if(arguments.length===1){var t=arguments[0];this.setLocation(It.ON,t)}else if(arguments.length===2){var e=arguments[0],o=arguments[1];this.location[e]=o}},Ae.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(Q.NONE)},Ae.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Ae.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Ae.prototype.interfaces_=function(){return[]},Ae.prototype.getClass=function(){return Ae};var be=function t(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Ae(e),this.elt[1]=new Ae(e)}else if(arguments[0]instanceof t){var o=arguments[0];this.elt[0]=new Ae(o.elt[0]),this.elt[1]=new Ae(o.elt[1])}}else if(arguments.length===2){var u=arguments[0],d=arguments[1];this.elt[0]=new Ae(Q.NONE),this.elt[1]=new Ae(Q.NONE),this.elt[u].setLocation(d)}else if(arguments.length===3){var w=arguments[0],S=arguments[1],U=arguments[2];this.elt[0]=new Ae(w,S,U),this.elt[1]=new Ae(w,S,U)}else if(arguments.length===4){var $=arguments[0],ut=arguments[1],_t=arguments[2],wt=arguments[3];this.elt[0]=new Ae(Q.NONE,Q.NONE,Q.NONE),this.elt[1]=new Ae(Q.NONE,Q.NONE,Q.NONE),this.elt[$].setLocations(ut,_t,wt)}};be.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},be.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},be.prototype.isNull=function(t){return this.elt[t].isNull()},be.prototype.setAllLocationsIfNull=function(){if(arguments.length===1){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(arguments.length===2){var e=arguments[0],o=arguments[1];this.elt[e].setAllLocationsIfNull(o)}},be.prototype.isLine=function(t){return this.elt[t].isLine()},be.prototype.merge=function(t){for(var e=0;e<2;e++)this.elt[e]===null&&t.elt[e]!==null?this.elt[e]=new Ae(t.elt[e]):this.elt[e].merge(t.elt[e])},be.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},be.prototype.getLocation=function(){if(arguments.length===1){var t=arguments[0];return this.elt[t].get(It.ON)}if(arguments.length===2){var e=arguments[0],o=arguments[1];return this.elt[e].get(o)}},be.prototype.toString=function(){var t=new Xt;return this.elt[0]!==null&&(t.append("A:"),t.append(this.elt[0].toString())),this.elt[1]!==null&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},be.prototype.isArea=function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var t=arguments[0];return this.elt[t].isArea()}},be.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},be.prototype.setLocation=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(It.ON,e)}else if(arguments.length===3){var o=arguments[0],u=arguments[1],d=arguments[2];this.elt[o].setLocation(u,d)}},be.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},be.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},be.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Ae(this.elt[t].location[0]))},be.prototype.interfaces_=function(){return[]},be.prototype.getClass=function(){return be},be.toLineLabel=function(t){for(var e=new be(Q.NONE),o=0;o<2;o++)e.setLocation(o,t.getLocation(o));return e};var Nn=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new St,this._pts=new St,this._label=new be(Q.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new St,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};Nn.prototype.computeRing=function(){if(this._ring!==null)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=tt.isCCW(this._ring.getCoordinates())},Nn.prototype.isIsolated=function(){return this._label.getGeometryCount()===1},Nn.prototype.computePoints=function(t){this._startDe=t;var e=t,o=!0;do{if(e===null)throw new Qn("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Qn("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var u=e.getLabel();C.isTrue(u.isArea()),this.mergeLabel(u),this.addPoints(e.getEdge(),e.isForward(),o),o=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},Nn.prototype.getLinearRing=function(){return this._ring},Nn.prototype.getCoordinate=function(t){return this._pts.get(t)},Nn.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},Nn.prototype.addPoints=function(t,e,o){var u=t.getCoordinates();if(e){var d=1;o&&(d=0);for(var w=d;w<u.length;w++)this._pts.add(u[w])}else{var S=u.length-2;o&&(S=u.length-1);for(var U=S;U>=0;U--)this._pts.add(u[U])}},Nn.prototype.isHole=function(){return this._isHole},Nn.prototype.setInResult=function(){var t=this._startDe;do t.getEdge().setInResult(!0),t=t.getNext();while(t!==this._startDe)},Nn.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t)||!tt.isPointInRing(t,e.getCoordinates()))return!1;for(var o=this._holes.iterator();o.hasNext();)if(o.next().containsPoint(t))return!1;return!0},Nn.prototype.addHole=function(t){this._holes.add(t)},Nn.prototype.isShell=function(){return this._shell===null},Nn.prototype.getLabel=function(){return this._label},Nn.prototype.getEdges=function(){return this._edges},Nn.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Nn.prototype.getShell=function(){return this._shell},Nn.prototype.mergeLabel=function(){if(arguments.length===1){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(arguments.length===2){var e=arguments[0],o=arguments[1],u=e.getLocation(o,It.RIGHT);if(u===Q.NONE)return null;if(this._label.getLocation(o)===Q.NONE)return this._label.setLocation(o,u),null}},Nn.prototype.setShell=function(t){this._shell=t,t!==null&&t.addHole(this)},Nn.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),o=0;o<this._holes.size();o++)e[o]=this._holes.get(o).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},Nn.prototype.interfaces_=function(){return[]},Nn.prototype.getClass=function(){return Nn};var ui=function(t){function e(){var o=arguments[0],u=arguments[1];t.call(this,o,u)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(o,u){o.setMinEdgeRing(u)},e.prototype.getNext=function(o){return o.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Nn),$o=function(t){function e(){var o=arguments[0],u=arguments[1];t.call(this,o,u)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var o=new St,u=this._startDe;do{if(u.getMinEdgeRing()===null){var d=new ui(u,this._geometryFactory);o.add(d)}u=u.getNext()}while(u!==this._startDe);return o},e.prototype.setEdgeRing=function(o,u){o.setEdgeRing(u)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var o=this._startDe;do o.getNode().getEdges().linkMinimalDirectedEdges(this),o=o.getNext();while(o!==this._startDe)},e.prototype.getNext=function(o){return o.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Nn),ie=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this._label=t}}};ie.prototype.setVisited=function(t){this._isVisited=t},ie.prototype.setInResult=function(t){this._isInResult=t},ie.prototype.isCovered=function(){return this._isCovered},ie.prototype.isCoveredSet=function(){return this._isCoveredSet},ie.prototype.setLabel=function(t){this._label=t},ie.prototype.getLabel=function(){return this._label},ie.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},ie.prototype.updateIM=function(t){C.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},ie.prototype.isInResult=function(){return this._isInResult},ie.prototype.isVisited=function(){return this._isVisited},ie.prototype.interfaces_=function(){return[]},ie.prototype.getClass=function(){return ie};var Wr=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var o=arguments[0],u=arguments[1];this._coord=o,this._edges=u,this._label=new be(0,Q.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var o=this.getEdges().getEdges().iterator();o.hasNext();)if(o.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return this._label.getGeometryCount()===1},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(o){o.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(o){},e.prototype.computeMergedLocation=function(o,u){var d=Q.NONE;if(d=this._label.getLocation(u),!o.isNull(u)){var w=o.getLocation(u);d!==Q.BOUNDARY&&(d=w)}return d},e.prototype.setLabel=function(){if(arguments.length!==2)return t.prototype.setLabel.apply(this,arguments);var o=arguments[0],u=arguments[1];this._label===null?this._label=new be(o,u):this._label.setLocation(o,u)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e){var o=arguments[0];this.mergeLabel(o._label)}else if(arguments[0]instanceof be)for(var u=arguments[0],d=0;d<2;d++){var w=this.computeMergedLocation(u,d);this._label.getLocation(d)===Q.NONE&&this._label.setLocation(d,w)}},e.prototype.add=function(o){this._edges.insert(o),o.setNode(this)},e.prototype.setLabelBoundary=function(o){if(this._label===null)return null;var u=Q.NONE;this._label!==null&&(u=this._label.getLocation(o));var d=null;switch(u){case Q.BOUNDARY:d=Q.INTERIOR;break;case Q.INTERIOR:default:d=Q.BOUNDARY}this._label.setLocation(o,d)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ie),Pe=function(){this.nodeMap=new T,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};Pe.prototype.find=function(t){return this.nodeMap.get(t)},Pe.prototype.addNode=function(){if(arguments[0]instanceof X){var t=arguments[0],e=this.nodeMap.get(t);return e===null&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof Wr){var o=arguments[0],u=this.nodeMap.get(o.getCoordinate());return u===null?(this.nodeMap.put(o.getCoordinate(),o),o):(u.mergeLabel(o),u)}},Pe.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},Pe.prototype.iterator=function(){return this.nodeMap.values().iterator()},Pe.prototype.values=function(){return this.nodeMap.values()},Pe.prototype.getBoundaryNodes=function(t){for(var e=new St,o=this.iterator();o.hasNext();){var u=o.next();u.getLabel().getLocation(t)===Q.BOUNDARY&&e.add(u)}return e},Pe.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},Pe.prototype.interfaces_=function(){return[]},Pe.prototype.getClass=function(){return Pe};var h=function(){},p={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},h.isNorthern=function(t){return t===h.NE||t===h.NW},h.isOpposite=function(t,e){return t===e?!1:(t-e+4)%4===2},h.commonHalfPlane=function(t,e){if(t===e)return t;if((t-e+4)%4===2)return-1;var o=t<e?t:e;return o===0&&(t>e?t:e)===3?3:o},h.isInHalfPlane=function(t,e){return e===h.SE?t===h.SE||t===h.SW:t===e||t===e+1},h.quadrant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1];if(t===0&&e===0)throw new D("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?h.NE:h.SE:e>=0?h.NW:h.SW}if(arguments[0]instanceof X&&arguments[1]instanceof X){var o=arguments[0],u=arguments[1];if(u.x===o.x&&u.y===o.y)throw new D("Cannot compute the quadrant for two identical points "+o);return u.x>=o.x?u.y>=o.y?h.NE:h.SE:u.y>=o.y?h.NW:h.SW}},p.NE.get=function(){return 0},p.NW.get=function(){return 1},p.SW.get=function(){return 2},p.SE.get=function(){return 3},Object.defineProperties(h,p);var _=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var t=arguments[0];this._edge=t}else if(arguments.length===3){var e=arguments[0],o=arguments[1],u=arguments[2];this._edge=e,this.init(o,u),this._label=null}else if(arguments.length===4){var d=arguments[0],w=arguments[1],S=arguments[2],U=arguments[3];this._edge=d,this.init(w,S),this._label=U}};_.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:tt.computeOrientation(t._p0,t._p1,this._p1)},_.prototype.getDy=function(){return this._dy},_.prototype.getCoordinate=function(){return this._p0},_.prototype.setNode=function(t){this._node=t},_.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),o=this.getClass().getName(),u=o.lastIndexOf("."),d=o.substring(u+1);t.print("  "+d+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},_.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},_.prototype.getDirectedCoordinate=function(){return this._p1},_.prototype.getDx=function(){return this._dx},_.prototype.getLabel=function(){return this._label},_.prototype.getEdge=function(){return this._edge},_.prototype.getQuadrant=function(){return this._quadrant},_.prototype.getNode=function(){return this._node},_.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),o=e.lastIndexOf(".");return"  "+e.substring(o+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},_.prototype.computeLabel=function(t){},_.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=h.quadrant(this._dx,this._dy),C.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")},_.prototype.interfaces_=function(){return[H]},_.prototype.getClass=function(){return _};var E=function(t){function e(){var o=arguments[0],u=arguments[1];if(t.call(this,o),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=u,u)this.init(o.getCoordinate(0),o.getCoordinate(1));else{var d=o.getNumPoints()-1;this.init(o.getCoordinate(d),o.getCoordinate(d-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(o){return this._depth[o]},e.prototype.setVisited=function(o){this._isVisited=o},e.prototype.computeDirectedLabel=function(){this._label=new be(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(o,u){if(this._depth[o]!==-999&&this._depth[o]!==u)throw new Qn("assigned depths do not match",this.getCoordinate());this._depth[o]=u},e.prototype.isInteriorAreaEdge=function(){for(var o=!0,u=0;u<2;u++)this._label.isArea(u)&&this._label.getLocation(u,It.LEFT)===Q.INTERIOR&&this._label.getLocation(u,It.RIGHT)===Q.INTERIOR||(o=!1);return o},e.prototype.setNextMin=function(o){this._nextMin=o},e.prototype.print=function(o){t.prototype.print.call(this,o),o.print(" "+this._depth[It.LEFT]+"/"+this._depth[It.RIGHT]),o.print(" ("+this.getDepthDelta()+")"),this._isInResult&&o.print(" inResult")},e.prototype.setMinEdgeRing=function(o){this._minEdgeRing=o},e.prototype.isLineEdge=function(){var o=this._label.isLine(0)||this._label.isLine(1),u=!this._label.isArea(0)||this._label.allPositionsEqual(0,Q.EXTERIOR),d=!this._label.isArea(1)||this._label.allPositionsEqual(1,Q.EXTERIOR);return o&&u&&d},e.prototype.setEdgeRing=function(o){this._edgeRing=o},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var o=this._edge.getDepthDelta();return this._isForward||(o=-o),o},e.prototype.setInResult=function(o){this._isInResult=o},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(o){this.print(o),o.print(" "),this._isForward?this._edge.print(o):this._edge.printReverse(o)},e.prototype.setSym=function(o){this._sym=o},e.prototype.setVisitedEdge=function(o){this.setVisited(o),this._sym.setVisited(o)},e.prototype.setEdgeDepths=function(o,u){var d=this.getEdge().getDepthDelta();this._isForward||(d=-d);var w=1;o===It.LEFT&&(w=-1);var S=It.opposite(o),U=u+d*w;this.setDepth(o,u),this.setDepth(S,U)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(o){this._next=o},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(o,u){return o===Q.EXTERIOR&&u===Q.INTERIOR?1:o===Q.INTERIOR&&u===Q.EXTERIOR?-1:0},e}(_),I=function(){};I.prototype.createNode=function(t){return new Wr(t,null)},I.prototype.interfaces_=function(){return[]},I.prototype.getClass=function(){return I};var V=function(){if(this._edges=new St,this._nodes=null,this._edgeEndList=new St,arguments.length===0)this._nodes=new Pe(new I);else if(arguments.length===1){var t=arguments[0];this._nodes=new Pe(t)}};V.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var o=this._edges.get(e);o.print(t),o.eiList.print(t)}},V.prototype.find=function(t){return this._nodes.find(t)},V.prototype.addNode=function(){if(arguments[0]instanceof Wr){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof X){var e=arguments[0];return this._nodes.addNode(e)}},V.prototype.getNodeIterator=function(){return this._nodes.iterator()},V.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},V.prototype.debugPrintln=function(t){fe.out.println(t)},V.prototype.isBoundaryNode=function(t,e){var o=this._nodes.find(e);if(o===null)return!1;var u=o.getLabel();return u!==null&&u.getLocation(t)===Q.BOUNDARY},V.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},V.prototype.matchInSameDirection=function(t,e,o,u){return!!t.equals(o)&&tt.computeOrientation(t,e,u)===tt.COLLINEAR&&h.quadrant(t,e)===h.quadrant(o,u)},V.prototype.getEdgeEnds=function(){return this._edgeEndList},V.prototype.debugPrint=function(t){fe.out.print(t)},V.prototype.getEdgeIterator=function(){return this._edges.iterator()},V.prototype.findEdgeInSameDirection=function(t,e){for(var o=0;o<this._edges.size();o++){var u=this._edges.get(o),d=u.getCoordinates();if(this.matchInSameDirection(t,e,d[0],d[1])||this.matchInSameDirection(t,e,d[d.length-1],d[d.length-2]))return u}return null},V.prototype.insertEdge=function(t){this._edges.add(t)},V.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var o=e.next();if(o.getEdge()===t)return o}return null},V.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var o=e.next();this._edges.add(o);var u=new E(o,!0),d=new E(o,!1);u.setSym(d),d.setSym(u),this.add(u),this.add(d)}},V.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},V.prototype.getNodes=function(){return this._nodes.values()},V.prototype.findEdge=function(t,e){for(var o=0;o<this._edges.size();o++){var u=this._edges.get(o),d=u.getCoordinates();if(t.equals(d[0])&&e.equals(d[1]))return u}return null},V.prototype.interfaces_=function(){return[]},V.prototype.getClass=function(){return V},V.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var nt=function(){this._geometryFactory=null,this._shellList=new St;var t=arguments[0];this._geometryFactory=t};nt.prototype.sortShellsAndHoles=function(t,e,o){for(var u=t.iterator();u.hasNext();){var d=u.next();d.isHole()?o.add(d):e.add(d)}},nt.prototype.computePolygons=function(t){for(var e=new St,o=t.iterator();o.hasNext();){var u=o.next().toPolygon(this._geometryFactory);e.add(u)}return e},nt.prototype.placeFreeHoles=function(t,e){for(var o=e.iterator();o.hasNext();){var u=o.next();if(u.getShell()===null){var d=this.findEdgeRingContaining(u,t);if(d===null)throw new Qn("unable to assign hole to a shell",u.getCoordinate(0));u.setShell(d)}}},nt.prototype.buildMinimalEdgeRings=function(t,e,o){for(var u=new St,d=t.iterator();d.hasNext();){var w=d.next();if(w.getMaxNodeDegree()>2){w.linkDirectedEdgesForMinimalEdgeRings();var S=w.buildMinimalRings(),U=this.findShell(S);U!==null?(this.placePolygonHoles(U,S),e.add(U)):o.addAll(S)}else u.add(w)}return u},nt.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},nt.prototype.buildMaximalEdgeRings=function(t){for(var e=new St,o=t.iterator();o.hasNext();){var u=o.next();if(u.isInResult()&&u.getLabel().isArea()&&u.getEdgeRing()===null){var d=new $o(u,this._geometryFactory);e.add(d),d.setInResult()}}return e},nt.prototype.placePolygonHoles=function(t,e){for(var o=e.iterator();o.hasNext();){var u=o.next();u.isHole()&&u.setShell(t)}},nt.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},nt.prototype.findEdgeRingContaining=function(t,e){for(var o=t.getLinearRing(),u=o.getEnvelopeInternal(),d=o.getCoordinateN(0),w=null,S=null,U=e.iterator();U.hasNext();){var $=U.next(),ut=$.getLinearRing(),_t=ut.getEnvelopeInternal();w!==null&&(S=w.getLinearRing().getEnvelopeInternal());var wt=!1;_t.contains(u)&&tt.isPointInRing(d,ut.getCoordinates())&&(wt=!0),wt&&(w===null||S.contains(_t))&&(w=$)}return w},nt.prototype.findShell=function(t){for(var e=0,o=null,u=t.iterator();u.hasNext();){var d=u.next();d.isHole()||(o=d,e++)}return C.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),o},nt.prototype.add=function(){if(arguments.length===1){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(arguments.length===2){var e=arguments[0],o=arguments[1];V.linkResultDirectedEdges(o);var u=this.buildMaximalEdgeRings(e),d=new St,w=this.buildMinimalEdgeRings(u,this._shellList,d);this.sortShellsAndHoles(w,this._shellList,d),this.placeFreeHoles(this._shellList,d)}},nt.prototype.interfaces_=function(){return[]},nt.prototype.getClass=function(){return nt};var it=function(){};it.prototype.getBounds=function(){},it.prototype.interfaces_=function(){return[]},it.prototype.getClass=function(){return it};var rt=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};rt.prototype.getItem=function(){return this._item},rt.prototype.getBounds=function(){return this._bounds},rt.prototype.interfaces_=function(){return[it,n]},rt.prototype.getClass=function(){return rt};var ot=function(){this._size=null,this._items=null,this._size=0,this._items=new St,this._items.add(null)};ot.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},ot.prototype.size=function(){return this._size},ot.prototype.reorder=function(t){for(var e=null,o=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(o)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,o)},ot.prototype.clear=function(){this._size=0,this._items.clear()},ot.prototype.isEmpty=function(){return this._size===0},ot.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},ot.prototype.interfaces_=function(){return[]},ot.prototype.getClass=function(){return ot};var dt=function(){};dt.prototype.visitItem=function(t){},dt.prototype.interfaces_=function(){return[]},dt.prototype.getClass=function(){return dt};var Pt=function(){};Pt.prototype.insert=function(t,e){},Pt.prototype.remove=function(t,e){},Pt.prototype.query=function(){},Pt.prototype.interfaces_=function(){return[]},Pt.prototype.getClass=function(){return Pt};var yt=function(){if(this._childBoundables=new St,this._bounds=null,this._level=null,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this._level=t}}},At={serialVersionUID:{configurable:!0}};yt.prototype.getLevel=function(){return this._level},yt.prototype.size=function(){return this._childBoundables.size()},yt.prototype.getChildBoundables=function(){return this._childBoundables},yt.prototype.addChildBoundable=function(t){C.isTrue(this._bounds===null),this._childBoundables.add(t)},yt.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},yt.prototype.getBounds=function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds},yt.prototype.interfaces_=function(){return[it,n]},yt.prototype.getClass=function(){return yt},At.serialVersionUID.get=function(){return 6493722185909574e3},Object.defineProperties(yt,At);var Gt=function(){};Gt.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},Gt.min=function(t){return Gt.sort(t),t.get(0)},Gt.sort=function(t,e){var o=t.toArray();e?oi.sort(o,e):oi.sort(o);for(var u=t.iterator(),d=0,w=o.length;d<w;d++)u.next(),u.set(o[d])},Gt.singletonList=function(t){var e=new St;return e.add(t),e};var te=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],o=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=o,this._distance=this.distance()};te.prototype.expandToQueue=function(t,e){var o=te.isComposite(this._boundable1),u=te.isComposite(this._boundable2);if(o&&u)return te.area(this._boundable1)>te.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(o)return this.expand(this._boundable1,this._boundable2,t,e),null;if(u)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new D("neither boundable is composite")},te.prototype.isLeaves=function(){return!(te.isComposite(this._boundable1)||te.isComposite(this._boundable2))},te.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},te.prototype.expand=function(t,e,o,u){for(var d=t.getChildBoundables().iterator();d.hasNext();){var w=d.next(),S=new te(w,e,this._itemDistance);S.getDistance()<u&&o.add(S)}},te.prototype.getBoundable=function(t){return t===0?this._boundable1:this._boundable2},te.prototype.getDistance=function(){return this._distance},te.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},te.prototype.interfaces_=function(){return[H]},te.prototype.getClass=function(){return te},te.area=function(t){return t.getBounds().getArea()},te.isComposite=function(t){return t instanceof yt};var Dt=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new St,this._nodeCapacity=null,arguments.length===0){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(arguments.length===1){var o=arguments[0];C.isTrue(o>1,"Node capacity must be greater than 1"),this._nodeCapacity=o}},Rn={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};Dt.prototype.getNodeCapacity=function(){return this._nodeCapacity},Dt.prototype.lastNode=function(t){return t.get(t.size()-1)},Dt.prototype.size=function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var o=e.next();o instanceof yt?t+=this.size(o):o instanceof rt&&(t+=1)}return t}},Dt.prototype.removeItem=function(t,e){for(var o=null,u=t.getChildBoundables().iterator();u.hasNext();){var d=u.next();d instanceof rt&&d.getItem()===e&&(o=d)}return o!==null&&(t.getChildBoundables().remove(o),!0)},Dt.prototype.itemsTree=function(){if(arguments.length===0){this.build();var t=this.itemsTree(this._root);return t===null?new St:t}if(arguments.length===1){for(var e=arguments[0],o=new St,u=e.getChildBoundables().iterator();u.hasNext();){var d=u.next();if(d instanceof yt){var w=this.itemsTree(d);w!==null&&o.add(w)}else d instanceof rt?o.add(d.getItem()):C.shouldNeverReachHere()}return o.size()<=0?null:o}},Dt.prototype.insert=function(t,e){C.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new rt(t,e))},Dt.prototype.boundablesAtLevel=function(){if(arguments.length===1){var t=arguments[0],e=new St;return this.boundablesAtLevel(t,this._root,e),e}if(arguments.length===3){var o=arguments[0],u=arguments[1],d=arguments[2];if(C.isTrue(o>-2),u.getLevel()===o)return d.add(u),null;for(var w=u.getChildBoundables().iterator();w.hasNext();){var S=w.next();S instanceof yt?this.boundablesAtLevel(o,S,d):(C.isTrue(S instanceof rt),o===-1&&d.add(S))}return null}},Dt.prototype.query=function(){if(arguments.length===1){var t=arguments[0];this.build();var e=new St;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e}if(arguments.length===2){var o=arguments[0],u=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),o)&&this.query(o,this._root,u)}else if(arguments.length===3){if(ct(arguments[2],dt)&&arguments[0]instanceof Object&&arguments[1]instanceof yt)for(var d=arguments[0],w=arguments[1],S=arguments[2],U=w.getChildBoundables(),$=0;$<U.size();$++){var ut=U.get($);this.getIntersectsOp().intersects(ut.getBounds(),d)&&(ut instanceof yt?this.query(d,ut,S):ut instanceof rt?S.visitItem(ut.getItem()):C.shouldNeverReachHere())}else if(ct(arguments[2],we)&&arguments[0]instanceof Object&&arguments[1]instanceof yt)for(var _t=arguments[0],wt=arguments[1],zt=arguments[2],qt=wt.getChildBoundables(),ne=0;ne<qt.size();ne++){var oe=qt.get(ne);this.getIntersectsOp().intersects(oe.getBounds(),_t)&&(oe instanceof yt?this.query(_t,oe,zt):oe instanceof rt?zt.add(oe.getItem()):C.shouldNeverReachHere())}}},Dt.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},Dt.prototype.getRoot=function(){return this.build(),this._root},Dt.prototype.remove=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(arguments.length===3){var o=arguments[0],u=arguments[1],d=arguments[2],w=this.removeItem(u,d);if(w)return!0;for(var S=null,U=u.getChildBoundables().iterator();U.hasNext();){var $=U.next();if(this.getIntersectsOp().intersects($.getBounds(),o)&&$ instanceof yt&&(w=this.remove(o,$,d))){S=$;break}}return S!==null&&S.getChildBoundables().isEmpty()&&u.getChildBoundables().remove(S),w}},Dt.prototype.createHigherLevels=function(t,e){C.isTrue(!t.isEmpty());var o=this.createParentBoundables(t,e+1);return o.size()===1?o.get(0):this.createHigherLevels(o,e+1)},Dt.prototype.depth=function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var o=e.next();if(o instanceof yt){var u=this.depth(o);u>t&&(t=u)}}return t+1}},Dt.prototype.createParentBoundables=function(t,e){C.isTrue(!t.isEmpty());var o=new St;o.add(this.createNode(e));var u=new St(t);Gt.sort(u,this.getComparator());for(var d=u.iterator();d.hasNext();){var w=d.next();this.lastNode(o).getChildBoundables().size()===this.getNodeCapacity()&&o.add(this.createNode(e)),this.lastNode(o).addChildBoundable(w)}return o},Dt.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},Dt.prototype.interfaces_=function(){return[n]},Dt.prototype.getClass=function(){return Dt},Dt.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},Rn.IntersectsOp.get=function(){return Tn},Rn.serialVersionUID.get=function(){return-3886435814360241e3},Rn.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(Dt,Rn);var Tn=function(){},Ie=function(){};Ie.prototype.distance=function(t,e){},Ie.prototype.interfaces_=function(){return[]},Ie.prototype.getClass=function(){return Ie};var Ar=function(t){function e(u){u=u||e.DEFAULT_NODE_CAPACITY,t.call(this,u)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var o={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return e.prototype.createParentBoundablesFromVerticalSlices=function(u,d){C.isTrue(u.length>0);for(var w=new St,S=0;S<u.length;S++)w.addAll(this.createParentBoundablesFromVerticalSlice(u[S],d));return w},e.prototype.createNode=function(u){return new Si(u)},e.prototype.size=function(){return arguments.length===0?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(arguments.length!==2)return t.prototype.insert.apply(this,arguments);var u=arguments[0],d=arguments[1];if(u.isNull())return null;t.prototype.insert.call(this,u,d)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(u,d){for(var w=Math.trunc(Math.ceil(u.size()/d)),S=new Array(d).fill(null),U=u.iterator(),$=0;$<d;$++){S[$]=new St;for(var ut=0;U.hasNext()&&ut<w;){var _t=U.next();S[$].add(_t),ut++}}return S},e.prototype.query=function(){if(arguments.length===1){var u=arguments[0];return t.prototype.query.call(this,u)}if(arguments.length===2){var d=arguments[0],w=arguments[1];t.prototype.query.call(this,d,w)}else if(arguments.length===3){if(ct(arguments[2],dt)&&arguments[0]instanceof Object&&arguments[1]instanceof yt){var S=arguments[0],U=arguments[1],$=arguments[2];t.prototype.query.call(this,S,U,$)}else if(ct(arguments[2],we)&&arguments[0]instanceof Object&&arguments[1]instanceof yt){var ut=arguments[0],_t=arguments[1],wt=arguments[2];t.prototype.query.call(this,ut,_t,wt)}}},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(u,d){return t.prototype.createParentBoundables.call(this,u,d)},e.prototype.remove=function(){if(arguments.length===2){var u=arguments[0],d=arguments[1];return t.prototype.remove.call(this,u,d)}return t.prototype.remove.apply(this,arguments)},e.prototype.depth=function(){return arguments.length===0?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(u,d){C.isTrue(!u.isEmpty());var w=Math.trunc(Math.ceil(u.size()/this.getNodeCapacity())),S=new St(u);Gt.sort(S,e.xComparator);var U=this.verticalSlices(S,Math.trunc(Math.ceil(Math.sqrt(w))));return this.createParentBoundablesFromVerticalSlices(U,d)},e.prototype.nearestNeighbour=function(){if(arguments.length===1){if(ct(arguments[0],Ie)){var u=arguments[0],d=new te(this.getRoot(),this.getRoot(),u);return this.nearestNeighbour(d)}if(arguments[0]instanceof te){var w=arguments[0];return this.nearestNeighbour(w,A.POSITIVE_INFINITY)}}else if(arguments.length===2){if(arguments[0]instanceof e&&ct(arguments[1],Ie)){var S=arguments[0],U=arguments[1],$=new te(this.getRoot(),S.getRoot(),U);return this.nearestNeighbour($)}if(arguments[0]instanceof te&&typeof arguments[1]=="number"){var ut=arguments[0],_t=arguments[1],wt=null,zt=new ot;for(zt.add(ut);!zt.isEmpty()&&_t>0;){var qt=zt.poll(),ne=qt.getDistance();if(ne>=_t)break;qt.isLeaves()?(_t=ne,wt=qt):qt.expandToQueue(zt,_t)}return[wt.getBoundable(0).getItem(),wt.getBoundable(1).getItem()]}}else if(arguments.length===3){var oe=arguments[0],In=arguments[1],xr=arguments[2],vi=new rt(oe,In),Ho=new te(this.getRoot(),vi,xr);return this.nearestNeighbour(Ho)[0]}},e.prototype.interfaces_=function(){return[Pt,n]},e.prototype.getClass=function(){return e},e.centreX=function(u){return e.avg(u.getMinX(),u.getMaxX())},e.avg=function(u,d){return(u+d)/2},e.centreY=function(u){return e.avg(u.getMinY(),u.getMaxY())},o.STRtreeNode.get=function(){return Si},o.serialVersionUID.get=function(){return 0x39920f7d5f261e0},o.xComparator.get=function(){return{interfaces_:function(){return[et]},compare:function(u,d){return t.compareDoubles(e.centreX(u.getBounds()),e.centreX(d.getBounds()))}}},o.yComparator.get=function(){return{interfaces_:function(){return[et]},compare:function(u,d){return t.compareDoubles(e.centreY(u.getBounds()),e.centreY(d.getBounds()))}}},o.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(u,d){return u.intersects(d)}}},o.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,o),e}(Dt),Si=function(t){function e(){var o=arguments[0];t.call(this,o)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var o=null,u=this.getChildBoundables().iterator();u.hasNext();){var d=u.next();o===null?o=new Bt(d.getBounds()):o.expandToInclude(d.getBounds())}return o},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(yt),jn=function(){};jn.prototype.interfaces_=function(){return[]},jn.prototype.getClass=function(){return jn},jn.relativeSign=function(t,e){return t<e?-1:t>e?1:0},jn.compare=function(t,e,o){if(e.equals2D(o))return 0;var u=jn.relativeSign(e.x,o.x),d=jn.relativeSign(e.y,o.y);switch(t){case 0:return jn.compareValue(u,d);case 1:return jn.compareValue(d,u);case 2:return jn.compareValue(d,-u);case 3:return jn.compareValue(-u,d);case 4:return jn.compareValue(-u,-d);case 5:return jn.compareValue(-d,-u);case 6:return jn.compareValue(-d,u);case 7:return jn.compareValue(u,-d)}return C.shouldNeverReachHere("invalid octant value"),0},jn.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var no=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],o=arguments[2],u=arguments[3];this._segString=t,this.coord=new X(e),this.segmentIndex=o,this._segmentOctant=u,this._isInterior=!e.equals2D(t.getCoordinate(o))};no.prototype.getCoordinate=function(){return this.coord},no.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},no.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:jn.compare(this._segmentOctant,this.coord,e.coord)},no.prototype.isEndPoint=function(t){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===t},no.prototype.isInterior=function(){return this._isInterior},no.prototype.interfaces_=function(){return[H]},no.prototype.getClass=function(){return no};var lr=function(){this._nodeMap=new T,this._edge=null;var t=arguments[0];this._edge=t};lr.prototype.getSplitCoordinates=function(){var t=new Xn;this.addEndpoints();for(var e=this.iterator(),o=e.next();e.hasNext();){var u=e.next();this.addEdgeCoordinates(o,u,t),o=u}return t.toCoordinateArray()},lr.prototype.addCollapsedNodes=function(){var t=new St;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var o=e.next().intValue();this.add(this._edge.getCoordinate(o),o)}},lr.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},lr.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var o=this._edge.getCoordinate(e),u=this._edge.getCoordinate(e+2);o.equals2D(u)&&t.add(new ft(e+1))}},lr.prototype.addEdgeCoordinates=function(t,e,o){var u=this._edge.getCoordinate(e.segmentIndex),d=e.isInterior()||!e.coord.equals2D(u);o.add(new X(t.coord),!1);for(var w=t.segmentIndex+1;w<=e.segmentIndex;w++)o.add(this._edge.getCoordinate(w));d&&o.add(new X(e.coord))},lr.prototype.iterator=function(){return this._nodeMap.values().iterator()},lr.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),o=e.next();e.hasNext();){var u=e.next(),d=this.createSplitEdge(o,u);t.add(d),o=u}},lr.prototype.findCollapseIndex=function(t,e,o){if(!t.coord.equals2D(e.coord))return!1;var u=e.segmentIndex-t.segmentIndex;return e.isInterior()||u--,u===1&&(o[0]=t.segmentIndex+1,!0)},lr.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),o=this.iterator(),u=o.next();o.hasNext();){var d=o.next();this.findCollapseIndex(u,d,e)&&t.add(new ft(e[0])),u=d}},lr.prototype.getEdge=function(){return this._edge},lr.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},lr.prototype.createSplitEdge=function(t,e){var o=e.segmentIndex-t.segmentIndex+2,u=this._edge.getCoordinate(e.segmentIndex),d=e.isInterior()||!e.coord.equals2D(u);d||o--;var w=new Array(o).fill(null),S=0;w[S++]=new X(t.coord);for(var U=t.segmentIndex+1;U<=e.segmentIndex;U++)w[S++]=this._edge.getCoordinate(U);return d&&(w[S]=new X(e.coord)),new Zn(w,this._edge.getData())},lr.prototype.add=function(t,e){var o=new no(this._edge,t,e,this._edge.getSegmentOctant(e)),u=this._nodeMap.get(o);return u!==null?(C.isTrue(u.coord.equals2D(t),"Found equal nodes with different coordinates"),u):(this._nodeMap.put(o,o),o)},lr.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),o=t.get(0).getCoordinate(0);if(!o.equals2D(e[0]))throw new ht("bad split edge start point at "+o);var u=t.get(t.size()-1).getCoordinates(),d=u[u.length-1];if(!d.equals2D(e[e.length-1]))throw new ht("bad split edge end point at "+d)},lr.prototype.interfaces_=function(){return[]},lr.prototype.getClass=function(){return lr};var ki=function(){};ki.prototype.interfaces_=function(){return[]},ki.prototype.getClass=function(){return ki},ki.octant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1];if(t===0&&e===0)throw new D("Cannot compute the octant for point ( "+t+", "+e+" )");var o=Math.abs(t),u=Math.abs(e);return t>=0?e>=0?o>=u?0:1:o>=u?7:6:e>=0?o>=u?3:2:o>=u?4:5}if(arguments[0]instanceof X&&arguments[1]instanceof X){var d=arguments[0],w=arguments[1],S=w.x-d.x,U=w.y-d.y;if(S===0&&U===0)throw new D("Cannot compute the octant for two identical points "+d);return ki.octant(S,U)}};var Gi=function(){};Gi.prototype.getCoordinates=function(){},Gi.prototype.size=function(){},Gi.prototype.getCoordinate=function(t){},Gi.prototype.isClosed=function(){},Gi.prototype.setData=function(t){},Gi.prototype.getData=function(){},Gi.prototype.interfaces_=function(){return[]},Gi.prototype.getClass=function(){return Gi};var Eo=function(){};Eo.prototype.addIntersection=function(t,e){},Eo.prototype.interfaces_=function(){return[Gi]},Eo.prototype.getClass=function(){return Eo};var Zn=function(){this._nodeList=new lr(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Zn.prototype.getCoordinates=function(){return this._pts},Zn.prototype.size=function(){return this._pts.length},Zn.prototype.getCoordinate=function(t){return this._pts[t]},Zn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Zn.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},Zn.prototype.setData=function(t){this._data=t},Zn.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:ki.octant(t,e)},Zn.prototype.getData=function(){return this._data},Zn.prototype.addIntersection=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(arguments.length===4){var o=arguments[0],u=arguments[1],d=arguments[3],w=new X(o.getIntersection(d));this.addIntersection(w,u)}},Zn.prototype.toString=function(){return Ht.toLineString(new le(this._pts))},Zn.prototype.getNodeList=function(){return this._nodeList},Zn.prototype.addIntersectionNode=function(t,e){var o=e,u=o+1;if(u<this._pts.length){var d=this._pts[u];t.equals2D(d)&&(o=u)}return this._nodeList.add(t,o)},Zn.prototype.addIntersections=function(t,e,o){for(var u=0;u<t.getIntersectionNum();u++)this.addIntersection(t,e,o,u)},Zn.prototype.interfaces_=function(){return[Eo]},Zn.prototype.getClass=function(){return Zn},Zn.getNodedSubstrings=function(){if(arguments.length===1){var t=arguments[0],e=new St;return Zn.getNodedSubstrings(t,e),e}if(arguments.length===2)for(var o=arguments[0],u=arguments[1],d=o.iterator();d.hasNext();)d.next().getNodeList().addSplitEdges(u)};var Yt=function(){if(this.p0=null,this.p1=null,arguments.length===0)this.p0=new X,this.p1=new X;else if(arguments.length===1){var t=arguments[0];this.p0=new X(t.p0),this.p1=new X(t.p1)}else if(arguments.length===2)this.p0=arguments[0],this.p1=arguments[1];else if(arguments.length===4){var e=arguments[0],o=arguments[1],u=arguments[2],d=arguments[3];this.p0=new X(e,o),this.p1=new X(u,d)}},aa={serialVersionUID:{configurable:!0}};Yt.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},Yt.prototype.orientationIndex=function(){if(arguments[0]instanceof Yt){var t=arguments[0],e=tt.orientationIndex(this.p0,this.p1,t.p0),o=tt.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&o>=0||e<=0&&o<=0?Math.max(e,o):0}if(arguments[0]instanceof X){var u=arguments[0];return tt.orientationIndex(this.p0,this.p1,u)}},Yt.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},Yt.prototype.isVertical=function(){return this.p0.x===this.p1.x},Yt.prototype.equals=function(t){if(!(t instanceof Yt))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},Yt.prototype.intersection=function(t){var e=new F;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},Yt.prototype.project=function(){if(arguments[0]instanceof X){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new X(t);var e=this.projectionFactor(t),o=new X;return o.x=this.p0.x+e*(this.p1.x-this.p0.x),o.y=this.p0.y+e*(this.p1.y-this.p0.y),o}if(arguments[0]instanceof Yt){var u=arguments[0],d=this.projectionFactor(u.p0),w=this.projectionFactor(u.p1);if(d>=1&&w>=1||d<=0&&w<=0)return null;var S=this.project(u.p0);d<0&&(S=this.p0),d>1&&(S=this.p1);var U=this.project(u.p1);return w<0&&(U=this.p0),w>1&&(U=this.p1),new Yt(S,U)}},Yt.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},Yt.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},Yt.prototype.getCoordinate=function(t){return t===0?this.p0:this.p1},Yt.prototype.distancePerpendicular=function(t){return tt.distancePointLinePerpendicular(t,this.p0,this.p1)},Yt.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},Yt.prototype.midPoint=function(){return Yt.midPoint(this.p0,this.p1)},Yt.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,u=e*e+o*o;return u<=0?A.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*o)/u},Yt.prototype.closestPoints=function(t){var e=this.intersection(t);if(e!==null)return[e,e];var o=new Array(2).fill(null),u=A.MAX_VALUE,d=null,w=this.closestPoint(t.p0);u=w.distance(t.p0),o[0]=w,o[1]=t.p0;var S=this.closestPoint(t.p1);(d=S.distance(t.p1))<u&&(u=d,o[0]=S,o[1]=t.p1);var U=t.closestPoint(this.p0);(d=U.distance(this.p0))<u&&(u=d,o[0]=this.p0,o[1]=U);var $=t.closestPoint(this.p1);return(d=$.distance(this.p1))<u&&(u=d,o[0]=this.p1,o[1]=$),o},Yt.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},Yt.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},Yt.prototype.getLength=function(){return this.p0.distance(this.p1)},Yt.prototype.compareTo=function(t){var e=t,o=this.p0.compareTo(e.p0);return o!==0?o:this.p1.compareTo(e.p1)},Yt.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},Yt.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},Yt.prototype.lineIntersection=function(t){try{return ke.intersection(this.p0,this.p1,t.p0,t.p1)}catch(e){if(!(e instanceof Cn))throw e}return null},Yt.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},Yt.prototype.pointAlongOffset=function(t,e){var o=this.p0.x+t*(this.p1.x-this.p0.x),u=this.p0.y+t*(this.p1.y-this.p0.y),d=this.p1.x-this.p0.x,w=this.p1.y-this.p0.y,S=Math.sqrt(d*d+w*w),U=0,$=0;if(e!==0){if(S<=0)throw new Error("Cannot compute offset from zero-length line segment");U=e*d/S,$=e*w/S}return new X(o-$,u+U)},Yt.prototype.setCoordinates=function(){if(arguments.length===1){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(arguments.length===2){var e=arguments[0],o=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=o.x,this.p1.y=o.y}},Yt.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||A.isNaN(e))&&(e=1),e},Yt.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},Yt.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},Yt.prototype.distance=function(){if(arguments[0]instanceof Yt){var t=arguments[0];return tt.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof X){var e=arguments[0];return tt.distancePointLine(e,this.p0,this.p1)}},Yt.prototype.pointAlong=function(t){var e=new X;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},Yt.prototype.hashCode=function(){var t=A.doubleToLongBits(this.p0.x);t^=31*A.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),o=A.doubleToLongBits(this.p1.x);return o^=31*A.doubleToLongBits(this.p1.y),e^(Math.trunc(o)^Math.trunc(o>>32))},Yt.prototype.interfaces_=function(){return[H,n]},Yt.prototype.getClass=function(){return Yt},Yt.midPoint=function(t,e){return new X((t.x+e.x)/2,(t.y+e.y)/2)},aa.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(Yt,aa);var Qo=function(){this.tempEnv1=new Bt,this.tempEnv2=new Bt,this._overlapSeg1=new Yt,this._overlapSeg2=new Yt};Qo.prototype.overlap=function(){if(arguments.length!==2){if(arguments.length===4){var t=arguments[0],e=arguments[1],o=arguments[2],u=arguments[3];t.getLineSegment(e,this._overlapSeg1),o.getLineSegment(u,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}},Qo.prototype.interfaces_=function(){return[]},Qo.prototype.getClass=function(){return Qo};var hr=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],o=arguments[2],u=arguments[3];this._pts=t,this._start=e,this._end=o,this._context=u};hr.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},hr.prototype.computeSelect=function(t,e,o,u){var d=this._pts[e],w=this._pts[o];if(u.tempEnv1.init(d,w),o-e==1)return u.select(this,e),null;if(!t.intersects(u.tempEnv1))return null;var S=Math.trunc((e+o)/2);e<S&&this.computeSelect(t,e,S,u),S<o&&this.computeSelect(t,S,o,u)},hr.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,o=this._start;o<=this._end;o++)t[e++]=this._pts[o];return t},hr.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},hr.prototype.setId=function(t){this._id=t},hr.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},hr.prototype.getEnvelope=function(){if(this._env===null){var t=this._pts[this._start],e=this._pts[this._end];this._env=new Bt(t,e)}return this._env},hr.prototype.getEndIndex=function(){return this._end},hr.prototype.getStartIndex=function(){return this._start},hr.prototype.getContext=function(){return this._context},hr.prototype.getId=function(){return this._id},hr.prototype.computeOverlapsInternal=function(t,e,o,u,d,w){var S=this._pts[t],U=this._pts[e],$=o._pts[u],ut=o._pts[d];if(e-t==1&&d-u==1)return w.overlap(this,t,o,u),null;if(w.tempEnv1.init(S,U),w.tempEnv2.init($,ut),!w.tempEnv1.intersects(w.tempEnv2))return null;var _t=Math.trunc((t+e)/2),wt=Math.trunc((u+d)/2);t<_t&&(u<wt&&this.computeOverlapsInternal(t,_t,o,u,wt,w),wt<d&&this.computeOverlapsInternal(t,_t,o,wt,d,w)),_t<e&&(u<wt&&this.computeOverlapsInternal(_t,e,o,u,wt,w),wt<d&&this.computeOverlapsInternal(_t,e,o,wt,d,w))},hr.prototype.interfaces_=function(){return[]},hr.prototype.getClass=function(){return hr};var Wi=function(){};Wi.prototype.interfaces_=function(){return[]},Wi.prototype.getClass=function(){return Wi},Wi.getChainStartIndices=function(t){var e=0,o=new St;o.add(new ft(e));do{var u=Wi.findChainEnd(t,e);o.add(new ft(u)),e=u}while(e<t.length-1);return Wi.toIntArray(o)},Wi.findChainEnd=function(t,e){for(var o=e;o<t.length-1&&t[o].equals2D(t[o+1]);)o++;if(o>=t.length-1)return t.length-1;for(var u=h.quadrant(t[o],t[o+1]),d=e+1;d<t.length&&!(!t[d-1].equals2D(t[d])&&h.quadrant(t[d-1],t[d])!==u);)d++;return d-1},Wi.getChains=function(){if(arguments.length===1){var t=arguments[0];return Wi.getChains(t,null)}if(arguments.length===2){for(var e=arguments[0],o=arguments[1],u=new St,d=Wi.getChainStartIndices(e),w=0;w<d.length-1;w++){var S=new hr(e,d[w],d[w+1],o);u.add(S)}return u}},Wi.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),o=0;o<e.length;o++)e[o]=t.get(o).intValue();return e};var Ro=function(){};Ro.prototype.computeNodes=function(t){},Ro.prototype.getNodedSubstrings=function(){},Ro.prototype.interfaces_=function(){return[]},Ro.prototype.getClass=function(){return Ro};var Zs=function(){if(this._segInt=null,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.setSegmentIntersector(t)}}};Zs.prototype.setSegmentIntersector=function(t){this._segInt=t},Zs.prototype.interfaces_=function(){return[Ro]},Zs.prototype.getClass=function(){return Zs};var Ha=function(t){function e(u){u?t.call(this,u):t.call(this),this._monoChains=new St,this._index=new Ar,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var o={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return Zn.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(u){for(var d=Wi.getChains(u.getCoordinates(),u).iterator();d.hasNext();){var w=d.next();w.setId(this._idCounter++),this._index.insert(w.getEnvelope(),w),this._monoChains.add(w)}},e.prototype.computeNodes=function(u){this._nodedSegStrings=u;for(var d=u.iterator();d.hasNext();)this.add(d.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var u=new ua(this._segInt),d=this._monoChains.iterator();d.hasNext();)for(var w=d.next(),S=this._index.query(w.getEnvelope()).iterator();S.hasNext();){var U=S.next();if(U.getId()>w.getId()&&(w.computeOverlaps(U,u),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},o.SegmentOverlapAction.get=function(){return ua},Object.defineProperties(e,o),e}(Zs),ua=function(t){function e(){t.call(this),this._si=null;var o=arguments[0];this._si=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(arguments.length!==4)return t.prototype.overlap.apply(this,arguments);var o=arguments[0],u=arguments[1],d=arguments[2],w=arguments[3],S=o.getContext(),U=d.getContext();this._si.processIntersections(S,u,U,w)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Qo),Be=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var e=arguments[0];this.setQuadrantSegments(e)}else if(arguments.length===2){var o=arguments[0],u=arguments[1];this.setQuadrantSegments(o),this.setEndCapStyle(u)}else if(arguments.length===4){var d=arguments[0],w=arguments[1],S=arguments[2],U=arguments[3];this.setQuadrantSegments(d),this.setEndCapStyle(w),this.setJoinStyle(S),this.setMitreLimit(U)}}},po={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Be.prototype.getEndCapStyle=function(){return this._endCapStyle},Be.prototype.isSingleSided=function(){return this._isSingleSided},Be.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,this._quadrantSegments===0&&(this._joinStyle=Be.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Be.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Be.JOIN_ROUND&&(this._quadrantSegments=Be.DEFAULT_QUADRANT_SEGMENTS)},Be.prototype.getJoinStyle=function(){return this._joinStyle},Be.prototype.setJoinStyle=function(t){this._joinStyle=t},Be.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Be.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Be.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Be.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Be.prototype.getMitreLimit=function(){return this._mitreLimit},Be.prototype.setMitreLimit=function(t){this._mitreLimit=t},Be.prototype.setSingleSided=function(t){this._isSingleSided=t},Be.prototype.interfaces_=function(){return[]},Be.prototype.getClass=function(){return Be},Be.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},po.CAP_ROUND.get=function(){return 1},po.CAP_FLAT.get=function(){return 2},po.CAP_SQUARE.get=function(){return 3},po.JOIN_ROUND.get=function(){return 1},po.JOIN_MITRE.get=function(){return 2},po.JOIN_BEVEL.get=function(){return 3},po.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},po.DEFAULT_MITRE_LIMIT.get=function(){return 5},po.DEFAULT_SIMPLIFY_FACTOR.get=function(){return .01},Object.defineProperties(Be,po);var Yn=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=tt.COUNTERCLOCKWISE,this._inputLine=t||null},ts={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Yn.prototype.isDeletable=function(t,e,o,u){var d=this._inputLine[t],w=this._inputLine[e],S=this._inputLine[o];return!!this.isConcave(d,w,S)&&!!this.isShallow(d,w,S,u)&&this.isShallowSampled(d,w,t,o,u)},Yn.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),o=this.findNextNonDeletedIndex(e),u=!1;o<this._inputLine.length;){var d=!1;this.isDeletable(t,e,o,this._distanceTol)&&(this._isDeleted[e]=Yn.DELETE,d=!0,u=!0),t=d?o:e,e=this.findNextNonDeletedIndex(t),o=this.findNextNonDeletedIndex(e)}return u},Yn.prototype.isShallowConcavity=function(t,e,o,u){return tt.computeOrientation(t,e,o)!==this._angleOrientation?!1:tt.distancePointLine(e,t,o)<u},Yn.prototype.isShallowSampled=function(t,e,o,u,d){var w=Math.trunc((u-o)/Yn.NUM_PTS_TO_CHECK);w<=0&&(w=1);for(var S=o;S<u;S+=w)if(!this.isShallow(t,e,this._inputLine[S],d))return!1;return!0},Yn.prototype.isConcave=function(t,e,o){var u=tt.computeOrientation(t,e,o)===this._angleOrientation;return u},Yn.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=tt.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do e=this.deleteShallowConcavities();while(e);return this.collapseLine()},Yn.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Yn.DELETE;)e++;return e},Yn.prototype.isShallow=function(t,e,o,u){return tt.distancePointLine(e,t,o)<u},Yn.prototype.collapseLine=function(){for(var t=new Xn,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Yn.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Yn.prototype.interfaces_=function(){return[]},Yn.prototype.getClass=function(){return Yn},Yn.simplify=function(t,e){return new Yn(t).simplify(e)},ts.INIT.get=function(){return 0},ts.DELETE.get=function(){return 1},ts.KEEP.get=function(){return 1},ts.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Yn,ts);var Lr=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new St},Bu={COORDINATE_ARRAY_TYPE:{configurable:!0}};Lr.prototype.getCoordinates=function(){return this._ptList.toArray(Lr.COORDINATE_ARRAY_TYPE)},Lr.prototype.setPrecisionModel=function(t){this._precisionModel=t},Lr.prototype.addPt=function(t){var e=new X(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},Lr.prototype.revere=function(){},Lr.prototype.addPts=function(t,e){if(e)for(var o=0;o<t.length;o++)this.addPt(t[o]);else for(var u=t.length-1;u>=0;u--)this.addPt(t[u])},Lr.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Lr.prototype.toString=function(){return new Kt().createLineString(this.getCoordinates()).toString()},Lr.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new X(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},Lr.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Lr.prototype.interfaces_=function(){return[]},Lr.prototype.getClass=function(){return Lr},Bu.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Lr,Bu);var _e=function(){},Kr={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};_e.prototype.interfaces_=function(){return[]},_e.prototype.getClass=function(){return _e},_e.toDegrees=function(t){return 180*t/Math.PI},_e.normalize=function(t){for(;t>Math.PI;)t-=_e.PI_TIMES_2;for(;t<=-Math.PI;)t+=_e.PI_TIMES_2;return t},_e.angle=function(){if(arguments.length===1){var t=arguments[0];return Math.atan2(t.y,t.x)}if(arguments.length===2){var e=arguments[0],o=arguments[1],u=o.x-e.x,d=o.y-e.y;return Math.atan2(d,u)}},_e.isAcute=function(t,e,o){var u=t.x-e.x,d=t.y-e.y;return u*(o.x-e.x)+d*(o.y-e.y)>0},_e.isObtuse=function(t,e,o){var u=t.x-e.x,d=t.y-e.y;return u*(o.x-e.x)+d*(o.y-e.y)<0},_e.interiorAngle=function(t,e,o){var u=_e.angle(e,t),d=_e.angle(e,o);return Math.abs(d-u)},_e.normalizePositive=function(t){if(t<0){for(;t<0;)t+=_e.PI_TIMES_2;t>=_e.PI_TIMES_2&&(t=0)}else{for(;t>=_e.PI_TIMES_2;)t-=_e.PI_TIMES_2;t<0&&(t=0)}return t},_e.angleBetween=function(t,e,o){var u=_e.angle(e,t),d=_e.angle(e,o);return _e.diff(u,d)},_e.diff=function(t,e){var o=null;return(o=t<e?e-t:t-e)>Math.PI&&(o=2*Math.PI-o),o},_e.toRadians=function(t){return t*Math.PI/180},_e.getTurn=function(t,e){var o=Math.sin(e-t);return o>0?_e.COUNTERCLOCKWISE:o<0?_e.CLOCKWISE:_e.NONE},_e.angleBetweenOriented=function(t,e,o){var u=_e.angle(e,t),d=_e.angle(e,o)-u;return d<=-Math.PI?d+_e.PI_TIMES_2:d>Math.PI?d-_e.PI_TIMES_2:d},Kr.PI_TIMES_2.get=function(){return 2*Math.PI},Kr.PI_OVER_2.get=function(){return Math.PI/2},Kr.PI_OVER_4.get=function(){return Math.PI/4},Kr.COUNTERCLOCKWISE.get=function(){return tt.COUNTERCLOCKWISE},Kr.CLOCKWISE.get=function(){return tt.CLOCKWISE},Kr.NONE.get=function(){return tt.COLLINEAR},Object.defineProperties(_e,Kr);var Bn=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new Yt,this._seg1=new Yt,this._offset0=new Yt,this._offset1=new Yt,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],o=arguments[1],u=arguments[2];this._precisionModel=e,this._bufParams=o,this._li=new F,this._filletAngleQuantum=Math.PI/2/o.getQuadrantSegments(),o.getQuadrantSegments()>=8&&o.getJoinStyle()===Be.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(u)},Is={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Bn.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var o=tt.computeOrientation(this._s0,this._s1,this._s2),u=o===tt.CLOCKWISE&&this._side===It.LEFT||o===tt.COUNTERCLOCKWISE&&this._side===It.RIGHT;o===0?this.addCollinear(e):u?this.addOutsideTurn(o,e):this.addInsideTurn(o,e)},Bn.prototype.addLineEndCap=function(t,e){var o=new Yt(t,e),u=new Yt;this.computeOffsetSegment(o,It.LEFT,this._distance,u);var d=new Yt;this.computeOffsetSegment(o,It.RIGHT,this._distance,d);var w=e.x-t.x,S=e.y-t.y,U=Math.atan2(S,w);switch(this._bufParams.getEndCapStyle()){case Be.CAP_ROUND:this._segList.addPt(u.p1),this.addFilletArc(e,U+Math.PI/2,U-Math.PI/2,tt.CLOCKWISE,this._distance),this._segList.addPt(d.p1);break;case Be.CAP_FLAT:this._segList.addPt(u.p1),this._segList.addPt(d.p1);break;case Be.CAP_SQUARE:var $=new X;$.x=Math.abs(this._distance)*Math.cos(U),$.y=Math.abs(this._distance)*Math.sin(U);var ut=new X(u.p1.x+$.x,u.p1.y+$.y),_t=new X(d.p1.x+$.x,d.p1.y+$.y);this._segList.addPt(ut),this._segList.addPt(_t)}},Bn.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Bn.prototype.addMitreJoin=function(t,e,o,u){var d=!0,w=null;try{w=ke.intersection(e.p0,e.p1,o.p0,o.p1),(u<=0?1:w.distance(t)/Math.abs(u))>this._bufParams.getMitreLimit()&&(d=!1)}catch(S){if(!(S instanceof Cn))throw S;w=new X(0,0),d=!1}d?this._segList.addPt(w):this.addLimitedMitreJoin(e,o,u,this._bufParams.getMitreLimit())},Bn.prototype.addFilletCorner=function(t,e,o,u,d){var w=e.x-t.x,S=e.y-t.y,U=Math.atan2(S,w),$=o.x-t.x,ut=o.y-t.y,_t=Math.atan2(ut,$);u===tt.CLOCKWISE?U<=_t&&(U+=2*Math.PI):U>=_t&&(U-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,U,_t,u,d),this._segList.addPt(o)},Bn.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Bn.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Be.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Be.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Bn.prototype.createSquare=function(t){this._segList.addPt(new X(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new X(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new X(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new X(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Bn.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Bn.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Bn.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Bn.prototype.initSideSegments=function(t,e,o){this._s1=t,this._s2=e,this._side=o,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,o,this._distance,this._offset1)},Bn.prototype.addLimitedMitreJoin=function(t,e,o,u){var d=this._seg0.p1,w=_e.angle(d,this._seg0.p0),S=_e.angleBetweenOriented(this._seg0.p0,d,this._seg1.p1)/2,U=_e.normalize(w+S),$=_e.normalize(U+Math.PI),ut=u*o,_t=o-ut*Math.abs(Math.sin(S)),wt=d.x+ut*Math.cos($),zt=d.y+ut*Math.sin($),qt=new X(wt,zt),ne=new Yt(d,qt),oe=ne.pointAlongOffset(1,_t),In=ne.pointAlongOffset(1,-_t);this._side===It.LEFT?(this._segList.addPt(oe),this._segList.addPt(In)):(this._segList.addPt(In),this._segList.addPt(oe))},Bn.prototype.computeOffsetSegment=function(t,e,o,u){var d=e===It.LEFT?1:-1,w=t.p1.x-t.p0.x,S=t.p1.y-t.p0.y,U=Math.sqrt(w*w+S*S),$=d*o*w/U,ut=d*o*S/U;u.p0.x=t.p0.x-ut,u.p0.y=t.p0.y+$,u.p1.x=t.p1.x-ut,u.p1.y=t.p1.y+$},Bn.prototype.addFilletArc=function(t,e,o,u,d){var w=u===tt.CLOCKWISE?-1:1,S=Math.abs(e-o),U=Math.trunc(S/this._filletAngleQuantum+.5);if(U<1)return null;for(var $=S/U,ut=0,_t=new X;ut<S;){var wt=e+w*ut;_t.x=t.x+d*Math.cos(wt),_t.y=t.y+d*Math.sin(wt),this._segList.addPt(_t),ut+=$}},Bn.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Bn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var o=new X((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(o);var u=new X((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(u)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Bn.prototype.createCircle=function(t){var e=new X(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Bn.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Bn.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Lr,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Bn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Bn.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Be.JOIN_BEVEL||this._bufParams.getJoinStyle()===Be.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,tt.CLOCKWISE,this._distance))},Bn.prototype.closeRing=function(){this._segList.closeRing()},Bn.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Bn.prototype.interfaces_=function(){return[]},Bn.prototype.getClass=function(){return Bn},Is.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return .001},Is.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return .001},Is.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Is.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Bn,Is);var li=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};li.prototype.getOffsetCurve=function(t,e){if(this._distance=e,e===0)return null;var o=e<0,u=Math.abs(e),d=this.getSegGen(u);t.length<=1?this.computePointCurve(t[0],d):this.computeOffsetCurve(t,o,d);var w=d.getCoordinates();return o&&re.reverse(w),w},li.prototype.computeSingleSidedBufferCurve=function(t,e,o){var u=this.simplifyTolerance(this._distance);if(e){o.addSegments(t,!0);var d=Yn.simplify(t,-u),w=d.length-1;o.initSideSegments(d[w],d[w-1],It.LEFT),o.addFirstSegment();for(var S=w-2;S>=0;S--)o.addNextSegment(d[S],!0)}else{o.addSegments(t,!1);var U=Yn.simplify(t,u),$=U.length-1;o.initSideSegments(U[0],U[1],It.LEFT),o.addFirstSegment();for(var ut=2;ut<=$;ut++)o.addNextSegment(U[ut],!0)}o.addLastSegment(),o.closeRing()},li.prototype.computeRingBufferCurve=function(t,e,o){var u=this.simplifyTolerance(this._distance);e===It.RIGHT&&(u=-u);var d=Yn.simplify(t,u),w=d.length-1;o.initSideSegments(d[w-1],d[0],e);for(var S=1;S<=w;S++){var U=S!==1;o.addNextSegment(d[S],U)}o.closeRing()},li.prototype.computeLineBufferCurve=function(t,e){var o=this.simplifyTolerance(this._distance),u=Yn.simplify(t,o),d=u.length-1;e.initSideSegments(u[0],u[1],It.LEFT);for(var w=2;w<=d;w++)e.addNextSegment(u[w],!0);e.addLastSegment(),e.addLineEndCap(u[d-1],u[d]);var S=Yn.simplify(t,-o),U=S.length-1;e.initSideSegments(S[U],S[U-1],It.LEFT);for(var $=U-2;$>=0;$--)e.addNextSegment(S[$],!0);e.addLastSegment(),e.addLineEndCap(S[1],S[0]),e.closeRing()},li.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Be.CAP_ROUND:e.createCircle(t);break;case Be.CAP_SQUARE:e.createSquare(t)}},li.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided()||e===0)return null;var o=Math.abs(e),u=this.getSegGen(o);if(t.length<=1)this.computePointCurve(t[0],u);else if(this._bufParams.isSingleSided()){var d=e<0;this.computeSingleSidedBufferCurve(t,d,u)}else this.computeLineBufferCurve(t,u);return u.getCoordinates()},li.prototype.getBufferParameters=function(){return this._bufParams},li.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},li.prototype.getRingCurve=function(t,e,o){if(this._distance=o,t.length<=2)return this.getLineCurve(t,o);if(o===0)return li.copyCoordinates(t);var u=this.getSegGen(o);return this.computeRingBufferCurve(t,e,u),u.getCoordinates()},li.prototype.computeOffsetCurve=function(t,e,o){var u=this.simplifyTolerance(this._distance);if(e){var d=Yn.simplify(t,-u),w=d.length-1;o.initSideSegments(d[w],d[w-1],It.LEFT),o.addFirstSegment();for(var S=w-2;S>=0;S--)o.addNextSegment(d[S],!0)}else{var U=Yn.simplify(t,u),$=U.length-1;o.initSideSegments(U[0],U[1],It.LEFT),o.addFirstSegment();for(var ut=2;ut<=$;ut++)o.addNextSegment(U[ut],!0)}o.addLastSegment()},li.prototype.getSegGen=function(t){return new Bn(this._precisionModel,this._bufParams,t)},li.prototype.interfaces_=function(){return[]},li.prototype.getClass=function(){return li},li.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),o=0;o<e.length;o++)e[o]=new X(t[o]);return e};var es=function(){this._subgraphs=null,this._seg=new Yt,this._cga=new tt;var t=arguments[0];this._subgraphs=t},Xa={DepthSegment:{configurable:!0}};es.prototype.findStabbedSegments=function(){if(arguments.length===1){for(var t=arguments[0],e=new St,o=this._subgraphs.iterator();o.hasNext();){var u=o.next(),d=u.getEnvelope();t.y<d.getMinY()||t.y>d.getMaxY()||this.findStabbedSegments(t,u.getDirectedEdges(),e)}return e}if(arguments.length===3){if(ct(arguments[2],we)&&arguments[0]instanceof X&&arguments[1]instanceof E){for(var w=arguments[0],S=arguments[1],U=arguments[2],$=S.getEdge().getCoordinates(),ut=0;ut<$.length-1;ut++)if(this._seg.p0=$[ut],this._seg.p1=$[ut+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<w.x)&&!(this._seg.isHorizontal()||w.y<this._seg.p0.y||w.y>this._seg.p1.y||tt.computeOrientation(this._seg.p0,this._seg.p1,w)===tt.RIGHT)){var _t=S.getDepth(It.LEFT);this._seg.p0.equals($[ut])||(_t=S.getDepth(It.RIGHT));var wt=new ns(this._seg,_t);U.add(wt)}}else if(ct(arguments[2],we)&&arguments[0]instanceof X&&ct(arguments[1],we))for(var zt=arguments[0],qt=arguments[1],ne=arguments[2],oe=qt.iterator();oe.hasNext();){var In=oe.next();In.isForward()&&this.findStabbedSegments(zt,In,ne)}}},es.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return e.size()===0?0:Gt.min(e)._leftDepth},es.prototype.interfaces_=function(){return[]},es.prototype.getClass=function(){return es},Xa.DepthSegment.get=function(){return ns},Object.defineProperties(es,Xa);var ns=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new Yt(t),this._leftDepth=e};ns.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var o=this._upwardSeg.orientationIndex(e._upwardSeg);return o!==0||(o=-1*e._upwardSeg.orientationIndex(this._upwardSeg))!=0?o:this._upwardSeg.compareTo(e._upwardSeg)},ns.prototype.compareX=function(t,e){var o=t.p0.compareTo(e.p0);return o!==0?o:t.p1.compareTo(e.p1)},ns.prototype.toString=function(){return this._upwardSeg.toString()},ns.prototype.interfaces_=function(){return[H]},ns.prototype.getClass=function(){return ns};var Oe=function(t,e,o){this.p0=t||null,this.p1=e||null,this.p2=o||null};Oe.prototype.area=function(){return Oe.area(this.p0,this.p1,this.p2)},Oe.prototype.signedArea=function(){return Oe.signedArea(this.p0,this.p1,this.p2)},Oe.prototype.interpolateZ=function(t){if(t===null)throw new D("Supplied point is null.");return Oe.interpolateZ(t,this.p0,this.p1,this.p2)},Oe.prototype.longestSideLength=function(){return Oe.longestSideLength(this.p0,this.p1,this.p2)},Oe.prototype.isAcute=function(){return Oe.isAcute(this.p0,this.p1,this.p2)},Oe.prototype.circumcentre=function(){return Oe.circumcentre(this.p0,this.p1,this.p2)},Oe.prototype.area3D=function(){return Oe.area3D(this.p0,this.p1,this.p2)},Oe.prototype.centroid=function(){return Oe.centroid(this.p0,this.p1,this.p2)},Oe.prototype.inCentre=function(){return Oe.inCentre(this.p0,this.p1,this.p2)},Oe.prototype.interfaces_=function(){return[]},Oe.prototype.getClass=function(){return Oe},Oe.area=function(t,e,o){return Math.abs(((o.x-t.x)*(e.y-t.y)-(e.x-t.x)*(o.y-t.y))/2)},Oe.signedArea=function(t,e,o){return((o.x-t.x)*(e.y-t.y)-(e.x-t.x)*(o.y-t.y))/2},Oe.det=function(t,e,o,u){return t*u-e*o},Oe.interpolateZ=function(t,e,o,u){var d=e.x,w=e.y,S=o.x-d,U=u.x-d,$=o.y-w,ut=u.y-w,_t=S*ut-U*$,wt=t.x-d,zt=t.y-w,qt=(ut*wt-U*zt)/_t,ne=(-$*wt+S*zt)/_t;return e.z+qt*(o.z-e.z)+ne*(u.z-e.z)},Oe.longestSideLength=function(t,e,o){var u=t.distance(e),d=e.distance(o),w=o.distance(t),S=u;return d>S&&(S=d),w>S&&(S=w),S},Oe.isAcute=function(t,e,o){return!!_e.isAcute(t,e,o)&&!!_e.isAcute(e,o,t)&&!!_e.isAcute(o,t,e)},Oe.circumcentre=function(t,e,o){var u=o.x,d=o.y,w=t.x-u,S=t.y-d,U=e.x-u,$=e.y-d,ut=2*Oe.det(w,S,U,$),_t=Oe.det(S,w*w+S*S,$,U*U+$*$),wt=Oe.det(w,w*w+S*S,U,U*U+$*$);return new X(u-_t/ut,d+wt/ut)},Oe.perpendicularBisector=function(t,e){var o=e.x-t.x,u=e.y-t.y,d=new ke(t.x+o/2,t.y+u/2,1),w=new ke(t.x-u+o/2,t.y+o+u/2,1);return new ke(d,w)},Oe.angleBisector=function(t,e,o){var u=e.distance(t),d=u/(u+e.distance(o)),w=o.x-t.x,S=o.y-t.y;return new X(t.x+d*w,t.y+d*S)},Oe.area3D=function(t,e,o){var u=e.x-t.x,d=e.y-t.y,w=e.z-t.z,S=o.x-t.x,U=o.y-t.y,$=o.z-t.z,ut=d*$-w*U,_t=w*S-u*$,wt=u*U-d*S,zt=ut*ut+_t*_t+wt*wt,qt=Math.sqrt(zt)/2;return qt},Oe.centroid=function(t,e,o){var u=(t.x+e.x+o.x)/3,d=(t.y+e.y+o.y)/3;return new X(u,d)},Oe.inCentre=function(t,e,o){var u=e.distance(o),d=t.distance(o),w=t.distance(e),S=u+d+w,U=(u*t.x+d*e.x+w*o.x)/S,$=(u*t.y+d*e.y+w*o.y)/S;return new X(U,$)};var _i=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new St;var t=arguments[0],e=arguments[1],o=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=o};_i.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),o=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(o,Q.EXTERIOR,Q.INTERIOR)},_i.prototype.addPolygon=function(t){var e=this._distance,o=It.LEFT;this._distance<0&&(e=-this._distance,o=It.RIGHT);var u=t.getExteriorRing(),d=re.removeRepeatedPoints(u.getCoordinates());if(this._distance<0&&this.isErodedCompletely(u,this._distance)||this._distance<=0&&d.length<3)return null;this.addPolygonRing(d,e,o,Q.EXTERIOR,Q.INTERIOR);for(var w=0;w<t.getNumInteriorRing();w++){var S=t.getInteriorRingN(w),U=re.removeRepeatedPoints(S.getCoordinates());this._distance>0&&this.isErodedCompletely(S,-this._distance)||this.addPolygonRing(U,e,It.opposite(o),Q.INTERIOR,Q.EXTERIOR)}},_i.prototype.isTriangleErodedCompletely=function(t,e){var o=new Oe(t[0],t[1],t[2]),u=o.inCentre();return tt.distancePointLine(u,o.p0,o.p1)<Math.abs(e)},_i.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=re.removeRepeatedPoints(t.getCoordinates()),o=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(o,Q.EXTERIOR,Q.INTERIOR)},_i.prototype.addCurve=function(t,e,o){if(t===null||t.length<2)return null;var u=new Zn(t,new be(0,Q.BOUNDARY,e,o));this._curveList.add(u)},_i.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},_i.prototype.addPolygonRing=function(t,e,o,u,d){if(e===0&&t.length<Nr.MINIMUM_VALID_SIZE)return null;var w=u,S=d;t.length>=Nr.MINIMUM_VALID_SIZE&&tt.isCCW(t)&&(w=d,S=u,o=It.opposite(o));var U=this._curveBuilder.getRingCurve(t,o,e);this.addCurve(U,w,S)},_i.prototype.add=function(t){if(t.isEmpty())return null;t instanceof bn?this.addPolygon(t):t instanceof kn?this.addLineString(t):t instanceof pr?this.addPoint(t):t instanceof mi?this.addCollection(t):t instanceof ar?this.addCollection(t):t instanceof dr?this.addCollection(t):t instanceof wn&&this.addCollection(t)},_i.prototype.isErodedCompletely=function(t,e){var o=t.getCoordinates();if(o.length<4)return e<0;if(o.length===4)return this.isTriangleErodedCompletely(o,e);var u=t.getEnvelopeInternal(),d=Math.min(u.getHeight(),u.getWidth());return e<0&&2*Math.abs(e)>d},_i.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var o=t.getGeometryN(e);this.add(o)}},_i.prototype.interfaces_=function(){return[]},_i.prototype.getClass=function(){return _i};var Os=function(){};Os.prototype.locate=function(t){},Os.prototype.interfaces_=function(){return[]},Os.prototype.getClass=function(){return Os};var go=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};go.prototype.next=function(){if(this._atStart)return this._atStart=!1,go.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new a;var t=this._parent.getGeometryN(this._index++);return t instanceof wn?(this._subcollectionIterator=new go(t),this._subcollectionIterator.next()):t},go.prototype.remove=function(){throw new Error(this.getClass().getName())},go.prototype.hasNext=function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},go.prototype.interfaces_=function(){return[An]},go.prototype.getClass=function(){return go},go.isAtomic=function(t){return!(t instanceof wn)};var yi=function(){this._geom=null;var t=arguments[0];this._geom=t};yi.prototype.locate=function(t){return yi.locate(t,this._geom)},yi.prototype.interfaces_=function(){return[Os]},yi.prototype.getClass=function(){return yi},yi.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&tt.isPointInRing(t,e.getCoordinates())},yi.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var o=e.getExteriorRing();if(!yi.isPointInRing(t,o))return!1;for(var u=0;u<e.getNumInteriorRing();u++){var d=e.getInteriorRingN(u);if(yi.isPointInRing(t,d))return!1}return!0},yi.containsPoint=function(t,e){if(e instanceof bn)return yi.containsPointInPolygon(t,e);if(e instanceof wn)for(var o=new go(e);o.hasNext();){var u=o.next();if(u!==e&&yi.containsPoint(t,u))return!0}return!1},yi.locate=function(t,e){return e.isEmpty()?Q.EXTERIOR:yi.containsPoint(t,e)?Q.INTERIOR:Q.EXTERIOR};var Hr=function(){this._edgeMap=new T,this._edgeList=null,this._ptInAreaLocation=[Q.NONE,Q.NONE]};Hr.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),o=e-1;return e===0&&(o=this._edgeList.size()-1),this._edgeList.get(o)},Hr.prototype.propagateSideLabels=function(t){for(var e=Q.NONE,o=this.iterator();o.hasNext();){var u=o.next().getLabel();u.isArea(t)&&u.getLocation(t,It.LEFT)!==Q.NONE&&(e=u.getLocation(t,It.LEFT))}if(e===Q.NONE)return null;for(var d=e,w=this.iterator();w.hasNext();){var S=w.next(),U=S.getLabel();if(U.getLocation(t,It.ON)===Q.NONE&&U.setLocation(t,It.ON,d),U.isArea(t)){var $=U.getLocation(t,It.LEFT),ut=U.getLocation(t,It.RIGHT);if(ut!==Q.NONE){if(ut!==d)throw new Qn("side location conflict",S.getCoordinate());$===Q.NONE&&C.shouldNeverReachHere("found single null side (at "+S.getCoordinate()+")"),d=$}else C.isTrue(U.getLocation(t,It.LEFT)===Q.NONE,"found single null side"),U.setLocation(t,It.RIGHT,d),U.setLocation(t,It.LEFT,d)}}},Hr.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},Hr.prototype.print=function(t){fe.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},Hr.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Hr.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var o=e.size()-1,u=e.get(o).getLabel().getLocation(t,It.LEFT);C.isTrue(u!==Q.NONE,"Found unlabelled area edge");for(var d=u,w=this.iterator();w.hasNext();){var S=w.next().getLabel();C.isTrue(S.isArea(t),"Found non-area edge");var U=S.getLocation(t,It.LEFT),$=S.getLocation(t,It.RIGHT);if(U===$||$!==d)return!1;d=U}return!0},Hr.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},Hr.prototype.iterator=function(){return this.getEdges().iterator()},Hr.prototype.getEdges=function(){return this._edgeList===null&&(this._edgeList=new St(this._edgeMap.values())),this._edgeList},Hr.prototype.getLocation=function(t,e,o){return this._ptInAreaLocation[t]===Q.NONE&&(this._ptInAreaLocation[t]=yi.locate(e,o[t].getGeometry())),this._ptInAreaLocation[t]},Hr.prototype.toString=function(){var t=new Xt;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append(`
`);for(var e=this.iterator();e.hasNext();){var o=e.next();t.append(o),t.append(`
`)}return t.toString()},Hr.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},Hr.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],o=this.iterator();o.hasNext();)for(var u=o.next().getLabel(),d=0;d<2;d++)u.isLine(d)&&u.getLocation(d)===Q.BOUNDARY&&(e[d]=!0);for(var w=this.iterator();w.hasNext();)for(var S=w.next(),U=S.getLabel(),$=0;$<2;$++)if(U.isAnyNull($)){var ut=Q.NONE;if(e[$])ut=Q.EXTERIOR;else{var _t=S.getCoordinate();ut=this.getLocation($,_t,t)}U.setAllLocationsIfNull($,ut)}},Hr.prototype.getDegree=function(){return this._edgeMap.size()},Hr.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},Hr.prototype.interfaces_=function(){return[]},Hr.prototype.getClass=function(){return Hr};var mo=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var o=null,u=null,d=this._SCANNING_FOR_INCOMING,w=0;w<this._resultAreaEdgeList.size();w++){var S=this._resultAreaEdgeList.get(w),U=S.getSym();if(S.getLabel().isArea())switch(o===null&&S.isInResult()&&(o=S),d){case this._SCANNING_FOR_INCOMING:if(!U.isInResult())continue;u=U,d=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!S.isInResult())continue;u.setNext(S),d=this._SCANNING_FOR_INCOMING}}if(d===this._LINKING_TO_OUTGOING){if(o===null)throw new Qn("no outgoing dirEdge found",this.getCoordinate());C.isTrue(o.isInResult(),"unable to link last incoming dirEdge"),u.setNext(o)}},e.prototype.insert=function(o){var u=o;this.insertEdgeEnd(u,u)},e.prototype.getRightmostEdge=function(){var o=this.getEdges(),u=o.size();if(u<1)return null;var d=o.get(0);if(u===1)return d;var w=o.get(u-1),S=d.getQuadrant(),U=w.getQuadrant();return h.isNorthern(S)&&h.isNorthern(U)?d:h.isNorthern(S)||h.isNorthern(U)?d.getDy()!==0?d:w.getDy()!==0?w:(C.shouldNeverReachHere("found two horizontal edges incident on node"),null):w},e.prototype.print=function(o){fe.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var u=this.iterator();u.hasNext();){var d=u.next();o.print("out "),d.print(o),o.println(),o.print("in "),d.getSym().print(o),o.println()}},e.prototype.getResultAreaEdges=function(){if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new St;for(var o=this.iterator();o.hasNext();){var u=o.next();(u.isInResult()||u.getSym().isInResult())&&this._resultAreaEdgeList.add(u)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(o){for(var u=this.iterator();u.hasNext();){var d=u.next().getLabel();d.setAllLocationsIfNull(0,o.getLocation(0)),d.setAllLocationsIfNull(1,o.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var o=null,u=null,d=this._edgeList.size()-1;d>=0;d--){var w=this._edgeList.get(d),S=w.getSym();u===null&&(u=S),o!==null&&S.setNext(o),o=w}u.setNext(o)},e.prototype.computeDepths=function(){if(arguments.length===1){var o=arguments[0],u=this.findIndex(o),d=o.getDepth(It.LEFT),w=o.getDepth(It.RIGHT),S=this.computeDepths(u+1,this._edgeList.size(),d);if(this.computeDepths(0,u,S)!==w)throw new Qn("depth mismatch at "+o.getCoordinate())}else if(arguments.length===3){for(var U=arguments[0],$=arguments[1],ut=arguments[2],_t=U;_t<$;_t++){var wt=this._edgeList.get(_t);wt.setEdgeDepths(It.RIGHT,ut),ut=wt.getDepth(It.LEFT)}return ut}},e.prototype.mergeSymLabels=function(){for(var o=this.iterator();o.hasNext();){var u=o.next();u.getLabel().merge(u.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(o){for(var u=null,d=null,w=this._SCANNING_FOR_INCOMING,S=this._resultAreaEdgeList.size()-1;S>=0;S--){var U=this._resultAreaEdgeList.get(S),$=U.getSym();switch(u===null&&U.getEdgeRing()===o&&(u=U),w){case this._SCANNING_FOR_INCOMING:if($.getEdgeRing()!==o)continue;d=$,w=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(U.getEdgeRing()!==o)continue;d.setNextMin(U),w=this._SCANNING_FOR_INCOMING}}w===this._LINKING_TO_OUTGOING&&(C.isTrue(u!==null,"found null for first outgoing dirEdge"),C.isTrue(u.getEdgeRing()===o,"unable to link last incoming dirEdge"),d.setNextMin(u))},e.prototype.getOutgoingDegree=function(){if(arguments.length===0){for(var o=0,u=this.iterator();u.hasNext();)u.next().isInResult()&&o++;return o}if(arguments.length===1){for(var d=arguments[0],w=0,S=this.iterator();S.hasNext();)S.next().getEdgeRing()===d&&w++;return w}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var o=Q.NONE,u=this.iterator();u.hasNext();){var d=u.next(),w=d.getSym();if(!d.isLineEdge()){if(d.isInResult()){o=Q.INTERIOR;break}if(w.isInResult()){o=Q.EXTERIOR;break}}}if(o===Q.NONE)return null;for(var S=o,U=this.iterator();U.hasNext();){var $=U.next(),ut=$.getSym();$.isLineEdge()?$.getEdge().setCovered(S===Q.INTERIOR):($.isInResult()&&(S=Q.EXTERIOR),ut.isInResult()&&(S=Q.INTERIOR))}},e.prototype.computeLabelling=function(o){t.prototype.computeLabelling.call(this,o),this._label=new be(Q.NONE);for(var u=this.iterator();u.hasNext();)for(var d=u.next().getEdge().getLabel(),w=0;w<2;w++){var S=d.getLocation(w);S!==Q.INTERIOR&&S!==Q.BOUNDARY||this._label.setLocation(w,Q.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Hr),ms=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(o){return new Wr(o,new mo)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(I),Ao=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};Ao.prototype.compareTo=function(t){var e=t;return Ao.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},Ao.prototype.interfaces_=function(){return[H]},Ao.prototype.getClass=function(){return Ao},Ao.orientation=function(t){return re.increasingDirection(t)===1},Ao.compareOriented=function(t,e,o,u){for(var d=e?1:-1,w=u?1:-1,S=e?t.length:-1,U=u?o.length:-1,$=e?0:t.length-1,ut=u?0:o.length-1;;){var _t=t[$].compareTo(o[ut]);if(_t!==0)return _t;var wt=($+=d)===S,zt=(ut+=w)===U;if(wt&&!zt)return-1;if(!wt&&zt)return 1;if(wt&&zt)return 0}};var br=function(){this._edges=new St,this._ocaMap=new T};br.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var o=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var u=o.getCoordinates(),d=0;d<u.length;d++)d>0&&t.print(","),t.print(u[d].x+" "+u[d].y);t.println(")")}t.print(")  ")},br.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},br.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},br.prototype.iterator=function(){return this._edges.iterator()},br.prototype.getEdges=function(){return this._edges},br.prototype.get=function(t){return this._edges.get(t)},br.prototype.findEqualEdge=function(t){var e=new Ao(t.getCoordinates());return this._ocaMap.get(e)},br.prototype.add=function(t){this._edges.add(t);var e=new Ao(t.getCoordinates());this._ocaMap.put(e,t)},br.prototype.interfaces_=function(){return[]},br.prototype.getClass=function(){return br};var rs=function(){};rs.prototype.processIntersections=function(t,e,o,u){},rs.prototype.isDone=function(){},rs.prototype.interfaces_=function(){return[]},rs.prototype.getClass=function(){return rs};var Dr=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Dr.prototype.isTrivialIntersection=function(t,e,o,u){if(t===o&&this._li.getIntersectionNum()===1){if(Dr.isAdjacentSegments(e,u))return!0;if(t.isClosed()){var d=t.size()-1;if(e===0&&u===d||u===0&&e===d)return!0}}return!1},Dr.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Dr.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Dr.prototype.getLineIntersector=function(){return this._li},Dr.prototype.hasProperIntersection=function(){return this._hasProper},Dr.prototype.processIntersections=function(t,e,o,u){if(t===o&&e===u)return null;this.numTests++;var d=t.getCoordinates()[e],w=t.getCoordinates()[e+1],S=o.getCoordinates()[u],U=o.getCoordinates()[u+1];this._li.computeIntersection(d,w,S,U),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,o,u)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),o.addIntersections(this._li,u,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Dr.prototype.hasIntersection=function(){return this._hasIntersection},Dr.prototype.isDone=function(){return!1},Dr.prototype.hasInteriorIntersection=function(){return this._hasInterior},Dr.prototype.interfaces_=function(){return[rs]},Dr.prototype.getClass=function(){return Dr},Dr.isAdjacentSegments=function(t,e){return Math.abs(t-e)===1};var ro=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],o=arguments[2];this.coord=new X(t),this.segmentIndex=e,this.dist=o};ro.prototype.getSegmentIndex=function(){return this.segmentIndex},ro.prototype.getCoordinate=function(){return this.coord},ro.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},ro.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},ro.prototype.isEndPoint=function(t){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===t},ro.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},ro.prototype.getDistance=function(){return this.dist},ro.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},ro.prototype.interfaces_=function(){return[H]},ro.prototype.getClass=function(){return ro};var Ti=function(){this._nodeMap=new T,this.edge=null;var t=arguments[0];this.edge=t};Ti.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Ti.prototype.iterator=function(){return this._nodeMap.values().iterator()},Ti.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),o=e.next();e.hasNext();){var u=e.next(),d=this.createSplitEdge(o,u);t.add(d),o=u}},Ti.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},Ti.prototype.createSplitEdge=function(t,e){var o=e.segmentIndex-t.segmentIndex+2,u=this.edge.pts[e.segmentIndex],d=e.dist>0||!e.coord.equals2D(u);d||o--;var w=new Array(o).fill(null),S=0;w[S++]=new X(t.coord);for(var U=t.segmentIndex+1;U<=e.segmentIndex;U++)w[S++]=this.edge.pts[U];return d&&(w[S]=e.coord),new _s(w,new be(this.edge._label))},Ti.prototype.add=function(t,e,o){var u=new ro(t,e,o),d=this._nodeMap.get(u);return d!==null?d:(this._nodeMap.put(u,u),u)},Ti.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},Ti.prototype.interfaces_=function(){return[]},Ti.prototype.getClass=function(){return Ti};var Do=function(){};Do.prototype.getChainStartIndices=function(t){var e=0,o=new St;o.add(new ft(e));do{var u=this.findChainEnd(t,e);o.add(new ft(u)),e=u}while(e<t.length-1);return Do.toIntArray(o)},Do.prototype.findChainEnd=function(t,e){for(var o=h.quadrant(t[e],t[e+1]),u=e+1;u<t.length&&h.quadrant(t[u-1],t[u])===o;)u++;return u-1},Do.prototype.interfaces_=function(){return[]},Do.prototype.getClass=function(){return Do},Do.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),o=0;o<e.length;o++)e[o]=t.get(o).intValue();return e};var Ki=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Bt,this.env2=new Bt;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Do;this.startIndex=e.getChainStartIndices(this.pts)};Ki.prototype.getCoordinates=function(){return this.pts},Ki.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,o=this.pts[this.startIndex[t+1]].x;return e>o?e:o},Ki.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,o=this.pts[this.startIndex[t+1]].x;return e<o?e:o},Ki.prototype.computeIntersectsForChain=function(){if(arguments.length===4){var t=arguments[0],e=arguments[1],o=arguments[2],u=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[o],e.startIndex[o+1],u)}else if(arguments.length===6){var d=arguments[0],w=arguments[1],S=arguments[2],U=arguments[3],$=arguments[4],ut=arguments[5],_t=this.pts[d],wt=this.pts[w],zt=S.pts[U],qt=S.pts[$];if(w-d==1&&$-U==1)return ut.addIntersections(this.e,d,S.e,U),null;if(this.env1.init(_t,wt),this.env2.init(zt,qt),!this.env1.intersects(this.env2))return null;var ne=Math.trunc((d+w)/2),oe=Math.trunc((U+$)/2);d<ne&&(U<oe&&this.computeIntersectsForChain(d,ne,S,U,oe,ut),oe<$&&this.computeIntersectsForChain(d,ne,S,oe,$,ut)),ne<w&&(U<oe&&this.computeIntersectsForChain(ne,w,S,U,oe,ut),oe<$&&this.computeIntersectsForChain(ne,w,S,oe,$,ut))}},Ki.prototype.getStartIndexes=function(){return this.startIndex},Ki.prototype.computeIntersects=function(t,e){for(var o=0;o<this.startIndex.length-1;o++)for(var u=0;u<t.startIndex.length-1;u++)this.computeIntersectsForChain(o,t,u,e)},Ki.prototype.interfaces_=function(){return[]},Ki.prototype.getClass=function(){return Ki};var Br=function t(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var e=0;e<2;e++)for(var o=0;o<3;o++)this._depth[e][o]=t.NULL_VALUE},Bo={NULL_VALUE:{configurable:!0}};Br.prototype.getDepth=function(t,e){return this._depth[t][e]},Br.prototype.setDepth=function(t,e,o){this._depth[t][e]=o},Br.prototype.isNull=function(){if(arguments.length===0){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==Br.NULL_VALUE)return!1;return!0}if(arguments.length===1){var o=arguments[0];return this._depth[o][1]===Br.NULL_VALUE}if(arguments.length===2){var u=arguments[0],d=arguments[1];return this._depth[u][d]===Br.NULL_VALUE}},Br.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var o=1;o<3;o++){var u=0;this._depth[t][o]>e&&(u=1),this._depth[t][o]=u}}},Br.prototype.getDelta=function(t){return this._depth[t][It.RIGHT]-this._depth[t][It.LEFT]},Br.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?Q.EXTERIOR:Q.INTERIOR},Br.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},Br.prototype.add=function(){if(arguments.length===1)for(var t=arguments[0],e=0;e<2;e++)for(var o=1;o<3;o++){var u=t.getLocation(e,o);u!==Q.EXTERIOR&&u!==Q.INTERIOR||(this.isNull(e,o)?this._depth[e][o]=Br.depthAtLocation(u):this._depth[e][o]+=Br.depthAtLocation(u))}else if(arguments.length===3){var d=arguments[0],w=arguments[1];arguments[2]===Q.INTERIOR&&this._depth[d][w]++}},Br.prototype.interfaces_=function(){return[]},Br.prototype.getClass=function(){return Br},Br.depthAtLocation=function(t){return t===Q.EXTERIOR?0:t===Q.INTERIOR?1:Br.NULL_VALUE},Bo.NULL_VALUE.get=function(){return-1},Object.defineProperties(Br,Bo);var _s=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new Ti(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Br,this._depthDelta=0,arguments.length===1){var o=arguments[0];e.call(this,o,null)}else if(arguments.length===2){var u=arguments[0],d=arguments[1];this.pts=u,this._label=d}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var o=new Array(2).fill(null);return o[0]=this.pts[0],o[1]=this.pts[1],new e(o,be.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(o){this._isIsolated=o},e.prototype.setName=function(o){this._name=o},e.prototype.equals=function(o){if(!(o instanceof e))return!1;var u=o;if(this.pts.length!==u.pts.length)return!1;for(var d=!0,w=!0,S=this.pts.length,U=0;U<this.pts.length;U++)if(this.pts[U].equals2D(u.pts[U])||(d=!1),this.pts[U].equals2D(u.pts[--S])||(w=!1),!d&&!w)return!1;return!0},e.prototype.getCoordinate=function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var o=arguments[0];return this.pts[o]}},e.prototype.print=function(o){o.print("edge "+this._name+": "),o.print("LINESTRING (");for(var u=0;u<this.pts.length;u++)u>0&&o.print(","),o.print(this.pts[u].x+" "+this.pts[u].y);o.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(o){e.updateIM(this._label,o)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&this.pts.length===3&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(o){o.print("edge "+this._name+": ");for(var u=this.pts.length-1;u>=0;u--)o.print(this.pts[u]+" ");o.println("")},e.prototype.getMonotoneChainEdge=function(){return this._mce===null&&(this._mce=new Ki(this)),this._mce},e.prototype.getEnvelope=function(){if(this._env===null){this._env=new Bt;for(var o=0;o<this.pts.length;o++)this._env.expandToInclude(this.pts[o])}return this._env},e.prototype.addIntersection=function(o,u,d,w){var S=new X(o.getIntersection(w)),U=u,$=o.getEdgeDistance(d,w),ut=U+1;if(ut<this.pts.length){var _t=this.pts[ut];S.equals2D(_t)&&(U=ut,$=0)}this.eiList.add(S,U,$)},e.prototype.toString=function(){var o=new Xt;o.append("edge "+this._name+": "),o.append("LINESTRING (");for(var u=0;u<this.pts.length;u++)u>0&&o.append(","),o.append(this.pts[u].x+" "+this.pts[u].y);return o.append(")  "+this._label+" "+this._depthDelta),o.toString()},e.prototype.isPointwiseEqual=function(o){if(this.pts.length!==o.pts.length)return!1;for(var u=0;u<this.pts.length;u++)if(!this.pts[u].equals2D(o.pts[u]))return!1;return!0},e.prototype.setDepthDelta=function(o){this._depthDelta=o},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(o,u,d){for(var w=0;w<o.getIntersectionNum();w++)this.addIntersection(o,u,d,w)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(arguments.length!==2)return t.prototype.updateIM.apply(this,arguments);var o=arguments[0],u=arguments[1];u.setAtLeastIfValid(o.getLocation(0,It.ON),o.getLocation(1,It.ON),1),o.isArea()&&(u.setAtLeastIfValid(o.getLocation(0,It.LEFT),o.getLocation(1,It.LEFT),2),u.setAtLeastIfValid(o.getLocation(0,It.RIGHT),o.getLocation(1,It.RIGHT),2))},e}(ie),Jr=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new br,this._bufParams=t||null};Jr.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},Jr.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(e!==null){var o=e.getLabel(),u=t.getLabel();e.isPointwiseEqual(t)||(u=new be(t.getLabel())).flip(),o.merge(u);var d=Jr.depthDelta(u),w=e.getDepthDelta()+d;e.setDepthDelta(w)}else this._edgeList.add(t),t.setDepthDelta(Jr.depthDelta(t.getLabel()))},Jr.prototype.buildSubgraphs=function(t,e){for(var o=new St,u=t.iterator();u.hasNext();){var d=u.next(),w=d.getRightmostCoordinate(),S=new es(o).getDepth(w);d.computeDepth(S),d.findResultEdges(),o.add(d),e.add(d.getDirectedEdges(),d.getNodes())}},Jr.prototype.createSubgraphs=function(t){for(var e=new St,o=t.getNodes().iterator();o.hasNext();){var u=o.next();if(!u.isVisited()){var d=new tr;d.create(u),e.add(d)}}return Gt.sort(e,Gt.reverseOrder()),e},Jr.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},Jr.prototype.getNoder=function(t){if(this._workingNoder!==null)return this._workingNoder;var e=new Ha,o=new F;return o.setPrecisionModel(t),e.setSegmentIntersector(new Dr(o)),e},Jr.prototype.buffer=function(t,e){var o=this._workingPrecisionModel;o===null&&(o=t.getPrecisionModel()),this._geomFact=t.getFactory();var u=new li(o,this._bufParams),d=new _i(t,e,u).getCurves();if(d.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(d,o),this._graph=new V(new ms),this._graph.addEdges(this._edgeList.getEdges());var w=this.createSubgraphs(this._graph),S=new nt(this._geomFact);this.buildSubgraphs(w,S);var U=S.getPolygons();return U.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(U)},Jr.prototype.computeNodedEdges=function(t,e){var o=this.getNoder(e);o.computeNodes(t);for(var u=o.getNodedSubstrings().iterator();u.hasNext();){var d=u.next(),w=d.getCoordinates();if(w.length!==2||!w[0].equals2D(w[1])){var S=d.getData(),U=new _s(d.getCoordinates(),new be(S));this.insertUniqueEdge(U)}}},Jr.prototype.setNoder=function(t){this._workingNoder=t},Jr.prototype.interfaces_=function(){return[]},Jr.prototype.getClass=function(){return Jr},Jr.depthDelta=function(t){var e=t.getLocation(0,It.LEFT),o=t.getLocation(0,It.RIGHT);return e===Q.INTERIOR&&o===Q.EXTERIOR?1:e===Q.EXTERIOR&&o===Q.INTERIOR?-1:0},Jr.convertSegStrings=function(t){for(var e=new Kt,o=new St;t.hasNext();){var u=t.next(),d=e.createLineString(u.getCoordinates());o.add(d)}return e.buildGeometry(o)};var _o=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(arguments.length===4){var o=arguments[0],u=arguments[1],d=arguments[2],w=arguments[3];this._noder=o,this._scaleFactor=u,this._offsetX=d,this._offsetY=w,this._isScaled=!this.isIntegerPrecision()}};_o.prototype.rescale=function(){if(ct(arguments[0],he))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var o=arguments[0],u=0;u<o.length;u++)o[u].x=o[u].x/this._scaleFactor+this._offsetX,o[u].y=o[u].y/this._scaleFactor+this._offsetY;o.length===2&&o[0].equals2D(o[1])&&fe.out.println(o)}},_o.prototype.scale=function(){if(ct(arguments[0],he)){for(var t=arguments[0],e=new St,o=t.iterator();o.hasNext();){var u=o.next();e.add(new Zn(this.scale(u.getCoordinates()),u.getData()))}return e}if(arguments[0]instanceof Array){for(var d=arguments[0],w=new Array(d.length).fill(null),S=0;S<d.length;S++)w[S]=new X(Math.round((d[S].x-this._offsetX)*this._scaleFactor),Math.round((d[S].y-this._offsetY)*this._scaleFactor),d[S].z);return re.removeRepeatedPoints(w)}},_o.prototype.isIntegerPrecision=function(){return this._scaleFactor===1},_o.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},_o.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},_o.prototype.interfaces_=function(){return[Ro]},_o.prototype.getClass=function(){return _o};var io=function(){this._li=new F,this._segStrings=null;var t=arguments[0];this._segStrings=t},Mo={fact:{configurable:!0}};io.prototype.checkEndPtVertexIntersections=function(){if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(arguments.length===2){for(var o=arguments[0],u=arguments[1].iterator();u.hasNext();)for(var d=u.next().getCoordinates(),w=1;w<d.length-1;w++)if(d[w].equals(o))throw new ht("found endpt/interior pt intersection at index "+w+" :pt "+o)}},io.prototype.checkInteriorIntersections=function(){if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),o=this._segStrings.iterator();o.hasNext();){var u=o.next();this.checkInteriorIntersections(e,u)}else if(arguments.length===2)for(var d=arguments[0],w=arguments[1],S=d.getCoordinates(),U=w.getCoordinates(),$=0;$<S.length-1;$++)for(var ut=0;ut<U.length-1;ut++)this.checkInteriorIntersections(d,$,w,ut);else if(arguments.length===4){var _t=arguments[0],wt=arguments[1],zt=arguments[2],qt=arguments[3];if(_t===zt&&wt===qt)return null;var ne=_t.getCoordinates()[wt],oe=_t.getCoordinates()[wt+1],In=zt.getCoordinates()[qt],xr=zt.getCoordinates()[qt+1];if(this._li.computeIntersection(ne,oe,In,xr),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,ne,oe)||this.hasInteriorIntersection(this._li,In,xr)))throw new ht("found non-noded intersection at "+ne+"-"+oe+" and "+In+"-"+xr)}},io.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},io.prototype.checkCollapses=function(){if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(arguments.length===1)for(var o=arguments[0].getCoordinates(),u=0;u<o.length-2;u++)this.checkCollapse(o[u],o[u+1],o[u+2])},io.prototype.hasInteriorIntersection=function(t,e,o){for(var u=0;u<t.getIntersectionNum();u++){var d=t.getIntersection(u);if(!d.equals(e)&&!d.equals(o))return!0}return!1},io.prototype.checkCollapse=function(t,e,o){if(t.equals(o))throw new ht("found non-noded collapse at "+io.fact.createLineString([t,e,o]))},io.prototype.interfaces_=function(){return[]},io.prototype.getClass=function(){return io},Mo.fact.get=function(){return new Kt},Object.defineProperties(io,Mo);var hi=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],o=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=o,e<=0)throw new D("Scale factor must be non-zero");e!==1&&(this._pt=new X(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new X,this._p1Scaled=new X),this.initCorners(this._pt)},ys={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};hi.prototype.intersectsScaled=function(t,e){var o=Math.min(t.x,e.x),u=Math.max(t.x,e.x),d=Math.min(t.y,e.y),w=Math.max(t.y,e.y),S=this._maxx<o||this._minx>u||this._maxy<d||this._miny>w;if(S)return!1;var U=this.intersectsToleranceSquare(t,e);return C.isTrue(!(S&&U),"Found bad envelope test"),U},hi.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new X(this._maxx,this._maxy),this._corner[1]=new X(this._minx,this._maxy),this._corner[2]=new X(this._minx,this._miny),this._corner[3]=new X(this._maxx,this._miny)},hi.prototype.intersects=function(t,e){return this._scaleFactor===1?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},hi.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},hi.prototype.getCoordinate=function(){return this._originalPt},hi.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},hi.prototype.getSafeEnvelope=function(){if(this._safeEnv===null){var t=hi.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Bt(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},hi.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))},hi.prototype.intersectsToleranceSquare=function(t,e){var o=!1,u=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(o=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(u=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!o||!u)||!!t.equals(this._pt)||!!e.equals(this._pt))))},hi.prototype.addSnappedNode=function(t,e){var o=t.getCoordinate(e),u=t.getCoordinate(e+1);return!!this.intersects(o,u)&&(t.addIntersection(this.getCoordinate(),e),!0)},hi.prototype.interfaces_=function(){return[]},hi.prototype.getClass=function(){return hi},ys.SAFE_ENV_EXPANSION_FACTOR.get=function(){return .75},Object.defineProperties(hi,ys);var Ys=function(){this.tempEnv1=new Bt,this.selectedSegment=new Yt};Ys.prototype.select=function(){if(arguments.length!==1){if(arguments.length===2){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}}},Ys.prototype.interfaces_=function(){return[]},Ys.prototype.getClass=function(){return Ys};var qi=function(){this._index=null;var t=arguments[0];this._index=t},Vs={HotPixelSnapAction:{configurable:!0}};qi.prototype.snap=function(){if(arguments.length===1){var t=arguments[0];return this.snap(t,null,-1)}if(arguments.length===3){var e=arguments[0],o=arguments[1],u=arguments[2],d=e.getSafeEnvelope(),w=new Za(e,o,u);return this._index.query(d,{interfaces_:function(){return[dt]},visitItem:function(S){S.select(d,w)}}),w.isNodeAdded()}},qi.prototype.interfaces_=function(){return[]},qi.prototype.getClass=function(){return qi},Vs.HotPixelSnapAction.get=function(){return Za},Object.defineProperties(qi,Vs);var Za=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var o=arguments[0],u=arguments[1],d=arguments[2];this._hotPixel=o,this._parentEdge=u,this._hotPixelVertexIndex=d}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(arguments.length!==2)return t.prototype.select.apply(this,arguments);var o=arguments[0],u=arguments[1],d=o.getContext();if(this._parentEdge!==null&&d===this._parentEdge&&u===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(d,u)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ys),Fo=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new St};Fo.prototype.processIntersections=function(t,e,o,u){if(t===o&&e===u)return null;var d=t.getCoordinates()[e],w=t.getCoordinates()[e+1],S=o.getCoordinates()[u],U=o.getCoordinates()[u+1];if(this._li.computeIntersection(d,w,S,U),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var $=0;$<this._li.getIntersectionNum();$++)this._interiorIntersections.add(this._li.getIntersection($));t.addIntersections(this._li,e,0),o.addIntersections(this._li,u,1)}},Fo.prototype.isDone=function(){return!1},Fo.prototype.getInteriorIntersections=function(){return this._interiorIntersections},Fo.prototype.interfaces_=function(){return[rs]},Fo.prototype.getClass=function(){return Fo};var Ui=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new F,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};Ui.prototype.checkCorrectness=function(t){var e=Zn.getNodedSubstrings(t),o=new io(e);try{o.checkValid()}catch(u){if(!(u instanceof Re))throw u;u.printStackTrace()}},Ui.prototype.getNodedSubstrings=function(){return Zn.getNodedSubstrings(this._nodedSegStrings)},Ui.prototype.snapRound=function(t,e){var o=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(o),this.computeVertexSnaps(t)},Ui.prototype.findInteriorIntersections=function(t,e){var o=new Fo(e);return this._noder.setSegmentIntersector(o),this._noder.computeNodes(t),o.getInteriorIntersections()},Ui.prototype.computeVertexSnaps=function(){if(ct(arguments[0],he))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof Zn)for(var o=arguments[0],u=o.getCoordinates(),d=0;d<u.length;d++){var w=new hi(u[d],this._scaleFactor,this._li);this._pointSnapper.snap(w,o,d)&&o.addIntersection(u[d],d)}},Ui.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new Ha,this._pointSnapper=new qi(this._noder.getIndex()),this.snapRound(t,this._li)},Ui.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var o=e.next(),u=new hi(o,this._scaleFactor,this._li);this._pointSnapper.snap(u)}},Ui.prototype.interfaces_=function(){return[Ro]},Ui.prototype.getClass=function(){return Ui};var mr=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Be,this._resultGeometry=null,this._saveException=null,arguments.length===1){var t=arguments[0];this._argGeom=t}else if(arguments.length===2){var e=arguments[0],o=arguments[1];this._argGeom=e,this._bufParams=o}},zo={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};mr.prototype.bufferFixedPrecision=function(t){var e=new _o(new Ui(new Zt(1)),t.getScale()),o=new Jr(this._bufParams);o.setWorkingPrecisionModel(t),o.setNoder(e),this._resultGeometry=o.buffer(this._argGeom,this._distance)},mr.prototype.bufferReducedPrecision=function(){var t=this;if(arguments.length===0){for(var e=mr.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(w){if(!(w instanceof Qn))throw w;t._saveException=w}if(t._resultGeometry!==null)return null}throw this._saveException}if(arguments.length===1){var o=arguments[0],u=mr.precisionScaleFactor(this._argGeom,this._distance,o),d=new Zt(u);this.bufferFixedPrecision(d)}},mr.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===Zt.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},mr.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},mr.prototype.bufferOriginalPrecision=function(){try{var t=new Jr(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(e){if(!(e instanceof ht))throw e;this._saveException=e}},mr.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},mr.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},mr.prototype.interfaces_=function(){return[]},mr.prototype.getClass=function(){return mr},mr.bufferOp=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return new mr(t).getResultGeometry(e)}if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof vt&&typeof arguments[1]=="number"){var o=arguments[0],u=arguments[1],d=arguments[2],w=new mr(o);return w.setQuadrantSegments(d),w.getResultGeometry(u)}if(arguments[2]instanceof Be&&arguments[0]instanceof vt&&typeof arguments[1]=="number"){var S=arguments[0],U=arguments[1],$=arguments[2];return new mr(S,$).getResultGeometry(U)}}else if(arguments.length===4){var ut=arguments[0],_t=arguments[1],wt=arguments[2],zt=arguments[3],qt=new mr(ut);return qt.setQuadrantSegments(wt),qt.setEndCapStyle(zt),qt.getResultGeometry(_t)}},mr.precisionScaleFactor=function(t,e,o){var u=t.getEnvelopeInternal(),d=bt.max(Math.abs(u.getMaxX()),Math.abs(u.getMaxY()),Math.abs(u.getMinX()),Math.abs(u.getMinY()))+2*(e>0?e:0),w=o-Math.trunc(Math.log(d)/Math.log(10)+1);return Math.pow(10,w)},zo.CAP_ROUND.get=function(){return Be.CAP_ROUND},zo.CAP_BUTT.get=function(){return Be.CAP_FLAT},zo.CAP_FLAT.get=function(){return Be.CAP_FLAT},zo.CAP_SQUARE.get=function(){return Be.CAP_SQUARE},zo.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(mr,zo);var cr=function(){this._pt=[new X,new X],this._distance=A.NaN,this._isNull=!0};cr.prototype.getCoordinates=function(){return this._pt},cr.prototype.getCoordinate=function(t){return this._pt[t]},cr.prototype.setMinimum=function(){if(arguments.length===1){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(arguments.length===2){var e=arguments[0],o=arguments[1];if(this._isNull)return this.initialize(e,o),null;var u=e.distance(o);u<this._distance&&this.initialize(e,o,u)}},cr.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(arguments.length===3){var o=arguments[0],u=arguments[1],d=arguments[2];this._pt[0].setCoordinate(o),this._pt[1].setCoordinate(u),this._distance=d,this._isNull=!1}},cr.prototype.getDistance=function(){return this._distance},cr.prototype.setMaximum=function(){if(arguments.length===1){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(arguments.length===2){var e=arguments[0],o=arguments[1];if(this._isNull)return this.initialize(e,o),null;var u=e.distance(o);u>this._distance&&this.initialize(e,o,u)}},cr.prototype.interfaces_=function(){return[]},cr.prototype.getClass=function(){return cr};var ji=function(){};ji.prototype.interfaces_=function(){return[]},ji.prototype.getClass=function(){return ji},ji.computeDistance=function(){if(arguments[2]instanceof cr&&arguments[0]instanceof kn&&arguments[1]instanceof X)for(var t=arguments[0],e=arguments[1],o=arguments[2],u=t.getCoordinates(),d=new Yt,w=0;w<u.length-1;w++){d.setCoordinates(u[w],u[w+1]);var S=d.closestPoint(e);o.setMinimum(S,e)}else if(arguments[2]instanceof cr&&arguments[0]instanceof bn&&arguments[1]instanceof X){var U=arguments[0],$=arguments[1],ut=arguments[2];ji.computeDistance(U.getExteriorRing(),$,ut);for(var _t=0;_t<U.getNumInteriorRing();_t++)ji.computeDistance(U.getInteriorRingN(_t),$,ut)}else if(arguments[2]instanceof cr&&arguments[0]instanceof vt&&arguments[1]instanceof X){var wt=arguments[0],zt=arguments[1],qt=arguments[2];if(wt instanceof kn)ji.computeDistance(wt,zt,qt);else if(wt instanceof bn)ji.computeDistance(wt,zt,qt);else if(wt instanceof wn)for(var ne=wt,oe=0;oe<ne.getNumGeometries();oe++){var In=ne.getGeometryN(oe);ji.computeDistance(In,zt,qt)}else qt.setMinimum(wt.getCoordinate(),zt)}else if(arguments[2]instanceof cr&&arguments[0]instanceof Yt&&arguments[1]instanceof X){var xr=arguments[0],vi=arguments[1],Ho=arguments[2],Es=xr.closestPoint(vi);Ho.setMinimum(Es,vi)}};var Po=function(t){this._maxPtDist=new cr,this._inputGeom=t||null},la={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};Po.prototype.computeMaxMidpointDistance=function(t){var e=new oo(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Po.prototype.computeMaxVertexDistance=function(t){var e=new vs(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Po.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},Po.prototype.getDistancePoints=function(){return this._maxPtDist},Po.prototype.interfaces_=function(){return[]},Po.prototype.getClass=function(){return Po},la.MaxPointDistanceFilter.get=function(){return vs},la.MaxMidpointDistanceFilter.get=function(){return oo},Object.defineProperties(Po,la);var vs=function(t){this._maxPtDist=new cr,this._minPtDist=new cr,this._geom=t||null};vs.prototype.filter=function(t){this._minPtDist.initialize(),ji.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},vs.prototype.getMaxPointDistance=function(){return this._maxPtDist},vs.prototype.interfaces_=function(){return[Jt]},vs.prototype.getClass=function(){return vs};var oo=function(t){this._maxPtDist=new cr,this._minPtDist=new cr,this._geom=t||null};oo.prototype.filter=function(t,e){if(e===0)return null;var o=t.getCoordinate(e-1),u=t.getCoordinate(e),d=new X((o.x+u.x)/2,(o.y+u.y)/2);this._minPtDist.initialize(),ji.computeDistance(this._geom,d,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},oo.prototype.isDone=function(){return!1},oo.prototype.isGeometryChanged=function(){return!1},oo.prototype.getMaxPointDistance=function(){return this._maxPtDist},oo.prototype.interfaces_=function(){return[jr]},oo.prototype.getClass=function(){return oo};var Co=function(t){this._comps=t||null};Co.prototype.filter=function(t){t instanceof bn&&this._comps.add(t)},Co.prototype.interfaces_=function(){return[$n]},Co.prototype.getClass=function(){return Co},Co.getPolygons=function(){if(arguments.length===1){var t=arguments[0];return Co.getPolygons(t,new St)}if(arguments.length===2){var e=arguments[0],o=arguments[1];return e instanceof bn?o.add(e):e instanceof wn&&e.apply(new Co(o)),o}};var Er=function(){if(this._lines=null,this._isForcedToLineString=!1,arguments.length===1){var t=arguments[0];this._lines=t}else if(arguments.length===2){var e=arguments[0],o=arguments[1];this._lines=e,this._isForcedToLineString=o}};Er.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof Nr){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof kn&&this._lines.add(t)},Er.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Er.prototype.interfaces_=function(){return[Lt]},Er.prototype.getClass=function(){return Er},Er.getGeometry=function(){if(arguments.length===1){var t=arguments[0];return t.getFactory().buildGeometry(Er.getLines(t))}if(arguments.length===2){var e=arguments[0],o=arguments[1];return e.getFactory().buildGeometry(Er.getLines(e,o))}},Er.getLines=function(){if(arguments.length===1){var t=arguments[0];return Er.getLines(t,!1)}if(arguments.length===2){if(ct(arguments[0],he)&&ct(arguments[1],he)){for(var e=arguments[0],o=arguments[1],u=e.iterator();u.hasNext();){var d=u.next();Er.getLines(d,o)}return o}if(arguments[0]instanceof vt&&typeof arguments[1]=="boolean"){var w=arguments[0],S=arguments[1],U=new St;return w.apply(new Er(U,S)),U}if(arguments[0]instanceof vt&&ct(arguments[1],he)){var $=arguments[0],ut=arguments[1];return $ instanceof kn?ut.add($):$.apply(new Er(ut)),ut}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&ct(arguments[0],he)&&ct(arguments[1],he)){for(var _t=arguments[0],wt=arguments[1],zt=arguments[2],qt=_t.iterator();qt.hasNext();){var ne=qt.next();Er.getLines(ne,wt,zt)}return wt}if(typeof arguments[2]=="boolean"&&arguments[0]instanceof vt&&ct(arguments[1],he)){var oe=arguments[0],In=arguments[1],xr=arguments[2];return oe.apply(new Er(In,xr)),In}}};var Ji=function(){if(this._boundaryRule=$t.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,arguments.length!==0){if(arguments.length===1){var t=arguments[0];if(t===null)throw new D("Rule must be non-null");this._boundaryRule=t}}};Ji.prototype.locateInternal=function(){if(arguments[0]instanceof X&&arguments[1]instanceof bn){var t=arguments[0],e=arguments[1];if(e.isEmpty())return Q.EXTERIOR;var o=e.getExteriorRing(),u=this.locateInPolygonRing(t,o);if(u===Q.EXTERIOR)return Q.EXTERIOR;if(u===Q.BOUNDARY)return Q.BOUNDARY;for(var d=0;d<e.getNumInteriorRing();d++){var w=e.getInteriorRingN(d),S=this.locateInPolygonRing(t,w);if(S===Q.INTERIOR)return Q.EXTERIOR;if(S===Q.BOUNDARY)return Q.BOUNDARY}return Q.INTERIOR}if(arguments[0]instanceof X&&arguments[1]instanceof kn){var U=arguments[0],$=arguments[1];if(!$.getEnvelopeInternal().intersects(U))return Q.EXTERIOR;var ut=$.getCoordinates();return $.isClosed()||!U.equals(ut[0])&&!U.equals(ut[ut.length-1])?tt.isOnLine(U,ut)?Q.INTERIOR:Q.EXTERIOR:Q.BOUNDARY}if(arguments[0]instanceof X&&arguments[1]instanceof pr){var _t=arguments[0];return arguments[1].getCoordinate().equals2D(_t)?Q.INTERIOR:Q.EXTERIOR}},Ji.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?tt.locatePointInRing(t,e.getCoordinates()):Q.EXTERIOR},Ji.prototype.intersects=function(t,e){return this.locate(t,e)!==Q.EXTERIOR},Ji.prototype.updateLocationInfo=function(t){t===Q.INTERIOR&&(this._isIn=!0),t===Q.BOUNDARY&&this._numBoundaries++},Ji.prototype.computeLocation=function(t,e){if(e instanceof pr&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof kn)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof bn)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof ar)for(var o=e,u=0;u<o.getNumGeometries();u++){var d=o.getGeometryN(u);this.updateLocationInfo(this.locateInternal(t,d))}else if(e instanceof dr)for(var w=e,S=0;S<w.getNumGeometries();S++){var U=w.getGeometryN(S);this.updateLocationInfo(this.locateInternal(t,U))}else if(e instanceof wn)for(var $=new go(e);$.hasNext();){var ut=$.next();ut!==e&&this.computeLocation(t,ut)}},Ji.prototype.locate=function(t,e){return e.isEmpty()?Q.EXTERIOR:e instanceof kn?this.locateInternal(t,e):e instanceof bn?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?Q.BOUNDARY:this._numBoundaries>0||this._isIn?Q.INTERIOR:Q.EXTERIOR)},Ji.prototype.interfaces_=function(){return[]},Ji.prototype.getClass=function(){return Ji};var Xr=function t(){if(this._component=null,this._segIndex=null,this._pt=null,arguments.length===2){var e=arguments[0],o=arguments[1];t.call(this,e,t.INSIDE_AREA,o)}else if(arguments.length===3){var u=arguments[0],d=arguments[1],w=arguments[2];this._component=u,this._segIndex=d,this._pt=w}},Fu={INSIDE_AREA:{configurable:!0}};Xr.prototype.isInsideArea=function(){return this._segIndex===Xr.INSIDE_AREA},Xr.prototype.getCoordinate=function(){return this._pt},Xr.prototype.getGeometryComponent=function(){return this._component},Xr.prototype.getSegmentIndex=function(){return this._segIndex},Xr.prototype.interfaces_=function(){return[]},Xr.prototype.getClass=function(){return Xr},Fu.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Xr,Fu);var $r=function(t){this._pts=t||null};$r.prototype.filter=function(t){t instanceof pr&&this._pts.add(t)},$r.prototype.interfaces_=function(){return[$n]},$r.prototype.getClass=function(){return $r},$r.getPoints=function(){if(arguments.length===1){var t=arguments[0];return t instanceof pr?Gt.singletonList(t):$r.getPoints(t,new St)}if(arguments.length===2){var e=arguments[0],o=arguments[1];return e instanceof pr?o.add(e):e instanceof wn&&e.apply(new $r(o)),o}};var So=function(){this._locations=null;var t=arguments[0];this._locations=t};So.prototype.filter=function(t){(t instanceof pr||t instanceof kn||t instanceof bn)&&this._locations.add(new Xr(t,0,t.getCoordinate()))},So.prototype.interfaces_=function(){return[$n]},So.prototype.getClass=function(){return So},So.getLocations=function(t){var e=new St;return t.apply(new So(e)),e};var Fr=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Ji,this._minDistanceLocation=null,this._minDistance=A.MAX_VALUE,arguments.length===2){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(arguments.length===3){var o=arguments[0],u=arguments[1],d=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=o,this._geom[1]=u,this._terminateDistance=d}};Fr.prototype.computeContainmentDistance=function(){if(arguments.length===0){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(arguments.length===2){var e=arguments[0],o=arguments[1],u=1-e,d=Co.getPolygons(this._geom[e]);if(d.size()>0){var w=So.getLocations(this._geom[u]);if(this.computeContainmentDistance(w,d,o),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[u]=o[0],this._minDistanceLocation[e]=o[1],null}}else if(arguments.length===3){if(arguments[2]instanceof Array&&ct(arguments[0],we)&&ct(arguments[1],we)){for(var S=arguments[0],U=arguments[1],$=arguments[2],ut=0;ut<S.size();ut++)for(var _t=S.get(ut),wt=0;wt<U.size();wt++)if(this.computeContainmentDistance(_t,U.get(wt),$),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Xr&&arguments[1]instanceof bn){var zt=arguments[0],qt=arguments[1],ne=arguments[2],oe=zt.getCoordinate();if(Q.EXTERIOR!==this._ptLocator.locate(oe,qt))return this._minDistance=0,ne[0]=zt,ne[1]=new Xr(qt,oe),null}}},Fr.prototype.computeMinDistanceLinesPoints=function(t,e,o){for(var u=0;u<t.size();u++)for(var d=t.get(u),w=0;w<e.size();w++){var S=e.get(w);if(this.computeMinDistance(d,S,o),this._minDistance<=this._terminateDistance)return null}},Fr.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Er.getLines(this._geom[0]),o=Er.getLines(this._geom[1]),u=$r.getPoints(this._geom[0]),d=$r.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,o,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,d,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(o,u,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(u,d,t),void this.updateMinDistance(t,!1))))},Fr.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Fr.prototype.updateMinDistance=function(t,e){if(t[0]===null)return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Fr.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Fr.prototype.computeMinDistance=function(){if(arguments.length===0){if(this._minDistanceLocation!==null||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(arguments.length===3){if(arguments[2]instanceof Array&&arguments[0]instanceof kn&&arguments[1]instanceof pr){var t=arguments[0],e=arguments[1],o=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var u=t.getCoordinates(),d=e.getCoordinate(),w=0;w<u.length-1;w++){var S=tt.distancePointLine(d,u[w],u[w+1]);if(S<this._minDistance){this._minDistance=S;var U=new Yt(u[w],u[w+1]).closestPoint(d);o[0]=new Xr(t,w,U),o[1]=new Xr(e,0,d)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof kn&&arguments[1]instanceof kn){var $=arguments[0],ut=arguments[1],_t=arguments[2];if($.getEnvelopeInternal().distance(ut.getEnvelopeInternal())>this._minDistance)return null;for(var wt=$.getCoordinates(),zt=ut.getCoordinates(),qt=0;qt<wt.length-1;qt++)for(var ne=0;ne<zt.length-1;ne++){var oe=tt.distanceLineLine(wt[qt],wt[qt+1],zt[ne],zt[ne+1]);if(oe<this._minDistance){this._minDistance=oe;var In=new Yt(wt[qt],wt[qt+1]),xr=new Yt(zt[ne],zt[ne+1]),vi=In.closestPoints(xr);_t[0]=new Xr($,qt,vi[0]),_t[1]=new Xr(ut,ne,vi[1])}if(this._minDistance<=this._terminateDistance)return null}}}},Fr.prototype.computeMinDistancePoints=function(t,e,o){for(var u=0;u<t.size();u++)for(var d=t.get(u),w=0;w<e.size();w++){var S=e.get(w),U=d.getCoordinate().distance(S.getCoordinate());if(U<this._minDistance&&(this._minDistance=U,o[0]=new Xr(d,0,d.getCoordinate()),o[1]=new Xr(S,0,S.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Fr.prototype.distance=function(){if(this._geom[0]===null||this._geom[1]===null)throw new D("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Fr.prototype.computeMinDistanceLines=function(t,e,o){for(var u=0;u<t.size();u++)for(var d=t.get(u),w=0;w<e.size();w++){var S=e.get(w);if(this.computeMinDistance(d,S,o),this._minDistance<=this._terminateDistance)return null}},Fr.prototype.interfaces_=function(){return[]},Fr.prototype.getClass=function(){return Fr},Fr.distance=function(t,e){return new Fr(t,e).distance()},Fr.isWithinDistance=function(t,e,o){return new Fr(t,e,o).distance()<=o},Fr.nearestPoints=function(t,e){return new Fr(t,e).nearestPoints()};var _r=function(){this._pt=[new X,new X],this._distance=A.NaN,this._isNull=!0};_r.prototype.getCoordinates=function(){return this._pt},_r.prototype.getCoordinate=function(t){return this._pt[t]},_r.prototype.setMinimum=function(){if(arguments.length===1){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(arguments.length===2){var e=arguments[0],o=arguments[1];if(this._isNull)return this.initialize(e,o),null;var u=e.distance(o);u<this._distance&&this.initialize(e,o,u)}},_r.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(arguments.length===3){var o=arguments[0],u=arguments[1],d=arguments[2];this._pt[0].setCoordinate(o),this._pt[1].setCoordinate(u),this._distance=d,this._isNull=!1}},_r.prototype.toString=function(){return Ht.toLineString(this._pt[0],this._pt[1])},_r.prototype.getDistance=function(){return this._distance},_r.prototype.setMaximum=function(){if(arguments.length===1){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(arguments.length===2){var e=arguments[0],o=arguments[1];if(this._isNull)return this.initialize(e,o),null;var u=e.distance(o);u>this._distance&&this.initialize(e,o,u)}},_r.prototype.interfaces_=function(){return[]},_r.prototype.getClass=function(){return _r};var so=function(){};so.prototype.interfaces_=function(){return[]},so.prototype.getClass=function(){return so},so.computeDistance=function(){if(arguments[2]instanceof _r&&arguments[0]instanceof kn&&arguments[1]instanceof X)for(var t=arguments[0],e=arguments[1],o=arguments[2],u=new Yt,d=t.getCoordinates(),w=0;w<d.length-1;w++){u.setCoordinates(d[w],d[w+1]);var S=u.closestPoint(e);o.setMinimum(S,e)}else if(arguments[2]instanceof _r&&arguments[0]instanceof bn&&arguments[1]instanceof X){var U=arguments[0],$=arguments[1],ut=arguments[2];so.computeDistance(U.getExteriorRing(),$,ut);for(var _t=0;_t<U.getNumInteriorRing();_t++)so.computeDistance(U.getInteriorRingN(_t),$,ut)}else if(arguments[2]instanceof _r&&arguments[0]instanceof vt&&arguments[1]instanceof X){var wt=arguments[0],zt=arguments[1],qt=arguments[2];if(wt instanceof kn)so.computeDistance(wt,zt,qt);else if(wt instanceof bn)so.computeDistance(wt,zt,qt);else if(wt instanceof wn)for(var ne=wt,oe=0;oe<ne.getNumGeometries();oe++){var In=ne.getGeometryN(oe);so.computeDistance(In,zt,qt)}else qt.setMinimum(wt.getCoordinate(),zt)}else if(arguments[2]instanceof _r&&arguments[0]instanceof Yt&&arguments[1]instanceof X){var xr=arguments[0],vi=arguments[1],Ho=arguments[2],Es=xr.closestPoint(vi);Ho.setMinimum(Es,vi)}};var Ii=function(){this._g0=null,this._g1=null,this._ptDist=new _r,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},Ya={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Ii.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Ii.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new D("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},Ii.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Ii.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Ii.prototype.computeOrientedDistance=function(t,e,o){var u=new yo(e);if(t.apply(u),o.setMaximum(u.getMaxPointDistance()),this._densifyFrac>0){var d=new Go(e,this._densifyFrac);t.apply(d),o.setMaximum(d.getMaxPointDistance())}},Ii.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Ii.prototype.interfaces_=function(){return[]},Ii.prototype.getClass=function(){return Ii},Ii.distance=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return new Ii(t,e).distance()}if(arguments.length===3){var o=arguments[0],u=arguments[1],d=arguments[2],w=new Ii(o,u);return w.setDensifyFraction(d),w.distance()}},Ya.MaxPointDistanceFilter.get=function(){return yo},Ya.MaxDensifiedByFractionDistanceFilter.get=function(){return Go},Object.defineProperties(Ii,Ya);var yo=function(){this._maxPtDist=new _r,this._minPtDist=new _r,this._euclideanDist=new so,this._geom=null;var t=arguments[0];this._geom=t};yo.prototype.filter=function(t){this._minPtDist.initialize(),so.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},yo.prototype.getMaxPointDistance=function(){return this._maxPtDist},yo.prototype.interfaces_=function(){return[Jt]},yo.prototype.getClass=function(){return yo};var Go=function(){this._maxPtDist=new _r,this._minPtDist=new _r,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};Go.prototype.filter=function(t,e){if(e===0)return null;for(var o=t.getCoordinate(e-1),u=t.getCoordinate(e),d=(u.x-o.x)/this._numSubSegs,w=(u.y-o.y)/this._numSubSegs,S=0;S<this._numSubSegs;S++){var U=o.x+S*d,$=o.y+S*w,ut=new X(U,$);this._minPtDist.initialize(),so.computeDistance(this._geom,ut,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},Go.prototype.isDone=function(){return!1},Go.prototype.isGeometryChanged=function(){return!1},Go.prototype.getMaxPointDistance=function(){return this._maxPtDist},Go.prototype.interfaces_=function(){return[jr]},Go.prototype.getClass=function(){return Go};var Mr=function(t,e,o){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=o||null},ha={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Mr.prototype.checkMaximumDistance=function(t,e,o){var u=new Ii(e,t);if(u.setDensifyFraction(.25),this._maxDistanceFound=u.orientedDistance(),this._maxDistanceFound>o){this._isValid=!1;var d=u.getCoordinates();this._errorLocation=d[1],this._errorIndicator=t.getFactory().createLineString(d),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Ht.toLineString(d[0],d[1])+")"}},Mr.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=Mr.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Mr.VERBOSE&&fe.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Mr.prototype.checkNegativeValid=function(){if(!(this._input instanceof bn||this._input instanceof dr||this._input instanceof wn))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},Mr.prototype.getErrorIndicator=function(){return this._errorIndicator},Mr.prototype.checkMinimumDistance=function(t,e,o){var u=new Fr(t,e,o);if(this._minDistanceFound=u.distance(),this._minDistanceFound<o){this._isValid=!1;var d=u.nearestPoints();this._errorLocation=u.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(d),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Ht.toLineString(d[0],d[1])+" )"}},Mr.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},Mr.prototype.getErrorLocation=function(){return this._errorLocation},Mr.prototype.getPolygonLines=function(t){for(var e=new St,o=new Er(e),u=Co.getPolygons(t).iterator();u.hasNext();)u.next().apply(o);return t.getFactory().buildGeometry(e)},Mr.prototype.getErrorMessage=function(){return this._errMsg},Mr.prototype.interfaces_=function(){return[]},Mr.prototype.getClass=function(){return Mr},ha.VERBOSE.get=function(){return!1},ha.MAX_DISTANCE_DIFF_FRAC.get=function(){return .012},Object.defineProperties(Mr,ha);var Pr=function(t,e,o){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=o||null},Va={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Pr.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},Pr.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*Pr.MAX_ENV_DIFF_FRAC;t===0&&(t=.001);var e=new Bt(this._input.getEnvelopeInternal());e.expandBy(this._distance);var o=new Bt(this._result.getEnvelopeInternal());o.expandBy(t),o.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(o)),this.report("Envelope")},Pr.prototype.checkDistance=function(){var t=new Mr(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},Pr.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},Pr.prototype.checkPolygonal=function(){this._result instanceof bn||this._result instanceof dr||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},Pr.prototype.getErrorIndicator=function(){return this._errorIndicator},Pr.prototype.getErrorLocation=function(){return this._errorLocation},Pr.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},Pr.prototype.report=function(t){if(!Pr.VERBOSE)return null;fe.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},Pr.prototype.getErrorMessage=function(){return this._errorMsg},Pr.prototype.interfaces_=function(){return[]},Pr.prototype.getClass=function(){return Pr},Pr.isValidMsg=function(t,e,o){var u=new Pr(t,e,o);return u.isValid()?null:u.getErrorMessage()},Pr.isValid=function(t,e,o){return!!new Pr(t,e,o).isValid()},Va.VERBOSE.get=function(){return!1},Va.MAX_ENV_DIFF_FRAC.get=function(){return .012},Object.defineProperties(Pr,Va);var zr=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};zr.prototype.getCoordinates=function(){return this._pts},zr.prototype.size=function(){return this._pts.length},zr.prototype.getCoordinate=function(t){return this._pts[t]},zr.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},zr.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:ki.octant(this.getCoordinate(t),this.getCoordinate(t+1))},zr.prototype.setData=function(t){this._data=t},zr.prototype.getData=function(){return this._data},zr.prototype.toString=function(){return Ht.toLineString(new le(this._pts))},zr.prototype.interfaces_=function(){return[Gi]},zr.prototype.getClass=function(){return zr};var yr=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new St,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};yr.prototype.getInteriorIntersection=function(){return this._interiorIntersection},yr.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},yr.prototype.getIntersectionSegments=function(){return this._intSegments},yr.prototype.count=function(){return this._intersectionCount},yr.prototype.getIntersections=function(){return this._intersections},yr.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},yr.prototype.setKeepIntersections=function(t){this._keepIntersections=t},yr.prototype.processIntersections=function(t,e,o,u){if(!this._findAllIntersections&&this.hasIntersection()||t===o&&e===u||this._isCheckEndSegmentsOnly&&!(this.isEndSegment(t,e)||this.isEndSegment(o,u)))return null;var d=t.getCoordinates()[e],w=t.getCoordinates()[e+1],S=o.getCoordinates()[u],U=o.getCoordinates()[u+1];this._li.computeIntersection(d,w,S,U),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=d,this._intSegments[1]=w,this._intSegments[2]=S,this._intSegments[3]=U,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},yr.prototype.isEndSegment=function(t,e){return e===0||e>=t.size()-2},yr.prototype.hasIntersection=function(){return this._interiorIntersection!==null},yr.prototype.isDone=function(){return!this._findAllIntersections&&this._interiorIntersection!==null},yr.prototype.interfaces_=function(){return[rs]},yr.prototype.getClass=function(){return yr},yr.createAllIntersectionsFinder=function(t){var e=new yr(t);return e.setFindAllIntersections(!0),e},yr.createAnyIntersectionFinder=function(t){return new yr(t)},yr.createIntersectionCounter=function(t){var e=new yr(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var Hi=function(){this._li=new F,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};Hi.prototype.execute=function(){if(this._segInt!==null)return null;this.checkInteriorIntersections()},Hi.prototype.getIntersections=function(){return this._segInt.getIntersections()},Hi.prototype.isValid=function(){return this.execute(),this._isValid},Hi.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Hi.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new yr(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new Ha;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Hi.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Qn(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Hi.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Ht.toLineString(t[0],t[1])+" and "+Ht.toLineString(t[2],t[3])},Hi.prototype.interfaces_=function(){return[]},Hi.prototype.getClass=function(){return Hi},Hi.computeIntersections=function(t){var e=new Hi(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var ao=function t(){this._nv=null;var e=arguments[0];this._nv=new Hi(t.toSegmentStrings(e))};ao.prototype.checkValid=function(){this._nv.checkValid()},ao.prototype.interfaces_=function(){return[]},ao.prototype.getClass=function(){return ao},ao.toSegmentStrings=function(t){for(var e=new St,o=t.iterator();o.hasNext();){var u=o.next();e.add(new zr(u.getCoordinates(),u))}return e},ao.checkValid=function(t){new ao(t).checkValid()};var xs=function(t){this._mapOp=t};xs.prototype.map=function(t){for(var e=new St,o=0;o<t.getNumGeometries();o++){var u=this._mapOp.map(t.getGeometryN(o));u.isEmpty()||e.add(u)}return t.getFactory().createGeometryCollection(Kt.toGeometryArray(e))},xs.prototype.interfaces_=function(){return[]},xs.prototype.getClass=function(){return xs},xs.map=function(t,e){return new xs(e).map(t)};var Oi=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new St,this._resultLineList=new St;var t=arguments[0],e=arguments[1],o=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=o};Oi.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var o=e.next();this.collectLineEdge(o,t,this._lineEdgesList),this.collectBoundaryTouchEdge(o,t,this._lineEdgesList)}},Oi.prototype.labelIsolatedLine=function(t,e){var o=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,o)},Oi.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Oi.prototype.collectLineEdge=function(t,e,o){var u=t.getLabel(),d=t.getEdge();t.isLineEdge()&&(t.isVisited()||!de.isResultOfOp(u,e)||d.isCovered()||(o.add(d),t.setVisitedEdge(!0)))},Oi.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var o=e.next(),u=o.getEdge();if(o.isLineEdge()&&!u.isCoveredSet()){var d=this._op.isCoveredByA(o.getCoordinate());u.setCovered(d)}}},Oi.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var o=e.next(),u=o.getLabel();o.isIsolated()&&(u.isNull(0)?this.labelIsolatedLine(o,0):this.labelIsolatedLine(o,1))}},Oi.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var o=e.next(),u=this._geometryFactory.createLineString(o.getCoordinates());this._resultLineList.add(u),o.setInResult(!0)}},Oi.prototype.collectBoundaryTouchEdge=function(t,e,o){var u=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(C.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(de.isResultOfOp(u,e)&&e===de.INTERSECTION&&(o.add(t.getEdge()),t.setVisitedEdge(!0))))},Oi.prototype.interfaces_=function(){return[]},Oi.prototype.getClass=function(){return Oi};var vo=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new St;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};vo.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var o=this._geometryFactory.createPoint(e);this._resultPointList.add(o)}},vo.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var o=e.next();if(!o.isInResult()&&!o.isIncidentEdgeInResult()&&(o.getEdges().getDegree()===0||t===de.INTERSECTION)){var u=o.getLabel();de.isResultOfOp(u,t)&&this.filterCoveredNodeToPoint(o)}}},vo.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},vo.prototype.interfaces_=function(){return[]},vo.prototype.getClass=function(){return vo};var Qr=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Qr.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Qr.prototype.transformPolygon=function(t,e){var o=!0,u=this.transformLinearRing(t.getExteriorRing(),t);u!==null&&u instanceof Nr&&!u.isEmpty()||(o=!1);for(var d=new St,w=0;w<t.getNumInteriorRing();w++){var S=this.transformLinearRing(t.getInteriorRingN(w),t);S===null||S.isEmpty()||(S instanceof Nr||(o=!1),d.add(S))}if(o)return this._factory.createPolygon(u,d.toArray([]));var U=new St;return u!==null&&U.add(u),U.addAll(d),this._factory.buildGeometry(U)},Qr.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Qr.prototype.getInputGeometry=function(){return this._inputGeom},Qr.prototype.transformMultiLineString=function(t,e){for(var o=new St,u=0;u<t.getNumGeometries();u++){var d=this.transformLineString(t.getGeometryN(u),t);d!==null&&(d.isEmpty()||o.add(d))}return this._factory.buildGeometry(o)},Qr.prototype.transformCoordinates=function(t,e){return this.copy(t)},Qr.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Qr.prototype.transformMultiPoint=function(t,e){for(var o=new St,u=0;u<t.getNumGeometries();u++){var d=this.transformPoint(t.getGeometryN(u),t);d!==null&&(d.isEmpty()||o.add(d))}return this._factory.buildGeometry(o)},Qr.prototype.transformMultiPolygon=function(t,e){for(var o=new St,u=0;u<t.getNumGeometries();u++){var d=this.transformPolygon(t.getGeometryN(u),t);d!==null&&(d.isEmpty()||o.add(d))}return this._factory.buildGeometry(o)},Qr.prototype.copy=function(t){return t.copy()},Qr.prototype.transformGeometryCollection=function(t,e){for(var o=new St,u=0;u<t.getNumGeometries();u++){var d=this.transform(t.getGeometryN(u));d!==null&&(this._pruneEmptyGeometry&&d.isEmpty()||o.add(d))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(Kt.toGeometryArray(o)):this._factory.buildGeometry(o)},Qr.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof pr)return this.transformPoint(t,null);if(t instanceof mi)return this.transformMultiPoint(t,null);if(t instanceof Nr)return this.transformLinearRing(t,null);if(t instanceof kn)return this.transformLineString(t,null);if(t instanceof ar)return this.transformMultiLineString(t,null);if(t instanceof bn)return this.transformPolygon(t,null);if(t instanceof dr)return this.transformMultiPolygon(t,null);if(t instanceof wn)return this.transformGeometryCollection(t,null);throw new D("Unknown Geometry subtype: "+t.getClass().getName())},Qr.prototype.transformLinearRing=function(t,e){var o=this.transformCoordinates(t.getCoordinateSequence(),t);if(o===null)return this._factory.createLinearRing(null);var u=o.size();return u>0&&u<4&&!this._preserveType?this._factory.createLineString(o):this._factory.createLinearRing(o)},Qr.prototype.interfaces_=function(){return[]},Qr.prototype.getClass=function(){return Qr};var uo=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new Yt,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof kn&&typeof arguments[1]=="number"){var e=arguments[0],o=arguments[1];t.call(this,e.getCoordinates(),o)}else if(arguments[0]instanceof Array&&typeof arguments[1]=="number"){var u=arguments[0],d=arguments[1];this._srcPts=u,this._isClosed=t.isClosed(u),this._snapTolerance=d}};uo.prototype.snapVertices=function(t,e){for(var o=this._isClosed?t.size()-1:t.size(),u=0;u<o;u++){var d=t.get(u),w=this.findSnapForVertex(d,e);w!==null&&(t.set(u,new X(w)),u===0&&this._isClosed&&t.set(t.size()-1,new X(w)))}},uo.prototype.findSnapForVertex=function(t,e){for(var o=0;o<e.length;o++){if(t.equals2D(e[o]))return null;if(t.distance(e[o])<this._snapTolerance)return e[o]}return null},uo.prototype.snapTo=function(t){var e=new Xn(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},uo.prototype.snapSegments=function(t,e){if(e.length===0)return null;var o=e.length;e[0].equals2D(e[e.length-1])&&(o=e.length-1);for(var u=0;u<o;u++){var d=e[u],w=this.findSegmentIndexToSnap(d,t);w>=0&&t.add(w+1,new X(d),!1)}},uo.prototype.findSegmentIndexToSnap=function(t,e){for(var o=A.MAX_VALUE,u=-1,d=0;d<e.size()-1;d++){if(this._seg.p0=e.get(d),this._seg.p1=e.get(d+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var w=this._seg.distance(t);w<this._snapTolerance&&w<o&&(o=w,u=d)}return u},uo.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},uo.prototype.interfaces_=function(){return[]},uo.prototype.getClass=function(){return uo},uo.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var er=function(t){this._srcGeom=t||null},Wa={SNAP_PRECISION_FACTOR:{configurable:!0}};er.prototype.snapTo=function(t,e){var o=this.extractTargetCoordinates(t);return new Ka(e,o).transform(this._srcGeom)},er.prototype.snapToSelf=function(t,e){var o=this.extractTargetCoordinates(this._srcGeom),u=new Ka(t,o,!0).transform(this._srcGeom),d=u;return e&&ct(d,Mi)&&(d=u.buffer(0)),d},er.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},er.prototype.extractTargetCoordinates=function(t){for(var e=new G,o=t.getCoordinates(),u=0;u<o.length;u++)e.add(o[u]);return e.toArray(new Array(0).fill(null))},er.prototype.computeMinimumSegmentLength=function(t){for(var e=A.MAX_VALUE,o=0;o<t.length-1;o++){var u=t[o].distance(t[o+1]);u<e&&(e=u)}return e},er.prototype.interfaces_=function(){return[]},er.prototype.getClass=function(){return er},er.snap=function(t,e,o){var u=new Array(2).fill(null),d=new er(t);u[0]=d.snapTo(e,o);var w=new er(e);return u[1]=w.snapTo(u[0],o),u},er.computeOverlaySnapTolerance=function(){if(arguments.length===1){var t=arguments[0],e=er.computeSizeBasedSnapTolerance(t),o=t.getPrecisionModel();if(o.getType()===Zt.FIXED){var u=1/o.getScale()*2/1.415;u>e&&(e=u)}return e}if(arguments.length===2){var d=arguments[0],w=arguments[1];return Math.min(er.computeOverlaySnapTolerance(d),er.computeOverlaySnapTolerance(w))}},er.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*er.SNAP_PRECISION_FACTOR},er.snapToSelf=function(t,e,o){return new er(t).snapToSelf(e,o)},Wa.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(er,Wa);var Ka=function(t){function e(o,u,d){t.call(this),this._snapTolerance=o||null,this._snapPts=u||null,this._isSelfSnap=d!==void 0&&d}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(o,u){var d=new uo(o,this._snapTolerance);return d.setAllowSnappingToSourceVertices(this._isSelfSnap),d.snapTo(u)},e.prototype.transformCoordinates=function(o,u){var d=o.toCoordinateArray(),w=this.snapLine(d,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(w)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Qr),Zr=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};Zr.prototype.getCommon=function(){return A.longBitsToDouble(this._commonBits)},Zr.prototype.add=function(t){var e=A.doubleToLongBits(t);if(this._isFirst)return this._commonBits=e,this._commonSignExp=Zr.signExpBits(this._commonBits),this._isFirst=!1,null;if(Zr.signExpBits(e)!==this._commonSignExp)return this._commonBits=0,null;this._commonMantissaBitsCount=Zr.numCommonMostSigMantissaBits(this._commonBits,e),this._commonBits=Zr.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))},Zr.prototype.toString=function(){if(arguments.length===1){var t=arguments[0],e=A.longBitsToDouble(t),o="0000000000000000000000000000000000000000000000000000000000000000"+A.toBinaryString(t),u=o.substring(o.length-64);return u.substring(0,1)+"  "+u.substring(1,12)+"(exp) "+u.substring(12)+" [ "+e+" ]"}},Zr.prototype.interfaces_=function(){return[]},Zr.prototype.getClass=function(){return Zr},Zr.getBit=function(t,e){return t&1<<e?1:0},Zr.signExpBits=function(t){return t>>52},Zr.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},Zr.numCommonMostSigMantissaBits=function(t,e){for(var o=0,u=52;u>=0;u--){if(Zr.getBit(t,u)!==Zr.getBit(e,u))return o;o++}return 52};var ko=function(){this._commonCoord=null,this._ccFilter=new ws},ca={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};ko.prototype.addCommonBits=function(t){var e=new To(this._commonCoord);t.apply(e),t.geometryChanged()},ko.prototype.removeCommonBits=function(t){if(this._commonCoord.x===0&&this._commonCoord.y===0)return t;var e=new X(this._commonCoord);e.x=-e.x,e.y=-e.y;var o=new To(e);return t.apply(o),t.geometryChanged(),t},ko.prototype.getCommonCoordinate=function(){return this._commonCoord},ko.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},ko.prototype.interfaces_=function(){return[]},ko.prototype.getClass=function(){return ko},ca.CommonCoordinateFilter.get=function(){return ws},ca.Translater.get=function(){return To},Object.defineProperties(ko,ca);var ws=function(){this._commonBitsX=new Zr,this._commonBitsY=new Zr};ws.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},ws.prototype.getCommonCoordinate=function(){return new X(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},ws.prototype.interfaces_=function(){return[Jt]},ws.prototype.getClass=function(){return ws};var To=function(){this.trans=null;var t=arguments[0];this.trans=t};To.prototype.filter=function(t,e){var o=t.getOrdinate(e,0)+this.trans.x,u=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,o),t.setOrdinate(e,1,u)},To.prototype.isDone=function(){return!1},To.prototype.isGeometryChanged=function(){return!0},To.prototype.interfaces_=function(){return[jr]},To.prototype.getClass=function(){return To};var vr=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};vr.prototype.selfSnap=function(t){return new er(t).snapTo(t,this._snapTolerance)},vr.prototype.removeCommonBits=function(t){this._cbr=new ko,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},vr.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},vr.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),o=de.overlayOp(e[0],e[1],t);return this.prepareResult(o)},vr.prototype.checkValid=function(t){t.isValid()||fe.out.println("Snapped geometry is invalid")},vr.prototype.computeSnapTolerance=function(){this._snapTolerance=er.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},vr.prototype.snap=function(t){var e=this.removeCommonBits(t);return er.snap(e[0],e[1],this._snapTolerance)},vr.prototype.interfaces_=function(){return[]},vr.prototype.getClass=function(){return vr},vr.overlayOp=function(t,e,o){return new vr(t,e).getResultGeometry(o)},vr.union=function(t,e){return vr.overlayOp(t,e,de.UNION)},vr.intersection=function(t,e){return vr.overlayOp(t,e,de.INTERSECTION)},vr.symDifference=function(t,e){return vr.overlayOp(t,e,de.SYMDIFFERENCE)},vr.difference=function(t,e){return vr.overlayOp(t,e,de.DIFFERENCE)};var ti=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};ti.prototype.getResultGeometry=function(t){var e=null,o=!1,u=null;try{e=de.overlayOp(this._geom[0],this._geom[1],t),o=!0}catch(d){if(!(d instanceof ht))throw d;u=d}if(!o)try{e=vr.overlayOp(this._geom[0],this._geom[1],t)}catch(d){throw d instanceof ht?u:d}return e},ti.prototype.interfaces_=function(){return[]},ti.prototype.getClass=function(){return ti},ti.overlayOp=function(t,e,o){return new ti(t,e).getResultGeometry(o)},ti.union=function(t,e){return ti.overlayOp(t,e,de.UNION)},ti.intersection=function(t,e){return ti.overlayOp(t,e,de.INTERSECTION)},ti.symDifference=function(t,e){return ti.overlayOp(t,e,de.SYMDIFFERENCE)},ti.difference=function(t,e){return ti.overlayOp(t,e,de.DIFFERENCE)};var i=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};i.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},i.prototype.interfaces_=function(){return[]},i.prototype.getClass=function(){return i};var f=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,arguments.length===2){var e=arguments[0],o=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=o}else if(arguments.length===3){var u=arguments[0],d=arguments[1],w=arguments[2];this._eventType=t.INSERT,this._label=u,this._xValue=d,this._obj=w}},y={INSERT:{configurable:!0},DELETE:{configurable:!0}};f.prototype.isDelete=function(){return this._eventType===f.DELETE},f.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},f.prototype.getObject=function(){return this._obj},f.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},f.prototype.getInsertEvent=function(){return this._insertEvent},f.prototype.isInsert=function(){return this._eventType===f.INSERT},f.prototype.isSameLabel=function(t){return this._label!==null&&this._label===t._label},f.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},f.prototype.interfaces_=function(){return[H]},f.prototype.getClass=function(){return f},y.INSERT.get=function(){return 1},y.DELETE.get=function(){return 2},Object.defineProperties(f,y);var M=function(){};M.prototype.interfaces_=function(){return[]},M.prototype.getClass=function(){return M};var O=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],o=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=o};O.prototype.isTrivialIntersection=function(t,e,o,u){if(t===o&&this._li.getIntersectionNum()===1){if(O.isAdjacentSegments(e,u))return!0;if(t.isClosed()){var d=t.getNumPoints()-1;if(e===0&&u===d||u===0&&e===d)return!0}}return!1},O.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},O.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},O.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},O.prototype.isBoundaryPointInternal=function(t,e){for(var o=e.iterator();o.hasNext();){var u=o.next().getCoordinate();if(t.isIntersection(u))return!0}return!1},O.prototype.hasProperIntersection=function(){return this._hasProper},O.prototype.hasIntersection=function(){return this._hasIntersection},O.prototype.isDone=function(){return this._isDone},O.prototype.isBoundaryPoint=function(t,e){return e!==null&&(!!this.isBoundaryPointInternal(t,e[0])||!!this.isBoundaryPointInternal(t,e[1]))},O.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},O.prototype.addIntersections=function(t,e,o,u){if(t===o&&e===u)return null;this.numTests++;var d=t.getCoordinates()[e],w=t.getCoordinates()[e+1],S=o.getCoordinates()[u],U=o.getCoordinates()[u+1];this._li.computeIntersection(d,w,S,U),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),o.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,o,u)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),o.addIntersections(this._li,u,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},O.prototype.interfaces_=function(){return[]},O.prototype.getClass=function(){return O},O.isAdjacentSegments=function(t,e){return Math.abs(t-e)===1};var W=function(t){function e(){t.call(this),this.events=new St,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){Gt.sort(this.events);for(var o=0;o<this.events.size();o++){var u=this.events.get(o);u.isDelete()&&u.getInsertEvent().setDeleteEventIndex(o)}},e.prototype.computeIntersections=function(){if(arguments.length===1){var o=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var u=0;u<this.events.size();u++){var d=this.events.get(u);if(d.isInsert()&&this.processOverlaps(u,d.getDeleteEventIndex(),d,o),o.isDone())break}}else if(arguments.length===3){if(arguments[2]instanceof O&&ct(arguments[0],we)&&ct(arguments[1],we)){var w=arguments[0],S=arguments[1],U=arguments[2];this.addEdges(w,w),this.addEdges(S,S),this.computeIntersections(U)}else if(typeof arguments[2]=="boolean"&&ct(arguments[0],we)&&arguments[1]instanceof O){var $=arguments[0],ut=arguments[1];arguments[2]?this.addEdges($,null):this.addEdges($),this.computeIntersections(ut)}}},e.prototype.addEdge=function(o,u){for(var d=o.getMonotoneChainEdge(),w=d.getStartIndexes(),S=0;S<w.length-1;S++){var U=new i(d,S),$=new f(u,d.getMinX(S),U);this.events.add($),this.events.add(new f(d.getMaxX(S),$))}},e.prototype.processOverlaps=function(o,u,d,w){for(var S=d.getObject(),U=o;U<u;U++){var $=this.events.get(U);if($.isInsert()){var ut=$.getObject();d.isSameLabel($)||(S.computeIntersections(ut,w),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(arguments.length===1)for(var o=arguments[0].iterator();o.hasNext();){var u=o.next();this.addEdge(u,u)}else if(arguments.length===2)for(var d=arguments[0],w=arguments[1],S=d.iterator();S.hasNext();){var U=S.next();this.addEdge(U,w)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(M),at=function(){this._min=A.POSITIVE_INFINITY,this._max=A.NEGATIVE_INFINITY},mt={NodeComparator:{configurable:!0}};at.prototype.getMin=function(){return this._min},at.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},at.prototype.getMax=function(){return this._max},at.prototype.toString=function(){return Ht.toLineString(new X(this._min,0),new X(this._max,0))},at.prototype.interfaces_=function(){return[]},at.prototype.getClass=function(){return at},mt.NodeComparator.get=function(){return xt},Object.defineProperties(at,mt);var xt=function(){};xt.prototype.compare=function(t,e){var o=t,u=e,d=(o._min+o._max)/2,w=(u._min+u._max)/2;return d<w?-1:d>w?1:0},xt.prototype.interfaces_=function(){return[et]},xt.prototype.getClass=function(){return xt};var Nt=function(t){function e(){t.call(this),this._item=null;var o=arguments[0],u=arguments[1],d=arguments[2];this._min=o,this._max=u,this._item=d}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(o,u,d){if(!this.intersects(o,u))return null;d.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(at),ee=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var o=arguments[0],u=arguments[1];this._node1=o,this._node2=u,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(o,u){this._min=Math.min(o._min,u._min),this._max=Math.max(o._max,u._max)},e.prototype.query=function(o,u,d){if(!this.intersects(o,u))return null;this._node1!==null&&this._node1.query(o,u,d),this._node2!==null&&this._node2.query(o,u,d)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(at),ae=function(){this._leaves=new St,this._root=null,this._level=0};ae.prototype.buildTree=function(){Gt.sort(this._leaves,new at.NodeComparator);for(var t=this._leaves,e=null,o=new St;;){if(this.buildLevel(t,o),o.size()===1)return o.get(0);e=t,t=o,o=e}},ae.prototype.insert=function(t,e,o){if(this._root!==null)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new Nt(t,e,o))},ae.prototype.query=function(t,e,o){this.init(),this._root.query(t,e,o)},ae.prototype.buildRoot=function(){if(this._root!==null)return null;this._root=this.buildTree()},ae.prototype.printNode=function(t){fe.out.println(Ht.toLineString(new X(t._min,this._level),new X(t._max,this._level)))},ae.prototype.init=function(){if(this._root!==null)return null;this.buildRoot()},ae.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var o=0;o<t.size();o+=2){var u=t.get(o);if((o+1<t.size()?t.get(o):null)===null)e.add(u);else{var d=new ee(t.get(o),t.get(o+1));e.add(d)}}},ae.prototype.interfaces_=function(){return[]},ae.prototype.getClass=function(){return ae};var Se=function(){this._items=new St};Se.prototype.visitItem=function(t){this._items.add(t)},Se.prototype.getItems=function(){return this._items},Se.prototype.interfaces_=function(){return[dt]},Se.prototype.getClass=function(){return Se};var ci=function(){this._index=null;var t=arguments[0];if(!ct(t,Mi))throw new D("Argument must be Polygonal");this._index=new Ni(t)},qo={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};ci.prototype.locate=function(t){var e=new J(t),o=new Uo(e);return this._index.query(t.y,t.y,o),e.getLocation()},ci.prototype.interfaces_=function(){return[Os]},ci.prototype.getClass=function(){return ci},qo.SegmentVisitor.get=function(){return Uo},qo.IntervalIndexedGeometry.get=function(){return Ni},Object.defineProperties(ci,qo);var Uo=function(){this._counter=null;var t=arguments[0];this._counter=t};Uo.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},Uo.prototype.interfaces_=function(){return[dt]},Uo.prototype.getClass=function(){return Uo};var Ni=function(){this._index=new ae;var t=arguments[0];this.init(t)};Ni.prototype.init=function(t){for(var e=Er.getLines(t).iterator();e.hasNext();){var o=e.next().getCoordinates();this.addLine(o)}},Ni.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var o=new Yt(t[e-1],t[e]),u=Math.min(o.p0.y,o.p1.y),d=Math.max(o.p0.y,o.p1.y);this._index.insert(u,d,o)}},Ni.prototype.query=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1],o=new Se;return this._index.query(t,e,o),o.getItems()}if(arguments.length===3){var u=arguments[0],d=arguments[1],w=arguments[2];this._index.query(u,d,w)}},Ni.prototype.interfaces_=function(){return[]},Ni.prototype.getClass=function(){return Ni};var Ls=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new fo,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Ji,arguments.length===2){var o=arguments[0],u=arguments[1],d=$t.OGC_SFS_BOUNDARY_RULE;this._argIndex=o,this._parentGeom=u,this._boundaryNodeRule=d,u!==null&&this.add(u)}else if(arguments.length===3){var w=arguments[0],S=arguments[1],U=arguments[2];this._argIndex=w,this._parentGeom=S,this._boundaryNodeRule=U,S!==null&&this.add(S)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(o,u){var d=this._nodes.addNode(u).getLabel(),w=1;Q.NONE,d.getLocation(o,It.ON)===Q.BOUNDARY&&w++;var S=e.determineBoundary(this._boundaryNodeRule,w);d.setLocation(o,S)},e.prototype.computeSelfNodes=function(){if(arguments.length===2){var o=arguments[0],u=arguments[1];return this.computeSelfNodes(o,u,!1)}if(arguments.length===3){var d=arguments[0],w=arguments[1],S=arguments[2],U=new O(d,!0,!1);U.setIsDoneIfProperInt(S);var $=this.createEdgeSetIntersector(),ut=this._parentGeom instanceof Nr||this._parentGeom instanceof bn||this._parentGeom instanceof dr,_t=w||!ut;return $.computeIntersections(this._edges,U,_t),this.addSelfIntersectionNodes(this._argIndex),U}},e.prototype.computeSplitEdges=function(o){for(var u=this._edges.iterator();u.hasNext();)u.next().eiList.addSplitEdges(o)},e.prototype.computeEdgeIntersections=function(o,u,d){var w=new O(u,d,!0);return w.setBoundaryNodes(this.getBoundaryNodes(),o.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,o._edges,w),w},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof pr){var o=arguments[0].getCoordinate();this.insertPoint(this._argIndex,o,Q.INTERIOR)}else if(arguments[0]instanceof X){var u=arguments[0];this.insertPoint(this._argIndex,u,Q.INTERIOR)}},e.prototype.addPolygon=function(o){this.addPolygonRing(o.getExteriorRing(),Q.EXTERIOR,Q.INTERIOR);for(var u=0;u<o.getNumInteriorRing();u++){var d=o.getInteriorRingN(u);this.addPolygonRing(d,Q.INTERIOR,Q.EXTERIOR)}},e.prototype.addEdge=function(o){this.insertEdge(o);var u=o.getCoordinates();this.insertPoint(this._argIndex,u[0],Q.BOUNDARY),this.insertPoint(this._argIndex,u[u.length-1],Q.BOUNDARY)},e.prototype.addLineString=function(o){var u=re.removeRepeatedPoints(o.getCoordinates());if(u.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=u[0],null;var d=new _s(u,new be(this._argIndex,Q.INTERIOR));this._lineEdgeMap.put(o,d),this.insertEdge(d),C.isTrue(u.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,u[0]),this.insertBoundaryPoint(this._argIndex,u[u.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var o=this.getBoundaryNodes(),u=new Array(o.size()).fill(null),d=0,w=o.iterator();w.hasNext();){var S=w.next();u[d++]=S.getCoordinate().copy()}return u},e.prototype.getBoundaryNodes=function(){return this._boundaryNodes===null&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(o,u,d){if(this.isBoundaryNode(o,u))return null;d===Q.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(o,u):this.insertPoint(o,u,d)},e.prototype.addPolygonRing=function(o,u,d){if(o.isEmpty())return null;var w=re.removeRepeatedPoints(o.getCoordinates());if(w.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=w[0],null;var S=u,U=d;tt.isCCW(w)&&(S=d,U=u);var $=new _s(w,new be(this._argIndex,Q.BOUNDARY,S,U));this._lineEdgeMap.put(o,$),this.insertEdge($),this.insertPoint(this._argIndex,w[0],Q.BOUNDARY)},e.prototype.insertPoint=function(o,u,d){var w=this._nodes.addNode(u),S=w.getLabel();S===null?w._label=new be(o,d):S.setLocation(o,d)},e.prototype.createEdgeSetIntersector=function(){return new W},e.prototype.addSelfIntersectionNodes=function(o){for(var u=this._edges.iterator();u.hasNext();)for(var d=u.next(),w=d.getLabel().getLocation(o),S=d.eiList.iterator();S.hasNext();){var U=S.next();this.addSelfIntersectionNode(o,U.coord,w)}},e.prototype.add=function(){if(arguments.length!==1)return t.prototype.add.apply(this,arguments);var o=arguments[0];if(o.isEmpty())return null;if(o instanceof dr&&(this._useBoundaryDeterminationRule=!1),o instanceof bn)this.addPolygon(o);else if(o instanceof kn)this.addLineString(o);else if(o instanceof pr)this.addPoint(o);else if(o instanceof mi)this.addCollection(o);else if(o instanceof ar)this.addCollection(o);else if(o instanceof dr)this.addCollection(o);else{if(!(o instanceof wn))throw new Error(o.getClass().getName());this.addCollection(o)}},e.prototype.addCollection=function(o){for(var u=0;u<o.getNumGeometries();u++){var d=o.getGeometryN(u);this.add(d)}},e.prototype.locate=function(o){return ct(this._parentGeom,Mi)&&this._parentGeom.getNumGeometries()>50?(this._areaPtLocator===null&&(this._areaPtLocator=new ci(this._parentGeom)),this._areaPtLocator.locate(o)):this._ptLocator.locate(o,this._parentGeom)},e.prototype.findEdge=function(){if(arguments.length===1){var o=arguments[0];return this._lineEdgeMap.get(o)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(o,u){return o.isInBoundary(u)?Q.BOUNDARY:Q.INTERIOR},e}(V),Ns=function(){if(this._li=new F,this._resultPrecisionModel=null,this._arg=null,arguments.length===1){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Ls(0,t)}else if(arguments.length===2){var e=arguments[0],o=arguments[1],u=$t.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Ls(0,e,u),this._arg[1]=new Ls(1,o,u)}else if(arguments.length===3){var d=arguments[0],w=arguments[1],S=arguments[2];d.getPrecisionModel().compareTo(w.getPrecisionModel())>=0?this.setComputationPrecision(d.getPrecisionModel()):this.setComputationPrecision(w.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Ls(0,d,S),this._arg[1]=new Ls(1,w,S)}};Ns.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Ns.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Ns.prototype.interfaces_=function(){return[]},Ns.prototype.getClass=function(){return Ns};var is=function(){};is.prototype.interfaces_=function(){return[]},is.prototype.getClass=function(){return is},is.map=function(){if(arguments[0]instanceof vt&&ct(arguments[1],is.MapOp)){for(var t=arguments[0],e=arguments[1],o=new St,u=0;u<t.getNumGeometries();u++){var d=e.map(t.getGeometryN(u));d!==null&&o.add(d)}return t.getFactory().buildGeometry(o)}if(ct(arguments[0],he)&&ct(arguments[1],is.MapOp)){for(var w=arguments[0],S=arguments[1],U=new St,$=w.iterator();$.hasNext();){var ut=$.next(),_t=S.map(ut);_t!==null&&U.add(_t)}return U}},is.MapOp=function(){};var de=function(t){function e(){var o=arguments[0],u=arguments[1];t.call(this,o,u),this._ptLocator=new Ji,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new br,this._resultPolyList=new St,this._resultLineList=new St,this._resultPointList=new St,this._graph=new V(new ms),this._geomFact=o.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(o){var u=this._edgeList.findEqualEdge(o);if(u!==null){var d=u.getLabel(),w=o.getLabel();u.isPointwiseEqual(o)||(w=new be(o.getLabel())).flip();var S=u.getDepth();S.isNull()&&S.add(d),S.add(w),d.merge(w)}else this._edgeList.add(o)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var o=this._graph.getEdgeEnds().iterator();o.hasNext();){var u=o.next(),d=u.getSym();u.isInResult()&&d.isInResult()&&(u.setInResult(!1),d.setInResult(!1))}},e.prototype.isCoveredByLA=function(o){return!!this.isCovered(o,this._resultLineList)||!!this.isCovered(o,this._resultPolyList)},e.prototype.computeGeometry=function(o,u,d,w){var S=new St;return S.addAll(o),S.addAll(u),S.addAll(d),S.isEmpty()?e.createEmptyResult(w,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(S)},e.prototype.mergeSymLabels=function(){for(var o=this._graph.getNodes().iterator();o.hasNext();)o.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(o,u){for(var d=u.iterator();d.hasNext();){var w=d.next();if(this._ptLocator.locate(o,w)!==Q.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var o=new St,u=this._edgeList.iterator();u.hasNext();){var d=u.next();d.isCollapsed()&&(u.remove(),o.add(d.getCollapsedEdge()))}this._edgeList.addAll(o)},e.prototype.updateNodeLabelling=function(){for(var o=this._graph.getNodes().iterator();o.hasNext();){var u=o.next(),d=u.getEdges().getLabel();u.getLabel().merge(d)}},e.prototype.getResultGeometry=function(o){return this.computeOverlay(o),this._resultGeom},e.prototype.insertUniqueEdges=function(o){for(var u=o.iterator();u.hasNext();){var d=u.next();this.insertUniqueEdge(d)}},e.prototype.computeOverlay=function(o){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var u=new St;this._arg[0].computeSplitEdges(u),this._arg[1].computeSplitEdges(u),this.insertUniqueEdges(u),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),ao.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(o),this.cancelDuplicateResultEdges();var d=new nt(this._geomFact);d.add(this._graph),this._resultPolyList=d.getPolygons();var w=new Oi(this,this._geomFact,this._ptLocator);this._resultLineList=w.build(o);var S=new vo(this,this._geomFact,this._ptLocator);this._resultPointList=S.build(o),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,o)},e.prototype.labelIncompleteNode=function(o,u){var d=this._ptLocator.locate(o.getCoordinate(),this._arg[u].getGeometry());o.getLabel().setLocation(u,d)},e.prototype.copyPoints=function(o){for(var u=this._arg[o].getNodeIterator();u.hasNext();){var d=u.next();this._graph.addNode(d.getCoordinate()).setLabel(o,d.getLabel().getLocation(o))}},e.prototype.findResultAreaEdges=function(o){for(var u=this._graph.getEdgeEnds().iterator();u.hasNext();){var d=u.next(),w=d.getLabel();w.isArea()&&!d.isInteriorAreaEdge()&&e.isResultOfOp(w.getLocation(0,It.RIGHT),w.getLocation(1,It.RIGHT),o)&&d.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var o=this._edgeList.iterator();o.hasNext();){var u=o.next(),d=u.getLabel(),w=u.getDepth();if(!w.isNull()){w.normalize();for(var S=0;S<2;S++)d.isNull(S)||!d.isArea()||w.isNull(S)||(w.getDelta(S)===0?d.toLine(S):(C.isTrue(!w.isNull(S,It.LEFT),"depth of LEFT side has not been initialized"),d.setLocation(S,It.LEFT,w.getLocation(S,It.LEFT)),C.isTrue(!w.isNull(S,It.RIGHT),"depth of RIGHT side has not been initialized"),d.setLocation(S,It.RIGHT,w.getLocation(S,It.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var o=this._graph.getNodes().iterator();o.hasNext();)o.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var o=this._graph.getNodes().iterator();o.hasNext();){var u=o.next(),d=u.getLabel();u.isIsolated()&&(d.isNull(0)?this.labelIncompleteNode(u,0):this.labelIncompleteNode(u,1)),u.getEdges().updateLabelling(d)}},e.prototype.isCoveredByA=function(o){return!!this.isCovered(o,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ns);de.overlayOp=function(t,e,o){return new de(t,e).getResultGeometry(o)},de.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return de.createEmptyResult(de.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var o=e;return xs.map(t,{interfaces_:function(){return[is.MapOp]},map:function(u){return u.intersection(o)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ti.overlayOp(t,e,de.INTERSECTION)},de.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return de.createEmptyResult(de.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ti.overlayOp(t,e,de.SYMDIFFERENCE)},de.resultDimension=function(t,e,o){var u=e.getDimension(),d=o.getDimension(),w=-1;switch(t){case de.INTERSECTION:w=Math.min(u,d);break;case de.UNION:w=Math.max(u,d);break;case de.DIFFERENCE:w=u;break;case de.SYMDIFFERENCE:w=Math.max(u,d)}return w},de.createEmptyResult=function(t,e,o,u){var d=null;switch(de.resultDimension(t,e,o)){case-1:d=u.createGeometryCollection(new Array(0).fill(null));break;case 0:d=u.createPoint();break;case 1:d=u.createLineString();break;case 2:d=u.createPolygon()}return d},de.difference=function(t,e){return t.isEmpty()?de.createEmptyResult(de.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ti.overlayOp(t,e,de.DIFFERENCE))},de.isResultOfOp=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1],o=t.getLocation(0),u=t.getLocation(1);return de.isResultOfOp(o,u,e)}if(arguments.length===3){var d=arguments[0],w=arguments[1],S=arguments[2];switch(d===Q.BOUNDARY&&(d=Q.INTERIOR),w===Q.BOUNDARY&&(w=Q.INTERIOR),S){case de.INTERSECTION:return d===Q.INTERIOR&&w===Q.INTERIOR;case de.UNION:return d===Q.INTERIOR||w===Q.INTERIOR;case de.DIFFERENCE:return d===Q.INTERIOR&&w!==Q.INTERIOR;case de.SYMDIFFERENCE:return d===Q.INTERIOR&&w!==Q.INTERIOR||d!==Q.INTERIOR&&w===Q.INTERIOR}return!1}},de.INTERSECTION=1,de.UNION=2,de.DIFFERENCE=3,de.SYMDIFFERENCE=4;var Io=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Ji,this._seg=new Yt;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Io.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var o=this._linework.getGeometryN(e).getCoordinateSequence(),u=0;u<o.size()-1;u++)if(o.getCoordinate(u,this._seg.p0),o.getCoordinate(u+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},Io.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?Q.BOUNDARY:this._ptLocator.locate(t,this._g)},Io.prototype.extractLinework=function(t){var e=new Rs;t.apply(e);var o=e.getLinework(),u=Kt.toLineStringArray(o);return t.getFactory().createMultiLineString(u)},Io.prototype.interfaces_=function(){return[]},Io.prototype.getClass=function(){return Io};var Rs=function(){this._linework=null,this._linework=new St};Rs.prototype.getLinework=function(){return this._linework},Rs.prototype.filter=function(t){if(t instanceof bn){var e=t;this._linework.add(e.getExteriorRing());for(var o=0;o<e.getNumInteriorRing();o++)this._linework.add(e.getInteriorRingN(o))}},Rs.prototype.interfaces_=function(){return[$n]},Rs.prototype.getClass=function(){return Rs};var jo=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};jo.prototype.extractPoints=function(t,e,o){for(var u=t.getCoordinates(),d=0;d<u.length-1;d++)this.computeOffsetPoints(u[d],u[d+1],e,o)},jo.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},jo.prototype.getPoints=function(t){for(var e=new St,o=Er.getLines(this._g).iterator();o.hasNext();){var u=o.next();this.extractPoints(u,t,e)}return e},jo.prototype.computeOffsetPoints=function(t,e,o,u){var d=e.x-t.x,w=e.y-t.y,S=Math.sqrt(d*d+w*w),U=o*d/S,$=o*w/S,ut=(e.x+t.x)/2,_t=(e.y+t.y)/2;if(this._doLeft){var wt=new X(ut-$,_t+U);u.add(wt)}if(this._doRight){var zt=new X(ut+$,_t-U);u.add(zt)}},jo.prototype.interfaces_=function(){return[]},jo.prototype.getClass=function(){return jo};var Mn=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new St;var e=arguments[0],o=arguments[1],u=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,o),this._geom=[e,o,u],this._locFinder=[new Io(this._geom[0],this._boundaryDistanceTolerance),new Io(this._geom[1],this._boundaryDistanceTolerance),new Io(this._geom[2],this._boundaryDistanceTolerance)]},Ws={TOLERANCE:{configurable:!0}};Mn.prototype.reportResult=function(t,e,o){fe.out.println("Overlay result invalid - A:"+Q.toLocationSymbol(e[0])+" B:"+Q.toLocationSymbol(e[1])+" expected:"+(o?"i":"e")+" actual:"+Q.toLocationSymbol(e[2]))},Mn.prototype.isValid=function(t){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var e=this.checkValid(t);return e},Mn.prototype.checkValid=function(){if(arguments.length===1){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var o=this._testCoords.get(e);if(!this.checkValid(t,o))return this._invalidLocation=o,!1}return!0}if(arguments.length===2){var u=arguments[0],d=arguments[1];return this._location[0]=this._locFinder[0].getLocation(d),this._location[1]=this._locFinder[1].getLocation(d),this._location[2]=this._locFinder[2].getLocation(d),!!Mn.hasLocation(this._location,Q.BOUNDARY)||this.isValidResult(u,this._location)}},Mn.prototype.addTestPts=function(t){var e=new jo(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Mn.prototype.isValidResult=function(t,e){var o=de.isResultOfOp(e[0],e[1],t),u=!(o^e[2]===Q.INTERIOR);return u||this.reportResult(t,e,o),u},Mn.prototype.getInvalidLocation=function(){return this._invalidLocation},Mn.prototype.interfaces_=function(){return[]},Mn.prototype.getClass=function(){return Mn},Mn.hasLocation=function(t,e){for(var o=0;o<3;o++)if(t[o]===e)return!0;return!1},Mn.computeBoundaryDistanceTolerance=function(t,e){return Math.min(er.computeSizeBasedSnapTolerance(t),er.computeSizeBasedSnapTolerance(e))},Mn.isValid=function(t,e,o,u){return new Mn(t,e,u).isValid(o)},Ws.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Mn,Ws);var Ri=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Ri.prototype.extractElements=function(t,e){if(t===null)return null;for(var o=0;o<t.getNumGeometries();o++){var u=t.getGeometryN(o);this._skipEmpty&&u.isEmpty()||e.add(u)}},Ri.prototype.combine=function(){for(var t=new St,e=this._inputGeoms.iterator();e.hasNext();){var o=e.next();this.extractElements(o,t)}return t.size()===0?this._geomFactory!==null?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Ri.prototype.interfaces_=function(){return[]},Ri.prototype.getClass=function(){return Ri},Ri.combine=function(){if(arguments.length===1){var t=arguments[0];return new Ri(t).combine()}if(arguments.length===2){var e=arguments[0],o=arguments[1];return new Ri(Ri.createList(e,o)).combine()}if(arguments.length===3){var u=arguments[0],d=arguments[1],w=arguments[2];return new Ri(Ri.createList(u,d,w)).combine()}},Ri.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Ri.createList=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1],o=new St;return o.add(t),o.add(e),o}if(arguments.length===3){var u=arguments[0],d=arguments[1],w=arguments[2],S=new St;return S.add(u),S.add(d),S.add(w),S}};var ir=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,this._inputPolys===null&&(this._inputPolys=new St)},zu={STRTREE_NODE_CAPACITY:{configurable:!0}};ir.prototype.reduceToGeometries=function(t){for(var e=new St,o=t.iterator();o.hasNext();){var u=o.next(),d=null;ct(u,we)?d=this.unionTree(u):u instanceof vt&&(d=u),e.add(d)}return e},ir.prototype.extractByEnvelope=function(t,e,o){for(var u=new St,d=0;d<e.getNumGeometries();d++){var w=e.getGeometryN(d);w.getEnvelopeInternal().intersects(t)?u.add(w):o.add(w)}return this._geomFactory.buildGeometry(u)},ir.prototype.unionOptimized=function(t,e){var o=t.getEnvelopeInternal(),u=e.getEnvelopeInternal();if(!o.intersects(u))return Ri.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var d=o.intersection(u);return this.unionUsingEnvelopeIntersection(t,e,d)},ir.prototype.union=function(){if(this._inputPolys===null)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new Ar(ir.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var o=e.next();t.insert(o.getEnvelopeInternal(),o)}this._inputPolys=null;var u=t.itemsTree();return this.unionTree(u)},ir.prototype.binaryUnion=function(){if(arguments.length===1){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(arguments.length===3){var e=arguments[0],o=arguments[1],u=arguments[2];if(u-o<=1){var d=ir.getGeometry(e,o);return this.unionSafe(d,null)}if(u-o==2)return this.unionSafe(ir.getGeometry(e,o),ir.getGeometry(e,o+1));var w=Math.trunc((u+o)/2),S=this.binaryUnion(e,o,w),U=this.binaryUnion(e,w,u);return this.unionSafe(S,U)}},ir.prototype.repeatedUnion=function(t){for(var e=null,o=t.iterator();o.hasNext();){var u=o.next();e=e===null?u.copy():e.union(u)}return e},ir.prototype.unionSafe=function(t,e){return t===null&&e===null?null:t===null?e.copy():e===null?t.copy():this.unionOptimized(t,e)},ir.prototype.unionActual=function(t,e){return ir.restrictToPolygons(t.union(e))},ir.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},ir.prototype.unionUsingEnvelopeIntersection=function(t,e,o){var u=new St,d=this.extractByEnvelope(o,t,u),w=this.extractByEnvelope(o,e,u),S=this.unionActual(d,w);return u.add(S),Ri.combine(u)},ir.prototype.bufferUnion=function(){if(arguments.length===1){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(arguments.length===2){var e=arguments[0],o=arguments[1];return e.getFactory().createGeometryCollection([e,o]).buffer(0)}},ir.prototype.interfaces_=function(){return[]},ir.prototype.getClass=function(){return ir},ir.restrictToPolygons=function(t){if(ct(t,Mi))return t;var e=Co.getPolygons(t);return e.size()===1?e.get(0):t.getFactory().createMultiPolygon(Kt.toPolygonArray(e))},ir.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},ir.union=function(t){return new ir(t).union()},zu.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(ir,zu);var bs=function(){};bs.prototype.interfaces_=function(){return[]},bs.prototype.getClass=function(){return bs},bs.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return de.createEmptyResult(de.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ti.overlayOp(t,e,de.UNION)},r.GeoJSONReader=ai,r.GeoJSONWriter=Vi,r.OverlayOp=de,r.UnionOp=bs,r.BufferOp=mr,Object.defineProperty(r,"__esModule",{value:!0})})});var Ql=se((cf,ff)=>{(function(r,n){typeof cf=="object"&&typeof ff<"u"?ff.exports=n():typeof define=="function"&&define.amd?define(n):(r=typeof globalThis<"u"?globalThis:r||self,r.DOMPurify=n())})(cf,function(){"use strict";let{entries:r,setPrototypeOf:n,isFrozen:s,getPrototypeOf:a,getOwnPropertyDescriptor:l}=Object,{freeze:c,seal:g,create:m}=Object,{apply:v,construct:x}=typeof Reflect<"u"&&Reflect;v||(v=function(Ht,ht,Y){return Ht.apply(ht,Y)}),c||(c=function(Ht){return Ht}),g||(g=function(Ht){return Ht}),x||(x=function(Ht,ht){return new Ht(...ht)});let P=H(Array.prototype.forEach),T=H(Array.prototype.pop),N=H(Array.prototype.push),G=H(String.prototype.toLowerCase),z=H(String.prototype.toString),j=H(String.prototype.match),R=H(String.prototype.replace),B=H(String.prototype.indexOf),D=H(String.prototype.trim),A=H(RegExp.prototype.test),q=K(TypeError);function H(ue){return function(Ht){for(var ht=arguments.length,Y=new Array(ht>1?ht-1:0),C=1;C<ht;C++)Y[C-1]=arguments[C];return v(ue,Ht,Y)}}function K(ue){return function(){for(var Ht=arguments.length,ht=new Array(Ht),Y=0;Y<Ht;Y++)ht[Y]=arguments[Y];return x(ue,ht)}}function et(ue,Ht,ht){ht=ht||G,n&&n(ue,null);let Y=Ht.length;for(;Y--;){let C=Ht[Y];if(typeof C=="string"){let b=ht(C);b!==C&&(s(Ht)||(Ht[Y]=b),C=b)}ue[C]=!0}return ue}function X(ue){let Ht=m(null);for(let[ht,Y]of r(ue))Ht[ht]=Y;return Ht}function lt(ue,Ht){for(;ue!==null;){let Y=l(ue,Ht);if(Y){if(Y.get)return H(Y.get);if(typeof Y.value=="function")return H(Y.value)}ue=a(ue)}function ht(Y){return console.warn("fallback value for",Y),null}return ht}let gt=c(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Et=c(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Q=c(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),kt=c(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),ct=c(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),bt=c(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Mt=c(["#text"]),Xt=c(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),ft=c(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Ct=c(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),st=c(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Rt=g(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Ot=g(/<%[\w\W]*|[\w\W]*%>/gm),Qt=g(/\${[\w\W]*}/gm),Tt=g(/^data-[\-\w.\u00B7-\uFFFF]/),ce=g(/^aria-[\-\w]+$/),Re=g(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Cn=g(/^(?:\w+script|data):/i),fe=g(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),ke=g(/^html$/i);var Bt=Object.freeze({__proto__:null,MUSTACHE_EXPR:Rt,ERB_EXPR:Ot,TMPLIT_EXPR:Qt,DATA_ATTR:Tt,ARIA_ATTR:ce,IS_ALLOWED_URI:Re,IS_SCRIPT_OR_DATA:Cn,ATTR_WHITESPACE:fe,DOCTYPE_NAME:ke});let hn=()=>typeof window>"u"?null:window,Sn=function(Ht,ht){if(typeof Ht!="object"||typeof Ht.createPolicy!="function")return null;let Y=null,C="data-tt-policy-suffix";ht.currentScript&&ht.currentScript.hasAttribute(C)&&(Y=ht.currentScript.getAttribute(C));let b="dompurify"+(Y?"#"+Y:"");try{return Ht.createPolicy(b,{createHTML(k){return k},createScriptURL(k){return k}})}catch{return console.warn("TrustedTypes policy "+b+" could not be created."),null}};function Hn(){let ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:hn(),Ht=p=>Hn(p);if(Ht.version="3.0.2",Ht.removed=[],!ue||!ue.document||ue.document.nodeType!==9)return Ht.isSupported=!1,Ht;let ht=ue.document,{document:Y}=ue,{DocumentFragment:C,HTMLTemplateElement:b,Node:k,Element:F,NodeFilter:Z,NamedNodeMap:J=ue.NamedNodeMap||ue.MozNamedAttrMap,HTMLFormElement:tt,DOMParser:pt,trustedTypes:Lt}=ue,vt=F.prototype,Ft=lt(vt,"cloneNode"),Wt=lt(vt,"nextSibling"),Jt=lt(vt,"childNodes"),$t=lt(vt,"parentNode");if(typeof b=="function"){let p=Y.createElement("template");p.content&&p.content.ownerDocument&&(Y=p.content.ownerDocument)}let jt=Sn(Lt,ht),ge=jt?jt.createHTML(""):"",{implementation:pe,createNodeIterator:Te,createDocumentFragment:Ce,getElementsByTagName:he}=Y,{importNode:An}=ht,we={};Ht.isSupported=typeof r=="function"&&typeof $t=="function"&&pe&&typeof pe.createHTMLDocument<"u";let{MUSTACHE_EXPR:St,ERB_EXPR:Dn,TMPLIT_EXPR:Xn,DATA_ATTR:re,ARIA_ATTR:Yr,IS_SCRIPT_OR_DATA:zn,ATTR_WHITESPACE:cn}=Bt,{IS_ALLOWED_URI:or}=Bt,sr=null,wo=et({},[...gt,...Et,...Q,...ct,...Mt]),Wn=null,nr=et({},[...Xt,...ft,...Ct,...st]),Ut=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ei=null,oi=null,xe=!0,Kn=!0,$n=!1,jr=!0,wn=!1,ar=!1,Or=!1,ho=!1,rr=!1,Lo=!1,Ln=!1,kn=!0,Di=!1,pr="user-content-",Mi=!0,bn=!1,mi={},Nr=null,dr=et({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ur=null,co=et({},["audio","video","img","source","image","track"]),Bi=null,Fi=et({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Le="http://www.w3.org/1998/Math/MathML",le="http://www.w3.org/2000/svg",Rr="http://www.w3.org/1999/xhtml",Un=Rr,Pi=!1,fo=null,Zt=et({},[Le,le,Rr],z),En,Vr=["application/xhtml+xml","text/html"],bo="text/html",Kt,eo=null,Jo=Y.createElement("form"),si=function(_){return _ instanceof RegExp||_ instanceof Function},De=function(_){eo&&eo===_||((!_||typeof _!="object")&&(_={}),_=X(_),En=Vr.indexOf(_.PARSER_MEDIA_TYPE)===-1?En=bo:En=_.PARSER_MEDIA_TYPE,Kt=En==="application/xhtml+xml"?z:G,sr="ALLOWED_TAGS"in _?et({},_.ALLOWED_TAGS,Kt):wo,Wn="ALLOWED_ATTR"in _?et({},_.ALLOWED_ATTR,Kt):nr,fo="ALLOWED_NAMESPACES"in _?et({},_.ALLOWED_NAMESPACES,z):Zt,Bi="ADD_URI_SAFE_ATTR"in _?et(X(Fi),_.ADD_URI_SAFE_ATTR,Kt):Fi,ur="ADD_DATA_URI_TAGS"in _?et(X(co),_.ADD_DATA_URI_TAGS,Kt):co,Nr="FORBID_CONTENTS"in _?et({},_.FORBID_CONTENTS,Kt):dr,Ei="FORBID_TAGS"in _?et({},_.FORBID_TAGS,Kt):{},oi="FORBID_ATTR"in _?et({},_.FORBID_ATTR,Kt):{},mi="USE_PROFILES"in _?_.USE_PROFILES:!1,xe=_.ALLOW_ARIA_ATTR!==!1,Kn=_.ALLOW_DATA_ATTR!==!1,$n=_.ALLOW_UNKNOWN_PROTOCOLS||!1,jr=_.ALLOW_SELF_CLOSE_IN_ATTR!==!1,wn=_.SAFE_FOR_TEMPLATES||!1,ar=_.WHOLE_DOCUMENT||!1,rr=_.RETURN_DOM||!1,Lo=_.RETURN_DOM_FRAGMENT||!1,Ln=_.RETURN_TRUSTED_TYPE||!1,ho=_.FORCE_BODY||!1,kn=_.SANITIZE_DOM!==!1,Di=_.SANITIZE_NAMED_PROPS||!1,Mi=_.KEEP_CONTENT!==!1,bn=_.IN_PLACE||!1,or=_.ALLOWED_URI_REGEXP||Re,Un=_.NAMESPACE||Rr,Ut=_.CUSTOM_ELEMENT_HANDLING||{},_.CUSTOM_ELEMENT_HANDLING&&si(_.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ut.tagNameCheck=_.CUSTOM_ELEMENT_HANDLING.tagNameCheck),_.CUSTOM_ELEMENT_HANDLING&&si(_.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ut.attributeNameCheck=_.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),_.CUSTOM_ELEMENT_HANDLING&&typeof _.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ut.allowCustomizedBuiltInElements=_.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),wn&&(Kn=!1),Lo&&(rr=!0),mi&&(sr=et({},[...Mt]),Wn=[],mi.html===!0&&(et(sr,gt),et(Wn,Xt)),mi.svg===!0&&(et(sr,Et),et(Wn,ft),et(Wn,st)),mi.svgFilters===!0&&(et(sr,Q),et(Wn,ft),et(Wn,st)),mi.mathMl===!0&&(et(sr,ct),et(Wn,Ct),et(Wn,st))),_.ADD_TAGS&&(sr===wo&&(sr=X(sr)),et(sr,_.ADD_TAGS,Kt)),_.ADD_ATTR&&(Wn===nr&&(Wn=X(Wn)),et(Wn,_.ADD_ATTR,Kt)),_.ADD_URI_SAFE_ATTR&&et(Bi,_.ADD_URI_SAFE_ATTR,Kt),_.FORBID_CONTENTS&&(Nr===dr&&(Nr=X(Nr)),et(Nr,_.FORBID_CONTENTS,Kt)),Mi&&(sr["#text"]=!0),ar&&et(sr,["html","head","body"]),sr.table&&(et(sr,["tbody"]),delete Ei.tbody),c&&c(_),eo=_)},gr=et({},["mi","mo","mn","ms","mtext"]),ai=et({},["foreignobject","desc","title","annotation-xml"]),Vi=et({},["title","style","font","a","script"]),It=et({},Et);et(It,Q),et(It,kt);let zi=et({},ct);et(zi,bt);let fn=function(_){let E=$t(_);(!E||!E.tagName)&&(E={namespaceURI:Un,tagName:"template"});let I=G(_.tagName),V=G(E.tagName);return fo[_.namespaceURI]?_.namespaceURI===le?E.namespaceURI===Rr?I==="svg":E.namespaceURI===Le?I==="svg"&&(V==="annotation-xml"||gr[V]):!!It[I]:_.namespaceURI===Le?E.namespaceURI===Rr?I==="math":E.namespaceURI===le?I==="math"&&ai[V]:!!zi[I]:_.namespaceURI===Rr?E.namespaceURI===le&&!ai[V]||E.namespaceURI===Le&&!gr[V]?!1:!zi[I]&&(Vi[I]||!It[I]):!!(En==="application/xhtml+xml"&&fo[_.namespaceURI]):!1},Qn=function(_){N(Ht.removed,{element:_});try{_.parentNode.removeChild(_)}catch{_.remove()}},Ci=function(_,E){try{N(Ht.removed,{attribute:E.getAttributeNode(_),from:E})}catch{N(Ht.removed,{attribute:null,from:E})}if(E.removeAttribute(_),_==="is"&&!Wn[_])if(rr||Lo)try{Qn(E)}catch{}else try{E.setAttribute(_,"")}catch{}},tr=function(_){let E,I;if(ho)_="<remove></remove>"+_;else{let it=j(_,/^[\r\n\t ]+/);I=it&&it[0]}En==="application/xhtml+xml"&&Un===Rr&&(_='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+_+"</body></html>");let V=jt?jt.createHTML(_):_;if(Un===Rr)try{E=new pt().parseFromString(V,En)}catch{}if(!E||!E.documentElement){E=pe.createDocument(Un,"template",null);try{E.documentElement.innerHTML=Pi?ge:V}catch{}}let nt=E.body||E.documentElement;return _&&I&&nt.insertBefore(Y.createTextNode(I),nt.childNodes[0]||null),Un===Rr?he.call(E,ar?"html":"body")[0]:ar?E.documentElement:nt},Ae=function(_){return Te.call(_.ownerDocument||_,_,Z.SHOW_ELEMENT|Z.SHOW_COMMENT|Z.SHOW_TEXT,null,!1)},be=function(_){return _ instanceof tt&&(typeof _.nodeName!="string"||typeof _.textContent!="string"||typeof _.removeChild!="function"||!(_.attributes instanceof J)||typeof _.removeAttribute!="function"||typeof _.setAttribute!="function"||typeof _.namespaceURI!="string"||typeof _.insertBefore!="function"||typeof _.hasChildNodes!="function")},Nn=function(_){return typeof k=="object"?_ instanceof k:_&&typeof _=="object"&&typeof _.nodeType=="number"&&typeof _.nodeName=="string"},ui=function(_,E,I){we[_]&&P(we[_],V=>{V.call(Ht,E,I,eo)})},$o=function(_){let E;if(ui("beforeSanitizeElements",_,null),be(_))return Qn(_),!0;let I=Kt(_.nodeName);if(ui("uponSanitizeElement",_,{tagName:I,allowedTags:sr}),_.hasChildNodes()&&!Nn(_.firstElementChild)&&(!Nn(_.content)||!Nn(_.content.firstElementChild))&&A(/<[/\w]/g,_.innerHTML)&&A(/<[/\w]/g,_.textContent))return Qn(_),!0;if(!sr[I]||Ei[I]){if(!Ei[I]&&Wr(I)&&(Ut.tagNameCheck instanceof RegExp&&A(Ut.tagNameCheck,I)||Ut.tagNameCheck instanceof Function&&Ut.tagNameCheck(I)))return!1;if(Mi&&!Nr[I]){let V=$t(_)||_.parentNode,nt=Jt(_)||_.childNodes;if(nt&&V){let it=nt.length;for(let rt=it-1;rt>=0;--rt)V.insertBefore(Ft(nt[rt],!0),Wt(_))}}return Qn(_),!0}return _ instanceof F&&!fn(_)||(I==="noscript"||I==="noembed")&&A(/<\/no(script|embed)/i,_.innerHTML)?(Qn(_),!0):(wn&&_.nodeType===3&&(E=_.textContent,E=R(E,St," "),E=R(E,Dn," "),E=R(E,Xn," "),_.textContent!==E&&(N(Ht.removed,{element:_.cloneNode()}),_.textContent=E)),ui("afterSanitizeElements",_,null),!1)},ie=function(_,E,I){if(kn&&(E==="id"||E==="name")&&(I in Y||I in Jo))return!1;if(!(Kn&&!oi[E]&&A(re,E))){if(!(xe&&A(Yr,E))){if(!Wn[E]||oi[E]){if(!(Wr(_)&&(Ut.tagNameCheck instanceof RegExp&&A(Ut.tagNameCheck,_)||Ut.tagNameCheck instanceof Function&&Ut.tagNameCheck(_))&&(Ut.attributeNameCheck instanceof RegExp&&A(Ut.attributeNameCheck,E)||Ut.attributeNameCheck instanceof Function&&Ut.attributeNameCheck(E))||E==="is"&&Ut.allowCustomizedBuiltInElements&&(Ut.tagNameCheck instanceof RegExp&&A(Ut.tagNameCheck,I)||Ut.tagNameCheck instanceof Function&&Ut.tagNameCheck(I))))return!1}else if(!Bi[E]){if(!A(or,R(I,cn,""))){if(!((E==="src"||E==="xlink:href"||E==="href")&&_!=="script"&&B(I,"data:")===0&&ur[_])){if(!($n&&!A(zn,R(I,cn,"")))){if(I)return!1}}}}}}return!0},Wr=function(_){return _.indexOf("-")>0},Pe=function(_){let E,I,V,nt;ui("beforeSanitizeAttributes",_,null);let{attributes:it}=_;if(!it)return;let rt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Wn};for(nt=it.length;nt--;){E=it[nt];let{name:ot,namespaceURI:dt}=E;if(I=ot==="value"?E.value:D(E.value),V=Kt(ot),rt.attrName=V,rt.attrValue=I,rt.keepAttr=!0,rt.forceKeepAttr=void 0,ui("uponSanitizeAttribute",_,rt),I=rt.attrValue,rt.forceKeepAttr||(Ci(ot,_),!rt.keepAttr))continue;if(!jr&&A(/\/>/i,I)){Ci(ot,_);continue}wn&&(I=R(I,St," "),I=R(I,Dn," "),I=R(I,Xn," "));let Pt=Kt(_.nodeName);if(ie(Pt,V,I)){if(Di&&(V==="id"||V==="name")&&(Ci(ot,_),I=pr+I),jt&&typeof Lt=="object"&&typeof Lt.getAttributeType=="function"&&!dt)switch(Lt.getAttributeType(Pt,V)){case"TrustedHTML":I=jt.createHTML(I);break;case"TrustedScriptURL":I=jt.createScriptURL(I);break}try{dt?_.setAttributeNS(dt,ot,I):_.setAttribute(ot,I),T(Ht.removed)}catch{}}}ui("afterSanitizeAttributes",_,null)},h=function p(_){let E,I=Ae(_);for(ui("beforeSanitizeShadowDOM",_,null);E=I.nextNode();)ui("uponSanitizeShadowNode",E,null),!$o(E)&&(E.content instanceof C&&p(E.content),Pe(E));ui("afterSanitizeShadowDOM",_,null)};return Ht.sanitize=function(p){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},E,I,V,nt;if(Pi=!p,Pi&&(p="<!-->"),typeof p!="string"&&!Nn(p)){if(typeof p.toString!="function")throw q("toString is not a function");if(p=p.toString(),typeof p!="string")throw q("dirty is not a string, aborting")}if(!Ht.isSupported)return p;if(Or||De(_),Ht.removed=[],typeof p=="string"&&(bn=!1),bn){if(p.nodeName){let ot=Kt(p.nodeName);if(!sr[ot]||Ei[ot])throw q("root node is forbidden and cannot be sanitized in-place")}}else if(p instanceof k)E=tr("<!---->"),I=E.ownerDocument.importNode(p,!0),I.nodeType===1&&I.nodeName==="BODY"||I.nodeName==="HTML"?E=I:E.appendChild(I);else{if(!rr&&!wn&&!ar&&p.indexOf("<")===-1)return jt&&Ln?jt.createHTML(p):p;if(E=tr(p),!E)return rr?null:Ln?ge:""}E&&ho&&Qn(E.firstChild);let it=Ae(bn?p:E);for(;V=it.nextNode();)$o(V)||(V.content instanceof C&&h(V.content),Pe(V));if(bn)return p;if(rr){if(Lo)for(nt=Ce.call(E.ownerDocument);E.firstChild;)nt.appendChild(E.firstChild);else nt=E;return(Wn.shadowroot||Wn.shadowrootmod)&&(nt=An.call(ht,nt,!0)),nt}let rt=ar?E.outerHTML:E.innerHTML;return ar&&sr["!doctype"]&&E.ownerDocument&&E.ownerDocument.doctype&&E.ownerDocument.doctype.name&&A(ke,E.ownerDocument.doctype.name)&&(rt="<!DOCTYPE "+E.ownerDocument.doctype.name+`>
`+rt),wn&&(rt=R(rt,St," "),rt=R(rt,Dn," "),rt=R(rt,Xn," ")),jt&&Ln?jt.createHTML(rt):rt},Ht.setConfig=function(p){De(p),Or=!0},Ht.clearConfig=function(){eo=null,Or=!1},Ht.isValidAttribute=function(p,_,E){eo||De({});let I=Kt(p),V=Kt(_);return ie(I,V,E)},Ht.addHook=function(p,_){typeof _=="function"&&(we[p]=we[p]||[],N(we[p],_))},Ht.removeHook=function(p){if(we[p])return T(we[p])},Ht.removeHooks=function(p){we[p]&&(we[p]=[])},Ht.removeAllHooks=function(){we={}},Ht}var Me=Hn();return Me})});var t_=se((v4,xf)=>{(function(r){if(typeof define=="function"&&define.amd)define(["leaflet"],r);else if(typeof xf<"u")xf.exports=r(Oo());else{if(typeof window.L>"u")throw new Error("Leaflet must be loaded first");r(window.L)}})(function(r){return r.Control.Search=r.Control.extend({includes:r.version[0]==="1"?r.Evented.prototype:r.Mixin.Events,options:{url:"",layer:null,sourceData:null,jsonpParam:null,propertyLoc:"loc",propertyName:"title",formatData:null,filterData:null,moveToLocation:null,buildTip:null,container:"",zoom:null,minLength:1,initial:!0,casesensitive:!1,autoType:!0,delayType:400,tooltipLimit:-1,tipAutoSubmit:!0,firstTipSubmit:!1,autoResize:!0,collapsed:!0,autoCollapse:!1,autoCollapseTime:1200,textErr:"Location not found",textCancel:"Cancel",textPlaceholder:"Search...",hideMarkerOnCollapse:!1,position:"topleft",marker:{icon:!1,animate:!0,circle:{radius:10,weight:3,color:"#e03",stroke:!0,fill:!1}}},_getPath:function(n,s){let a=s.split("."),l=a.pop(),c=a.length,g=a[0],m=1;if(c>0)for(;(n=n[g])&&m<c;)g=a[m++];if(n)return n[l]},_isObject:function(n){return Object.prototype.toString.call(n)==="[object Object]"},initialize:function(n){r.Util.setOptions(this,n||{}),this._inputMinSize=this.options.textPlaceholder?this.options.textPlaceholder.length:10,this._layer=this.options.layer||new r.LayerGroup,this._filterData=this.options.filterData||this._defaultFilterData,this._formatData=this.options.formatData||this._defaultFormatData,this._moveToLocation=this.options.moveToLocation||this._defaultMoveToLocation,this._autoTypeTmp=this.options.autoType,this._countertips=0,this._recordsCache={},this._curReq=null},onAdd:function(n){return this._map=n,this._container=r.DomUtil.create("div","leaflet-control-search"),this._input=this._createInput(this.options.textPlaceholder,"search-input"),this._tooltip=this._createTooltip("search-tooltip"),this._cancel=this._createCancel(this.options.textCancel,"search-cancel"),this._button=this._createButton(this.options.textPlaceholder,"search-button"),this._alert=this._createAlert("search-alert"),this.options.collapsed===!1&&this.expand(this.options.collapsed),this.options.marker&&(this.options.marker instanceof r.Marker||this.options.marker instanceof r.CircleMarker?this._markerSearch=this.options.marker:this._isObject(this.options.marker)&&(this._markerSearch=new r.Control.Search.Marker([0,0],this.options.marker)),this._markerSearch._isMarkerSearch=!0),this.setLayer(this._layer),n.on({resize:this._handleAutoresize},this),this._container},addTo:function(n){return this.options.container?(this._container=this.onAdd(n),this._wrapper=r.DomUtil.get(this.options.container),this._wrapper.style.position="relative",this._wrapper.appendChild(this._container)):r.Control.prototype.addTo.call(this,n),this},onRemove:function(n){this._recordsCache={},n.off({resize:this._handleAutoresize},this)},setLayer:function(n){return this._layer=n,this._layer.addTo(this._map),this},showAlert:function(n){let s=this;return n=n||this.options.textErr,this._alert.style.display="block",this._alert.innerHTML=n,clearTimeout(this.timerAlert),this.timerAlert=setTimeout(function(){s.hideAlert()},this.options.autoCollapseTime),this},hideAlert:function(){return this._alert.style.display="none",this},cancel:function(){return this._input.value="",this._handleKeypress({keyCode:8}),this._input.size=this._inputMinSize,this._input.focus(),this._cancel.style.display="none",this._hideTooltip(),this.fire("search:cancel"),this},expand:function(n){return n=typeof n=="boolean"?n:!0,this._input.style.display="block",r.DomUtil.addClass(this._container,"search-exp"),n!==!1&&(this._input.focus(),this._map.on("dragstart click",this.collapse,this)),this.fire("search:expanded"),this},collapse:function(){return this._hideTooltip(),this.cancel(),this._alert.style.display="none",this._input.blur(),this.options.collapsed&&(this._input.style.display="none",this._cancel.style.display="none",r.DomUtil.removeClass(this._container,"search-exp"),this.options.hideMarkerOnCollapse&&this._map.removeLayer(this._markerSearch),this._map.off("dragstart click",this.collapse,this)),this.fire("search:collapsed"),this},collapseDelayed:function(){let n=this;return this.options.autoCollapse?(clearTimeout(this.timerCollapse),this.timerCollapse=setTimeout(function(){n.collapse()},this.options.autoCollapseTime),this):this},collapseDelayedStop:function(){return clearTimeout(this.timerCollapse),this},_createAlert:function(n){let s=r.DomUtil.create("div",n,this._container);return s.style.display="none",r.DomEvent.on(s,"click",r.DomEvent.stop,this).on(s,"click",this.hideAlert,this),s},_createInput:function(n,s){let a=this,l=r.DomUtil.create("label",s,this._container),c=r.DomUtil.create("input",s,this._container);return c.type="text",c.size=this._inputMinSize,c.value="",c.autocomplete="off",c.autocorrect="off",c.autocapitalize="off",c.placeholder=n,c.style.display="none",c.role="search",c.id=c.role+c.type+c.size,l.htmlFor=c.id,l.style.display="none",l.value=n,r.DomEvent.disableClickPropagation(c).on(c,"keyup",this._handleKeypress,this).on(c,"paste",function(g){setTimeout(function(m){a._handleKeypress(m)},10,g)},this).on(c,"blur",this.collapseDelayed,this).on(c,"focus",this.collapseDelayedStop,this),c},_createCancel:function(n,s){let a=r.DomUtil.create("a",s,this._container);return a.href="#",a.title=n,a.style.display="none",a.innerHTML="<span>&otimes;</span>",r.DomEvent.on(a,"click",r.DomEvent.stop,this).on(a,"click",this.cancel,this),a},_createButton:function(n,s){let a=r.DomUtil.create("a",s,this._container);return a.href="#",a.title=n,r.DomEvent.on(a,"click",r.DomEvent.stop,this).on(a,"click",this._handleSubmit,this).on(a,"focus",this.collapseDelayedStop,this).on(a,"blur",this.collapseDelayed,this),a},_createTooltip:function(n){let s=this,a=r.DomUtil.create("ul",n,this._container);return a.style.display="none",r.DomEvent.disableClickPropagation(a).on(a,"blur",this.collapseDelayed,this).on(a,"wheel",function(l){s.collapseDelayedStop(),r.DomEvent.stopPropagation(l)},this).on(a,"mouseover",function(l){s.collapseDelayedStop()},this),a},_createTip:function(n,s){let a;if(this.options.buildTip){if(a=this.options.buildTip.call(this,n,s),typeof a=="string"){let l=r.DomUtil.create("div");l.innerHTML=a,a=l.firstChild}}else a=r.DomUtil.create("li",""),a.innerHTML=n;return r.DomUtil.addClass(a,"search-tip"),a._text=n,this.options.tipAutoSubmit&&r.DomEvent.disableClickPropagation(a).on(a,"click",r.DomEvent.stop,this).on(a,"click",function(l){this._input.value=n,this._handleAutoresize(),this._input.focus(),this._hideTooltip(),this._handleSubmit()},this),a},_getUrl:function(n){return typeof this.options.url=="function"?this.options.url(n):this.options.url},_defaultFilterData:function(n,s){let a={};if(n=n.replace(new RegExp("[.*+?^${}()|[]\\]","g"),""),n==="")return[];let l=this.options.initial?"^":"",c=this.options.casesensitive?void 0:"i",g=new RegExp(l+n,c);for(let m in s)g.test(m)&&(a[m]=s[m]);return a},showTooltip:function(n){if(this._countertips=0,this._tooltip.innerHTML="",this._tooltip.currentSelection=-1,this.options.tooltipLimit)for(let s in n){if(this._countertips===this.options.tooltipLimit)break;this._countertips++,this._tooltip.appendChild(this._createTip(s,n[s]))}return this._countertips>0?(this._tooltip.style.display="block",this._autoTypeTmp&&this._autoType(),this._autoTypeTmp=this.options.autoType):this._hideTooltip(),this._tooltip.scrollTop=0,this._countertips},_hideTooltip:function(){return this._tooltip.style.display="none",this._tooltip.innerHTML="",0},_defaultFormatData:function(n){let s=this,a=this.options.propertyName,l=this.options.propertyLoc,c={};if(r.Util.isArray(l))for(let g in n)c[s._getPath(n[g],a)]=r.latLng(s._getPath(n[g],l[0]),s._getPath(n[g],l[1]));else for(let g in n)c[s._getPath(n[g],a)]=r.latLng(s._getPath(n[g],l));return c},_recordsFromJsonp:function(n,s){r.Control.Search.callJsonp=s;let a=r.DomUtil.create("script","leaflet-search-jsonp",document.getElementsByTagName("body")[0]),l=r.Util.template(this._getUrl(n)+"&"+this.options.jsonpParam+"=L.Control.Search.callJsonp",{s:n});return a.type="text/javascript",a.src=l,{abort:function(){a.parentNode.removeChild(a)}}},_recordsFromAjax:function(n,s){let a;try{a=new window.XMLHttpRequest}catch{throw new Error("XMLHttpRequest is not supported")}let l=r.Util.template(this._getUrl(n),{s:n});return a.open("GET",l),a.onload=function(){s(JSON.parse(a.responseText))},a.onreadystatechange=function(){a.readyState===4&&a.status===200&&this.onload()},a.send(),a},_searchInLayer:function(n,s,a){let l=this,c;n instanceof r.Control.Search.Marker||(n instanceof r.Marker||n instanceof r.CircleMarker?l._getPath(n.options,a)?(c=n.getLatLng(),c.layer=n,s[l._getPath(n.options,a)]=c):l._getPath(n.feature.properties,a)&&(c=n.getLatLng(),c.layer=n,s[l._getPath(n.feature.properties,a)]=c):n instanceof r.Path||n instanceof r.Polyline||n instanceof r.Polygon?l._getPath(n.options,a)?(c=n.getBounds().getCenter(),c.layer=n,s[l._getPath(n.options,a)]=c):l._getPath(n.feature.properties,a)&&(c=n.getBounds().getCenter(),c.layer=n,s[l._getPath(n.feature.properties,a)]=c):Object.prototype.hasOwnProperty.call(n,"feature")?Object.prototype.hasOwnProperty.call(n.feature.properties,a)&&(n.getLatLng&&typeof n.getLatLng=="function"?(c=n.getLatLng(),c.layer=n,s[n.feature.properties[a]]=c):n.getBounds&&typeof n.getBounds=="function"&&(c=n.getBounds().getCenter(),c.layer=n,s[n.feature.properties[a]]=c)):n instanceof r.LayerGroup&&n.eachLayer(function(g){l._searchInLayer(g,s,a)}))},_recordsFromLayer:function(){let n=this,s={},a=this.options.propertyName;return this._layer.eachLayer(function(l){n._searchInLayer(l,s,a)}),s},_autoType:function(){let n=this._input.value.length,s=this._tooltip.firstChild?this._tooltip.firstChild._text:"",a=s.length;if(s.indexOf(this._input.value)===0)if(this._input.value=s,this._handleAutoresize(),this._input.createTextRange){let l=this._input.createTextRange();l.collapse(!0),l.moveStart("character",n),l.moveEnd("character",a),l.select()}else this._input.setSelectionRange?this._input.setSelectionRange(n,a):this._input.selectionStart&&(this._input.selectionStart=n,this._input.selectionEnd=a)},_hideAutoType:function(){let n;if((n=this._input.selection)&&n.empty)n.empty();else if(this._input.createTextRange){n=this._input.createTextRange(),n.collapse(!0);let s=this._input.value.length;n.moveStart("character",s),n.moveEnd("character",s),n.select()}else this._input.getSelection&&this._input.getSelection().removeAllRanges(),this._input.selectionStart=this._input.selectionEnd},_handleKeypress:function(n){let s=this;switch(n.keyCode){case 27:this.collapse();break;case 13:(this._countertips===1||this.options.firstTipSubmit&&this._countertips>0)&&this._tooltip.currentSelection===-1&&this._handleArrowSelect(1),this._handleSubmit();break;case 38:this._handleArrowSelect(-1);break;case 40:this._handleArrowSelect(1);break;case 45:case 46:this._autoTypeTmp=!1;break;case 37:case 39:case 16:case 17:case 35:case 36:break;default:this._input.value.length?this._cancel.style.display="block":this._cancel.style.display="none",this._input.value.length>=this.options.minLength?(clearTimeout(this.timerKeypress),this.timerKeypress=setTimeout(function(){s._fillRecordsCache()},this.options.delayType)):this._hideTooltip()}this._handleAutoresize()},searchText:function(n){let s=n.charCodeAt(n.length);this._input.value=n,this._input.style.display="block",r.DomUtil.addClass(this._container,"search-exp"),this._autoTypeTmp=!1,this._handleKeypress({keyCode:s})},_fillRecordsCache:function(){let n=this,s=this._input.value,a;this._curReq&&this._curReq.abort&&this._curReq.abort(),r.DomUtil.addClass(this._container,"search-load"),this.options.layer?(this._recordsCache=this._recordsFromLayer(),a=this._filterData(this._input.value,this._recordsCache),this.showTooltip(a),r.DomUtil.removeClass(this._container,"search-load")):(this.options.sourceData?this._retrieveData=this.options.sourceData:this.options.url&&(this._retrieveData=this.options.jsonpParam?this._recordsFromJsonp:this._recordsFromAjax),this._curReq=this._retrieveData(this,s,function(l){n._recordsCache=n._formatData(n,l),n.options.sourceData?a=n._filterData(n._input.value,n._recordsCache):a=n._recordsCache,n.showTooltip(a),r.DomUtil.removeClass(n._container,"search-load")}))},_handleAutoresize:function(){let n;this._input.style.maxWidth!==this._map._container.offsetWidth&&(n=this._map._container.clientWidth,n-=83,this._input.style.maxWidth=n.toString()+"px"),this.options.autoResize&&this._container.offsetWidth+20<this._map._container.offsetWidth&&(this._input.size=this._input.value.length<this._inputMinSize?this._inputMinSize:this._input.value.length)},_handleArrowSelect:function(n){let s=this._tooltip.hasChildNodes()?this._tooltip.childNodes:[];for(let a=0;a<s.length;a++)r.DomUtil.removeClass(s[a],"search-tip-select");if(n===1&&this._tooltip.currentSelection>=s.length-1)r.DomUtil.addClass(s[this._tooltip.currentSelection],"search-tip-select");else if(n===-1&&this._tooltip.currentSelection<=0)this._tooltip.currentSelection=-1;else if(this._tooltip.style.display!=="none"){this._tooltip.currentSelection+=n,r.DomUtil.addClass(s[this._tooltip.currentSelection],"search-tip-select"),this._input.value=s[this._tooltip.currentSelection]._text;let a=s[this._tooltip.currentSelection].offsetTop;a+s[this._tooltip.currentSelection].clientHeight>=this._tooltip.scrollTop+this._tooltip.clientHeight?this._tooltip.scrollTop=a-this._tooltip.clientHeight+s[this._tooltip.currentSelection].clientHeight:a<=this._tooltip.scrollTop&&(this._tooltip.scrollTop=a)}},_handleSubmit:function(){if(this._hideAutoType(),this.hideAlert(),this._hideTooltip(),this._input.style.display==="none")this.expand();else if(this._input.value==="")this.collapse();else{let n=this._getLocation(this._input.value);n?(this.showLocation(n,this._input.value),this.fire("search:locationfound",{latlng:n,text:this._input.value,layer:n.layer?n.layer:null})):this.showAlert()}},_getLocation:function(n){return Object.prototype.hasOwnProperty.call(this._recordsCache,n)?this._recordsCache[n]:!1},_defaultMoveToLocation:function(n,s,a){this.options.zoom?this._map.setView(n,this.options.zoom):this._map.panTo(n)},showLocation:function(n,s){let a=this;return a._map.once("moveend zoomend",function(l){a._markerSearch&&a._markerSearch.addTo(a._map).setLatLng(n)}),a._moveToLocation(n,s,a._map),a.options.autoCollapse&&a.collapse(),a}}),r.Control.Search.Marker=r.Marker.extend({includes:r.version[0]==="1"?r.Evented.prototype:r.Mixin.Events,options:{icon:new r.Icon.Default,animate:!0,circle:{radius:10,weight:3,color:"#e03",stroke:!0,fill:!1}},initialize:function(n,s){r.setOptions(this,s),s.icon===!0&&(s.icon=new r.Icon.Default),r.Marker.prototype.initialize.call(this,n,s),r.Control.Search.prototype._isObject(this.options.circle)&&(this._circleLoc=new r.CircleMarker(n,this.options.circle))},onAdd:function(n){r.Marker.prototype.onAdd.call(this,n),this._circleLoc&&(n.addLayer(this._circleLoc),this.options.animate&&this.animate())},onRemove:function(n){r.Marker.prototype.onRemove.call(this,n),this._circleLoc&&n.removeLayer(this._circleLoc)},setLatLng:function(n){return r.Marker.prototype.setLatLng.call(this,n),this._circleLoc&&this._circleLoc.setLatLng(n),this},_initIcon:function(){this.options.icon&&r.Marker.prototype._initIcon.call(this)},_removeIcon:function(){this.options.icon&&r.Marker.prototype._removeIcon.call(this)},animate:function(){if(this._circleLoc){let n=this._circleLoc,s=200,l=parseInt(n._radius/5),c=this.options.circle.radius,g=n._radius*2,m=0;n._timerAnimLoc=setInterval(function(){m+=.5,l+=m,g-=l,n.setRadius(g),g<c&&(clearInterval(n._timerAnimLoc),n.setRadius(c))},s)}return this}}),r.Map.addInitHook(function(){this.options.searchControl&&(this.searchControl=r.control.search(this.options.searchControl),this.addControl(this.searchControl))}),r.control.search=function(n){return new r.Control.Search(n)},r.Control.Search})});var ii=On(Oo()),I4=On(Ef()),O4=On(Mf());(()=>{var r={9705:(a,l,c)=>{"use strict";var g=c(1540);function m(v){var x=[1/0,1/0,-1/0,-1/0];return g.coordEach(v,function(P){x[0]>P[0]&&(x[0]=P[0]),x[1]>P[1]&&(x[1]=P[1]),x[2]<P[0]&&(x[2]=P[0]),x[3]<P[1]&&(x[3]=P[1])}),x}m.default=m,l.Z=m},4102:(a,l)=>{"use strict";function c(B,D,A){A===void 0&&(A={});var q={type:"Feature"};return(A.id===0||A.id)&&(q.id=A.id),A.bbox&&(q.bbox=A.bbox),q.properties=D||{},q.geometry=B,q}function g(B,D,A){if(A===void 0&&(A={}),!B)throw new Error("coordinates is required");if(!Array.isArray(B))throw new Error("coordinates must be an Array");if(B.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!R(B[0])||!R(B[1]))throw new Error("coordinates must contain numbers");return c({type:"Point",coordinates:B},D,A)}function m(B,D,A){A===void 0&&(A={});for(var q=0,H=B;q<H.length;q++){var K=H[q];if(K.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var et=0;et<K[K.length-1].length;et++)if(K[K.length-1][et]!==K[0][et])throw new Error("First and last Position are not equivalent.")}return c({type:"Polygon",coordinates:B},D,A)}function v(B,D,A){if(A===void 0&&(A={}),B.length<2)throw new Error("coordinates must be an array of two or more positions");return c({type:"LineString",coordinates:B},D,A)}function x(B,D){D===void 0&&(D={});var A={type:"FeatureCollection"};return D.id&&(A.id=D.id),D.bbox&&(A.bbox=D.bbox),A.features=B,A}function P(B,D,A){return A===void 0&&(A={}),c({type:"MultiLineString",coordinates:B},D,A)}function T(B,D,A){return A===void 0&&(A={}),c({type:"MultiPoint",coordinates:B},D,A)}function N(B,D,A){return A===void 0&&(A={}),c({type:"MultiPolygon",coordinates:B},D,A)}function G(B,D){D===void 0&&(D="kilometers");var A=l.factors[D];if(!A)throw new Error(D+" units is invalid");return B*A}function z(B,D){D===void 0&&(D="kilometers");var A=l.factors[D];if(!A)throw new Error(D+" units is invalid");return B/A}function j(B){return 180*(B%(2*Math.PI))/Math.PI}function R(B){return!isNaN(B)&&B!==null&&!Array.isArray(B)}Object.defineProperty(l,"__esModule",{value:!0}),l.earthRadius=63710088e-1,l.factors={centimeters:100*l.earthRadius,centimetres:100*l.earthRadius,degrees:l.earthRadius/111325,feet:3.28084*l.earthRadius,inches:39.37*l.earthRadius,kilometers:l.earthRadius/1e3,kilometres:l.earthRadius/1e3,meters:l.earthRadius,metres:l.earthRadius,miles:l.earthRadius/1609.344,millimeters:1e3*l.earthRadius,millimetres:1e3*l.earthRadius,nauticalmiles:l.earthRadius/1852,radians:1,yards:1.0936*l.earthRadius},l.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/l.earthRadius,yards:1.0936133},l.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},l.feature=c,l.geometry=function(B,D,A){switch(A===void 0&&(A={}),B){case"Point":return g(D).geometry;case"LineString":return v(D).geometry;case"Polygon":return m(D).geometry;case"MultiPoint":return T(D).geometry;case"MultiLineString":return P(D).geometry;case"MultiPolygon":return N(D).geometry;default:throw new Error(B+" is invalid")}},l.point=g,l.points=function(B,D,A){return A===void 0&&(A={}),x(B.map(function(q){return g(q,D)}),A)},l.polygon=m,l.polygons=function(B,D,A){return A===void 0&&(A={}),x(B.map(function(q){return m(q,D)}),A)},l.lineString=v,l.lineStrings=function(B,D,A){return A===void 0&&(A={}),x(B.map(function(q){return v(q,D)}),A)},l.featureCollection=x,l.multiLineString=P,l.multiPoint=T,l.multiPolygon=N,l.geometryCollection=function(B,D,A){return A===void 0&&(A={}),c({type:"GeometryCollection",geometries:B},D,A)},l.round=function(B,D){if(D===void 0&&(D=0),D&&!(D>=0))throw new Error("precision must be a positive number");var A=Math.pow(10,D||0);return Math.round(B*A)/A},l.radiansToLength=G,l.lengthToRadians=z,l.lengthToDegrees=function(B,D){return j(z(B,D))},l.bearingToAzimuth=function(B){var D=B%360;return D<0&&(D+=360),D},l.radiansToDegrees=j,l.degreesToRadians=function(B){return B%360*Math.PI/180},l.convertLength=function(B,D,A){if(D===void 0&&(D="kilometers"),A===void 0&&(A="kilometers"),!(B>=0))throw new Error("length must be a positive number");return G(z(B,D),A)},l.convertArea=function(B,D,A){if(D===void 0&&(D="meters"),A===void 0&&(A="kilometers"),!(B>=0))throw new Error("area must be a positive number");var q=l.areaFactors[D];if(!q)throw new Error("invalid original units");var H=l.areaFactors[A];if(!H)throw new Error("invalid final units");return B/q*H},l.isNumber=R,l.isObject=function(B){return!!B&&B.constructor===Object},l.validateBBox=function(B){if(!B)throw new Error("bbox is required");if(!Array.isArray(B))throw new Error("bbox must be an Array");if(B.length!==4&&B.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");B.forEach(function(D){if(!R(D))throw new Error("bbox must only contain numbers")})},l.validateId=function(B){if(!B)throw new Error("id is required");if(["string","number"].indexOf(typeof B)===-1)throw new Error("id must be a number or a string")}},1540:(a,l,c)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var g=c(4102);function m(z,j,R){if(z!==null)for(var B,D,A,q,H,K,et,X,lt=0,gt=0,Et=z.type,Q=Et==="FeatureCollection",kt=Et==="Feature",ct=Q?z.features.length:1,bt=0;bt<ct;bt++){H=(X=!!(et=Q?z.features[bt].geometry:kt?z.geometry:z)&&et.type==="GeometryCollection")?et.geometries.length:1;for(var Mt=0;Mt<H;Mt++){var Xt=0,ft=0;if((q=X?et.geometries[Mt]:et)!==null){K=q.coordinates;var Ct=q.type;switch(lt=!R||Ct!=="Polygon"&&Ct!=="MultiPolygon"?0:1,Ct){case null:break;case"Point":if(j(K,gt,bt,Xt,ft)===!1)return!1;gt++,Xt++;break;case"LineString":case"MultiPoint":for(B=0;B<K.length;B++){if(j(K[B],gt,bt,Xt,ft)===!1)return!1;gt++,Ct==="MultiPoint"&&Xt++}Ct==="LineString"&&Xt++;break;case"Polygon":case"MultiLineString":for(B=0;B<K.length;B++){for(D=0;D<K[B].length-lt;D++){if(j(K[B][D],gt,bt,Xt,ft)===!1)return!1;gt++}Ct==="MultiLineString"&&Xt++,Ct==="Polygon"&&ft++}Ct==="Polygon"&&Xt++;break;case"MultiPolygon":for(B=0;B<K.length;B++){for(ft=0,D=0;D<K[B].length;D++){for(A=0;A<K[B][D].length-lt;A++){if(j(K[B][D][A],gt,bt,Xt,ft)===!1)return!1;gt++}ft++}Xt++}break;case"GeometryCollection":for(B=0;B<q.geometries.length;B++)if(m(q.geometries[B],j,R)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function v(z,j){var R;switch(z.type){case"FeatureCollection":for(R=0;R<z.features.length&&j(z.features[R].properties,R)!==!1;R++);break;case"Feature":j(z.properties,0)}}function x(z,j){if(z.type==="Feature")j(z,0);else if(z.type==="FeatureCollection")for(var R=0;R<z.features.length&&j(z.features[R],R)!==!1;R++);}function P(z,j){var R,B,D,A,q,H,K,et,X,lt,gt=0,Et=z.type==="FeatureCollection",Q=z.type==="Feature",kt=Et?z.features.length:1;for(R=0;R<kt;R++){for(H=Et?z.features[R].geometry:Q?z.geometry:z,et=Et?z.features[R].properties:Q?z.properties:{},X=Et?z.features[R].bbox:Q?z.bbox:void 0,lt=Et?z.features[R].id:Q?z.id:void 0,q=(K=!!H&&H.type==="GeometryCollection")?H.geometries.length:1,D=0;D<q;D++)if((A=K?H.geometries[D]:H)!==null)switch(A.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(j(A,gt,et,X,lt)===!1)return!1;break;case"GeometryCollection":for(B=0;B<A.geometries.length;B++)if(j(A.geometries[B],gt,et,X,lt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(j(null,gt,et,X,lt)===!1)return!1;gt++}}function T(z,j){P(z,function(R,B,D,A,q){var H,K=R===null?null:R.type;switch(K){case null:case"Point":case"LineString":case"Polygon":return j(g.feature(R,D,{bbox:A,id:q}),B,0)!==!1&&void 0}switch(K){case"MultiPoint":H="Point";break;case"MultiLineString":H="LineString";break;case"MultiPolygon":H="Polygon"}for(var et=0;et<R.coordinates.length;et++){var X={type:H,coordinates:R.coordinates[et]};if(j(g.feature(X,D),B,et)===!1)return!1}})}function N(z,j){T(z,function(R,B,D){var A=0;if(R.geometry){var q=R.geometry.type;if(q!=="Point"&&q!=="MultiPoint"){var H,K=0,et=0,X=0;return m(R,function(lt,gt,Et,Q,kt){if(H===void 0||B>K||Q>et||kt>X)return H=lt,K=B,et=Q,X=kt,void(A=0);var ct=g.lineString([H,lt],R.properties);if(j(ct,B,D,kt,A)===!1)return!1;A++,H=lt})!==!1&&void 0}}})}function G(z,j){if(!z)throw new Error("geojson is required");T(z,function(R,B,D){if(R.geometry!==null){var A=R.geometry.type,q=R.geometry.coordinates;switch(A){case"LineString":if(j(R,B,D,0,0)===!1)return!1;break;case"Polygon":for(var H=0;H<q.length;H++)if(j(g.lineString(q[H],R.properties),B,D,H)===!1)return!1}}})}l.coordAll=function(z){var j=[];return m(z,function(R){j.push(R)}),j},l.coordEach=m,l.coordReduce=function(z,j,R,B){var D=R;return m(z,function(A,q,H,K,et){D=q===0&&R===void 0?A:j(D,A,q,H,K,et)},B),D},l.featureEach=x,l.featureReduce=function(z,j,R){var B=R;return x(z,function(D,A){B=A===0&&R===void 0?D:j(B,D,A)}),B},l.findPoint=function(z,j){if(j=j||{},!g.isObject(j))throw new Error("options is invalid");var R,B=j.featureIndex||0,D=j.multiFeatureIndex||0,A=j.geometryIndex||0,q=j.coordIndex||0,H=j.properties;switch(z.type){case"FeatureCollection":B<0&&(B=z.features.length+B),H=H||z.features[B].properties,R=z.features[B].geometry;break;case"Feature":H=H||z.properties,R=z.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":R=z;break;default:throw new Error("geojson is invalid")}if(R===null)return null;var K=R.coordinates;switch(R.type){case"Point":return g.point(K,H,j);case"MultiPoint":return D<0&&(D=K.length+D),g.point(K[D],H,j);case"LineString":return q<0&&(q=K.length+q),g.point(K[q],H,j);case"Polygon":return A<0&&(A=K.length+A),q<0&&(q=K[A].length+q),g.point(K[A][q],H,j);case"MultiLineString":return D<0&&(D=K.length+D),q<0&&(q=K[D].length+q),g.point(K[D][q],H,j);case"MultiPolygon":return D<0&&(D=K.length+D),A<0&&(A=K[D].length+A),q<0&&(q=K[D][A].length-q),g.point(K[D][A][q],H,j)}throw new Error("geojson is invalid")},l.findSegment=function(z,j){if(j=j||{},!g.isObject(j))throw new Error("options is invalid");var R,B=j.featureIndex||0,D=j.multiFeatureIndex||0,A=j.geometryIndex||0,q=j.segmentIndex||0,H=j.properties;switch(z.type){case"FeatureCollection":B<0&&(B=z.features.length+B),H=H||z.features[B].properties,R=z.features[B].geometry;break;case"Feature":H=H||z.properties,R=z.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":R=z;break;default:throw new Error("geojson is invalid")}if(R===null)return null;var K=R.coordinates;switch(R.type){case"Point":case"MultiPoint":return null;case"LineString":return q<0&&(q=K.length+q-1),g.lineString([K[q],K[q+1]],H,j);case"Polygon":return A<0&&(A=K.length+A),q<0&&(q=K[A].length+q-1),g.lineString([K[A][q],K[A][q+1]],H,j);case"MultiLineString":return D<0&&(D=K.length+D),q<0&&(q=K[D].length+q-1),g.lineString([K[D][q],K[D][q+1]],H,j);case"MultiPolygon":return D<0&&(D=K.length+D),A<0&&(A=K[D].length+A),q<0&&(q=K[D][A].length-q-1),g.lineString([K[D][A][q],K[D][A][q+1]],H,j)}throw new Error("geojson is invalid")},l.flattenEach=T,l.flattenReduce=function(z,j,R){var B=R;return T(z,function(D,A,q){B=A===0&&q===0&&R===void 0?D:j(B,D,A,q)}),B},l.geomEach=P,l.geomReduce=function(z,j,R){var B=R;return P(z,function(D,A,q,H,K){B=A===0&&R===void 0?D:j(B,D,A,q,H,K)}),B},l.lineEach=G,l.lineReduce=function(z,j,R){var B=R;return G(z,function(D,A,q,H){B=A===0&&R===void 0?D:j(B,D,A,q,H)}),B},l.propEach=v,l.propReduce=function(z,j,R){var B=R;return v(z,function(D,A){B=A===0&&R===void 0?D:j(B,D,A)}),B},l.segmentEach=N,l.segmentReduce=function(z,j,R){var B=R,D=!1;return N(z,function(A,q,H,K,et){B=D===!1&&R===void 0?A:j(B,A,q,H,K,et),D=!0}),B}},5975:(a,l,c)=>{"use strict";c(7107);var g=c(2492),m=c.n(g);let v=JSON.parse('{"tooltips":{"placeMarker":"Click to place marker","firstVertex":"Click to place first vertex","continueLine":"Click to continue drawing","finishLine":"Click any existing marker to finish","finishPoly":"Click first marker to finish","finishRect":"Click to finish","startCircle":"Click to place circle center","finishCircle":"Click to finish circle","placeCircleMarker":"Click to place circle marker","placeText":"Click to place text"},"actions":{"finish":"Finish","cancel":"Cancel","removeLastVertex":"Remove Last Vertex"},"buttonTitles":{"drawMarkerButton":"Draw Marker","drawPolyButton":"Draw Polygons","drawLineButton":"Draw Polyline","drawCircleButton":"Draw Circle","drawRectButton":"Draw Rectangle","editButton":"Edit Layers","dragButton":"Drag Layers","cutButton":"Cut Layers","deleteButton":"Remove Layers","drawCircleMarkerButton":"Draw Circle Marker","snappingButton":"Snap dragged marker to other layers and vertices","pinningButton":"Pin shared vertices together","rotateButton":"Rotate Layers","drawTextButton":"Draw Text","scaleButton":"Scale Layers","autoTracingButton":"Auto trace Line"},"measurements":{"totalLength":"Length","segmentLength":"Segment length","area":"Area","radius":"Radius","perimeter":"Perimeter","height":"Height","width":"Width","coordinates":"Position","coordinatesMarker":"Position Marker"}}'),x=JSON.parse('{"tooltips":{"placeMarker":"Platziere den Marker mit Klick","firstVertex":"Platziere den ersten Marker mit Klick","continueLine":"Klicke, um weiter zu zeichnen","finishLine":"Beende mit Klick auf existierenden Marker","finishPoly":"Beende mit Klick auf ersten Marker","finishRect":"Beende mit Klick","startCircle":"Platziere das Kreiszentrum mit Klick","finishCircle":"Beende den Kreis mit Klick","placeCircleMarker":"Platziere den Kreismarker mit Klick","placeText":"Platziere den Text mit Klick"},"actions":{"finish":"Beenden","cancel":"Abbrechen","removeLastVertex":"Letzten Vertex l\xF6schen"},"buttonTitles":{"drawMarkerButton":"Marker zeichnen","drawPolyButton":"Polygon zeichnen","drawLineButton":"Polyline zeichnen","drawCircleButton":"Kreis zeichnen","drawRectButton":"Rechteck zeichnen","editButton":"Layer editieren","dragButton":"Layer bewegen","cutButton":"Layer schneiden","deleteButton":"Layer l\xF6schen","drawCircleMarkerButton":"Kreismarker zeichnen","snappingButton":"Bewegter Layer an andere Layer oder Vertexe einhacken","pinningButton":"Vertexe an der gleichen Position verkn\xFCpfen","rotateButton":"Layer drehen","drawTextButton":"Text zeichnen","scaleButton":"Layer skalieren","autoTracingButton":"Linie automatisch nachzeichen"},"measurements":{"totalLength":"L\xE4nge","segmentLength":"Segment L\xE4nge","area":"Fl\xE4che","radius":"Radius","perimeter":"Umfang","height":"H\xF6he","width":"Breite","coordinates":"Position","coordinatesMarker":"Position Marker"}}'),P=JSON.parse(`{"tooltips":{"placeMarker":"Clicca per posizionare un Marker","firstVertex":"Clicca per posizionare il primo vertice","continueLine":"Clicca per continuare a disegnare","finishLine":"Clicca qualsiasi marker esistente per terminare","finishPoly":"Clicca il primo marker per terminare","finishRect":"Clicca per terminare","startCircle":"Clicca per posizionare il punto centrale del cerchio","finishCircle":"Clicca per terminare il cerchio","placeCircleMarker":"Clicca per posizionare un Marker del cherchio"},"actions":{"finish":"Termina","cancel":"Annulla","removeLastVertex":"Rimuovi l'ultimo vertice"},"buttonTitles":{"drawMarkerButton":"Disegna Marker","drawPolyButton":"Disegna Poligoni","drawLineButton":"Disegna Polilinea","drawCircleButton":"Disegna Cerchio","drawRectButton":"Disegna Rettangolo","editButton":"Modifica Livelli","dragButton":"Sposta Livelli","cutButton":"Ritaglia Livelli","deleteButton":"Elimina Livelli","drawCircleMarkerButton":"Disegna Marker del Cerchio","snappingButton":"Snap ha trascinato il pennarello su altri strati e vertici","pinningButton":"Pin condiviso vertici insieme"}}`),T=JSON.parse('{"tooltips":{"placeMarker":"Klik untuk menempatkan marker","firstVertex":"Klik untuk menempatkan vertex pertama","continueLine":"Klik untuk meneruskan digitasi","finishLine":"Klik pada sembarang marker yang ada untuk mengakhiri","finishPoly":"Klik marker pertama untuk mengakhiri","finishRect":"Klik untuk mengakhiri","startCircle":"Klik untuk menempatkan titik pusat lingkaran","finishCircle":"Klik untuk mengakhiri lingkaran","placeCircleMarker":"Klik untuk menempatkan penanda lingkarann"},"actions":{"finish":"Selesai","cancel":"Batal","removeLastVertex":"Hilangkan Vertex Terakhir"},"buttonTitles":{"drawMarkerButton":"Digitasi Marker","drawPolyButton":"Digitasi Polygon","drawLineButton":"Digitasi Polyline","drawCircleButton":"Digitasi Lingkaran","drawRectButton":"Digitasi Segi Empat","editButton":"Edit Layer","dragButton":"Geser Layer","cutButton":"Potong Layer","deleteButton":"Hilangkan Layer","drawCircleMarkerButton":"Digitasi Penanda Lingkaran","snappingButton":"Jepretkan penanda yang ditarik ke lapisan dan simpul lain","pinningButton":"Sematkan simpul bersama bersama"}}'),N=JSON.parse('{"tooltips":{"placeMarker":"Adaug\u0103 un punct","firstVertex":"Apas\u0103 aici pentru a ad\u0103uga primul Vertex","continueLine":"Apas\u0103 aici pentru a continua desenul","finishLine":"Apas\u0103 pe orice obiect pentru a finisa desenul","finishPoly":"Apas\u0103 pe primul obiect pentru a finisa","finishRect":"Apas\u0103 pentru a finisa","startCircle":"Apas\u0103 pentru a desena un cerc","finishCircle":"Apas\u0103 pentru a finisa un cerc","placeCircleMarker":"Adaug\u0103 un punct"},"actions":{"finish":"Termin\u0103","cancel":"Anuleaz\u0103","removeLastVertex":"\u0218terge ultimul Vertex"},"buttonTitles":{"drawMarkerButton":"Adaug\u0103 o bulin\u0103","drawPolyButton":"Deseneaz\u0103 un poligon","drawLineButton":"Deseneaz\u0103 o linie","drawCircleButton":"Deseneaz\u0103 un cerc","drawRectButton":"Deseneaz\u0103 un dreptunghi","editButton":"Editeaz\u0103 straturile","dragButton":"Mut\u0103 straturile","cutButton":"Taie straturile","deleteButton":"\u0218terge straturile","drawCircleMarkerButton":"Deseneaz\u0103 marcatorul cercului","snappingButton":"Fixa\u021Bi marcatorul glisat pe alte straturi \u0219i v\xE2rfuri","pinningButton":"Fixa\u021Bi v\xE2rfurile partajate \xEEmpreun\u0103"}}'),G=JSON.parse('{"tooltips":{"placeMarker":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043C\u0430\u0440\u043A\u0435\u0440","firstVertex":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043F\u0435\u0440\u0432\u044B\u0439 \u043E\u0431\u044A\u0435\u043A\u0442","continueLine":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u043F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C \u0440\u0438\u0441\u043E\u0432\u0430\u043D\u0438\u0435","finishLine":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435 \u043B\u044E\u0431\u043E\u0439 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044E\u0449\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440 \u0434\u043B\u044F \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0438\u044F","finishPoly":"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043F\u0435\u0440\u0432\u0443\u044E \u0442\u043E\u0447\u043A\u0443, \u0447\u0442\u043E\u0431\u044B \u0437\u0430\u043A\u043E\u043D\u0447\u0438\u0442\u044C","finishRect":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0437\u0430\u043A\u043E\u043D\u0447\u0438\u0442\u044C","startCircle":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0434\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0446\u0435\u043D\u0442\u0440 \u043A\u0440\u0443\u0433\u0430","finishCircle":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0437\u0430\u0434\u0430\u0442\u044C \u0440\u0430\u0434\u0438\u0443\u0441","placeCircleMarker":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043A\u0440\u0443\u0433\u043E\u0432\u043E\u0439 \u043C\u0430\u0440\u043A\u0435\u0440"},"actions":{"finish":"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044C","cancel":"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C","removeLastVertex":"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C \u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0435\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435"},"buttonTitles":{"drawMarkerButton":"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043C\u0430\u0440\u043A\u0435\u0440","drawPolyButton":"\u0420\u0438\u0441\u043E\u0432\u0430\u0442\u044C \u043F\u043E\u043B\u0438\u0433\u043E\u043D","drawLineButton":"\u0420\u0438\u0441\u043E\u0432\u0430\u0442\u044C \u043A\u0440\u0438\u0432\u0443\u044E","drawCircleButton":"\u0420\u0438\u0441\u043E\u0432\u0430\u0442\u044C \u043A\u0440\u0443\u0433","drawRectButton":"\u0420\u0438\u0441\u043E\u0432\u0430\u0442\u044C \u043F\u0440\u044F\u043C\u043E\u0443\u0433\u043E\u043B\u044C\u043D\u0438\u043A","editButton":"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0441\u043B\u043E\u0439","dragButton":"\u041F\u0435\u0440\u0435\u043D\u0435\u0441\u0442\u0438 \u0441\u043B\u043E\u0439","cutButton":"\u0412\u044B\u0440\u0435\u0437\u0430\u0442\u044C \u0441\u043B\u043E\u0439","deleteButton":"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0441\u043B\u043E\u0439","drawCircleMarkerButton":"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043A\u0440\u0443\u0433\u043E\u0432\u043E\u0439 \u043C\u0430\u0440\u043A\u0435\u0440","snappingButton":"\u041F\u0440\u0438\u0432\u044F\u0437\u0430\u0442\u044C \u043F\u0435\u0440\u0435\u0442\u0430\u0441\u043A\u0438\u0432\u0430\u0435\u043C\u044B\u0439 \u043C\u0430\u0440\u043A\u0435\u0440 \u043A \u0434\u0440\u0443\u0433\u0438\u043C \u0441\u043B\u043E\u044F\u043C \u0438 \u0432\u0435\u0440\u0448\u0438\u043D\u0430\u043C","pinningButton":"\u0421\u0432\u044F\u0437\u0430\u0442\u044C \u043E\u0431\u0449\u0438\u0435 \u0442\u043E\u0447\u043A\u0438 \u0432\u043C\u0435\u0441\u0442\u0435"}}'),z=JSON.parse('{"tooltips":{"placeMarker":"Presiona para colocar un marcador","firstVertex":"Presiona para colocar el primer v\xE9rtice","continueLine":"Presiona para continuar dibujando","finishLine":"Presiona cualquier marcador existente para finalizar","finishPoly":"Presiona el primer marcador para finalizar","finishRect":"Presiona para finalizar","startCircle":"Presiona para colocar el centro del c\xEDrculo","finishCircle":"Presiona para finalizar el c\xEDrculo","placeCircleMarker":"Presiona para colocar un marcador de c\xEDrculo"},"actions":{"finish":"Finalizar","cancel":"Cancelar","removeLastVertex":"Eliminar \xFAltimo v\xE9rtice"},"buttonTitles":{"drawMarkerButton":"Dibujar Marcador","drawPolyButton":"Dibujar Pol\xEDgono","drawLineButton":"Dibujar L\xEDnea","drawCircleButton":"Dibujar C\xEDrculo","drawRectButton":"Dibujar Rect\xE1ngulo","editButton":"Editar Capas","dragButton":"Arrastrar Capas","cutButton":"Cortar Capas","deleteButton":"Eliminar Capas","drawCircleMarkerButton":"Dibujar Marcador de C\xEDrculo","snappingButton":"El marcador de Snap arrastrado a otras capas y v\xE9rtices","pinningButton":"Fijar juntos los v\xE9rtices compartidos"}}'),j=JSON.parse('{"tooltips":{"placeMarker":"Klik om een marker te plaatsen","firstVertex":"Klik om het eerste punt te plaatsen","continueLine":"Klik om te blijven tekenen","finishLine":"Klik op een bestaand punt om te be\xEBindigen","finishPoly":"Klik op het eerst punt om te be\xEBindigen","finishRect":"Klik om te be\xEBindigen","startCircle":"Klik om het middelpunt te plaatsen","finishCircle":"Klik om de cirkel te be\xEBindigen","placeCircleMarker":"Klik om een marker te plaatsen"},"actions":{"finish":"Bewaar","cancel":"Annuleer","removeLastVertex":"Verwijder laatste punt"},"buttonTitles":{"drawMarkerButton":"Plaats Marker","drawPolyButton":"Teken een vlak","drawLineButton":"Teken een lijn","drawCircleButton":"Teken een cirkel","drawRectButton":"Teken een vierkant","editButton":"Bewerk","dragButton":"Verplaats","cutButton":"Knip","deleteButton":"Verwijder","drawCircleMarkerButton":"Plaats Marker","snappingButton":"Snap gesleepte marker naar andere lagen en hoekpunten","pinningButton":"Speld gedeelde hoekpunten samen"}}'),R=JSON.parse(`{"tooltips":{"placeMarker":"Cliquez pour placer un marqueur","firstVertex":"Cliquez pour placer le premier sommet","continueLine":"Cliquez pour continuer \xE0 dessiner","finishLine":"Cliquez sur n'importe quel marqueur pour terminer","finishPoly":"Cliquez sur le premier marqueur pour terminer","finishRect":"Cliquez pour terminer","startCircle":"Cliquez pour placer le centre du cercle","finishCircle":"Cliquez pour finir le cercle","placeCircleMarker":"Cliquez pour placer le marqueur circulaire"},"actions":{"finish":"Terminer","cancel":"Annuler","removeLastVertex":"Retirer le dernier sommet"},"buttonTitles":{"drawMarkerButton":"Placer des marqueurs","drawPolyButton":"Dessiner des polygones","drawLineButton":"Dessiner des polylignes","drawCircleButton":"Dessiner un cercle","drawRectButton":"Dessiner un rectangle","editButton":"\xC9diter des calques","dragButton":"D\xE9placer des calques","cutButton":"Couper des calques","deleteButton":"Supprimer des calques","drawCircleMarkerButton":"Dessiner un marqueur circulaire","snappingButton":"Glisser le marqueur vers d'autres couches et sommets","pinningButton":"\xC9pingler ensemble les sommets partag\xE9s","rotateButton":"Tourner des calques"}}`),B=JSON.parse('{"tooltips":{"placeMarker":"\u5355\u51FB\u653E\u7F6E\u6807\u8BB0","firstVertex":"\u5355\u51FB\u653E\u7F6E\u9996\u4E2A\u9876\u70B9","continueLine":"\u5355\u51FB\u7EE7\u7EED\u7ED8\u5236","finishLine":"\u5355\u51FB\u4EFB\u4F55\u5B58\u5728\u7684\u6807\u8BB0\u4EE5\u5B8C\u6210","finishPoly":"\u5355\u51FB\u7B2C\u4E00\u4E2A\u6807\u8BB0\u4EE5\u5B8C\u6210","finishRect":"\u5355\u51FB\u5B8C\u6210","startCircle":"\u5355\u51FB\u653E\u7F6E\u5706\u5FC3","finishCircle":"\u5355\u51FB\u5B8C\u6210\u5706\u5F62","placeCircleMarker":"\u70B9\u51FB\u653E\u7F6E\u5706\u5F62\u6807\u8BB0"},"actions":{"finish":"\u5B8C\u6210","cancel":"\u53D6\u6D88","removeLastVertex":"\u79FB\u9664\u6700\u540E\u7684\u9876\u70B9"},"buttonTitles":{"drawMarkerButton":"\u7ED8\u5236\u6807\u8BB0","drawPolyButton":"\u7ED8\u5236\u591A\u8FB9\u5F62","drawLineButton":"\u7ED8\u5236\u7EBF\u6BB5","drawCircleButton":"\u7ED8\u5236\u5706\u5F62","drawRectButton":"\u7ED8\u5236\u957F\u65B9\u5F62","editButton":"\u7F16\u8F91\u56FE\u5C42","dragButton":"\u62D6\u62FD\u56FE\u5C42","cutButton":"\u526A\u5207\u56FE\u5C42","deleteButton":"\u5220\u9664\u56FE\u5C42","drawCircleMarkerButton":"\u753B\u5706\u5708\u6807\u8BB0","snappingButton":"\u5C06\u62D6\u52A8\u7684\u6807\u8BB0\u6355\u6349\u5230\u5176\u4ED6\u56FE\u5C42\u548C\u9876\u70B9","pinningButton":"\u5C06\u5171\u4EAB\u9876\u70B9\u56FA\u5B9A\u5728\u4E00\u8D77"}}'),D=JSON.parse('{"tooltips":{"placeMarker":"\u55AE\u64CA\u653E\u7F6E\u6A19\u8A18","firstVertex":"\u55AE\u64CA\u653E\u7F6E\u7B2C\u4E00\u500B\u9802\u9EDE","continueLine":"\u55AE\u64CA\u7E7C\u7E8C\u7E6A\u88FD","finishLine":"\u55AE\u64CA\u4EFB\u4F55\u5B58\u5728\u7684\u6A19\u8A18\u4EE5\u5B8C\u6210","finishPoly":"\u55AE\u64CA\u7B2C\u4E00\u500B\u6A19\u8A18\u4EE5\u5B8C\u6210","finishRect":"\u55AE\u64CA\u5B8C\u6210","startCircle":"\u55AE\u64CA\u653E\u7F6E\u5713\u5FC3","finishCircle":"\u55AE\u64CA\u5B8C\u6210\u5713\u5F62","placeCircleMarker":"\u9EDE\u64CA\u653E\u7F6E\u5713\u5F62\u6A19\u8A18"},"actions":{"finish":"\u5B8C\u6210","cancel":"\u53D6\u6D88","removeLastVertex":"\u79FB\u9664\u6700\u5F8C\u4E00\u500B\u9802\u9EDE"},"buttonTitles":{"drawMarkerButton":"\u653E\u7F6E\u6A19\u8A18","drawPolyButton":"\u7E6A\u88FD\u591A\u908A\u5F62","drawLineButton":"\u7E6A\u88FD\u7DDA\u6BB5","drawCircleButton":"\u7E6A\u88FD\u5713\u5F62","drawRectButton":"\u7E6A\u88FD\u65B9\u5F62","editButton":"\u7DE8\u8F2F\u5716\u5F62","dragButton":"\u79FB\u52D5\u5716\u5F62","cutButton":"\u88C1\u5207\u5716\u5F62","deleteButton":"\u522A\u9664\u5716\u5F62","drawCircleMarkerButton":"\u756B\u5713\u5708\u6A19\u8A18","snappingButton":"\u5C07\u62D6\u52D5\u7684\u6A19\u8A18\u5C0D\u9F4A\u5230\u5176\u4ED6\u5716\u5C64\u548C\u9802\u9EDE","pinningButton":"\u5C07\u5171\u4EAB\u9802\u9EDE\u56FA\u5B9A\u5728\u4E00\u8D77"}}'),A={en:v,de:x,it:P,id:T,ro:N,ru:G,es:z,nl:j,fr:R,pt_br:JSON.parse('{"tooltips":{"placeMarker":"Clique para posicionar o marcador","firstVertex":"Clique para posicionar o primeiro v\xE9rtice","continueLine":"Clique para continuar desenhando","finishLine":"Clique em qualquer marcador existente para finalizar","finishPoly":"Clique no primeiro ponto para fechar o pol\xEDgono","finishRect":"Clique para finalizar","startCircle":"Clique para posicionar o centro do c\xEDrculo","finishCircle":"Clique para fechar o c\xEDrculo","placeCircleMarker":"Clique para posicionar o marcador circular"},"actions":{"finish":"Finalizar","cancel":"Cancelar","removeLastVertex":"Remover \xFAltimo v\xE9rtice"},"buttonTitles":{"drawMarkerButton":"Desenhar um marcador","drawPolyButton":"Desenhar um pol\xEDgono","drawLineButton":"Desenhar uma polilinha","drawCircleButton":"Desenhar um c\xEDrculo","drawRectButton":"Desenhar um ret\xE2ngulo","editButton":"Editar camada(s)","dragButton":"Mover camada(s)","cutButton":"Recortar camada(s)","deleteButton":"Remover camada(s)","drawCircleMarkerButton":"Marcador de c\xEDrculos de desenho","snappingButton":"Marcador arrastado para outras camadas e v\xE9rtices","pinningButton":"V\xE9rtices compartilhados de pinos juntos"}}'),zh:B,zh_tw:D,pl:JSON.parse('{"tooltips":{"placeMarker":"Kliknij, aby ustawi\u0107 znacznik","firstVertex":"Kliknij, aby ustawi\u0107 pierwszy punkt","continueLine":"Kliknij, aby kontynuowa\u0107 rysowanie","finishLine":"Kliknij dowolny punkt, aby zako\u0144czy\u0107","finishPoly":"Kliknij pierwszy punkt, aby zako\u0144czy\u0107","finishRect":"Kliknij, aby zako\u0144czy\u0107","startCircle":"Kliknij, aby ustawi\u0107 \u015Brodek ko\u0142a","finishCircle":"Kliknij, aby zako\u0144czy\u0107 rysowanie ko\u0142a","placeCircleMarker":"Kliknij, aby ustawi\u0107 okr\u0105g\u0142y znacznik"},"actions":{"finish":"Zako\u0144cz","cancel":"Anuluj","removeLastVertex":"Usu\u0144 ostatni punkt"},"buttonTitles":{"drawMarkerButton":"Narysuj znacznik","drawPolyButton":"Narysuj wielok\u0105t","drawLineButton":"Narysuj \u015Bcie\u017Ck\u0119","drawCircleButton":"Narysuj ko\u0142o","drawRectButton":"Narysuj prostok\u0105t","editButton":"Edytuj","dragButton":"Przesu\u0144","cutButton":"Wytnij","deleteButton":"Usu\u0144","drawCircleMarkerButton":"Narysuj okr\u0105g\u0142y znacznik","snappingButton":"Snap przeci\u0105gni\u0119ty marker na inne warstwy i wierzcho\u0142ki","pinningButton":"Sworze\u0144 wsp\xF3lne wierzcho\u0142ki razem"}}'),sv:JSON.parse('{"tooltips":{"placeMarker":"Klicka f\xF6r att placera mark\xF6r","firstVertex":"Klicka f\xF6r att placera f\xF6rsta h\xF6rnet","continueLine":"Klicka f\xF6r att forts\xE4tta rita","finishLine":"Klicka p\xE5 en existerande punkt f\xF6r att slutf\xF6ra","finishPoly":"Klicka p\xE5 den f\xF6rsta punkten f\xF6r att slutf\xF6ra","finishRect":"Klicka f\xF6r att slutf\xF6ra","startCircle":"Klicka f\xF6r att placera cirkelns centrum","finishCircle":"Klicka f\xF6r att slutf\xF6ra cirkeln","placeCircleMarker":"Klicka f\xF6r att placera cirkelmark\xF6r"},"actions":{"finish":"Slutf\xF6r","cancel":"Avbryt","removeLastVertex":"Ta bort sista h\xF6rnet"},"buttonTitles":{"drawMarkerButton":"Rita Mark\xF6r","drawPolyButton":"Rita Polygoner","drawLineButton":"Rita Linje","drawCircleButton":"Rita Cirkel","drawRectButton":"Rita Rektangel","editButton":"Redigera Lager","dragButton":"Dra Lager","cutButton":"Klipp i Lager","deleteButton":"Ta bort Lager","drawCircleMarkerButton":"Rita Cirkelmark\xF6r","snappingButton":"Sn\xE4pp dra mark\xF6ren till andra lager och h\xF6rn","pinningButton":"F\xE4st delade h\xF6rn tillsammans"}}'),el:JSON.parse('{"tooltips":{"placeMarker":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03BF\u03C0\u03BF\u03B8\u03B5\u03C4\u03AE\u03C3\u03B5\u03C4\u03B5 \u0394\u03B5\u03AF\u03BA\u03C4\u03B7","firstVertex":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03BF\u03C0\u03BF\u03B8\u03B5\u03C4\u03AE\u03C3\u03B5\u03C4\u03B5 \u03C4\u03BF \u03C0\u03C1\u03CE\u03C4\u03BF \u03C3\u03B7\u03BC\u03B5\u03AF\u03BF","continueLine":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C3\u03C5\u03BD\u03B5\u03C7\u03AF\u03C3\u03B5\u03C4\u03B5 \u03BD\u03B1 \u03C3\u03C7\u03B5\u03B4\u03B9\u03AC\u03B6\u03B5\u03C4\u03B5","finishLine":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03C3\u03B5 \u03BF\u03C0\u03BF\u03B9\u03BF\u03BD\u03B4\u03AE\u03C0\u03BF\u03C4\u03B5 \u03C5\u03C0\u03AC\u03C1\u03C7\u03BF\u03BD \u03C3\u03B7\u03BC\u03B5\u03AF\u03BF \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03BF\u03BB\u03BF\u03BA\u03BB\u03B7\u03C1\u03C9\u03B8\u03B5\u03AF","finishPoly":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03C3\u03C4\u03BF \u03C0\u03C1\u03CE\u03C4\u03BF \u03C3\u03B7\u03BC\u03B5\u03AF\u03BF \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03B5\u03BB\u03B5\u03B9\u03CE\u03C3\u03B5\u03C4\u03B5","finishRect":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03B5\u03BB\u03B5\u03B9\u03CE\u03C3\u03B5\u03C4\u03B5","startCircle":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03BF\u03C0\u03BF\u03B8\u03B5\u03C4\u03AE\u03C3\u03B5\u03C4\u03B5 \u03BA\u03AD\u03BD\u03C4\u03C1\u03BF \u039A\u03CD\u03BA\u03BB\u03BF\u03C5","finishCircle":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03BF\u03BB\u03BF\u03BA\u03BB\u03B7\u03C1\u03CE\u03C3\u03B5\u03C4\u03B5 \u03C4\u03BF\u03BD \u039A\u03CD\u03BA\u03BB\u03BF","placeCircleMarker":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03BF\u03C0\u03BF\u03B8\u03B5\u03C4\u03AE\u03C3\u03B5\u03C4\u03B5 \u039A\u03C5\u03BA\u03BB\u03B9\u03BA\u03CC \u0394\u03B5\u03AF\u03BA\u03C4\u03B7"},"actions":{"finish":"\u03A4\u03AD\u03BB\u03BF\u03C2","cancel":"\u0391\u03BA\u03CD\u03C1\u03C9\u03C3\u03B7","removeLastVertex":"\u039A\u03B1\u03C4\u03AC\u03C1\u03B3\u03B7\u03C3\u03B7 \u03C4\u03B5\u03BB\u03B5\u03C5\u03C4\u03B1\u03AF\u03BF\u03C5 \u03C3\u03B7\u03BC\u03B5\u03AF\u03BF\u03C5"},"buttonTitles":{"drawMarkerButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u0394\u03B5\u03AF\u03BA\u03C4\u03B7","drawPolyButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u03A0\u03BF\u03BB\u03C5\u03B3\u03CE\u03BD\u03BF\u03C5","drawLineButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u0393\u03C1\u03B1\u03BC\u03BC\u03AE\u03C2","drawCircleButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u039A\u03CD\u03BA\u03BB\u03BF\u03C5","drawRectButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u039F\u03C1\u03B8\u03BF\u03B3\u03C9\u03BD\u03AF\u03BF\u03C5","editButton":"\u0395\u03C0\u03B5\u03BE\u03B5\u03C1\u03B3\u03B1\u03C3\u03AF\u03B1 \u0395\u03C0\u03B9\u03C0\u03AD\u03B4\u03C9\u03BD","dragButton":"\u039C\u03B5\u03C4\u03B1\u03C6\u03BF\u03C1\u03AC \u0395\u03C0\u03B9\u03C0\u03AD\u03B4\u03C9\u03BD","cutButton":"\u0391\u03C0\u03BF\u03BA\u03BF\u03C0\u03AE \u0395\u03C0\u03B9\u03C0\u03AD\u03B4\u03C9\u03BD","deleteButton":"\u039A\u03B1\u03C4\u03AC\u03C1\u03B3\u03B7\u03C3\u03B7 \u0395\u03C0\u03B9\u03C0\u03AD\u03B4\u03C9\u03BD","drawCircleMarkerButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u039A\u03C5\u03BA\u03BB\u03B9\u03BA\u03BF\u03CD \u0394\u03B5\u03AF\u03BA\u03C4\u03B7","snappingButton":"\u03A0\u03C1\u03BF\u03C3\u03BA\u03CC\u03BB\u03BB\u03B7\u03C3\u03B7 \u03C4\u03BF\u03C5 \u0394\u03B5\u03AF\u03BA\u03C4\u03B7 \u03BC\u03B5\u03C4\u03B1\u03C6\u03BF\u03C1\u03AC\u03C2 \u03C3\u03B5 \u03AC\u03BB\u03BB\u03B1 \u0395\u03C0\u03AF\u03C0\u03B5\u03B4\u03B1 \u03BA\u03B1\u03B9 \u039A\u03BF\u03C1\u03C5\u03C6\u03AD\u03C2","pinningButton":"\u03A0\u03B5\u03C1\u03B9\u03BA\u03BF\u03C0\u03AE \u03BA\u03BF\u03B9\u03BD\u03CE\u03BD \u03BA\u03BF\u03C1\u03C5\u03C6\u03CE\u03BD \u03BC\u03B1\u03B6\u03AF"}}'),hu:JSON.parse('{"tooltips":{"placeMarker":"Kattintson a jel\xF6l\u0151 elhelyez\xE9s\xE9hez","firstVertex":"Kattintson az els\u0151 pont elhelyez\xE9s\xE9hez","continueLine":"Kattintson a k\xF6vetkez\u0151 pont elhelyez\xE9s\xE9hez","finishLine":"A befejez\xE9shez kattintson egy megl\xE9v\u0151 pontra","finishPoly":"A befejez\xE9shez kattintson az els\u0151 pontra","finishRect":"Kattintson a befejez\xE9shez","startCircle":"Kattintson a k\xF6r k\xF6z\xE9ppontj\xE1nak elhelyez\xE9s\xE9hez","finishCircle":"Kattintson a k\xF6r befejez\xE9s\xE9hez","placeCircleMarker":"Kattintson a k\xF6rjel\xF6l\u0151 elhelyez\xE9s\xE9hez"},"actions":{"finish":"Befejez\xE9s","cancel":"M\xE9gse","removeLastVertex":"Utols\xF3 pont elt\xE1vol\xEDt\xE1sa"},"buttonTitles":{"drawMarkerButton":"Jel\xF6l\u0151 rajzol\xE1sa","drawPolyButton":"Poligon rajzol\xE1sa","drawLineButton":"Vonal rajzol\xE1sa","drawCircleButton":"K\xF6r rajzol\xE1sa","drawRectButton":"N\xE9gyzet rajzol\xE1sa","editButton":"Elemek szerkeszt\xE9se","dragButton":"Elemek mozgat\xE1sa","cutButton":"Elemek v\xE1g\xE1sa","deleteButton":"Elemek t\xF6rl\xE9se","drawCircleMarkerButton":"K\xF6r jel\xF6l\u0151 rajzol\xE1sa","snappingButton":"Kapcsolja a jel\xF6lt\u0151t m\xE1sik elemhez vagy ponthoz","pinningButton":"K\xF6z\xF6s pontok \xF6sszek\xF6t\xE9se"}}'),da:JSON.parse('{"tooltips":{"placeMarker":"Tryk for at placere en mark\xF8r","firstVertex":"Tryk for at placere det f\xF8rste punkt","continueLine":"Tryk for at forts\xE6tte linjen","finishLine":"Tryk p\xE5 et eksisterende punkt for at afslutte","finishPoly":"Tryk p\xE5 det f\xF8rste punkt for at afslutte","finishRect":"Tryk for at afslutte","startCircle":"Tryk for at placere cirklens center","finishCircle":"Tryk for at afslutte cirklen","placeCircleMarker":"Tryk for at placere en cirkelmark\xF8r"},"actions":{"finish":"Afslut","cancel":"Afbryd","removeLastVertex":"Fjern sidste punkt"},"buttonTitles":{"drawMarkerButton":"Placer mark\xF8r","drawPolyButton":"Tegn polygon","drawLineButton":"Tegn linje","drawCircleButton":"Tegn cirkel","drawRectButton":"Tegn firkant","editButton":"Rediger","dragButton":"Tr\xE6k","cutButton":"Klip","deleteButton":"Fjern","drawCircleMarkerButton":"Tegn cirkelmark\xF8r","snappingButton":"Fastg\xF8r trukket mark\xF8r til andre elementer","pinningButton":"Sammenl\xE6g delte elementer"}}'),no:JSON.parse('{"tooltips":{"placeMarker":"Klikk for \xE5 plassere punkt","firstVertex":"Klikk for \xE5 plassere f\xF8rste punkt","continueLine":"Klikk for \xE5 tegne videre","finishLine":"Klikk p\xE5 et eksisterende punkt for \xE5 fullf\xF8re","finishPoly":"Klikk f\xF8rste punkt for \xE5 fullf\xF8re","finishRect":"Klikk for \xE5 fullf\xF8re","startCircle":"Klikk for \xE5 sette sirkel midtpunkt","finishCircle":"Klikk for \xE5 fullf\xF8re sirkel","placeCircleMarker":"Klikk for \xE5 plassere sirkel"},"actions":{"finish":"Fullf\xF8r","cancel":"Kanseller","removeLastVertex":"Fjern forrige punkt"},"buttonTitles":{"drawMarkerButton":"Tegn Punkt","drawPolyButton":"Tegn Flate","drawLineButton":"Tegn Linje","drawCircleButton":"Tegn Sirkel","drawRectButton":"Tegn rektangel","editButton":"Rediger Objekter","dragButton":"Dra Objekter","cutButton":"Kutt Objekter","deleteButton":"Fjern Objekter","drawCircleMarkerButton":"Tegn sirkel-punkt","snappingButton":"Fest dratt punkt til andre objekter og punkt","pinningButton":"Pin delte punkt sammen"}}'),fa:JSON.parse('{"tooltips":{"placeMarker":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u062C\u0627\u0646\u0645\u0627\u06CC\u06CC \u0646\u0634\u0627\u0646","firstVertex":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0631\u0633\u0645 \u0627\u0648\u0644\u06CC\u0646 \u0631\u0623\u0633","continueLine":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0627\u062F\u0627\u0645\u0647 \u0631\u0633\u0645","finishLine":"\u06A9\u0644\u06CC\u06A9 \u0631\u0648\u06CC \u0647\u0631 \u0646\u0634\u0627\u0646 \u0645\u0648\u062C\u0648\u062F \u0628\u0631\u0627\u06CC \u067E\u0627\u06CC\u0627\u0646","finishPoly":"\u06A9\u0644\u06CC\u06A9 \u0631\u0648\u06CC \u0627\u0648\u0644\u06CC\u0646 \u0646\u0634\u0627\u0646 \u0628\u0631\u0627\u06CC \u067E\u0627\u06CC\u0627\u0646","finishRect":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u067E\u0627\u06CC\u0627\u0646","startCircle":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0631\u0633\u0645 \u0645\u0631\u06A9\u0632 \u062F\u0627\u06CC\u0631\u0647","finishCircle":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u067E\u0627\u06CC\u0627\u0646 \u0631\u0633\u0645 \u062F\u0627\u06CC\u0631\u0647","placeCircleMarker":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0631\u0633\u0645 \u0646\u0634\u0627\u0646 \u062F\u0627\u06CC\u0631\u0647","placeText":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0646\u0648\u0634\u062A\u0646 \u0645\u062A\u0646"},"actions":{"finish":"\u067E\u0627\u06CC\u0627\u0646","cancel":"\u0644\u0641\u0648","removeLastVertex":"\u062D\u0630\u0641 \u0622\u062E\u0631\u06CC\u0646 \u0631\u0623\u0633"},"buttonTitles":{"drawMarkerButton":"\u062F\u0631\u062C \u0646\u0634\u0627\u0646","drawPolyButton":"\u0631\u0633\u0645 \u0686\u0646\u062F\u0636\u0644\u0639\u06CC","drawLineButton":"\u0631\u0633\u0645 \u062E\u0637","drawCircleButton":"\u0631\u0633\u0645 \u062F\u0627\u06CC\u0631\u0647","drawRectButton":"\u0631\u0633\u0645 \u0686\u0647\u0627\u0631\u0636\u0644\u0639\u06CC","editButton":"\u0648\u06CC\u0631\u0627\u06CC\u0634 \u0644\u0627\u06CC\u0647\u200C\u0647\u0627","dragButton":"\u062C\u0627\u0628\u062C\u0627\u06CC\u06CC \u0644\u0627\u06CC\u0647\u200C\u0647\u0627","cutButton":"\u0628\u0631\u0634 \u0644\u0627\u06CC\u0647\u200C\u0647\u0627","deleteButton":"\u062D\u0630\u0641 \u0644\u0627\u06CC\u0647\u200C\u0647\u0627","drawCircleMarkerButton":"\u0631\u0633\u0645 \u0646\u0634\u0627\u0646 \u062F\u0627\u06CC\u0631\u0647","snappingButton":"\u0646\u0634\u0627\u0646\u06AF\u0631 \u0631\u0627 \u0628\u0647 \u0644\u0627\u06CC\u0647\u200C\u0647\u0627 \u0648 \u0631\u0626\u0648\u0633 \u062F\u06CC\u06AF\u0631 \u0628\u06A9\u0634\u06CC\u062F","pinningButton":"\u0631\u0626\u0648\u0633 \u0645\u0634\u062A\u0631\u06A9 \u0631\u0627 \u0628\u0627 \u0647\u0645 \u067E\u06CC\u0646 \u06A9\u0646\u06CC\u062F","rotateButton":"\u0686\u0631\u062E\u0634 \u0644\u0627\u06CC\u0647","drawTextButton":"\u0631\u0633\u0645 \u0645\u062A\u0646"}}'),ua:JSON.parse(`{"tooltips":{"placeMarker":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043C\u0430\u0440\u043A\u0435\u0440","firstVertex":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043F\u0435\u0440\u0448\u0443 \u0432\u0435\u0440\u0448\u0438\u043D\u0443","continueLine":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u043F\u0440\u043E\u0434\u043E\u0432\u0436\u0438\u0442\u0438 \u043C\u0430\u043B\u044E\u0432\u0430\u0442\u0438","finishLine":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C \u0431\u0443\u0434\u044C-\u044F\u043A\u0438\u0439 \u0456\u0441\u043D\u0443\u044E\u0447\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440 \u0434\u043B\u044F \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u043D\u044F","finishPoly":"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044C \u043F\u0435\u0440\u0448\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440, \u0449\u043E\u0431 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438","finishRect":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438","startCircle":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u0434\u043E\u0434\u0430\u0442\u0438 \u0446\u0435\u043D\u0442\u0440 \u043A\u043E\u043B\u0430","finishCircle":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438 \u043A\u043E\u043B\u043E","placeCircleMarker":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043A\u0440\u0443\u0433\u043E\u0432\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440"},"actions":{"finish":"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438","cancel":"\u0412\u0456\u0434\u043C\u0456\u043D\u0438\u0442\u0438","removeLastVertex":"\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438 \u043F\u043E\u043F\u0435\u0440\u0435\u0434\u043D\u044E \u0432\u0435\u0440\u0448\u0438\u043D\u0443"},"buttonTitles":{"drawMarkerButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043C\u0430\u0440\u043A\u0435\u0440","drawPolyButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043F\u043E\u043B\u0456\u0433\u043E\u043D","drawLineButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043A\u0440\u0438\u0432\u0443","drawCircleButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043A\u043E\u043B\u043E","drawRectButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043F\u0440\u044F\u043C\u043E\u043A\u0443\u0442\u043D\u0438\u043A","editButton":"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u0448\u0430\u0440\u0438","dragButton":"\u041F\u0435\u0440\u0435\u043D\u0435\u0441\u0442\u0438 \u0448\u0430\u0440\u0438","cutButton":"\u0412\u0438\u0440\u0456\u0437\u0430\u0442\u0438 \u0448\u0430\u0440\u0438","deleteButton":"\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438 \u0448\u0430\u0440\u0438","drawCircleMarkerButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043A\u0440\u0443\u0433\u043E\u0432\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440","snappingButton":"\u041F\u0440\u0438\u0432\u2019\u044F\u0437\u0430\u0442\u0438 \u043F\u0435\u0440\u0435\u0442\u044F\u0433\u043D\u0443\u0442\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440 \u0434\u043E \u0456\u043D\u0448\u0438\u0445 \u0448\u0430\u0440\u0456\u0432 \u0442\u0430 \u0432\u0435\u0440\u0448\u0438\u043D","pinningButton":"\u0417\u0432'\u044F\u0437\u0430\u0442\u0438 \u0441\u043F\u0456\u043B\u044C\u043D\u0456 \u0432\u0435\u0440\u0448\u0438\u043D\u0438 \u0440\u0430\u0437\u043E\u043C"}}`),tr:JSON.parse('{"tooltips":{"placeMarker":"\u0130\u015Faret\xE7i yerle\u015Ftirmek i\xE7in t\u0131klay\u0131n","firstVertex":"\u0130lk tepe noktas\u0131n\u0131 yerle\u015Ftirmek i\xE7in t\u0131klay\u0131n","continueLine":"\xC7izime devam etmek i\xE7in t\u0131klay\u0131n","finishLine":"Bitirmek i\xE7in mevcut herhangi bir i\u015Faret\xE7iyi t\u0131klay\u0131n","finishPoly":"Bitirmek i\xE7in ilk i\u015Faret\xE7iyi t\u0131klay\u0131n","finishRect":"Bitirmek i\xE7in t\u0131klay\u0131n","startCircle":"Daire merkezine yerle\u015Ftirmek i\xE7in t\u0131klay\u0131n","finishCircle":"Daireyi bitirmek i\xE7in t\u0131klay\u0131n","placeCircleMarker":"Daire i\u015Faret\xE7isi yerle\u015Ftirmek i\xE7in t\u0131klay\u0131n"},"actions":{"finish":"Bitir","cancel":"\u0130ptal","removeLastVertex":"Son k\xF6\u015Feyi kald\u0131r"},"buttonTitles":{"drawMarkerButton":"\xC7izim \u0130\u015Faret\xE7isi","drawPolyButton":"\xC7okgenler \xE7iz","drawLineButton":"\xC7oklu \xE7izgi \xE7iz","drawCircleButton":"\xC7ember \xE7iz","drawRectButton":"Dikd\xF6rtgen \xE7iz","editButton":"Katmanlar\u0131 d\xFCzenle","dragButton":"Katmanlar\u0131 s\xFCr\xFCkle","cutButton":"Katmanlar\u0131 kes","deleteButton":"Katmanlar\u0131 kald\u0131r","drawCircleMarkerButton":"Daire i\u015Faret\xE7isi \xE7iz","snappingButton":"S\xFCr\xFCklenen i\u015Faret\xE7iyi di\u011Fer katmanlara ve k\xF6\u015Felere yap\u0131\u015Ft\u0131r","pinningButton":"Payla\u015F\u0131lan k\xF6\u015Feleri birbirine sabitle"}}'),cz:JSON.parse('{"tooltips":{"placeMarker":"Kliknut\xEDm vytvo\u0159\xEDte zna\u010Dku","firstVertex":"Kliknut\xEDm vytvo\u0159\xEDte prvn\xED objekt","continueLine":"Kliknut\xEDm pokra\u010Dujte v kreslen\xED","finishLine":"Kliknut\xED na libovolnou existuj\xEDc\xED zna\u010Dku pro dokon\u010Den\xED","finishPoly":"Vyberte prvn\xED bod pro dokon\u010Den\xED","finishRect":"Klikn\u011Bte pro dokon\u010Den\xED","startCircle":"Kliknut\xEDm p\u0159idejte st\u0159ed kruhu","finishCircle":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0437\u0430\u0434\u0430\u0442\u044C \u0440\u0430\u0434\u0438\u0443\u0441","placeCircleMarker":"Kliknut\xEDm nastavte polom\u011Br"},"actions":{"finish":"Dokon\u010Dit","cancel":"Zru\u0161it","removeLastVertex":"Zru\u0161it posledn\xED akci"},"buttonTitles":{"drawMarkerButton":"P\u0159idat zna\u010Dku","drawPolyButton":"Nakreslit polygon","drawLineButton":"Nakreslit k\u0159ivku","drawCircleButton":"Nakreslit kruh","drawRectButton":"Nakreslit obd\xE9ln\xEDk","editButton":"Upravit vrstvu","dragButton":"P\u0159eneste vrstvu","cutButton":"Vyjmout vrstvu","deleteButton":"Smazat vrstvu","drawCircleMarkerButton":"P\u0159idat kruhovou zna\u010Dku","snappingButton":"Nav\xE1zat ta\u017Enou zna\u010Dku k dal\u0161\xEDm vrstv\xE1m a vrchol\u016Fm","pinningButton":"Spojit spole\u010Dn\xE9 body dohromady"}}'),ja:JSON.parse('{"tooltips":{"placeMarker":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u30DE\u30FC\u30AB\u30FC\u3092\u914D\u7F6E","firstVertex":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u6700\u521D\u306E\u9802\u70B9\u3092\u914D\u7F6E","continueLine":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u63CF\u753B\u3092\u7D9A\u3051\u308B","finishLine":"\u4EFB\u610F\u306E\u30DE\u30FC\u30AB\u30FC\u3092\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u7D42\u4E86","finishPoly":"\u6700\u521D\u306E\u30DE\u30FC\u30AB\u30FC\u3092\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u7D42\u4E86","finishRect":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u7D42\u4E86","startCircle":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u5186\u306E\u4E2D\u5FC3\u3092\u914D\u7F6E","finishCircle":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u5186\u306E\u63CF\u753B\u3092\u7D42\u4E86","placeCircleMarker":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u5186\u30DE\u30FC\u30AB\u30FC\u3092\u914D\u7F6E","placeText":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u30C6\u30AD\u30B9\u30C8\u3092\u914D\u7F6E"},"actions":{"finish":"\u7D42\u4E86","cancel":"\u30AD\u30E3\u30F3\u30BB\u30EB","removeLastVertex":"\u6700\u5F8C\u306E\u9802\u70B9\u3092\u524A\u9664"},"buttonTitles":{"drawMarkerButton":"\u30DE\u30FC\u30AB\u30FC\u3092\u63CF\u753B","drawPolyButton":"\u30DD\u30EA\u30B4\u30F3\u3092\u63CF\u753B","drawLineButton":"\u6298\u308C\u7DDA\u3092\u63CF\u753B","drawCircleButton":"\u5186\u3092\u63CF\u753B","drawRectButton":"\u77E9\u5F62\u3092\u63CF\u753B","editButton":"\u30EC\u30A4\u30E4\u30FC\u3092\u7DE8\u96C6","dragButton":"\u30EC\u30A4\u30E4\u30FC\u3092\u30C9\u30E9\u30C3\u30B0","cutButton":"\u30EC\u30A4\u30E4\u30FC\u3092\u5207\u308A\u53D6\u308A","deleteButton":"\u30EC\u30A4\u30E4\u30FC\u3092\u524A\u9664","drawCircleMarkerButton":"\u5186\u30DE\u30FC\u30AB\u30FC\u3092\u63CF\u753B","snappingButton":"\u30C9\u30E9\u30C3\u30B0\u3057\u305F\u30DE\u30FC\u30AB\u30FC\u3092\u4ED6\u306E\u30EC\u30A4\u30E4\u30FC\u3084\u9802\u70B9\u306B\u30B9\u30CA\u30C3\u30D7\u3059\u308B","pinningButton":"\u5171\u6709\u3059\u308B\u9802\u70B9\u3092\u540C\u6642\u306B\u52D5\u304B\u3059","rotateButton":"\u30EC\u30A4\u30E4\u30FC\u3092\u56DE\u8EE2","drawTextButton":"\u30C6\u30AD\u30B9\u30C8\u3092\u63CF\u753B"}}'),fi:JSON.parse('{"tooltips":{"placeMarker":"Klikkaa asettaaksesi merkin","firstVertex":"Klikkaa asettaakseni ensimm\xE4isen osuuden","continueLine":"Klikkaa jatkaaksesi piirt\xE4mist\xE4","finishLine":"Klikkaa olemassa olevaa merkki\xE4 lopettaaksesi","finishPoly":"Klikkaa ensimm\xE4ist\xE4 merkki\xE4 lopettaaksesi","finishRect":"Klikkaa lopettaaksesi","startCircle":"Klikkaa asettaaksesi ympyr\xE4n keskipisteen","finishCircle":"Klikkaa lopettaaksesi ympyr\xE4n","placeCircleMarker":"Klikkaa asettaaksesi ympyr\xE4merkin","placeText":"Klikkaa asettaaksesi tekstin"},"actions":{"finish":"Valmis","cancel":"Peruuta","removeLastVertex":"Poista viimeinen osuus"},"buttonTitles":{"drawMarkerButton":"Piirr\xE4 merkkej\xE4","drawPolyButton":"Piirr\xE4 monikulmioita","drawLineButton":"Piirr\xE4 viivoja","drawCircleButton":"Piirr\xE4 ympyr\xE4","drawRectButton":"Piirr\xE4 neliskulmioita","editButton":"Muokkaa","dragButton":"Siirr\xE4","cutButton":"Leikkaa","deleteButton":"Poista","drawCircleMarkerButton":"Piirr\xE4 ympyr\xE4merkki","snappingButton":"Kiinnit\xE4 siirrett\xE4v\xE4 merkki toisiin muotoihin","pinningButton":"Kiinnit\xE4 jaetut muodot yhteen","rotateButton":"K\xE4\xE4nn\xE4","drawTextButton":"Piirr\xE4 teksti\xE4"}}'),ko:JSON.parse('{"tooltips":{"placeMarker":"\uB9C8\uCEE4 \uC704\uCE58\uB97C \uD074\uB9AD\uD558\uC138\uC694","firstVertex":"\uCCAB\uBC88\uC9F8 \uAF2D\uC9C0\uC810 \uC704\uCE58\uC744 \uD074\uB9AD\uD558\uC138\uC694","continueLine":"\uACC4\uC18D \uADF8\uB9AC\uB824\uBA74 \uD074\uB9AD\uD558\uC138\uC694","finishLine":"\uB05D\uB0B4\uB824\uBA74 \uAE30\uC874 \uB9C8\uCEE4\uB97C \uD074\uB9AD\uD558\uC138\uC694","finishPoly":"\uB05D\uB0B4\uB824\uBA74 \uCC98\uC74C \uB9C8\uCEE4\uB97C \uD074\uB9AD\uD558\uC138\uC694","finishRect":"\uB05D\uB0B4\uB824\uBA74 \uD074\uB9AD\uD558\uC138\uC694","startCircle":"\uC6D0\uC758 \uC911\uC2EC\uC774 \uB420 \uC704\uCE58\uB97C \uD074\uB9AD\uD558\uC138\uC694","finishCircle":"\uC6D0\uC744 \uB05D\uB0B4\uB824\uBA74 \uD074\uB9AD\uD558\uC138\uC694","placeCircleMarker":"\uC6D0 \uB9C8\uCEE4 \uC704\uCE58\uB97C \uD074\uB9AD\uD558\uC138\uC694","placeText":"\uD14D\uC2A4\uD2B8 \uC704\uCE58\uB97C \uD074\uB9AD\uD558\uC138\uC694"},"actions":{"finish":"\uB05D\uB0B4\uAE30","cancel":"\uCDE8\uC18C","removeLastVertex":"\uB9C8\uC9C0\uB9C9 \uAF2D\uC9C0\uC810 \uC81C\uAC70"},"buttonTitles":{"drawMarkerButton":"\uB9C8\uCEE4 \uADF8\uB9AC\uAE30","drawPolyButton":"\uB2E4\uAC01\uD615 \uADF8\uB9AC\uAE30","drawLineButton":"\uB2E4\uAC01\uC120 \uADF8\uB9AC\uAE30","drawCircleButton":"\uC6D0 \uADF8\uB9AC\uAE30","drawRectButton":"\uC9C1\uC0AC\uAC01\uD615 \uADF8\uB9AC\uAE30","editButton":"\uB808\uC774\uC5B4 \uD3B8\uC9D1\uD558\uAE30","dragButton":"\uB808\uC774\uC5B4 \uB04C\uAE30","cutButton":"\uB808\uC774\uC5B4 \uC790\uB974\uAE30","deleteButton":"\uB808\uC774\uC5B4 \uC81C\uAC70\uD558\uAE30","drawCircleMarkerButton":"\uC6D0 \uB9C8\uCEE4 \uADF8\uB9AC\uAE30","snappingButton":"\uC7A1\uC544\uB048 \uB9C8\uCEE4\uB97C \uB2E4\uB978 \uB808\uC774\uC5B4 \uBC0F \uAF2D\uC9C0\uC810\uC5D0 \uB4E4\uB7EC\uBD99\uAC8C \uD558\uAE30","pinningButton":"\uACF5\uC720 \uAF2D\uC9C0\uC810\uC744 \uD568\uAED8 \uCC0D\uAE30","rotateButton":"\uB808\uC774\uC5B4 \uD68C\uC804\uD558\uAE30","drawTextButton":"\uD14D\uC2A4\uD2B8 \uADF8\uB9AC\uAE30"}}')};function q(h,p){var _=Object.keys(h);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(h);p&&(E=E.filter(function(I){return Object.getOwnPropertyDescriptor(h,I).enumerable})),_.push.apply(_,E)}return _}function H(h){for(var p=1;p<arguments.length;p++){var _=arguments[p]!=null?arguments[p]:{};p%2?q(Object(_),!0).forEach(function(E){K(h,E,_[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(_)):q(Object(_)).forEach(function(E){Object.defineProperty(h,E,Object.getOwnPropertyDescriptor(_,E))})}return h}function K(h,p,_){return p in h?Object.defineProperty(h,p,{value:_,enumerable:!0,configurable:!0,writable:!0}):h[p]=_,h}let et={_globalEditModeEnabled:!1,enableGlobalEditMode:function(h){var p=H({},h);this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(function(_){_.pm.enable(p)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayers={},this.map.on("layeradd",this._layerAdded,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode:function(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(function(h){h.pm.disable()}),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled:function(){return this.globalEditModeEnabled()},globalEditModeEnabled:function(){return this._globalEditModeEnabled},toggleGlobalEditMode:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.globalOptions;this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(h)},handleLayerAdditionInGlobalEditMode:function(){var h=this._addedLayers;for(var p in this._addedLayers={},h){var _=h[p];this._isRelevantForEdit(_)&&this.globalEditModeEnabled()&&_.pm.enable(H({},this.globalOptions))}},_layerAdded:function(h){var p=h.layer;this._addedLayers[L.stamp(p)]=p},_isRelevantForEdit:function(h){return h.pm&&!(h instanceof L.LayerGroup)&&(!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1)&&!h._pmTempLayer&&h.pm.options.allowEditing}},X={_globalDragModeEnabled:!1,enableGlobalDragMode:function(){var h=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},h.forEach(function(p){p.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode:function(){var h=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,h.forEach(function(p){p.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled:function(){return!!this._globalDragModeEnabled},toggleGlobalDragMode:function(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode:function(){var h=this._addedLayersDrag;for(var p in this._addedLayersDrag={},h){var _=h[p];this._isRelevantForDrag(_)&&this.globalDragModeEnabled()&&_.pm.enableLayerDrag()}},_layerAddedDrag:function(h){var p=h.layer;this._addedLayersDrag[L.stamp(p)]=p},_isRelevantForDrag:function(h){return h.pm&&!(h instanceof L.LayerGroup)&&(!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1)&&!h._pmTempLayer&&h.pm.options.draggable}},lt={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode:function(){var h=this;this._globalRemovalModeEnabled=!0,this.map.eachLayer(function(p){h._isRelevantForRemoval(p)&&(p.pm.disable(),p.on("click",h.removeLayer,h))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.reinitGlobalRemovalMode,100,this)),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode:function(){var h=this;this._globalRemovalModeEnabled=!1,this.map.eachLayer(function(p){p.off("click",h.removeLayer,h)}),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled:function(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled:function(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode:function(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},reinitGlobalRemovalMode:function(h){var p=h.layer;this._isRelevantForRemoval(p)&&this.globalRemovalModeEnabled()&&(this.disableGlobalRemovalMode(),this.enableGlobalRemovalMode())},removeLayer:function(h){var p=h.target;this._isRelevantForRemoval(p)&&!p.pm.dragging()&&(p.removeFrom(this.map.pm._getContainingLayer()),p.remove(),p instanceof L.LayerGroup?(this._fireRemoveLayerGroup(p),this._fireRemoveLayerGroup(this.map,p)):(p.pm._fireRemove(p),p.pm._fireRemove(this.map,p)))},_isRelevantForRemoval:function(h){return h.pm&&!(h instanceof L.LayerGroup)&&(!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1)&&!h._pmTempLayer&&h.pm.options.allowRemoval}},gt={_globalRotateModeEnabled:!1,enableGlobalRotateMode:function(){var h=this;this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(function(p){return p instanceof L.Polyline}).forEach(function(p){h._isRelevantForRotate(p)&&p.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this._reinitGlobalRotateMode,100,this)),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode:function(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(function(h){return h instanceof L.Polyline}).forEach(function(h){h.pm.disableRotate()}),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled:function(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode:function(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_reinitGlobalRotateMode:function(h){var p=h.layer;this._isRelevantForRotate(p)&&this.globalRotateModeEnabled()&&(this.disableGlobalRotateMode(),this.enableGlobalRotateMode())},_isRelevantForRotate:function(h){return h.pm&&!(h instanceof L.LayerGroup)&&(!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1)&&!h._pmTempLayer&&h.pm.options.allowRotation}};function Et(h,p){var _=Object.keys(h);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(h);p&&(E=E.filter(function(I){return Object.getOwnPropertyDescriptor(h,I).enumerable})),_.push.apply(_,E)}return _}function Q(h){for(var p=1;p<arguments.length;p++){var _=arguments[p]!=null?arguments[p]:{};p%2?Et(Object(_),!0).forEach(function(E){kt(h,E,_[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(_)):Et(Object(_)).forEach(function(E){Object.defineProperty(h,E,Object.getOwnPropertyDescriptor(_,E))})}return h}function kt(h,p,_){return p in h?Object.defineProperty(h,p,{value:_,enumerable:!0,configurable:!0,writable:!0}):h[p]=_,h}var ct={_fireDrawStart:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Draw",p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},h,p)},_fireDrawEnd:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Draw",p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._map,"pm:drawend",{shape:this._shape},h,p)},_fireCreate:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Draw",_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._map,"pm:create",{shape:this._shape,marker:h,layer:h},p,_)},_fireCenterPlaced:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Draw",p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_=h==="Draw"?this._layer:void 0,E=h!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:_,layer:E,latlng:this._layer.getLatLng()},h,p)},_fireCut:function(h,p,_){var E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Draw",I=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(h,"pm:cut",{shape:this._shape,layer:p,originalLayer:_},E,I)},_fireEdit:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._layer,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(h,"pm:edit",{layer:this._layer,shape:this.getShape()},p,_)},_fireEnable:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},h,p)},_fireDisable:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},h,p)},_fireUpdate:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},h,p)},_fireMarkerDragStart:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:h,shape:this.getShape(),indexPath:p},_,E)},_fireMarkerDrag:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:h,shape:this.getShape(),indexPath:p},_,E)},_fireMarkerDragEnd:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Edit",I=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:h,shape:this.getShape(),indexPath:p,intersectionReset:_},E,I)},_fireDragStart:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},h,p)},_fireDrag:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._layer,"pm:drag",Q(Q({},h),{},{shape:this.getShape()}),p,_)},_fireDragEnd:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},h,p)},_fireDragEnable:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},h,p)},_fireDragDisable:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},h,p)},_fireRemove:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h,_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(h,"pm:remove",{layer:p,shape:this.getShape()},_,E)},_fireVertexAdded:function(h,p,_){var E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Edit",I=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:h,indexPath:p,latlng:_,shape:this.getShape()},E,I)},_fireVertexRemoved:function(h,p){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:h,indexPath:p,shape:this.getShape()},_,E)},_fireVertexClick:function(h,p){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:h,indexPath:p,shape:this.getShape()},_,E)},_fireIntersect:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._layer,"pm:intersect",{layer:this._layer,intersection:h,shape:this.getShape()},p,_)},_fireLayerReset:function(h,p){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:h,indexPath:p,shape:this.getShape()},_,E)},_fireChange:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:h,shape:this.getShape()},p,_)},_fireTextChange:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:h,shape:this.getShape()},p,_)},_fireTextFocus:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},h,p)},_fireTextBlur:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},h,p)},_fireSnapDrag:function(h,p){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Snapping",E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(h,"pm:snapdrag",p,_,E)},_fireSnap:function(h,p){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Snapping",E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(h,"pm:snap",p,_,E)},_fireUnsnap:function(h,p){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Snapping",E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(h,"pm:unsnap",p,_,E)},_fireRotationEnable:function(h,p){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Rotation",E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(h,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},_,E)},_fireRotationDisable:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Rotation",_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(h,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},p,_)},_fireRotationStart:function(h,p){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Rotation",E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(h,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:p},_,E)},_fireRotation:function(h,p,_){var E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:this._rotationLayer,I=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"Rotation",V=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};this.__fire(h,"pm:rotate",{layer:E,helpLayer:this._layer,startAngle:this._startAngle,angle:E.pm.getAngle(),angleDiff:p,oldLatLngs:_,newLatLngs:E.getLatLngs()},I,V)},_fireRotationEnd:function(h,p,_){var E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Rotation",I=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(h,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:p,angle:this._rotationLayer.pm.getAngle(),originLatLngs:_,newLatLngs:this._rotationLayer.getLatLngs()},E,I)},_fireActionClick:function(h,p,_){var E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Toolbar",I=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(this._map,"pm:actionclick",{text:h.text,action:h,btnName:p,button:_},E,I)},_fireButtonClick:function(h,p){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Toolbar",E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._map,"pm:buttonclick",{btnName:h,button:p},_,E)},_fireLangChange:function(h,p,_,E){var I=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"Global",V=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};this.__fire(this.map,"pm:langchange",{oldLang:h,activeLang:p,fallback:_,translations:E},I,V)},_fireGlobalDragModeToggled:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Global",_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:h,map:this.map},p,_)},_fireGlobalEditModeToggled:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Global",_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:h,map:this.map},p,_)},_fireGlobalRemovalModeToggled:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Global",_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:h,map:this.map},p,_)},_fireGlobalCutModeToggled:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Global",p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},h,p)},_fireGlobalDrawModeToggled:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Global",p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},h,p)},_fireGlobalRotateModeToggled:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Global",p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},h,p)},_fireRemoveLayerGroup:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h,_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(h,"pm:remove",{layer:p,shape:void 0},_,E)},_fireKeyeventEvent:function(h,p,_){var E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Global",I=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(this.map,"pm:keyevent",{event:h,eventType:p,focusOn:_},E,I)},__fire:function(h,p,_,E){var I=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};_=m()(_,I,{source:E}),L.PM.Utils._fireEvent(h,p,_)}};let bt=ct,Mt={_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener:function(h){this.map=h,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this)},_onKeyListener:function(h){var p="document";this.map.getContainer().contains(h.target)&&(p="map");var _={event:h,eventType:h.type,focusOn:p};this._lastEvents[h.type]=_,this._lastEvents.current=_,this.map.pm._fireKeyeventEvent(h,h.type,p)},_onBlur:function(h){h.altKey=!1;var p={event:h,eventType:h.type,focusOn:"document"};this._lastEvents[h.type]=p,this._lastEvents.current=p},getLastKeyEvent:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"current";return this._lastEvents[h]},isShiftKeyPressed:function(){var h;return(h=this._lastEvents.current)===null||h===void 0?void 0:h.event.shiftKey},isAltKeyPressed:function(){var h;return(h=this._lastEvents.current)===null||h===void 0?void 0:h.event.altKey},isCtrlKeyPressed:function(){var h;return(h=this._lastEvents.current)===null||h===void 0?void 0:h.event.ctrlKey},isMetaKeyPressed:function(){var h;return(h=this._lastEvents.current)===null||h===void 0?void 0:h.event.metaKey},getPressedKey:function(){var h;return(h=this._lastEvents.current)===null||h===void 0?void 0:h.event.key}};var Xt=c(7361),ft=c.n(Xt),Ct=c(8721),st=c.n(Ct);function Rt(h){var p=L.PM.activeLang;return st()(A,p)||(p="en"),ft()(A[p],h)}function Ot(h){for(var p=0;p<h.length;p+=1){var _=h[p];if(Array.isArray(_)){if(Ot(_))return!0}else if(_!=null&&_!=="")return!0}return!1}function Qt(h){return h.reduce(function(p,_){if(_.length!==0){var E=Array.isArray(_)?Qt(_):_;Array.isArray(E)?E.length!==0&&p.push(E):p.push(E)}return p},[])}function Tt(h,p,_){for(var E,I,V,nt=6378137,it=63567523142e-4,rt=.0033528106647474805,ot=h.lng,dt=h.lat,Pt=_,yt=Math.PI,At=p*yt/180,Gt=Math.sin(At),te=Math.cos(At),Dt=(1-rt)*Math.tan(dt*yt/180),Rn=1/Math.sqrt(1+Dt*Dt),Tn=Dt*Rn,Ie=Math.atan2(Dt,te),Ar=Rn*Gt,Si=1-Ar*Ar,jn=Si*(nt*nt-it*it)/(it*it),no=1+jn/16384*(4096+jn*(jn*(320-175*jn)-768)),lr=jn/1024*(256+jn*(jn*(74-47*jn)-128)),ki=Pt/(it*no),Gi=2*Math.PI;Math.abs(ki-Gi)>1e-12;)E=Math.cos(2*Ie+ki),Gi=ki,ki=Pt/(it*no)+lr*(I=Math.sin(ki))*(E+lr/4*((V=Math.cos(ki))*(2*E*E-1)-lr/6*E*(4*I*I-3)*(4*E*E-3)));var Eo=Tn*I-Rn*V*te,Zn=Math.atan2(Tn*V+Rn*I*te,(1-rt)*Math.sqrt(Ar*Ar+Eo*Eo)),Yt=rt/16*Si*(4+rt*(4-3*Si)),aa=ot+180*(Math.atan2(I*Gt,Rn*V-Tn*I*te)-(1-Yt)*rt*Ar*(ki+Yt*I*(E+Yt*V*(2*E*E-1))))/yt,Qo=180*Zn/yt;return L.latLng(aa,Qo)}function ce(h,p,_,E){for(var I,V,nt=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],it=[],rt=0;rt<_;rt+=1){if(nt)I=Tt(h,360*rt/_+E,p),V=L.latLng(I.lng,I.lat);else{var ot=h.lat+Math.cos(2*rt*Math.PI/_)*p,dt=h.lng+Math.sin(2*rt*Math.PI/_)*p;V=L.latLng(ot,dt)}it.push(V)}return it}function Re(h,p,_,E){var I=function(V,nt,it){var rt=V.latLngToContainerPoint(nt),ot=V.latLngToContainerPoint(it),dt=180*Math.atan2(ot.y-rt.y,ot.x-rt.x)/Math.PI+90;return dt+(dt<0?360:0)}(h,p,_);return function(V,nt,it){nt=(nt+360)%360;var rt=Math.PI/180,ot=180/Math.PI,dt=6378137,Pt=V.lng*rt,yt=V.lat*rt,At=nt*rt,Gt=Math.sin(yt),te=Math.cos(yt),Dt=Math.cos(it/dt),Rn=Math.sin(it/dt),Tn=Math.asin(Gt*Dt+te*Rn*Math.cos(At)),Ie=Pt+Math.atan2(Math.sin(At)*Rn*te,Dt-Gt*Math.sin(Tn));return Ie=(Ie*=ot)>180?Ie-360:Ie<-180?Ie+360:Ie,L.latLng([Tn*ot,Ie])}(p,I,E)}function Cn(h,p){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"asc";if(!p||Object.keys(p).length===0)return function(rt,ot){return rt-ot};for(var E,I=Object.keys(p),V=I.length-1,nt={};V>=0;)E=I[V],nt[E.toLowerCase()]=p[E],V-=1;function it(rt){return rt instanceof L.Marker?"Marker":rt instanceof L.Circle?"Circle":rt instanceof L.CircleMarker?"CircleMarker":rt instanceof L.Rectangle?"Rectangle":rt instanceof L.Polygon?"Polygon":rt instanceof L.Polyline?"Line":void 0}return function(rt,ot){var dt,Pt;if(h==="instanceofShape"){if(dt=it(rt.layer).toLowerCase(),Pt=it(ot.layer).toLowerCase(),!dt||!Pt)return 0}else{if(!rt.hasOwnProperty(h)||!ot.hasOwnProperty(h))return 0;dt=rt[h].toLowerCase(),Pt=ot[h].toLowerCase()}var yt=dt in nt?nt[dt]:Number.MAX_SAFE_INTEGER,At=Pt in nt?nt[Pt]:Number.MAX_SAFE_INTEGER,Gt=0;return yt<At?Gt=-1:yt>At&&(Gt=1),_==="desc"?-1*Gt:Gt}}function fe(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h.getLatLngs();return h instanceof L.Polygon?L.polygon(p).getLatLngs():L.polyline(p).getLatLngs()}function ke(h,p){var _,E;if((_=p.options.crs)!==null&&_!==void 0&&(E=_.projection)!==null&&E!==void 0&&E.MAX_LATITUDE){var I,V,nt=(I=p.options.crs)===null||I===void 0||(V=I.projection)===null||V===void 0?void 0:V.MAX_LATITUDE;h.lat=Math.max(Math.min(nt,h.lat),-nt)}return h}function Bt(h){return h.options.renderer||h._map&&(h._map._getPaneRenderer(h.options.pane)||h._map.options.renderer||h._map._renderer)||h._renderer}let hn=L.Class.extend({includes:[et,X,lt,gt,bt],initialize:function(h){this.map=h,this.Draw=new L.PM.Draw(h),this.Toolbar=new L.PM.Toolbar(h),this.Keyboard=Mt,this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(h)},setLang:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"en",p=arguments.length>1?arguments[1]:void 0,_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"en",E=L.PM.activeLang;p&&(A[h]=m()(A[_],p)),L.PM.activeLang=h,this.map.pm.Toolbar.reinit(),this._fireLangChange(E,h,_,A[h])},addControls:function(h){this.Toolbar.addControls(h)},removeControls:function(){this.Toolbar.removeControls()},toggleControls:function(){this.Toolbar.toggleControls()},controlsVisible:function(){return this.Toolbar.isVisible},enableDraw:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Polygon",p=arguments.length>1?arguments[1]:void 0;h==="Poly"&&(h="Polygon"),this.Draw.enable(h,p)},disableDraw:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Polygon";h==="Poly"&&(h="Polygon"),this.Draw.disable(h)},setPathOptions:function(h){var p=this,_=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},E=_.ignoreShapes||[],I=_.merge||!1;this.map.pm.Draw.shapes.forEach(function(V){E.indexOf(V)===-1&&p.map.pm.Draw[V].setPathOptions(h,I)})},getGlobalOptions:function(){return this.globalOptions},setGlobalOptions:function(h){var p=this,_=m()(this.globalOptions,h),E=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.editable!=!!_.editable&&(this.map.pm.Draw.CircleMarker.disable(),E=!0),this.map.pm.Draw.shapes.forEach(function(I){p.map.pm.Draw[I].setOptions(_)}),E&&this.map.pm.Draw.CircleMarker.enable(),L.PM.Utils.findLayers(this.map).forEach(function(I){I.pm.setOptions(_)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=_,this.applyGlobalOptions()},applyGlobalOptions:function(){L.PM.Utils.findLayers(this.map).forEach(function(h){h.pm.enabled()&&h.pm.applyOptions()})},globalDrawModeEnabled:function(){return!!this.Draw.getActiveShape()},globalCutModeEnabled:function(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode:function(h){return this.Draw.Cut.enable(h)},toggleGlobalCutMode:function(h){return this.Draw.Cut.toggle(h)},disableGlobalCutMode:function(){return this.Draw.Cut.disable()},getGeomanLayers:function(){var h=arguments.length>0&&arguments[0]!==void 0&&arguments[0],p=L.PM.Utils.findLayers(this.map);if(!h)return p;var _=L.featureGroup();return _._pmTempLayer=!0,p.forEach(function(E){_.addLayer(E)}),_},getGeomanDrawLayers:function(){var h=arguments.length>0&&arguments[0]!==void 0&&arguments[0],p=L.PM.Utils.findLayers(this.map).filter(function(E){return E._drawnByGeoman===!0});if(!h)return p;var _=L.featureGroup();return _._pmTempLayer=!0,p.forEach(function(E){_.addLayer(E)}),_},_getContainingLayer:function(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple:function(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents:function(h){this._touchEventCounter===0&&(L.DomEvent.on(h,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(h,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents:function(h){this._touchEventCounter===1&&(L.DomEvent.off(h,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(h,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove:function(h){Bt(this.map)._onMouseMove(this._createMouseEvent("mousemove",h))},_canvasTouchClick:function(h){var p="";h.type==="touchstart"||h.type==="pointerdown"?p="mousedown":h.type==="touchend"||h.type==="pointerup"?p="mouseup":h.type!=="touchcancel"&&h.type!=="pointercancel"||(p="mouseup"),p&&Bt(this.map)._onClick(this._createMouseEvent(p,h))},_createMouseEvent:function(h,p){var _,E=p.touches[0]||p.changedTouches[0];try{_=new MouseEvent(h,{bubbles:p.bubbles,cancelable:p.cancelable,view:p.view,detail:E.detail,screenX:E.screenX,screenY:E.screenY,clientX:E.clientX,clientY:E.clientY,ctrlKey:p.ctrlKey,altKey:p.altKey,shiftKey:p.shiftKey,metaKey:p.metaKey,button:p.button,relatedTarget:p.relatedTarget})}catch{(_=document.createEvent("MouseEvents")).initMouseEvent(h,p.bubbles,p.cancelable,p.view,E.detail,E.screenX,E.screenY,E.clientX,E.clientY,p.ctrlKey,p.altKey,p.shiftKey,p.metaKey,p.button,p.relatedTarget)}return _}}),Sn=L.Control.extend({includes:[bt],options:{position:"topleft",disableByOtherButtons:!0},initialize:function(h){this._button=L.Util.extend({},this.options,h)},onAdd:function(h){return this._map=h,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this.buttonsDomNode=this._makeButton(this._button),this._container.appendChild(this.buttonsDomNode),this._container},onRemove:function(){return this.buttonsDomNode.remove(),this._container},getText:function(){return this._button.text},getIconUrl:function(){return this._button.iconUrl},destroy:function(){this._button={},this._update()},toggle:function(h){return this._button.toggleStatus=typeof h=="boolean"?h:!this._button.toggleStatus,this._applyStyleClasses(),this._button.toggleStatus},toggled:function(){return this._button.toggleStatus},onCreate:function(){this.toggle(!1)},disable:function(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable:function(){this._button.disabled=!1,this._updateDisabled()},_triggerClick:function(h){h&&h.preventDefault(),this._button.disabled||(this._button.onClick(h,{button:this,event:h}),this._clicked(h),this._button.afterClick(h,{button:this,event:h}))},_makeButton:function(h){var p=this,_=this.options.position.indexOf("right")>-1?"pos-right":"",E=L.DomUtil.create("div","button-container  ".concat(_),this._container);h.title&&E.setAttribute("title",h.title);var I=L.DomUtil.create("a","leaflet-buttons-control-button",E);I.setAttribute("role","button"),I.setAttribute("tabindex","0"),I.href="#";var V=L.DomUtil.create("div","leaflet-pm-actions-container ".concat(_),E),nt=h.actions,it={cancel:{text:Rt("actions.cancel"),onClick:function(){this._triggerClick()}},finishMode:{text:Rt("actions.finish"),onClick:function(){this._triggerClick()}},removeLastVertex:{text:Rt("actions.removeLastVertex"),onClick:function(){this._map.pm.Draw[h.jsClass]._removeLastVertex()}},finish:{text:Rt("actions.finish"),onClick:function(ot){this._map.pm.Draw[h.jsClass]._finishShape(ot)}}};nt.forEach(function(ot){var dt,Pt=typeof ot=="string"?ot:ot.name;if(it[Pt])dt=it[Pt];else{if(!ot.text)return;dt=ot}var yt=L.DomUtil.create("a","leaflet-pm-action ".concat(_," action-").concat(Pt),V);yt.setAttribute("role","button"),yt.setAttribute("tabindex","0"),yt.href="#",yt.innerHTML=dt.text,L.DomEvent.disableClickPropagation(yt),L.DomEvent.on(yt,"click",L.DomEvent.stop),!h.disabled&&dt.onClick&&(L.DomEvent.addListener(yt,"click",function(At){At.preventDefault();var Gt="",te=p._map.pm.Toolbar.buttons;for(var Dt in te)if(te[Dt]._button===h){Gt=Dt;break}p._fireActionClick(dt,Gt,h)},p),L.DomEvent.addListener(yt,"click",dt.onClick,p))}),h.toggleStatus&&L.DomUtil.addClass(E,"active");var rt=L.DomUtil.create("div","control-icon",I);return h.iconUrl&&rt.setAttribute("src",h.iconUrl),h.className&&L.DomUtil.addClass(rt,h.className),L.DomEvent.disableClickPropagation(I),L.DomEvent.on(I,"click",L.DomEvent.stop),h.disabled||(L.DomEvent.addListener(I,"click",this._onBtnClick,this),L.DomEvent.addListener(I,"click",this._triggerClick,this)),h.disabled&&(L.DomUtil.addClass(I,"pm-disabled"),I.setAttribute("aria-disabled","true")),E},_applyStyleClasses:function(){this._container&&(this._button.toggleStatus&&this._button.cssToggle!==!1?(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")):(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")))},_onBtnClick:function(){this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);var h="",p=this._map.pm.Toolbar.buttons;for(var _ in p)if(p[_]._button===this._button){h=_;break}this._fireButtonClick(h,this._button)},_clicked:function(){this._button.doToggle&&this.toggle()},_updateDisabled:function(){if(this._container){var h="pm-disabled",p=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(p,h),p.setAttribute("aria-disabled","true"),L.DomEvent.off(p,"click",this._triggerClick,this),L.DomEvent.off(p,"click",this._onBtnClick,this)):(L.DomUtil.removeClass(p,h),p.setAttribute("aria-disabled","false"),L.DomEvent.on(p,"click",this._triggerClick,this),L.DomEvent.on(p,"click",this._onBtnClick,this))}}});function Hn(h,p){var _=Object.keys(h);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(h);p&&(E=E.filter(function(I){return Object.getOwnPropertyDescriptor(h,I).enumerable})),_.push.apply(_,E)}return _}function Me(h){for(var p=1;p<arguments.length;p++){var _=arguments[p]!=null?arguments[p]:{};p%2?Hn(Object(_),!0).forEach(function(E){ue(h,E,_[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(_)):Hn(Object(_)).forEach(function(E){Object.defineProperty(h,E,Object.getOwnPropertyDescriptor(_,E))})}return h}function ue(h,p,_){return p in h?Object.defineProperty(h,p,{value:_,enumerable:!0,configurable:!0,writable:!0}):h[p]=_,h}function Ht(h){return Ht=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},Ht(h)}L.Control.PMButton=Sn;let ht=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize:function(h){this.init(h)},reinit:function(){var h=this.isVisible;this.removeControls(),this._defineButtons(),h&&this.addControls()},init:function(h){this.map=h,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer:function(h){var p="".concat(h,"Container");return this[p]||(this[p]=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-".concat(h," leaflet-bar leaflet-control"))),this[p]},getButtons:function(){return this.buttons},addControls:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options;typeof h.editPolygon<"u"&&(h.editMode=h.editPolygon),typeof h.deleteLayer<"u"&&(h.removalMode=h.deleteLayer),L.Util.setOptions(this,h),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle:function(){var h=this.getButtons(),p={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(var _ in h){var E=h[_];L.Util.setOptions(E,{className:p.geomanIcons[_]})}},removeControls:function(){var h=this.getButtons();for(var p in h)h[p].remove();this.isVisible=!1},toggleControls:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options;this.isVisible?this.removeControls():this.addControls(h)},_addButton:function(h,p){return this.buttons[h]=p,this.options[h]=this.options[h]||!1,this.buttons[h]},triggerClickOnToggledButtons:function(h){for(var p in this.buttons){var _=this.buttons[p];_._button.disableByOtherButtons&&_!==h&&_.toggled()&&_._triggerClick()}},toggleButton:function(h,p){var _=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];return h==="editPolygon"&&(h="editMode"),h==="deleteLayer"&&(h="removalMode"),_&&this.triggerClickOnToggledButtons(this.buttons[h]),!!this.buttons[h]&&this.buttons[h].toggle(p)},_defineButtons:function(){var h=this,p={className:"control-icon leaflet-pm-icon-marker",title:Rt("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:function(){},afterClick:function(At,Gt){h.map.pm.Draw[Gt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},_={title:Rt("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:function(){},afterClick:function(At,Gt){h.map.pm.Draw[Gt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},E={className:"control-icon leaflet-pm-icon-polyline",title:Rt("buttonTitles.drawLineButton"),jsClass:"Line",onClick:function(){},afterClick:function(At,Gt){h.map.pm.Draw[Gt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},I={title:Rt("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:function(){},afterClick:function(At,Gt){h.map.pm.Draw[Gt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},V={title:Rt("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:function(){},afterClick:function(At,Gt){h.map.pm.Draw[Gt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},nt={title:Rt("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:function(){},afterClick:function(At,Gt){h.map.pm.Draw[Gt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},it={title:Rt("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:function(){},afterClick:function(){h.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},rt={title:Rt("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:function(){},afterClick:function(){h.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},ot={title:Rt("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:function(){},afterClick:function(At,Gt){h.map.pm.Draw[Gt.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},dt={title:Rt("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:function(){},afterClick:function(){h.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},Pt={title:Rt("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:function(){},afterClick:function(){h.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},yt={className:"control-icon leaflet-pm-icon-text",title:Rt("buttonTitles.drawTextButton"),jsClass:"Text",onClick:function(){},afterClick:function(At,Gt){h.map.pm.Draw[Gt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(p)),this._addButton("drawPolyline",new L.Control.PMButton(E)),this._addButton("drawRectangle",new L.Control.PMButton(nt)),this._addButton("drawPolygon",new L.Control.PMButton(_)),this._addButton("drawCircle",new L.Control.PMButton(I)),this._addButton("drawCircleMarker",new L.Control.PMButton(V)),this._addButton("drawText",new L.Control.PMButton(yt)),this._addButton("editMode",new L.Control.PMButton(it)),this._addButton("dragMode",new L.Control.PMButton(rt)),this._addButton("cutPolygon",new L.Control.PMButton(ot)),this._addButton("removalMode",new L.Control.PMButton(dt)),this._addButton("rotateMode",new L.Control.PMButton(Pt))},_showHideButtons:function(){if(this.isVisible){this.removeControls(),this.isVisible=!0;var h=this.getButtons(),p=[];for(var _ in this.options.drawControls===!1&&(p=p.concat(Object.keys(h).filter(function(I){return!h[I]._button.tool}))),this.options.editControls===!1&&(p=p.concat(Object.keys(h).filter(function(I){return h[I]._button.tool==="edit"}))),this.options.optionsControls===!1&&(p=p.concat(Object.keys(h).filter(function(I){return h[I]._button.tool==="options"}))),this.options.customControls===!1&&(p=p.concat(Object.keys(h).filter(function(I){return h[I]._button.tool==="custom"}))),h)if(this.options[_]&&p.indexOf(_)===-1){var E=h[_]._button.tool;E||(E="draw"),h[_].setPosition(this._getBtnPosition(E)),h[_].addTo(this.map)}}},_getBtnPosition:function(h){return this.options.positions&&this.options.positions[h]?this.options.positions[h]:this.options.position},setBlockPosition:function(h,p){this.options.positions[h]=p,this._showHideButtons(),this.changeControlOrder()},getBlockPositions:function(){return this.options.positions},copyDrawControl:function(h,p){if(!p)throw new TypeError("Button has no name");Ht(p)!=="object"&&(p={name:p});var _=this._btnNameMapping(h);if(!p.name)throw new TypeError("Button has no name");if(this.buttons[p.name])throw new TypeError("Button with this name already exists");var E=this.map.pm.Draw.createNewDrawInstance(p.name,_);return p=Me(Me({},this.buttons[_]._button),p),{drawInstance:E,control:this.createCustomControl(p)}},createCustomControl:function(h){var p,_;if(!h.name)throw new TypeError("Button has no name");if(this.buttons[h.name])throw new TypeError("Button with this name already exists");h.onClick||(h.onClick=function(){}),h.afterClick||(h.afterClick=function(){}),h.toggle!==!1&&(h.toggle=!0),h.block&&(h.block=h.block.toLowerCase()),h.block&&h.block!=="draw"||(h.block=""),h.className?h.className.indexOf("control-icon")===-1&&(h.className="control-icon ".concat(h.className)):h.className="control-icon";var E={tool:h.block,className:h.className,title:h.title||"",jsClass:h.name,onClick:h.onClick,afterClick:h.afterClick,doToggle:h.toggle,toggleStatus:!1,disableOtherButtons:(p=h.disableOtherButtons)===null||p===void 0||p,disableByOtherButtons:(_=h.disableByOtherButtons)===null||_===void 0||_,cssToggle:h.toggle,position:this.options.position,actions:h.actions||[],disabled:!!h.disabled};this.options[h.name]!==!1&&(this.options[h.name]=!0);var I=this._addButton(h.name,new L.Control.PMButton(E));return this.changeControlOrder(),I},changeControlOrder:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],p=this._shapeMapping(),_=[];h.forEach(function(ot){p[ot]?_.push(p[ot]):_.push(ot)});var E=this.getButtons(),I={};_.forEach(function(ot){E[ot]&&(I[ot]=E[ot])});var V=Object.keys(E).filter(function(ot){return!E[ot]._button.tool});V.forEach(function(ot){_.indexOf(ot)===-1&&(I[ot]=E[ot])});var nt=Object.keys(E).filter(function(ot){return E[ot]._button.tool==="edit"});nt.forEach(function(ot){_.indexOf(ot)===-1&&(I[ot]=E[ot])});var it=Object.keys(E).filter(function(ot){return E[ot]._button.tool==="options"});it.forEach(function(ot){_.indexOf(ot)===-1&&(I[ot]=E[ot])});var rt=Object.keys(E).filter(function(ot){return E[ot]._button.tool==="custom"});rt.forEach(function(ot){_.indexOf(ot)===-1&&(I[ot]=E[ot])}),Object.keys(E).forEach(function(ot){_.indexOf(ot)===-1&&(I[ot]=E[ot])}),this.map.pm.Toolbar.buttons=I,this._showHideButtons()},getControlOrder:function(){var h=this.getButtons(),p=[];for(var _ in h)p.push(_);return p},changeActionsOfControl:function(h,p){var _=this._btnNameMapping(h);if(!_)throw new TypeError("No name passed");if(!p)throw new TypeError("No actions passed");if(!this.buttons[_])throw new TypeError("Button with this name not exists");this.buttons[_]._button.actions=p,this.changeControlOrder()},setButtonDisabled:function(h,p){var _=this._btnNameMapping(h);p?this.buttons[_].disable():this.buttons[_].enable()},_shapeMapping:function(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping:function(h){var p=this._shapeMapping();return p[h]?p[h]:h}});function Y(h,p){var _=Object.keys(h);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(h);p&&(E=E.filter(function(I){return Object.getOwnPropertyDescriptor(h,I).enumerable})),_.push.apply(_,E)}return _}function C(h){for(var p=1;p<arguments.length;p++){var _=arguments[p]!=null?arguments[p]:{};p%2?Y(Object(_),!0).forEach(function(E){b(h,E,_[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(_)):Y(Object(_)).forEach(function(E){Object.defineProperty(h,E,Object.getOwnPropertyDescriptor(_,E))})}return h}function b(h,p,_){return p in h?Object.defineProperty(h,p,{value:_,enumerable:!0,configurable:!0,writable:!0}):h[p]=_,h}var k={_initSnappableMarkers:function(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0||this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping:function(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents:function(h){var p=this;h.forEach(function(_){Array.isArray(_)?p._assignEvents(_):(_.off("drag",p._handleSnapping,p),_.on("drag",p._handleSnapping,p),_.off("dragend",p._cleanupSnapping,p),_.on("dragend",p._cleanupSnapping,p))})},_cleanupSnapping:function(h){h&&(h.target._snapped=!1),delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("pm:remove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(function(p){p.remove()})},_handleThrottleSnapping:function(){this.throttledList&&this._createSnapList()},_handleSnapping:function(h){var p=this,_=h.target;if(_._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),this._map.pm.Keyboard.isAltKeyPressed()||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;var E=this._calcClosestLayer(_.getLatLng(),this._snapList);if(Object.keys(E).length===0)return!1;var I,V=E.layer instanceof L.Marker||E.layer instanceof L.CircleMarker||!this.options.snapSegment;I=V?E.latlng:this._checkPrioritiySnapping(E);var nt=this.options.snapDistance,it={marker:_,shape:this._shape,snapLatLng:I,segment:E.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:E.layer,distance:E.distance};if(this._fireSnapDrag(it.marker,it),this._fireSnapDrag(this._layer,it),E.distance<nt){_._orgLatLng=_.getLatLng(),_.setLatLng(I),_._snapped=!0,_._snapInfo=it;var rt=this._snapLatLng||{},ot=I||{};rt.lat===ot.lat&&rt.lng===ot.lng||(p._snapLatLng=I,p._fireSnap(_,it),p._fireSnap(p._layer,it))}else this._snapLatLng&&(this._unsnap(it),_._snapped=!1,_._snapInfo=void 0,this._fireUnsnap(it.marker,it),this._fireUnsnap(this._layer,it));return!0},_createSnapList:function(){var h=this,p=[],_=[],E=this._map;E.off("pm:remove",this._handleSnapLayerRemoval,this),E.on("pm:remove",this._handleSnapLayerRemoval,this),E.eachLayer(function(I){if((I instanceof L.Polyline||I instanceof L.Marker||I instanceof L.CircleMarker||I instanceof L.ImageOverlay)&&I.options.snapIgnore!==!0){if(I.options.snapIgnore===void 0&&(!L.PM.optIn&&I.options.pmIgnore===!0||L.PM.optIn&&I.options.pmIgnore!==!1))return;(I instanceof L.Circle||I instanceof L.CircleMarker)&&I.pm&&I.pm._hiddenPolyCircle?p.push(I.pm._hiddenPolyCircle):I instanceof L.ImageOverlay&&(I=L.rectangle(I.getBounds())),p.push(I);var V=L.polyline([],{color:"red",pmIgnore:!0});V._pmTempLayer=!0,_.push(V),(I instanceof L.Circle||I instanceof L.CircleMarker)&&_.push(V)}}),p=(p=(p=p.filter(function(I){return h._layer!==I})).filter(function(I){return I._latlng||I._latlngs&&Ot(I._latlngs)})).filter(function(I){return!I._pmTempLayer}),this._otherSnapLayers?(this._otherSnapLayers.forEach(function(){var I=L.polyline([],{color:"red",pmIgnore:!0});I._pmTempLayer=!0,_.push(I)}),this._snapList=p.concat(this._otherSnapLayers)):this._snapList=p,this.debugIndicatorLines=_},_handleSnapLayerRemoval:function(h){var p=h.layer,_=this._snapList.findIndex(function(E){return E._leaflet_id===p._leaflet_id});this._snapList.splice(_,1)},_calcClosestLayer:function(h,p){return this._calcClosestLayers(h,p,1)[0]},_calcClosestLayers:function(h,p){var _=this,E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,I=[],V={};p.forEach(function(it,rt){if(!it._parentCopy||it._parentCopy!==_._layer){var ot=_._calcLayerDistances(h,it);if(ot.distance=Math.floor(ot.distance),_.debugIndicatorLines){if(!_.debugIndicatorLines[rt]){var dt=L.polyline([],{color:"red",pmIgnore:!0});dt._pmTempLayer=!0,_.debugIndicatorLines[rt]=dt}_.debugIndicatorLines[rt].setLatLngs([h,ot.latlng])}E===1&&(V.distance===void 0||ot.distance<=V.distance)?(ot.distance<V.distance&&(I=[]),(V=ot).layer=it,I.push(V)):E!==1&&(V={},(V=ot).layer=it,I.push(V))}}),E!==1&&(I=I.sort(function(it,rt){return it.distance-rt.distance})),E===-1&&(E=I.length);var nt=this._getClosestLayerByPriority(I,E);return L.Util.isArray(nt)?nt:[nt]},_calcLayerDistances:function(h,p){var _=this._map,E=p instanceof L.Marker||p instanceof L.CircleMarker,I=p instanceof L.Polygon,V=h;if(E){var nt=p.getLatLng();return{latlng:C({},nt),distance:this._getDistance(_,nt,V)}}return this._calcLatLngDistances(V,p.getLatLngs(),_,I)},_calcLatLngDistances:function(h,p,_){var E,I,V,nt=this,it=arguments.length>3&&arguments[3]!==void 0&&arguments[3],rt=function dt(Pt){Pt.forEach(function(yt,At){if(Array.isArray(yt))dt(yt);else if(nt.options.snapSegment){var Gt,te=yt;Gt=it?At+1===Pt.length?0:At+1:At+1===Pt.length?void 0:At+1;var Dt=Pt[Gt];if(Dt){var Rn=nt._getDistanceToSegment(_,h,te,Dt);(I===void 0||Rn<I)&&(I=Rn,V=[te,Dt])}}else{var Tn=nt._getDistance(_,h,yt);(I===void 0||Tn<I)&&(I=Tn,E=yt)}})};if(rt(p),this.options.snapSegment){var ot=this._getClosestPointOnSegment(_,h,V[0],V[1]);return{latlng:C({},ot),segment:V,distance:I}}return{latlng:E,distance:I}},_getClosestLayerByPriority:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;h=h.sort(function(nt,it){return nt._leaflet_id-it._leaflet_id});var _=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],E=this._map.pm.globalOptions.snappingOrder||[],I=0,V={};return E.concat(_).forEach(function(nt){V[nt]||(I+=1,V[nt]=I)}),h.sort(Cn("instanceofShape",V)),p===1?h[0]||{}:h.slice(0,p)},_checkPrioritiySnapping:function(h){var p=this._map,_=h.segment[0],E=h.segment[1],I=h.latlng,V=this._getDistance(p,_,I),nt=this._getDistance(p,E,I),it=V<nt?_:E,rt=V<nt?V:nt;if(this.options.snapMiddle){var ot=L.PM.Utils.calcMiddleLatLng(p,_,E),dt=this._getDistance(p,ot,I);dt<V&&dt<nt&&(it=ot,rt=dt)}return C({},rt<this.options.snapDistance?it:I)},_unsnap:function(){delete this._snapLatLng},_getClosestPointOnSegment:function(h,p,_,E){var I=h.getMaxZoom();I===1/0&&(I=h.getZoom());var V=h.project(p,I),nt=h.project(_,I),it=h.project(E,I),rt=L.LineUtil.closestPointOnSegment(V,nt,it);return h.unproject(rt,I)},_getDistanceToSegment:function(h,p,_,E){var I=h.latLngToLayerPoint(p),V=h.latLngToLayerPoint(_),nt=h.latLngToLayerPoint(E);return L.LineUtil.pointToSegmentDistance(I,V,nt)},_getDistance:function(h,p,_){return h.latLngToLayerPoint(p).distanceTo(h.latLngToLayerPoint(_))}};let F=k,Z=L.Class.extend({includes:[F,bt],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,editable:!1,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1},setOptions:function(h){L.Util.setOptions(this,h),this.setStyle(this.options)},setStyle:function(){},getOptions:function(){return this.options},initialize:function(h){var p=this,_=new L.Icon.Default;_.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=_,this._map=h,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(function(E){p[E]=new L.PM.Draw[E](p._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions:function(h){var p=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.options.pathOptions=p?m()(this.options.pathOptions,h):h},getShapes:function(){return this.shapes},getShape:function(){return this._shape},enable:function(h,p){if(!h)throw new Error("Error: Please pass a shape as a parameter. Possible shapes are: ".concat(this.getShapes().join(",")));this.disable(),this[h].enable(p)},disable:function(){var h=this;this.shapes.forEach(function(p){h[p].disable()})},addControls:function(){var h=this;this.shapes.forEach(function(p){h[p].addButton()})},getActiveShape:function(){var h,p=this;return this.shapes.forEach(function(_){p[_]._enabled&&(h=_)}),h},_setGlobalDrawMode:function(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();var h=L.PM.Utils.findLayers(this._map);this._enabled?h.forEach(function(p){L.PM.Utils.disablePopup(p)}):h.forEach(function(p){L.PM.Utils.enablePopup(p)})},createNewDrawInstance:function(h,p){var _=this._getShapeFromBtnName(p);if(this[h])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[_])throw new TypeError("There is no class L.PM.Draw.".concat(_));return this[h]=new L.PM.Draw[_](this._map),this[h].toolbarButtonName=h,this[h]._shape=h,this.shapes.push(h),this[p]&&this[h].setOptions(this[p].options),this[h].setOptions(this[h].options),this[h]},_getShapeFromBtnName:function(h){var p={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return p[h]?p[h]:this[h]?this[h]._shape:h},_finishLayer:function(h){h.pm&&(h.pm.setOptions(this.options),h.pm._shape=this._shape,h.pm._map=this._map),this._addDrawnLayerProp(h)},_addDrawnLayerProp:function(h){h._drawnByGeoman=!0},_setPane:function(h,p){p==="layerPane"?h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":p==="vertexPane"?h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":p==="markerPane"&&(h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer:function(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}});Z.Marker=Z.extend({initialize:function(h){this._map=h,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable:function(h){var p=this;L.Util.setOptions(this,h),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(Rt("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(function(_){p.isRelevantMarker(_)&&_.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){var h=this;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(function(p){h.isRelevantMarker(p)&&p.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(h){this.enabled()?this.disable():this.enable(h)},isRelevantMarker:function(h){return h instanceof L.Marker&&h.pm&&!h._pmTempLayer&&!h.pm._initTextMarker},_syncHintMarker:function(h){if(this._hintMarker.setLatLng(h.latlng),this.options.snappable){var p=h;p.target=this._hintMarker,this._handleSnapping(p)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker:function(h){if(h.latlng&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);var p=this._hintMarker.getLatLng(),_=new L.Marker(p,this.options.markerStyle);this._setPane(_,"markerPane"),this._finishLayer(_),_.pm||(_.options.draggable=!1),_.addTo(this._map.pm._getContainingLayer()),_.pm&&this.options.markerEditable?_.pm.enable():_.dragging&&_.dragging.disable(),this._fireCreate(_),this._cleanupSnapping(),this.options.continueDrawing||this.disable()}},setStyle:function(){var h,p;(h=this.options.markerStyle)!==null&&h!==void 0&&h.icon&&((p=this._hintMarker)===null||p===void 0||p.setIcon(this.options.markerStyle.icon))}});var J=63710088e-1,tt={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260511392e-6,inches:39.37*J,kilometers:6371.0088,kilometres:6371.0088,meters:J,metres:J,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:J/1852,radians:1,yards:6967335223679999e-9};function pt(h,p,_){_===void 0&&(_={});var E={type:"Feature"};return(_.id===0||_.id)&&(E.id=_.id),_.bbox&&(E.bbox=_.bbox),E.properties=p||{},E.geometry=h,E}function Lt(h,p,_){if(_===void 0&&(_={}),!h)throw new Error("coordinates is required");if(!Array.isArray(h))throw new Error("coordinates must be an Array");if(h.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!ge(h[0])||!ge(h[1]))throw new Error("coordinates must contain numbers");return pt({type:"Point",coordinates:h},p,_)}function vt(h,p,_){if(_===void 0&&(_={}),h.length<2)throw new Error("coordinates must be an array of two or more positions");return pt({type:"LineString",coordinates:h},p,_)}function Ft(h,p){p===void 0&&(p={});var _={type:"FeatureCollection"};return p.id&&(_.id=p.id),p.bbox&&(_.bbox=p.bbox),_.features=h,_}function Wt(h,p){p===void 0&&(p="kilometers");var _=tt[p];if(!_)throw new Error(p+" units is invalid");return h*_}function Jt(h,p){p===void 0&&(p="kilometers");var _=tt[p];if(!_)throw new Error(p+" units is invalid");return h/_}function $t(h){return 180*(h%(2*Math.PI))/Math.PI}function jt(h){return h%360*Math.PI/180}function ge(h){return!isNaN(h)&&h!==null&&!Array.isArray(h)}function pe(h){var p,_,E={type:"FeatureCollection",features:[]};if((_=h.type==="Feature"?h.geometry:h).type==="LineString")p=[_.coordinates];else if(_.type==="MultiLineString")p=_.coordinates;else if(_.type==="MultiPolygon")p=[].concat.apply([],_.coordinates);else{if(_.type!=="Polygon")throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");p=_.coordinates}return p.forEach(function(I){p.forEach(function(V){for(var nt=0;nt<I.length-1;nt++)for(var it=nt;it<V.length-1;it++)if(!(I===V&&(Math.abs(nt-it)===1||nt===0&&it===I.length-2&&I[nt][0]===I[I.length-1][0]&&I[nt][1]===I[I.length-1][1]))){var rt=Te(I[nt][0],I[nt][1],I[nt+1][0],I[nt+1][1],V[it][0],V[it][1],V[it+1][0],V[it+1][1]);rt&&E.features.push(Lt([rt[0],rt[1]]))}})}),E}function Te(h,p,_,E,I,V,nt,it){var rt,ot,dt,Pt,yt={x:null,y:null,onLine1:!1,onLine2:!1};return(rt=(it-V)*(_-h)-(nt-I)*(E-p))===0?yt.x!==null&&yt.y!==null&&yt:(Pt=(_-h)*(ot=p-V)-(E-p)*(dt=h-I),ot=((nt-I)*ot-(it-V)*dt)/rt,dt=Pt/rt,yt.x=h+ot*(_-h),yt.y=p+ot*(E-p),ot>=0&&ot<=1&&(yt.onLine1=!0),dt>=0&&dt<=1&&(yt.onLine2=!0),!(!yt.onLine1||!yt.onLine2)&&[yt.x,yt.y])}function Ce(h,p){var _=Object.keys(h);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(h);p&&(E=E.filter(function(I){return Object.getOwnPropertyDescriptor(h,I).enumerable})),_.push.apply(_,E)}return _}function he(h){for(var p=1;p<arguments.length;p++){var _=arguments[p]!=null?arguments[p]:{};p%2?Ce(Object(_),!0).forEach(function(E){An(h,E,_[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(_)):Ce(Object(_)).forEach(function(E){Object.defineProperty(h,E,Object.getOwnPropertyDescriptor(_,E))})}return h}function An(h,p,_){return p in h?Object.defineProperty(h,p,{value:_,enumerable:!0,configurable:!0,writable:!0}):h[p]=_,h}function we(h,p){var _=Object.keys(h);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(h);p&&(E=E.filter(function(I){return Object.getOwnPropertyDescriptor(h,I).enumerable})),_.push.apply(_,E)}return _}function St(h){for(var p=1;p<arguments.length;p++){var _=arguments[p]!=null?arguments[p]:{};p%2?we(Object(_),!0).forEach(function(E){Dn(h,E,_[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(_)):we(Object(_)).forEach(function(E){Object.defineProperty(h,E,Object.getOwnPropertyDescriptor(_,E))})}return h}function Dn(h,p,_){return p in h?Object.defineProperty(h,p,{value:_,enumerable:!0,configurable:!0,writable:!0}):h[p]=_,h}function Xn(h,p){var _=Object.keys(h);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(h);p&&(E=E.filter(function(I){return Object.getOwnPropertyDescriptor(h,I).enumerable})),_.push.apply(_,E)}return _}function re(h){for(var p=1;p<arguments.length;p++){var _=arguments[p]!=null?arguments[p]:{};p%2?Xn(Object(_),!0).forEach(function(E){Yr(h,E,_[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(_)):Xn(Object(_)).forEach(function(E){Object.defineProperty(h,E,Object.getOwnPropertyDescriptor(_,E))})}return h}function Yr(h,p,_){return p in h?Object.defineProperty(h,p,{value:_,enumerable:!0,configurable:!0,writable:!0}):h[p]=_,h}function zn(h){if(!h)throw new Error("coord is required");if(!Array.isArray(h)){if(h.type==="Feature"&&h.geometry!==null&&h.geometry.type==="Point")return h.geometry.coordinates;if(h.type==="Point")return h.coordinates}if(Array.isArray(h)&&h.length>=2&&!Array.isArray(h[0])&&!Array.isArray(h[1]))return h;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function cn(h){if(Array.isArray(h))return h;if(h.type==="Feature"){if(h.geometry!==null)return h.geometry.coordinates}else if(h.coordinates)return h.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function or(h){return h.type==="Feature"?h.geometry:h}function sr(h,p){return h.type==="FeatureCollection"?"FeatureCollection":h.type==="GeometryCollection"?"GeometryCollection":h.type==="Feature"&&h.geometry!==null?h.geometry.type:h.type}function wo(h,p,_){if(h!==null)for(var E,I,V,nt,it,rt,ot,dt,Pt=0,yt=0,At=h.type,Gt=At==="FeatureCollection",te=At==="Feature",Dt=Gt?h.features.length:1,Rn=0;Rn<Dt;Rn++){it=(dt=!!(ot=Gt?h.features[Rn].geometry:te?h.geometry:h)&&ot.type==="GeometryCollection")?ot.geometries.length:1;for(var Tn=0;Tn<it;Tn++){var Ie=0,Ar=0;if((nt=dt?ot.geometries[Tn]:ot)!==null){rt=nt.coordinates;var Si=nt.type;switch(Pt=!_||Si!=="Polygon"&&Si!=="MultiPolygon"?0:1,Si){case null:break;case"Point":if(p(rt,yt,Rn,Ie,Ar)===!1)return!1;yt++,Ie++;break;case"LineString":case"MultiPoint":for(E=0;E<rt.length;E++){if(p(rt[E],yt,Rn,Ie,Ar)===!1)return!1;yt++,Si==="MultiPoint"&&Ie++}Si==="LineString"&&Ie++;break;case"Polygon":case"MultiLineString":for(E=0;E<rt.length;E++){for(I=0;I<rt[E].length-Pt;I++){if(p(rt[E][I],yt,Rn,Ie,Ar)===!1)return!1;yt++}Si==="MultiLineString"&&Ie++,Si==="Polygon"&&Ar++}Si==="Polygon"&&Ie++;break;case"MultiPolygon":for(E=0;E<rt.length;E++){for(Ar=0,I=0;I<rt[E].length;I++){for(V=0;V<rt[E][I].length-Pt;V++){if(p(rt[E][I][V],yt,Rn,Ie,Ar)===!1)return!1;yt++}Ar++}Ie++}break;case"GeometryCollection":for(E=0;E<nt.geometries.length;E++)if(wo(nt.geometries[E],p,_)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Wn(h,p){if(h.type==="Feature")p(h,0);else if(h.type==="FeatureCollection")for(var _=0;_<h.features.length&&p(h.features[_],_)!==!1;_++);}function nr(h,p){var _,E,I,V,nt,it,rt,ot,dt,Pt,yt=0,At=h.type==="FeatureCollection",Gt=h.type==="Feature",te=At?h.features.length:1;for(_=0;_<te;_++){for(it=At?h.features[_].geometry:Gt?h.geometry:h,ot=At?h.features[_].properties:Gt?h.properties:{},dt=At?h.features[_].bbox:Gt?h.bbox:void 0,Pt=At?h.features[_].id:Gt?h.id:void 0,nt=(rt=!!it&&it.type==="GeometryCollection")?it.geometries.length:1,I=0;I<nt;I++)if((V=rt?it.geometries[I]:it)!==null)switch(V.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(p(V,yt,ot,dt,Pt)===!1)return!1;break;case"GeometryCollection":for(E=0;E<V.geometries.length;E++)if(p(V.geometries[E],yt,ot,dt,Pt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(p(null,yt,ot,dt,Pt)===!1)return!1;yt++}}function Ut(h,p){nr(h,function(_,E,I,V,nt){var it,rt=_===null?null:_.type;switch(rt){case null:case"Point":case"LineString":case"Polygon":return p(pt(_,I,{bbox:V,id:nt}),E,0)!==!1&&void 0}switch(rt){case"MultiPoint":it="Point";break;case"MultiLineString":it="LineString";break;case"MultiPolygon":it="Polygon"}for(var ot=0;ot<_.coordinates.length;ot++){var dt=_.coordinates[ot];if(p(pt({type:it,coordinates:dt},I),E,ot)===!1)return!1}})}Z.Line=Z.extend({initialize:function(h){this._map=h,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable:function(h){L.Util.setOptions(this,h),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],he(he({},this.options.templineStyle),{},{pmIgnore:!1})),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(Rt("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map._container.style.cursor="crosshair",this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(h){this.enabled()?this.disable():this.enable(h)},_syncHintLine:function(){var h=this._layer.getLatLngs();if(h.length>0){var p=h[h.length-1];this._hintline.setLatLngs([p,this._hintMarker.getLatLng()])}},_syncHintMarker:function(h){if(this._hintMarker.setLatLng(h.latlng),this.options.snappable){var p=h;p.target=this._hintMarker,this._handleSnapping(p)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());var _=this._layer._defaultShape().slice();_.push(this._hintMarker.getLatLng()),this._change(_)},hasSelfIntersection:function(){return pe(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection:function(h,p){var _=L.polyline(this._layer.getLatLngs());h&&(p||(p=this._hintMarker.getLatLng()),_.addLatLng(p));var E=pe(_.toGeoJSON(15));this._doesSelfIntersect=E.features.length>0,this._doesSelfIntersect?this._hintline.setStyle({color:"#f00000ff"}):this._hintline.isEmpty()||this._hintline.setStyle(this.options.hintlineStyle)},_createVertex:function(h){if(this.options.allowSelfIntersection||(this._handleSelfIntersection(!0,h.latlng),!this._doesSelfIntersect)){this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);var p=this._hintMarker.getLatLng(),_=this._layer.getLatLngs(),E=_[_.length-1];if(p.equals(_[0])||_.length>0&&p.equals(E))this._finishShape();else{this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:p,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(p);var I=this._createMarker(p);this._setTooltipText(),this._setHintLineAfterNewVertex(p),this._fireVertexAdded(I,void 0,p,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(h)}}},_setHintLineAfterNewVertex:function(h){this._hintline.setLatLngs([h,h])},_removeLastVertex:function(){var h=this._markers;if(h.length<=1)this.disable();else{var p=this._layer.getLatLngs(),_=h[h.length-1],E=L.PM.Utils.findDeepMarkerIndex(h,_).indexPath;h.pop(),this._layerGroup.removeLayer(_);var I=h[h.length-1],V=p.indexOf(I.getLatLng());p=p.slice(0,V+1),this._layer.setLatLngs(p),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(_,E,"Draw"),this._change(this._layer.getLatLngs())}},_finishShape:function(){if((this.options.allowSelfIntersection||(this._handleSelfIntersection(!1),!this._doesSelfIntersect))&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){var h=this._layer.getLatLngs();if(!(h.length<=1)){var p=L.polyline(h,this.options.pathOptions);this._setPane(p,"layerPane"),this._finishLayer(p),p.addTo(this._map.pm._getContainingLayer()),this._fireCreate(p),this.options.snappable&&this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this.enable()}}},_createMarker:function(h){var p=new L.Marker(h,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(p,"vertexPane"),p._pmTempLayer=!0,this._layerGroup.addLayer(p),this._markers.push(p),p.on("click",this._finishShape,this),p},_setTooltipText:function(){var h="";h=Rt(this._layer.getLatLngs().flat().length<=1?"tooltips.continueLine":"tooltips.finishLine"),this._hintMarker.setTooltipContent(h)},_change:function(h){this._fireChange(h,"Draw")},setStyle:function(){var h,p;(h=this._layer)===null||h===void 0||h.setStyle(this.options.templineStyle),(p=this._hintline)===null||p===void 0||p.setStyle(this.options.hintlineStyle)}}),Z.Polygon=Z.Line.extend({initialize:function(h){this._map=h,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable:function(h){L.PM.Draw.Line.prototype.enable.call(this,h),this._layer.pm._shape="Polygon"},_createMarker:function(h){var p=new L.Marker(h,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(p,"vertexPane"),p._pmTempLayer=!0,this._layerGroup.addLayer(p),this._markers.push(p),this._layer.getLatLngs().flat().length===1?(p.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(p)-1,this.options.snappable&&this._cleanupSnapping()):p.on("click",function(){return 1}),p},_setTooltipText:function(){var h="";h=Rt(this._layer.getLatLngs().flat().length<=2?"tooltips.continueLine":"tooltips.finishPoly"),this._hintMarker.setTooltipContent(h)},_finishShape:function(){if((this.options.allowSelfIntersection||(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),!this._doesSelfIntersect))&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){var h=this._layer.getLatLngs();if(!(h.length<=2)){var p=L.polygon(h,this.options.pathOptions);this._setPane(p,"layerPane"),this._finishLayer(p),p.addTo(this._map.pm._getContainingLayer()),this._fireCreate(p),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this.disable(),this.options.continueDrawing&&this.enable()}}}}),Z.Rectangle=Z.extend({initialize:function(h){this._map=h,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable:function(h){if(L.Util.setOptions(this,h),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(Rt("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(var p=0;p<2;p+=1){var _=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(_,"vertexPane"),_._pmTempLayer=!0,this._layerGroup.addLayer(_),this._styleMarkers.push(_)}}this._map._container.style.cursor="crosshair",this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(h){this.enabled()?this.disable():this.enable(h)},_placeStartingMarkers:function(h){this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);var p=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(p),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(function(_){L.DomUtil.addClass(_._icon,"visible"),_.setLatLng(p)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(Rt("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin:function(){var h=this._startMarker.getLatLng();h&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([h,h]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker:function(h){if(this._hintMarker.setLatLng(h.latlng),this.options.snappable){var p=h;p.target=this._hintMarker,this._handleSnapping(p)}var _=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(_,"Draw")},_syncRectangleSize:function(){var h=this,p=ke(this._startMarker.getLatLng(),this._map),_=ke(this._hintMarker.getLatLng(),this._map),E=L.PM.Utils._getRotatedRectangle(p,_,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(E),this.options.cursorMarker&&this._styleMarkers){var I=[];E.forEach(function(V){V.equals(p,1e-8)||V.equals(_,1e-8)||I.push(V)}),I.forEach(function(V,nt){try{h._styleMarkers[nt].setLatLng(V)}catch{}})}},_findCorners:function(){var h=this._layer.getBounds();return[h.getNorthWest(),h.getNorthEast(),h.getSouthEast(),h.getSouthWest()]},_finishShape:function(h){this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);var p=this._hintMarker.getLatLng(),_=this._startMarker.getLatLng();if(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer()){var E=L.rectangle([_,p],this.options.pathOptions);if(this.options.rectangleAngle){var I=L.PM.Utils._getRotatedRectangle(_,p,this.options.rectangleAngle||0,this._map);E.setLatLngs(I),E.pm&&E.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(E,"layerPane"),this._finishLayer(E),E.addTo(this._map.pm._getContainingLayer()),this._fireCreate(E),this.disable(),this.options.continueDrawing&&this.enable()}},setStyle:function(){var h;(h=this._layer)===null||h===void 0||h.setStyle(this.options.pathOptions)}}),Z.Circle=Z.extend({initialize:function(h){this._map=h,this._shape="Circle",this.toolbarButtonName="drawCircle"},enable:function(h){L.Util.setOptions(this,h),this.options.radius=0,this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.circle(this._map.getCenter(),St(St({},this.options.templineStyle),{},{radius:0})),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(Rt("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map._container.style.cursor="crosshair",this._map.on("click",this._placeCenterMarker,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(h){this.enabled()?this.disable():this.enable(h)},_syncHintLine:function(){var h=this._centerMarker.getLatLng(),p=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([h,p])},_syncCircleRadius:function(){var h,p=this._centerMarker.getLatLng(),_=this._hintMarker.getLatLng();h=this._map.options.crs===L.CRS.Simple?this._map.distance(p,_):p.distanceTo(_),this.options.minRadiusCircle&&h<this.options.minRadiusCircle?this._layer.setRadius(this.options.minRadiusCircle):this.options.maxRadiusCircle&&h>this.options.maxRadiusCircle?this._layer.setRadius(this.options.maxRadiusCircle):this._layer.setRadius(h)},_syncHintMarker:function(h){if(this._hintMarker.setLatLng(h.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){var p=h;p.target=this._hintMarker,this._handleSnapping(p)}this._handleHintMarkerSnapping();var _=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(_,"Draw")},_placeCenterMarker:function(h){this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker),this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);var p=this._hintMarker.getLatLng();this._layerGroup.addLayer(this._layer),this._centerMarker.setLatLng(p),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter:function(){var h=this._centerMarker.getLatLng();h&&(this._layer.setLatLng(h),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(Rt("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_finishShape:function(h){if(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer()){this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);var p,_=this._centerMarker.getLatLng(),E=this._hintMarker.getLatLng();p=this._map.options.crs===L.CRS.Simple?this._map.distance(_,E):_.distanceTo(E),this.options.minRadiusCircle&&p<this.options.minRadiusCircle?p=this.options.minRadiusCircle:this.options.maxRadiusCircle&&p>this.options.maxRadiusCircle&&(p=this.options.maxRadiusCircle);var I=St(St({},this.options.pathOptions),{},{radius:p}),V=L.circle(_,I);this._setPane(V,"layerPane"),this._finishLayer(V),V.addTo(this._map.pm._getContainingLayer()),V.pm&&V.pm._updateHiddenPolyCircle(),this._fireCreate(V),this.disable(),this.options.continueDrawing&&this.enable()}},_getNewDestinationOfHintMarker:function(){var h=this._hintMarker.getLatLng();if(!this._layerGroup.hasLayer(this._centerMarker))return h;var p=this._centerMarker.getLatLng(),_=p.distanceTo(h);return this.options.minRadiusCircle&&_<this.options.minRadiusCircle?h=Re(this._map,p,h,this.options.minRadiusCircle):this.options.maxRadiusCircle&&_>this.options.maxRadiusCircle&&(h=Re(this._map,p,h,this.options.maxRadiusCircle)),h},_handleHintMarkerSnapping:function(){if(this._hintMarker._snapped){var h=this._centerMarker.getLatLng(),p=this._hintMarker.getLatLng(),_=h.distanceTo(p);this._layerGroup.hasLayer(this._centerMarker)&&(this.options.minRadiusCircle&&_<this.options.minRadiusCircle||this.options.maxRadiusCircle&&_>this.options.maxRadiusCircle)&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng)}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())},setStyle:function(){var h,p;(h=this._layer)===null||h===void 0||h.setStyle(this.options.templineStyle),(p=this._hintline)===null||p===void 0||p.setStyle(this.options.hintlineStyle)}}),Z.CircleMarker=Z.Marker.extend({initialize:function(h){this._map=h,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1},enable:function(h){var p=this;if(L.Util.setOptions(this,h),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this.options.editable){var _={};L.extend(_,this.options.templineStyle),_.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.circleMarker(this._map.getCenter(),_),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(Rt("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this),this._map._container.style.cursor="crosshair"}else this._map.on("click",this._createMarker,this),this._hintMarker=L.circleMarker(this._map.getCenter(),this.options.templineStyle),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(Rt("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),!this.options.editable&&this.options.markerEditable&&this._map.eachLayer(function(E){p.isRelevantMarker(E)&&E.pm.enable()}),this._layer.bringToBack(),this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){var h=this;this._enabled&&(this._enabled=!1,this.options.editable?(this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._map.eachLayer(function(p){h.isRelevantMarker(p)&&p.pm.disable()}),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_placeCenterMarker:function(h){this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker),this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);var p=this._hintMarker.getLatLng();this._layerGroup.addLayer(this._layer),this._centerMarker.setLatLng(p),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter:function(){var h=this._centerMarker.getLatLng();h&&(this._layer.setLatLng(h),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(Rt("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine:function(){var h=this._centerMarker.getLatLng(),p=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([h,p])},_syncCircleRadius:function(){var h=this._centerMarker.getLatLng(),p=this._hintMarker.getLatLng(),_=this._map.project(h).distanceTo(this._map.project(p));this.options.minRadiusCircleMarker&&_<this.options.minRadiusCircleMarker?this._layer.setRadius(this.options.minRadiusCircleMarker):this.options.maxRadiusCircleMarker&&_>this.options.maxRadiusCircleMarker?this._layer.setRadius(this.options.maxRadiusCircleMarker):this._layer.setRadius(_)},_syncHintMarker:function(h){if(this._hintMarker.setLatLng(h.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){var p=h;p.target=this._hintMarker,this._handleSnapping(p)}this._handleHintMarkerSnapping();var _=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(_,"Draw")},isRelevantMarker:function(h){return h instanceof L.CircleMarker&&!(h instanceof L.Circle)&&h.pm&&!h._pmTempLayer},_createMarker:function(h){if((!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())&&h.latlng&&!this._layerIsDragging){this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);var p=this._hintMarker.getLatLng(),_=L.circleMarker(p,this.options.pathOptions);this._setPane(_,"layerPane"),this._finishLayer(_),_.addTo(this._map.pm._getContainingLayer()),_.pm&&this.options.markerEditable&&_.pm.enable(),this._fireCreate(_),this._cleanupSnapping(),this.options.continueDrawing||this.disable()}},_finishShape:function(h){if(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer()){this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);var p=this._centerMarker.getLatLng(),_=this._hintMarker.getLatLng(),E=this._map.project(p).distanceTo(this._map.project(_));this.options.editable&&(this.options.minRadiusCircleMarker&&E<this.options.minRadiusCircleMarker?E=this.options.minRadiusCircleMarker:this.options.maxRadiusCircleMarker&&E>this.options.maxRadiusCircleMarker&&(E=this.options.maxRadiusCircleMarker));var I=re(re({},this.options.pathOptions),{},{radius:E}),V=L.circleMarker(p,I);this._setPane(V,"layerPane"),this._finishLayer(V),V.addTo(this._map.pm._getContainingLayer()),V.pm&&V.pm._updateHiddenPolyCircle(),this._fireCreate(V),this.disable(),this.options.continueDrawing&&this.enable()}},_getNewDestinationOfHintMarker:function(){var h=this._hintMarker.getLatLng();if(this.options.editable){if(!this._layerGroup.hasLayer(this._centerMarker))return h;var p=this._centerMarker.getLatLng(),_=this._map.project(p).distanceTo(this._map.project(h));this.options.minRadiusCircleMarker&&_<this.options.minRadiusCircleMarker?h=Re(this._map,p,h,this._pxRadiusToMeter(this.options.minRadiusCircleMarker)):this.options.maxRadiusCircleMarker&&_>this.options.maxRadiusCircleMarker&&(h=Re(this._map,p,h,this._pxRadiusToMeter(this.options.maxRadiusCircleMarker)))}return h},_handleHintMarkerSnapping:function(){if(this.options.editable){if(this._hintMarker._snapped){var h=this._centerMarker.getLatLng(),p=this._hintMarker.getLatLng(),_=this._map.project(h).distanceTo(this._map.project(p));this._layerGroup.hasLayer(this._centerMarker)&&(this.options.minRadiusCircleMarker&&_<this.options.minRadiusCircleMarker||this.options.maxRadiusCircleMarker&&_>this.options.maxRadiusCircleMarker)&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng)}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},_pxRadiusToMeter:function(h){var p=this._centerMarker.getLatLng(),_=this._map.project(p),E=L.point(_.x+h,_.y);return this._map.unproject(E).distanceTo(p)},setStyle:function(){var h,p,_={};L.extend(_,this.options.templineStyle),this.options.editable&&(_.radius=0),(h=this._layer)===null||h===void 0||h.setStyle(_),(p=this._hintline)===null||p===void 0||p.setStyle(this.options.hintlineStyle)}});let Ei=function(h){if(!h)throw new Error("geojson is required");var p=[];return Ut(h,function(_){(function(E,I){var V=[],nt=E.geometry;if(nt!==null){switch(nt.type){case"Polygon":V=cn(nt);break;case"LineString":V=[cn(nt)]}V.forEach(function(it){var rt=function(ot,dt){var Pt=[];return ot.reduce(function(yt,At){var Gt,te,Dt,Rn,Tn,Ie,Ar=vt([yt,At],dt);return Ar.bbox=(te=At,Dt=(Gt=yt)[0],Rn=Gt[1],Tn=te[0],Ie=te[1],[Dt<Tn?Dt:Tn,Rn<Ie?Rn:Ie,Dt>Tn?Dt:Tn,Rn>Ie?Rn:Ie]),Pt.push(Ar),At}),Pt}(it,E.properties);rt.forEach(function(ot){ot.id=I.length,I.push(ot)})})}})(_,p)}),Ft(p)};var oi=c(1787);function xe(h,p){var _=cn(h),E=cn(p);if(_.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(E.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var I=_[0][0],V=_[0][1],nt=_[1][0],it=_[1][1],rt=E[0][0],ot=E[0][1],dt=E[1][0],Pt=E[1][1],yt=(Pt-ot)*(nt-I)-(dt-rt)*(it-V),At=(dt-rt)*(V-ot)-(Pt-ot)*(I-rt),Gt=(nt-I)*(V-ot)-(it-V)*(I-rt);if(yt===0)return null;var te=At/yt,Dt=Gt/yt;return te>=0&&te<=1&&Dt>=0&&Dt<=1?Lt([I+te*(nt-I),V+te*(it-V)]):null}let Kn=function(h,p){var _={},E=[];if(h.type==="LineString"&&(h=pt(h)),p.type==="LineString"&&(p=pt(p)),h.type==="Feature"&&p.type==="Feature"&&h.geometry!==null&&p.geometry!==null&&h.geometry.type==="LineString"&&p.geometry.type==="LineString"&&h.geometry.coordinates.length===2&&p.geometry.coordinates.length===2){var I=xe(h,p);return I&&E.push(I),Ft(E)}var V=oi();return V.load(Ei(p)),Wn(Ei(h),function(nt){Wn(V.search(nt),function(it){var rt=xe(nt,it);if(rt){var ot=cn(rt).join(",");_[ot]||(_[ot]=!0,E.push(rt))}})}),Ft(E)},$n=function(h,p,_){_===void 0&&(_={});var E=zn(h),I=zn(p),V=jt(I[1]-E[1]),nt=jt(I[0]-E[0]),it=jt(E[1]),rt=jt(I[1]),ot=Math.pow(Math.sin(V/2),2)+Math.pow(Math.sin(nt/2),2)*Math.cos(it)*Math.cos(rt);return Wt(2*Math.atan2(Math.sqrt(ot),Math.sqrt(1-ot)),_.units)},jr=function(h){var p=h[0],_=h[1],E=h[2],I=h[3];if($n(h.slice(0,2),[E,_])>=$n(h.slice(0,2),[p,I])){var V=(_+I)/2;return[p,V-(E-p)/2,E,V+(E-p)/2]}var nt=(p+E)/2;return[nt-(I-_)/2,_,nt+(I-_)/2,I]};function wn(h){var p=[1/0,1/0,-1/0,-1/0];return wo(h,function(_){p[0]>_[0]&&(p[0]=_[0]),p[1]>_[1]&&(p[1]=_[1]),p[2]<_[0]&&(p[2]=_[0]),p[3]<_[1]&&(p[3]=_[1])}),p}wn.default=wn;let ar=wn,Or=function(h,p){p===void 0&&(p={});var _=p.precision,E=p.coordinates,I=p.mutate;if(_=_==null||isNaN(_)?6:_,E=E==null||isNaN(E)?3:E,!h)throw new Error("<geojson> is required");if(typeof _!="number")throw new Error("<precision> must be a number");if(typeof E!="number")throw new Error("<coordinates> must be a number");I!==!1&&I!==void 0||(h=JSON.parse(JSON.stringify(h)));var V=Math.pow(10,_);return wo(h,function(nt){(function(it,rt,ot){it.length>ot&&it.splice(ot,it.length);for(var dt=0;dt<it.length;dt++)it[dt]=Math.round(it[dt]*rt)/rt})(nt,V,E)}),h};function ho(h,p,_){if(_===void 0&&(_={}),_.final===!0)return function(Pt,yt){var At=ho(yt,Pt);return At=(At+180)%360}(h,p);var E=zn(h),I=zn(p),V=jt(E[0]),nt=jt(I[0]),it=jt(E[1]),rt=jt(I[1]),ot=Math.sin(nt-V)*Math.cos(rt),dt=Math.cos(it)*Math.sin(rt)-Math.sin(it)*Math.cos(rt)*Math.cos(nt-V);return $t(Math.atan2(ot,dt))}function rr(h,p,_,E){E===void 0&&(E={});var I=zn(h),V=jt(I[0]),nt=jt(I[1]),it=jt(_),rt=Jt(p,E.units),ot=Math.asin(Math.sin(nt)*Math.cos(rt)+Math.cos(nt)*Math.sin(rt)*Math.cos(it));return Lt([$t(V+Math.atan2(Math.sin(it)*Math.sin(rt)*Math.cos(nt),Math.cos(rt)-Math.sin(nt)*Math.sin(ot))),$t(ot)],E.properties)}let Lo=function(h,p,_){_===void 0&&(_={});var E=Lt([1/0,1/0],{dist:1/0}),I=0;return Ut(h,function(V){for(var nt=cn(V),it=0;it<nt.length-1;it++){var rt=Lt(nt[it]);rt.properties.dist=$n(p,rt,_);var ot=Lt(nt[it+1]);ot.properties.dist=$n(p,ot,_);var dt=$n(rt,ot,_),Pt=Math.max(rt.properties.dist,ot.properties.dist),yt=ho(rt,ot),At=rr(p,Pt,yt+90,_),Gt=rr(p,Pt,yt-90,_),te=Kn(vt([At.geometry.coordinates,Gt.geometry.coordinates]),vt([rt.geometry.coordinates,ot.geometry.coordinates])),Dt=null;te.features.length>0&&((Dt=te.features[0]).properties.dist=$n(p,Dt,_),Dt.properties.location=I+$n(rt,Dt,_)),rt.properties.dist<E.properties.dist&&((E=rt).properties.index=it,E.properties.location=I),ot.properties.dist<E.properties.dist&&((E=ot).properties.index=it+1,E.properties.location=I+dt),Dt&&Dt.properties.dist<E.properties.dist&&((E=Dt).properties.index=it),I+=dt}}),E};function Ln(h,p){var _=[],E=oi();return Ut(p,function(I){if(_.forEach(function(it,rt){it.id=rt}),_.length){var V=E.search(I);if(V.features.length){var nt=Di(I,V);_=_.filter(function(it){return it.id!==nt.id}),E.remove(nt),Wn(kn(nt,I),function(it){_.push(it),E.insert(it)})}}else(_=kn(h,I).features).forEach(function(it){it.bbox||(it.bbox=jr(ar(it)))}),E.load(Ft(_))}),Ft(_)}function kn(h,p){var _=[],E=cn(h)[0],I=cn(h)[h.geometry.coordinates.length-1];if(pr(E,zn(p))||pr(I,zn(p)))return Ft([h]);var V=oi(),nt=Ei(h);V.load(nt);var it=V.search(p);if(!it.features.length)return Ft([h]);var rt=Di(p,it),ot=function(dt,Pt,yt){var At=yt;return Wn(dt,function(Gt,te){At=te===0&&yt===void 0?Gt:Pt(At,Gt,te)}),At}(nt,function(dt,Pt,yt){var At=cn(Pt)[1],Gt=zn(p);return yt===rt.id?(dt.push(Gt),_.push(vt(dt)),pr(Gt,At)?[Gt]:[Gt,At]):(dt.push(At),dt)},[E]);return ot.length>1&&_.push(vt(ot)),Ft(_)}function Di(h,p){if(!p.features.length)throw new Error("lines must contain features");if(p.features.length===1)return p.features[0];var _,E=1/0;return Wn(p,function(I){var V=Lo(I,h).properties.dist;V<E&&(_=I,E=V)}),_}function pr(h,p){return h[0]===p[0]&&h[1]===p[1]}let Mi=function(h,p){if(!h)throw new Error("line is required");if(!p)throw new Error("splitter is required");var _=sr(h),E=sr(p);if(_!=="LineString")throw new Error("line must be LineString");if(E==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(E==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var I=Or(p,{precision:7});switch(E){case"Point":return kn(h,I);case"MultiPoint":return Ln(h,I);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Ln(h,Kn(h,I))}};function bn(h,p,_){if(_===void 0&&(_={}),!h)throw new Error("point is required");if(!p)throw new Error("polygon is required");var E=zn(h),I=or(p),V=I.type,nt=p.bbox,it=I.coordinates;if(nt&&function(yt,At){return At[0]<=yt[0]&&At[1]<=yt[1]&&At[2]>=yt[0]&&At[3]>=yt[1]}(E,nt)===!1)return!1;V==="Polygon"&&(it=[it]);for(var rt=!1,ot=0;ot<it.length&&!rt;ot++)if(mi(E,it[ot][0],_.ignoreBoundary)){for(var dt=!1,Pt=1;Pt<it[ot].length&&!dt;)mi(E,it[ot][Pt],!_.ignoreBoundary)&&(dt=!0),Pt++;dt||(rt=!0)}return rt}function mi(h,p,_){var E=!1;p[0][0]===p[p.length-1][0]&&p[0][1]===p[p.length-1][1]&&(p=p.slice(0,p.length-1));for(var I=0,V=p.length-1;I<p.length;V=I++){var nt=p[I][0],it=p[I][1],rt=p[V][0],ot=p[V][1];if(h[1]*(nt-rt)+it*(rt-h[0])+ot*(h[0]-nt)==0&&(nt-h[0])*(rt-h[0])<=0&&(it-h[1])*(ot-h[1])<=0)return!_;it>h[1]!=ot>h[1]&&h[0]<(rt-nt)*(h[1]-it)/(ot-it)+nt&&(E=!E)}return E}function Nr(h,p,_,E,I){var V=_[0],nt=_[1],it=h[0],rt=h[1],ot=p[0],dt=p[1],Pt=ot-it,yt=dt-rt,At=(_[0]-it)*yt-(_[1]-rt)*Pt;if(I!==null){if(Math.abs(At)>I)return!1}else if(At!==0)return!1;return E?E==="start"?Math.abs(Pt)>=Math.abs(yt)?Pt>0?it<V&&V<=ot:ot<=V&&V<it:yt>0?rt<nt&&nt<=dt:dt<=nt&&nt<rt:E==="end"?Math.abs(Pt)>=Math.abs(yt)?Pt>0?it<=V&&V<ot:ot<V&&V<=it:yt>0?rt<=nt&&nt<dt:dt<nt&&nt<=rt:E==="both"&&(Math.abs(Pt)>=Math.abs(yt)?Pt>0?it<V&&V<ot:ot<V&&V<it:yt>0?rt<nt&&nt<dt:dt<nt&&nt<rt):Math.abs(Pt)>=Math.abs(yt)?Pt>0?it<=V&&V<=ot:ot<=V&&V<=it:yt>0?rt<=nt&&nt<=dt:dt<=nt&&nt<=rt}let dr=function(h,p,_){_===void 0&&(_={});for(var E=zn(h),I=cn(p),V=0;V<I.length-1;V++){var nt=!1;if(_.ignoreEndVertices&&(V===0&&(nt="start"),V===I.length-2&&(nt="end"),V===0&&V+1===I.length-1&&(nt="both")),Nr(I[V],I[V+1],E,nt,typeof _.epsilon>"u"?null:_.epsilon))return!0}return!1};function ur(h,p){var _=or(h),E=or(p),I=_.type,V=E.type,nt=_.coordinates,it=E.coordinates;switch(I){case"Point":if(V==="Point")return Bi(nt,it);throw new Error("feature2 "+V+" geometry not supported");case"MultiPoint":switch(V){case"Point":return function(rt,ot){var dt,Pt=!1;for(dt=0;dt<rt.coordinates.length;dt++)if(Bi(rt.coordinates[dt],ot.coordinates)){Pt=!0;break}return Pt}(_,E);case"MultiPoint":return function(rt,ot){for(var dt=0,Pt=ot.coordinates;dt<Pt.length;dt++){for(var yt=Pt[dt],At=!1,Gt=0,te=rt.coordinates;Gt<te.length;Gt++)if(Bi(yt,te[Gt])){At=!0;break}if(!At)return!1}return!0}(_,E);default:throw new Error("feature2 "+V+" geometry not supported")}case"LineString":switch(V){case"Point":return dr(E,_,{ignoreEndVertices:!0});case"LineString":return function(rt,ot){for(var dt=!1,Pt=0,yt=ot.coordinates;Pt<yt.length;Pt++){var At=yt[Pt];if(dr({type:"Point",coordinates:At},rt,{ignoreEndVertices:!0})&&(dt=!0),!dr({type:"Point",coordinates:At},rt,{ignoreEndVertices:!1}))return!1}return dt}(_,E);case"MultiPoint":return function(rt,ot){for(var dt=!1,Pt=0,yt=ot.coordinates;Pt<yt.length;Pt++){var At=yt[Pt];if(dr(At,rt,{ignoreEndVertices:!0})&&(dt=!0),!dr(At,rt))return!1}return!!dt}(_,E);default:throw new Error("feature2 "+V+" geometry not supported")}case"Polygon":switch(V){case"Point":return bn(E,_,{ignoreBoundary:!0});case"LineString":return function(rt,ot){var dt=!1,Pt=0,yt=ar(rt),At=ar(ot);if(!co(yt,At))return!1;for(;Pt<ot.coordinates.length-1;Pt++)if(bn({type:"Point",coordinates:Fi(ot.coordinates[Pt],ot.coordinates[Pt+1])},rt,{ignoreBoundary:!0})){dt=!0;break}return dt}(_,E);case"Polygon":return function(rt,ot){if(rt.type==="Feature"&&rt.geometry===null||ot.type==="Feature"&&ot.geometry===null)return!1;var dt=ar(rt),Pt=ar(ot);if(!co(dt,Pt))return!1;for(var yt=or(ot).coordinates,At=0,Gt=yt;At<Gt.length;At++)for(var te=0,Dt=Gt[At];te<Dt.length;te++)if(!bn(Dt[te],rt))return!1;return!0}(_,E);case"MultiPoint":return function(rt,ot){for(var dt=0,Pt=ot.coordinates;dt<Pt.length;dt++)if(!bn(Pt[dt],rt,{ignoreBoundary:!0}))return!1;return!0}(_,E);default:throw new Error("feature2 "+V+" geometry not supported")}default:throw new Error("feature1 "+I+" geometry not supported")}}function co(h,p){return!(h[0]>p[0])&&!(h[2]<p[2])&&!(h[1]>p[1])&&!(h[3]<p[3])}function Bi(h,p){return h[0]===p[0]&&h[1]===p[1]}function Fi(h,p){return[(h[0]+p[0])/2,(h[1]+p[1])/2]}var Le=c(2676),le=c.n(Le);function Rr(h){var p={type:"Feature"};return p.geometry=h,p}function Un(h){return h.type==="Feature"?h.geometry:h}function Pi(h){return h&&h.geometry&&h.geometry.coordinates?h.geometry.coordinates:h}function fo(h){return Rr({type:"Polygon",coordinates:h})}function Zt(h){return Rr({type:"MultiPolygon",coordinates:h})}function En(h){return Array.isArray(h)?1+En(h[0]):-1}function Vr(h){h instanceof L.Polyline&&(h=h.toGeoJSON(15));var p=Pi(h),_=En(p),E=[];return _>1?p.forEach(function(I){E.push(function(V){return Rr({type:"LineString",coordinates:V})}(I))}):E.push(h),E}function bo(h){var p=[];return h.eachLayer(function(_){p.push(Pi(_.toGeoJSON(15)))}),function(_){return Rr({type:"MultiLineString",coordinates:_})}(p)}function Kt(h,p){return function(_){if(Array.isArray(_))return _}(h)||function(_,E){var I=_==null?null:typeof Symbol<"u"&&_[Symbol.iterator]||_["@@iterator"];if(I!=null){var V,nt,it=[],rt=!0,ot=!1;try{for(I=I.call(_);!(rt=(V=I.next()).done)&&(it.push(V.value),!E||it.length!==E);rt=!0);}catch(dt){ot=!0,nt=dt}finally{try{rt||I.return==null||I.return()}finally{if(ot)throw nt}}return it}}(h,p)||function(_,E){if(_){if(typeof _=="string")return eo(_,E);var I=Object.prototype.toString.call(_).slice(8,-1);if(I==="Object"&&_.constructor&&(I=_.constructor.name),I==="Map"||I==="Set")return Array.from(_);if(I==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return eo(_,E)}}(h,p)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function eo(h,p){(p==null||p>h.length)&&(p=h.length);for(var _=0,E=new Array(p);_<p;_++)E[_]=h[_];return E}function Jo(h){return function(p){if(Array.isArray(p))return si(p)}(h)||function(p){if(typeof Symbol<"u"&&p[Symbol.iterator]!=null||p["@@iterator"]!=null)return Array.from(p)}(h)||function(p,_){if(p){if(typeof p=="string")return si(p,_);var E=Object.prototype.toString.call(p).slice(8,-1);if(E==="Object"&&p.constructor&&(E=p.constructor.name),E==="Map"||E==="Set")return Array.from(p);if(E==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(E))return si(p,_)}}(h)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function si(h,p){(p==null||p>h.length)&&(p=h.length);for(var _=0,E=new Array(p);_<p;_++)E[_]=h[_];return E}Z.Cut=Z.Polygon.extend({initialize:function(h){this._map=h,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape:function(){var h=this;if(this._editedLayers=[],(this.options.allowSelfIntersection||(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),!this._doesSelfIntersect))&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){var p=this._layer.getLatLngs();if(!(p.length<=2)){var _=L.polygon(p,this.options.pathOptions);_._latlngInfos=this._layer._latlngInfo,this.cut(_),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(function(E){var I=E.layer,V=E.originalLayer;h._fireCut(V,I,V),h._fireCut(h._map,I,V),V.pm._fireEdit()}),this._editedLayers=[],this.disable(),this.options.continueDrawing&&this.enable()}}},cut:function(h){var p=this,_=this._map._layers,E=h._latlngInfos||[];Object.keys(_).map(function(I){return _[I]}).filter(function(I){return I.pm}).filter(function(I){return!I._pmTempLayer}).filter(function(I){return!L.PM.optIn&&!I.options.pmIgnore||L.PM.optIn&&I.options.pmIgnore===!1}).filter(function(I){return I instanceof L.Polyline}).filter(function(I){return I!==h}).filter(function(I){return I.pm.options.allowCutting}).filter(function(I){return!(p.options.layersToCut&&L.Util.isArray(p.options.layersToCut)&&p.options.layersToCut.length>0)||p.options.layersToCut.indexOf(I)>-1}).filter(function(I){return!p._layerGroup.hasLayer(I)}).filter(function(I){try{var V=!!Kn(h.toGeoJSON(15),I.toGeoJSON(15)).features.length>0;return V||I instanceof L.Polyline&&!(I instanceof L.Polygon)?V:(nt=h.toGeoJSON(15),it=I.toGeoJSON(15),rt=Un(nt),ot=Un(it),!((dt=le().intersection(rt.coordinates,ot.coordinates)).length===0||!(dt.length===1?fo(dt[0]):Zt(dt))))}catch{return I instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}var nt,it,rt,ot,dt}).forEach(function(I){var V;if(I instanceof L.Polygon){var nt=(V=L.polygon(I.getLatLngs())).getLatLngs();E.forEach(function(yt){if(yt&&yt.snapInfo){var At=yt.latlng,Gt=p._calcClosestLayer(At,[V]);if(Gt&&Gt.segment&&Gt.distance<p.options.snapDistance){var te=Gt.segment;if(te&&te.length===2){var Dt=L.PM.Utils._getIndexFromSegment(nt,te),Rn=Dt.indexPath,Tn=Dt.parentPath,Ie=Dt.newIndex;(Rn.length>1?ft()(nt,Tn):nt).splice(Ie,0,At)}}}})}else V=I;var it=p._cutLayer(h,V),rt=L.geoJSON(it,I.options);if(rt.getLayers().length===1){var ot=rt.getLayers();rt=Kt(ot,1)[0]}p._setPane(rt,"layerPane");var dt=rt.addTo(p._map.pm._getContainingLayer());if(dt.pm.enable(I.pm.options),dt.pm.disable(),I._pmTempLayer=!0,h._pmTempLayer=!0,I.remove(),I.removeFrom(p._map.pm._getContainingLayer()),h.remove(),h.removeFrom(p._map.pm._getContainingLayer()),dt.getLayers&&dt.getLayers().length===0&&p._map.pm.removeLayer({target:dt}),dt instanceof L.LayerGroup&&dt.eachLayer(function(yt){p._addDrawnLayerProp(yt)}),p._addDrawnLayerProp(dt),p.options.layersToCut&&L.Util.isArray(p.options.layersToCut)&&p.options.layersToCut.length>0){var Pt=p.options.layersToCut.indexOf(I);Pt>-1&&p.options.layersToCut.splice(Pt,1)}p._editedLayers.push({layer:dt,originalLayer:I})})},_cutLayer:function(h,p){var _,E,I,V,nt,it,rt=L.geoJSON();if(p instanceof L.Polygon)E=p.toGeoJSON(15),I=h.toGeoJSON(15),V=Un(E),nt=Un(I),_=(it=le().difference(V.coordinates,nt.coordinates)).length===0?null:it.length===1?fo(it[0]):Zt(it);else{var ot=Vr(p);ot.forEach(function(dt){var Pt=Mi(dt,h.toGeoJSON(15));(Pt&&Pt.features.length>0?L.geoJSON(Pt):L.geoJSON(dt)).getLayers().forEach(function(yt){ur(h.toGeoJSON(15),yt.toGeoJSON(15))||yt.addTo(rt)})}),_=ot.length>1?bo(rt):rt.toGeoJSON(15)}return _},_change:L.Util.falseFn}),Z.Text=Z.extend({initialize:function(h){this._map=h,this._shape="Text",this.toolbarButtonName="drawText"},enable:function(h){L.Util.setOptions(this,h),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(Rt("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(h){this.enabled()?this.disable():this.enable(h)},_syncHintMarker:function(h){if(this._hintMarker.setLatLng(h.latlng),this.options.snappable){var p=h;p.target=this._hintMarker,this._handleSnapping(p)}},_createMarker:function(h){var p;if(h.latlng&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);var _=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(p=this.options.textOptions)!==null&&p!==void 0&&p.className){var E,I=this.options.textOptions.className.split(" ");(E=this.textArea.classList).add.apply(E,Jo(I))}var V=this._createTextIcon(this.textArea),nt=new L.Marker(_,{textMarker:!0,_textMarkerOverPM:!0,icon:V});if(this._setPane(nt,"markerPane"),this._finishLayer(nt),nt.pm||(nt.options.draggable=!1),nt.addTo(this._map.pm._getContainingLayer()),nt.pm){var it,rt,ot,dt,Pt;nt.pm.textArea=this.textArea,L.setOptions(nt.pm,{removeIfEmpty:(it=(rt=this.options.textOptions)===null||rt===void 0?void 0:rt.removeIfEmpty)===null||it===void 0||it});var yt=(ot=(dt=this.options.textOptions)===null||dt===void 0?void 0:dt.focusAfterDraw)===null||ot===void 0||ot;nt.pm._createTextMarker(yt),(Pt=this.options.textOptions)!==null&&Pt!==void 0&&Pt.text&&nt.pm.setText(this.options.textOptions.text)}this._fireCreate(nt),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this.enable()}},_createTextArea:function(){var h=document.createElement("textarea");return h.autofocus=!0,h.readOnly=!0,h.classList.add("pm-textarea","pm-disabled"),h},_createTextIcon:function(h){return L.divIcon({className:"pm-text-marker",html:h})}});let De={enableLayerDrag:function(){if(this.options.draggable&&this._layer._map){this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,Bt(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;var h=this._getDOMElem();h&&(Bt(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(h)):L.DomEvent.on(h,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()}},disableLayerDrag:function(){this._layerDragEnabled=!1,Bt(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();var h=this._getDOMElem();h&&(Bt(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(h)):L.DomEvent.off(h,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging:function(){return this._dragging},layerDragEnabled:function(){return!!this._layerDragEnabled},_simulateMouseDownEvent:function(h){var p=h.touches?h.touches[0]:h,_={originalEvent:p,target:this._layer};return _.containerPoint=this._map.mouseEventToContainerPoint(p),_.latlng=this._map.containerPointToLatLng(_.containerPoint),this._dragMixinOnMouseDown(_),!1},_simulateMouseMoveEvent:function(h){var p=h.touches?h.touches[0]:h,_={originalEvent:p,target:this._layer};return _.containerPoint=this._map.mouseEventToContainerPoint(p),_.latlng=this._map.containerPointToLatLng(_.containerPoint),this._dragMixinOnMouseMove(_),!1},_simulateMouseUpEvent:function(h){var p={originalEvent:h.touches?h.touches[0]:h,target:this._layer};return h.type.indexOf("touch")===-1&&(p.containerPoint=this._map.mouseEventToContainerPoint(h),p.latlng=this._map.containerPointToLatLng(p.containerPoint)),this._dragMixinOnMouseUp(p),!1},_dragMixinOnMouseDown:function(h){if(!(h.originalEvent.button>0)){this._overwriteEventIfItComesFromMarker(h);var p=h._fromLayerSync,_=this._syncLayers("_dragMixinOnMouseDown",h);this._layer instanceof L.Marker&&(!this.options.snappable||p||_?this._disableSnapping():this._initSnappableMarkers()),this._layer instanceof L.CircleMarker&&!(this._layer instanceof L.Circle)&&(!this.options.snappable||p||_?this._layer.pm.options.editable?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag():this._layer.pm.options.editable||this._initSnappableMarkersDrag()),this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=h.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)}},_dragMixinOnMouseMove:function(h){this._overwriteEventIfItComesFromMarker(h);var p=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",h),this._dragging||(this._dragging=!0,L.DomUtil.addClass(p,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=h.latlng),this._onLayerDrag(h),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp:function(h){var p=this,_=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",h),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),!!this._dragging&&(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(function(){p._dragging=!1,_&&L.DomUtil.removeClass(_,"leaflet-pm-dragging"),p._fireDragEnd(),p._fireEdit(),p._layerEdited=!0},10),!0)},_onLayerDrag:function(h){var p=h.latlng,_=p.lat-this._tempDragCoord.lat,E=p.lng-this._tempDragCoord.lng,I=function dt(Pt){return Pt.map(function(yt){if(Array.isArray(yt))return dt(yt);var At={lat:yt.lat+_,lng:yt.lng+E};return(yt.alt||yt.alt===0)&&(At.alt=yt.alt),At})};if(this._layer instanceof L.Circle||this._layer instanceof L.CircleMarker&&this._layer.options.editable){var V=I([this._layer.getLatLng()]);this._layer.setLatLng(V[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){var nt=this._layer.getLatLng();this._layer._snapped&&(nt=this._layer._orgLatLng);var it=I([nt]);this._layer.setLatLng(it[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){var rt=I([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(rt),this._fireChange(this._layer.getBounds(),"Edit")}else{var ot=I(this._layer.getLatLngs());this._layer.setLatLngs(ot),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=p,h.layer=this._layer,this._fireDrag(h)},addDraggingClass:function(){var h=this._getDOMElem();h&&L.DomUtil.addClass(h,"leaflet-pm-draggable")},removeDraggingClass:function(){var h=this._getDOMElem();h&&L.DomUtil.removeClass(h,"leaflet-pm-draggable")},_getDOMElem:function(){var h=null;return this._layer._path?h=this._layer._path:this._layer._renderer&&this._layer._renderer._container?h=this._layer._renderer._container:this._layer._image?h=this._layer._image:this._layer._icon&&(h=this._layer._icon),h},_overwriteEventIfItComesFromMarker:function(h){h.target.getLatLng&&(!h.target._radius||h.target._radius<=10)&&(h.containerPoint=this._map.mouseEventToContainerPoint(h.originalEvent),h.latlng=this._map.containerPointToLatLng(h.containerPoint))},_syncLayers:function(h,p){var _=this;if(this.enabled())return!1;if(!p._fromLayerSync&&this._layer===p.target&&this.options.syncLayersOnDrag){p._fromLayerSync=!0;var E=[];if(L.Util.isArray(this.options.syncLayersOnDrag))E=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(function(nt){nt instanceof L.LayerGroup&&(E=E.concat(nt.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(var I in this._parentLayerGroup){var V=this._parentLayerGroup[I];V.pm&&(E=V.pm.getLayers(!0))}return L.Util.isArray(E)&&E.length>0&&(E=E.filter(function(nt){return!!nt.pm}).filter(function(nt){return!!nt.pm.options.draggable})).forEach(function(nt){nt!==_._layer&&nt.pm[h]&&(nt._snapped=!1,nt.pm[h](p))}),E.length>0}return!1},_stopDOMImageDrag:function(h){return h.preventDefault(),!1}};function gr(h,p,_){var E=_.getMaxZoom();if(E===1/0&&(E=_.getZoom()),L.Util.isArray(h)){var I=[];return h.forEach(function(V){I.push(gr(V,p,_))}),I}return h instanceof L.LatLng?function(V,nt,it,rt){return it.unproject(nt.transform(it.project(V,rt)),rt)}(h,p,_,E):null}function ai(h,p){p instanceof L.Layer&&(p=p.getLatLng());var _=h.getMaxZoom();return _===1/0&&(_=h.getZoom()),h.project(p,_)}function Vi(h,p){var _=h.getMaxZoom();return _===1/0&&(_=h.getZoom()),h.unproject(p,_)}var It={_onRotateStart:function(h){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=ai(this._map,this._rotationOriginLatLng),this._rotationStartPoint=ai(this._map,h.target.getLatLng()),this._initialRotateLatLng=fe(this._layer),this._startAngle=this.getAngle();var p=fe(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,p),this._fireRotationStart(this._map,p)},_onRotate:function(h){var p=ai(this._map,h.target.getLatLng()),_=this._rotationStartPoint,E=this._rotationOriginPoint,I=Math.atan2(p.y-E.y,p.x-E.x)-Math.atan2(_.y-E.y,_.x-E.x);this._layer.setLatLngs(this._rotateLayer(I,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));var V=this;(function ot(dt){var Pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],yt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;if(yt>-1&&Pt.push(yt),L.Util.isArray(dt[0]))dt.forEach(function(Gt,te){return ot(Gt,Pt.slice(),te)});else{var At=ft()(V._markers,Pt);dt.forEach(function(Gt,te){At[te].setLatLng(Gt)})}})(this._layer.getLatLngs());var nt=fe(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(I,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));var it=180*I/Math.PI,rt=(it=it<0?it+360:it)+this._startAngle;this._setAngle(rt),this._rotationLayer.pm._setAngle(rt),this._fireRotation(this._rotationLayer,it,nt),this._fireRotation(this._map,it,nt),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd:function(){var h=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;var p=fe(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=fe(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,h,p),this._fireRotationEnd(this._map,h,p),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer:function(h,p,_,E,I){var V=ai(I,_);return this._matrix=E.clone().rotate(h,V).flip(),gr(p,this._matrix,I)},_setAngle:function(h){h=h<0?h+360:h,this._angle=h%360},_getRotationCenter:function(){var h=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),p=h.getCenter();return h.removeFrom(this._layer._map),p},enableRotate:function(){this.options.allowRotation?(this.rotateEnabled()&&this.disableRotate(),this._rotatePoly=L.polygon(this._layer.getLatLngs(),{fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0}),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=fe(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)):this.disableRotate()},disableRotate:function(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled:function(){return this._rotateEnabled},rotateLayer:function(h){var p=this.getAngle(),_=this._layer.getLatLngs(),E=h*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(E,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+h),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(E,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());var I=this.getAngle()-p;I=I<0?I+360:I,this._startAngle=p,this._fireRotation(this._layer,I,_,this._layer),this._fireRotation(this._map||this._layer._map,I,_,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle:function(h){var p=h-this.getAngle();this.rotateLayer(p)},getAngle:function(){return this._angle||0},setInitAngle:function(h){this._setAngle(h)}};let zi=It,fn=L.Class.extend({includes:[De,F,zi,bt],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0},setOptions:function(h){L.Util.setOptions(this,h)},getOptions:function(){return this.options},applyOptions:function(){},isPolygon:function(){return this._layer instanceof L.Polygon},getShape:function(){return this._shape},_setPane:function(h,p){p==="layerPane"?h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":p==="vertexPane"?h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":p==="markerPane"&&(h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove:function(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation:function(h,p){var _=p.target,E={layer:this._layer,marker:_,event:p},I="";return h==="move"?I="moveVertexValidation":h==="add"?I="addVertexValidation":h==="remove"&&(I="removeVertexValidation"),this.options[I]&&typeof this.options[I]=="function"&&!this.options[I](E)?(h==="move"&&(_._cancelDragEventChain=_.getLatLng()),!1):(_._cancelDragEventChain=null,!0)},_vertexValidationDrag:function(h){return!h._cancelDragEventChain||(h._latlng=h._cancelDragEventChain,h.update(),!1)},_vertexValidationDragEnd:function(h){return!h._cancelDragEventChain||(h._cancelDragEventChain=null,!1)}});function Qn(h){return function(p){if(Array.isArray(p))return Ci(p)}(h)||function(p){if(typeof Symbol<"u"&&p[Symbol.iterator]!=null||p["@@iterator"]!=null)return Array.from(p)}(h)||function(p,_){if(p){if(typeof p=="string")return Ci(p,_);var E=Object.prototype.toString.call(p).slice(8,-1);if(E==="Object"&&p.constructor&&(E=p.constructor.name),E==="Map"||E==="Set")return Array.from(p);if(E==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(E))return Ci(p,_)}}(h)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ci(h,p){(p==null||p>h.length)&&(p=h.length);for(var _=0,E=new Array(p);_<p;_++)E[_]=h[_];return E}fn.LayerGroup=L.Class.extend({initialize:function(h){var p=this;this._layerGroup=h,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(function(_){return p._initLayer(_)}),this._layerGroup.on("layeradd",L.Util.throttle(function(_){if(!_.layer._pmTempLayer){p._layers=p.getLayers();var E=p._layers.filter(function(I){return!I.pm._parentLayerGroup||!(p._layerGroup._leaflet_id in I.pm._parentLayerGroup)});E.forEach(function(I){p._initLayer(I)}),E.length>0&&p._getMap()&&p._getMap().pm.globalEditModeEnabled()&&p.enabled()&&p.enable(p.getOptions())}},100,this),this),this._layerGroup.on("layerremove",function(_){p._removeLayerFromGroup(_.target)},this),this._layerGroup.on("layerremove",L.Util.throttle(function(_){_.target._pmTempLayer||(p._layers=p.getLayers())},100,this),this)},enable:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];p.length===0&&(this._layers=this.getLayers()),this._options=h,this._layers.forEach(function(_){_ instanceof L.LayerGroup?p.indexOf(_._leaflet_id)===-1&&(p.push(_._leaflet_id),_.pm.enable(h,p)):_.pm.enable(h)})},disable:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];h.length===0&&(this._layers=this.getLayers()),this._layers.forEach(function(p){p instanceof L.LayerGroup?h.indexOf(p._leaflet_id)===-1&&(h.push(p._leaflet_id),p.pm.disable(h)):p.pm.disable()})},enabled:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];h.length===0&&(this._layers=this.getLayers());var p=this._layers.find(function(_){return _ instanceof L.LayerGroup?h.indexOf(_._leaflet_id)===-1&&(h.push(_._leaflet_id),_.pm.enabled(h)):_.pm.enabled()});return!!p},toggleEdit:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];p.length===0&&(this._layers=this.getLayers()),this._options=h,this._layers.forEach(function(_){_ instanceof L.LayerGroup?p.indexOf(_._leaflet_id)===-1&&(p.push(_._leaflet_id),_.pm.toggleEdit(h,p)):_.pm.toggleEdit(h)})},_initLayer:function(h){var p=L.Util.stamp(this._layerGroup);h.pm._parentLayerGroup||(h.pm._parentLayerGroup={}),h.pm._parentLayerGroup[p]=this._layerGroup},_removeLayerFromGroup:function(h){if(h.pm&&h.pm._layerGroup){var p=L.Util.stamp(this._layerGroup);delete h.pm._layerGroup[p]}},dragging:function(){if(this._layers=this.getLayers(),this._layers){var h=this._layers.find(function(p){return p.pm.dragging()});return!!h}return!1},getOptions:function(){return this.options},_getMap:function(){var h;return this._map||((h=this._layers.find(function(p){return!!p._map}))===null||h===void 0?void 0:h._map)||null},getLayers:function(){var h=arguments.length>0&&arguments[0]!==void 0&&arguments[0],p=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],_=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],I=[];return h?this._layerGroup.getLayers().forEach(function(V){I.push(V),V instanceof L.LayerGroup&&E.indexOf(V._leaflet_id)===-1&&(E.push(V._leaflet_id),I=I.concat(V.pm.getLayers(!0,!0,!0,E)))}):I=this._layerGroup.getLayers(),_&&(I=I.filter(function(V){return!(V instanceof L.LayerGroup)})),p&&(I=(I=(I=I.filter(function(V){return!!V.pm})).filter(function(V){return!V._pmTempLayer})).filter(function(V){return!L.PM.optIn&&!V.options.pmIgnore||L.PM.optIn&&V.options.pmIgnore===!1})),I},setOptions:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];p.length===0&&(this._layers=this.getLayers()),this.options=h,this._layers.forEach(function(_){_.pm&&(_ instanceof L.LayerGroup?p.indexOf(_._leaflet_id)===-1&&(p.push(_._leaflet_id),_.pm.setOptions(h,p)):_.pm.setOptions(h))})}}),fn.Marker=fn.extend({_shape:"Marker",initialize:function(h){this._layer=h,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{draggable:!0};L.Util.setOptions(this,h),this.options.allowEditing&&this._layer._map?(this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()):this.disable()},disable:function(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled:function(){return this._enabled},toggleEdit:function(h){this.enabled()?this.disable():this.enable(h)},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker:function(h){var p=h.target;p.remove(),this._fireRemove(p),this._fireRemove(this._map,p)},_onDragEnd:function(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers:function(){var h=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0||this.options.snapSegment,h.off("pm:drag",this._handleSnapping,this),h.on("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.on("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this),h.on("pm:dragstart",this._unsnap,this)},_disableSnapping:function(){var h=this._layer;h.off("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this)}});let tr={filterMarkerGroup:function(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents:function(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache:function(){var h=[].concat(Qn(this._markerGroup.getLayers()),Qn(this.markerCache));this.markerCache=h.filter(function(p,_,E){return E.indexOf(p)===_})},renderLimits:function(h){var p=this;this.markerCache.forEach(function(_){h.includes(_)?p._markerGroup.addLayer(_):p._markerGroup.removeLayer(_)})},applyLimitFilters:function(h){var p=h.latlng,_=p===void 0?{lat:0,lng:0}:p;if(!this._preventRenderMarkers){var E=Qn(this._filterClosestMarkers(_));this.renderLimits(E)}},_filterClosestMarkers:function(h){var p=Qn(this.markerCache),_=this.options.limitMarkersToCount;return _===-1?p:(p.sort(function(E,I){return E._latlng.distanceTo(h)-I._latlng.distanceTo(h)}),p.filter(function(E,I){return!(_>-1)||I<_}))},_preventRenderMarkers:!1,_preventRenderingMarkers:function(h){this._preventRenderMarkers=!!h}};function Ae(h,p){return function(_){if(Array.isArray(_))return _}(h)||function(_,E){var I=_==null?null:typeof Symbol<"u"&&_[Symbol.iterator]||_["@@iterator"];if(I!=null){var V,nt,it=[],rt=!0,ot=!1;try{for(I=I.call(_);!(rt=(V=I.next()).done)&&(it.push(V.value),!E||it.length!==E);rt=!0);}catch(dt){ot=!0,nt=dt}finally{try{rt||I.return==null||I.return()}finally{if(ot)throw nt}}return it}}(h,p)||function(_,E){if(_){if(typeof _=="string")return be(_,E);var I=Object.prototype.toString.call(_).slice(8,-1);if(I==="Object"&&_.constructor&&(I=_.constructor.name),I==="Map"||I==="Set")return Array.from(_);if(I==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return be(_,E)}}(h,p)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function be(h,p){(p==null||p>h.length)&&(p=h.length);for(var _=0,E=new Array(p);_<p;_++)E[_]=h[_];return E}function Nn(h){return function(p){if(Array.isArray(p))return ui(p)}(h)||function(p){if(typeof Symbol<"u"&&p[Symbol.iterator]!=null||p["@@iterator"]!=null)return Array.from(p)}(h)||function(p,_){if(p){if(typeof p=="string")return ui(p,_);var E=Object.prototype.toString.call(p).slice(8,-1);if(E==="Object"&&p.constructor&&(E=p.constructor.name),E==="Map"||E==="Set")return Array.from(p);if(E==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(E))return ui(p,_)}}(h)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ui(h,p){(p==null||p>h.length)&&(p=h.length);for(var _=0,E=new Array(p);_<p;_++)E[_]=h[_];return E}fn.Line=fn.extend({includes:[tr],_shape:"Line",initialize:function(h){this._layer=h,this._enabled=!1},enable:function(h){L.Util.setOptions(this,h),this._map=this._layer._map,this._map&&(this.options.allowEditing?(this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()):this.disable())},disable:function(){if(this.enabled()&&!this._dragging){this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);var h=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(h,"leaflet-pm-draggable"),this._map.hasLayer(this._layer)&&!this.hasSelfIntersection()||L.DomUtil.removeClass(h,"leaflet-pm-invalid"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()}},enabled:function(){return this._enabled},toggleEdit:function(h){return this.enabled()?this.disable():this.enable(h),this.enabled()},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers:function(){var h=this,p=this._map,_=this._layer.getLatLngs();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,this._markers=function E(I){if(Array.isArray(I[0]))return I.map(E,h);var V=I.map(h._createMarker,h);return h.options.hideMiddleMarkers!==!0&&I.map(function(nt,it){var rt=h.isPolygon()?(it+1)%I.length:it+1;return h._createMiddleMarker(V[it],V[rt])}),V}(_),this.filterMarkerGroup(),p.addLayer(this._markerGroup)},_createMarker:function(h){var p=new L.Marker(h,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(p,"vertexPane"),p._pmTempLayer=!0,this.options.rotate?(p.on("dragstart",this._onRotateStart,this),p.on("drag",this._onRotate,this),p.on("dragend",this._onRotateEnd,this)):(p.on("click",this._onVertexClick,this),p.on("dragstart",this._onMarkerDragStart,this),p.on("move",this._onMarkerDrag,this),p.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||p.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(p),p},_createMiddleMarker:function(h,p){if(!h||!p)return!1;var _=L.PM.Utils.calcMiddleLatLng(this._map,h.getLatLng(),p.getLatLng()),E=this._createMarker(_),I=L.divIcon({className:"marker-icon marker-icon-middle"});return E.setIcon(I),E.leftM=h,E.rightM=p,h._middleMarkerNext=E,p._middleMarkerPrev=E,E.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),E.on("movestart",this._onMiddleMarkerMoveStart,this),E},_onMiddleMarkerClick:function(h){var p=h.target;if(this._vertexValidation("add",h)){var _=L.divIcon({className:"marker-icon"});p.setIcon(_),this._addMarker(p,p.leftM,p.rightM)}},_onMiddleMarkerMoveStart:function(h){var p=h.target;p.on("moveend",this._onMiddleMarkerMoveEnd,this),this._vertexValidation("add",h)?(p._dragging=!0,this._addMarker(p,p.leftM,p.rightM)):p.on("move",this._onMiddleMarkerMovePrevent,this)},_onMiddleMarkerMovePrevent:function(h){var p=h.target;this._vertexValidationDrag(p)},_onMiddleMarkerMoveEnd:function(h){var p=h.target;if(p.off("move",this._onMiddleMarkerMovePrevent,this),p.off("moveend",this._onMiddleMarkerMoveEnd,this),this._vertexValidationDragEnd(p)){var _=L.divIcon({className:"marker-icon"});p.setIcon(_),setTimeout(function(){delete p._dragging},100)}},_addMarker:function(h,p,_){h.off("movestart",this._onMiddleMarkerMoveStart,this),h.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);var E=h.getLatLng(),I=this._layer._latlngs;delete h.leftM,delete h.rightM;var V=L.PM.Utils.findDeepMarkerIndex(this._markers,p),nt=V.indexPath,it=V.index,rt=V.parentPath,ot=nt.length>1?ft()(I,rt):I,dt=nt.length>1?ft()(this._markers,rt):this._markers;ot.splice(it+1,0,E),dt.splice(it+1,0,h),this._layer.setLatLngs(I),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(p,h),this._createMiddleMarker(h,_)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(h,L.PM.Utils.findDeepMarkerIndex(this._markers,h).indexPath,E),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection:function(){return pe(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval:function(){this._handleLayerStyle(!0),this.hasSelfIntersection()&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle:function(h){var p=this._layer;if(this.hasSelfIntersection()){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return;h?this._flashLayer():(p.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(pe(this._layer.toGeoJSON(15)))}else p.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1)},_flashLayer:function(){var h=this;this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(function(){h._layer.setStyle({color:h.cachedColor}),h.isRed=!1},200)},_updateDisabledMarkerStyle:function(h,p){var _=this;h.forEach(function(E){Array.isArray(E)?_._updateDisabledMarkerStyle(E,p):E._icon&&(p&&!_._checkMarkerAllowedToDrag(E)?L.DomUtil.addClass(E._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(E._icon,"vertexmarker-disabled"))})},_removeMarker:function(h){var p=h.target;if(this._vertexValidation("remove",h)){this.options.allowSelfIntersection||(this._coordsBeforeEdit=fe(this._layer,this._layer.getLatLngs()));var _=this._layer.getLatLngs(),E=L.PM.Utils.findDeepMarkerIndex(this._markers,p),I=E.indexPath,V=E.index,nt=E.parentPath;if(I){var it=I.length>1?ft()(_,nt):_,rt=I.length>1?ft()(this._markers,nt):this._markers;if(this.options.removeLayerBelowMinVertexCount||!(it.length<=2||this.isPolygon()&&it.length<=3)){it.splice(V,1),this._layer.setLatLngs(_),this.isPolygon()&&it.length<=2&&it.splice(0,it.length);var ot=!1;if(it.length<=1&&(it.splice(0,it.length),nt.length>1&&I.length>1&&(_=Qt(_)),this._layer.setLatLngs(_),this._initMarkers(),ot=!0),Ot(_)||this._layer.remove(),_=Qt(_),this._layer.setLatLngs(_),this._markers=Qt(this._markers),!ot&&(rt=I.length>1?ft()(this._markers,nt):this._markers,p._middleMarkerPrev&&this._markerGroup.removeLayer(p._middleMarkerPrev),p._middleMarkerNext&&this._markerGroup.removeLayer(p._middleMarkerNext),this._markerGroup.removeLayer(p),rt)){var dt,Pt;if(this.isPolygon()?(dt=(V+1)%rt.length,Pt=(V+(rt.length-1))%rt.length):(Pt=V-1<0?void 0:V-1,dt=V+1>=rt.length?void 0:V+1),dt!==Pt){var yt=rt[Pt],At=rt[dt];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(yt,At)}rt.splice(V,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(p,I),this._fireChange(this._layer.getLatLngs(),"Edit")}else this._flashLayer()}}},updatePolygonCoordsFromMarkerDrag:function(h){var p=this._layer.getLatLngs(),_=h.getLatLng(),E=L.PM.Utils.findDeepMarkerIndex(this._markers,h),I=E.indexPath,V=E.index,nt=E.parentPath;(I.length>1?ft()(p,nt):p).splice(V,1,_),this._layer.setLatLngs(p)},_getNeighborMarkers:function(h){var p=L.PM.Utils.findDeepMarkerIndex(this._markers,h),_=p.indexPath,E=p.index,I=p.parentPath,V=_.length>1?ft()(this._markers,I):this._markers,nt=(E+1)%V.length;return{prevMarker:V[(E+(V.length-1))%V.length],nextMarker:V[nt]}},_checkMarkerAllowedToDrag:function(h){var p=this._getNeighborMarkers(h),_=p.prevMarker,E=p.nextMarker,I=L.polyline([_.getLatLng(),h.getLatLng()]),V=L.polyline([h.getLatLng(),E.getLatLng()]),nt=Kn(this._layer.toGeoJSON(15),I.toGeoJSON(15)).features.length,it=Kn(this._layer.toGeoJSON(15),V.toGeoJSON(15)).features.length;return h.getLatLng()===this._markers[0][0].getLatLng()?it+=1:h.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(nt+=1),!(nt<=2&&it<=2)},_onMarkerDragStart:function(h){var p=h.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),this._vertexValidation("move",h)){var _=L.PM.Utils.findDeepMarkerIndex(this._markers,p).indexPath;this._fireMarkerDragStart(h,_),this.options.allowSelfIntersection||(this._coordsBeforeEdit=fe(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(p):this._markerAllowedToDrag=null}},_onMarkerDrag:function(h){var p=h.target;if(this._vertexValidationDrag(p)){var _=L.PM.Utils.findDeepMarkerIndex(this._markers,p),E=_.indexPath,I=_.index,V=_.parentPath;if(E){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1)return this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),void this._handleLayerStyle();this.updatePolygonCoordsFromMarkerDrag(p);var nt=E.length>1?ft()(this._markers,V):this._markers,it=(I+1)%nt.length,rt=(I+(nt.length-1))%nt.length,ot=p.getLatLng(),dt=nt[rt].getLatLng(),Pt=nt[it].getLatLng();if(p._middleMarkerNext){var yt=L.PM.Utils.calcMiddleLatLng(this._map,ot,Pt);p._middleMarkerNext.setLatLng(yt)}if(p._middleMarkerPrev){var At=L.PM.Utils.calcMiddleLatLng(this._map,ot,dt);p._middleMarkerPrev.setLatLng(At)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(h,E),this._fireChange(this._layer.getLatLngs(),"Edit")}}},_onMarkerDragEnd:function(h){var p=h.target;if(this._vertexValidationDragEnd(p)){var _=L.PM.Utils.findDeepMarkerIndex(this._markers,p).indexPath,E=this.hasSelfIntersection();E&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(E=!1);var I=!this.options.allowSelfIntersection&&E;if(this._fireMarkerDragEnd(h,_,I),I)return this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),void this._fireLayerReset(h,_);!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")}},_onVertexClick:function(h){var p=h.target;if(!p._dragging){var _=L.PM.Utils.findDeepMarkerIndex(this._markers,p).indexPath;this._fireVertexClick(h,_)}}}),fn.Polygon=fn.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag:function(h){var p=this._getNeighborMarkers(h),_=p.prevMarker,E=p.nextMarker,I=L.polyline([_.getLatLng(),h.getLatLng()]),V=L.polyline([h.getLatLng(),E.getLatLng()]),nt=Kn(this._layer.toGeoJSON(15),I.toGeoJSON(15)).features.length,it=Kn(this._layer.toGeoJSON(15),V.toGeoJSON(15)).features.length;return!(nt<=2&&it<=2)}}),fn.Rectangle=fn.Polygon.extend({_shape:"Rectangle",_initMarkers:function(){var h=this,p=this._map,_=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,p.addLayer(this._markerGroup),this._markers=[],this._markers[0]=_.map(this._createMarker,this);var E=Ae(this._markers,1);this._cornerMarkers=E[0],this._layer.getLatLngs()[0].forEach(function(I,V){var nt=h._cornerMarkers.find(function(it){return it._index===V});nt&&nt.setLatLng(I)})},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker:function(h,p){var _=new L.Marker(h,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(_,"vertexPane"),_._origLatLng=h,_._index=p,_._pmTempLayer=!0,this._markerGroup.addLayer(_),_},_addMarkerEvents:function(){var h=this;this._markers[0].forEach(function(p){p.on("dragstart",h._onMarkerDragStart,h),p.on("drag",h._onMarkerDrag,h),p.on("dragend",h._onMarkerDragEnd,h),h.options.preventMarkerRemoval||p.on("contextmenu",h._removeMarker,h)})},_removeMarker:function(){return null},_onMarkerDragStart:function(h){if(this._vertexValidation("move",h)){var p=h.target,_=this._cornerMarkers;p._oppositeCornerLatLng=_.find(function(E){return E._index===(p._index+2)%4}).getLatLng(),p._snapped=!1,this._fireMarkerDragStart(h)}},_onMarkerDrag:function(h){var p=h.target;this._vertexValidationDrag(p)&&p._index!==void 0&&(this._adjustRectangleForMarkerMove(p),this._fireMarkerDrag(h),this._fireChange(this._layer.getLatLngs(),"Edit"))},_onMarkerDragEnd:function(h){var p=h.target;this._vertexValidationDragEnd(p)&&(this._cornerMarkers.forEach(function(_){delete _._oppositeCornerLatLng}),this._fireMarkerDragEnd(h),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"))},_adjustRectangleForMarkerMove:function(h){L.extend(h._origLatLng,h._latlng);var p=L.PM.Utils._getRotatedRectangle(h.getLatLng(),h._oppositeCornerLatLng,this._angle||0,this._map);this._layer.setLatLngs(p),this._adjustAllMarkers(),this._layer.redraw()},_adjustAllMarkers:function(){var h=this,p=this._layer.getLatLngs()[0];p&&p.length!==4&&p.length>0?(p.forEach(function(_,E){h._cornerMarkers[E].setLatLng(_)}),this._cornerMarkers.slice(p.length).forEach(function(_){_.setLatLng(p[0])})):p&&p.length?this._cornerMarkers.forEach(function(_){_.setLatLng(p[_._index])}):console.error("The layer has no LatLngs")},_findCorners:function(){var h=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(h[0],h[2],this._angle||0,this._map)}}),fn.Circle=fn.extend({_shape:"Circle",initialize:function(h){this._layer=h,this._enabled=!1,this._updateHiddenPolyCircle()},enable:function(h){L.Util.setOptions(this,h),this._map=this._layer._map,this.options.allowEditing?(this.enabled()||this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._updateHiddenPolyCircle(),this._fireEnable()):this.disable()},disable:function(){if(this.enabled()&&!this._dragging){this._centerMarker.off("dragstart",this._onCircleDragStart,this),this._centerMarker.off("drag",this._onCircleDrag,this),this._centerMarker.off("dragend",this._onCircleDragEnd,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this),this._layer.off("remove",this.disable,this),this._enabled=!1,this._helperLayers.clearLayers();var h=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(h,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()}},enabled:function(){return this._enabled},toggleEdit:function(h){this.enabled()?this.disable():this.enable(h)},_initMarkers:function(){var h=this._map;this._helperLayers&&this._helperLayers.clearLayers(),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(h);var p=this._layer.getLatLng(),_=this._layer._radius,E=this._getLatLngOnCircle(p,_);this._centerMarker=this._createCenterMarker(p),this._outerMarker=this._createOuterMarker(E),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},applyOptions:function(){this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this),this._centerMarker.on("move",this._moveCircle,this)):this._disableSnapping()},_createHintLine:function(h,p){var _=h.getLatLng(),E=p.getLatLng();this._hintline=L.polyline([_,E],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker:function(h){var p=this._createMarker(h);return L.DomUtil.addClass(p._icon,"leaflet-pm-draggable"),p.on("drag",this._moveCircle,this),p.on("dragstart",this._onCircleDragStart,this),p.on("drag",this._onCircleDrag,this),p.on("dragend",this._onCircleDragEnd,this),p},_createOuterMarker:function(h){var p=this._createMarker(h);return p.on("drag",this._resizeCircle,this),p},_createMarker:function(h){var p=new L.Marker(h,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(p,"vertexPane"),p._origLatLng=h,p._pmTempLayer=!0,p.on("dragstart",this._onMarkerDragStart,this),p.on("drag",this._onMarkerDrag,this),p.on("dragend",this._onMarkerDragEnd,this),this._helperLayers.addLayer(p),p},_resizeCircle:function(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_moveCircle:function(h){if(!h.target._cancelDragEventChain){var p=h.latlng;this._layer.setLatLng(p);var _=this._layer._radius,E=this._getLatLngOnCircle(p,_);this._outerMarker._latlng=E,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")}},_syncCircleRadius:function(){var h=this._centerMarker.getLatLng(),p=this._outerMarker.getLatLng(),_=this._map.distance(h,p);this.options.minRadiusCircle&&_<this.options.minRadiusCircle?this._layer.setRadius(this.options.minRadiusCircle):this.options.maxRadiusCircle&&_>this.options.maxRadiusCircle?this._layer.setRadius(this.options.maxRadiusCircle):this._layer.setRadius(_),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine:function(){var h=this._centerMarker.getLatLng(),p=this._outerMarker.getLatLng();this._hintline.setLatLngs([h,p])},_disableSnapping:function(){var h=this;this._markers.forEach(function(p){p.off("move",h._syncHintLine,h),p.off("move",h._syncCircleRadius,h),p.off("drag",h._handleSnapping,h),p.off("dragend",h._cleanupSnapping,h)}),this._layer.off("pm:dragstart",this._unsnap,this)},_onMarkerDragStart:function(h){this._vertexValidation("move",h)&&this._fireMarkerDragStart(h)},_onMarkerDrag:function(h){var p=h.target;this._vertexValidationDrag(p)&&this._fireMarkerDrag(h)},_onMarkerDragEnd:function(h){var p=h.target;this._vertexValidationDragEnd(p)&&(this._fireEdit(),this._layerEdited=!0,this._fireMarkerDragEnd(h))},_onCircleDragStart:function(h){this._vertexValidationDrag(h.target)?(delete this._vertexValidationReset,this._fireDragStart()):this._vertexValidationReset=!0},_onCircleDrag:function(h){this._vertexValidationReset||this._fireDrag(h)},_onCircleDragEnd:function(){this._vertexValidationReset?delete this._vertexValidationReset:this._fireDragEnd()},_updateHiddenPolyCircle:function(){var h=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!h).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!h),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_getLatLngOnCircle:function(h,p){var _=this._map.project(h),E=L.point(_.x+p,_.y);return this._map.unproject(E)},_getNewDestinationOfOuterMarker:function(){var h=this._centerMarker.getLatLng(),p=this._outerMarker.getLatLng(),_=this._map.distance(h,p);return this.options.minRadiusCircle&&_<this.options.minRadiusCircle?p=Re(this._map,h,p,this.options.minRadiusCircle):this.options.maxRadiusCircle&&_>this.options.maxRadiusCircle&&(p=Re(this._map,h,p,this.options.maxRadiusCircle)),p},_handleOuterMarkerSnapping:function(){if(this._outerMarker._snapped){var h=this._centerMarker.getLatLng(),p=this._outerMarker.getLatLng(),_=this._map.distance(h,p);(this.options.minRadiusCircle&&_<this.options.minRadiusCircle||this.options.maxRadiusCircle&&_>this.options.maxRadiusCircle)&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())}}),fn.CircleMarker=fn.extend({_shape:"CircleMarker",initialize:function(h){this._layer=h,this._enabled=!1,this._updateHiddenPolyCircle()},enable:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{draggable:!0,snappable:!0};L.Util.setOptions(this,h),this.options.allowEditing&&this._layer._map?(this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this),this._updateHiddenPolyCircle(),this._fireEnable()):this.disable()},disable:function(){this._dragging||(this._helperLayers&&this._helperLayers.clearLayers(),this._map||(this._map=this._layer._map),this._map||(this.options.editable?(this._map.off("move",this._syncMarkers,this),this._outerMarker&&this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this)),this.disableLayerDrag(),this._layer.off("contextmenu",this._removeMarker,this),this._layer.off("remove",this.disable,this),this.enabled()&&(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},enabled:function(){return this._enabled},toggleEdit:function(h){this.enabled()?this.disable():this.enable(h)},applyOptions:function(){!this.options.editable&&this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.editable?(this._initMarkers(),this._map.on("move",this._syncMarkers,this)):this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this.options.editable?(this._initSnappableMarkers(),this._centerMarker.on("drag",this._moveCircle,this),this.options.editable&&this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._initSnappableMarkersDrag():this.options.editable?this._disableSnapping():this._disableSnappingDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers:function(){var h=this._map;this._helperLayers&&this._helperLayers.clearLayers(),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(h);var p=this._layer.getLatLng(),_=this._layer._radius,E=this._getLatLngOnCircle(p,_);this._centerMarker=this._createCenterMarker(p),this._outerMarker=this._createOuterMarker(E),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle:function(h,p){var _=this._map.project(h),E=L.point(_.x+p,_.y);return this._map.unproject(E)},_createHintLine:function(h,p){var _=h.getLatLng(),E=p.getLatLng();this._hintline=L.polyline([_,E],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker:function(h){var p=this._createMarker(h);return this.options.draggable?L.DomUtil.addClass(p._icon,"leaflet-pm-draggable"):p.dragging.disable(),p},_createOuterMarker:function(h){var p=this._createMarker(h);return p.on("drag",this._resizeCircle,this),p},_createMarker:function(h){var p=new L.Marker(h,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(p,"vertexPane"),p._origLatLng=h,p._pmTempLayer=!0,p.on("dragstart",this._onMarkerDragStart,this),p.on("drag",this._onMarkerDrag,this),p.on("dragend",this._onMarkerDragEnd,this),this._helperLayers.addLayer(p),p},_moveCircle:function(){var h=this._centerMarker.getLatLng();this._layer.setLatLng(h);var p=this._layer._radius,_=this._getLatLngOnCircle(h,p);this._outerMarker._latlng=_,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers:function(){var h=this._layer.getLatLng(),p=this._layer._radius,_=this._getLatLngOnCircle(h,p);this._outerMarker.setLatLng(_),this._centerMarker.setLatLng(h),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle:function(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius:function(){var h=this._centerMarker.getLatLng(),p=this._outerMarker.getLatLng(),_=this._map.project(h).distanceTo(this._map.project(p));this.options.minRadiusCircleMarker&&_<this.options.minRadiusCircleMarker?this._layer.setRadius(this.options.minRadiusCircleMarker):this.options.maxRadiusCircleMarker&&_>this.options.maxRadiusCircleMarker?this._layer.setRadius(this.options.maxRadiusCircleMarker):this._layer.setRadius(_),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine:function(){var h=this._centerMarker.getLatLng(),p=this._outerMarker.getLatLng();this._hintline.setLatLngs([h,p])},_removeMarker:function(){this.options.editable&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart:function(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart:function(h){this._vertexValidation("move",h)&&this._fireMarkerDragStart(h)},_onMarkerDrag:function(h){var p=h.target;p instanceof L.Marker&&!this._vertexValidationDrag(p)||this._fireMarkerDrag(h)},_onMarkerDragEnd:function(h){this._map.pm.Draw.CircleMarker._layerIsDragging=!1;var p=h.target;this._vertexValidationDragEnd(p)&&(this.options.editable&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(h))},_initSnappableMarkersDrag:function(){var h=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0||this.options.snapSegment,h.off("pm:drag",this._handleSnapping,this),h.on("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.on("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this),h.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag:function(){var h=this._layer;h.off("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle:function(){var h=this._layer._map||this._map;if(h){var p=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),h,this._layer.getLatLng()),_=L.circle(this._layer.getLatLng(),this._layer.options);_.setRadius(p);var E=h&&h.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(_,200,!E).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(_,200,!E),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker:function(){var h=this._centerMarker.getLatLng(),p=this._outerMarker.getLatLng(),_=this._map.project(h).distanceTo(this._map.project(p));return this.options.minRadiusCircleMarker&&_<this.options.minRadiusCircleMarker?p=Re(this._map,h,p,L.PM.Utils.pxRadiusToMeterRadius(this.options.minRadiusCircleMarker,this._map,h)):this.options.maxRadiusCircleMarker&&_>this.options.maxRadiusCircleMarker&&(p=Re(this._map,h,p,L.PM.Utils.pxRadiusToMeterRadius(this.options.maxRadiusCircleMarker,this._map,h))),p},_handleOuterMarkerSnapping:function(){if(this._outerMarker._snapped){var h=this._centerMarker.getLatLng(),p=this._outerMarker.getLatLng(),_=this._map.project(h).distanceTo(this._map.project(p));(this.options.minRadiusCircleMarker&&_<this.options.minRadiusCircleMarker||this.options.maxRadiusCircleMarker&&_>this.options.maxRadiusCircleMarker)&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())}}),fn.ImageOverlay=fn.extend({_shape:"ImageOverlay",initialize:function(h){this._layer=h,this._enabled=!1},toggleEdit:function(h){this.enabled()?this.disable():this.enable(h)},enabled:function(){return this._enabled},enable:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{draggable:!0,snappable:!0};L.Util.setOptions(this,h),this._map=this._layer._map,this._map&&(this.options.allowEditing?(this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()):this.disable())},disable:function(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners:function(){var h=this._layer.getBounds();return[h.getNorthWest(),h.getNorthEast(),h.getSouthEast(),h.getSouthWest()]}}),fn.Text=fn.extend({_shape:"Text",initialize:function(h){this._layer=h,this._enabled=!1},enable:function(h){L.Util.setOptions(this,h),this.textArea&&(this.options.allowEditing&&this._layer._map?(this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()):this.disable())},disable:function(){if(this.enabled()){this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");var h=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),h.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1}},enabled:function(){return this._enabled},toggleEdit:function(h){this.enabled()?this.disable():this.enable(h)},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers:function(){var h=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0||this.options.snapSegment,h.off("pm:drag",this._handleSnapping,this),h.on("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.on("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this),h.on("pm:dragstart",this._unsnap,this)},_disableSnapping:function(){var h=this._layer;h.off("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this)},_autoResize:function(){this.textArea.style.height="1px",this.textArea.style.width="1px";var h=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,p=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height="".concat(h,"px"),this.textArea.style.width="".concat(p,"px"),this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur:function(){var h=this;this._disableOnBlurActive=!0,setTimeout(function(){h.enabled()&&L.DomEvent.on(document,"click",h._documentClick,h)},100)},_documentClick:function(h){h.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=this._hasFocus;this._hasFocus=h.type==="focus",!p!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus:function(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus:function(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus:function(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur:function(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus:function(){return this._hasFocus},getElement:function(){return this.textArea},setText:function(h){this.textArea.value=h,this._autoResize()},getText:function(){return this.textArea.value},_initTextMarker:function(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){var h,p=this.options.className.split(" ");(h=this.textArea.classList).add.apply(h,Nn(p))}var _=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(_),this._layer.once("add",this._createTextMarker,this)},_createTextMarker:function(){var h=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),h===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection:function(h){h.preventDefault()}});var $o=function(h,p,_,E,I,V){this._matrix=[h,p,_,E,I,V]};$o.init=function(){return new L.PM.Matrix(1,0,0,1,0,0)},$o.prototype={transform:function(h){return this._transform(h.clone())},_transform:function(h){var p=this._matrix,_=h.x,E=h.y;return h.x=p[0]*_+p[1]*E+p[4],h.y=p[2]*_+p[3]*E+p[5],h},untransform:function(h){var p=this._matrix;return new L.Point((h.x/p[0]-p[4])/p[0],(h.y/p[2]-p[5])/p[2])},clone:function(){var h=this._matrix;return new L.PM.Matrix(h[0],h[1],h[2],h[3],h[4],h[5])},translate:function(h){return h===void 0?new L.Point(this._matrix[4],this._matrix[5]):(typeof h=="number"?(p=h,_=h):(p=h.x,_=h.y),this._add(1,0,0,1,p,_));var p,_},scale:function(h,p){return h===void 0?new L.Point(this._matrix[0],this._matrix[3]):(p=p||L.point(0,0),typeof h=="number"?(_=h,E=h):(_=h.x,E=h.y),this._add(_,0,0,E,p.x,p.y)._add(1,0,0,1,-p.x,-p.y));var _,E},rotate:function(h,p){var _=Math.cos(h),E=Math.sin(h);return p=p||new L.Point(0,0),this._add(_,E,-E,_,p.x,p.y)._add(1,0,0,1,-p.x,-p.y)},flip:function(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add:function(h,p,_,E,I,V){var nt,it=[[],[],[]],rt=this._matrix,ot=[[rt[0],rt[2],rt[4]],[rt[1],rt[3],rt[5]],[0,0,1]],dt=[[h,_,I],[p,E,V],[0,0,1]];h&&h instanceof L.PM.Matrix&&(dt=[[(rt=h._matrix)[0],rt[2],rt[4]],[rt[1],rt[3],rt[5]],[0,0,1]]);for(var Pt=0;Pt<3;Pt+=1)for(var yt=0;yt<3;yt+=1){nt=0;for(var At=0;At<3;At+=1)nt+=ot[Pt][At]*dt[At][yt];it[Pt][yt]=nt}return this._matrix=[it[0][0],it[1][0],it[0][1],it[1][1],it[0][2],it[1][2]],this}};let ie=$o;var Wr={calcMiddleLatLng:function(h,p,_){var E=h.project(p),I=h.project(_);return h.unproject(E._add(I)._divideBy(2))},findLayers:function(h){var p=[];return h.eachLayer(function(_){(_ instanceof L.Polyline||_ instanceof L.Marker||_ instanceof L.Circle||_ instanceof L.CircleMarker||_ instanceof L.ImageOverlay)&&p.push(_)}),p=(p=(p=p.filter(function(_){return!!_.pm})).filter(function(_){return!_._pmTempLayer})).filter(function(_){return!L.PM.optIn&&!_.options.pmIgnore||L.PM.optIn&&_.options.pmIgnore===!1})},circleToPolygon:function(h){for(var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,_=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],E=h.getLatLng(),I=h.getRadius(),V=ce(E,I,p,0,_),nt=[],it=0;it<V.length;it+=1){var rt=[V[it].lat,V[it].lng];nt.push(rt)}return L.polygon(nt,h.options)},disablePopup:function(h){h.getPopup()&&(h._tempPopupCopy=h.getPopup(),h.unbindPopup())},enablePopup:function(h){h._tempPopupCopy&&(h.bindPopup(h._tempPopupCopy),delete h._tempPopupCopy)},_fireEvent:function(h,p,_){var E=arguments.length>3&&arguments[3]!==void 0&&arguments[3];h.fire(p,_,E);var I=this.getAllParentGroups(h),V=I.groups;V.forEach(function(nt){nt.fire(p,_,E)})},getAllParentGroups:function(h){var p=[],_=[];return!h._pmLastGroupFetch||!h._pmLastGroupFetch.time||new Date().getTime()-h._pmLastGroupFetch.time>1e3?(function E(I){for(var V in I._eventParents)if(p.indexOf(V)===-1){p.push(V);var nt=I._eventParents[V];_.push(nt),E(nt)}}(h),h._pmLastGroupFetch={time:new Date().getTime(),groups:_,groupIds:p},{groupIds:p,groups:_}):{groups:h._pmLastGroupFetch.groups,groupIds:h._pmLastGroupFetch.groupIds}},createGeodesicPolygon:ce,getTranslation:Rt,findDeepCoordIndex:function(h,p){var _,E=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],I=function nt(it){return function(rt,ot){var dt=it.concat(ot);if(E){if(rt.lat&&rt.lat===p.lat&&rt.lng===p.lng)return _=dt,!0}else if(rt.lat&&L.latLng(rt).equals(p))return _=dt,!0;return Array.isArray(rt)&&rt.some(nt(dt))}};h.some(I([]));var V={};return _&&(V={indexPath:_,index:_[_.length-1],parentPath:_.slice(0,_.length-1)}),V},findDeepMarkerIndex:function(h,p){var _;h.some(function I(V){return function(nt,it){var rt=V.concat(it);return nt._leaflet_id===p._leaflet_id?(_=rt,!0):Array.isArray(nt)&&nt.some(I(rt))}}([]));var E={};return _&&(E={indexPath:_,index:_[_.length-1],parentPath:_.slice(0,_.length-1)}),E},_getIndexFromSegment:function(h,p){if(p&&p.length===2){var _=this.findDeepCoordIndex(h,p[0]),E=this.findDeepCoordIndex(h,p[1]),I=Math.max(_.index,E.index);return _.index!==0&&E.index!==0||I===1||(I+=1),{indexA:_,indexB:E,newIndex:I,indexPath:_.indexPath,parentPath:_.parentPath}}return null},_getRotatedRectangle:function(h,p,_,E){var I=ai(E,h),V=ai(E,p),nt=_*Math.PI/180,it=Math.cos(nt),rt=Math.sin(nt),ot=(V.x-I.x)*it+(V.y-I.y)*rt,dt=(V.y-I.y)*it-(V.x-I.x)*rt,Pt=ot*it+I.x,yt=ot*rt+I.y,At=-dt*rt+I.x,Gt=dt*it+I.y;return[Vi(E,I),Vi(E,{x:Pt,y:yt}),Vi(E,V),Vi(E,{x:At,y:Gt})]},pxRadiusToMeterRadius:function(h,p,_){var E=p.project(_),I=L.point(E.x+h,E.y);return p.distance(p.unproject(I),_)}};let Pe=Wr;L.PM=L.PM||{version:"2.14.2",Map:hn,Toolbar:ht,Draw:Z,Edit:fn,Utils:Pe,Matrix:ie,activeLang:"en",optIn:!1,initialize:function(h){this.addInitHooks(h)},setOptIn:function(h){this.optIn=!!h},addInitHooks:function(){L.Map.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}),L.LayerGroup.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}),L.Marker.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}),L.CircleMarker.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}),L.Polyline.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}),L.Polygon.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}),L.Rectangle.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}),L.Circle.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}),L.ImageOverlay.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))})},reInitLayer:function(h){var p=this;h instanceof L.LayerGroup&&h.eachLayer(function(_){p.reInitLayer(_)}),h.pm||L.PM.optIn&&h.options.pmIgnore!==!1||h.options.pmIgnore||(h instanceof L.Map?h.pm=new L.PM.Map(h):h instanceof L.Marker?h.options.textMarker?(h.pm=new L.PM.Edit.Text(h),h.pm._initTextMarker(),h.pm._createTextMarker(!1)):h.pm=new L.PM.Edit.Marker(h):h instanceof L.Circle?h.pm=new L.PM.Edit.Circle(h):h instanceof L.CircleMarker?h.pm=new L.PM.Edit.CircleMarker(h):h instanceof L.Rectangle?h.pm=new L.PM.Edit.Rectangle(h):h instanceof L.Polygon?h.pm=new L.PM.Edit.Polygon(h):h instanceof L.Polyline?h.pm=new L.PM.Edit.Line(h):h instanceof L.LayerGroup?h.pm=new L.PM.Edit.LayerGroup(h):h instanceof L.ImageOverlay&&(h.pm=new L.PM.Edit.ImageOverlay(h)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick:function(h){for(var p,_,E=this._map.mouseEventToLayerPoint(h),I=this._drawFirst;I;I=I.next)(p=I.layer).options.interactive&&p._containsPoint(E)&&(h.type!=="click"&&h.type!=="preclick"||!this._map._draggableMoved(p))&&(_=p);_&&(L.DomEvent.fakeStop(h),this._fireEvent([_],h))}}),L.PM.initialize()},7107:()=>{Array.prototype.findIndex=Array.prototype.findIndex||function(a){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof a!="function")throw new TypeError("callback must be a function");for(var l=Object(this),c=l.length>>>0,g=arguments[1],m=0;m<c;m++)if(a.call(g,l[m],m,l))return m;return-1},Array.prototype.find=Array.prototype.find||function(a){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof a!="function")throw new TypeError("callback must be a function");for(var l=Object(this),c=l.length>>>0,g=arguments[1],m=0;m<c;m++){var v=l[m];if(a.call(g,v,m,l))return v}},typeof Object.assign!="function"&&(Object.assign=function(a){"use strict";if(a==null)throw new TypeError("Cannot convert undefined or null to object");a=Object(a);for(var l=1;l<arguments.length;l++){var c=arguments[l];if(c!=null)for(var g in c)Object.prototype.hasOwnProperty.call(c,g)&&(a[g]=c[g])}return a}),[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(a){a.hasOwnProperty("remove")||Object.defineProperty(a,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(a,l){if(this==null)throw new TypeError('"this" is null or not defined');var c=Object(this),g=c.length>>>0;if(g===0)return!1;for(var m,v,x=0|l,P=Math.max(x>=0?x:g-Math.abs(x),0);P<g;){if((m=c[P])===(v=a)||typeof m=="number"&&typeof v=="number"&&isNaN(m)&&isNaN(v))return!0;P++}return!1}})},1787:(a,l,c)=>{var g=c(2582),m=c(4102),v=c(1540),x=c(9705).Z,P=v.featureEach,T=(v.coordEach,m.polygon,m.featureCollection);function N(G){var z=new g(G);return z.insert=function(j){if(j.type!=="Feature")throw new Error("invalid feature");return j.bbox=j.bbox?j.bbox:x(j),g.prototype.insert.call(this,j)},z.load=function(j){var R=[];return Array.isArray(j)?j.forEach(function(B){if(B.type!=="Feature")throw new Error("invalid features");B.bbox=B.bbox?B.bbox:x(B),R.push(B)}):P(j,function(B){if(B.type!=="Feature")throw new Error("invalid features");B.bbox=B.bbox?B.bbox:x(B),R.push(B)}),g.prototype.load.call(this,R)},z.remove=function(j,R){if(j.type!=="Feature")throw new Error("invalid feature");return j.bbox=j.bbox?j.bbox:x(j),g.prototype.remove.call(this,j,R)},z.clear=function(){return g.prototype.clear.call(this)},z.search=function(j){var R=g.prototype.search.call(this,this.toBBox(j));return T(R)},z.collides=function(j){return g.prototype.collides.call(this,this.toBBox(j))},z.all=function(){var j=g.prototype.all.call(this);return T(j)},z.toJSON=function(){return g.prototype.toJSON.call(this)},z.fromJSON=function(j){return g.prototype.fromJSON.call(this,j)},z.toBBox=function(j){var R;if(j.bbox)R=j.bbox;else if(Array.isArray(j)&&j.length===4)R=j;else if(Array.isArray(j)&&j.length===6)R=[j[0],j[1],j[3],j[4]];else if(j.type==="Feature")R=x(j);else{if(j.type!=="FeatureCollection")throw new Error("invalid geojson");R=x(j)}return{minX:R[0],minY:R[1],maxX:R[2],maxY:R[3]}},z}a.exports=N,a.exports.default=N},1989:(a,l,c)=>{var g=c(1789),m=c(401),v=c(7667),x=c(1327),P=c(1866);function T(N){var G=-1,z=N==null?0:N.length;for(this.clear();++G<z;){var j=N[G];this.set(j[0],j[1])}}T.prototype.clear=g,T.prototype.delete=m,T.prototype.get=v,T.prototype.has=x,T.prototype.set=P,a.exports=T},8407:(a,l,c)=>{var g=c(7040),m=c(4125),v=c(2117),x=c(7518),P=c(4705);function T(N){var G=-1,z=N==null?0:N.length;for(this.clear();++G<z;){var j=N[G];this.set(j[0],j[1])}}T.prototype.clear=g,T.prototype.delete=m,T.prototype.get=v,T.prototype.has=x,T.prototype.set=P,a.exports=T},7071:(a,l,c)=>{var g=c(852)(c(5639),"Map");a.exports=g},3369:(a,l,c)=>{var g=c(4785),m=c(1285),v=c(6e3),x=c(9916),P=c(5265);function T(N){var G=-1,z=N==null?0:N.length;for(this.clear();++G<z;){var j=N[G];this.set(j[0],j[1])}}T.prototype.clear=g,T.prototype.delete=m,T.prototype.get=v,T.prototype.has=x,T.prototype.set=P,a.exports=T},6384:(a,l,c)=>{var g=c(8407),m=c(7465),v=c(3779),x=c(7599),P=c(4758),T=c(4309);function N(G){var z=this.__data__=new g(G);this.size=z.size}N.prototype.clear=m,N.prototype.delete=v,N.prototype.get=x,N.prototype.has=P,N.prototype.set=T,a.exports=N},2705:(a,l,c)=>{var g=c(5639).Symbol;a.exports=g},1149:(a,l,c)=>{var g=c(5639).Uint8Array;a.exports=g},6874:a=>{a.exports=function(l,c,g){switch(g.length){case 0:return l.call(c);case 1:return l.call(c,g[0]);case 2:return l.call(c,g[0],g[1]);case 3:return l.call(c,g[0],g[1],g[2])}return l.apply(c,g)}},4636:(a,l,c)=>{var g=c(2545),m=c(5694),v=c(1469),x=c(4144),P=c(5776),T=c(6719),N=Object.prototype.hasOwnProperty;a.exports=function(G,z){var j=v(G),R=!j&&m(G),B=!j&&!R&&x(G),D=!j&&!R&&!B&&T(G),A=j||R||B||D,q=A?g(G.length,String):[],H=q.length;for(var K in G)!z&&!N.call(G,K)||A&&(K=="length"||B&&(K=="offset"||K=="parent")||D&&(K=="buffer"||K=="byteLength"||K=="byteOffset")||P(K,H))||q.push(K);return q}},9932:a=>{a.exports=function(l,c){for(var g=-1,m=l==null?0:l.length,v=Array(m);++g<m;)v[g]=c(l[g],g,l);return v}},6556:(a,l,c)=>{var g=c(9465),m=c(7813);a.exports=function(v,x,P){(P!==void 0&&!m(v[x],P)||P===void 0&&!(x in v))&&g(v,x,P)}},4865:(a,l,c)=>{var g=c(9465),m=c(7813),v=Object.prototype.hasOwnProperty;a.exports=function(x,P,T){var N=x[P];v.call(x,P)&&m(N,T)&&(T!==void 0||P in x)||g(x,P,T)}},8470:(a,l,c)=>{var g=c(7813);a.exports=function(m,v){for(var x=m.length;x--;)if(g(m[x][0],v))return x;return-1}},9465:(a,l,c)=>{var g=c(8777);a.exports=function(m,v,x){v=="__proto__"&&g?g(m,v,{configurable:!0,enumerable:!0,value:x,writable:!0}):m[v]=x}},3118:(a,l,c)=>{var g=c(3218),m=Object.create,v=function(){function x(){}return function(P){if(!g(P))return{};if(m)return m(P);x.prototype=P;var T=new x;return x.prototype=void 0,T}}();a.exports=v},8483:(a,l,c)=>{var g=c(5063)();a.exports=g},7786:(a,l,c)=>{var g=c(1811),m=c(327);a.exports=function(v,x){for(var P=0,T=(x=g(x,v)).length;v!=null&&P<T;)v=v[m(x[P++])];return P&&P==T?v:void 0}},4239:(a,l,c)=>{var g=c(2705),m=c(9607),v=c(2333),x=g?g.toStringTag:void 0;a.exports=function(P){return P==null?P===void 0?"[object Undefined]":"[object Null]":x&&x in Object(P)?m(P):v(P)}},8565:a=>{var l=Object.prototype.hasOwnProperty;a.exports=function(c,g){return c!=null&&l.call(c,g)}},9454:(a,l,c)=>{var g=c(4239),m=c(7005);a.exports=function(v){return m(v)&&g(v)=="[object Arguments]"}},8458:(a,l,c)=>{var g=c(3560),m=c(5346),v=c(3218),x=c(346),P=/^\[object .+?Constructor\]$/,T=Function.prototype,N=Object.prototype,G=T.toString,z=N.hasOwnProperty,j=RegExp("^"+G.call(z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");a.exports=function(R){return!(!v(R)||m(R))&&(g(R)?j:P).test(x(R))}},8749:(a,l,c)=>{var g=c(4239),m=c(1780),v=c(7005),x={};x["[object Float32Array]"]=x["[object Float64Array]"]=x["[object Int8Array]"]=x["[object Int16Array]"]=x["[object Int32Array]"]=x["[object Uint8Array]"]=x["[object Uint8ClampedArray]"]=x["[object Uint16Array]"]=x["[object Uint32Array]"]=!0,x["[object Arguments]"]=x["[object Array]"]=x["[object ArrayBuffer]"]=x["[object Boolean]"]=x["[object DataView]"]=x["[object Date]"]=x["[object Error]"]=x["[object Function]"]=x["[object Map]"]=x["[object Number]"]=x["[object Object]"]=x["[object RegExp]"]=x["[object Set]"]=x["[object String]"]=x["[object WeakMap]"]=!1,a.exports=function(P){return v(P)&&m(P.length)&&!!x[g(P)]}},313:(a,l,c)=>{var g=c(3218),m=c(5726),v=c(3498),x=Object.prototype.hasOwnProperty;a.exports=function(P){if(!g(P))return v(P);var T=m(P),N=[];for(var G in P)(G!="constructor"||!T&&x.call(P,G))&&N.push(G);return N}},2980:(a,l,c)=>{var g=c(6384),m=c(6556),v=c(8483),x=c(9783),P=c(3218),T=c(1704),N=c(6390);a.exports=function G(z,j,R,B,D){z!==j&&v(j,function(A,q){if(D||(D=new g),P(A))x(z,j,q,R,G,B,D);else{var H=B?B(N(z,q),A,q+"",z,j,D):void 0;H===void 0&&(H=A),m(z,q,H)}},T)}},9783:(a,l,c)=>{var g=c(6556),m=c(4626),v=c(7133),x=c(278),P=c(8517),T=c(5694),N=c(1469),G=c(9246),z=c(4144),j=c(3560),R=c(3218),B=c(8630),D=c(6719),A=c(6390),q=c(9881);a.exports=function(H,K,et,X,lt,gt,Et){var Q=A(H,et),kt=A(K,et),ct=Et.get(kt);if(ct)g(H,et,ct);else{var bt=gt?gt(Q,kt,et+"",H,K,Et):void 0,Mt=bt===void 0;if(Mt){var Xt=N(kt),ft=!Xt&&z(kt),Ct=!Xt&&!ft&&D(kt);bt=kt,Xt||ft||Ct?N(Q)?bt=Q:G(Q)?bt=x(Q):ft?(Mt=!1,bt=m(kt,!0)):Ct?(Mt=!1,bt=v(kt,!0)):bt=[]:B(kt)||T(kt)?(bt=Q,T(Q)?bt=q(Q):R(Q)&&!j(Q)||(bt=P(kt))):Mt=!1}Mt&&(Et.set(kt,bt),lt(bt,kt,X,gt,Et),Et.delete(kt)),g(H,et,bt)}}},5976:(a,l,c)=>{var g=c(6557),m=c(5357),v=c(61);a.exports=function(x,P){return v(m(x,P,g),x+"")}},6560:(a,l,c)=>{var g=c(5703),m=c(8777),v=c(6557),x=m?function(P,T){return m(P,"toString",{configurable:!0,enumerable:!1,value:g(T),writable:!0})}:v;a.exports=x},2545:a=>{a.exports=function(l,c){for(var g=-1,m=Array(l);++g<l;)m[g]=c(g);return m}},531:(a,l,c)=>{var g=c(2705),m=c(9932),v=c(1469),x=c(3448),P=g?g.prototype:void 0,T=P?P.toString:void 0;a.exports=function N(G){if(typeof G=="string")return G;if(v(G))return m(G,N)+"";if(x(G))return T?T.call(G):"";var z=G+"";return z=="0"&&1/G==-1/0?"-0":z}},1717:a=>{a.exports=function(l){return function(c){return l(c)}}},1811:(a,l,c)=>{var g=c(1469),m=c(5403),v=c(5514),x=c(9833);a.exports=function(P,T){return g(P)?P:m(P,T)?[P]:v(x(P))}},4318:(a,l,c)=>{var g=c(1149);a.exports=function(m){var v=new m.constructor(m.byteLength);return new g(v).set(new g(m)),v}},4626:(a,l,c)=>{a=c.nmd(a);var g=c(5639),m=l&&!l.nodeType&&l,v=m&&a&&!a.nodeType&&a,x=v&&v.exports===m?g.Buffer:void 0,P=x?x.allocUnsafe:void 0;a.exports=function(T,N){if(N)return T.slice();var G=T.length,z=P?P(G):new T.constructor(G);return T.copy(z),z}},7133:(a,l,c)=>{var g=c(4318);a.exports=function(m,v){var x=v?g(m.buffer):m.buffer;return new m.constructor(x,m.byteOffset,m.length)}},278:a=>{a.exports=function(l,c){var g=-1,m=l.length;for(c||(c=Array(m));++g<m;)c[g]=l[g];return c}},8363:(a,l,c)=>{var g=c(4865),m=c(9465);a.exports=function(v,x,P,T){var N=!P;P||(P={});for(var G=-1,z=x.length;++G<z;){var j=x[G],R=T?T(P[j],v[j],j,P,v):void 0;R===void 0&&(R=v[j]),N?m(P,j,R):g(P,j,R)}return P}},4429:(a,l,c)=>{var g=c(5639)["__core-js_shared__"];a.exports=g},1463:(a,l,c)=>{var g=c(5976),m=c(6612);a.exports=function(v){return g(function(x,P){var T=-1,N=P.length,G=N>1?P[N-1]:void 0,z=N>2?P[2]:void 0;for(G=v.length>3&&typeof G=="function"?(N--,G):void 0,z&&m(P[0],P[1],z)&&(G=N<3?void 0:G,N=1),x=Object(x);++T<N;){var j=P[T];j&&v(x,j,T,G)}return x})}},5063:a=>{a.exports=function(l){return function(c,g,m){for(var v=-1,x=Object(c),P=m(c),T=P.length;T--;){var N=P[l?T:++v];if(g(x[N],N,x)===!1)break}return c}}},8777:(a,l,c)=>{var g=c(852),m=function(){try{var v=g(Object,"defineProperty");return v({},"",{}),v}catch{}}();a.exports=m},1957:(a,l,c)=>{var g=typeof c.g=="object"&&c.g&&c.g.Object===Object&&c.g;a.exports=g},5050:(a,l,c)=>{var g=c(7019);a.exports=function(m,v){var x=m.__data__;return g(v)?x[typeof v=="string"?"string":"hash"]:x.map}},852:(a,l,c)=>{var g=c(8458),m=c(7801);a.exports=function(v,x){var P=m(v,x);return g(P)?P:void 0}},5924:(a,l,c)=>{var g=c(5569)(Object.getPrototypeOf,Object);a.exports=g},9607:(a,l,c)=>{var g=c(2705),m=Object.prototype,v=m.hasOwnProperty,x=m.toString,P=g?g.toStringTag:void 0;a.exports=function(T){var N=v.call(T,P),G=T[P];try{T[P]=void 0;var z=!0}catch{}var j=x.call(T);return z&&(N?T[P]=G:delete T[P]),j}},7801:a=>{a.exports=function(l,c){return l?.[c]}},222:(a,l,c)=>{var g=c(1811),m=c(5694),v=c(1469),x=c(5776),P=c(1780),T=c(327);a.exports=function(N,G,z){for(var j=-1,R=(G=g(G,N)).length,B=!1;++j<R;){var D=T(G[j]);if(!(B=N!=null&&z(N,D)))break;N=N[D]}return B||++j!=R?B:!!(R=N==null?0:N.length)&&P(R)&&x(D,R)&&(v(N)||m(N))}},1789:(a,l,c)=>{var g=c(4536);a.exports=function(){this.__data__=g?g(null):{},this.size=0}},401:a=>{a.exports=function(l){var c=this.has(l)&&delete this.__data__[l];return this.size-=c?1:0,c}},7667:(a,l,c)=>{var g=c(4536),m=Object.prototype.hasOwnProperty;a.exports=function(v){var x=this.__data__;if(g){var P=x[v];return P==="__lodash_hash_undefined__"?void 0:P}return m.call(x,v)?x[v]:void 0}},1327:(a,l,c)=>{var g=c(4536),m=Object.prototype.hasOwnProperty;a.exports=function(v){var x=this.__data__;return g?x[v]!==void 0:m.call(x,v)}},1866:(a,l,c)=>{var g=c(4536);a.exports=function(m,v){var x=this.__data__;return this.size+=this.has(m)?0:1,x[m]=g&&v===void 0?"__lodash_hash_undefined__":v,this}},8517:(a,l,c)=>{var g=c(3118),m=c(5924),v=c(5726);a.exports=function(x){return typeof x.constructor!="function"||v(x)?{}:g(m(x))}},5776:a=>{var l=/^(?:0|[1-9]\d*)$/;a.exports=function(c,g){var m=typeof c;return!!(g=g??9007199254740991)&&(m=="number"||m!="symbol"&&l.test(c))&&c>-1&&c%1==0&&c<g}},6612:(a,l,c)=>{var g=c(7813),m=c(8612),v=c(5776),x=c(3218);a.exports=function(P,T,N){if(!x(N))return!1;var G=typeof T;return!!(G=="number"?m(N)&&v(T,N.length):G=="string"&&T in N)&&g(N[T],P)}},5403:(a,l,c)=>{var g=c(1469),m=c(3448),v=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,x=/^\w*$/;a.exports=function(P,T){if(g(P))return!1;var N=typeof P;return!(N!="number"&&N!="symbol"&&N!="boolean"&&P!=null&&!m(P))||x.test(P)||!v.test(P)||T!=null&&P in Object(T)}},7019:a=>{a.exports=function(l){var c=typeof l;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?l!=="__proto__":l===null}},5346:(a,l,c)=>{var g,m=c(4429),v=(g=/[^.]+$/.exec(m&&m.keys&&m.keys.IE_PROTO||""))?"Symbol(src)_1."+g:"";a.exports=function(x){return!!v&&v in x}},5726:a=>{var l=Object.prototype;a.exports=function(c){var g=c&&c.constructor;return c===(typeof g=="function"&&g.prototype||l)}},7040:a=>{a.exports=function(){this.__data__=[],this.size=0}},4125:(a,l,c)=>{var g=c(8470),m=Array.prototype.splice;a.exports=function(v){var x=this.__data__,P=g(x,v);return!(P<0)&&(P==x.length-1?x.pop():m.call(x,P,1),--this.size,!0)}},2117:(a,l,c)=>{var g=c(8470);a.exports=function(m){var v=this.__data__,x=g(v,m);return x<0?void 0:v[x][1]}},7518:(a,l,c)=>{var g=c(8470);a.exports=function(m){return g(this.__data__,m)>-1}},4705:(a,l,c)=>{var g=c(8470);a.exports=function(m,v){var x=this.__data__,P=g(x,m);return P<0?(++this.size,x.push([m,v])):x[P][1]=v,this}},4785:(a,l,c)=>{var g=c(1989),m=c(8407),v=c(7071);a.exports=function(){this.size=0,this.__data__={hash:new g,map:new(v||m),string:new g}}},1285:(a,l,c)=>{var g=c(5050);a.exports=function(m){var v=g(this,m).delete(m);return this.size-=v?1:0,v}},6e3:(a,l,c)=>{var g=c(5050);a.exports=function(m){return g(this,m).get(m)}},9916:(a,l,c)=>{var g=c(5050);a.exports=function(m){return g(this,m).has(m)}},5265:(a,l,c)=>{var g=c(5050);a.exports=function(m,v){var x=g(this,m),P=x.size;return x.set(m,v),this.size+=x.size==P?0:1,this}},4523:(a,l,c)=>{var g=c(8306);a.exports=function(m){var v=g(m,function(P){return x.size===500&&x.clear(),P}),x=v.cache;return v}},4536:(a,l,c)=>{var g=c(852)(Object,"create");a.exports=g},3498:a=>{a.exports=function(l){var c=[];if(l!=null)for(var g in Object(l))c.push(g);return c}},1167:(a,l,c)=>{a=c.nmd(a);var g=c(1957),m=l&&!l.nodeType&&l,v=m&&a&&!a.nodeType&&a,x=v&&v.exports===m&&g.process,P=function(){try{var T=v&&v.require&&v.require("util").types;return T||x&&x.binding&&x.binding("util")}catch{}}();a.exports=P},2333:a=>{var l=Object.prototype.toString;a.exports=function(c){return l.call(c)}},5569:a=>{a.exports=function(l,c){return function(g){return l(c(g))}}},5357:(a,l,c)=>{var g=c(6874),m=Math.max;a.exports=function(v,x,P){return x=m(x===void 0?v.length-1:x,0),function(){for(var T=arguments,N=-1,G=m(T.length-x,0),z=Array(G);++N<G;)z[N]=T[x+N];N=-1;for(var j=Array(x+1);++N<x;)j[N]=T[N];return j[x]=P(z),g(v,this,j)}}},5639:(a,l,c)=>{var g=c(1957),m=typeof self=="object"&&self&&self.Object===Object&&self,v=g||m||Function("return this")();a.exports=v},6390:a=>{a.exports=function(l,c){if((c!=="constructor"||typeof l[c]!="function")&&c!="__proto__")return l[c]}},61:(a,l,c)=>{var g=c(6560),m=c(1275)(g);a.exports=m},1275:a=>{var l=Date.now;a.exports=function(c){var g=0,m=0;return function(){var v=l(),x=16-(v-m);if(m=v,x>0){if(++g>=800)return arguments[0]}else g=0;return c.apply(void 0,arguments)}}},7465:(a,l,c)=>{var g=c(8407);a.exports=function(){this.__data__=new g,this.size=0}},3779:a=>{a.exports=function(l){var c=this.__data__,g=c.delete(l);return this.size=c.size,g}},7599:a=>{a.exports=function(l){return this.__data__.get(l)}},4758:a=>{a.exports=function(l){return this.__data__.has(l)}},4309:(a,l,c)=>{var g=c(8407),m=c(7071),v=c(3369);a.exports=function(x,P){var T=this.__data__;if(T instanceof g){var N=T.__data__;if(!m||N.length<199)return N.push([x,P]),this.size=++T.size,this;T=this.__data__=new v(N)}return T.set(x,P),this.size=T.size,this}},5514:(a,l,c)=>{var g=c(4523),m=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,v=/\\(\\)?/g,x=g(function(P){var T=[];return P.charCodeAt(0)===46&&T.push(""),P.replace(m,function(N,G,z,j){T.push(z?j.replace(v,"$1"):G||N)}),T});a.exports=x},327:(a,l,c)=>{var g=c(3448);a.exports=function(m){if(typeof m=="string"||g(m))return m;var v=m+"";return v=="0"&&1/m==-1/0?"-0":v}},346:a=>{var l=Function.prototype.toString;a.exports=function(c){if(c!=null){try{return l.call(c)}catch{}try{return c+""}catch{}}return""}},5703:a=>{a.exports=function(l){return function(){return l}}},7813:a=>{a.exports=function(l,c){return l===c||l!=l&&c!=c}},7361:(a,l,c)=>{var g=c(7786);a.exports=function(m,v,x){var P=m==null?void 0:g(m,v);return P===void 0?x:P}},8721:(a,l,c)=>{var g=c(8565),m=c(222);a.exports=function(v,x){return v!=null&&m(v,x,g)}},6557:a=>{a.exports=function(l){return l}},5694:(a,l,c)=>{var g=c(9454),m=c(7005),v=Object.prototype,x=v.hasOwnProperty,P=v.propertyIsEnumerable,T=g(function(){return arguments}())?g:function(N){return m(N)&&x.call(N,"callee")&&!P.call(N,"callee")};a.exports=T},1469:a=>{var l=Array.isArray;a.exports=l},8612:(a,l,c)=>{var g=c(3560),m=c(1780);a.exports=function(v){return v!=null&&m(v.length)&&!g(v)}},9246:(a,l,c)=>{var g=c(8612),m=c(7005);a.exports=function(v){return m(v)&&g(v)}},4144:(a,l,c)=>{a=c.nmd(a);var g=c(5639),m=c(5062),v=l&&!l.nodeType&&l,x=v&&a&&!a.nodeType&&a,P=x&&x.exports===v?g.Buffer:void 0,T=(P?P.isBuffer:void 0)||m;a.exports=T},3560:(a,l,c)=>{var g=c(4239),m=c(3218);a.exports=function(v){if(!m(v))return!1;var x=g(v);return x=="[object Function]"||x=="[object GeneratorFunction]"||x=="[object AsyncFunction]"||x=="[object Proxy]"}},1780:a=>{a.exports=function(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=9007199254740991}},3218:a=>{a.exports=function(l){var c=typeof l;return l!=null&&(c=="object"||c=="function")}},7005:a=>{a.exports=function(l){return l!=null&&typeof l=="object"}},8630:(a,l,c)=>{var g=c(4239),m=c(5924),v=c(7005),x=Function.prototype,P=Object.prototype,T=x.toString,N=P.hasOwnProperty,G=T.call(Object);a.exports=function(z){if(!v(z)||g(z)!="[object Object]")return!1;var j=m(z);if(j===null)return!0;var R=N.call(j,"constructor")&&j.constructor;return typeof R=="function"&&R instanceof R&&T.call(R)==G}},3448:(a,l,c)=>{var g=c(4239),m=c(7005);a.exports=function(v){return typeof v=="symbol"||m(v)&&g(v)=="[object Symbol]"}},6719:(a,l,c)=>{var g=c(8749),m=c(1717),v=c(1167),x=v&&v.isTypedArray,P=x?m(x):g;a.exports=P},1704:(a,l,c)=>{var g=c(4636),m=c(313),v=c(8612);a.exports=function(x){return v(x)?g(x,!0):m(x)}},8306:(a,l,c)=>{var g=c(3369);function m(v,x){if(typeof v!="function"||x!=null&&typeof x!="function")throw new TypeError("Expected a function");var P=function(){var T=arguments,N=x?x.apply(this,T):T[0],G=P.cache;if(G.has(N))return G.get(N);var z=v.apply(this,T);return P.cache=G.set(N,z)||G,z};return P.cache=new(m.Cache||g),P}m.Cache=g,a.exports=m},2492:(a,l,c)=>{var g=c(2980),m=c(1463)(function(v,x,P){g(v,x,P)});a.exports=m},5062:a=>{a.exports=function(){return!1}},9881:(a,l,c)=>{var g=c(8363),m=c(1704);a.exports=function(v){return g(v,m(v))}},9833:(a,l,c)=>{var g=c(531);a.exports=function(m){return m==null?"":g(m)}},2676:function(a){a.exports=function(){"use strict";function l(C,b){if(!(C instanceof b))throw new TypeError("Cannot call a class as a function")}function c(C,b){for(var k=0;k<b.length;k++){var F=b[k];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(C,F.key,F)}}function g(C,b,k){return b&&c(C.prototype,b),k&&c(C,k),C}var m=function(){function C(b,k){this.next=null,this.key=b,this.data=k,this.left=null,this.right=null}return C}();function v(C,b){return C>b?1:C<b?-1:0}function x(C,b,k){for(var F=new m(null,null),Z=F,J=F;;){var tt=k(C,b.key);if(tt<0){if(b.left===null)break;if(k(C,b.left.key)<0){var pt=b.left;if(b.left=pt.right,pt.right=b,(b=pt).left===null)break}J.left=b,J=b,b=b.left}else{if(!(tt>0)||b.right===null||k(C,b.right.key)>0&&(pt=b.right,b.right=pt.left,pt.left=b,(b=pt).right===null))break;Z.right=b,Z=b,b=b.right}}return Z.right=b.left,J.left=b.right,b.left=F.right,b.right=F.left,b}function P(C,b,k,F){var Z=new m(C,b);if(k===null)return Z.left=Z.right=null,Z;var J=F(C,(k=x(C,k,F)).key);return J<0?(Z.left=k.left,Z.right=k,k.left=null):J>=0&&(Z.right=k.right,Z.left=k,k.right=null),Z}function T(C,b,k){var F=null,Z=null;if(b){var J=k((b=x(C,b,k)).key,C);J===0?(F=b.left,Z=b.right):J<0?(Z=b.right,b.right=null,F=b):(F=b.left,b.left=null,Z=b)}return{left:F,right:Z}}function N(C,b,k){return b===null?C:(C===null||((b=x(C.key,b,k)).left=C),b)}function G(C,b,k,F,Z){if(C){F(b+(k?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ")+Z(C)+`
`);var J=b+(k?"    ":"\u2502   ");C.left&&G(C.left,J,!1,F,Z),C.right&&G(C.right,J,!0,F,Z)}}var z=function(){function C(b){b===void 0&&(b=v),this._root=null,this._size=0,this._comparator=b}return C.prototype.insert=function(b,k){return this._size++,this._root=P(b,k,this._root,this._comparator)},C.prototype.add=function(b,k){var F=new m(b,k);this._root===null&&(F.left=F.right=null,this._size++,this._root=F);var Z=this._comparator,J=x(b,this._root,Z),tt=Z(b,J.key);return tt===0?this._root=J:(tt<0?(F.left=J.left,F.right=J,J.left=null):tt>0&&(F.right=J.right,F.left=J,J.right=null),this._size++,this._root=F),this._root},C.prototype.remove=function(b){this._root=this._remove(b,this._root,this._comparator)},C.prototype._remove=function(b,k,F){var Z;return k===null?null:F(b,(k=x(b,k,F)).key)===0?(k.left===null?Z=k.right:(Z=x(b,k.left,F)).right=k.right,this._size--,Z):k},C.prototype.pop=function(){var b=this._root;if(b){for(;b.left;)b=b.left;return this._root=x(b.key,this._root,this._comparator),this._root=this._remove(b.key,this._root,this._comparator),{key:b.key,data:b.data}}return null},C.prototype.findStatic=function(b){for(var k=this._root,F=this._comparator;k;){var Z=F(b,k.key);if(Z===0)return k;k=Z<0?k.left:k.right}return null},C.prototype.find=function(b){return this._root&&(this._root=x(b,this._root,this._comparator),this._comparator(b,this._root.key)!==0)?null:this._root},C.prototype.contains=function(b){for(var k=this._root,F=this._comparator;k;){var Z=F(b,k.key);if(Z===0)return!0;k=Z<0?k.left:k.right}return!1},C.prototype.forEach=function(b,k){for(var F=this._root,Z=[],J=!1;!J;)F!==null?(Z.push(F),F=F.left):Z.length!==0?(F=Z.pop(),b.call(k,F),F=F.right):J=!0;return this},C.prototype.range=function(b,k,F,Z){for(var J=[],tt=this._comparator,pt=this._root;J.length!==0||pt;)if(pt)J.push(pt),pt=pt.left;else{if(tt((pt=J.pop()).key,k)>0)break;if(tt(pt.key,b)>=0&&F.call(Z,pt))return this;pt=pt.right}return this},C.prototype.keys=function(){var b=[];return this.forEach(function(k){var F=k.key;return b.push(F)}),b},C.prototype.values=function(){var b=[];return this.forEach(function(k){var F=k.data;return b.push(F)}),b},C.prototype.min=function(){return this._root?this.minNode(this._root).key:null},C.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},C.prototype.minNode=function(b){if(b===void 0&&(b=this._root),b)for(;b.left;)b=b.left;return b},C.prototype.maxNode=function(b){if(b===void 0&&(b=this._root),b)for(;b.right;)b=b.right;return b},C.prototype.at=function(b){for(var k=this._root,F=!1,Z=0,J=[];!F;)if(k)J.push(k),k=k.left;else if(J.length>0){if(k=J.pop(),Z===b)return k;Z++,k=k.right}else F=!0;return null},C.prototype.next=function(b){var k=this._root,F=null;if(b.right){for(F=b.right;F.left;)F=F.left;return F}for(var Z=this._comparator;k;){var J=Z(b.key,k.key);if(J===0)break;J<0?(F=k,k=k.left):k=k.right}return F},C.prototype.prev=function(b){var k=this._root,F=null;if(b.left!==null){for(F=b.left;F.right;)F=F.right;return F}for(var Z=this._comparator;k;){var J=Z(b.key,k.key);if(J===0)break;J<0?k=k.left:(F=k,k=k.right)}return F},C.prototype.clear=function(){return this._root=null,this._size=0,this},C.prototype.toList=function(){return B(this._root)},C.prototype.load=function(b,k,F){k===void 0&&(k=[]),F===void 0&&(F=!1);var Z=b.length,J=this._comparator;if(F&&q(b,k,0,Z-1,J),this._root===null)this._root=j(b,k,0,Z),this._size=Z;else{var tt=A(this.toList(),R(b,k),J);Z=this._size+Z,this._root=D({head:tt},0,Z)}return this},C.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(C.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),C.prototype.toString=function(b){b===void 0&&(b=function(F){return String(F.key)});var k=[];return G(this._root,"",!0,function(F){return k.push(F)},b),k.join("")},C.prototype.update=function(b,k,F){var Z=this._comparator,J=T(b,this._root,Z),tt=J.left,pt=J.right;Z(b,k)<0?pt=P(k,F,pt,Z):tt=P(k,F,tt,Z),this._root=N(tt,pt,Z)},C.prototype.split=function(b){return T(b,this._root,this._comparator)},C}();function j(C,b,k,F){var Z=F-k;if(Z>0){var J=k+Math.floor(Z/2),tt=C[J],pt=b[J],Lt=new m(tt,pt);return Lt.left=j(C,b,k,J),Lt.right=j(C,b,J+1,F),Lt}return null}function R(C,b){for(var k=new m(null,null),F=k,Z=0;Z<C.length;Z++)F=F.next=new m(C[Z],b[Z]);return F.next=null,k.next}function B(C){for(var b=C,k=[],F=!1,Z=new m(null,null),J=Z;!F;)b?(k.push(b),b=b.left):k.length>0?b=(b=J=J.next=k.pop()).right:F=!0;return J.next=null,Z.next}function D(C,b,k){var F=k-b;if(F>0){var Z=b+Math.floor(F/2),J=D(C,b,Z),tt=C.head;return tt.left=J,C.head=C.head.next,tt.right=D(C,Z+1,k),tt}return null}function A(C,b,k){for(var F=new m(null,null),Z=F,J=C,tt=b;J!==null&&tt!==null;)k(J.key,tt.key)<0?(Z.next=J,J=J.next):(Z.next=tt,tt=tt.next),Z=Z.next;return J!==null?Z.next=J:tt!==null&&(Z.next=tt),F.next}function q(C,b,k,F,Z){if(!(k>=F)){for(var J=C[k+F>>1],tt=k-1,pt=F+1;;){do tt++;while(Z(C[tt],J)<0);do pt--;while(Z(C[pt],J)>0);if(tt>=pt)break;var Lt=C[tt];C[tt]=C[pt],C[pt]=Lt,Lt=b[tt],b[tt]=b[pt],b[pt]=Lt}q(C,b,k,pt,Z),q(C,b,pt+1,F,Z)}}var H=function(C,b){return C.ll.x<=b.x&&b.x<=C.ur.x&&C.ll.y<=b.y&&b.y<=C.ur.y},K=function(C,b){if(b.ur.x<C.ll.x||C.ur.x<b.ll.x||b.ur.y<C.ll.y||C.ur.y<b.ll.y)return null;var k=C.ll.x<b.ll.x?b.ll.x:C.ll.x,F=C.ur.x<b.ur.x?C.ur.x:b.ur.x;return{ll:{x:k,y:C.ll.y<b.ll.y?b.ll.y:C.ll.y},ur:{x:F,y:C.ur.y<b.ur.y?C.ur.y:b.ur.y}}},et=Number.EPSILON;et===void 0&&(et=Math.pow(2,-52));var X=et*et,lt=function(C,b){if(-et<C&&C<et&&-et<b&&b<et)return 0;var k=C-b;return k*k<X*C*b?0:C<b?-1:1},gt=function(){function C(){l(this,C),this.reset()}return g(C,[{key:"reset",value:function(){this.xRounder=new Et,this.yRounder=new Et}},{key:"round",value:function(b,k){return{x:this.xRounder.round(b),y:this.yRounder.round(k)}}}]),C}(),Et=function(){function C(){l(this,C),this.tree=new z,this.round(0)}return g(C,[{key:"round",value:function(b){var k=this.tree.add(b),F=this.tree.prev(k);if(F!==null&&lt(k.key,F.key)===0)return this.tree.remove(b),F.key;var Z=this.tree.next(k);return Z!==null&&lt(k.key,Z.key)===0?(this.tree.remove(b),Z.key):b}}]),C}(),Q=new gt,kt=function(C,b){return C.x*b.y-C.y*b.x},ct=function(C,b){return C.x*b.x+C.y*b.y},bt=function(C,b,k){var F={x:b.x-C.x,y:b.y-C.y},Z={x:k.x-C.x,y:k.y-C.y},J=kt(F,Z);return lt(J,0)},Mt=function(C){return Math.sqrt(ct(C,C))},Xt=function(C,b,k){var F={x:b.x-C.x,y:b.y-C.y},Z={x:k.x-C.x,y:k.y-C.y};return kt(Z,F)/Mt(Z)/Mt(F)},ft=function(C,b,k){var F={x:b.x-C.x,y:b.y-C.y},Z={x:k.x-C.x,y:k.y-C.y};return ct(Z,F)/Mt(Z)/Mt(F)},Ct=function(C,b,k){return b.y===0?null:{x:C.x+b.x/b.y*(k-C.y),y:k}},st=function(C,b,k){return b.x===0?null:{x:k,y:C.y+b.y/b.x*(k-C.x)}},Rt=function(C,b,k,F){if(b.x===0)return st(k,F,C.x);if(F.x===0)return st(C,b,k.x);if(b.y===0)return Ct(k,F,C.y);if(F.y===0)return Ct(C,b,k.y);var Z=kt(b,F);if(Z==0)return null;var J={x:k.x-C.x,y:k.y-C.y},tt=kt(J,b)/Z,pt=kt(J,F)/Z;return{x:(C.x+pt*b.x+(k.x+tt*F.x))/2,y:(C.y+pt*b.y+(k.y+tt*F.y))/2}},Ot=function(){function C(b,k){l(this,C),b.events===void 0?b.events=[this]:b.events.push(this),this.point=b,this.isLeft=k}return g(C,null,[{key:"compare",value:function(b,k){var F=C.comparePoints(b.point,k.point);return F!==0?F:(b.point!==k.point&&b.link(k),b.isLeft!==k.isLeft?b.isLeft?1:-1:Tt.compare(b.segment,k.segment))}},{key:"comparePoints",value:function(b,k){return b.x<k.x?-1:b.x>k.x?1:b.y<k.y?-1:b.y>k.y?1:0}}]),g(C,[{key:"link",value:function(b){if(b.point===this.point)throw new Error("Tried to link already linked events");for(var k=b.point.events,F=0,Z=k.length;F<Z;F++){var J=k[F];this.point.events.push(J),J.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var b=this.point.events.length,k=0;k<b;k++){var F=this.point.events[k];if(F.segment.consumedBy===void 0)for(var Z=k+1;Z<b;Z++){var J=this.point.events[Z];J.consumedBy===void 0&&F.otherSE.point.events===J.otherSE.point.events&&F.segment.consume(J.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var b=[],k=0,F=this.point.events.length;k<F;k++){var Z=this.point.events[k];Z!==this&&!Z.segment.ringOut&&Z.segment.isInResult()&&b.push(Z)}return b}},{key:"getLeftmostComparator",value:function(b){var k=this,F=new Map,Z=function(J){var tt=J.otherSE;F.set(J,{sine:Xt(k.point,b.point,tt.point),cosine:ft(k.point,b.point,tt.point)})};return function(J,tt){F.has(J)||Z(J),F.has(tt)||Z(tt);var pt=F.get(J),Lt=pt.sine,vt=pt.cosine,Ft=F.get(tt),Wt=Ft.sine,Jt=Ft.cosine;return Lt>=0&&Wt>=0?vt<Jt?1:vt>Jt?-1:0:Lt<0&&Wt<0?vt<Jt?-1:vt>Jt?1:0:Wt<Lt?-1:Wt>Lt?1:0}}}]),C}(),Qt=0,Tt=function(){function C(b,k,F,Z){l(this,C),this.id=++Qt,this.leftSE=b,b.segment=this,b.otherSE=k,this.rightSE=k,k.segment=this,k.otherSE=b,this.rings=F,this.windings=Z}return g(C,null,[{key:"compare",value:function(b,k){var F=b.leftSE.point.x,Z=k.leftSE.point.x,J=b.rightSE.point.x,tt=k.rightSE.point.x;if(tt<F)return 1;if(J<Z)return-1;var pt=b.leftSE.point.y,Lt=k.leftSE.point.y,vt=b.rightSE.point.y,Ft=k.rightSE.point.y;if(F<Z){if(Lt<pt&&Lt<vt)return 1;if(Lt>pt&&Lt>vt)return-1;var Wt=b.comparePoint(k.leftSE.point);if(Wt<0)return 1;if(Wt>0)return-1;var Jt=k.comparePoint(b.rightSE.point);return Jt!==0?Jt:-1}if(F>Z){if(pt<Lt&&pt<Ft)return-1;if(pt>Lt&&pt>Ft)return 1;var $t=k.comparePoint(b.leftSE.point);if($t!==0)return $t;var jt=b.comparePoint(k.rightSE.point);return jt<0?1:jt>0?-1:1}if(pt<Lt)return-1;if(pt>Lt)return 1;if(J<tt){var ge=k.comparePoint(b.rightSE.point);if(ge!==0)return ge}if(J>tt){var pe=b.comparePoint(k.rightSE.point);if(pe<0)return 1;if(pe>0)return-1}if(J!==tt){var Te=vt-pt,Ce=J-F,he=Ft-Lt,An=tt-Z;if(Te>Ce&&he<An)return 1;if(Te<Ce&&he>An)return-1}return J>tt?1:J<tt||vt<Ft?-1:vt>Ft?1:b.id<k.id?-1:b.id>k.id?1:0}}]),g(C,[{key:"replaceRightSE",value:function(b){this.rightSE=b,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var b=this.leftSE.point.y,k=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:b<k?b:k},ur:{x:this.rightSE.point.x,y:b>k?b:k}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(b){return b.x===this.leftSE.point.x&&b.y===this.leftSE.point.y||b.x===this.rightSE.point.x&&b.y===this.rightSE.point.y}},{key:"comparePoint",value:function(b){if(this.isAnEndpoint(b))return 0;var k=this.leftSE.point,F=this.rightSE.point,Z=this.vector();if(k.x===F.x)return b.x===k.x?0:b.x<k.x?1:-1;var J=(b.y-k.y)/Z.y,tt=k.x+J*Z.x;if(b.x===tt)return 0;var pt=(b.x-k.x)/Z.x,Lt=k.y+pt*Z.y;return b.y===Lt?0:b.y<Lt?-1:1}},{key:"getIntersection",value:function(b){var k=this.bbox(),F=b.bbox(),Z=K(k,F);if(Z===null)return null;var J=this.leftSE.point,tt=this.rightSE.point,pt=b.leftSE.point,Lt=b.rightSE.point,vt=H(k,pt)&&this.comparePoint(pt)===0,Ft=H(F,J)&&b.comparePoint(J)===0,Wt=H(k,Lt)&&this.comparePoint(Lt)===0,Jt=H(F,tt)&&b.comparePoint(tt)===0;if(Ft&&vt)return Jt&&!Wt?tt:!Jt&&Wt?Lt:null;if(Ft)return Wt&&J.x===Lt.x&&J.y===Lt.y?null:J;if(vt)return Jt&&tt.x===pt.x&&tt.y===pt.y?null:pt;if(Jt&&Wt)return null;if(Jt)return tt;if(Wt)return Lt;var $t=Rt(J,this.vector(),pt,b.vector());return $t===null?null:H(Z,$t)?Q.round($t.x,$t.y):null}},{key:"split",value:function(b){var k=[],F=b.events!==void 0,Z=new Ot(b,!0),J=new Ot(b,!1),tt=this.rightSE;this.replaceRightSE(J),k.push(J),k.push(Z);var pt=new C(Z,tt,this.rings.slice(),this.windings.slice());return Ot.comparePoints(pt.leftSE.point,pt.rightSE.point)>0&&pt.swapEvents(),Ot.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),F&&(Z.checkForConsuming(),J.checkForConsuming()),k}},{key:"swapEvents",value:function(){var b=this.rightSE;this.rightSE=this.leftSE,this.leftSE=b,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var k=0,F=this.windings.length;k<F;k++)this.windings[k]*=-1}},{key:"consume",value:function(b){for(var k=this,F=b;k.consumedBy;)k=k.consumedBy;for(;F.consumedBy;)F=F.consumedBy;var Z=C.compare(k,F);if(Z!==0){if(Z>0){var J=k;k=F,F=J}if(k.prev===F){var tt=k;k=F,F=tt}for(var pt=0,Lt=F.rings.length;pt<Lt;pt++){var vt=F.rings[pt],Ft=F.windings[pt],Wt=k.rings.indexOf(vt);Wt===-1?(k.rings.push(vt),k.windings.push(Ft)):k.windings[Wt]+=Ft}F.rings=null,F.windings=null,F.consumedBy=k,F.leftSE.consumedBy=k.leftSE,F.rightSE.consumedBy=k.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(this.prev){var b=this.prev.consumedBy||this.prev;this._beforeState=b.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var b=this.beforeState();this._afterState={rings:b.rings.slice(0),windings:b.windings.slice(0),multiPolys:[]};for(var k=this._afterState.rings,F=this._afterState.windings,Z=this._afterState.multiPolys,J=0,tt=this.rings.length;J<tt;J++){var pt=this.rings[J],Lt=this.windings[J],vt=k.indexOf(pt);vt===-1?(k.push(pt),F.push(Lt)):F[vt]+=Lt}for(var Ft=[],Wt=[],Jt=0,$t=k.length;Jt<$t;Jt++)if(F[Jt]!==0){var jt=k[Jt],ge=jt.poly;if(Wt.indexOf(ge)===-1)if(jt.isExterior)Ft.push(ge);else{Wt.indexOf(ge)===-1&&Wt.push(ge);var pe=Ft.indexOf(jt.poly);pe!==-1&&Ft.splice(pe,1)}}for(var Te=0,Ce=Ft.length;Te<Ce;Te++){var he=Ft[Te].multiPoly;Z.indexOf(he)===-1&&Z.push(he)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var b=this.beforeState().multiPolys,k=this.afterState().multiPolys;switch(Me.type){case"union":var F=b.length===0,Z=k.length===0;this._isInResult=F!==Z;break;case"intersection":var J,tt;b.length<k.length?(J=b.length,tt=k.length):(J=k.length,tt=b.length),this._isInResult=tt===Me.numMultiPolys&&J<tt;break;case"xor":var pt=Math.abs(b.length-k.length);this._isInResult=pt%2==1;break;case"difference":var Lt=function(vt){return vt.length===1&&vt[0].isSubject};this._isInResult=Lt(b)!==Lt(k);break;default:throw new Error("Unrecognized operation type found ".concat(Me.type))}return this._isInResult}}],[{key:"fromRing",value:function(b,k,F){var Z,J,tt,pt=Ot.comparePoints(b,k);if(pt<0)Z=b,J=k,tt=1;else{if(!(pt>0))throw new Error("Tried to create degenerate segment at [".concat(b.x,", ").concat(b.y,"]"));Z=k,J=b,tt=-1}return new C(new Ot(Z,!0),new Ot(J,!1),[F],[tt])}}]),C}(),ce=function(){function C(b,k,F){if(l(this,C),!Array.isArray(b)||b.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=k,this.isExterior=F,this.segments=[],typeof b[0][0]!="number"||typeof b[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var Z=Q.round(b[0][0],b[0][1]);this.bbox={ll:{x:Z.x,y:Z.y},ur:{x:Z.x,y:Z.y}};for(var J=Z,tt=1,pt=b.length;tt<pt;tt++){if(typeof b[tt][0]!="number"||typeof b[tt][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var Lt=Q.round(b[tt][0],b[tt][1]);Lt.x===J.x&&Lt.y===J.y||(this.segments.push(Tt.fromRing(J,Lt,this)),Lt.x<this.bbox.ll.x&&(this.bbox.ll.x=Lt.x),Lt.y<this.bbox.ll.y&&(this.bbox.ll.y=Lt.y),Lt.x>this.bbox.ur.x&&(this.bbox.ur.x=Lt.x),Lt.y>this.bbox.ur.y&&(this.bbox.ur.y=Lt.y),J=Lt)}Z.x===J.x&&Z.y===J.y||this.segments.push(Tt.fromRing(J,Z,this))}return g(C,[{key:"getSweepEvents",value:function(){for(var b=[],k=0,F=this.segments.length;k<F;k++){var Z=this.segments[k];b.push(Z.leftSE),b.push(Z.rightSE)}return b}}]),C}(),Re=function(){function C(b,k){if(l(this,C),!Array.isArray(b))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new ce(b[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var F=1,Z=b.length;F<Z;F++){var J=new ce(b[F],this,!1);J.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=J.bbox.ll.x),J.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=J.bbox.ll.y),J.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=J.bbox.ur.x),J.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=J.bbox.ur.y),this.interiorRings.push(J)}this.multiPoly=k}return g(C,[{key:"getSweepEvents",value:function(){for(var b=this.exteriorRing.getSweepEvents(),k=0,F=this.interiorRings.length;k<F;k++)for(var Z=this.interiorRings[k].getSweepEvents(),J=0,tt=Z.length;J<tt;J++)b.push(Z[J]);return b}}]),C}(),Cn=function(){function C(b,k){if(l(this,C),!Array.isArray(b))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof b[0][0][0]=="number"&&(b=[b])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var F=0,Z=b.length;F<Z;F++){var J=new Re(b[F],this);J.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=J.bbox.ll.x),J.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=J.bbox.ll.y),J.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=J.bbox.ur.x),J.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=J.bbox.ur.y),this.polys.push(J)}this.isSubject=k}return g(C,[{key:"getSweepEvents",value:function(){for(var b=[],k=0,F=this.polys.length;k<F;k++)for(var Z=this.polys[k].getSweepEvents(),J=0,tt=Z.length;J<tt;J++)b.push(Z[J]);return b}}]),C}(),fe=function(){function C(b){l(this,C),this.events=b;for(var k=0,F=b.length;k<F;k++)b[k].segment.ringOut=this;this.poly=null}return g(C,null,[{key:"factory",value:function(b){for(var k=[],F=0,Z=b.length;F<Z;F++){var J=b[F];if(J.isInResult()&&!J.ringOut){for(var tt=null,pt=J.leftSE,Lt=J.rightSE,vt=[pt],Ft=pt.point,Wt=[];tt=pt,pt=Lt,vt.push(pt),pt.point!==Ft;)for(;;){var Jt=pt.getAvailableLinkedEvents();if(Jt.length===0){var $t=vt[0].point,jt=vt[vt.length-1].point;throw new Error("Unable to complete output ring starting at [".concat($t.x,",")+" ".concat($t.y,"]. Last matching segment found ends at")+" [".concat(jt.x,", ").concat(jt.y,"]."))}if(Jt.length===1){Lt=Jt[0].otherSE;break}for(var ge=null,pe=0,Te=Wt.length;pe<Te;pe++)if(Wt[pe].point===pt.point){ge=pe;break}if(ge===null){Wt.push({index:vt.length,point:pt.point});var Ce=pt.getLeftmostComparator(tt);Lt=Jt.sort(Ce)[0].otherSE;break}var he=Wt.splice(ge)[0],An=vt.splice(he.index);An.unshift(An[0].otherSE),k.push(new C(An.reverse()))}k.push(new C(vt))}}return k}}]),g(C,[{key:"getGeom",value:function(){for(var b=this.events[0].point,k=[b],F=1,Z=this.events.length-1;F<Z;F++){var J=this.events[F].point,tt=this.events[F+1].point;bt(J,b,tt)!==0&&(k.push(J),b=J)}if(k.length===1)return null;var pt=k[0],Lt=k[1];bt(pt,b,Lt)===0&&k.shift(),k.push(k[0]);for(var vt=this.isExteriorRing()?1:-1,Ft=this.isExteriorRing()?0:k.length-1,Wt=this.isExteriorRing()?k.length:-1,Jt=[],$t=Ft;$t!=Wt;$t+=vt)Jt.push([k[$t].x,k[$t].y]);return Jt}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var b=this.enclosingRing();this._isExteriorRing=!b||!b.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var b=this.events[0],k=1,F=this.events.length;k<F;k++){var Z=this.events[k];Ot.compare(b,Z)>0&&(b=Z)}for(var J=b.segment.prevInResult(),tt=J?J.prevInResult():null;;){if(!J)return null;if(!tt)return J.ringOut;if(tt.ringOut!==J.ringOut)return tt.ringOut.enclosingRing()!==J.ringOut?J.ringOut:J.ringOut.enclosingRing();J=tt.prevInResult(),tt=J?J.prevInResult():null}}}]),C}(),ke=function(){function C(b){l(this,C),this.exteriorRing=b,b.poly=this,this.interiorRings=[]}return g(C,[{key:"addInterior",value:function(b){this.interiorRings.push(b),b.poly=this}},{key:"getGeom",value:function(){var b=[this.exteriorRing.getGeom()];if(b[0]===null)return null;for(var k=0,F=this.interiorRings.length;k<F;k++){var Z=this.interiorRings[k].getGeom();Z!==null&&b.push(Z)}return b}}]),C}(),Bt=function(){function C(b){l(this,C),this.rings=b,this.polys=this._composePolys(b)}return g(C,[{key:"getGeom",value:function(){for(var b=[],k=0,F=this.polys.length;k<F;k++){var Z=this.polys[k].getGeom();Z!==null&&b.push(Z)}return b}},{key:"_composePolys",value:function(b){for(var k=[],F=0,Z=b.length;F<Z;F++){var J=b[F];if(!J.poly)if(J.isExteriorRing())k.push(new ke(J));else{var tt=J.enclosingRing();tt.poly||k.push(new ke(tt)),tt.poly.addInterior(J)}}return k}}]),C}(),hn=function(){function C(b){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Tt.compare;l(this,C),this.queue=b,this.tree=new z(k),this.segments=[]}return g(C,[{key:"process",value:function(b){var k=b.segment,F=[];if(b.consumedBy)return b.isLeft?this.queue.remove(b.otherSE):this.tree.remove(k),F;var Z=b.isLeft?this.tree.insert(k):this.tree.find(k);if(!Z)throw new Error("Unable to find segment #".concat(k.id," ")+"[".concat(k.leftSE.point.x,", ").concat(k.leftSE.point.y,"] -> ")+"[".concat(k.rightSE.point.x,", ").concat(k.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var J=Z,tt=Z,pt=void 0,Lt=void 0;pt===void 0;)(J=this.tree.prev(J))===null?pt=null:J.key.consumedBy===void 0&&(pt=J.key);for(;Lt===void 0;)(tt=this.tree.next(tt))===null?Lt=null:tt.key.consumedBy===void 0&&(Lt=tt.key);if(b.isLeft){var vt=null;if(pt){var Ft=pt.getIntersection(k);if(Ft!==null&&(k.isAnEndpoint(Ft)||(vt=Ft),!pt.isAnEndpoint(Ft)))for(var Wt=this._splitSafely(pt,Ft),Jt=0,$t=Wt.length;Jt<$t;Jt++)F.push(Wt[Jt])}var jt=null;if(Lt){var ge=Lt.getIntersection(k);if(ge!==null&&(k.isAnEndpoint(ge)||(jt=ge),!Lt.isAnEndpoint(ge)))for(var pe=this._splitSafely(Lt,ge),Te=0,Ce=pe.length;Te<Ce;Te++)F.push(pe[Te])}if(vt!==null||jt!==null){var he=null;he=vt===null?jt:jt===null||Ot.comparePoints(vt,jt)<=0?vt:jt,this.queue.remove(k.rightSE),F.push(k.rightSE);for(var An=k.split(he),we=0,St=An.length;we<St;we++)F.push(An[we])}F.length>0?(this.tree.remove(k),F.push(b)):(this.segments.push(k),k.prev=pt)}else{if(pt&&Lt){var Dn=pt.getIntersection(Lt);if(Dn!==null){if(!pt.isAnEndpoint(Dn))for(var Xn=this._splitSafely(pt,Dn),re=0,Yr=Xn.length;re<Yr;re++)F.push(Xn[re]);if(!Lt.isAnEndpoint(Dn))for(var zn=this._splitSafely(Lt,Dn),cn=0,or=zn.length;cn<or;cn++)F.push(zn[cn])}}this.tree.remove(k)}return F}},{key:"_splitSafely",value:function(b,k){this.tree.remove(b);var F=b.rightSE;this.queue.remove(F);var Z=b.split(k);return Z.push(F),b.consumedBy===void 0&&this.tree.insert(b),Z}}]),C}(),Sn=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Hn=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Me=new(function(){function C(){l(this,C)}return g(C,[{key:"run",value:function(b,k,F){Me.type=b,Q.reset();for(var Z=[new Cn(k,!0)],J=0,tt=F.length;J<tt;J++)Z.push(new Cn(F[J],!1));if(Me.numMultiPolys=Z.length,Me.type==="difference")for(var pt=Z[0],Lt=1;Lt<Z.length;)K(Z[Lt].bbox,pt.bbox)!==null?Lt++:Z.splice(Lt,1);if(Me.type==="intersection"){for(var vt=0,Ft=Z.length;vt<Ft;vt++)for(var Wt=Z[vt],Jt=vt+1,$t=Z.length;Jt<$t;Jt++)if(K(Wt.bbox,Z[Jt].bbox)===null)return[]}for(var jt=new z(Ot.compare),ge=0,pe=Z.length;ge<pe;ge++)for(var Te=Z[ge].getSweepEvents(),Ce=0,he=Te.length;Ce<he;Ce++)if(jt.insert(Te[Ce]),jt.size>Sn)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var An=new hn(jt),we=jt.size,St=jt.pop();St;){var Dn=St.key;if(jt.size===we){var Xn=Dn.segment;throw new Error("Unable to pop() ".concat(Dn.isLeft?"left":"right"," SweepEvent ")+"[".concat(Dn.point.x,", ").concat(Dn.point.y,"] from segment #").concat(Xn.id," ")+"[".concat(Xn.leftSE.point.x,", ").concat(Xn.leftSE.point.y,"] -> ")+"[".concat(Xn.rightSE.point.x,", ").concat(Xn.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(jt.size>Sn)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(An.segments.length>Hn)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var re=An.process(Dn),Yr=0,zn=re.length;Yr<zn;Yr++){var cn=re[Yr];cn.consumedBy===void 0&&jt.insert(cn)}we=jt.size,St=jt.pop()}Q.reset();var or=fe.factory(An.segments);return new Bt(or).getGeom()}}]),C}()),ue=function(C){for(var b=arguments.length,k=new Array(b>1?b-1:0),F=1;F<b;F++)k[F-1]=arguments[F];return Me.run("union",C,k)},Ht=function(C){for(var b=arguments.length,k=new Array(b>1?b-1:0),F=1;F<b;F++)k[F-1]=arguments[F];return Me.run("intersection",C,k)},ht=function(C){for(var b=arguments.length,k=new Array(b>1?b-1:0),F=1;F<b;F++)k[F-1]=arguments[F];return Me.run("xor",C,k)},Y=function(C){for(var b=arguments.length,k=new Array(b>1?b-1:0),F=1;F<b;F++)k[F-1]=arguments[F];return Me.run("difference",C,k)};return{union:ue,intersection:Ht,xor:ht,difference:Y}}()},2582:function(a){a.exports=function(){"use strict";function l(q,H,K,et,X){(function lt(gt,Et,Q,kt,ct){for(;kt>Q;){if(kt-Q>600){var bt=kt-Q+1,Mt=Et-Q+1,Xt=Math.log(bt),ft=.5*Math.exp(2*Xt/3),Ct=.5*Math.sqrt(Xt*ft*(bt-ft)/bt)*(Mt-bt/2<0?-1:1);lt(gt,Et,Math.max(Q,Math.floor(Et-Mt*ft/bt+Ct)),Math.min(kt,Math.floor(Et+(bt-Mt)*ft/bt+Ct)),ct)}var st=gt[Et],Rt=Q,Ot=kt;for(c(gt,Q,Et),ct(gt[kt],st)>0&&c(gt,Q,kt);Rt<Ot;){for(c(gt,Rt,Ot),Rt++,Ot--;ct(gt[Rt],st)<0;)Rt++;for(;ct(gt[Ot],st)>0;)Ot--}ct(gt[Q],st)===0?c(gt,Q,Ot):c(gt,++Ot,kt),Ot<=Et&&(Q=Ot+1),Et<=Ot&&(kt=Ot-1)}})(q,H,K||0,et||q.length-1,X||g)}function c(q,H,K){var et=q[H];q[H]=q[K],q[K]=et}function g(q,H){return q<H?-1:q>H?1:0}var m=function(q){q===void 0&&(q=9),this._maxEntries=Math.max(4,q),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function v(q,H,K){if(!K)return H.indexOf(q);for(var et=0;et<H.length;et++)if(K(q,H[et]))return et;return-1}function x(q,H){P(q,0,q.children.length,H,q)}function P(q,H,K,et,X){X||(X=D(null)),X.minX=1/0,X.minY=1/0,X.maxX=-1/0,X.maxY=-1/0;for(var lt=H;lt<K;lt++){var gt=q.children[lt];T(X,q.leaf?et(gt):gt)}return X}function T(q,H){return q.minX=Math.min(q.minX,H.minX),q.minY=Math.min(q.minY,H.minY),q.maxX=Math.max(q.maxX,H.maxX),q.maxY=Math.max(q.maxY,H.maxY),q}function N(q,H){return q.minX-H.minX}function G(q,H){return q.minY-H.minY}function z(q){return(q.maxX-q.minX)*(q.maxY-q.minY)}function j(q){return q.maxX-q.minX+(q.maxY-q.minY)}function R(q,H){return q.minX<=H.minX&&q.minY<=H.minY&&H.maxX<=q.maxX&&H.maxY<=q.maxY}function B(q,H){return H.minX<=q.maxX&&H.minY<=q.maxY&&H.maxX>=q.minX&&H.maxY>=q.minY}function D(q){return{children:q,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function A(q,H,K,et,X){for(var lt=[H,K];lt.length;)if(!((K=lt.pop())-(H=lt.pop())<=et)){var gt=H+Math.ceil((K-H)/et/2)*et;l(q,gt,H,K,X),lt.push(H,gt,gt,K)}}return m.prototype.all=function(){return this._all(this.data,[])},m.prototype.search=function(q){var H=this.data,K=[];if(!B(q,H))return K;for(var et=this.toBBox,X=[];H;){for(var lt=0;lt<H.children.length;lt++){var gt=H.children[lt],Et=H.leaf?et(gt):gt;B(q,Et)&&(H.leaf?K.push(gt):R(q,Et)?this._all(gt,K):X.push(gt))}H=X.pop()}return K},m.prototype.collides=function(q){var H=this.data;if(!B(q,H))return!1;for(var K=[];H;){for(var et=0;et<H.children.length;et++){var X=H.children[et],lt=H.leaf?this.toBBox(X):X;if(B(q,lt)){if(H.leaf||R(q,lt))return!0;K.push(X)}}H=K.pop()}return!1},m.prototype.load=function(q){if(!q||!q.length)return this;if(q.length<this._minEntries){for(var H=0;H<q.length;H++)this.insert(q[H]);return this}var K=this._build(q.slice(),0,q.length-1,0);if(this.data.children.length)if(this.data.height===K.height)this._splitRoot(this.data,K);else{if(this.data.height<K.height){var et=this.data;this.data=K,K=et}this._insert(K,this.data.height-K.height-1,!0)}else this.data=K;return this},m.prototype.insert=function(q){return q&&this._insert(q,this.data.height-1),this},m.prototype.clear=function(){return this.data=D([]),this},m.prototype.remove=function(q,H){if(!q)return this;for(var K,et,X,lt=this.data,gt=this.toBBox(q),Et=[],Q=[];lt||Et.length;){if(lt||(lt=Et.pop(),et=Et[Et.length-1],K=Q.pop(),X=!0),lt.leaf){var kt=v(q,lt.children,H);if(kt!==-1)return lt.children.splice(kt,1),Et.push(lt),this._condense(Et),this}X||lt.leaf||!R(lt,gt)?et?(K++,lt=et.children[K],X=!1):lt=null:(Et.push(lt),Q.push(K),K=0,et=lt,lt=lt.children[0])}return this},m.prototype.toBBox=function(q){return q},m.prototype.compareMinX=function(q,H){return q.minX-H.minX},m.prototype.compareMinY=function(q,H){return q.minY-H.minY},m.prototype.toJSON=function(){return this.data},m.prototype.fromJSON=function(q){return this.data=q,this},m.prototype._all=function(q,H){for(var K=[];q;)q.leaf?H.push.apply(H,q.children):K.push.apply(K,q.children),q=K.pop();return H},m.prototype._build=function(q,H,K,et){var X,lt=K-H+1,gt=this._maxEntries;if(lt<=gt)return x(X=D(q.slice(H,K+1)),this.toBBox),X;et||(et=Math.ceil(Math.log(lt)/Math.log(gt)),gt=Math.ceil(lt/Math.pow(gt,et-1))),(X=D([])).leaf=!1,X.height=et;var Et=Math.ceil(lt/gt),Q=Et*Math.ceil(Math.sqrt(gt));A(q,H,K,Q,this.compareMinX);for(var kt=H;kt<=K;kt+=Q){var ct=Math.min(kt+Q-1,K);A(q,kt,ct,Et,this.compareMinY);for(var bt=kt;bt<=ct;bt+=Et){var Mt=Math.min(bt+Et-1,ct);X.children.push(this._build(q,bt,Mt,et-1))}}return x(X,this.toBBox),X},m.prototype._chooseSubtree=function(q,H,K,et){for(;et.push(H),!H.leaf&&et.length-1!==K;){for(var X=1/0,lt=1/0,gt=void 0,Et=0;Et<H.children.length;Et++){var Q=H.children[Et],kt=z(Q),ct=(bt=q,Mt=Q,(Math.max(Mt.maxX,bt.maxX)-Math.min(Mt.minX,bt.minX))*(Math.max(Mt.maxY,bt.maxY)-Math.min(Mt.minY,bt.minY))-kt);ct<lt?(lt=ct,X=kt<X?kt:X,gt=Q):ct===lt&&kt<X&&(X=kt,gt=Q)}H=gt||H.children[0]}var bt,Mt;return H},m.prototype._insert=function(q,H,K){var et=K?q:this.toBBox(q),X=[],lt=this._chooseSubtree(et,this.data,H,X);for(lt.children.push(q),T(lt,et);H>=0&&X[H].children.length>this._maxEntries;)this._split(X,H),H--;this._adjustParentBBoxes(et,X,H)},m.prototype._split=function(q,H){var K=q[H],et=K.children.length,X=this._minEntries;this._chooseSplitAxis(K,X,et);var lt=this._chooseSplitIndex(K,X,et),gt=D(K.children.splice(lt,K.children.length-lt));gt.height=K.height,gt.leaf=K.leaf,x(K,this.toBBox),x(gt,this.toBBox),H?q[H-1].children.push(gt):this._splitRoot(K,gt)},m.prototype._splitRoot=function(q,H){this.data=D([q,H]),this.data.height=q.height+1,this.data.leaf=!1,x(this.data,this.toBBox)},m.prototype._chooseSplitIndex=function(q,H,K){for(var et,X,lt,gt,Et,Q,kt,ct=1/0,bt=1/0,Mt=H;Mt<=K-H;Mt++){var Xt=P(q,0,Mt,this.toBBox),ft=P(q,Mt,K,this.toBBox),Ct=(X=Xt,lt=ft,gt=void 0,Et=void 0,Q=void 0,kt=void 0,gt=Math.max(X.minX,lt.minX),Et=Math.max(X.minY,lt.minY),Q=Math.min(X.maxX,lt.maxX),kt=Math.min(X.maxY,lt.maxY),Math.max(0,Q-gt)*Math.max(0,kt-Et)),st=z(Xt)+z(ft);Ct<ct?(ct=Ct,et=Mt,bt=st<bt?st:bt):Ct===ct&&st<bt&&(bt=st,et=Mt)}return et||K-H},m.prototype._chooseSplitAxis=function(q,H,K){var et=q.leaf?this.compareMinX:N,X=q.leaf?this.compareMinY:G;this._allDistMargin(q,H,K,et)<this._allDistMargin(q,H,K,X)&&q.children.sort(et)},m.prototype._allDistMargin=function(q,H,K,et){q.children.sort(et);for(var X=this.toBBox,lt=P(q,0,H,X),gt=P(q,K-H,K,X),Et=j(lt)+j(gt),Q=H;Q<K-H;Q++){var kt=q.children[Q];T(lt,q.leaf?X(kt):kt),Et+=j(lt)}for(var ct=K-H-1;ct>=H;ct--){var bt=q.children[ct];T(gt,q.leaf?X(bt):bt),Et+=j(gt)}return Et},m.prototype._adjustParentBBoxes=function(q,H,K){for(var et=K;et>=0;et--)T(H[et],q)},m.prototype._condense=function(q){for(var H=q.length-1,K=void 0;H>=0;H--)q[H].children.length===0?H>0?(K=q[H-1].children).splice(K.indexOf(q[H]),1):this.clear():x(q[H],this.toBBox)},m}()}},n={};function s(a){var l=n[a];if(l!==void 0)return l.exports;var c=n[a]={id:a,loaded:!1,exports:{}};return r[a].call(c.exports,c,c.exports,s),c.loaded=!0,c.exports}s.n=a=>{var l=a&&a.__esModule?()=>a.default:()=>a;return s.d(l,{a:l}),l},s.d=(a,l)=>{for(var c in l)s.o(l,c)&&!s.o(a,c)&&Object.defineProperty(a,c,{enumerable:!0,get:l[c]})},s.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),s.o=(a,l)=>Object.prototype.hasOwnProperty.call(a,l),s.nmd=a=>(a.paths=[],a.children||(a.children=[]),a),s(5975)})();var sh=On(Oo()),qu=32,Pf=qu*.5,l_=sh.default.Icon.extend({options:{iconSize:[qu,qu],iconAnchor:[Pf,Pf],popupAnchor:[0,-qu*.25]}}),Cf=async r=>{let n=await(await fetch("./data/bl24/poi/poi.json")).json(),s={};for(let a of n.features){let{name:l,description:c,category:g,link:m}=a.properties,v=a.geometry.coordinates[0],x=a.geometry.coordinates[1];if(s[g]||(s[g]=new l_({iconUrl:"./img/icons/"+g+".png"})),m&&c){let T=m[0]!="#"?'target="_blank':"";c=`<a href="${m}" ${T}">${c}</a>`}let P=`<h3>${l}</h3> <p>${c}</p>`;sh.default.marker([x,v],{icon:s[g]}).addTo(r).bindPopup(P)}};var ju=On(Oo()),Sf=async r=>{let n=await(await fetch("./data/bl24/labels/quarters.json")).json();Uu(n,r,"white",.001)},kf=async r=>{let n=await(await fetch("./data/bl24/labels/plazas.json")).json();Uu(n,r,"white",.0015)},Tf=async r=>{let n=await(await fetch("./data/bl24/labels/neighbourhoods.json")).json();Uu(n,r,"white",.003);let s=await(await fetch("./data/bl24/labels/non-camp-neighbourhoods.json")).json();Uu(s,r,"white",.003)},Uu=(r,n,s,a)=>{for(let c of r.features){let g=c.properties.name,m=c.geometry.coordinates[0],v=c.geometry.coordinates[1];var l=ju.latLngBounds([[v-a*.5,m-a*.5],[v+a*.5,m+a*.5]]);let x=h_(g,"bradleyHand",s);ju.svgOverlay(x,l,{opacity:1,interactive:!1}).addTo(n)}};function h_(r,n,s){let a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.setAttribute("xmlns","http://www.w3.org/2000/svg");let l="",c=r.split(`
`);for(let v of c)l+=`<tspan x="0" dy=".6em">${v}</tspan>`;a.innerHTML=`<text id="text" fill="${s}"font-family="${n}" x="0" y="0" fill="white" >${l}</text>`,document.body.appendChild(a);let m=a.getElementById("text").getBBox();return a.remove(),a.setAttribute("viewBox",`${m.x} ${m.y} ${m.width} ${m.height}`),a}var As=On(Oo()),If=async(r,n,s)=>{let a=As.default.control({position:"bottomright"});a.onAdd=function(g){var m=As.default.DomUtil.create("div","legend");return m.innerHTML+='<img src="./img/slopelegend.png" alt="legend" width="100" height="141">',m};let l=As.default.control({position:"bottomright"});l.onAdd=function(g){var m=As.default.DomUtil.create("div","legend");return m.innerHTML+='<img src="./img/heightlegend.png" alt="legend" width="100" height="124">',m};let c=As.default.control({position:"bottomright"});c.onAdd=function(g){var m=As.default.DomUtil.create("div","legend");return m.innerHTML+='<a target="blank" href="https://docs.google.com/document/d/1JjJArPpIsX-F82Xmcr2Y2dSPHtu2TjGTeYbP4ASkOWY"><img src="./img/soundlegend.png" alt="legend" width="150" height="165"></a>',m},r.on("overlayadd",function(g){switch(g.name){case"Slope":a.addTo(r);break;case"Height":l.addTo(r);break;case"Soundguide":c.addTo(r);break}}),r.on("overlayremove",function(g){switch(g.name){case"Slope":r.removeControl(a);break;case"Height":r.removeControl(l);break;case"Soundguide":r.removeControl(c);break}}),As.default.control.layers(void 0,n,{position:"bottomright"}).addTo(r),s.has("Slope")&&a.addTo(r),s.has("Height")&&l.addTo(r),s.has("Soundguide")&&c.addTo(r)};var Nf=On(Oo());function Of(r){return function(){let n={opacity:1,fillOpacity:0,weight:1.5,dashArray:"5"};switch(r){case"container":return{...n,fillOpacity:1,color:"#c3c3c3",weight:0};case"naturereserve":return{...n,color:"#00b521",weight:3};case"propertyborder":return{...n,color:"#e77409",weight:1};case"friends":return{...n,color:"turquoise"};case"forbidden":return{...n,color:"red",fillOpacity:.5};case"toilet":return{...n,color:"skyblue",fillOpacity:1,dashArray:"0"};case"bridge":return{...n,color:"brown",fillOpacity:1};case"oktocamp":case"publicplease":case"parking":return{...n,color:"lightblue",fillOpacity:0};case"slope":return{...n,fillOpacity:0,opacity:0};case"fireroad":return{...n,weight:1.5,dashArray:"2",color:"#f05039",fillOpacity:.15};case"plaza":return{...n,weight:2,dashArray:"4",color:"white",opacity:.5,fillOpacity:0};case"minorroad":return{...n,weight:1,dashArray:"20",color:"black",opacity:.5,fillOpacity:0};case"area":return{dashArray:"5",color:"#e7e309",fillOpacity:0,weight:2};case"hiddenforbidden":return{color:"black",fillOpacity:1,weight:0};case"redsoundzone":return{...n,color:"#b60d0d",fillOpacity:.75,weight:0};case"orangesoundzone":return{...n,color:"#ff6f16",fillOpacity:.75,weight:0};case"yellowsoundzone":return{...n,color:"#f4e512",fillOpacity:.75,weight:0};case"closetosanctuary":case"greensoundzone":return{...n,color:"#00e300",fillOpacity:.75,weight:0};case"bluesoundzone":return{...n,color:"#29b6f3",fillOpacity:.75,weight:0};default:return{...n,color:"black"}}}}var Ja=async(r,n,s)=>{let l=await(await fetch(s)).json();new Set(l.features.map(g=>g.properties[n])).forEach(g=>{let m=Nf.default.geoJSON(l,{filter:c_(n,g),style:Of(g)});r.groups[g]=m})};function c_(r,n){return function(s){return s.properties[r]===n}}var ah=On(Oo()),Rf=async(r,n,s)=>{var a=ah.default.latLngBounds(s),l=ah.default.imageOverlay(n,a,{opacity:1,interactive:!1});return l};var fa=null,uh=null,lh=null,pa=null,f_=new Promise(async r=>{await Promise.allSettled([customElements.whenDefined("sl-drawer")]);let n=document.getElementById("drawer"),s=document.getElementById("drawer-button");n.addEventListener("sl-request-close",a=>{n.placement!="end"&&a.detail.source==="overlay"&&a.preventDefault()}),n.addEventListener("sl-after-hide",a=>{lh&&lh(),uh&&uh(),fa&&(fa=null),ss.page=void 0}),s.addEventListener("click",()=>{pa&&pa()}),r(n)});async function Af(r){for(let n=0;n<r.length;n++){let s=r[n];n==r.length-1?await os(s,{keepOpen:!1}):await os(s,{keepOpen:!0})}}async function os(r,n={}){return new Promise(async s=>{lh=r.onClose||null,uh=s,pa=null;let a=await f_;a.placement=r.position||"bottom";let l=a.querySelector(".container");l.innerHTML="";let g=await(await fetch(`drawers/${r.file}.html`)).text();r.file.indexOf("home")>-1&&(r.keepOpen=!0);let m=document.createElement("div");m.innerHTML=g;for(let x of Array.from(m.children))l.appendChild(x);let v=document.getElementById("drawer-button");if(n.keepOpen)v.innerHTML="Continue",pa=s;else if(fa&&fa.keepOpen){let x={...fa};v.innerHTML="Back",pa=async()=>{await os(x),s()}}else v.innerHTML="Close",pa=()=>a.hide();r.btn&&(v.innerHTML=r.btn),ss.page=r.file,fa=r,a.show()})}var lw=document.querySelector(".alert-toast-wrapper");async function Ds(r,n="primary",s="info-circle",a=3e3){let l=Object.assign(document.createElement("sl-alert"),{variant:n,closable:!0,duration:a,innerHTML:`
		<sl-icon name="${s}" slot="icon"></sl-icon>
		${r}
	  `});return document.body.append(l),await Promise.allSettled([customElements.whenDefined("sl-alert")]),l.toast(),l}var da="layers:",ga="page:",hh=class{constructor(){this._leafletHash=null;this._leafletMap=null;this._hashMeta=[];this._layers=[];this._page=void 0;window.addEventListener("hashchange",()=>{if(!(location.hash.indexOf(da)==1||location.hash.indexOf(ga)==1))return;let n=location.hash.substring(1).split("/");for(let s of n)s.indexOf(da)==0&&(this.layers=s.substring(da.length).split(",")),s.indexOf(ga)==0&&(this.page=s.substring(ga.length),os({file:this.page,position:"end"}))})}set map(n){this._leafletMap=n,this._leafletHash=new L.Hash(this._leafletMap)}get layers(){return this._layers}set layers(n){n instanceof Set&&(n=Array.from(n)),this._layers=n,this.encode()}get page(){return this._page}set page(n){this._page=n,this.encode()}encode(){this._hashMeta=[],this._layers.length>0&&this._hashMeta.push(da+this._layers.join(",")),this._page&&this._page.length>0&&this._hashMeta.push(ga+this._page),this._leafletHash.setHashMeta(this._hashMeta,!0)}decode(n){this._hashMeta=n;let s=this._hashMeta.find(l=>l.startsWith(da));this._layers=s?s.substring(da.length).split(","):[];let a=this._hashMeta.find(l=>l.startsWith(ga));this._page=a?a.substring(ga.length):void 0,this._page&&os({file:this.page,position:"end"})}},ss=new hh;var Ir=On(Oo());var th=On(Oo());var fi=63710088e-1,Df={centimeters:fi*100,centimetres:fi*100,degrees:fi/111325,feet:fi*3.28084,inches:fi*39.37,kilometers:fi/1e3,kilometres:fi/1e3,meters:fi,metres:fi,miles:fi/1609.344,millimeters:fi*1e3,millimetres:fi*1e3,nauticalmiles:fi/1852,radians:1,yards:fi*1.0936},yw={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/fi,yards:1.0936133};function xi(r,n,s){s===void 0&&(s={});var a={type:"Feature"};return(s.id===0||s.id)&&(a.id=s.id),s.bbox&&(a.bbox=s.bbox),a.properties=n||{},a.geometry=r,a}function Gn(r,n,s){if(s===void 0&&(s={}),!r)throw new Error("coordinates is required");if(!Array.isArray(r))throw new Error("coordinates must be an Array");if(r.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!as(r[0])||!as(r[1]))throw new Error("coordinates must contain numbers");var a={type:"Point",coordinates:r};return xi(a,n,s)}function wr(r,n,s){s===void 0&&(s={});for(var a=0,l=r;a<l.length;a++){var c=l[a];if(c.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var g=0;g<c[c.length-1].length;g++)if(c[c.length-1][g]!==c[0][g])throw new Error("First and last Position are not equivalent.")}var m={type:"Polygon",coordinates:r};return xi(m,n,s)}function Gr(r,n,s){if(s===void 0&&(s={}),r.length<2)throw new Error("coordinates must be an array of two or more positions");var a={type:"LineString",coordinates:r};return xi(a,n,s)}function Ne(r,n){n===void 0&&(n={});var s={type:"FeatureCollection"};return n.id&&(s.id=n.id),n.bbox&&(s.bbox=n.bbox),s.features=r,s}function ch(r,n,s){s===void 0&&(s={});var a={type:"MultiPoint",coordinates:r};return xi(a,n,s)}function $a(r,n){n===void 0&&(n="kilometers");var s=Df[n];if(!s)throw new Error(n+" units is invalid");return r*s}function Qa(r,n){n===void 0&&(n="kilometers");var s=Df[n];if(!s)throw new Error(n+" units is invalid");return r/s}function Ks(r){var n=r%(2*Math.PI);return n*180/Math.PI}function wi(r){var n=r%360;return n*Math.PI/180}function as(r){return!isNaN(r)&&r!==null&&!Array.isArray(r)}function fr(r){return!!r&&r.constructor===Object}function ei(r,n,s){if(r!==null)for(var a,l,c,g,m,v,x,P=0,T=0,N,G=r.type,z=G==="FeatureCollection",j=G==="Feature",R=z?r.features.length:1,B=0;B<R;B++){x=z?r.features[B].geometry:j?r.geometry:r,N=x?x.type==="GeometryCollection":!1,m=N?x.geometries.length:1;for(var D=0;D<m;D++){var A=0,q=0;if(g=N?x.geometries[D]:x,g!==null){v=g.coordinates;var H=g.type;switch(P=s&&(H==="Polygon"||H==="MultiPolygon")?1:0,H){case null:break;case"Point":if(n(v,T,B,A,q)===!1)return!1;T++,A++;break;case"LineString":case"MultiPoint":for(a=0;a<v.length;a++){if(n(v[a],T,B,A,q)===!1)return!1;T++,H==="MultiPoint"&&A++}H==="LineString"&&A++;break;case"Polygon":case"MultiLineString":for(a=0;a<v.length;a++){for(l=0;l<v[a].length-P;l++){if(n(v[a][l],T,B,A,q)===!1)return!1;T++}H==="MultiLineString"&&A++,H==="Polygon"&&q++}H==="Polygon"&&A++;break;case"MultiPolygon":for(a=0;a<v.length;a++){for(q=0,l=0;l<v[a].length;l++){for(c=0;c<v[a][l].length-P;c++){if(n(v[a][l][c],T,B,A,q)===!1)return!1;T++}q++}A++}break;case"GeometryCollection":for(a=0;a<g.geometries.length;a++)if(ei(g.geometries[a],n,s)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Bf(r,n,s,a){var l=s;return ei(r,function(c,g,m,v,x){g===0&&s===void 0?l=c:l=n(l,c,g,m,v,x)},a),l}function Vn(r,n){if(r.type==="Feature")n(r,0);else if(r.type==="FeatureCollection")for(var s=0;s<r.features.length&&n(r.features[s],s)!==!1;s++);}function Xo(r,n){var s,a,l,c,g,m,v,x,P,T,N=0,G=r.type==="FeatureCollection",z=r.type==="Feature",j=G?r.features.length:1;for(s=0;s<j;s++){for(m=G?r.features[s].geometry:z?r.geometry:r,x=G?r.features[s].properties:z?r.properties:{},P=G?r.features[s].bbox:z?r.bbox:void 0,T=G?r.features[s].id:z?r.id:void 0,v=m?m.type==="GeometryCollection":!1,g=v?m.geometries.length:1,l=0;l<g;l++){if(c=v?m.geometries[l]:m,c===null){if(n(null,N,x,P,T)===!1)return!1;continue}switch(c.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(n(c,N,x,P,T)===!1)return!1;break}case"GeometryCollection":{for(a=0;a<c.geometries.length;a++)if(n(c.geometries[a],N,x,P,T)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}N++}}function Ff(r,n,s){var a=s;return Xo(r,function(l,c,g,m,v){c===0&&s===void 0?a=l:a=n(a,l,c,g,m,v)}),a}function Xi(r,n){Xo(r,function(s,a,l,c,g){var m=s===null?null:s.type;switch(m){case null:case"Point":case"LineString":case"Polygon":return n(xi(s,l,{bbox:c,id:g}),a,0)===!1?!1:void 0}var v;switch(m){case"MultiPoint":v="Point";break;case"MultiLineString":v="LineString";break;case"MultiPolygon":v="Polygon";break}for(var x=0;x<s.coordinates.length;x++){var P=s.coordinates[x],T={type:v,coordinates:P};if(n(xi(T,l),a,x)===!1)return!1}})}function Bs(r,n){Xi(r,function(s,a,l){var c=0;if(s.geometry){var g=s.geometry.type;if(!(g==="Point"||g==="MultiPoint")){var m,v=0,x=0,P=0;if(ei(s,function(T,N,G,z,j){if(m===void 0||a>v||z>x||j>P){m=T,v=a,x=z,P=j,c=0;return}var R=Gr([m,T],s.properties);if(n(R,a,l,j,c)===!1)return!1;c++,m=T})===!1)return!1}}})}function fh(r){var n=[1/0,1/0,-1/0,-1/0];return ei(r,function(s){n[0]>s[0]&&(n[0]=s[0]),n[1]>s[1]&&(n[1]=s[1]),n[2]<s[0]&&(n[2]=s[0]),n[3]<s[1]&&(n[3]=s[1])}),n}fh.default=fh;var ni=fh;function Cr(r){if(!r)throw new Error("coord is required");if(!Array.isArray(r)){if(r.type==="Feature"&&r.geometry!==null&&r.geometry.type==="Point")return r.geometry.coordinates;if(r.type==="Point")return r.coordinates}if(Array.isArray(r)&&r.length>=2&&!Array.isArray(r[0])&&!Array.isArray(r[1]))return r;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function qn(r){if(Array.isArray(r))return r;if(r.type==="Feature"){if(r.geometry!==null)return r.geometry.coordinates}else if(r.coordinates)return r.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function ph(r,n,s){if(!r)throw new Error("No feature passed");if(!s)throw new Error(".featureOf() requires a name");if(!r||r.type!=="Feature"||!r.geometry)throw new Error("Invalid input to "+s+", Feature with geometry required");if(!r.geometry||r.geometry.type!==n)throw new Error("Invalid input to "+s+": must be a "+n+", given "+r.geometry.type)}function qr(r){return r.type==="Feature"?r.geometry:r}var x_=On(Hu(),1);var T_=On(np(),1);function Ur(r,n,s){if(s===void 0&&(s={}),!r)throw new Error("point is required");if(!n)throw new Error("polygon is required");var a=Cr(r),l=qr(n),c=l.type,g=n.bbox,m=l.coordinates;if(g&&I_(a,g)===!1)return!1;c==="Polygon"&&(m=[m]);for(var v=!1,x=0;x<m.length&&!v;x++)if(rp(a,m[x][0],s.ignoreBoundary)){for(var P=!1,T=1;T<m[x].length&&!P;)rp(a,m[x][T],!s.ignoreBoundary)&&(P=!0),T++;P||(v=!0)}return v}function rp(r,n,s){var a=!1;n[0][0]===n[n.length-1][0]&&n[0][1]===n[n.length-1][1]&&(n=n.slice(0,n.length-1));for(var l=0,c=n.length-1;l<n.length;c=l++){var g=n[l][0],m=n[l][1],v=n[c][0],x=n[c][1],P=r[1]*(g-v)+m*(v-r[0])+x*(r[0]-g)===0&&(g-r[0])*(v-r[0])<=0&&(m-r[1])*(x-r[1])<=0;if(P)return!s;var T=m>r[1]!=x>r[1]&&r[0]<(v-g)*(r[1]-m)/(x-m)+g;T&&(a=!a)}return a}function I_(r,n){return n[0]<=r[0]&&n[1]<=r[1]&&n[2]>=r[0]&&n[3]>=r[1]}function O_(r,n,s){s===void 0&&(s={});var a=Cr(r),l=Cr(n),c=wi(l[1]-a[1]),g=wi(l[0]-a[0]),m=wi(a[1]),v=wi(l[1]),x=Math.pow(Math.sin(c/2),2)+Math.pow(Math.sin(g/2),2)*Math.cos(m)*Math.cos(v);return $a(2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x)),s.units)}var Sr=O_;var op=new ArrayBuffer(16),YL=new Float64Array(op),VL=new Uint32Array(op);var Y_=On(cp(),1);var xE=function(){function r(n){this.points=n.points||[],this.duration=n.duration||1e4,this.sharpness=n.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=n.stepLength||60,this.length=this.points.length,this.delay=0;for(var s=0;s<this.length;s++)this.points[s].z=this.points[s].z||0;for(var s=0;s<this.length-1;s++){var a=this.points[s],l=this.points[s+1];this.centers.push({x:(a.x+l.x)/2,y:(a.y+l.y)/2,z:(a.z+l.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(var s=0;s<this.centers.length-1;s++){var c=this.points[s+1].x-(this.centers[s].x+this.centers[s+1].x)/2,g=this.points[s+1].y-(this.centers[s].y+this.centers[s+1].y)/2,m=this.points[s+1].z-(this.centers[s].y+this.centers[s+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[s+1].x+this.sharpness*(this.centers[s].x+c),y:(1-this.sharpness)*this.points[s+1].y+this.sharpness*(this.centers[s].y+g),z:(1-this.sharpness)*this.points[s+1].z+this.sharpness*(this.centers[s].z+m)},{x:(1-this.sharpness)*this.points[s+1].x+this.sharpness*(this.centers[s+1].x+c),y:(1-this.sharpness)*this.points[s+1].y+this.sharpness*(this.centers[s+1].y+g),z:(1-this.sharpness)*this.points[s+1].z+this.sharpness*(this.centers[s+1].z+m)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}return r.prototype.cacheSteps=function(n){var s=[],a=this.pos(0);s.push(0);for(var l=0;l<this.duration;l+=10){var c=this.pos(l),g=Math.sqrt((c.x-a.x)*(c.x-a.x)+(c.y-a.y)*(c.y-a.y)+(c.z-a.z)*(c.z-a.z));g>n&&(s.push(l),a=c)}return s},r.prototype.vector=function(n){var s=this.pos(n+10),a=this.pos(n-10);return{angle:180*Math.atan2(s.y-a.y,s.x-a.x)/3.14,speed:Math.sqrt((a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y)+(a.z-s.z)*(a.z-s.z))}},r.prototype.pos=function(n){var s=n-this.delay;s<0&&(s=0),s>this.duration&&(s=this.duration-1);var a=s/this.duration;if(a>=1)return this.points[this.length-1];var l=Math.floor((this.points.length-1)*a),c=(this.length-1)*a-l;return V_(c,this.points[l],this.controls[l][1],this.controls[l+1][0],this.points[l+1])},r}();function V_(r,n,s,a,l){var c=W_(r),g={x:l.x*c[0]+a.x*c[1]+s.x*c[2]+n.x*c[3],y:l.y*c[0]+a.y*c[1]+s.y*c[2]+n.y*c[3],z:l.z*c[0]+a.z*c[1]+s.z*c[2]+n.z*c[3]};return g}function W_(r){var n=r*r,s=n*r;return[s,3*n*(1-r),3*r*(1-r)*(1-r),(1-r)*(1-r)*(1-r)]}function ru(r,n){n===void 0&&(n={});var s=Number(r[0]),a=Number(r[1]),l=Number(r[2]),c=Number(r[3]);if(r.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var g=[s,a],m=[s,c],v=[l,c],x=[l,a];return wr([[g,x,v,m,g]],n.properties,{bbox:r,id:n.id})}function K_(r){return ru(ni(r))}var kh=K_;function us(r,n,s,a){a===void 0&&(a={});var l=Cr(r),c=wi(l[0]),g=wi(l[1]),m=wi(s),v=Qa(n,a.units),x=Math.asin(Math.sin(g)*Math.cos(v)+Math.cos(g)*Math.sin(v)*Math.cos(m)),P=c+Math.atan2(Math.sin(m)*Math.sin(v)*Math.cos(g),Math.cos(v)-Math.sin(g)*Math.sin(x)),T=Ks(P),N=Ks(x);return Gn([T,N],a.properties)}function Ms(r,n,s){if(s===void 0&&(s={}),s.final===!0)return J_(r,n);var a=Cr(r),l=Cr(n),c=wi(a[0]),g=wi(l[0]),m=wi(a[1]),v=wi(l[1]),x=Math.sin(g-c)*Math.cos(v),P=Math.cos(m)*Math.sin(v)-Math.sin(m)*Math.cos(v)*Math.cos(g-c);return Ks(Math.atan2(x,P))}function J_(r,n){var s=Ms(n,r);return s=(s+180)%360,s}function $_(r,n){n===void 0&&(n={});var s=ni(r),a=(s[0]+s[2])/2,l=(s[1]+s[3])/2;return Gn([a,l],n.properties,n)}var iu=$_;var gy=On(mp(),1);function my(r){if(!r)throw new Error("geojson is required");var n=[];return Xi(r,function(s){_y(s,n)}),Ne(n)}function _y(r,n){var s=[],a=r.geometry;if(a!==null){switch(a.type){case"Polygon":s=qn(a);break;case"LineString":s=[qn(a)]}s.forEach(function(l){var c=yy(l,r.properties);c.forEach(function(g){g.id=n.length,n.push(g)})})}}function yy(r,n){var s=[];return r.reduce(function(a,l){var c=Gr([a,l],n);return c.bbox=vy(a,l),s.push(c),l}),s}function vy(r,n){var s=r[0],a=r[1],l=n[0],c=n[1],g=s<l?s:l,m=a<c?a:c,v=s>l?s:l,x=a>c?a:c;return[g,m,v,x]}var Fs=my;var Op=On(al(),1);function Zy(r,n){var s={},a=[];if(r.type==="LineString"&&(r=xi(r)),n.type==="LineString"&&(n=xi(n)),r.type==="Feature"&&n.type==="Feature"&&r.geometry!==null&&n.geometry!==null&&r.geometry.type==="LineString"&&n.geometry.type==="LineString"&&r.geometry.coordinates.length===2&&n.geometry.coordinates.length===2){var l=Ip(r,n);return l&&a.push(l),Ne(a)}var c=(0,Op.default)();return c.load(Fs(n)),Vn(Fs(r),function(g){Vn(c.search(g),function(m){var v=Ip(g,m);if(v){var x=qn(v).join(",");s[x]||(s[x]=!0,a.push(v))}})}),Ne(a)}function Ip(r,n){var s=qn(r),a=qn(n);if(s.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(a.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var l=s[0][0],c=s[0][1],g=s[1][0],m=s[1][1],v=a[0][0],x=a[0][1],P=a[1][0],T=a[1][1],N=(T-x)*(g-l)-(P-v)*(m-c),G=(P-v)*(c-x)-(T-x)*(l-v),z=(g-l)*(c-x)-(m-c)*(l-v);if(N===0)return null;var j=G/N,R=z/N;if(j>=0&&j<=1&&R>=0&&R<=1){var B=l+j*(g-l),D=c+j*(m-c);return Gn([B,D])}return null}var Gs=Zy;function Yy(r,n,s){s===void 0&&(s={});var a=Gn([1/0,1/0],{dist:1/0}),l=0;return Xi(r,function(c){for(var g=qn(c),m=0;m<g.length-1;m++){var v=Gn(g[m]);v.properties.dist=Sr(n,v,s);var x=Gn(g[m+1]);x.properties.dist=Sr(n,x,s);var P=Sr(v,x,s),T=Math.max(v.properties.dist,x.properties.dist),N=Ms(v,x),G=us(n,T,N+90,s),z=us(n,T,N-90,s),j=Gs(Gr([G.geometry.coordinates,z.geometry.coordinates]),Gr([v.geometry.coordinates,x.geometry.coordinates])),R=null;j.features.length>0&&(R=j.features[0],R.properties.dist=Sr(n,R,s),R.properties.location=l+Sr(v,R,s)),v.properties.dist<a.properties.dist&&(a=v,a.properties.index=m,a.properties.location=l),x.properties.dist<a.properties.dist&&(a=x,a.properties.index=m+1,a.properties.location=l+P),R&&R.properties.dist<a.properties.dist&&(a=R,a.properties.index=m),l+=P}}),a}var Ps=Yy;var Wy=On(Hu(),1);var Np=6378137;function hs(r){return Ff(r,function(n,s){return n+Ky(s)},0)}function Ky(r){var n=0,s;switch(r.type){case"Polygon":return Rp(r.coordinates);case"MultiPolygon":for(s=0;s<r.coordinates.length;s++)n+=Rp(r.coordinates[s]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function Rp(r){var n=0;if(r&&r.length>0){n+=Math.abs(Ap(r[0]));for(var s=1;s<r.length;s++)n-=Math.abs(Ap(r[s]))}return n}function Ap(r){var n,s,a,l,c,g,m,v=0,x=r.length;if(x>2){for(m=0;m<x;m++)m===x-2?(l=x-2,c=x-1,g=0):m===x-1?(l=x-1,c=0,g=1):(l=m,c=m+1,g=m+2),n=r[l],s=r[c],a=r[g],v+=(Yh(a[0])-Yh(n[0]))*Math.sin(Yh(s[1]));v=v*Np*Np/2}return v}function Yh(r){return r*Math.PI/180}function Jy(r,n,s){s===void 0&&(s={});for(var a=Cr(r),l=qn(n),c=0;c<l.length-1;c++){var g=!1;if(s.ignoreEndVertices&&(c===0&&(g="start"),c===l.length-2&&(g="end"),c===0&&c+1===l.length-1&&(g="both")),$y(l[c],l[c+1],a,g,typeof s.epsilon>"u"?null:s.epsilon))return!0}return!1}function $y(r,n,s,a,l){var c=s[0],g=s[1],m=r[0],v=r[1],x=n[0],P=n[1],T=s[0]-m,N=s[1]-v,G=x-m,z=P-v,j=T*z-N*G;if(l!==null){if(Math.abs(j)>l)return!1}else if(j!==0)return!1;if(a){if(a==="start")return Math.abs(G)>=Math.abs(z)?G>0?m<c&&c<=x:x<=c&&c<m:z>0?v<g&&g<=P:P<=g&&g<v;if(a==="end")return Math.abs(G)>=Math.abs(z)?G>0?m<=c&&c<x:x<c&&c<=m:z>0?v<=g&&g<P:P<g&&g<=v;if(a==="both")return Math.abs(G)>=Math.abs(z)?G>0?m<c&&c<x:x<c&&c<m:z>0?v<g&&g<P:P<g&&g<v}else return Math.abs(G)>=Math.abs(z)?G>0?m<=c&&c<=x:x<=c&&c<=m:z>0?v<=g&&g<=P:P<=g&&g<=v;return!1}var xo=Jy;var ov=On(qp(),1);var Up=Math.PI/180,jp=180/Math.PI,fu=function(r,n){this.lon=r,this.lat=n,this.x=Up*r,this.y=Up*n};fu.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)};fu.prototype.antipode=function(){var r=-1*this.lat,n=this.lon<0?180+this.lon:(180-this.lon)*-1;return new fu(n,r)};var Hp=function(){this.coords=[],this.length=0};Hp.prototype.move_to=function(r){this.length++,this.coords.push(r)};var Qh=function(r){this.properties=r||{},this.geometries=[]};Qh.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(this.geometries.length===1)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var r=[],n=0;n<this.geometries.length;n++)r.push(this.geometries[n].coords);return{geometry:{type:"MultiLineString",coordinates:r},type:"Feature",properties:this.properties}};Qh.prototype.wkt=function(){for(var r="",n="LINESTRING(",s=function(c){n+=c[0]+" "+c[1]+","},a=0;a<this.geometries.length;a++){if(this.geometries[a].coords.length===0)return"LINESTRING(empty)";var l=this.geometries[a].coords;l.forEach(s),r+=n.substring(0,n.length-1)+")"}return r};var Xp=function(r,n,s){if(!r||r.x===void 0||r.y===void 0)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!n||n.x===void 0||n.y===void 0)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new fu(r.x,r.y),this.end=new fu(n.x,n.y),this.properties=s||{};var a=this.start.x-this.end.x,l=this.start.y-this.end.y,c=Math.pow(Math.sin(l/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(a/2),2);if(this.g=2*Math.asin(Math.sqrt(c)),this.g===Math.PI)throw new Error("it appears "+r.view()+" and "+n.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+r+" and "+n)};Xp.prototype.interpolate=function(r){var n=Math.sin((1-r)*this.g)/Math.sin(this.g),s=Math.sin(r*this.g)/Math.sin(this.g),a=n*Math.cos(this.start.y)*Math.cos(this.start.x)+s*Math.cos(this.end.y)*Math.cos(this.end.x),l=n*Math.cos(this.start.y)*Math.sin(this.start.x)+s*Math.cos(this.end.y)*Math.sin(this.end.x),c=n*Math.sin(this.start.y)+s*Math.sin(this.end.y),g=jp*Math.atan2(c,Math.sqrt(Math.pow(a,2)+Math.pow(l,2))),m=jp*Math.atan2(l,a);return[m,g]};Xp.prototype.Arc=function(r,n){var s=[];if(!r||r<=2)s.push([this.start.lon,this.start.lat]),s.push([this.end.lon,this.end.lat]);else for(var a=1/(r-1),l=0;l<r;++l){var c=a*l,g=this.interpolate(c);s.push(g)}for(var m=!1,v=0,x=n&&n.offset?n.offset:10,P=180-x,T=-180+x,N=360-x,G=1;G<s.length;++G){var z=s[G-1][0],j=s[G][0],R=Math.abs(j-z);R>N&&(j>P&&z<T||z>P&&j<T)?m=!0:R>v&&(v=R)}var B=[];if(m&&v<x){var D=[];B.push(D);for(var A=0;A<s.length;++A){var q=parseFloat(s[A][0]);if(A>0&&Math.abs(q-s[A-1][0])>N){var H=parseFloat(s[A-1][0]),K=parseFloat(s[A-1][1]),et=parseFloat(s[A][0]),X=parseFloat(s[A][1]);if(H>-180&&H<T&&et===180&&A+1<s.length&&s[A-1][0]>-180&&s[A-1][0]<T){D.push([-180,s[A][1]]),A++,D.push([s[A][0],s[A][1]]);continue}else if(H>P&&H<180&&et===-180&&A+1<s.length&&s[A-1][0]>P&&s[A-1][0]<180){D.push([180,s[A][1]]),A++,D.push([s[A][0],s[A][1]]);continue}if(H<T&&et>P){var lt=H;H=et,et=lt;var gt=K;K=X,X=gt}if(H>P&&et<T&&(et+=360),H<=180&&et>=180&&H<et){var Et=(180-H)/(et-H),Q=Et*X+(1-Et)*K;D.push([s[A-1][0]>P?180:-180,Q]),D=[],D.push([s[A-1][0]>P?-180:180,Q]),B.push(D)}else D=[],B.push(D);D.push([q,s[A][1]])}else D.push([s[A][0],s[A][1]])}}else{var kt=[];B.push(kt);for(var ct=0;ct<s.length;++ct)kt.push([s[ct][0],s[ct][1]])}for(var bt=new Qh(this.properties),Mt=0;Mt<B.length;++Mt){var Xt=new Hp;bt.geometries.push(Xt);for(var ft=B[Mt],Ct=0;Ct<ft.length;++Ct)Xt.move_to(ft[Ct])}return bt};var uv=On(al(),1);var Lg=On(al(),1);var Ta=On(wc(),1);function x0(r,n,s){if(s===void 0&&(s={}),s=s||{},!fr(s))throw new Error("options is invalid");var a=s.tolerance||0,l=[],c=(0,Lg.default)(),g=Fs(r);c.load(g);var m;return Bs(n,function(v){var x=!1;v&&(Vn(c.search(v),function(P){if(x===!1){var T=qn(v).sort(),N=qn(P).sort();(0,Ta.default)(T,N)||(a===0?xo(T[0],P)&&xo(T[1],P):Ps(P,T[0]).properties.dist<=a&&Ps(P,T[1]).properties.dist<=a)?(x=!0,m?m=Lc(m,v):m=v):(a===0?xo(N[0],v)&&xo(N[1],v):Ps(v,N[0]).properties.dist<=a&&Ps(v,N[1]).properties.dist<=a)&&(m?m=Lc(m,P):m=P)}}),x===!1&&m&&(l.push(m),m=void 0))}),m&&l.push(m),Ne(l)}function Lc(r,n){var s=qn(n),a=qn(r),l=a[0],c=a[a.length-1],g=r.geometry.coordinates;return(0,Ta.default)(s[0],l)?g.unshift(s[1]):(0,Ta.default)(s[0],c)?g.push(s[1]):(0,Ta.default)(s[1],l)?g.unshift(s[0]):(0,Ta.default)(s[1],c)&&g.push(s[0]),r}var bc=x0;var b0=On(Hu(),1);var Fe=[],ze=[],Ge=[],qe=[],Ue=[],je=[],He=[],Xe=[],Ze=[],Ye=[],Ve=[],We=[],Ke=[],Je=[],$e=[],Qe=[],tn=[],en=[],nn=[],rn=[],on=[],sn=[],an=[],un=[];He[85]=Ye[85]=-1;Xe[85]=Ve[85]=0;Ze[85]=We[85]=1;nn[85]=sn[85]=1;rn[85]=an[85]=0;on[85]=un[85]=1;Fe[85]=qe[85]=0;ze[85]=Ue[85]=-1;Ge[85]=$e[85]=0;Qe[85]=Ke[85]=0;tn[85]=Je[85]=1;je[85]=en[85]=1;sn[1]=sn[169]=0;an[1]=an[169]=-1;un[1]=un[169]=0;Ke[1]=Ke[169]=-1;Je[1]=Je[169]=0;$e[1]=$e[169]=0;Ye[4]=Ye[166]=0;Ve[4]=Ve[166]=-1;We[4]=We[166]=1;Qe[4]=Qe[166]=1;tn[4]=tn[166]=0;en[4]=en[166]=0;He[16]=He[154]=0;Xe[16]=Xe[154]=1;Ze[16]=Ze[154]=1;qe[16]=qe[154]=1;Ue[16]=Ue[154]=0;je[16]=je[154]=1;nn[64]=nn[106]=0;rn[64]=rn[106]=1;on[64]=on[106]=0;Fe[64]=Fe[106]=-1;ze[64]=ze[106]=0;Ge[64]=Ge[106]=1;nn[2]=nn[168]=0;rn[2]=rn[168]=-1;on[2]=on[168]=1;sn[2]=sn[168]=0;an[2]=an[168]=-1;un[2]=un[168]=0;Ke[2]=Ke[168]=-1;Je[2]=Je[168]=0;$e[2]=$e[168]=0;Qe[2]=Qe[168]=-1;tn[2]=tn[168]=0;en[2]=en[168]=1;He[8]=He[162]=0;Xe[8]=Xe[162]=-1;Ze[8]=Ze[162]=0;Ye[8]=Ye[162]=0;Ve[8]=Ve[162]=-1;We[8]=We[162]=1;Ke[8]=Ke[162]=1;Je[8]=Je[162]=0;$e[8]=$e[162]=1;Qe[8]=Qe[162]=1;tn[8]=tn[162]=0;en[8]=en[162]=0;He[32]=He[138]=0;Xe[32]=Xe[138]=1;Ze[32]=Ze[138]=1;Ye[32]=Ye[138]=0;Ve[32]=Ve[138]=1;We[32]=We[138]=0;Fe[32]=Fe[138]=1;ze[32]=ze[138]=0;Ge[32]=Ge[138]=0;qe[32]=qe[138]=1;Ue[32]=Ue[138]=0;je[32]=je[138]=1;sn[128]=sn[42]=0;an[128]=an[42]=1;un[128]=un[42]=1;nn[128]=nn[42]=0;rn[128]=rn[42]=1;on[128]=on[42]=0;Fe[128]=Fe[42]=-1;ze[128]=ze[42]=0;Ge[128]=Ge[42]=1;qe[128]=qe[42]=-1;Ue[128]=Ue[42]=0;je[128]=je[42]=0;Ye[5]=Ye[165]=-1;Ve[5]=Ve[165]=0;We[5]=We[165]=0;sn[5]=sn[165]=1;an[5]=an[165]=0;un[5]=un[165]=0;Qe[20]=Qe[150]=0;tn[20]=tn[150]=1;en[20]=en[150]=1;qe[20]=qe[150]=0;Ue[20]=Ue[150]=-1;je[20]=je[150]=1;He[80]=He[90]=-1;Xe[80]=Xe[90]=0;Ze[80]=Ze[90]=1;nn[80]=nn[90]=1;rn[80]=rn[90]=0;on[80]=on[90]=1;Ke[65]=Ke[105]=0;Je[65]=Je[105]=1;$e[65]=$e[105]=0;Fe[65]=Fe[105]=0;ze[65]=ze[105]=-1;Ge[65]=Ge[105]=0;He[160]=He[10]=-1;Xe[160]=Xe[10]=0;Ze[160]=Ze[10]=1;Ye[160]=Ye[10]=-1;Ve[160]=Ve[10]=0;We[160]=We[10]=0;sn[160]=sn[10]=1;an[160]=an[10]=0;un[160]=un[10]=0;nn[160]=nn[10]=1;rn[160]=rn[10]=0;on[160]=on[10]=1;Qe[130]=Qe[40]=0;tn[130]=tn[40]=1;en[130]=en[40]=1;Ke[130]=Ke[40]=0;Je[130]=Je[40]=1;$e[130]=$e[40]=0;Fe[130]=Fe[40]=0;ze[130]=ze[40]=-1;Ge[130]=Ge[40]=0;qe[130]=qe[40]=0;Ue[130]=Ue[40]=-1;je[130]=je[40]=1;Ye[37]=Ye[133]=0;Ve[37]=Ve[133]=1;We[37]=We[133]=1;sn[37]=sn[133]=0;an[37]=an[133]=1;un[37]=un[133]=0;Fe[37]=Fe[133]=-1;ze[37]=ze[133]=0;Ge[37]=Ge[133]=0;qe[37]=qe[133]=1;Ue[37]=Ue[133]=0;je[37]=je[133]=0;Qe[148]=Qe[22]=-1;tn[148]=tn[22]=0;en[148]=en[22]=0;sn[148]=sn[22]=0;an[148]=an[22]=-1;un[148]=un[22]=1;nn[148]=nn[22]=0;rn[148]=rn[22]=1;on[148]=on[22]=1;qe[148]=qe[22]=-1;Ue[148]=Ue[22]=0;je[148]=je[22]=1;He[82]=He[88]=0;Xe[82]=Xe[88]=-1;Ze[82]=Ze[88]=1;Qe[82]=Qe[88]=1;tn[82]=tn[88]=0;en[82]=en[88]=1;Ke[82]=Ke[88]=-1;Je[82]=Je[88]=0;$e[82]=$e[88]=1;nn[82]=nn[88]=0;rn[82]=rn[88]=-1;on[82]=on[88]=0;He[73]=He[97]=0;Xe[73]=Xe[97]=1;Ze[73]=Ze[97]=0;Ye[73]=Ye[97]=0;Ve[73]=Ve[97]=-1;We[73]=We[97]=0;Ke[73]=Ke[97]=1;Je[73]=Je[97]=0;$e[73]=$e[97]=0;Fe[73]=Fe[97]=1;ze[73]=ze[97]=0;Ge[73]=Ge[97]=1;He[145]=He[25]=0;Xe[145]=Xe[25]=-1;Ze[145]=Ze[25]=0;Ke[145]=Ke[25]=1;Je[145]=Je[25]=0;$e[145]=$e[25]=1;sn[145]=sn[25]=0;an[145]=an[25]=1;un[145]=un[25]=1;qe[145]=qe[25]=-1;Ue[145]=Ue[25]=0;je[145]=je[25]=0;Ye[70]=Ye[100]=0;Ve[70]=Ve[100]=1;We[70]=We[100]=0;Qe[70]=Qe[100]=-1;tn[70]=tn[100]=0;en[70]=en[100]=1;nn[70]=nn[100]=0;rn[70]=rn[100]=-1;on[70]=on[100]=1;Fe[70]=Fe[100]=1;ze[70]=ze[100]=0;Ge[70]=Ge[100]=0;Ye[101]=Ye[69]=0;Ve[101]=Ve[69]=1;We[101]=We[69]=0;Fe[101]=Fe[69]=1;ze[101]=ze[69]=0;Ge[101]=Ge[69]=0;sn[149]=sn[21]=0;an[149]=an[21]=1;un[149]=un[21]=1;qe[149]=qe[21]=-1;Ue[149]=Ue[21]=0;je[149]=je[21]=0;Qe[86]=Qe[84]=-1;tn[86]=tn[84]=0;en[86]=en[84]=1;nn[86]=nn[84]=0;rn[86]=rn[84]=-1;on[86]=on[84]=1;He[89]=He[81]=0;Xe[89]=Xe[81]=-1;Ze[89]=Ze[81]=0;Ke[89]=Ke[81]=1;Je[89]=Je[81]=0;$e[89]=$e[81]=1;He[96]=He[74]=0;Xe[96]=Xe[74]=1;Ze[96]=Ze[74]=0;Ye[96]=Ye[74]=-1;Ve[96]=Ve[74]=0;We[96]=We[74]=1;nn[96]=nn[74]=1;rn[96]=rn[74]=0;on[96]=on[74]=0;Fe[96]=Fe[74]=1;ze[96]=ze[74]=0;Ge[96]=Ge[74]=1;He[24]=He[146]=0;Xe[24]=Xe[146]=-1;Ze[24]=Ze[146]=1;Qe[24]=Qe[146]=1;tn[24]=tn[146]=0;en[24]=en[146]=1;Ke[24]=Ke[146]=0;Je[24]=Je[146]=1;$e[24]=$e[146]=1;qe[24]=qe[146]=0;Ue[24]=Ue[146]=-1;je[24]=je[146]=0;Ye[6]=Ye[164]=-1;Ve[6]=Ve[164]=0;We[6]=We[164]=1;Qe[6]=Qe[164]=-1;tn[6]=tn[164]=0;en[6]=en[164]=0;sn[6]=sn[164]=0;an[6]=an[164]=-1;un[6]=un[164]=1;nn[6]=nn[164]=1;rn[6]=rn[164]=0;on[6]=on[164]=0;Ke[129]=Ke[41]=0;Je[129]=Je[41]=1;$e[129]=$e[41]=1;sn[129]=sn[41]=0;an[129]=an[41]=1;un[129]=un[41]=0;Fe[129]=Fe[41]=-1;ze[129]=ze[41]=0;Ge[129]=Ge[41]=0;qe[129]=qe[41]=0;Ue[129]=Ue[41]=-1;je[129]=je[41]=0;Qe[66]=Qe[104]=0;tn[66]=tn[104]=1;en[66]=en[104]=0;Ke[66]=Ke[104]=-1;Je[66]=Je[104]=0;$e[66]=$e[104]=1;nn[66]=nn[104]=0;rn[66]=rn[104]=-1;on[66]=on[104]=0;Fe[66]=Fe[104]=0;ze[66]=ze[104]=-1;Ge[66]=Ge[104]=1;He[144]=He[26]=-1;Xe[144]=Xe[26]=0;Ze[144]=Ze[26]=0;sn[144]=sn[26]=1;an[144]=an[26]=0;un[144]=un[26]=1;nn[144]=nn[26]=0;rn[144]=rn[26]=1;on[144]=on[26]=1;qe[144]=qe[26]=-1;Ue[144]=Ue[26]=0;je[144]=je[26]=1;Ye[36]=Ye[134]=0;Ve[36]=Ve[134]=1;We[36]=We[134]=1;Qe[36]=Qe[134]=0;tn[36]=tn[134]=1;en[36]=en[134]=0;Fe[36]=Fe[134]=0;ze[36]=ze[134]=-1;Ge[36]=Ge[134]=1;qe[36]=qe[134]=1;Ue[36]=Ue[134]=0;je[36]=je[134]=0;He[9]=He[161]=-1;Xe[9]=Xe[161]=0;Ze[9]=Ze[161]=0;Ye[9]=Ye[161]=0;Ve[9]=Ve[161]=-1;We[9]=We[161]=0;Ke[9]=Ke[161]=1;Je[9]=Je[161]=0;$e[9]=$e[161]=0;sn[9]=sn[161]=1;an[9]=an[161]=0;un[9]=un[161]=1;He[136]=0;Xe[136]=1;Ze[136]=1;Ye[136]=0;Ve[136]=1;We[136]=0;Qe[136]=-1;tn[136]=0;en[136]=1;Ke[136]=-1;Je[136]=0;$e[136]=0;sn[136]=0;an[136]=-1;un[136]=0;nn[136]=0;rn[136]=-1;on[136]=1;Fe[136]=1;ze[136]=0;Ge[136]=0;qe[136]=1;Ue[136]=0;je[136]=1;He[34]=0;Xe[34]=-1;Ze[34]=0;Ye[34]=0;Ve[34]=-1;We[34]=1;Qe[34]=1;tn[34]=0;en[34]=0;Ke[34]=1;Je[34]=0;$e[34]=1;sn[34]=0;an[34]=1;un[34]=1;nn[34]=0;rn[34]=1;on[34]=0;Fe[34]=-1;ze[34]=0;Ge[34]=1;qe[34]=-1;Ue[34]=0;je[34]=0;He[35]=0;Xe[35]=1;Ze[35]=1;Ye[35]=0;Ve[35]=-1;We[35]=1;Qe[35]=1;tn[35]=0;en[35]=0;Ke[35]=-1;Je[35]=0;$e[35]=0;sn[35]=0;an[35]=-1;un[35]=0;nn[35]=0;rn[35]=1;on[35]=0;Fe[35]=-1;ze[35]=0;Ge[35]=1;qe[35]=1;Ue[35]=0;je[35]=1;He[153]=0;Xe[153]=1;Ze[153]=1;Ke[153]=-1;Je[153]=0;$e[153]=0;sn[153]=0;an[153]=-1;un[153]=0;qe[153]=1;Ue[153]=0;je[153]=1;Ye[102]=0;Ve[102]=-1;We[102]=1;Qe[102]=1;tn[102]=0;en[102]=0;nn[102]=0;rn[102]=1;on[102]=0;Fe[102]=-1;ze[102]=0;Ge[102]=1;He[155]=0;Xe[155]=-1;Ze[155]=0;Ke[155]=1;Je[155]=0;$e[155]=1;sn[155]=0;an[155]=1;un[155]=1;qe[155]=-1;Ue[155]=0;je[155]=0;Ye[103]=0;Ve[103]=1;We[103]=0;Qe[103]=-1;tn[103]=0;en[103]=1;nn[103]=0;rn[103]=-1;on[103]=1;Fe[103]=1;ze[103]=0;Ge[103]=0;He[152]=0;Xe[152]=1;Ze[152]=1;Qe[152]=-1;tn[152]=0;en[152]=1;Ke[152]=-1;Je[152]=0;$e[152]=0;sn[152]=0;an[152]=-1;un[152]=0;nn[152]=0;rn[152]=-1;on[152]=1;qe[152]=1;Ue[152]=0;je[152]=1;He[156]=0;Xe[156]=-1;Ze[156]=1;Qe[156]=1;tn[156]=0;en[156]=1;Ke[156]=-1;Je[156]=0;$e[156]=0;sn[156]=0;an[156]=-1;un[156]=0;nn[156]=0;rn[156]=1;on[156]=1;qe[156]=-1;Ue[156]=0;je[156]=1;He[137]=0;Xe[137]=1;Ze[137]=1;Ye[137]=0;Ve[137]=1;We[137]=0;Ke[137]=-1;Je[137]=0;$e[137]=0;sn[137]=0;an[137]=-1;un[137]=0;Fe[137]=1;ze[137]=0;Ge[137]=0;qe[137]=1;Ue[137]=0;je[137]=1;He[139]=0;Xe[139]=1;Ze[139]=1;Ye[139]=0;Ve[139]=-1;We[139]=0;Ke[139]=1;Je[139]=0;$e[139]=0;sn[139]=0;an[139]=1;un[139]=0;Fe[139]=-1;ze[139]=0;Ge[139]=0;qe[139]=1;Ue[139]=0;je[139]=1;He[98]=0;Xe[98]=-1;Ze[98]=0;Ye[98]=0;Ve[98]=-1;We[98]=1;Qe[98]=1;tn[98]=0;en[98]=0;Ke[98]=1;Je[98]=0;$e[98]=1;nn[98]=0;rn[98]=1;on[98]=0;Fe[98]=-1;ze[98]=0;Ge[98]=1;He[99]=0;Xe[99]=1;Ze[99]=0;Ye[99]=0;Ve[99]=-1;We[99]=1;Qe[99]=1;tn[99]=0;en[99]=0;Ke[99]=-1;Je[99]=0;$e[99]=1;nn[99]=0;rn[99]=-1;on[99]=0;Fe[99]=1;ze[99]=0;Ge[99]=1;Ye[38]=0;Ve[38]=-1;We[38]=1;Qe[38]=1;tn[38]=0;en[38]=0;sn[38]=0;an[38]=1;un[38]=1;nn[38]=0;rn[38]=1;on[38]=0;Fe[38]=-1;ze[38]=0;Ge[38]=1;qe[38]=-1;Ue[38]=0;je[38]=0;Ye[39]=0;Ve[39]=1;We[39]=1;Qe[39]=-1;tn[39]=0;en[39]=0;sn[39]=0;an[39]=-1;un[39]=1;nn[39]=0;rn[39]=1;on[39]=0;Fe[39]=-1;ze[39]=0;Ge[39]=1;qe[39]=1;Ue[39]=0;je[39]=0;var Ec=function(r){return[[r.bottomleft,0],[0,0],[0,r.leftbottom]]},Mc=function(r){return[[1,r.rightbottom],[1,0],[r.bottomright,0]]},Pc=function(r){return[[r.topright,1],[1,1],[1,r.righttop]]},Cc=function(r){return[[0,r.lefttop],[0,1],[r.topleft,1]]},Sc=function(r){return[[r.bottomright,0],[r.bottomleft,0],[0,r.leftbottom],[0,r.lefttop]]},kc=function(r){return[[r.bottomright,0],[r.bottomleft,0],[1,r.righttop],[1,r.rightbottom]]},Tc=function(r){return[[1,r.righttop],[1,r.rightbottom],[r.topleft,1],[r.topright,1]]},Ic=function(r){return[[0,r.leftbottom],[0,r.lefttop],[r.topleft,1],[r.topright,1]]},E0=function(r){return[[0,0],[0,r.leftbottom],[1,r.rightbottom],[1,0]]},M0=function(r){return[[1,0],[r.bottomright,0],[r.topright,1],[1,1]]},P0=function(r){return[[1,1],[1,r.righttop],[0,r.lefttop],[0,1]]},C0=function(r){return[[r.bottomleft,0],[0,0],[0,1],[r.topleft,1]]},S0=function(r){return[[1,r.righttop],[1,r.rightbottom],[0,r.leftbottom],[0,r.lefttop]]},k0=function(r){return[[r.topleft,1],[r.topright,1],[r.bottomright,0],[r.bottomleft,0]]},T0=function(){return[[0,0],[0,1],[1,1],[1,0]]},I0=function(r){return[[1,r.rightbottom],[1,0],[0,0],[0,1],[r.topleft,1]]},O0=function(r){return[[r.topright,1],[1,1],[1,0],[0,0],[0,r.leftbottom]]},N0=function(r){return[[1,0],[r.bottomright,0],[0,r.lefttop],[0,1],[1,1]]},R0=function(r){return[[1,1],[1,r.righttop],[r.bottomleft,0],[0,0],[0,1]]},A0=function(r){return[[1,r.righttop],[1,r.rightbottom],[0,r.lefttop],[0,1],[r.topleft,1]]},D0=function(r){return[[1,1],[1,r.righttop],[r.bottomright,0],[r.bottomleft,0],[r.topright,1]]},B0=function(r){return[[1,r.rightbottom],[1,0],[r.bottomright,0],[0,r.leftbottom],[0,r.lefttop]]},F0=function(r){return[[r.topright,1],[r.bottomleft,0],[0,0],[0,r.leftbottom],[r.topleft,1]]},z0=function(r){return[[r.bottomright,0],[r.bottomleft,0],[0,r.lefttop],[0,1],[r.topleft,1]]},G0=function(r){return[[1,1],[1,r.righttop],[0,r.leftbottom],[0,r.lefttop],[r.topright,1]]},q0=function(r){return[[1,r.rightbottom],[1,0],[r.bottomright,0],[r.topleft,1],[r.topright,1]]},U0=function(r){return[[1,r.righttop],[1,r.rightbottom],[r.bottomleft,0],[0,0],[0,r.leftbottom]]},j0=function(r){return[[1,r.rightbottom],[1,0],[0,0],[0,r.leftbottom],[r.topleft,1],[r.topright,1]]},H0=function(r){return[[1,1],[1,0],[r.bottomright,0],[0,r.leftbottom],[0,r.lefttop],[r.topright,1]]},X0=function(r){return[[1,1],[1,r.righttop],[r.bottomright,0],[r.bottomleft,0],[0,r.lefttop],[0,1]]},Z0=function(r){return[[1,r.righttop],[1,r.rightbottom],[r.bottomleft,0],[0,0],[0,1],[r.topleft,1]]},Y0=function(r){return[[1,1],[1,r.righttop],[r.bottomleft,0],[0,0],[0,r.leftbottom],[r.topright,1]]},V0=function(r){return[[1,r.rightbottom],[1,0],[r.bottomright,0],[0,r.lefttop],[0,1],[r.topleft,1]]},W0=function(r){return[[1,r.righttop],[1,r.rightbottom],[r.bottomright,0],[r.bottomleft,0],[0,r.leftbottom],[0,r.lefttop],[r.topleft,1],[r.topright,1]]},K0=function(r){return[[1,1],[1,r.righttop],[r.bottomleft,0],[0,0],[0,r.leftbottom],[r.topright,1]]},J0=function(r){return[[1,r.rightbottom],[1,0],[r.bottomright,0],[0,r.lefttop],[0,1],[r.topleft,1]]},$0=function(r){return[[1,1],[1,r.righttop],[r.bottomright,0],[r.bottomleft,0],[0,r.leftbottom],[0,r.lefttop],[r.topright,1]]},Q0=function(r){return[[1,r.righttop],[1,r.rightbottom],[r.bottomleft,0],[0,0],[0,r.leftbottom],[r.topleft,1],[r.topright,1]]},t1=function(r){return[[1,r.righttop],[1,r.rightbottom],[r.bottomright,0],[r.bottomleft,0],[0,r.lefttop],[0,1],[r.topleft,1]]},e1=function(r){return[[1,r.rightbottom],[1,0],[r.bottomright,0],[0,r.leftbottom],[0,r.lefttop],[r.topleft,1],[r.topright,1]]},pn=[],dn=[],gn=[],mn=[],_n=[],yn=[],vn=[],xn=[];mn[1]=_n[1]=18;mn[169]=_n[169]=18;gn[4]=dn[4]=12;gn[166]=dn[166]=12;pn[16]=xn[16]=4;pn[154]=xn[154]=4;yn[64]=vn[64]=22;yn[106]=vn[106]=22;gn[2]=yn[2]=17;mn[2]=_n[2]=18;gn[168]=yn[168]=17;mn[168]=_n[168]=18;pn[8]=mn[8]=9;dn[8]=gn[8]=12;pn[162]=mn[162]=9;dn[162]=gn[162]=12;pn[32]=xn[32]=4;dn[32]=vn[32]=1;pn[138]=xn[138]=4;dn[138]=vn[138]=1;_n[128]=xn[128]=21;yn[128]=vn[128]=22;_n[42]=xn[42]=21;yn[42]=vn[42]=22;dn[5]=_n[5]=14;dn[165]=_n[165]=14;gn[20]=xn[20]=6;gn[150]=xn[150]=6;pn[80]=yn[80]=11;pn[90]=yn[90]=11;mn[65]=vn[65]=3;mn[105]=vn[105]=3;pn[160]=yn[160]=11;dn[160]=_n[160]=14;pn[10]=yn[10]=11;dn[10]=_n[10]=14;gn[130]=xn[130]=6;mn[130]=vn[130]=3;gn[40]=xn[40]=6;mn[40]=vn[40]=3;dn[101]=vn[101]=1;dn[69]=vn[69]=1;_n[149]=xn[149]=21;_n[21]=xn[21]=21;gn[86]=yn[86]=17;gn[84]=yn[84]=17;pn[89]=mn[89]=9;pn[81]=mn[81]=9;pn[96]=vn[96]=0;dn[96]=yn[96]=15;pn[74]=vn[74]=0;dn[74]=yn[74]=15;pn[24]=gn[24]=8;mn[24]=xn[24]=7;pn[146]=gn[146]=8;mn[146]=xn[146]=7;dn[6]=yn[6]=15;gn[6]=_n[6]=16;dn[164]=yn[164]=15;gn[164]=_n[164]=16;mn[129]=xn[129]=7;_n[129]=vn[129]=20;mn[41]=xn[41]=7;_n[41]=vn[41]=20;gn[66]=vn[66]=2;mn[66]=yn[66]=19;gn[104]=vn[104]=2;mn[104]=yn[104]=19;pn[144]=_n[144]=10;yn[144]=xn[144]=23;pn[26]=_n[26]=10;yn[26]=xn[26]=23;dn[36]=xn[36]=5;gn[36]=vn[36]=2;dn[134]=xn[134]=5;gn[134]=vn[134]=2;pn[9]=_n[9]=10;dn[9]=mn[9]=13;pn[161]=_n[161]=10;dn[161]=mn[161]=13;dn[37]=xn[37]=5;_n[37]=vn[37]=20;dn[133]=xn[133]=5;_n[133]=vn[133]=20;gn[148]=_n[148]=16;yn[148]=xn[148]=23;gn[22]=_n[22]=16;yn[22]=xn[22]=23;pn[82]=gn[82]=8;mn[82]=yn[82]=19;pn[88]=gn[88]=8;mn[88]=yn[88]=19;pn[73]=vn[73]=0;dn[73]=mn[73]=13;pn[97]=vn[97]=0;dn[97]=mn[97]=13;pn[145]=mn[145]=9;_n[145]=xn[145]=21;pn[25]=mn[25]=9;_n[25]=xn[25]=21;dn[70]=vn[70]=1;gn[70]=yn[70]=17;dn[100]=vn[100]=1;gn[100]=yn[100]=17;pn[34]=mn[34]=9;dn[34]=gn[34]=12;_n[34]=xn[34]=21;yn[34]=vn[34]=22;pn[136]=xn[136]=4;dn[136]=vn[136]=1;gn[136]=yn[136]=17;mn[136]=_n[136]=18;pn[35]=xn[35]=4;dn[35]=gn[35]=12;mn[35]=_n[35]=18;yn[35]=vn[35]=22;pn[153]=xn[153]=4;mn[153]=_n[153]=18;dn[102]=gn[102]=12;yn[102]=vn[102]=22;pn[155]=mn[155]=9;_n[155]=xn[155]=23;dn[103]=vn[103]=1;gn[103]=yn[103]=17;pn[152]=xn[152]=4;gn[152]=yn[152]=17;mn[152]=_n[152]=18;pn[156]=gn[156]=8;mn[156]=_n[156]=18;yn[156]=xn[156]=23;pn[137]=xn[137]=4;dn[137]=vn[137]=1;mn[137]=_n[137]=18;pn[139]=xn[139]=4;dn[139]=mn[139]=13;_n[139]=vn[139]=20;pn[98]=mn[98]=9;dn[98]=gn[98]=12;yn[98]=vn[98]=22;pn[99]=vn[99]=0;dn[99]=gn[99]=12;mn[99]=yn[99]=19;dn[38]=gn[38]=12;_n[38]=xn[38]=21;yn[38]=vn[38]=22;dn[39]=xn[39]=5;gn[39]=_n[39]=16;yn[39]=vn[39]=22;var Vt=[];Vt[1]=Vt[169]=Ec;Vt[4]=Vt[166]=Mc;Vt[16]=Vt[154]=Pc;Vt[64]=Vt[106]=Cc;Vt[168]=Vt[2]=Sc;Vt[162]=Vt[8]=kc;Vt[138]=Vt[32]=Tc;Vt[42]=Vt[128]=Ic;Vt[5]=Vt[165]=E0;Vt[20]=Vt[150]=M0;Vt[80]=Vt[90]=P0;Vt[65]=Vt[105]=C0;Vt[160]=Vt[10]=S0;Vt[130]=Vt[40]=k0;Vt[85]=T0;Vt[101]=Vt[69]=I0;Vt[149]=Vt[21]=O0;Vt[86]=Vt[84]=N0;Vt[89]=Vt[81]=R0;Vt[96]=Vt[74]=A0;Vt[24]=Vt[146]=D0;Vt[6]=Vt[164]=B0;Vt[129]=Vt[41]=F0;Vt[66]=Vt[104]=z0;Vt[144]=Vt[26]=G0;Vt[36]=Vt[134]=q0;Vt[9]=Vt[161]=U0;Vt[37]=Vt[133]=j0;Vt[148]=Vt[22]=H0;Vt[82]=Vt[88]=X0;Vt[73]=Vt[97]=Z0;Vt[145]=Vt[25]=Y0;Vt[70]=Vt[100]=V0;Vt[34]=function(r){return[Ic(r),kc(r)]};Vt[35]=W0;Vt[136]=function(r){return[Tc(r),Sc(r)]};Vt[153]=function(r){return[Pc(r),Ec(r)]};Vt[102]=function(r){return[Mc(r),Cc(r)]};Vt[155]=K0;Vt[103]=J0;Vt[152]=function(r){return[Pc(r),Sc(r)]};Vt[156]=$0;Vt[137]=function(r){return[Tc(r),Ec(r)]};Vt[139]=Q0;Vt[98]=function(r){return[kc(r),Cc(r)]};Vt[99]=t1;Vt[38]=function(r){return[Mc(r),Ic(r)]};Vt[39]=e1;function r1(r){return(r>0)-(r<0)||+r}function Ia(r,n,s){var a=n[0]-r[0],l=n[1]-r[1],c=s[0]-n[0],g=s[1]-n[1];return r1(a*g-c*l)}function bg(r,n){var s=r.geometry.coordinates[0].map(function(g){return g[0]}),a=r.geometry.coordinates[0].map(function(g){return g[1]}),l=n.geometry.coordinates[0].map(function(g){return g[0]}),c=n.geometry.coordinates[0].map(function(g){return g[1]});return Math.max.apply(null,s)===Math.max.apply(null,l)&&Math.max.apply(null,a)===Math.max.apply(null,c)&&Math.min.apply(null,s)===Math.min.apply(null,l)&&Math.min.apply(null,a)===Math.min.apply(null,c)}function Oc(r,n){return n.geometry.coordinates[0].every(function(s){return Ur(Gn(s),r)})}function Eg(r,n){return r[0]===n[0]&&r[1]===n[1]}var i1=function(){function r(n){this.id=r.buildId(n),this.coordinates=n,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return r.buildId=function(n){return n.join(",")},r.prototype.removeInnerEdge=function(n){this.innerEdges=this.innerEdges.filter(function(s){return s.from.id!==n.from.id})},r.prototype.removeOuterEdge=function(n){this.outerEdges=this.outerEdges.filter(function(s){return s.to.id!==n.to.id})},r.prototype.addOuterEdge=function(n){this.outerEdges.push(n),this.outerEdgesSorted=!1},r.prototype.sortOuterEdges=function(){var n=this;this.outerEdgesSorted||(this.outerEdges.sort(function(s,a){var l=s.to,c=a.to;if(l.coordinates[0]-n.coordinates[0]>=0&&c.coordinates[0]-n.coordinates[0]<0)return 1;if(l.coordinates[0]-n.coordinates[0]<0&&c.coordinates[0]-n.coordinates[0]>=0)return-1;if(l.coordinates[0]-n.coordinates[0]===0&&c.coordinates[0]-n.coordinates[0]===0)return l.coordinates[1]-n.coordinates[1]>=0||c.coordinates[1]-n.coordinates[1]>=0?l.coordinates[1]-c.coordinates[1]:c.coordinates[1]-l.coordinates[1];var g=Ia(n.coordinates,l.coordinates,c.coordinates);if(g<0)return 1;if(g>0)return-1;var m=Math.pow(l.coordinates[0]-n.coordinates[0],2)+Math.pow(l.coordinates[1]-n.coordinates[1],2),v=Math.pow(c.coordinates[0]-n.coordinates[0],2)+Math.pow(c.coordinates[1]-n.coordinates[1],2);return m-v}),this.outerEdgesSorted=!0)},r.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},r.prototype.getOuterEdge=function(n){return this.sortOuterEdges(),this.outerEdges[n]},r.prototype.addInnerEdge=function(n){this.innerEdges.push(n)},r}(),Nc=i1;var o1=function(){function r(n,s){this.from=n,this.to=s,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return r.prototype.getSymetric=function(){return this.symetric||(this.symetric=new r(this.to,this.from),this.symetric.symetric=this),this.symetric},r.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},r.prototype.isEqual=function(n){return this.from.id===n.from.id&&this.to.id===n.to.id},r.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},r.prototype.toLineString=function(){return Gr([this.from.coordinates,this.to.coordinates])},r.prototype.compareTo=function(n){return Ia(n.from.coordinates,n.to.coordinates,this.to.coordinates)},r}(),Mg=o1;var s1=function(){function r(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return r.prototype.push=function(n){this.edges.push(n),this.polygon=this.envelope=void 0},r.prototype.get=function(n){return this.edges[n]},Object.defineProperty(r.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),r.prototype.forEach=function(n){this.edges.forEach(n)},r.prototype.map=function(n){return this.edges.map(n)},r.prototype.some=function(n){return this.edges.some(n)},r.prototype.isValid=function(){return!0},r.prototype.isHole=function(){var n=this,s=this.edges.reduce(function(g,m,v){return m.from.coordinates[1]>n.edges[g].from.coordinates[1]&&(g=v),g},0),a=(s===0?this.length:s)-1,l=(s+1)%this.length,c=Ia(this.edges[a].from.coordinates,this.edges[s].from.coordinates,this.edges[l].from.coordinates);return c===0?this.edges[a].from.coordinates[0]>this.edges[l].from.coordinates[0]:c>0},r.prototype.toMultiPoint=function(){return ch(this.edges.map(function(n){return n.from.coordinates}))},r.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var n=this.edges.map(function(s){return s.from.coordinates});return n.push(this.edges[0].from.coordinates),this.polygon=wr([n])},r.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=kh(this.toPolygon())},r.findEdgeRingContaining=function(n,s){var a=n.getEnvelope(),l,c;return s.forEach(function(g){var m=g.getEnvelope();if(c&&(l=c.getEnvelope()),!bg(m,a)&&Oc(m,a)){for(var v=n.map(function(z){return z.from.coordinates}),x=void 0,P=function(z){g.some(function(j){return Eg(z,j.from.coordinates)})||(x=z)},T=0,N=v;T<N.length;T++){var G=N[T];P(G)}x&&g.inside(Gn(x))&&(!c||Oc(l,m))&&(c=g)}}),c},r.prototype.inside=function(n){return Ur(n,this.toPolygon())},r}(),Rc=s1;function a1(r){if(!r)throw new Error("No geojson passed");if(r.type!=="FeatureCollection"&&r.type!=="GeometryCollection"&&r.type!=="MultiLineString"&&r.type!=="LineString"&&r.type!=="Feature")throw new Error("Invalid input type '"+r.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}var Kk=function(){function r(){this.edges=[],this.nodes={}}return r.fromGeoJson=function(n){a1(n);var s=new r;return Xi(n,function(a){ph(a,"LineString","Graph::fromGeoJson"),Bf(a,function(l,c){if(l){var g=s.getNode(l),m=s.getNode(c);s.addEdge(g,m)}return c})}),s},r.prototype.getNode=function(n){var s=Nc.buildId(n),a=this.nodes[s];return a||(a=this.nodes[s]=new Nc(n)),a},r.prototype.addEdge=function(n,s){var a=new Mg(n,s),l=a.getSymetric();this.edges.push(a),this.edges.push(l)},r.prototype.deleteDangles=function(){var n=this;Object.keys(this.nodes).map(function(s){return n.nodes[s]}).forEach(function(s){return n._removeIfDangle(s)})},r.prototype._removeIfDangle=function(n){var s=this;if(n.innerEdges.length<=1){var a=n.getOuterEdges().map(function(l){return l.to});this.removeNode(n),a.forEach(function(l){return s._removeIfDangle(l)})}},r.prototype.deleteCutEdges=function(){var n=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(s){s.label===s.symetric.label&&(n.removeEdge(s.symetric),n.removeEdge(s))})},r.prototype._computeNextCWEdges=function(n){var s=this;typeof n>"u"?Object.keys(this.nodes).forEach(function(a){return s._computeNextCWEdges(s.nodes[a])}):n.getOuterEdges().forEach(function(a,l){n.getOuterEdge((l===0?n.getOuterEdges().length:l)-1).symetric.next=a})},r.prototype._computeNextCCWEdges=function(n,s){for(var a=n.getOuterEdges(),l,c,g=a.length-1;g>=0;--g){var m=a[g],v=m.symetric,x=void 0,P=void 0;m.label===s&&(x=m),v.label===s&&(P=v),!(!x||!P)&&(P&&(c=P),x&&(c&&(c.next=x,c=void 0),l||(l=x)))}c&&(c.next=l)},r.prototype._findLabeledEdgeRings=function(){var n=[],s=0;return this.edges.forEach(function(a){if(!(a.label>=0)){n.push(a);var l=a;do l.label=s,l=l.next;while(!a.isEqual(l));s++}}),n},r.prototype.getEdgeRings=function(){var n=this;this._computeNextCWEdges(),this.edges.forEach(function(a){a.label=void 0}),this._findLabeledEdgeRings().forEach(function(a){n._findIntersectionNodes(a).forEach(function(l){n._computeNextCCWEdges(l,a.label)})});var s=[];return this.edges.forEach(function(a){a.ring||s.push(n._findEdgeRing(a))}),s},r.prototype._findIntersectionNodes=function(n){var s=[],a=n,l=function(){var c=0;a.from.getOuterEdges().forEach(function(g){g.label===n.label&&++c}),c>1&&s.push(a.from),a=a.next};do l();while(!n.isEqual(a));return s},r.prototype._findEdgeRing=function(n){var s=n,a=new Rc;do a.push(s),s.ring=a,s=s.next;while(!n.isEqual(s));return a},r.prototype.removeNode=function(n){var s=this;n.getOuterEdges().forEach(function(a){return s.removeEdge(a)}),n.innerEdges.forEach(function(a){return s.removeEdge(a)}),delete this.nodes[n.id]},r.prototype.removeEdge=function(n){this.edges=this.edges.filter(function(s){return!s.isEqual(n)}),n.deleteEdge()},r}();function Yo(r,n){var s=qr(r),a=qr(n),l=s.type,c=a.type,g=s.coordinates,m=a.coordinates;switch(l){case"Point":switch(c){case"Point":return Ac(g,m);default:throw new Error("feature2 "+c+" geometry not supported")}case"MultiPoint":switch(c){case"Point":return u1(s,a);case"MultiPoint":return l1(s,a);default:throw new Error("feature2 "+c+" geometry not supported")}case"LineString":switch(c){case"Point":return xo(a,s,{ignoreEndVertices:!0});case"LineString":return f1(s,a);case"MultiPoint":return h1(s,a);default:throw new Error("feature2 "+c+" geometry not supported")}case"Polygon":switch(c){case"Point":return Ur(a,s,{ignoreBoundary:!0});case"LineString":return p1(s,a);case"Polygon":return d1(s,a);case"MultiPoint":return c1(s,a);default:throw new Error("feature2 "+c+" geometry not supported")}default:throw new Error("feature1 "+l+" geometry not supported")}}function u1(r,n){var s,a=!1;for(s=0;s<r.coordinates.length;s++)if(Ac(r.coordinates[s],n.coordinates)){a=!0;break}return a}function l1(r,n){for(var s=0,a=n.coordinates;s<a.length;s++){for(var l=a[s],c=!1,g=0,m=r.coordinates;g<m.length;g++){var v=m[g];if(Ac(l,v)){c=!0;break}}if(!c)return!1}return!0}function h1(r,n){for(var s=!1,a=0,l=n.coordinates;a<l.length;a++){var c=l[a];if(xo(c,r,{ignoreEndVertices:!0})&&(s=!0),!xo(c,r))return!1}return!!s}function c1(r,n){for(var s=0,a=n.coordinates;s<a.length;s++){var l=a[s];if(!Ur(l,r,{ignoreBoundary:!0}))return!1}return!0}function f1(r,n){for(var s=!1,a=0,l=n.coordinates;a<l.length;a++){var c=l[a];if(xo({type:"Point",coordinates:c},r,{ignoreEndVertices:!0})&&(s=!0),!xo({type:"Point",coordinates:c},r,{ignoreEndVertices:!1}))return!1}return s}function p1(r,n){var s=!1,a=0,l=ni(r),c=ni(n);if(!Cg(l,c))return!1;for(a;a<n.coordinates.length-1;a++){var g=g1(n.coordinates[a],n.coordinates[a+1]);if(Ur({type:"Point",coordinates:g},r,{ignoreBoundary:!0})){s=!0;break}}return s}function d1(r,n){if(r.type==="Feature"&&r.geometry===null||n.type==="Feature"&&n.geometry===null)return!1;var s=ni(r),a=ni(n);if(!Cg(s,a))return!1;for(var l=qr(n).coordinates,c=0,g=l;c<g.length;c++)for(var m=g[c],v=0,x=m;v<x.length;v++){var P=x[v];if(!Ur(P,r))return!1}return!0}function Cg(r,n){return!(r[0]>n[0]||r[2]<n[2]||r[1]>n[1]||r[3]<n[3])}function Ac(r,n){return r[0]===n[0]&&r[1]===n[1]}function g1(r,n){return[(r[0]+n[0])/2,(r[1]+n[1])/2]}var Ig=On(Dc(),1);function Cs(r,n){var s=qr(r),a=qr(n),l=s.type,c=a.type;if(l==="MultiPoint"&&c!=="MultiPoint"||(l==="LineString"||l==="MultiLineString")&&c!=="LineString"&&c!=="MultiLineString"||(l==="Polygon"||l==="MultiPolygon")&&c!=="Polygon"&&c!=="MultiPolygon")throw new Error("features must be of the same type");if(l==="Point")throw new Error("Point geometry not supported");var g=new Ig.default({precision:6});if(g.compare(r,n))return!1;var m=0;switch(l){case"MultiPoint":for(var v=0;v<s.coordinates.length;v++)for(var x=0;x<a.coordinates.length;x++){var P=s.coordinates[v],T=a.coordinates[x];if(P[0]===T[0]&&P[1]===T[1])return!0}return!1;case"LineString":case"MultiLineString":Bs(r,function(N){Bs(n,function(G){bc(N,G).features.length&&m++})});break;case"Polygon":case"MultiPolygon":Bs(r,function(N){Bs(n,function(G){Gs(N,G).features.length&&m++})});break}return m>0}var y1=On(Dc(),1);var x1=On(Dg(),1);var C1=On(Zg(),1);function Vg(r){for(var n=r,s=[];n.parent;)s.unshift(n),n=n.parent;return s}function k1(){return new Wg(function(r){return r.f})}var Gc={search:function(r,n,s,a){r.cleanDirty(),a=a||{};var l=a.heuristic||Gc.heuristics.manhattan,c=a.closest||!1,g=k1(),m=n;for(n.h=l(n,s),g.push(n);g.size()>0;){var v=g.pop();if(v===s)return Vg(v);v.closed=!0;for(var x=r.neighbors(v),P=0,T=x.length;P<T;++P){var N=x[P];if(!(N.closed||N.isWall())){var G=v.g+N.getCost(v),z=N.visited;(!z||G<N.g)&&(N.visited=!0,N.parent=v,N.h=N.h||l(N,s),N.g=G,N.f=N.g+N.h,r.markDirty(N),c&&(N.h<m.h||N.h===m.h&&N.g<m.g)&&(m=N),z?g.rescoreElement(N):g.push(N))}}}return c?Vg(m):[]},heuristics:{manhattan:function(r,n){var s=Math.abs(n.x-r.x),a=Math.abs(n.y-r.y);return s+a},diagonal:function(r,n){var s=1,a=Math.sqrt(2),l=Math.abs(n.x-r.x),c=Math.abs(n.y-r.y);return s*(l+c)+(a-2*s)*Math.min(l,c)}},cleanNode:function(r){r.f=0,r.g=0,r.h=0,r.visited=!1,r.closed=!1,r.parent=null}};function yu(r,n){n=n||{},this.nodes=[],this.diagonal=!!n.diagonal,this.grid=[];for(var s=0;s<r.length;s++){this.grid[s]=[];for(var a=0,l=r[s];a<l.length;a++){var c=new Sl(s,a,l[a]);this.grid[s][a]=c,this.nodes.push(c)}}this.init()}yu.prototype.init=function(){this.dirtyNodes=[];for(var r=0;r<this.nodes.length;r++)Gc.cleanNode(this.nodes[r])};yu.prototype.cleanDirty=function(){for(var r=0;r<this.dirtyNodes.length;r++)Gc.cleanNode(this.dirtyNodes[r]);this.dirtyNodes=[]};yu.prototype.markDirty=function(r){this.dirtyNodes.push(r)};yu.prototype.neighbors=function(r){var n=[],s=r.x,a=r.y,l=this.grid;return l[s-1]&&l[s-1][a]&&n.push(l[s-1][a]),l[s+1]&&l[s+1][a]&&n.push(l[s+1][a]),l[s]&&l[s][a-1]&&n.push(l[s][a-1]),l[s]&&l[s][a+1]&&n.push(l[s][a+1]),this.diagonal&&(l[s-1]&&l[s-1][a-1]&&n.push(l[s-1][a-1]),l[s+1]&&l[s+1][a-1]&&n.push(l[s+1][a-1]),l[s-1]&&l[s-1][a+1]&&n.push(l[s-1][a+1]),l[s+1]&&l[s+1][a+1]&&n.push(l[s+1][a+1])),n};yu.prototype.toString=function(){for(var r=[],n=this.grid,s,a,l,c,g=0,m=n.length;g<m;g++){for(s=[],a=n[g],l=0,c=a.length;l<c;l++)s.push(a[l].weight);r.push(s.join(" "))}return r.join(`
`)};function Sl(r,n,s){this.x=r,this.y=n,this.weight=s}Sl.prototype.toString=function(){return"["+this.x+" "+this.y+"]"};Sl.prototype.getCost=function(r){return r&&r.x!==this.x&&r.y!==this.y?this.weight*1.41421:this.weight};Sl.prototype.isWall=function(){return this.weight===0};function Wg(r){this.content=[],this.scoreFunction=r}Wg.prototype={push:function(r){this.content.push(r),this.sinkDown(this.content.length-1)},pop:function(){var r=this.content[0],n=this.content.pop();return this.content.length>0&&(this.content[0]=n,this.bubbleUp(0)),r},remove:function(r){var n=this.content.indexOf(r),s=this.content.pop();n!==this.content.length-1&&(this.content[n]=s,this.scoreFunction(s)<this.scoreFunction(r)?this.sinkDown(n):this.bubbleUp(n))},size:function(){return this.content.length},rescoreElement:function(r){this.sinkDown(this.content.indexOf(r))},sinkDown:function(r){for(var n=this.content[r];r>0;){var s=(r+1>>1)-1,a=this.content[s];if(this.scoreFunction(n)<this.scoreFunction(a))this.content[s]=n,this.content[r]=a,r=s;else break}},bubbleUp:function(r){for(var n=this.content.length,s=this.content[r],a=this.scoreFunction(s);;){var l=r+1<<1,c=l-1,g=null,m;if(c<n){var v=this.content[c];m=this.scoreFunction(v),m<a&&(g=c)}if(l<n){var x=this.content[l],P=this.scoreFunction(x);P<(g===null?a:m)&&(g=l)}if(g!==null)this.content[r]=this.content[g],this.content[g]=s,r=g;else break}}};function qc(){this._=null}function Na(r){r.U=r.C=r.L=r.R=r.P=r.N=null}qc.prototype={constructor:qc,insert:function(r,n){var s,a,l;if(r){if(n.P=r,n.N=r.N,r.N&&(r.N.P=n),r.N=n,r.R){for(r=r.R;r.L;)r=r.L;r.L=n}else r.R=n;s=r}else this._?(r=Kg(this._),n.P=null,n.N=r,r.P=r.L=n,s=r):(n.P=n.N=null,this._=n,s=null);for(n.L=n.R=null,n.U=s,n.C=!0,r=n;s&&s.C;)a=s.U,s===a.L?(l=a.R,l&&l.C?(s.C=l.C=!1,a.C=!0,r=a):(r===s.R&&(vu(this,s),r=s,s=r.U),s.C=!1,a.C=!0,xu(this,a))):(l=a.L,l&&l.C?(s.C=l.C=!1,a.C=!0,r=a):(r===s.L&&(xu(this,s),r=s,s=r.U),s.C=!1,a.C=!0,vu(this,a))),s=r.U;this._.C=!1},remove:function(r){r.N&&(r.N.P=r.P),r.P&&(r.P.N=r.N),r.N=r.P=null;var n=r.U,s,a=r.L,l=r.R,c,g;if(a?l?c=Kg(l):c=a:c=l,n?n.L===r?n.L=c:n.R=c:this._=c,a&&l?(g=c.C,c.C=r.C,c.L=a,a.U=c,c!==l?(n=c.U,c.U=r.U,r=c.R,n.L=r,c.R=l,l.U=c):(c.U=n,n=c,r=c.R)):(g=r.C,r=c),r&&(r.U=n),!g){if(r&&r.C){r.C=!1;return}do{if(r===this._)break;if(r===n.L){if(s=n.R,s.C&&(s.C=!1,n.C=!0,vu(this,n),s=n.R),s.L&&s.L.C||s.R&&s.R.C){(!s.R||!s.R.C)&&(s.L.C=!1,s.C=!0,xu(this,s),s=n.R),s.C=n.C,n.C=s.R.C=!1,vu(this,n),r=this._;break}}else if(s=n.L,s.C&&(s.C=!1,n.C=!0,xu(this,n),s=n.L),s.L&&s.L.C||s.R&&s.R.C){(!s.L||!s.L.C)&&(s.R.C=!1,s.C=!0,vu(this,s),s=n.L),s.C=n.C,n.C=s.L.C=!1,xu(this,n),r=this._;break}s.C=!0,r=n,n=n.U}while(!r.C);r&&(r.C=!1)}}};function vu(r,n){var s=n,a=n.R,l=s.U;l?l.L===s?l.L=a:l.R=a:r._=a,a.U=l,s.U=a,s.R=a.L,s.R&&(s.R.U=s),a.L=s}function xu(r,n){var s=n,a=n.L,l=s.U;l?l.L===s?l.L=a:l.R=a:r._=a,a.U=l,s.U=a,s.L=a.R,s.L&&(s.L.U=s),a.R=s}function Kg(r){for(;r.L;)r=r.L;return r}var Uc=qc;function Ra(r,n,s,a){var l=[null,null],c=Li.push(l)-1;return l.left=r,l.right=n,s&&wu(l,r,n,s),a&&wu(l,n,r,a),$i[r.index].halfedges.push(c),$i[n.index].halfedges.push(c),l}function Aa(r,n,s){var a=[n,s];return a.left=r,a}function wu(r,n,s,a){!r[0]&&!r[1]?(r[0]=a,r.left=n,r.right=s):r.left===s?r[1]=a:r[0]=a}function T1(r,n,s,a,l){var c=r[0],g=r[1],m=c[0],v=c[1],x=g[0],P=g[1],T=0,N=1,G=x-m,z=P-v,j;if(j=n-m,!(!G&&j>0)){if(j/=G,G<0){if(j<T)return;j<N&&(N=j)}else if(G>0){if(j>N)return;j>T&&(T=j)}if(j=a-m,!(!G&&j<0)){if(j/=G,G<0){if(j>N)return;j>T&&(T=j)}else if(G>0){if(j<T)return;j<N&&(N=j)}if(j=s-v,!(!z&&j>0)){if(j/=z,z<0){if(j<T)return;j<N&&(N=j)}else if(z>0){if(j>N)return;j>T&&(T=j)}if(j=l-v,!(!z&&j<0)){if(j/=z,z<0){if(j>N)return;j>T&&(T=j)}else if(z>0){if(j<T)return;j<N&&(N=j)}return!(T>0)&&!(N<1)||(T>0&&(r[0]=[m+T*G,v+T*z]),N<1&&(r[1]=[m+N*G,v+N*z])),!0}}}}}function I1(r,n,s,a,l){var c=r[1];if(c)return!0;var g=r[0],m=r.left,v=r.right,x=m[0],P=m[1],T=v[0],N=v[1],G=(x+T)/2,z=(P+N)/2,j,R;if(N===P){if(G<n||G>=a)return;if(x>T){if(!g)g=[G,s];else if(g[1]>=l)return;c=[G,l]}else{if(!g)g=[G,l];else if(g[1]<s)return;c=[G,s]}}else if(j=(x-T)/(N-P),R=z-j*G,j<-1||j>1)if(x>T){if(!g)g=[(s-R)/j,s];else if(g[1]>=l)return;c=[(l-R)/j,l]}else{if(!g)g=[(l-R)/j,l];else if(g[1]<s)return;c=[(s-R)/j,s]}else if(P<N){if(!g)g=[n,j*n+R];else if(g[0]>=a)return;c=[a,j*a+R]}else{if(!g)g=[a,j*a+R];else if(g[0]<n)return;c=[n,j*n+R]}return r[0]=g,r[1]=c,!0}function Jg(r,n,s,a){for(var l=Li.length,c;l--;)(!I1(c=Li[l],r,n,s,a)||!T1(c,r,n,s,a)||!(Math.abs(c[0][0]-c[1][0])>Jn||Math.abs(c[0][1]-c[1][1])>Jn))&&delete Li[l]}function $g(r){return $i[r.index]={site:r,halfedges:[]}}function O1(r,n){var s=r.site,a=n.left,l=n.right;return s===l&&(l=a,a=s),l?Math.atan2(l[1]-a[1],l[0]-a[0]):(s===a?(a=n[1],l=n[0]):(a=n[0],l=n[1]),Math.atan2(a[0]-l[0],l[1]-a[1]))}function jc(r,n){return n[+(n.left!==r.site)]}function N1(r,n){return n[+(n.left===r.site)]}function Qg(){for(var r=0,n=$i.length,s,a,l,c;r<n;++r)if((s=$i[r])&&(c=(a=s.halfedges).length)){var g=new Array(c),m=new Array(c);for(l=0;l<c;++l)g[l]=l,m[l]=O1(s,Li[a[l]]);for(g.sort(function(v,x){return m[x]-m[v]}),l=0;l<c;++l)m[l]=a[g[l]];for(l=0;l<c;++l)a[l]=m[l]}}function tm(r,n,s,a){var l=$i.length,c,g,m,v,x,P,T,N,G,z,j,R,B=!0;for(c=0;c<l;++c)if(g=$i[c]){for(m=g.site,x=g.halfedges,v=x.length;v--;)Li[x[v]]||x.splice(v,1);for(v=0,P=x.length;v<P;)z=N1(g,Li[x[v]]),j=z[0],R=z[1],T=jc(g,Li[x[++v%P]]),N=T[0],G=T[1],(Math.abs(j-N)>Jn||Math.abs(R-G)>Jn)&&(x.splice(v,0,Li.push(Aa(m,z,Math.abs(j-r)<Jn&&a-R>Jn?[r,Math.abs(N-r)<Jn?G:a]:Math.abs(R-a)<Jn&&s-j>Jn?[Math.abs(G-a)<Jn?N:s,a]:Math.abs(j-s)<Jn&&R-n>Jn?[s,Math.abs(N-s)<Jn?G:n]:Math.abs(R-n)<Jn&&j-r>Jn?[Math.abs(G-n)<Jn?N:r,n]:null))-1),++P);P&&(B=!1)}if(B){var D,A,q,H=1/0;for(c=0,B=null;c<l;++c)(g=$i[c])&&(m=g.site,D=m[0]-r,A=m[1]-n,q=D*D+A*A,q<H&&(H=q,B=g));if(B){var K=[r,n],et=[r,a],X=[s,a],lt=[s,n];B.halfedges.push(Li.push(Aa(m=B.site,K,et))-1,Li.push(Aa(m,et,X))-1,Li.push(Aa(m,X,lt))-1,Li.push(Aa(m,lt,K))-1)}}for(c=0;c<l;++c)(g=$i[c])&&(g.halfedges.length||delete $i[c])}var em=[],kl;function R1(){Na(this),this.x=this.y=this.arc=this.site=this.cy=null}function ea(r){var n=r.P,s=r.N;if(!(!n||!s)){var a=n.site,l=r.site,c=s.site;if(a!==c){var g=l[0],m=l[1],v=a[0]-g,x=a[1]-m,P=c[0]-g,T=c[1]-m,N=2*(v*T-x*P);if(!(N>=-nm)){var G=v*v+x*x,z=P*P+T*T,j=(T*G-x*z)/N,R=(v*z-P*G)/N,B=em.pop()||new R1;B.arc=r,B.site=l,B.x=j+g,B.y=(B.cy=R+m)+Math.sqrt(j*j+R*R),r.circle=B;for(var D=null,A=Da._;A;)if(B.y<A.y||B.y===A.y&&B.x<=A.x)if(A.L)A=A.L;else{D=A.P;break}else if(A.R)A=A.R;else{D=A;break}Da.insert(D,B),D||(kl=B)}}}}function na(r){var n=r.circle;n&&(n.P||(kl=n.N),Da.remove(n),em.push(n),Na(n),r.circle=null)}var im=[];function A1(){Na(this),this.edge=this.site=this.circle=null}function rm(r){var n=im.pop()||new A1;return n.site=r,n}function Hc(r){na(r),ra.remove(r),im.push(r),Na(r)}function om(r){var n=r.circle,s=n.x,a=n.cy,l=[s,a],c=r.P,g=r.N,m=[r];Hc(r);for(var v=c;v.circle&&Math.abs(s-v.circle.x)<Jn&&Math.abs(a-v.circle.cy)<Jn;)c=v.P,m.unshift(v),Hc(v),v=c;m.unshift(v),na(v);for(var x=g;x.circle&&Math.abs(s-x.circle.x)<Jn&&Math.abs(a-x.circle.cy)<Jn;)g=x.N,m.push(x),Hc(x),x=g;m.push(x),na(x);var P=m.length,T;for(T=1;T<P;++T)x=m[T],v=m[T-1],wu(x.edge,v.site,x.site,l);v=m[0],x=m[P-1],x.edge=Ra(v.site,x.site,null,l),ea(v),ea(x)}function sm(r){for(var n=r[0],s=r[1],a,l,c,g,m=ra._;m;)if(c=am(m,s)-n,c>Jn)m=m.L;else if(g=n-D1(m,s),g>Jn){if(!m.R){a=m;break}m=m.R}else{c>-Jn?(a=m.P,l=m):g>-Jn?(a=m,l=m.N):a=l=m;break}$g(r);var v=rm(r);if(ra.insert(a,v),!(!a&&!l)){if(a===l){na(a),l=rm(a.site),ra.insert(v,l),v.edge=l.edge=Ra(a.site,v.site),ea(a),ea(l);return}if(!l){v.edge=Ra(a.site,v.site);return}na(a),na(l);var x=a.site,P=x[0],T=x[1],N=r[0]-P,G=r[1]-T,z=l.site,j=z[0]-P,R=z[1]-T,B=2*(N*R-G*j),D=N*N+G*G,A=j*j+R*R,q=[(R*D-G*A)/B+P,(N*A-j*D)/B+T];wu(l.edge,x,z,q),v.edge=Ra(x,r,null,q),l.edge=Ra(r,z,null,q),ea(a),ea(l)}}function am(r,n){var s=r.site,a=s[0],l=s[1],c=l-n;if(!c)return a;var g=r.P;if(!g)return-1/0;s=g.site;var m=s[0],v=s[1],x=v-n;if(!x)return m;var P=m-a,T=1/c-1/x,N=P/x;return T?(-N+Math.sqrt(N*N-2*T*(P*P/(-2*x)-v+x/2+l-c/2)))/T+a:(a+m)/2}function D1(r,n){var s=r.N;if(s)return am(s,n);var a=r.site;return a[1]===n?a[0]:1/0}var Jn=1e-6,nm=1e-12,ra,$i,Da,Li;function B1(r,n,s){return(r[0]-s[0])*(n[1]-r[1])-(r[0]-n[0])*(s[1]-r[1])}function F1(r,n){return n[1]-r[1]||n[0]-r[0]}function Tl(r,n){var s=r.sort(F1).pop(),a,l,c;for(Li=[],$i=new Array(r.length),ra=new Uc,Da=new Uc;;)if(c=kl,s&&(!c||s[1]<c.y||s[1]===c.y&&s[0]<c.x))(s[0]!==a||s[1]!==l)&&(sm(s),a=s[0],l=s[1]),s=r.pop();else if(c)om(c.arc);else break;if(Qg(),n){var g=+n[0][0],m=+n[0][1],v=+n[1][0],x=+n[1][1];Jg(g,m,v,x),tm(g,m,v,x)}this.edges=Li,this.cells=$i,ra=Da=Li=$i=null}Tl.prototype={constructor:Tl,polygons:function(){var r=this.edges;return this.cells.map(function(n){var s=n.halfedges.map(function(a){return jc(n,r[a])});return s.data=n.site.data,s})},triangles:function(){var r=[],n=this.edges;return this.cells.forEach(function(s,a){if(m=(c=s.halfedges).length)for(var l=s.site,c,g=-1,m,v,x=n[c[m-1]],P=x.left===l?x.right:x.left;++g<m;)v=P,x=n[c[g]],P=x.left===l?x.right:x.left,v&&P&&a<v.index&&a<P.index&&B1(l,v,P)<0&&r.push([l.data,v.data,P.data])}),r},links:function(){return this.edges.filter(function(r){return r.right}).map(function(r){return{source:r.left.data,target:r.right.data}})},find:function(r,n,s){for(var a=this,l,c=a._found||0,g=a.cells.length,m;!(m=a.cells[c]);)if(++c>=g)return null;var v=r-m.site[0],x=n-m.site[1],P=v*v+x*x;do m=a.cells[l=c],c=null,m.halfedges.forEach(function(T){var N=a.edges[T],G=N.left;if(!((G===m.site||!G)&&!(G=N.right))){var z=r-G[0],j=n-G[1],R=z*z+j*j;R<P&&(P=R,c=G.index)}});while(c!==null);return a._found=l,s==null||P<=s*s?m.site:null}};var Z1=On(Ba(),1);var Ua=On(cm(),1);function lo(){return new Nl}function Nl(){this.reset()}Nl.prototype={constructor:Nl,reset:function(){this.s=this.t=0},add:function(r){fm(Ol,r,this.t),fm(this,Ol.s,this.s),this.s?this.t+=Ol.t:this.s=Ol.t},valueOf:function(){return this.s}};var Ol=new Nl;function fm(r,n,s){var a=r.s=n+s,l=a-n,c=a-l;r.t=n-c+(s-l)}var Ee=1e-6;var ln=Math.PI,di=ln/2,Rl=ln/4,Ai=ln*2,Qi=180/ln,Tr=ln/180,Fn=Math.abs,Vo=Math.atan,bi=Math.atan2,ye=Math.cos;var Al=Math.exp;var Lu=Math.log;var ve=Math.sin;var ri=Math.sqrt,bu=Math.tan;function Dl(r){return r>1?0:r<-1?ln:Math.acos(r)}function gi(r){return r>1?di:r<-1?-di:Math.asin(r)}function to(){}function Bl(r,n){r&&dm.hasOwnProperty(r.type)&&dm[r.type](r,n)}var pm={Feature:function(r,n){Bl(r.geometry,n)},FeatureCollection:function(r,n){for(var s=r.features,a=-1,l=s.length;++a<l;)Bl(s[a].geometry,n)}},dm={Sphere:function(r,n){n.sphere()},Point:function(r,n){r=r.coordinates,n.point(r[0],r[1],r[2])},MultiPoint:function(r,n){for(var s=r.coordinates,a=-1,l=s.length;++a<l;)r=s[a],n.point(r[0],r[1],r[2])},LineString:function(r,n){Yc(r.coordinates,n,0)},MultiLineString:function(r,n){for(var s=r.coordinates,a=-1,l=s.length;++a<l;)Yc(s[a],n,0)},Polygon:function(r,n){gm(r.coordinates,n)},MultiPolygon:function(r,n){for(var s=r.coordinates,a=-1,l=s.length;++a<l;)gm(s[a],n)},GeometryCollection:function(r,n){for(var s=r.geometries,a=-1,l=s.length;++a<l;)Bl(s[a],n)}};function Yc(r,n,s){var a=-1,l=r.length-s,c;for(n.lineStart();++a<l;)c=r[a],n.point(c[0],c[1],c[2]);n.lineEnd()}function gm(r,n){var s=-1,a=r.length;for(n.polygonStart();++s<a;)Yc(r[s],n,1);n.polygonEnd()}function Hs(r,n){r&&pm.hasOwnProperty(r.type)?pm[r.type](r,n):Bl(r,n)}var Y1=lo(),HO=lo();function Fa(r){return[bi(r[1],r[0]),gi(r[2])]}function Wo(r){var n=r[0],s=r[1],a=ye(s);return[a*ye(n),a*ve(n),ve(s)]}function Eu(r,n){return r[0]*n[0]+r[1]*n[1]+r[2]*n[2]}function ia(r,n){return[r[1]*n[2]-r[2]*n[1],r[2]*n[0]-r[0]*n[2],r[0]*n[1]-r[1]*n[0]]}function Fl(r,n){r[0]+=n[0],r[1]+=n[1],r[2]+=n[2]}function Mu(r,n){return[r[0]*n,r[1]*n,r[2]*n]}function za(r){var n=ri(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);r[0]/=n,r[1]/=n,r[2]/=n}var tN=lo();function zl(r,n){function s(a,l){return a=r(a,l),n(a[0],a[1])}return r.invert&&n.invert&&(s.invert=function(a,l){return a=n.invert(a,l),a&&r.invert(a[0],a[1])}),s}function Vc(r,n){return[r>ln?r-Ai:r<-ln?r+Ai:r,n]}Vc.invert=Vc;function Wc(r,n,s){return(r%=Ai)?n||s?zl(_m(r),ym(n,s)):_m(r):n||s?ym(n,s):Vc}function mm(r){return function(n,s){return n+=r,[n>ln?n-Ai:n<-ln?n+Ai:n,s]}}function _m(r){var n=mm(r);return n.invert=mm(-r),n}function ym(r,n){var s=ye(r),a=ve(r),l=ye(n),c=ve(n);function g(m,v){var x=ye(v),P=ye(m)*x,T=ve(m)*x,N=ve(v),G=N*s+P*a;return[bi(T*l-G*c,P*s-N*a),gi(G*l+T*c)]}return g.invert=function(m,v){var x=ye(v),P=ye(m)*x,T=ve(m)*x,N=ve(v),G=N*l-T*c;return[bi(T*l+N*c,P*s+G*a),gi(G*s-P*a)]},g}function xm(r,n,s,a,l,c){if(s){var g=ye(n),m=ve(n),v=a*s;l==null?(l=n+a*Ai,c=n-v/2):(l=vm(g,l),c=vm(g,c),(a>0?l<c:l>c)&&(l+=a*Ai));for(var x,P=l;a>0?P>c:P<c;P-=v)x=Fa([g,-m*ye(P),-m*ve(P)]),r.point(x[0],x[1])}}function vm(r,n){n=Wo(n),n[0]-=r,za(n);var s=Dl(-n[1]);return((-n[2]<0?-s:s)+Ai-Ee)%Ai}function Gl(){var r=[],n;return{point:function(s,a){n.push([s,a])},lineStart:function(){r.push(n=[])},lineEnd:to,rejoin:function(){r.length>1&&r.push(r.pop().concat(r.shift()))},result:function(){var s=r;return r=[],n=null,s}}}function wm(r,n,s,a,l,c){var g=r[0],m=r[1],v=n[0],x=n[1],P=0,T=1,N=v-g,G=x-m,z;if(z=s-g,!(!N&&z>0)){if(z/=N,N<0){if(z<P)return;z<T&&(T=z)}else if(N>0){if(z>T)return;z>P&&(P=z)}if(z=l-g,!(!N&&z<0)){if(z/=N,N<0){if(z>T)return;z>P&&(P=z)}else if(N>0){if(z<P)return;z<T&&(T=z)}if(z=a-m,!(!G&&z>0)){if(z/=G,G<0){if(z<P)return;z<T&&(T=z)}else if(G>0){if(z>T)return;z>P&&(P=z)}if(z=c-m,!(!G&&z<0)){if(z/=G,G<0){if(z>T)return;z>P&&(P=z)}else if(G>0){if(z<P)return;z<T&&(T=z)}return P>0&&(r[0]=g+P*N,r[1]=m+P*G),T<1&&(n[0]=g+T*N,n[1]=m+T*G),!0}}}}}function Ga(r,n){return Fn(r[0]-n[0])<Ee&&Fn(r[1]-n[1])<Ee}function ql(r,n,s,a){this.x=r,this.z=n,this.o=s,this.e=a,this.v=!1,this.n=this.p=null}function Ul(r,n,s,a,l){var c=[],g=[],m,v;if(r.forEach(function(z){if(!((j=z.length-1)<=0)){var j,R=z[0],B=z[j],D;if(Ga(R,B)){for(l.lineStart(),m=0;m<j;++m)l.point((R=z[m])[0],R[1]);l.lineEnd();return}c.push(D=new ql(R,z,null,!0)),g.push(D.o=new ql(R,null,D,!1)),c.push(D=new ql(B,z,null,!1)),g.push(D.o=new ql(B,null,D,!0))}}),!!c.length){for(g.sort(n),Lm(c),Lm(g),m=0,v=g.length;m<v;++m)g[m].e=s=!s;for(var x=c[0],P,T;;){for(var N=x,G=!0;N.v;)if((N=N.n)===x)return;P=N.z,l.lineStart();do{if(N.v=N.o.v=!0,N.e){if(G)for(m=0,v=P.length;m<v;++m)l.point((T=P[m])[0],T[1]);else a(N.x,N.n.x,1,l);N=N.n}else{if(G)for(P=N.p.z,m=P.length-1;m>=0;--m)l.point((T=P[m])[0],T[1]);else a(N.x,N.p.x,-1,l);N=N.p}N=N.o,P=N.z,G=!G}while(!N.v);l.lineEnd()}}}function Lm(r){if(n=r.length){for(var n,s=0,a=r[0],l;++s<n;)a.n=l=r[s],l.p=a,a=l;a.n=l=r[0],l.p=a}}function Xs(r,n){return r<n?-1:r>n?1:r>=n?0:NaN}function Kc(r){return r.length===1&&(r=V1(r)),{left:function(n,s,a,l){for(a==null&&(a=0),l==null&&(l=n.length);a<l;){var c=a+l>>>1;r(n[c],s)<0?a=c+1:l=c}return a},right:function(n,s,a,l){for(a==null&&(a=0),l==null&&(l=n.length);a<l;){var c=a+l>>>1;r(n[c],s)>0?l=c:a=c+1}return a}}}function V1(r){return function(n,s){return Xs(r(n),s)}}var bm=Kc(Xs),W1=bm.right,K1=bm.left;var Em=Array.prototype,$1=Em.slice,Q1=Em.map;var ZN=Math.sqrt(50),YN=Math.sqrt(10),VN=Math.sqrt(2);function Pu(r){for(var n=r.length,s,a=-1,l=0,c,g;++a<n;)l+=r[a].length;for(c=new Array(l);--n>=0;)for(g=r[n],s=g.length;--s>=0;)c[--l]=g[s];return c}var Cu=1e9,Hl=-Cu;function Jc(r,n,s,a){function l(x,P){return r<=x&&x<=s&&n<=P&&P<=a}function c(x,P,T,N){var G=0,z=0;if(x==null||(G=g(x,T))!==(z=g(P,T))||v(x,P)<0^T>0)do N.point(G===0||G===3?r:s,G>1?a:n);while((G=(G+T+4)%4)!==z);else N.point(P[0],P[1])}function g(x,P){return Fn(x[0]-r)<Ee?P>0?0:3:Fn(x[0]-s)<Ee?P>0?2:1:Fn(x[1]-n)<Ee?P>0?1:0:P>0?3:2}function m(x,P){return v(x.x,P.x)}function v(x,P){var T=g(x,1),N=g(P,1);return T!==N?T-N:T===0?P[1]-x[1]:T===1?x[0]-P[0]:T===2?x[1]-P[1]:P[0]-x[0]}return function(x){var P=x,T=Gl(),N,G,z,j,R,B,D,A,q,H,K,et={point:X,lineStart:Q,lineEnd:kt,polygonStart:gt,polygonEnd:Et};function X(bt,Mt){l(bt,Mt)&&P.point(bt,Mt)}function lt(){for(var bt=0,Mt=0,Xt=G.length;Mt<Xt;++Mt)for(var ft=G[Mt],Ct=1,st=ft.length,Rt=ft[0],Ot,Qt,Tt=Rt[0],ce=Rt[1];Ct<st;++Ct)Ot=Tt,Qt=ce,Rt=ft[Ct],Tt=Rt[0],ce=Rt[1],Qt<=a?ce>a&&(Tt-Ot)*(a-Qt)>(ce-Qt)*(r-Ot)&&++bt:ce<=a&&(Tt-Ot)*(a-Qt)<(ce-Qt)*(r-Ot)&&--bt;return bt}function gt(){P=T,N=[],G=[],K=!0}function Et(){var bt=lt(),Mt=K&&bt,Xt=(N=Pu(N)).length;(Mt||Xt)&&(x.polygonStart(),Mt&&(x.lineStart(),c(null,null,1,x),x.lineEnd()),Xt&&Ul(N,m,bt,c,x),x.polygonEnd()),P=x,N=G=z=null}function Q(){et.point=ct,G&&G.push(z=[]),H=!0,q=!1,D=A=NaN}function kt(){N&&(ct(j,R),B&&q&&T.rejoin(),N.push(T.result())),et.point=X,q&&P.lineEnd()}function ct(bt,Mt){var Xt=l(bt,Mt);if(G&&z.push([bt,Mt]),H)j=bt,R=Mt,B=Xt,H=!1,Xt&&(P.lineStart(),P.point(bt,Mt));else if(Xt&&q)P.point(bt,Mt);else{var ft=[D=Math.max(Hl,Math.min(Cu,D)),A=Math.max(Hl,Math.min(Cu,A))],Ct=[bt=Math.max(Hl,Math.min(Cu,bt)),Mt=Math.max(Hl,Math.min(Cu,Mt))];wm(ft,Ct,r,n,s,a)?(q||(P.lineStart(),P.point(ft[0],ft[1])),P.point(Ct[0],Ct[1]),Xt||P.lineEnd(),K=!1):Xt&&(P.lineStart(),P.point(bt,Mt),K=!1)}D=bt,A=Mt,q=Xt}return et}}var $c=lo();function Qc(r,n){var s=n[0],a=n[1],l=[ve(s),-ye(s),0],c=0,g=0;$c.reset();for(var m=0,v=r.length;m<v;++m)if(P=(x=r[m]).length)for(var x,P,T=x[P-1],N=T[0],G=T[1]/2+Rl,z=ve(G),j=ye(G),R=0;R<P;++R,N=D,z=q,j=H,T=B){var B=x[R],D=B[0],A=B[1]/2+Rl,q=ve(A),H=ye(A),K=D-N,et=K>=0?1:-1,X=et*K,lt=X>ln,gt=z*q;if($c.add(bi(gt*et*ve(X),j*H+gt*ye(X))),c+=lt?K+et*Ai:K,lt^N>=s^D>=s){var Et=ia(Wo(T),Wo(B));za(Et);var Q=ia(l,Et);za(Q);var kt=(lt^K>=0?-1:1)*gi(Q[2]);(a>kt||a===kt&&(Et[0]||Et[1]))&&(g+=lt^K>=0?1:-1)}}return(c<-Ee||c<Ee&&$c<-Ee)^g&1}var zA=lo();function Su(r){return r}var iD=lo(),oD=lo();var qa=1/0,Xl=qa,ku=-qa,Zl=ku,lx={point:hx,lineStart:to,lineEnd:to,polygonStart:to,polygonEnd:to,result:function(){var r=[[qa,Xl],[ku,Zl]];return ku=Zl=-(Xl=qa=1/0),r}};function hx(r,n){r<qa&&(qa=r),r>ku&&(ku=r),n<Xl&&(Xl=n),n>Zl&&(Zl=n)}var Yl=lx;function tf(r){this._context=r}tf.prototype={_radius:4.5,pointRadius:function(r){return this._radius=r,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(r,n){switch(this._point){case 0:{this._context.moveTo(r,n),this._point=1;break}case 1:{this._context.lineTo(r,n);break}default:{this._context.moveTo(r+this._radius,n),this._context.arc(r,n,this._radius,0,Ai);break}}},result:to};var _D=lo();function ef(){this._string=[]}ef.prototype={_radius:4.5,_circle:Cm(4.5),pointRadius:function(r){return(r=+r)!==this._radius&&(this._radius=r,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(r,n){switch(this._point){case 0:{this._string.push("M",r,",",n),this._point=1;break}case 1:{this._string.push("L",r,",",n);break}default:{this._circle==null&&(this._circle=Cm(this._radius)),this._string.push("M",r,",",n,this._circle);break}}},result:function(){if(this._string.length){var r=this._string.join("");return this._string=[],r}else return null}};function Cm(r){return"m0,"+r+"a"+r+","+r+" 0 1,1 0,"+-2*r+"a"+r+","+r+" 0 1,1 0,"+2*r+"z"}function Vl(r,n,s,a){return function(l,c){var g=n(c),m=l.invert(a[0],a[1]),v=Gl(),x=n(v),P=!1,T,N,G,z={point:j,lineStart:B,lineEnd:D,polygonStart:function(){z.point=A,z.lineStart=q,z.lineEnd=H,N=[],T=[]},polygonEnd:function(){z.point=j,z.lineStart=B,z.lineEnd=D,N=Pu(N);var K=Qc(T,m);N.length?(P||(c.polygonStart(),P=!0),Ul(N,fx,K,s,c)):K&&(P||(c.polygonStart(),P=!0),c.lineStart(),s(null,null,1,c),c.lineEnd()),P&&(c.polygonEnd(),P=!1),N=T=null},sphere:function(){c.polygonStart(),c.lineStart(),s(null,null,1,c),c.lineEnd(),c.polygonEnd()}};function j(K,et){var X=l(K,et);r(K=X[0],et=X[1])&&c.point(K,et)}function R(K,et){var X=l(K,et);g.point(X[0],X[1])}function B(){z.point=R,g.lineStart()}function D(){z.point=j,g.lineEnd()}function A(K,et){G.push([K,et]);var X=l(K,et);x.point(X[0],X[1])}function q(){x.lineStart(),G=[]}function H(){A(G[0][0],G[0][1]),x.lineEnd();var K=x.clean(),et=v.result(),X,lt=et.length,gt,Et,Q;if(G.pop(),T.push(G),G=null,!!lt){if(K&1){if(Et=et[0],(gt=Et.length-1)>0){for(P||(c.polygonStart(),P=!0),c.lineStart(),X=0;X<gt;++X)c.point((Q=Et[X])[0],Q[1]);c.lineEnd()}return}lt>1&&K&2&&et.push(et.pop().concat(et.shift())),N.push(et.filter(cx))}}return z}}function cx(r){return r.length>1}function fx(r,n){return((r=r.x)[0]<0?r[1]-di-Ee:di-r[1])-((n=n.x)[0]<0?n[1]-di-Ee:di-n[1])}var nf=Vl(function(){return!0},px,gx,[-ln,-di]);function px(r){var n=NaN,s=NaN,a=NaN,l;return{lineStart:function(){r.lineStart(),l=1},point:function(c,g){var m=c>0?ln:-ln,v=Fn(c-n);Fn(v-ln)<Ee?(r.point(n,s=(s+g)/2>0?di:-di),r.point(a,s),r.lineEnd(),r.lineStart(),r.point(m,s),r.point(c,s),l=0):a!==m&&v>=ln&&(Fn(n-a)<Ee&&(n-=a*Ee),Fn(c-m)<Ee&&(c-=m*Ee),s=dx(n,s,c,g),r.point(a,s),r.lineEnd(),r.lineStart(),r.point(m,s),l=0),r.point(n=c,s=g),a=m},lineEnd:function(){r.lineEnd(),n=s=NaN},clean:function(){return 2-l}}}function dx(r,n,s,a){var l,c,g=ve(r-s);return Fn(g)>Ee?Vo((ve(n)*(c=ye(a))*ve(s)-ve(a)*(l=ye(n))*ve(r))/(l*c*g)):(n+a)/2}function gx(r,n,s,a){var l;if(r==null)l=s*di,a.point(-ln,l),a.point(0,l),a.point(ln,l),a.point(ln,0),a.point(ln,-l),a.point(0,-l),a.point(-ln,-l),a.point(-ln,0),a.point(-ln,l);else if(Fn(r[0]-n[0])>Ee){var c=r[0]<n[0]?ln:-ln;l=s*c/2,a.point(-c,l),a.point(0,l),a.point(c,l)}else a.point(n[0],n[1])}function Sm(r,n){var s=ye(r),a=s>0,l=Fn(s)>Ee;function c(P,T,N,G){xm(G,r,n,N,P,T)}function g(P,T){return ye(P)*ye(T)>s}function m(P){var T,N,G,z,j;return{lineStart:function(){z=G=!1,j=1},point:function(R,B){var D=[R,B],A,q=g(R,B),H=a?q?0:x(R,B):q?x(R+(R<0?ln:-ln),B):0;if(!T&&(z=G=q)&&P.lineStart(),q!==G&&(A=v(T,D),(!A||Ga(T,A)||Ga(D,A))&&(D[0]+=Ee,D[1]+=Ee,q=g(D[0],D[1]))),q!==G)j=0,q?(P.lineStart(),A=v(D,T),P.point(A[0],A[1])):(A=v(T,D),P.point(A[0],A[1]),P.lineEnd()),T=A;else if(l&&T&&a^q){var K;!(H&N)&&(K=v(D,T,!0))&&(j=0,a?(P.lineStart(),P.point(K[0][0],K[0][1]),P.point(K[1][0],K[1][1]),P.lineEnd()):(P.point(K[1][0],K[1][1]),P.lineEnd(),P.lineStart(),P.point(K[0][0],K[0][1])))}q&&(!T||!Ga(T,D))&&P.point(D[0],D[1]),T=D,G=q,N=H},lineEnd:function(){G&&P.lineEnd(),T=null},clean:function(){return j|(z&&G)<<1}}}function v(P,T,N){var G=Wo(P),z=Wo(T),j=[1,0,0],R=ia(G,z),B=Eu(R,R),D=R[0],A=B-D*D;if(!A)return!N&&P;var q=s*B/A,H=-s*D/A,K=ia(j,R),et=Mu(j,q),X=Mu(R,H);Fl(et,X);var lt=K,gt=Eu(et,lt),Et=Eu(lt,lt),Q=gt*gt-Et*(Eu(et,et)-1);if(!(Q<0)){var kt=ri(Q),ct=Mu(lt,(-gt-kt)/Et);if(Fl(ct,et),ct=Fa(ct),!N)return ct;var bt=P[0],Mt=T[0],Xt=P[1],ft=T[1],Ct;Mt<bt&&(Ct=bt,bt=Mt,Mt=Ct);var st=Mt-bt,Rt=Fn(st-ln)<Ee,Ot=Rt||st<Ee;if(!Rt&&ft<Xt&&(Ct=Xt,Xt=ft,ft=Ct),Ot?Rt?Xt+ft>0^ct[1]<(Fn(ct[0]-bt)<Ee?Xt:ft):Xt<=ct[1]&&ct[1]<=ft:st>ln^(bt<=ct[0]&&ct[0]<=Mt)){var Qt=Mu(lt,(-gt+kt)/Et);return Fl(Qt,et),[ct,Fa(Qt)]}}}function x(P,T){var N=a?r:ln-r,G=0;return P<-N?G|=1:P>N&&(G|=2),T<-N?G|=4:T>N&&(G|=8),G}return Vl(g,m,c,a?[0,-r]:[-ln,r-ln])}function Tu(r){return function(n){var s=new rf;for(var a in r)s[a]=r[a];return s.stream=n,s}}function rf(){}rf.prototype={constructor:rf,point:function(r,n){this.stream.point(r,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Iu(r,n,s){var a=n[1][0]-n[0][0],l=n[1][1]-n[0][1],c=r.clipExtent&&r.clipExtent();r.scale(150).translate([0,0]),c!=null&&r.clipExtent(null),Hs(s,r.stream(Yl));var g=Yl.result(),m=Math.min(a/(g[1][0]-g[0][0]),l/(g[1][1]-g[0][1])),v=+n[0][0]+(a-m*(g[1][0]+g[0][0]))/2,x=+n[0][1]+(l-m*(g[1][1]+g[0][1]))/2;return c!=null&&r.clipExtent(c),r.scale(m*150).translate([v,x])}function Wl(r,n,s){return Iu(r,[[0,0],n],s)}var km=16,mx=ye(30*Tr);function of(r,n){return+n?yx(r,n):_x(r)}function _x(r){return Tu({point:function(n,s){n=r(n,s),this.stream.point(n[0],n[1])}})}function yx(r,n){function s(a,l,c,g,m,v,x,P,T,N,G,z,j,R){var B=x-a,D=P-l,A=B*B+D*D;if(A>4*n&&j--){var q=g+N,H=m+G,K=v+z,et=ri(q*q+H*H+K*K),X=gi(K/=et),lt=Fn(Fn(K)-1)<Ee||Fn(c-T)<Ee?(c+T)/2:bi(H,q),gt=r(lt,X),Et=gt[0],Q=gt[1],kt=Et-a,ct=Q-l,bt=D*kt-B*ct;(bt*bt/A>n||Fn((B*kt+D*ct)/A-.5)>.3||g*N+m*G+v*z<mx)&&(s(a,l,c,g,m,v,Et,Q,lt,q/=et,H/=et,K,j,R),R.point(Et,Q),s(Et,Q,lt,q,H,K,x,P,T,N,G,z,j,R))}}return function(a){var l,c,g,m,v,x,P,T,N,G,z,j,R={point:B,lineStart:D,lineEnd:q,polygonStart:function(){a.polygonStart(),R.lineStart=H},polygonEnd:function(){a.polygonEnd(),R.lineStart=D}};function B(X,lt){X=r(X,lt),a.point(X[0],X[1])}function D(){T=NaN,R.point=A,a.lineStart()}function A(X,lt){var gt=Wo([X,lt]),Et=r(X,lt);s(T,N,P,G,z,j,T=Et[0],N=Et[1],P=X,G=gt[0],z=gt[1],j=gt[2],km,a),a.point(T,N)}function q(){R.point=B,a.lineEnd()}function H(){D(),R.point=K,R.lineEnd=et}function K(X,lt){A(l=X,lt),c=T,g=N,m=G,v=z,x=j,R.point=A}function et(){s(T,N,P,G,z,j,c,g,l,m,v,x,km,a),R.lineEnd=q,q()}return R}}var vx=Tu({point:function(r,n){this.stream.point(r*Tr,n*Tr)}});function Ko(r){return sf(function(){return r})()}function sf(r){var n,s=150,a=480,l=250,c,g,m=0,v=0,x=0,P=0,T=0,N,G,z=null,j=nf,R=null,B,D,A,q=Su,H=.5,K=of(Et,H),et,X;function lt(ct){return ct=G(ct[0]*Tr,ct[1]*Tr),[ct[0]*s+c,g-ct[1]*s]}function gt(ct){return ct=G.invert((ct[0]-c)/s,(g-ct[1])/s),ct&&[ct[0]*Qi,ct[1]*Qi]}function Et(ct,bt){return ct=n(ct,bt),[ct[0]*s+c,g-ct[1]*s]}lt.stream=function(ct){return et&&X===ct?et:et=vx(j(N,K(q(X=ct))))},lt.clipAngle=function(ct){return arguments.length?(j=+ct?Sm(z=ct*Tr,6*Tr):(z=null,nf),kt()):z*Qi},lt.clipExtent=function(ct){return arguments.length?(q=ct==null?(R=B=D=A=null,Su):Jc(R=+ct[0][0],B=+ct[0][1],D=+ct[1][0],A=+ct[1][1]),kt()):R==null?null:[[R,B],[D,A]]},lt.scale=function(ct){return arguments.length?(s=+ct,Q()):s},lt.translate=function(ct){return arguments.length?(a=+ct[0],l=+ct[1],Q()):[a,l]},lt.center=function(ct){return arguments.length?(m=ct[0]%360*Tr,v=ct[1]%360*Tr,Q()):[m*Qi,v*Qi]},lt.rotate=function(ct){return arguments.length?(x=ct[0]%360*Tr,P=ct[1]%360*Tr,T=ct.length>2?ct[2]%360*Tr:0,Q()):[x*Qi,P*Qi,T*Qi]},lt.precision=function(ct){return arguments.length?(K=of(Et,H=ct*ct),kt()):ri(H)},lt.fitExtent=function(ct,bt){return Iu(lt,ct,bt)},lt.fitSize=function(ct,bt){return Wl(lt,ct,bt)};function Q(){G=zl(N=Wc(x,P,T),n);var ct=n(m,v);return c=a-ct[0]*s,g=l+ct[1]*s,kt()}function kt(){return et=X=null,lt}return function(){return n=r.apply(this,arguments),lt.invert=n.invert&&gt,Q()}}function Kl(r){return function(n,s){var a=ye(n),l=ye(s),c=r(a*l);return[c*l*ve(n),c*ve(s)]}}function ds(r){return function(n,s){var a=ri(n*n+s*s),l=r(a),c=ve(l),g=ye(l);return[bi(n*c,a*g),gi(a&&s*c/a)]}}var Nm=Kl(function(r){return ri(2/(1+r))});Nm.invert=ds(function(r){return 2*gi(r/2)});var af=Kl(function(r){return(r=Dl(r))&&r/ve(r)});af.invert=ds(function(r){return r});function uf(){return Ko(af).scale(79.4188).clipAngle(180-.001)}function lf(r,n){return[r,Lu(bu((di+n)/2))]}lf.invert=function(r,n){return[r,2*Vo(Al(n))-di]};function Jl(r,n){return[r,n]}Jl.invert=Jl;function Rm(r,n){var s=ye(n),a=ye(r)*s;return[s*ve(r)/a,ve(n)/a]}Rm.invert=ds(Vo);function Am(r,n){var s=n*n,a=s*s;return[r*(.8707-.131979*s+a*(-.013791+a*(.003971*s-.001529*a))),n*(1.007226+s*(.015085+a*(-.044475+.028874*s-.005916*a)))]}Am.invert=function(r,n){var s=n,a=25,l;do{var c=s*s,g=c*c;s-=l=(s*(1.007226+c*(.015085+g*(-.044475+.028874*c-.005916*g)))-n)/(1.007226+c*(.015085*3+g*(-.044475*7+.028874*9*c-.005916*11*g)))}while(Fn(l)>Ee&&--a>0);return[r/(.8707+(c=s*s)*(-.131979+c*(-.013791+c*c*c*(.003971-.001529*c)))),s]};function Dm(r,n){return[ye(n)*ve(r),ve(n)]}Dm.invert=ds(gi);function Bm(r,n){var s=ye(n),a=1+ye(r)*s;return[s*ve(r)/a,ve(n)/a]}Bm.invert=ds(function(r){return 2*Vo(r)});function Fm(r,n){return[Lu(bu((di+n)/2)),-r]}Fm.invert=function(r,n){return[-n,2*Vo(Al(r))-di]};function Lx(r,n,s){s=s||{};var a=s.units||"kilometers",l=s.steps||8;if(!r)throw new Error("geojson is required");if(typeof s!="object")throw new Error("options must be an object");if(typeof l!="number")throw new Error("steps must be an number");if(n===void 0)throw new Error("radius is required");if(l<=0)throw new Error("steps must be greater than 0");var c=[];switch(r.type){case"GeometryCollection":return Xo(r,function(g){var m=$l(g,n,a,l);m&&c.push(m)}),Ne(c);case"FeatureCollection":return Vn(r,function(g){var m=$l(g,n,a,l);m&&Vn(m,function(v){v&&c.push(v)})}),Ne(c)}return $l(r,n,a,l)}function $l(r,n,s,a){var l=r.properties||{},c=r.type==="Feature"?r.geometry:r;if(c.type==="GeometryCollection"){var g=[];return Xo(r,function(j){var R=$l(j,n,s,a);R&&g.push(R)}),Ne(g)}var m=bx(c),v={type:c.type,coordinates:Gm(c.coordinates,m)},x=new Ua.GeoJSONReader,P=x.read(v),T=$a(Qa(n,s),"meters"),N=Ua.BufferOp.bufferOp(P,T,a),G=new Ua.GeoJSONWriter;if(N=G.write(N),!zm(N.coordinates)){var z={type:N.type,coordinates:qm(N.coordinates,m)};return xi(z,l)}}function zm(r){return Array.isArray(r[0])?zm(r[0]):isNaN(r[0])}function Gm(r,n){return typeof r[0]!="object"?n(r):r.map(function(s){return Gm(s,n)})}function qm(r,n){return typeof r[0]!="object"?n.invert(r):r.map(function(s){return qm(s,n)})}function bx(r){var n=iu(r).geometry.coordinates,s=[-n[0],-n[1]];return uf().rotate(s).scale(fi)}var Ou=Lx;var Ex=On(Ba(),1);var Mx=On(Ba(),1);var Cx=On(Ba(),1);var Sx=On(Ba(),1);var oa=On(Ql()),df="#7ae9ff",gf={color:df,fillColor:df,fillOpacity:.3,weight:1},Bx={color:"#ffbb00",fillColor:"#ffbb00",fillOpacity:.75,weight:3},Fx={color:"#ff0000",fillColor:"#ff0000",fillOpacity:.95,weight:5},pf="#00FF40",ks=class{constructor(n,s){this._bufferWidth=5;this._sqmPerPerson=10;this._sqmPerVehicle=70;this.supressWarnings=!1;this.id=n.id,this._rules=s,this.revision=n.revision,this.timeStamp=n.timeStamp,this.isDeleted=n.isDeleted,this.deleteReason=n.deleteReason,this._originalGeoJson=n.geoJson;let a=JSON.parse(n.geoJson);this.layer=new th.GeoJSON(a,{pmIgnore:!1,interactive:!0,bubblingMouseEvents:!1,snapIgnore:!0,style:()=>this.GetDefaultLayerStyle()}),this.revisions={},this.name=oa.default.sanitize(a.properties.name),this.contactInfo=oa.default.sanitize(a.properties.contactInfo)??"",this.description=oa.default.sanitize(a.properties.description)??"",this.nrOfPeople=a.properties.nrOfPeople??"0",this.nrOfVehicles=a.properties.nrOfVechiles??"0",this.additionalSqm=a.properties.additionalSqm??"0",this.powerNeed=a.properties.powerNeed??void 0,Number.isNaN(Number(a.properties.powerNeed))?this.powerNeed=-1:this.powerNeed=Number(a.properties.powerNeed),Number.isNaN(Number(a.properties.amplifiedSound))?this.amplifiedSound=-1:this.amplifiedSound=Number(a.properties.amplifiedSound),this.color=a.properties.color??df,this.supressWarnings=a.properties.supressWarnings??!1,this.updateBufferedLayer()}get calculatedAreaNeeded(){try{let n=0;return this.nrOfPeople&&(n+=Number(this.nrOfPeople)*this._sqmPerPerson),this.nrOfVehicles&&(n+=Number(this.nrOfVehicles)*this._sqmPerVehicle),this.additionalSqm&&(n+=Number(this.additionalSqm)),n}catch{return NaN}}get calculatedFireExtinguisherNeeded(){try{return 1}catch{return NaN}}get severityOfRulesBroken(){return this._rules.reduce((n,s)=>Math.max(n,s.severity),0)}get area(){return Math.round(hs(this.calculateGeoJson()))}get geoJson(){return JSON.stringify(this.toGeoJSON())}calculateGeoJson(){let n=this.layer.toGeoJSON();return n.features&&n.features[0]&&(n=n.features[0]),n}GetDefaultLayerStyle(n=!1){let s=this.color;return n&&(s=pf),{color:s,fillColor:s,fillOpacity:.3,weight:1}}checkAllRules(){for(let n of this._rules)n.checkRule(this)}setLayerStyle(n="severity"){if(n=="severity"||n=="cleancolors")this.severityOfRulesBroken>=3?this.layer.setStyle(Fx):this.severityOfRulesBroken==2&&!this.supressWarnings?this.layer.setStyle(Bx):this.layer.setStyle(this.GetDefaultLayerStyle(n=="cleancolors"));else if(n=="power"){let s=pf;this.powerNeed?this.powerNeed>9e3?s="#FF0000":this.powerNeed>1e3&&(s="#FFA200"):s="#D1D1D1",this.layer.setStyle({color:s,fillColor:s,fillOpacity:.3,weight:1})}else if(n=="sound"){let s=pf;this.amplifiedSound?this.amplifiedSound>2e3?s="#FF0000":this.amplifiedSound>120&&(s="#FFA200"):s="#D1D1D1",this.layer.setStyle({color:s,fillColor:s,fillOpacity:.3,weight:1})}}getAllTriggeredRules(){return this._rules.filter(n=>n.triggered)}updateBufferedLayer(){let n=this.layer.toGeoJSON(),s=Ou(n,this._bufferWidth,{units:"meters"}),a=0;this.bufferLayer?(this.bufferLayer.clearLayers(),this.bufferLayer.addData(s)):this.bufferLayer=th.geoJSON(s,{style:{color:"red",fillOpacity:0,weight:a,dashArray:"5, 5"},interactive:!1})}toGeoJSON(){let n=this.calculateGeoJson();return n.properties=n.properties||{},n.properties.name=oa.default.sanitize(this.name).substring(0,100),n.properties.description=oa.default.sanitize(this.description).substring(0,1e3),n.properties.contactInfo=oa.default.sanitize(this.contactInfo),n.properties.nrOfPeople=this.nrOfPeople,n.properties.nrOfVechiles=this.nrOfVehicles,n.properties.additionalSqm=this.additionalSqm,n.properties.powerNeed=this.powerNeed,n.properties.amplifiedSound=this.amplifiedSound,n.properties.color=this.color,n.properties.supressWarnings=this.supressWarnings,n}hasChanges(){return this._originalGeoJson!=this.geoJson}};var jm=On(Ql()),ja="https://placement.freaks.se/api/v1/mapentities",Nu=class{constructor(n){this._latestRevisions={};this._entityConstraints=null;this._rulesGenerator=n,this.loaded=new Promise(s=>this._update().then(()=>s(!0)))}async _update(){let n=await fetch(ja),s=n.ok?await n.json():[];this._latestRevisions={};for(let a of s){if(this._entityConstraints){let{earliest:l,latest:c}=this._entityConstraints;if(a.timeStamp>c||a.timeStamp<l)continue}this._latestRevisions[a.id]=new ks(a,this._rulesGenerator())}}async reload(){let n=await fetch(ja),s=n.ok?await n.json():[],a=new Array,l={refreshedDeleted:new Array,refreshedAdded:new Array,refreshedUpdated:new Array};for(let c of s){if(this._entityConstraints){let{earliest:g,latest:m}=this._entityConstraints;if(c.timeStamp>m||c.timeStamp<g)continue}a[c.id]=new ks(c,this._rulesGenerator())}for(let c in this._latestRevisions){let g=parseInt(c);a[g]||l.refreshedDeleted.push(g)}for(let c in a){let g=parseInt(c),m=a[g];this._latestRevisions[g]?this._latestRevisions[g].revision<m.revision&&(this._latestRevisions[g]=m,l.refreshedUpdated.push(g)):(this._latestRevisions[g]=m,l.refreshedAdded.push(g))}return l}async constrain(n){this._entityConstraints=n,await this._update()}async entities(){return await this.loaded,Object.values(this._latestRevisions)}getEntityById(n){return this._latestRevisions[n]}getAllEntities(){return Object.values(this._latestRevisions)}isLatest(n){return n.revision==this._latestRevisions[n.id].revision}async createEntity(n){console.log("createEntity",n);let s=await fetch(ja,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({geoJson:JSON.stringify(n)})});if(s.ok){let a=await s.json();console.log("[API]","Saved initial entity",a);let l=new ks(a,this._rulesGenerator());return this._latestRevisions[l.id]=l,l}else{let a=await s.json();return console.warn("[API]","Failed to save entity",a),null}}async updateEntity(n){let s=await fetch(`${ja}/${n.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({geoJson:n.geoJson,id:n.id})});if(s.ok){let a=await s.json();console.log("[API]","Updated existing entity",a);let l=new ks(a,this._rulesGenerator());return this._latestRevisions[n.id]=l,l}else{let a=await s.json();return console.warn("[API]","Failed to update entity with id:",n.id,a),null}}async deleteEntity(n,s="No reason given"){let a=await fetch(`${ja}/${n.id}?reason=${jm.default.sanitize(s)}`,{method:"DELETE"});if(a.ok)console.log("[API]","Deleted entity with id:",n.id),delete this._latestRevisions[n.id];else{let l=await a.json();console.warn("[API]","Failed to delete entity with id:",n.id,l)}}async remove(n){delete this._latestRevisions[n.id]}async getRevisionsForEntity(n){let s=await fetch(`${ja}/${n.id}`),a=s.ok?await s.json():[];for(let l of a)n.revisions[l.revision]=new ks(l,this._rulesGenerator())}};var mf="THE MAP IS RESETTING TUESDAY 10.00 AM CET";var eh={kilometers:1,miles:.621371192237334,nauticalmiles:.5399568034557235,meters:1e3,metres:1e3,yards:1093.6132983377079,feet:3280.839895013123,inches:39370.078740157485},zx=6378.137,Hm=1/298.257223563,Xm=Hm*(2-Hm),Ru=Math.PI/180,Au=class r{static fromTile(n,s,a){let l=Math.PI*(1-2*(n+.5)/Math.pow(2,s)),c=Math.atan(.5*(Math.exp(l)-Math.exp(-l)))/Ru;return new r(c,a)}static get units(){return eh}constructor(n,s){if(n===void 0)throw new Error("No latitude given.");if(s&&!eh[s])throw new Error(`Unknown unit ${s}. Use one of: ${Object.keys(eh).join(", ")}`);let a=Ru*zx*(s?eh[s]:1),l=Math.cos(n*Ru),c=1/(1-Xm*(1-l*l)),g=Math.sqrt(c);this.kx=a*g*l,this.ky=a*g*c*(1-Xm)}distance(n,s){let a=No(n[0]-s[0])*this.kx,l=(n[1]-s[1])*this.ky;return Math.sqrt(a*a+l*l)}bearing(n,s){let a=No(s[0]-n[0])*this.kx,l=(s[1]-n[1])*this.ky;return Math.atan2(a,l)/Ru}destination(n,s,a){let l=a*Ru;return this.offset(n,Math.sin(l)*s,Math.cos(l)*s)}offset(n,s,a){return[n[0]+s/this.kx,n[1]+a/this.ky]}lineDistance(n){let s=0;for(let a=0;a<n.length-1;a++)s+=this.distance(n[a],n[a+1]);return s}area(n){let s=0;for(let a=0;a<n.length;a++){let l=n[a];for(let c=0,g=l.length,m=g-1;c<g;m=c++)s+=No(l[c][0]-l[m][0])*(l[c][1]+l[m][1])*(a?-1:1)}return Math.abs(s)/2*this.kx*this.ky}along(n,s){let a=0;if(s<=0)return n[0];for(let l=0;l<n.length-1;l++){let c=n[l],g=n[l+1],m=this.distance(c,g);if(a+=m,a>s)return _f(c,g,(s-(a-m))/m)}return n[n.length-1]}pointToSegmentDistance(n,s,a){let[l,c]=s,g=No(a[0]-l)*this.kx,m=(a[1]-c)*this.ky,v=0;return(g!==0||m!==0)&&(v=(No(n[0]-l)*this.kx*g+(n[1]-c)*this.ky*m)/(g*g+m*m),v>1?(l=a[0],c=a[1]):v>0&&(l+=g/this.kx*v,c+=m/this.ky*v)),g=No(n[0]-l)*this.kx,m=(n[1]-c)*this.ky,Math.sqrt(g*g+m*m)}pointOnLine(n,s){let a=1/0,l,c,g,m;for(let v=0;v<n.length-1;v++){let x=n[v][0],P=n[v][1],T=No(n[v+1][0]-x)*this.kx,N=(n[v+1][1]-P)*this.ky,G=0;(T!==0||N!==0)&&(G=(No(s[0]-x)*this.kx*T+(s[1]-P)*this.ky*N)/(T*T+N*N),G>1?(x=n[v+1][0],P=n[v+1][1]):G>0&&(x+=T/this.kx*G,P+=N/this.ky*G)),T=No(s[0]-x)*this.kx,N=(s[1]-P)*this.ky;let z=T*T+N*N;z<a&&(a=z,l=x,c=P,g=v,m=G)}return{point:[l,c],index:g,t:Math.max(0,Math.min(1,m))}}lineSlice(n,s,a){let l=this.pointOnLine(a,n),c=this.pointOnLine(a,s);if(l.index>c.index||l.index===c.index&&l.t>c.t){let x=l;l=c,c=x}let g=[l.point],m=l.index+1,v=c.index;!Zm(a[m],g[0])&&m<=v&&g.push(a[m]);for(let x=m+1;x<=v;x++)g.push(a[x]);return Zm(a[v],c.point)||g.push(c.point),g}lineSliceAlong(n,s,a){let l=0,c=[];for(let g=0;g<a.length-1;g++){let m=a[g],v=a[g+1],x=this.distance(m,v);if(l+=x,l>n&&c.length===0&&c.push(_f(m,v,(n-(l-x))/x)),l>=s)return c.push(_f(m,v,(s-(l-x))/x)),c;l>n&&c.push(v)}return c}bufferPoint(n,s){let a=s/this.ky,l=s/this.kx;return[n[0]-l,n[1]-a,n[0]+l,n[1]+a]}bufferBBox(n,s){let a=s/this.ky,l=s/this.kx;return[n[0]-l,n[1]-a,n[2]+l,n[3]+a]}insideBBox(n,s){return No(n[0]-s[0])>=0&&No(n[0]-s[2])<=0&&n[1]>=s[1]&&n[1]<=s[3]}};function Zm(r,n){return r[0]===n[0]&&r[1]===n[1]}function _f(r,n,s){let a=No(n[0]-r[0]),l=n[1]-r[1];return[r[0]+a*s,r[1]+l*s]}function No(r){for(;r<-180;)r+=360;for(;r>180;)r-=360;return r}var Vm=1250,Gx=8e3;var Wm=5,qx=Wm+1,Ux=new Au(57.5,"meters"),yf=class{constructor(){this.areaCache={};this.overlapCache={};this.coordsCache={}}coordsHaveChanged(n,s){let a=!1;if(!(n in this.coordsCache)||this.coordsCache[n].length==0||this.coordsCache[n].length!=s.length)a=!0;else for(let l=0;l<this.coordsCache[n].length;l++)if(!(this.coordsCache[n][l].lat==s[l].lat&&this.coordsCache[n][l].lng==s[l].lng)){a=!0;break}if(a){let l=[];for(let c=0;c<s.length;c++)l.push({lat:s[c].lat,lng:s[c].lng});return this.coordsCache[n]=l,!0}else return!1}areaIsCached(n){return n in this.areaCache}getAreaCache(n){return this.areaCache[n]}setAreaCache(n,s){this.areaCache[n]=s}overlapIsCached(n,s){return n in this.overlapCache&&s in this.overlapCache[n]}getOverlapCache(n,s){return this.overlapCache[n][s]}setOverlapCache(n,s,a){for(let l of[[n,s],[s,n]])l[0]in this.overlapCache||(this.overlapCache[l[0]]={}),this.overlapCache[l[0]][l[1]]=a}invalidateCache(n){if(n in this.overlapCache)for(let s in this.overlapCache[n])this.overlapCache[s]&&n in this.overlapCache[s]&&delete this.overlapCache[s][n];delete this.overlapCache[n],n in this.areaCache&&delete this.areaCache[n]}},Ts=new yf,gs=class{get severity(){return this._triggered?this._severity:0}get triggered(){return this._triggered}checkRule(n){let s=this._callback(n);this._triggered=s.triggered,s.shortMessage&&(this.shortMessage=s.shortMessage),s.message&&(this.message=s.message)}constructor(n,s,a,l){this._severity=n,this._triggered=!1,this._callback=l,this.shortMessage=s,this.message=a}};function Km(r,n){return()=>[Xx(),jx(),Hx(),Kx(r.soundguide,2,"Making too much noise?","Seems like you wanna play louder than your neighbors might expect? Check the sound guider layer!"),Zx(n,2,"Overlapping other area!","Your area is overlapping someone elses, plz fix <3"),sa(r.slope,1,"Slope warning!","Your area is in slopey or uneven terrain, make sure to check the slope map layer to make sure that you know what you are doing :)"),sa(r.fireroad,3,"Touching fireroad!","Plz move this area away from the fire road!"),Ym(r.propertyborder,3,"Outside border!","You have placed yourself outside our land, please fix that <3"),sa(r.hiddenforbidden,3,"Inside forbidden zone!","You are inside a zone that can not be used this year."),Wx(n,3,"Too large/close to others!","For fire safety, we need to add a bit of open space (5m2) between these camps (or if not next to any camps, this camp simply to big)"),Ym(r.area,2,"Outside placement areas.","You are outside the main placement area (yellow border). Make sure you know what you are doing."),sa(r.publicplease,1,"Close to fire road","You are adjucant to a fire road, please use this space for public offerings and not just for sleeping"),sa(r.minorroad,2,"Blocking a path","You are possibly blocking a path for walking around (the black dotted lines). Keep it clean if possible or plan accordingly!"),sa(r.closetosanctuary,1,"Close to the  sanctuary","This area is in the viscinity of the sanctuary, please be mindful of what energy your camp is releasing and how it may effect the santuarcy"),sa(r.redsoundzone,1,"In the western meadow","You're in the western meadow, please be extra careful of keeping the land in good condition and do not put your overnight camp here unless necessary, public dreams are prefered")]}var jx=()=>new gs(1,"Powerful.","You need a lot of power, make sure its not a typo.",r=>({triggered:r.powerNeed>Gx})),Hx=()=>new gs(2,"Missing info","Fill in name, description, contact info, power need and sound amplification please.",r=>({triggered:!r.name||!r.description||!r.contactInfo||r.powerNeed===-1||r.amplifiedSound===-1})),Xx=()=>new gs(3,"Too many ppl/vehicles!","Calculated area need is bigger than the maximum allowed area size! Make another area to fix this.",r=>({triggered:r.calculatedAreaNeeded>Vm}));var Zx=(r,n,s,a)=>new gs(n,s,a,l=>({triggered:Vx(l.layer,r)})),sa=(r,n,s,a)=>new gs(n,s,a,l=>{let c=l.toGeoJSON(),g=!1;return r.eachLayer(m=>{let v=m.toGeoJSON();if(v.features){for(let x=0;x<v.features.length;x++)if(Cs(c,v.features[x])||Yo(v.features[x],c)){g=!0;return}}else(Cs(c,v)||Yo(v,c))&&(g=!0)}),{triggered:g}});var Ym=(r,n,s,a)=>Yx(r,n,s,a,!1),Yx=(r,n,s,a,l)=>new gs(n,s,a,c=>{let g=r.getLayers();for(let m of g){let v=m.toGeoJSON();if(v.features){for(let x=0;x<v.features.length;x++)if(Yo(v.features[x],c.toGeoJSON()))return{triggered:l}}else if(Yo(v,c.toGeoJSON()))return{triggered:l}}return{triggered:!l}});function Vx(r,n){let s=r.toGeoJSON(),a=vf(s.features[0].geometry.coordinates[0]),l=!1,c=0;return n.eachLayer(g=>{if(l||Qm(r,g))return;let m=g.toGeoJSON(),v=vf(m.features[0].geometry.coordinates[0]);Jm(a,v)&&(Cs(s.features[0],m.features[0])||Yo(s.features[0],m.features[0]))&&(l=!0)}),l}var Wx=(r,n,s,a)=>new gs(n,s,a,l=>{let c=l.layer._layers[Object.keys(l.layer._layers)[0]];Ts.coordsHaveChanged(c._leaflet_id,c._latlngs[0])&&Ts.invalidateCache(l.layer._leaflet_id);let g=new Set;return $m(l.layer,r,g)>Vm?{triggered:!0,severity:3,shortMessage:"We need some space between these camps"}:{triggered:!1}});function vf(r){let n=[null,null,null,null],s=!0;for(let a of r)s?(n[0]=a[0],n[2]=a[0],n[1]=a[1],n[3]=a[1],s=!1):(a[0]<n[0]&&(n[0]=a[0]),a[0]>n[2]&&(n[2]=a[0]),a[1]<n[1]&&(n[1]=a[1]),a[1]>n[3]&&(n[3]=a[1]));return n}function Jm(r,n){return!(n[0]>r[2]||n[2]<r[0]||n[3]<r[1]||n[1]>r[3])}function $m(r,n,s){if(s.has(r._leaflet_id))return 0;s.add(r._leaflet_id);let a;Ts.areaIsCached(r._leaflet_id)?a=Ts.getAreaCache(r._leaflet_id):(a=hs(r.toGeoJSON()),Ts.setAreaCache(r._leaflet_id,a));let l=vf(r.toGeoJSON().features[0].geometry.coordinates[0]),c=Ux.bufferBBox(l,qx);return n.eachLayer(g=>{if(!Qm(r,g)){let m;if(Ts.overlapIsCached(r._leaflet_id,g._leaflet_id))m=Ts.getOverlapCache(r._leaflet_id,g._leaflet_id);else{let v=g.getBounds(),P=[v._southWest.lng,v._southWest.lat,v._northEast.lng,v._northEast.lat];if(!Jm(c,P))m=!1,Ts.setOverlapCache(r._leaflet_id,g._leaflet_id,m);else{let T=g.toGeoJSON(),N;if(T.type==="Feature")N=T.geometry;else if(T.type==="FeatureCollection")N=T.features[0];else throw new Error("unsupported geometry");let G=Ou(r.toGeoJSON(),Wm,{units:"meters"});Cs(G.features[0],N)||Yo(G.features[0],N)?m=!0:m=!1,Ts.setOverlapCache(r._leaflet_id,g._leaflet_id,m)}}m&&(a+=$m(g,n,s))}}),a}function Qm(r,n){return r._leaflet_id===n._leaflet_id}var Kx=(r,n,s,a)=>new gs(n,s,a,l=>{if(l.amplifiedSound===void 0)return{triggered:!1};let c=l.toGeoJSON(),g=!1;return r.eachLayer(m=>{let v=m.toGeoJSON(),x=10,P=120,T=2e3,N=2e3;if(v.features){for(let G=0;G<v.features.length;G++)if(Cs(c,v.features[G])||Yo(v.features[G],c)){if(v.features[G].properties.type=="soundquiet"&&l.amplifiedSound>x){g=!0;return}else if(v.features[G].properties.type=="soundlow"&&l.amplifiedSound>P){g=!0;return}else if(v.features[G].properties.type=="soundmediumlow"&&l.amplifiedSound>T){g=!0;return}else if(v.features[G].properties.type=="soundmedium"&&l.amplifiedSound>N){g=!0;return}}}else if(Cs(c,v)||Yo(v,c)){if(v.properties.type=="soundquiet"&&l.amplifiedSound>x){g=!0;return}else if(v.properties.type=="soundlow"&&l.amplifiedSound>P){g=!0;return}else if(v.properties.type=="soundmediumlow"&&l.amplifiedSound>T){g=!0;return}else if(v.properties.type=="soundmedium"&&l.amplifiedSound>N){g=!0;return}}}),{triggered:g}});var nh=On(Ql());L.PathDraggable=L.Draggable.extend({initialize:function(r){this._path=r,this._canvas=r._map.getRenderer(r)instanceof L.Canvas;var n=this._canvas?this._path._map.getRenderer(this._path)._container:this._path._path;L.Draggable.prototype.initialize.call(this,n,n,!0)},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("drag",r)},_onDown:function(r){var n=r.touches?r.touches[0]:r;this._startPoint=new L.Point(n.clientX,n.clientY),!(this._canvas&&!this._path._containsPoint(this._path._map.mouseEventToLayerPoint(n)))&&L.Draggable.prototype._onDown.call(this,r)}});L.Handler.PathDrag=L.Handler.extend({initialize:function(r){this._path=r},getEvents:function(){return{dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd}},addHooks:function(){this._draggable||(this._draggable=new L.PathDraggable(this._path)),this._draggable.on(this.getEvents(),this).enable(),L.DomUtil.addClass(this._draggable._element,"leaflet-path-draggable")},removeHooks:function(){this._draggable.off(this.getEvents(),this).disable(),L.DomUtil.removeClass(this._draggable._element,"leaflet-path-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._startPoint=this._draggable._startPoint,this._path.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(r){var n=this._path,s=r.originalEvent.touches&&r.originalEvent.touches.length===1?r.originalEvent.touches[0]:r.originalEvent,a=L.point(s.clientX,s.clientY),l=n._map.layerPointToLatLng(a);this._offset=a.subtract(this._startPoint),this._startPoint=a,this._path.eachLatLng(this.updateLatLng,this),n.redraw(),r.latlng=l,r.offset=this._offset,n.fire("drag",r),r.latlng=this._path.getCenter?this._path.getCenter():this._path.getLatLng(),n.fire("move",r)},_onDragEnd:function(r){this._path._bounds&&this.resetBounds(),this._path.fire("moveend").fire("dragend",r)},latLngToLayerPoint:function(r){var n=this._path._map.project(L.latLng(r));return n._subtract(this._path._map.getPixelOrigin())},updateLatLng:function(r){var n=this.latLngToLayerPoint(r);n._add(this._offset);var s=this._path._map.layerPointToLatLng(n);r.lat=s.lat,r.lng=s.lng},resetBounds:function(){this._path._bounds=new L.LatLngBounds,this._path.eachLatLng(function(r){this._bounds.extend(r)})}});L.Path.include({eachLatLng:function(r,n){n=n||this;var s=function(a){for(var l=0;l<a.length;l++)L.Util.isArray(a[l])?s(a[l]):r.call(n,a[l])};s(this.getLatLngs?this.getLatLngs():[this.getLatLng()])}});L.Path.addInitHook(function(){this.dragging=new L.Handler.PathDrag(this),this.options.draggable&&this.once("add",function(){this.dragging.enable()})});var C4=On(t_()),Du=class{constructor(n,s){this._isEditMode=!1;this._mode="none";this._currentLayerFilterStyle="severity";this._selected=null;this._map=n,this._groups=s,this._placementLayers=new Ir.LayerGroup().addTo(n),this._placementBufferLayers=new Ir.LayerGroup().addTo(n),this._ghostLayers=new Ir.LayerGroup().addTo(n),this._placementLayers.addTo(s.placement),this._placementBufferLayers.addTo(s.placement),this._validateEntitiesQueue=new Array,this._lastEnityFetch=0,this._autoRefreshIntervall=90,this._currentRevisions={};var a=this._placementBufferLayers;n.on("zoomend",function(){n.getZoom()>=19?a.getLayers().forEach(function(g){g.setStyle({opacity:1})}):a.getLayers().forEach(function(g){g.setStyle({opacity:0})})});let l=Km(this._groups,this._placementLayers);this._repository=new Nu(l),this._popup=Ir.popup({autoClose:!1,closeButton:!1,closeOnClick:!1,closeOnEscapeKey:!1}),Ir.PM.setOptIn(!0),this._map.pm.addControls({position:"bottomleft",drawPolygon:!1,drawCircle:!1,drawMarker:!1,drawPolyline:!1,drawRectangle:!1,drawCircleMarker:!1,drawText:!1,removalMode:!1,editControls:!1,snappable:!1}),this._map.pm.setPathOptions(gf),this._map.pm.setGlobalOptions({tooltips:!1,allowSelfIntersection:!1,snappable:!0,draggable:!0}),this._map.on("pm:create",this.onNewLayerCreated.bind(this)),this._map.on("click",g=>{console.log("[Editor]","Editor blur event fired (map click)",{mouseEvent:g}),this.setMode("blur")}),this.sqmTooltip=new Ir.Tooltip({permanent:!0,interactive:!1,direction:"center",className:"shape-tooltip"}),this.sqmTooltip.setLatLng([0,0]),this.sqmTooltip.addTo(this._map),this.sqmTooltip.closeTooltip(),this._nameTooltips={},n.on("zoomend",function(){var g=n.getZoom();this.groups.names.getLayers().forEach(function(m){g>=19?m._tooltip.setOpacity(1):m._tooltip.setOpacity(0)})}),document.onkeydown=g=>{this.keyEscapeListener(g)};var c=new Ir.Control.Search({layer:this._placementLayers,propertyName:"name",marker:!1,zoom:19,initial:!1});n.addControl(c)}async setMode(n,s){let a=this._mode,l=this._selected,c=n==a,g=s==l;if(!(c&&g)){if(this._ghostLayers.clearLayers(),n=="blur")if((a=="editing-shape"||a=="moving-shape"||a=="editing-info")&&l){n="selected",s=s||l;let v=s.layer.getBounds().getCenter();this._popup.setLatLng(v)}else n="none",s=void 0;if(console.log("[Editor]","mode changed!",{mode:this._mode,nextMode:n,nextEntity:s}),this._mode=n,this._mode=="none"){this.setSelected(null,l),this.setPopup("none");return}if(this._mode=="selected"&&s){this.setSelected(s,l),this.setPopup("info",s),l&&(l?.layer.pm.disable(),l?.layer._layers[l.layer._leaflet_id-1].dragging.disable());return}if(this._mode=="editing-shape"&&s){s.layer.pm.enable({editMode:!0,snappable:!1}),this.setSelected(s,l),this.setPopup("none");return}if(this._mode=="moving-shape"&&s){this.setSelected(s,l),this.setPopup("none"),this.UpdateOnScreenDisplay(s,"Drag to move"),s.layer._layers[s.layer._leaflet_id-1].dragging.enable();return}if(this._mode=="editing-info"&&s){this.setSelected(s,l),this.setPopup("edit-info",s);return}}}async setSelected(n,s){s&&n!=s&&s.hasChanges()&&await this.onLayerDoneEditing(s),this._isEditMode&&this.UpdateOnScreenDisplay(n),this._selected=n,this.refreshEntity(this._selected)}keyEscapeListener(n){"key"in n&&!(n.key==="Escape"||n.key==="Esc")||this.setMode("blur")}async setPopup(n,s){if(n=="none"||!s){this._popup.close();return}if(n=="info"){let a=document.createElement("div"),l=s.nrOfPeople==="1"?" person,":" people,",c=s.nrOfVehicles==="1"?"> vehicle,":" vehicles,",g=s.name?s.name:"No name yet",m=s.description?s.description:"No description yet, please add one!",v=s.contactInfo?s.contactInfo:"Please add contact info! Without it, your area might be removed.",x=s.powerNeed!=-1?`${s.powerNeed} Watts`:"Please state your power need! Set to 0 if you will not use electricity.",P=s.amplifiedSound!=-1?`${s.amplifiedSound} Watts`:"Please set sound amplification! Set to 0 if you wont have speakers.",T=nh.default.sanitize(m),N=/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim,G=T.replace(N,'<a href="$1" target="_blank">$1</a>');a.innerHTML=`<h2 style="margin-bottom: 0">${nh.default.sanitize(g)}</h2>
                                <p class="scrollable">${G}</p>
                                <p style="font-size:14px; margin-top:0px !important; margin-bottom:0px !important">
                                <b>Contact:</b> ${nh.default.sanitize(v)}   
                                </br>
                                <b style="text-align:right;">Power:</b> ${x}
                                </br>
                                <b style="text-align:right;">Sound:</b> ${P}
                                </p> 

                                <div style="font-size: 14px; color:#5c5c5c; margin-bottom: 10px !important">
                                    <b>${s.area}</b> m\xB2 - 
                                    ${s.nrOfPeople>0?"<b>"+s.nrOfPeople+"</b>"+l:""} 
                                    ${s.nrOfVehicles>0?"<b>"+s.nrOfVehicles+"</b>"+c:""} 
                                    ${s.additionalSqm>0?"<b>"+s.additionalSqm+"</b> m\xB2 other":""}
                                </div>
                                `;let z=s.getAllTriggeredRules().sort((j,R)=>R.severity-j.severity);if(z.length>0){s.supressWarnings||(a.innerHTML+=`<p style="margin-bottom: 0px !important"><b>${z.length}</b> issues found:</p> `);let j=document.createElement("div");j.style.maxHeight="200px",j.style.overflowY="auto",j.style.marginBottom="10px",a.appendChild(j);for(let R of z)R.severity>=3?j.innerHTML+=`<p class="error">${" "+R.message}</p>`:s.supressWarnings||(R.severity>=2?j.innerHTML+=`<p class="warning">${" "+R.message}</p>`:j.innerHTML+=`<p class="info">${" "+R.message}</p>`)}if(this._isEditMode){let j=document.createElement("button");j.innerHTML="Edit shape",j.onclick=D=>{D.stopPropagation(),D.preventDefault(),this.setMode("editing-shape",s)},a.appendChild(j);let R=document.createElement("button");R.innerHTML="Move",R.onclick=D=>{D.stopPropagation(),D.preventDefault(),this.setMode("moving-shape",s)},a.appendChild(R);let B=document.createElement("button");B.innerHTML="Edit info",B.onclick=D=>{D.stopPropagation(),D.preventDefault(),this.setMode("editing-info",s)},a.appendChild(B)}this._popup.setContent(a).openOn(this._map);return}if(n=="edit-info"){let a=document.createElement("div");a.innerHTML="",a.appendChild(document.createElement("label")).innerHTML="Name of camp/dream";let l=document.createElement("input");l.type="text",l.value=s.name,l.maxLength=100,l.placeholder="Enter camp name here..",l.oninput=()=>{s.name=l.value,this.refreshEntity(s)},a.appendChild(l),a.appendChild(document.createElement("br")),a.appendChild(document.createElement("label")).innerHTML="Description";let c=document.createElement("textarea");c.value=s.description,c.maxLength=300,c.placeholder="Describe your camp/dream here as much as you want. Remember that this information is public. 300 characters max.",c.style.height="100px",c.oninput=()=>{s.description=c.value,this.refreshEntity(s),this.UpdateOnScreenDisplay(s)},a.appendChild(c),a.appendChild(document.createElement("label")).innerHTML="Contact info";let g=document.createElement("input");g.type="text",g.value=s.contactInfo,g.placeholder="Email, phone, discord name etc",g.oninput=()=>{s.contactInfo=g.value,this.refreshEntity(s),this.UpdateOnScreenDisplay(s)},a.appendChild(g),a.appendChild(document.createElement("br")),a.appendChild(document.createElement("b")).innerHTML="People";let m=document.createElement("input");m.title="10m\xB2 per person",m.style.width="3em",m.style.marginBottom="7px",m.style.marginLeft="5px",m.type="number",m.value=String(s.nrOfPeople),m.min="0",m.oninput=()=>{s.nrOfPeople=m.value,N(s)},a.appendChild(m);let v=document.createElement("span");v.innerHTML=" x 10m\xB2",v.style.fontSize="12px",v.style.marginRight="25px",a.appendChild(v),a.appendChild(document.createElement("b")).innerHTML=" Vehicles ";let x=document.createElement("input");x.title="70m\xB2 per vehicle",x.style.width="3em",x.style.marginLeft="5px",x.type="number",x.value=String(s.nrOfVehicles),x.min="0",x.oninput=()=>{s.nrOfVehicles=x.value,N(s)},a.appendChild(x);let P=document.createElement("span");P.innerHTML=" x 70m\xB2",P.style.fontSize="12px",a.appendChild(P),a.appendChild(document.createElement("br")),a.appendChild(document.createElement("b")).innerHTML="Other stuff in m\xB2";let T=document.createElement("input");T.title="Area needed for kitchen, storage, workshop tents etc.",T.style.width="6.2em",T.style.marginLeft="116px",T.type="number",T.value=String(s.additionalSqm),T.min="0",T.oninput=()=>{s.additionalSqm=T.value,N(s)},a.appendChild(T);let N=(R,B=null)=>{this.refreshEntity(R),this.UpdateOnScreenDisplay(R);let D=document.getElementById("areaInfo");D||(D=B),D.innerHTML="With this amount of people, vehicles and extra m\xB2 such as art, kitchen tents and structures, a suggested camp size is <b>"+R?.calculatedAreaNeeded+"m\xB2</b>. Currently the area is <b>"+R?.area+"m\xB2.</b>"},G=a.appendChild(document.createElement("div"));G.id="areaInfo",G.style.marginTop="10px",G.style.marginBottom="5px",G.style.fontSize="12px",N(s,G),a.appendChild(document.createElement("b")).innerHTML="Power need (Watts) ";let z=document.createElement("input");z.title=`A water boiler is about 2000W, a fridge is about 100W,
a laptop is about 50W, a phone charger is about 10W.`,z.style.width="5em",z.style.marginTop="7px",z.style.marginBottom="7px",z.style.marginLeft="110px",z.type="number",z.value=String(s.powerNeed),z.placeholder="?",z.min="0",z.oninput=()=>{s.powerNeed=z.value,this.refreshEntity(s),this.UpdateOnScreenDisplay(s)},a.appendChild(z),a.appendChild(document.createElement("br")),a.appendChild(document.createElement("b")).innerHTML="Sound amplification (Watts) ";let j=document.createElement("input");if(j.style.width="5em",j.title=`If over 100W then you are considered a sound camp.
Please get in contact with the sound lead.`,j.style.marginBottom="7px",j.style.marginLeft="58px",j.type="number",j.value=String(s.amplifiedSound),j.min="0",j.placeholder="?",j.oninput=()=>{s.amplifiedSound=j.value,this.refreshEntity(s),this.UpdateOnScreenDisplay(s)},a.appendChild(j),a.appendChild(document.createElement("p")),this._isEditMode){let R=document.createElement("button");R.innerHTML="Ok!",R.style.width="200px",R.onclick=async D=>{D.stopPropagation(),D.preventDefault(),this.setMode("blur")},a.appendChild(R);let B=document.createElement("button");B.innerHTML="More...",B.style.marginRight="0",B.onclick=async D=>{D.stopPropagation(),D.preventDefault(),this.setPopup("more",s)},a.appendChild(B)}a.onkeydown=R=>{"key"in R&&R.key==="Enter"&&"ctrlKey"in R&&R.ctrlKey==!0&&this.setMode("blur")},this._popup.setContent(a).openOn(this._map);return}if(n=="more"){let a=document.createElement("div");a.innerHTML="",a.appendChild(document.createElement("h2")).innerHTML="More stuff";let l=this.formatDate(s.timeStamp),c=a.appendChild(document.createElement("div"));c.innerHTML=`<b>Entity Id: </b> ${s.id}<br><b>Revisions: </b> ${s.revision}<br><b>Last edited:</b> ${l}`,a.appendChild(document.createElement("br"));let g=a.appendChild(document.createElement("a"));g.innerHTML="Click here to copy a link to this entity",g.href="?id="+s.id,g.onclick=G=>(console.log("Copy to clipboard",g.href),G.stopPropagation(),G.preventDefault(),navigator.clipboard.writeText(g.href),!1),a.appendChild(document.createElement("br")),a.appendChild(document.createElement("br")),a.appendChild(document.createElement("b")).innerHTML="Supress yellow warnings";let m=document.createElement("input");m.type="checkbox",m.style.marginLeft="10px",m.checked=s.supressWarnings,m.onchange=()=>{s.supressWarnings=m.checked,this.refreshEntity(s)},a.appendChild(m),a.appendChild(document.createElement("br")),a.appendChild(document.createElement("b")).innerHTML="Custom color ";let v=document.createElement("input");v.type="color",v.style.width="66px",v.style.marginLeft="146px",v.value=s.color,v.onchange=()=>{s.color=v.value,this.refreshEntity(s)},a.appendChild(v),a.appendChild(document.createElement("p"));let x=document.createElement("button");x.classList.add("delete-button"),x.innerHTML="Delete",x.style.width="100%",x.onclick=async G=>{let z=prompt("Are you really sure you should delete this area? Answer why.","");if(z==null||z==""){console.log("Delete nope, deleteReason",z);return}console.log("Delete yes, deleteReason",z),G.stopPropagation(),G.preventDefault(),this.deleteAndRemoveEntity(s,z)},a.appendChild(x);let P=document.createElement("button");P.innerHTML="History",P.style.marginRight="0",P.onclick=async G=>{G.stopPropagation(),G.preventDefault(),this.setPopup("history",s)},a.appendChild(P);let T=a.appendChild(document.createElement("div"));T.innerHTML="Use delete with caution! Only delete things you know is ok. Undelete can only be performed by using black magic.",a.appendChild(document.createElement("br"));let N=document.createElement("button");N.innerHTML="Back",N.style.width="200px",N.onclick=async G=>{G.stopPropagation(),G.preventDefault(),this.setMode("blur")},a.appendChild(N),this._popup.setContent(a).openOn(this._map);return}if(n=="history"){let a=document.createElement("div");a.innerHTML="",a.appendChild(document.createElement("h2")).innerHTML="Edit-History";let l=this.formatDate(s.timeStamp),c=a.appendChild(document.createElement("div"));c.innerHTML=`<b>Entity Id: </b> ${s.id}<br><b>Name: </b> ${s.name}<br><b>Revisions: </b> ${s.revision}<br><b>Last edited:</b> ${l}`,a.appendChild(document.createElement("br"));let g=document.createElement("div"),m=document.createElement("div"),v=document.createElement("div"),x=document.createElement("h3");x.innerText="Description",m.append(x),m.append(v),g.id="history-table",a.appendChild(g),v.id="change-description",a.appendChild(m);let P=document.createElement("table");g.appendChild(P);let N=P.createTHead().insertRow();N.insertCell().innerText="Revision",N.insertCell().innerText="Timestamp",N.insertCell().innerText="What Changed";let G=P.createTBody();await this._repository.getRevisionsForEntity(s);let z=[],j=null,R=null,B={color:"#ff0000",fillColor:"#000000",fillOpacity:.5,weight:5};for(let A in s.revisions){let q=document.createElement("ul"),H=document.createElement("tr");j=s.revisions[A],H.insertCell().innerText=j.revision,H.insertCell().innerText=this.formatDate(j.timeStamp,"short","medium"),H.insertCell().append(q);let K=this.getEntityDifferences(j,R);for(let et in K){let X=K[et],lt=document.createElement("li");lt.innerText=X.changeShort;let gt=document.createElement("a");gt.href="#",gt.innerText=" Show",gt.title="Show a detailed description about this change.",gt.onclick=()=>{let Et=s.revisions[A];x.innerText=`Description of revision ${A}`,v.innerText=`${X.changeLong}

`;let Q=Ir.DomUtil.create("button","history-button");Q.title=`Restores detailes from revision ${A}.`,Q.textContent="\u26A0 Restore Details",Q.onclick=()=>{console.log(`Restores detailes from revision ${A}.`),s.name=s.revisions[A].name,s.description=s.revisions[A].description,s.contactInfo=s.revisions[A].contactInfo,s.nrOfPeople=s.revisions[A].nrOfPeople,s.nrOfVehicles=s.revisions[A].nrOfVehicles,s.additionalSqm=s.revisions[A].additionalSqm,s.powerNeed=s.revisions[A].powerNeed,s.amplifiedSound=s.revisions[A].amplifiedSound,s.color=s.revisions[A].color,s.supressWarnings=s.revisions[A].supressWarnings},v.append(Q);let kt=Ir.DomUtil.create("button","history-button");kt.title=`Restores shape from revision ${A}.`,kt.textContent="\u26A0 Restore Shape",kt.onclick=()=>{console.log(`Restores shape from revision ${A}.`),this.removeEntityNameTooltip(s),this.removeEntityFromLayers(s),s.layer=s.revisions[A].layer,this.addEntityToMap(s)},v.append(kt),this._ghostLayers.clearLayers(),Et.layer.setStyle(B),this._ghostLayers.addLayer(Et.layer)},lt.append(gt),q.append(lt)}z.push(H),R=j}z.slice().reverse().forEach(function(A){G.append(A)});let D=document.createElement("button");D.innerHTML="Back",D.style.width="200px",D.onclick=async A=>{A.stopPropagation(),A.preventDefault(),this.setMode("blur")},a.appendChild(D),this._popup.setContent(a).openOn(this._map);return}}async onLayerClicked(n){console.log("[Editor]","Click event fired",{entity:n}),this.setMode("selected",n)}async onLayerDoneEditing(n){console.log("[Editor]","onLayerDoneEditing!",{selected:this._selected}),n.layer.pm.disable(),this.UpdateOnScreenDisplay(null),await this._repository.getRevisionsForEntity(n);let s;for(let c in n.revisions)s=c;let a=n.revisions[s];if(n.revision!=a.revision){let c=this.getEntityDifferences(a,n),g=`Description Changed, someone have saved a revision ${a.revision} since this revision ${n.revision} opened.
`;for(let m in c)g+=`* ${c[m].changeLong}
`;g+=`
Description has changed to this diff. Open version history if unsure what happened. You find ut under Edit info>More>History.`,console.log(g),n.description=`${g}

Original description:
${n.description}`,alert(g)}if(this.isAreaTooBig(n.toGeoJSON())){alert("The area of the polygon is waaay to big. It will not be saved, please change it.");return}let l=await this._repository.updateEntity(n);l&&(this.removeEntity(n,!1),this.addEntityToMap(l),Ds("Saved!","success"))}async onNewLayerCreated(n){console.log("[Editor]","Create event fired",{createEvent:n});let{layer:s}=n,a=s.toGeoJSON();if(this.isAreaTooBig(a)){alert("The area of the polygon is waaay to big. Draw something smaller."),this._map.removeLayer(s);return}let l=await this._repository.createEntity(a);if(l){this.addEntityToMap(l),this._map.removeLayer(s);let g=l.layer.getBounds().getCenter();this._popup.setLatLng(g),this.setMode("editing-info",l),Ds("Saved!","success")}}createEntityTooltip(n){let s=new Ir.Marker(n.layer.getBounds().getCenter(),{opacity:0});return s.feature={type:"Feature",geometry:{type:"Point",coordinates:[0,0]},properties:{}},s.options.icon.options.iconSize=[1,1],s.bindTooltip(n.name,{permanent:!0,interactive:!1,direction:"center",className:"name-tooltip"}),n.nameMarker=s,s}addEntityToMap(n,s=!0){this._currentRevisions[n.id]=n,n.layer.on("click",({latlng:a})=>{console.log(a),this._popup.setLatLng(a),this.onLayerClicked(n)}),this._nameTooltips[n.id]=this.createEntityTooltip(n),this._nameTooltips[n.id].addTo(this._groups.names),n.layer.on("pm:markerdrag",()=>{n.updateBufferedLayer(),this.refreshEntity(n),this.UpdateOnScreenDisplay(n)}),n.layer.on("pm:markerdragend",()=>{this.isAreaTooBig(n.toGeoJSON())&&alert("The area of the polygon is waaay to big. Draw something smaller, this wont be saved anyways.")}),n.layer._layers[n.layer._leaflet_id-1].on("drag",()=>{n.updateBufferedLayer(),this.refreshEntity(n),this.UpdateOnScreenDisplay(null)}),n.layer.on("pm:vertexremoved",()=>{n.updateBufferedLayer(),this.refreshEntity(n),this.UpdateOnScreenDisplay(n)}),this._placementLayers.addLayer(n.layer),this._placementBufferLayers.addLayer(n.bufferLayer),this._map.getZoom()<19&&n.bufferLayer.setStyle({opacity:0}),s&&this.refreshEntity(n)}refreshEntity(n,s=!0){if(n==null)return;let a=n.nameMarker,l=n.nameMarker.getLatLng(),c=n.layer.getBounds().getCenter();(c.lat!=l.lat||c.lng!=l.lng)&&n.nameMarker.setLatLng(c),n.nameMarker._tooltip._content!=n.name&&n.nameMarker.setTooltipContent(n.name);var g=this._map.getZoom();g>=19?this._nameTooltips[n.id]._tooltip.setOpacity(1):this._nameTooltips[n.id]._tooltip.setOpacity(0),s&&n.checkAllRules(),n.setLayerStyle(this._currentLayerFilterStyle)}refreshAllEntities(n=!0){for(let s in this._currentRevisions)this.refreshEntity(this._currentRevisions[s],n)}refreshEntitiesSlow(n=null){if(Ds("Validating..."),n)this._validateEntitiesQueue=n;else for(let s in this._currentRevisions)this._validateEntitiesQueue.push(this._currentRevisions[s]);this.validateSlowly()}validateSlowly(){let n=0;for(;this._validateEntitiesQueue.length>0&&n<50;){let s=this._validateEntitiesQueue.pop();n=n+1,this.refreshEntity(s,!0)}this._validateEntitiesQueue.length==0?Ds("Validation done","success"):setTimeout(()=>{this.validateSlowly()},50)}setLayerFilter(n,s=!0){this._currentLayerFilterStyle=n,this.refreshAllEntities(s)}isAreaTooBig(n){return hs(n)>5e3}deleteAndRemoveEntity(n,s=null){this._selected=null,this.setMode("none"),this.removeEntity(n),this._repository.deleteEntity(n,s)}removeEntityNameTooltip(n){n.nameMarker.unbindTooltip(),this._groups.names.removeLayer(n.nameMarker),n.nameMarker=null,delete this._nameTooltips[n.id]}removeEntityFromLayers(n){this._placementLayers.removeLayer(n.layer),this._placementBufferLayers.removeLayer(n.bufferLayer),this._map.removeLayer(n.layer),this._map.removeLayer(n.bufferLayer)}removeEntity(n,s=!0){this.removeEntityNameTooltip(n),this.removeEntityFromLayers(n),delete this._currentRevisions[n.id],s&&this._repository.remove(n)}addToggleEditButton(){if(!0){let n=Ir.Control.extend({options:{position:"bottomleft"},onAdd:()=>{let s=Ir.DomUtil.create("button","btn btn-gradient1 button-shake-animate");return s.title="Edit",s.textContent="Edit",Ir.DomEvent.disableClickPropagation(s),s.onclick=()=>{this.toggleEditMode(),s.textContent=this._isEditMode?"Done":"Edit",s.title=this._isEditMode?"Done":"Edit"},s}});this._map.addControl(new n)}if(mf){let n=Ir.Control.extend({options:{position:"bottomleft"},onAdd:()=>{var s=Ir.DomUtil.create("p","btn btn-gradient1 button-shake-animate");return s.innerHTML+=mf,s}});this._map.addControl(new n)}}formatDate(n,s="short",a="short"){return new Date(Date.parse(n)).toLocaleString("sv",{dateStyle:s,timeStyle:a})}getEntityDifferences(n,s){let a=[];if(s==null)return a.push({what:"Created",changeShort:"Created",changeLong:"Someone created this entity."}),a;n.isDeleted!=s.isDeleted&&a.push({what:"Deleted",changeShort:"Is Deleted",changeLong:`Is Deleted due to ${n.deleteReason}.`}),n.name!=s.name&&a.push({what:"Name",changeShort:"Name Changed",changeLong:`Someone changed the name from ${s.name} to ${n.name}.`}),n.description!=s.description&&a.push({what:"Description",changeShort:"Description Changed",changeLong:`Someone changed the description from ${s.description} to ${n.description}.`}),n.contactInfo!=s.contactInfo&&a.push({what:"Contact Info",changeShort:"Contact Info Changed",changeLong:`Someone changed the contact info from ${s.contactInfo} to ${n.contactInfo}.`}),n.nrOfPeople!=s.nrOfPeople&&a.push({what:"NrOfPeople",changeShort:"NrOfPeople Changed",changeLong:`Someone changed the number of people from ${s.nrOfPeople} to ${n.nrOfPeople}.`}),n.nrOfVehicles!=s.nrOfVehicles&&a.push({what:"NrOfVehicles",changeShort:"NrOfVehicles Changed",changeLong:`Someone changed the number of vehicles from ${s.nrOfVehicles} to ${n.nrOfVehicles}.`}),n.additionalSqm!=s.additionalSqm&&a.push({what:"AdditionalSqm",changeShort:"AdditionalSqm Changed",changeLong:`Someone changed additional Sqm from ${s.additionalSqm} to ${n.additionalSqm}.`}),n.powerNeed!=s.powerNeed&&a.push({what:"PowerNeed",changeShort:"PowerNeed Changed",changeLong:`Someone changed power need from ${s.powerNeed} to ${n.powerNeed}.`}),n.amplifiedSound!=s.amplifiedSound&&a.push({what:"AmplifiedSound",changeShort:"AmplifiedSound Changed",changeLong:`Someone changed amplified sound from ${s.amplifiedSound} to ${n.amplifiedSound}.`}),n.color!=s.color&&a.push({what:"Color",changeShort:"Color Changed",changeLong:`Someone changed color from ${s.color} to ${n.color}.`}),n.supressWarnings!=s.supressWarnings&&a.push({what:"SupressWarnings",changeShort:"SupressWarnings Changed",changeLong:`Someone changed supress warnings from ${s.supressWarnings} to ${n.supressWarnings}.`});let l=JSON.stringify(n.toGeoJSON().geometry),c=JSON.stringify(s.toGeoJSON().geometry);return l!=c&&a.push({what:"GeoJson",changeShort:"Polygon Changed",changeLong:"Someone changed the polygon."}),a.length==0&&a.push({what:"NoDifference",changeShort:"No difference",changeLong:"No difference detected between revisions."}),a}async toggleEditMode(){if(!!0){this._isEditMode=!1;return}this._isEditMode=!this._isEditMode,this._isEditMode&&localStorage.getItem("hasSeenEditorInstructions")==null&&Af([{file:"entering_edit_mode",position:"bottom"},{file:"entering_edit_mode_page_two",position:"bottom",onClose:()=>{localStorage.setItem("hasSeenEditorInstructions","true")}}]),this.setPopup("info",this._selected),this._isEditMode==!1&&this._mode!="selected"&&this.setMode("none"),this._map.pm.addControls({drawPolygon:this._isEditMode}),this._map.pm.Toolbar.changeActionsOfControl("Polygon",["cancel"])}async addAPIEntities(){Ds("Loading your drawn polygons from da interweb!");let n=await this._repository.entities();this._lastEnityFetch=new Date().getTime()/1e3;for(let s of n)this.addEntityToMap(s,!1);this.refreshAllEntities(!1),setTimeout(()=>{this.refreshEntitiesSlow()},100),this.addToggleEditButton()}async checkForUpdatedEntities(){if(this._isEditMode==!1){var n=new Date().getTime()/1e3;if(n-this._lastEnityFetch>this._autoRefreshIntervall){this._lastEnityFetch=n;let s=await this._repository.reload(),a=new Array,l=new Array;for(let c of s.refreshedAdded){let g=this._repository.getEntityById(c);l.push(`Add new entity ${g.id} ${g.name}`),this.addEntityToMap(g,!1),a.push(g)}for(let c of s.refreshedDeleted){let g=this._currentRevisions[c];l.push(`Removed entity ${g.id} ${g.name}`),this.removeEntity(g)}for(let c of s.refreshedUpdated){let g=this._repository.getEntityById(c);l.push(`Updated entity ${g.id} ${g.name}`),this.removeEntity(this._currentRevisions[c],!1),this.addEntityToMap(g,!1),a.push(g)}l.length>0&&(console.log("Fetched latest changes from map",new Date().toISOString(),l),this.refreshAllEntities(!1)),a.length>0&&this.refreshEntitiesSlow(a)}}setTimeout(()=>{this.checkForUpdatedEntities()},1e4)}gotoEntity(n){let s=this._repository.getEntityById(n);if(s){let a=s.layer.getBounds().getCenter();this._map.setView(a,19),this._popup.setLatLng(a),this.onLayerClicked(s)}}UpdateOnScreenDisplay(n,s=null){if(n||s){let a="";if(s)a=s;else{a=n.area+"m\xB2";for(let l of n.getAllTriggeredRules())l.severity>=2&&(a+="<br>"+l.shortMessage)}this.sqmTooltip.openOn(this._map),this.sqmTooltip.setLatLng(n.layer.getBounds().getCenter()),this.sqmTooltip.setContent(a)}else this.sqmTooltip.close()}};var n_=async()=>{let r=new Set(["Placement","Placement_map","POI"]),n=ii.default.map("map",{zoomControl:!1,maxZoom:21,drawControl:!0,attributionControl:!1}).setView([57.6226,14.9276],16);n.groups={placement:new ii.default.LayerGroup,mapstuff:new ii.default.LayerGroup,neighbourhoods:new ii.default.LayerGroup,quarters:new ii.default.LayerGroup,plazas:new ii.default.LayerGroup,poi:new ii.default.LayerGroup},n.groups.googleSatellite=ii.default.tileLayer("https://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}",{maxZoom:21,maxNativeZoom:20,subdomains:["mt0","mt1","mt2","mt3"]}).addTo(n),fetch("./data/analysis/contours.geojson").then(v=>v.json()).then(v=>{ii.default.geoJSON(v.features,{style:{color:"#ffffff",weight:1,opacity:.5}}).addTo(n.groups.mapstuff)}),await Ja(n,"type","./data/bl24/placement_areas.geojson"),await Ja(n,"type","./data/bl24/borders.geojson"),await Ja(n,"type","./data/bl24/roads_and_distances.geojson"),await Ja(n,"type","./data/bl24/plazas.geojson"),n.groups.propertyborder.addTo(n.groups.mapstuff),n.removeLayer(n.groups.propertyborder),n.groups.minorroad.addTo(n.groups.mapstuff),n.removeLayer(n.groups.minorroad),n.groups.fireroad.addTo(n.groups.mapstuff),n.removeLayer(n.groups.fireroad),n.groups.area.addTo(n.groups.mapstuff),n.removeLayer(n.groups.area),n.groups.hiddenforbidden.addTo(n.groups.mapstuff),n.groups.container.addTo(n.groups.mapstuff),n.removeLayer(n.groups.container),n.groups.parking.addTo(n.groups.mapstuff),n.removeLayer(n.groups.parking),n.groups.toilet.addTo(n.groups.mapstuff),n.removeLayer(n.groups.toilet),n.groups.bridge.addTo(n.groups.mapstuff),n.removeLayer(n.groups.bridge),n.groups.names=new ii.default.LayerGroup,n.groups.names.addTo(n),n.groups.soundguide=new ii.default.LayerGroup,n.groups.bluesoundzone.addTo(n.groups.soundguide),n.removeLayer(n.groups.bluesoundzone),n.groups.greensoundzone.addTo(n.groups.soundguide),n.removeLayer(n.groups.greensoundzone),n.groups.yellowsoundzone.addTo(n.groups.soundguide),n.removeLayer(n.groups.yellowsoundzone),n.groups.orangesoundzone.addTo(n.groups.soundguide),n.removeLayer(n.groups.orangesoundzone),n.groups.redsoundzone.addTo(n.groups.soundguide),n.on("overlayadd",function(v){n.groups.names.setZIndex(101),v.name==="Soundguide"&&(n.groups.bluesoundzone.bringToBack(),n.groups.greensoundzone.bringToBack(),n.groups.yellowsoundzone.bringToBack(),n.groups.orangesoundzone.bringToBack(),n.groups.redsoundzone.bringToBack())}),n.groups.terrain=await Rf(n,"./data/terrain.png",[[57.615642290070426,14.915097173672454],[57.62912303949617,14.936217846229036]]),n.groups.heightmap=ii.default.tileLayer("./data/analysis/height/{z}/{x}/{y}.jpg",{minZoom:13,maxZoom:21,minNativeZoom:16,maxNativeZoom:17,tms:!1}),n.groups.slopemap=ii.default.tileLayer("./data/analysis/slope/{z}/{x}/{y}.png",{minZoom:13,maxZoom:21,minNativeZoom:16,maxNativeZoom:17,tms:!1}),n.groups.aftermath=ii.default.tileLayer("./data/bl23/aftermath/{z}/{x}/{y}.png",{minZoom:0,maxZoom:21,minNativeZoom:0,maxNativeZoom:20,tms:!1}),n.groups.aftermath22=ii.default.tileLayer("./data/bl22/aftermath/{z}/{x}/{y}.png",{minZoom:0,maxZoom:21,minNativeZoom:0,maxNativeZoom:20,tms:!1}),n.groups.plaza.addTo(n.groups.plazas),n.removeLayer(n.groups.plaza);var s={Placement_map:n.groups.mapstuff,POI:n.groups.poi,Soundguide:n.groups.soundguide,Slope:n.groups.slopemap,Height:n.groups.heightmap,Terrain:n.groups.terrain,Plazas:n.groups.plazas,Placement:n.groups.placement,Names:n.groups.names,Neighbourhoods:n.groups.neighbourhoods,Quarters:n.groups.quarters,Aftermath22:n.groups.aftermath22,Aftermath23:n.groups.aftermath};let a=new Du(n,n.groups),l=ii.default.Control.extend({options:{position:"topleft"},onAdd:()=>{let v=ii.default.DomUtil.create("button","leaflet-bar help-button");return v.title="Guide to the placement process",v.textContent="\u26D1\uFE0F",ii.default.DomEvent.disableClickPropagation(v),v.onclick=()=>{os({file:"guide-home",position:"end",onClose:()=>{localStorage.setItem("hasSeenPlacementWelcome","true")}})},v}});n.addControl(new l),ii.default.control.polylineMeasure({measureControlLabel:"&#128207;",arrow:{color:"#0000"}}).addTo(n),n.on("hashmetainit",function(v){ss.decode(v.meta),ss.layers.filter(x=>x in s).forEach(x=>r.add(x)),r.forEach(x=>n.addLayer(s[x]))}),n.on("overlayadd",function(v){r.add(v.name),ss.layers=r}),n.on("overlayremove",function(v){r.delete(v.name),ss.layers=r}),ss.map=n,ss.layers=r,await Cf(n.groups.poi),Sf(n.groups.quarters),kf(n.groups.plazas),Tf(n.groups.neighbourhoods),await If(n,s,r),await a.addAPIEntities(),n.groups.placement.addTo(n);let m=new URLSearchParams(window.location.search).get("id");m&&a.gotoEntity(m),Ds("Loaded everything!","success")};async function Jx(){try{await n_()}catch(r){console.error(r)}localStorage.getItem("hasSeenPlacementWelcome")||os({file:"welcome",position:"bottom",onClose:()=>{localStorage.setItem("hasSeenPlacementWelcome","true")}})}Jx();})();
/*! Bundled license information:

leaflet/dist/leaflet-src.js:
  (* @preserve
   * Leaflet 1.9.3, a JS library for interactive maps. https://leafletjs.com
   * (c) 2010-2022 Vladimir Agafonkin, (c) 2010-2011 CloudMade
   *)

leaflet.locatecontrol/src/L.Control.Locate.js:
  (*!
  Copyright (c) 2016 Dominik Moritz
  
  This file is part of the leaflet locate control. It is licensed under the MIT license.
  You can find the project at: https://github.com/domoritz/leaflet-locatecontrol
  *)

object-assign/index.js:
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)

polygon-clipping/dist/polygon-clipping.umd.js:
  (**
   * splaytree v3.1.0
   * Fast Splay tree for Node and browser
   *
   * @author Alexander Milevski <info@w8r.name>
   * @license MIT
   * @preserve
   *)

dompurify/dist/purify.js:
  (*! @license DOMPurify 3.0.2 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.2/LICENSE *)

@turf/isolines/dist/es/index.js:
  (**
   * @license GNU Affero General Public License.
   * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
   * v. 1.2.0
   * https://github.com/RaumZeit/MarchingSquares.js
   *
   * MarchingSquaresJS is free software: you can redistribute it and/or modify
   * it under the terms of the GNU Affero General Public License as published by
   * the Free Software Foundation, either version 3 of the License, or
   * (at your option) any later version.
   *
   * MarchingSquaresJS is distributed in the hope that it will be useful,
   * but WITHOUT ANY WARRANTY; without even the implied warranty of
   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   * GNU Affero General Public License for more details.
   *
   * As additional permission under GNU Affero General Public License version 3
   * section 7, third-party projects (personal or commercial) may distribute,
   * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
   * requirement that said third-party project for that reason alone becomes
   * subject to any requirement of the GNU Affero General Public License version 3.
   * Any modifications to MarchingSquaresJS, however, must be shared with the public
   * and made available.
   *
   * In summary this:
   * - allows you to use MarchingSquaresJS at no cost
   * - allows you to use MarchingSquaresJS for both personal and commercial purposes
   * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
   *   license as long as this license notice is included
   * - enables you to keep the source code of your program that uses MarchingSquaresJS
   *   undisclosed
   * - forces you to share any modifications you have made to MarchingSquaresJS,
   *   e.g. bug-fixes
   *
   * You should have received a copy of the GNU Affero General Public License
   * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
   *)

@turf/isobands/dist/es/index.js:
  (*!
   * @license GNU Affero General Public License.
   * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
   * v. 1.2.0
   * https://github.com/RaumZeit/MarchingSquares.js
   *
   * MarchingSquaresJS is free software: you can redistribute it and/or modify
   * it under the terms of the GNU Affero General Public License as published by
   * the Free Software Foundation, either version 3 of the License, or
   * (at your option) any later version.
   *
   * MarchingSquaresJS is distributed in the hope that it will be useful,
   * but WITHOUT ANY WARRANTY; without even the implied warranty of
   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   * GNU Affero General Public License for more details.
   *
   * As additional permission under GNU Affero General Public License version 3
   * section 7, third-party projects (personal or commercial) may distribute,
   * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
   * requirement that said third-party project for that reason alone becomes
   * subject to any requirement of the GNU Affero General Public License version 3.
   * Any modifications to MarchingSquaresJS, however, must be shared with the public
   * and made available.
   *
   * In summary this:
   * - allows you to use MarchingSquaresJS at no cost
   * - allows you to use MarchingSquaresJS for both personal and commercial purposes
   * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
   *   license as long as this license notice is included
   * - enables you to keep the source code of your program that uses MarchingSquaresJS
   *   undisclosed
   * - forces you to share any modifications you have made to MarchingSquaresJS,
   *   e.g. bug-fixes
   *
   * You should have received a copy of the GNU Affero General Public License
   * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
   *)
*/
